webpackJsonp([0],[,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var o=function(e,t,n,o,a,r,i,l){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,o,a,r,i,l],c=0;s=new Error(t.replace(/%s/g,function(){return u[c++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}};e.exports=o},,,,,,,,,,,,,,,function(e,t,n){"use strict";t.__esModule=!0;var o=(t.addLeadingSlash=function(e){return"/"===e.charAt(0)?e:"/"+e},t.stripLeadingSlash=function(e){return"/"===e.charAt(0)?e.substr(1):e},t.hasBasename=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)});t.stripBasename=function(e,t){return o(e,t)?e.substr(t.length):e},t.stripTrailingSlash=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},t.parsePath=function(e){var t=e||"/",n="",o="",a=t.indexOf("#");-1!==a&&(o=t.substr(a),t=t.substr(0,a));var r=t.indexOf("?");return-1!==r&&(n=t.substr(r),t=t.substr(0,r)),{pathname:t,search:"?"===n?"":n,hash:"#"===o?"":o}},t.createPath=function(e){var t=e.pathname,n=e.search,o=e.hash,a=t||"/";return n&&"?"!==n&&(a+="?"===n.charAt(0)?n:"?"+n),o&&"#"!==o&&(a+="#"===o.charAt(0)?o:"#"+o),a}},function(e,t,n){"use strict";n.d(t,"d",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"f",function(){return r}),n.d(t,"g",function(){return i}),n.d(t,"e",function(){return l}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return u});var o=function(e){return"/"===e.charAt(0)?e:"/"+e},a=function(e){return"/"===e.charAt(0)?e.substr(1):e},r=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)},i=function(e,t){return r(e,t)?e.substr(t.length):e},l=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},s=function(e){var t=e||"/",n="",o="",a=t.indexOf("#");-1!==a&&(o=t.substr(a),t=t.substr(0,a));var r=t.indexOf("?");return-1!==r&&(n=t.substr(r),t=t.substr(0,r)),{pathname:t,search:"?"===n?"":n,hash:"#"===o?"":o}},u=function(e){var t=e.pathname,n=e.search,o=e.hash,a=t||"/";return n&&"?"!==n&&(a+="?"===n.charAt(0)?n:"?"+n),o&&"#"!==o&&(a+="#"===o.charAt(0)?o:"#"+o),a}},,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return s});var o=n(99),a=n(100),r=n(32),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=function(e,t,a,l){var s=void 0;"string"==typeof e?(s=n.i(r.a)(e),s.state=t):(s=i({},e),void 0===s.pathname&&(s.pathname=""),s.search?"?"!==s.search.charAt(0)&&(s.search="?"+s.search):s.search="",s.hash?"#"!==s.hash.charAt(0)&&(s.hash="#"+s.hash):s.hash="",void 0!==t&&void 0===s.state&&(s.state=t));try{s.pathname=decodeURI(s.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+s.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return a&&(s.key=a),l?s.pathname?"/"!==s.pathname.charAt(0)&&(s.pathname=n.i(o.default)(s.pathname,l.pathname)):s.pathname=l.pathname:s.pathname||(s.pathname="/"),s},s=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&n.i(a.default)(e.state,t.state)}},,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(146),a=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=a.default},,,,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.locationsAreEqual=t.createLocation=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=n(99),i=o(r),l=n(100),s=o(l),u=n(31);t.createLocation=function(e,t,n,o){var r=void 0;"string"==typeof e?(r=(0,u.parsePath)(e),r.state=t):(r=a({},e),void 0===r.pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==t&&void 0===r.state&&(r.state=t));try{r.pathname=decodeURI(r.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(r.key=n),o?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=(0,i.default)(r.pathname,o.pathname)):r.pathname=o.pathname:r.pathname||(r.pathname="/"),r},t.locationsAreEqual=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&(0,s.default)(e.state,t.state)}},function(e,t,n){"use strict";t.__esModule=!0;var o=n(10),a=function(e){return e&&e.__esModule?e:{default:e}}(o),r=function(){var e=null,t=function(t){return(0,a.default)(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},n=function(t,n,o,r){if(null!=e){var i="function"==typeof e?e(t,n):e;"string"==typeof i?"function"==typeof o?o(i,r):((0,a.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),r(!0)):r(!1!==i)}else r(!0)},o=[];return{setPrompt:t,confirmTransitionTo:n,appendListener:function(e){var t=!0,n=function(){t&&e.apply(void 0,arguments)};return o.push(n),function(){t=!1,o=o.filter(function(e){return e!==n})}},notifyListeners:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.forEach(function(e){return e.apply(void 0,t)})}}};t.default=r},function(e,t,n){"use strict";var o=n(10),a=n.n(o),r=function(){var e=null,t=function(t){return a()(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},n=function(t,n,o,r){if(null!=e){var i="function"==typeof e?e(t,n):e;"string"==typeof i?"function"==typeof o?o(i,r):(a()(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),r(!0)):r(!1!==i)}else r(!0)},o=[];return{setPrompt:t,confirmTransitionTo:n,appendListener:function(e){var t=!0,n=function(){t&&e.apply(void 0,arguments)};return o.push(n),function(){t=!1,o=o.filter(function(e){return e!==n})}},notifyListeners:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.forEach(function(e){return e.apply(void 0,t)})}}};t.a=r},,function(e,t,n){"use strict";var o=n(54);t.a=o.a},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(10),l=n.n(i),s=n(16),u=n.n(s),c=n(0),d=n.n(c),p=n(1),f=n.n(p),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},m=function(e){function t(){var n,r,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=r=a(this,e.call.apply(e,[this].concat(s))),r.state={match:r.computeMatch(r.props.history.location.pathname)},i=n,a(r,i)}return r(t,e),t.prototype.getChildContext=function(){return{router:h({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,o=t.history;u()(null==n||1===d.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=o.listen(function(){e.setState({match:e.computeMatch(o.location.pathname)})})},t.prototype.componentWillReceiveProps=function(e){l()(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?d.a.Children.only(e):null},t}(d.a.Component);m.propTypes={history:f.a.object.isRequired,children:f.a.node},m.contextTypes={router:f.a.object},m.childContextTypes={router:f.a.object.isRequired},t.a=m},function(e,t,n){"use strict";var o=n(170),a=n.n(o),r={},i=0,l=function(e,t){var n=""+t.end+t.strict+t.sensitive,o=r[n]||(r[n]={});if(o[e])return o[e];var l=[],s=a()(e,l,t),u={re:s,keys:l};return i<1e4&&(o[e]=u,i++),u},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof t&&(t={path:t});var n=t,o=n.path,a=void 0===o?"/":o,r=n.exact,i=void 0!==r&&r,s=n.strict,u=void 0!==s&&s,c=n.sensitive,d=void 0!==c&&c,p=l(a,{end:i,strict:u,sensitive:d}),f=p.re,h=p.keys,m=f.exec(e);if(!m)return null;var y=m[0],v=m.slice(1),g=e===y;return i&&!g?null:{path:a,url:"/"===a&&""===y?"/":y,isExact:g,params:h.reduce(function(e,t,n){return e[t.name]=v[n],e},{})}};t.a=s},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(189);n.d(t,"BrowserRouter",function(){return o.a});var a=n(190);n.d(t,"HashRouter",function(){return a.a});var r=n(94);n.d(t,"Link",function(){return r.a});var i=n(191);n.d(t,"MemoryRouter",function(){return i.a});var l=n(192);n.d(t,"NavLink",function(){return l.a});var s=n(193);n.d(t,"Prompt",function(){return s.a});var u=n(194);n.d(t,"Redirect",function(){return u.a});var c=n(95);n.d(t,"Route",function(){return c.a});var d=n(53);n.d(t,"Router",function(){return d.a});var p=n(195);n.d(t,"StaticRouter",function(){return p.a});var f=n(196);n.d(t,"Switch",function(){return f.a});var h=n(197);n.d(t,"matchPath",function(){return h.a});var m=n(198);n.d(t,"withRouter",function(){return m.a})},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(145),a=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(152),a=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=a.default},,,,,,function(e,t,n){"use strict";t.__esModule=!0;t.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),t.addEventListener=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},t.removeEventListener=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},t.getConfirmation=function(e,t){return t(window.confirm(e))},t.supportsHistory=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},t.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},t.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},t.isExtraneousPopstateEvent=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"e",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return s}),n.d(t,"b",function(){return u}),n.d(t,"h",function(){return c});var o=!("undefined"==typeof window||!window.document||!window.document.createElement),a=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},r=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},i=function(e,t){return t(window.confirm(e))},l=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},s=function(){return-1===window.navigator.userAgent.indexOf("Trident")},u=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},c=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}},,,,,,,function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(0),s=n.n(l),u=n(1),c=n.n(u),d=n(16),p=n.n(d),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},h=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},m=function(e){function t(){var n,o,i;a(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=o=r(this,e.call.apply(e,[this].concat(s))),o.handleClick=function(e){if(o.props.onClick&&o.props.onClick(e),!e.defaultPrevented&&0===e.button&&!o.props.target&&!h(e)){e.preventDefault();var t=o.context.router.history,n=o.props,a=n.replace,r=n.to;a?t.replace(r):t.push(r)}},i=n,r(o,i)}return i(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,a=o(e,["replace","to","innerRef"]);p()(this.context.router,"You should not use <Link> outside a <Router>");var r=this.context.router.history.createHref("string"==typeof t?{pathname:t}:t);return s.a.createElement("a",f({},a,{onClick:this.handleClick,href:r,ref:n}))},t}(s.a.Component);m.propTypes={onClick:c.a.func,target:c.a.string,replace:c.a.bool,to:c.a.oneOfType([c.a.string,c.a.object]).isRequired,innerRef:c.a.oneOfType([c.a.string,c.a.func])},m.defaultProps={replace:!1},m.contextTypes={router:c.a.shape({history:c.a.shape({push:c.a.func.isRequired,replace:c.a.func.isRequired,createHref:c.a.func.isRequired}).isRequired}).isRequired},t.a=m},function(e,t,n){"use strict";var o=n(96);t.a=o.a},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(10),l=n.n(i),s=n(16),u=n.n(s),c=n(0),d=n.n(c),p=n(1),f=n.n(p),h=n(55),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},y=function(e){return 0===d.a.Children.count(e)},v=function(e){function t(){var n,r,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=r=a(this,e.call.apply(e,[this].concat(s))),r.state={match:r.computeMatch(r.props,r.context.router)},i=n,a(r,i)}return r(t,e),t.prototype.getChildContext=function(){return{router:m({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var o=e.computedMatch,a=e.location,r=e.path,i=e.strict,l=e.exact,s=e.sensitive;if(o)return o;u()(t,"You should not use <Route> or withRouter() outside a <Router>");var c=t.route,d=(a||c.location).pathname;return r?n.i(h.a)(d,{path:r,strict:i,exact:l,sensitive:s}):c.match},t.prototype.componentWillMount=function(){l()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),l()(!(this.props.component&&this.props.children&&!y(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),l()(!(this.props.render&&this.props.children&&!y(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){l()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),l()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,o=t.component,a=t.render,r=this.context.router,i=r.history,l=r.route,s=r.staticContext,u=this.props.location||l.location,c={match:e,location:u,history:i,staticContext:s};return o?e?d.a.createElement(o,c):null:a?e?a(c):null:n?"function"==typeof n?n(c):y(n)?null:d.a.Children.only(n):null},t}(d.a.Component);v.propTypes={computedMatch:f.a.object,path:f.a.string,exact:f.a.bool,strict:f.a.bool,sensitive:f.a.bool,component:f.a.func,render:f.a.func,children:f.a.oneOfType([f.a.func,f.a.node]),location:f.a.object},v.contextTypes={router:f.a.shape({history:f.a.object.isRequired,route:f.a.object.isRequired,staticContext:f.a.object})},v.childContextTypes={router:f.a.object.isRequired},t.a=v},,,function(e,t,n){"use strict";function o(e){return"/"===e.charAt(0)}function a(e,t){for(var n=t,o=n+1,a=e.length;o<a;n+=1,o+=1)e[n]=e[o];e.pop()}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],r=t&&t.split("/")||[],i=e&&o(e),l=t&&o(t),s=i||l;if(e&&o(e)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var u=void 0;if(r.length){var c=r[r.length-1];u="."===c||".."===c||""===c}else u=!1;for(var d=0,p=r.length;p>=0;p--){var f=r[p];"."===f?a(r,p):".."===f?(a(r,p),d++):d&&(a(r,p),d--)}if(!s)for(;d--;d)r.unshift("..");!s||""===r[0]||r[0]&&o(r[0])||r.unshift("");var h=r.join("/");return u&&"/"!==h.substr(-1)&&(h+="/"),h}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function o(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(e,n){return o(e,t[n])});var n=void 0===e?"undefined":a(e);if(n!==(void 0===t?"undefined":a(t)))return!1;if("object"===n){var r=e.valueOf(),i=t.valueOf();if(r!==e||i!==t)return o(r,i);var l=Object.keys(e),s=Object.keys(t);return l.length===s.length&&l.every(function(n){return o(e[n],t[n])})}return!1}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=o},,,,,,,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var o=e.targetOrigin,a=n.open,r=t.muiTheme,i=o.horizontal.replace("middle","vertical");return{root:{position:"fixed",zIndex:r.zIndex.popover,opacity:a?1:0,transform:a?"scaleY(1)":"scaleY(0)",transformOrigin:i+" "+o.vertical,transition:k.default.easeOut("450ms",["transform","opacity"]),maxHeight:"100%"}}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=o(r),l=n(2),s=o(l),u=n(3),c=o(u),d=n(6),p=o(d),f=n(5),h=o(f),m=n(7),y=o(m),v=n(0),g=o(v),b=n(1),T=o(b),w=n(24),S=o(w),E=n(12),k=o(E),x=n(21),C=(o(x),function(e){function t(){var e,n,o,a;(0,s.default)(this,t);for(var r=arguments.length,l=Array(r),u=0;u<r;u++)l[u]=arguments[u];return n=o=(0,p.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={open:!1},a=n,(0,p.default)(o,a)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.setState({open:!0})}},{key:"componentWillReceiveProps",value:function(e){this.setState({open:e.open})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.style,o=e.zDepth,r=a(this.props,this.context,this.state);return g.default.createElement(S.default,{style:(0,y.default)(r.root,n),zDepth:o,className:t},this.props.children)}}]),t}(v.Component));C.defaultProps={style:{},zDepth:1},C.contextTypes={muiTheme:T.default.object.isRequired},C.propTypes={},t.default=C},,,,,,,,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MenuItem=t.DropDownMenu=void 0;var a=n(149),r=o(a),i=n(89),l=o(i);t.DropDownMenu=r.default,t.MenuItem=l.default,t.default=r.default},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n(10),l=o(i),s=n(16),u=o(s),c=n(49),d=n(31),p=n(50),f=o(p),h=n(86),m=function(){try{return window.history.state||{}}catch(e){return{}}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)(h.canUseDOM,"Browser history needs a DOM");var t=window.history,n=(0,h.supportsHistory)(),o=!(0,h.supportsPopStateOnHashChange)(),i=e.forceRefresh,s=void 0!==i&&i,p=e.getUserConfirmation,y=void 0===p?h.getConfirmation:p,v=e.keyLength,g=void 0===v?6:v,b=e.basename?(0,d.stripTrailingSlash)((0,d.addLeadingSlash)(e.basename)):"",T=function(e){var t=e||{},n=t.key,o=t.state,a=window.location,r=a.pathname,i=a.search,s=a.hash,u=r+i+s;return(0,l.default)(!b||(0,d.hasBasename)(u,b),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+u+'" to begin with "'+b+'".'),b&&(u=(0,d.stripBasename)(u,b)),(0,c.createLocation)(u,o,n)},w=function(){return Math.random().toString(36).substr(2,g)},S=(0,f.default)(),E=function(e){r(U,e),U.length=t.length,S.notifyListeners(U.location,U.action)},k=function(e){(0,h.isExtraneousPopstateEvent)(e)||O(T(e.state))},x=function(){O(T(m()))},C=!1,O=function(e){if(C)C=!1,E();else{S.confirmTransitionTo(e,"POP",y,function(t){t?E({action:"POP",location:e}):M(e)})}},M=function(e){var t=U.location,n=R.indexOf(t.key);-1===n&&(n=0);var o=R.indexOf(e.key);-1===o&&(o=0);var a=n-o;a&&(C=!0,A(a))},_=T(m()),R=[_.key],P=function(e){return b+(0,d.createPath)(e)},j=function(e,o){(0,l.default)(!("object"===(void 0===e?"undefined":a(e))&&void 0!==e.state&&void 0!==o),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var r=(0,c.createLocation)(e,o,w(),U.location);S.confirmTransitionTo(r,"PUSH",y,function(e){if(e){var o=P(r),a=r.key,i=r.state;if(n)if(t.pushState({key:a,state:i},null,o),s)window.location.href=o;else{var u=R.indexOf(U.location.key),c=R.slice(0,-1===u?0:u+1);c.push(r.key),R=c,E({action:"PUSH",location:r})}else(0,l.default)(void 0===i,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=o}})},L=function(e,o){(0,l.default)(!("object"===(void 0===e?"undefined":a(e))&&void 0!==e.state&&void 0!==o),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var r=(0,c.createLocation)(e,o,w(),U.location);S.confirmTransitionTo(r,"REPLACE",y,function(e){if(e){var o=P(r),a=r.key,i=r.state;if(n)if(t.replaceState({key:a,state:i},null,o),s)window.location.replace(o);else{var u=R.indexOf(U.location.key);-1!==u&&(R[u]=r.key),E({action:"REPLACE",location:r})}else(0,l.default)(void 0===i,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(o)}})},A=function(e){t.go(e)},I=function(){return A(-1)},D=function(){return A(1)},N=0,B=function(e){N+=e,1===N?((0,h.addEventListener)(window,"popstate",k),o&&(0,h.addEventListener)(window,"hashchange",x)):0===N&&((0,h.removeEventListener)(window,"popstate",k),o&&(0,h.removeEventListener)(window,"hashchange",x))},W=!1,H=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=S.setPrompt(e);return W||(B(1),W=!0),function(){return W&&(W=!1,B(-1)),t()}},z=function(e){var t=S.appendListener(e);return B(1),function(){B(-1),t()}},U={length:t.length,action:"POP",location:_,createHref:P,push:j,replace:L,go:A,goBack:I,goForward:D,block:H,listen:z};return U};t.default=y},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=n(10),i=o(r),l=n(16),s=o(l),u=n(49),c=n(31),d=n(50),p=o(d),f=n(86),h={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+(0,c.stripLeadingSlash)(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:c.stripLeadingSlash,decodePath:c.addLeadingSlash},slash:{encodePath:c.addLeadingSlash,decodePath:c.addLeadingSlash}},m=function(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)},y=function(e){return window.location.hash=e},v=function(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(f.canUseDOM,"Hash history needs a DOM");var t=window.history,n=(0,f.supportsGoWithoutReloadUsingHash)(),o=e.getUserConfirmation,r=void 0===o?f.getConfirmation:o,l=e.hashType,d=void 0===l?"slash":l,g=e.basename?(0,c.stripTrailingSlash)((0,c.addLeadingSlash)(e.basename)):"",b=h[d],T=b.encodePath,w=b.decodePath,S=function(){var e=w(m());return(0,i.default)(!g||(0,c.hasBasename)(e,g),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+e+'" to begin with "'+g+'".'),g&&(e=(0,c.stripBasename)(e,g)),(0,u.createLocation)(e)},E=(0,p.default)(),k=function(e){a(K,e),K.length=t.length,E.notifyListeners(K.location,K.action)},x=!1,C=null,O=function(){var e=m(),t=T(e);if(e!==t)v(t);else{var n=S(),o=K.location;if(!x&&(0,u.locationsAreEqual)(o,n))return;if(C===(0,c.createPath)(n))return;C=null,M(n)}},M=function(e){if(x)x=!1,k();else{E.confirmTransitionTo(e,"POP",r,function(t){t?k({action:"POP",location:e}):_(e)})}},_=function(e){var t=K.location,n=L.lastIndexOf((0,c.createPath)(t));-1===n&&(n=0);var o=L.lastIndexOf((0,c.createPath)(e));-1===o&&(o=0);var a=n-o;a&&(x=!0,N(a))},R=m(),P=T(R);R!==P&&v(P);var j=S(),L=[(0,c.createPath)(j)],A=function(e){return"#"+T(g+(0,c.createPath)(e))},I=function(e,t){(0,i.default)(void 0===t,"Hash history cannot push state; it is ignored");var n=(0,u.createLocation)(e,void 0,void 0,K.location);E.confirmTransitionTo(n,"PUSH",r,function(e){if(e){var t=(0,c.createPath)(n),o=T(g+t);if(m()!==o){C=t,y(o);var a=L.lastIndexOf((0,c.createPath)(K.location)),r=L.slice(0,-1===a?0:a+1);r.push(t),L=r,k({action:"PUSH",location:n})}else(0,i.default)(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),k()}})},D=function(e,t){(0,i.default)(void 0===t,"Hash history cannot replace state; it is ignored");var n=(0,u.createLocation)(e,void 0,void 0,K.location);E.confirmTransitionTo(n,"REPLACE",r,function(e){if(e){var t=(0,c.createPath)(n),o=T(g+t);m()!==o&&(C=t,v(o));var a=L.indexOf((0,c.createPath)(K.location));-1!==a&&(L[a]=t),k({action:"REPLACE",location:n})}})},N=function(e){(0,i.default)(n,"Hash history go(n) causes a full page reload in this browser"),t.go(e)},B=function(){return N(-1)},W=function(){return N(1)},H=0,z=function(e){H+=e,1===H?(0,f.addEventListener)(window,"hashchange",O):0===H&&(0,f.removeEventListener)(window,"hashchange",O)},U=!1,q=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=E.setPrompt(e);return U||(z(1),U=!0),function(){return U&&(U=!1,z(-1)),t()}},F=function(e){var t=E.appendListener(e);return z(1),function(){z(-1),t()}},K={length:t.length,action:"POP",location:j,createHref:A,push:I,replace:D,go:N,goBack:B,goForward:W,block:q,listen:F};return K};t.default=g},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n(10),l=o(i),s=n(31),u=n(49),c=n(50),d=o(c),p=function(e,t,n){return Math.min(Math.max(e,t),n)},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getUserConfirmation,n=e.initialEntries,o=void 0===n?["/"]:n,i=e.initialIndex,c=void 0===i?0:i,f=e.keyLength,h=void 0===f?6:f,m=(0,d.default)(),y=function(e){r(_,e),_.length=_.entries.length,m.notifyListeners(_.location,_.action)},v=function(){return Math.random().toString(36).substr(2,h)},g=p(c,0,o.length-1),b=o.map(function(e){return"string"==typeof e?(0,u.createLocation)(e,void 0,v()):(0,u.createLocation)(e,void 0,e.key||v())}),T=s.createPath,w=function(e,n){(0,l.default)(!("object"===(void 0===e?"undefined":a(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var o=(0,u.createLocation)(e,n,v(),_.location);m.confirmTransitionTo(o,"PUSH",t,function(e){if(e){var t=_.index,n=t+1,a=_.entries.slice(0);a.length>n?a.splice(n,a.length-n,o):a.push(o),y({action:"PUSH",location:o,index:n,entries:a})}})},S=function(e,n){(0,l.default)(!("object"===(void 0===e?"undefined":a(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var o=(0,u.createLocation)(e,n,v(),_.location);m.confirmTransitionTo(o,"REPLACE",t,function(e){e&&(_.entries[_.index]=o,y({action:"REPLACE",location:o}))})},E=function(e){var n=p(_.index+e,0,_.entries.length-1),o=_.entries[n];m.confirmTransitionTo(o,"POP",t,function(e){e?y({action:"POP",location:o,index:n}):y()})},k=function(){return E(-1)},x=function(){return E(1)},C=function(e){var t=_.index+e;return t>=0&&t<_.entries.length},O=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m.setPrompt(e)},M=function(e){return m.appendListener(e)},_={length:b.length,action:"POP",location:b[g],index:g,entries:b,createHref:T,push:w,replace:S,go:E,goBack:k,goForward:x,canGo:C,block:O,listen:M};return _};t.default=f},function(e,t,n){"use strict";var o=n(10),a=(n.n(o),n(16));n.n(a),n(37),n(32),n(51),n(87),"function"==typeof Symbol&&Symbol.iterator,Object.assign},function(e,t,n){"use strict";var o=n(10),a=(n.n(o),n(16)),r=(n.n(a),n(37),n(32));n(51),n(87),Object.assign,r.c,r.d,r.d,r.d},function(e,t,n){"use strict";var o=n(10);n.n(o),n(32),n(37),n(51),"function"==typeof Symbol&&Symbol.iterator,Object.assign},function(e,t,n){"use strict";var o=(n(138),n(139),n(140),n(37));n.d(t,"a",function(){return o.a}),n.d(t,"b",function(){return o.b});n(32)},,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=t.muiTheme,o=n.appBar,a=n.button.iconButtonSize;return{root:{position:"relative",zIndex:n.zIndex.appBar,width:"100%",display:"flex",backgroundColor:o.color,paddingLeft:o.padding,paddingRight:o.padding},title:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",margin:0,paddingTop:0,letterSpacing:0,fontSize:24,fontWeight:o.titleFontWeight,color:o.textColor,height:o.height,lineHeight:o.height+"px"},mainElement:{boxFlex:1,flex:"1"},iconButtonStyle:{marginTop:(o.height-a)/2,marginRight:8,marginLeft:-16},iconButtonIconStyle:{fill:o.textColor,color:o.textColor},flatButton:{color:o.textColor,marginTop:(a-36)/2+1}}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=o(r),l=n(102),s=o(l),u=n(9),c=o(u),d=n(4),p=o(d),f=n(2),h=o(f),m=n(3),y=o(m),v=n(6),g=o(v),b=n(5),T=o(b);t.getStyles=a;var w=n(7),S=o(w),E=n(0),k=o(E),x=n(1),C=o(x),O=n(38),M=o(O),_=n(165),R=o(_),P=n(24),j=o(P),L=n(21),A=(o(L),n(10)),I=(o(A),function(e){function t(){var e,n,o,a;(0,h.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=o=(0,g.default)(this,(e=t.__proto__||(0,p.default)(t)).call.apply(e,[this].concat(i))),o.handleTouchTapLeftIconButton=function(e){o.props.onLeftIconButtonTouchTap&&o.props.onLeftIconButtonTouchTap(e)},o.handleTouchTapRightIconButton=function(e){o.props.onRightIconButtonTouchTap&&o.props.onRightIconButtonTouchTap(e)},o.handleTitleTouchTap=function(e){o.props.onTitleTouchTap&&o.props.onTitleTouchTap(e)},a=n,(0,g.default)(o,a)}return(0,T.default)(t,e),(0,y.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.titleStyle,o=e.iconStyleLeft,r=e.iconStyleRight,l=(e.onTitleTouchTap,e.showMenuIconButton),u=e.iconElementLeft,d=e.iconElementRight,p=e.iconClassNameLeft,f=e.iconClassNameRight,h=(e.onLeftIconButtonTouchTap,e.onRightIconButtonTouchTap,e.className),m=e.style,y=e.zDepth,v=e.children,g=(0,c.default)(e,["title","titleStyle","iconStyleLeft","iconStyleRight","onTitleTouchTap","showMenuIconButton","iconElementLeft","iconElementRight","iconClassNameLeft","iconClassNameRight","onLeftIconButtonTouchTap","onRightIconButtonTouchTap","className","style","zDepth","children"]),b=this.context.muiTheme.prepareStyles,T=a(this.props,this.context),w=void 0,x=void 0,C="string"==typeof t||t instanceof String?"h1":"div",O=k.default.createElement(C,{onTouchTap:this.handleTitleTouchTap,style:b((0,S.default)(T.title,T.mainElement,n))},t),_=(0,S.default)({},T.iconButtonStyle,o);if(l)if(u){var P={};if("IconButton"===u.type.muiName){var L=u.props.children,A=L&&L.props&&L.props.color?null:T.iconButtonIconStyle;P.iconStyle=(0,S.default)({},A,u.props.iconStyle)}!u.props.onTouchTap&&this.props.onLeftIconButtonTouchTap&&(P.onTouchTap=this.handleTouchTapLeftIconButton),w=k.default.createElement("div",{style:b(_)},(0,s.default)(P).length>0?(0,E.cloneElement)(u,P):u)}else w=k.default.createElement(M.default,{style:_,iconStyle:T.iconButtonIconStyle,iconClassName:p,onTouchTap:this.handleTouchTapLeftIconButton},p?"":k.default.createElement(R.default,{style:(0,S.default)({},T.iconButtonIconStyle)}));var I=(0,S.default)({},T.iconButtonStyle,{marginRight:-16,marginLeft:"auto"},r);if(d){var D={};switch(d.type.muiName){case"IconMenu":case"IconButton":var N=d.props.children,B=N&&N.props&&N.props.color?null:T.iconButtonIconStyle;D.iconStyle=(0,S.default)({},B,d.props.iconStyle);break;case"FlatButton":D.style=(0,S.default)({},T.flatButton,d.props.style)}!d.props.onTouchTap&&this.props.onRightIconButtonTouchTap&&(D.onTouchTap=this.handleTouchTapRightIconButton),x=k.default.createElement("div",{style:b(I)},(0,s.default)(D).length>0?(0,E.cloneElement)(d,D):d)}else f&&(x=k.default.createElement(M.default,{style:I,iconStyle:T.iconButtonIconStyle,iconClassName:f,onTouchTap:this.handleTouchTapRightIconButton}));return k.default.createElement(j.default,(0,i.default)({},g,{rounded:!1,className:h,style:(0,S.default)({},T.root,m),zDepth:y}),w,O,x,v)}}]),t}(E.Component));I.muiName="AppBar",I.defaultProps={showMenuIconButton:!0,title:"",zDepth:1},I.contextTypes={muiTheme:C.default.object.isRequired},I.propTypes={},t.default=I},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(143),a=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=a.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=t.muiTheme.checkbox;return{icon:{height:24,width:24},check:{position:"absolute",opacity:0,transform:"scale(0)",transitionOrigin:"50% 50%",transition:M.default.easeOut("450ms","opacity","0ms")+", "+M.default.easeOut("0ms","transform","450ms"),fill:n.checkedColor},checkWhenSwitched:{opacity:1,transform:"scale(1)",transition:M.default.easeOut("0ms","opacity","0ms")+", "+M.default.easeOut("800ms","transform","0ms")},checkWhenDisabled:{fill:n.disabledColor},box:{position:"absolute",opacity:1,fill:n.boxColor,transition:M.default.easeOut("1000ms","opacity","200ms")},boxWhenSwitched:{opacity:0,transition:M.default.easeOut("650ms","opacity","150ms"),fill:n.checkedColor},boxWhenDisabled:{fill:e.checked?"transparent":n.disabledColor},label:{color:e.disabled?n.labelDisabledColor:n.labelColor}}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=o(r),l=n(9),s=o(l),u=n(4),c=o(u),d=n(2),p=o(d),f=n(3),h=o(f),m=n(6),y=o(m),v=n(5),g=o(v),b=n(7),T=o(b),w=n(0),S=o(w),E=n(1),k=o(E),x=n(157),C=o(x),O=n(12),M=o(O),_=n(167),R=o(_),P=n(168),j=o(P),L=function(e){function t(){var e,n,o,a;(0,p.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=o=(0,y.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(i))),o.state={switched:!1},o.handleStateChange=function(e){o.setState({switched:e})},o.handleCheck=function(e,t){o.props.onCheck&&o.props.onCheck(e,t)},a=n,(0,y.default)(o,a)}return(0,g.default)(t,e),(0,h.default)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.checked,n=e.defaultChecked,o=e.valueLink;(t||n||o&&o.value)&&this.setState({switched:!0})}},{key:"componentWillReceiveProps",value:function(e){this.props.checked!==e.checked&&this.setState({switched:e.checked})}},{key:"isChecked",value:function(){return this.refs.enhancedSwitch.isSwitched()}},{key:"setChecked",value:function(e){this.refs.enhancedSwitch.setSwitched(e)}},{key:"render",value:function(){var e=this.props,t=e.iconStyle,n=(e.onCheck,e.checkedIcon),o=e.uncheckedIcon,r=(0,s.default)(e,["iconStyle","onCheck","checkedIcon","uncheckedIcon"]),l=a(this.props,this.context),u=(0,T.default)(l.box,this.state.switched&&l.boxWhenSwitched,t,this.props.disabled&&l.boxWhenDisabled),c=(0,T.default)(l.check,this.state.switched&&l.checkWhenSwitched,t,this.props.disabled&&l.checkWhenDisabled),d=n?S.default.cloneElement(n,{style:(0,T.default)(c,n.props.style)}):S.default.createElement(j.default,{style:c}),p=o?S.default.cloneElement(o,{style:(0,T.default)(u,o.props.style)}):S.default.createElement(R.default,{style:u}),f=S.default.createElement("div",null,p,d),h=this.state.switched?c.fill:u.fill,m=(0,T.default)(l.icon,t),y=(0,T.default)(l.label,this.props.labelStyle),v={ref:"enhancedSwitch",inputType:"checkbox",switched:this.state.switched,switchElement:f,rippleColor:h,iconStyle:m,onSwitch:this.handleCheck,labelStyle:y,onParentShouldUpdate:this.handleStateChange,labelPosition:this.props.labelPosition};return S.default.createElement(C.default,(0,i.default)({},r,v))}}]),t}(w.Component);L.defaultProps={labelPosition:"right",disabled:!1},L.contextTypes={muiTheme:k.default.object.isRequired},L.propTypes={},t.default=L},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=e.autoScrollBodyContent,o=e.open,a=t.muiTheme,r=a.baseTheme,i=r.spacing,l=r.palette,s=a.dialog,u=a.zIndex,c=i.desktopGutter,d="1px solid "+l.borderColor;return{root:{position:"fixed",boxSizing:"border-box",WebkitTapHighlightColor:"rgba(0,0,0,0)",zIndex:u.dialog,top:0,left:o?0:-1e4,width:"100%",height:"100%",transition:o?j.default.easeOut("0ms","left","0ms"):j.default.easeOut("0ms","left","450ms")},content:{boxSizing:"border-box",WebkitTapHighlightColor:"rgba(0,0,0,0)",transition:j.default.easeOut(),position:"relative",width:"75%",maxWidth:12*i.desktopKeylineIncrement,margin:"0 auto",zIndex:u.dialog},actionsContainer:{boxSizing:"border-box",WebkitTapHighlightColor:"rgba(0,0,0,0)",padding:8,width:"100%",textAlign:"right",marginTop:n?-1:0},overlay:{zIndex:u.dialogOverlay},title:{margin:0,padding:c+"px "+c+"px 20px "+c+"px",color:l.textColor,fontSize:s.titleFontSize,lineHeight:"32px",fontWeight:400,marginBottom:n?-1:0},body:{fontSize:s.bodyFontSize,color:s.bodyColor,padding:(e.title?0:c)+"px "+c+"px "+c+"px",boxSizing:"border-box",overflowY:n?"auto":"hidden",borderTop:n?d:"none",borderBottom:n?d:"none"}}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=o(r),l=n(9),s=o(l),u=n(4),c=o(u),d=n(2),p=o(d),f=n(3),h=o(f),m=n(6),y=o(m),v=n(5),g=o(v),b=n(7),T=o(b),w=n(0),S=o(w),E=n(1),k=o(E),x=n(15),C=o(x),O=n(26),M=o(O),_=n(25),R=o(_),P=n(12),j=o(P),L=n(108),A=o(L),I=n(159),D=o(I),N=n(24),B=o(N),W=n(97),H=o(W),z=function(e){function t(){var e,n,o,a;(0,p.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=o=(0,y.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(i))),o.state={style:{}},a=n,(0,y.default)(o,a)}return(0,g.default)(t,e),(0,h.default)(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.enterTimeout),clearTimeout(this.leaveTimeout)}},{key:"componentWillEnter",value:function(e){this.componentWillAppear(e)}},{key:"componentWillAppear",value:function(e){var t=this.context.muiTheme.baseTheme.spacing;this.setState({style:{opacity:1,transform:"translate(0, "+t.desktopKeylineIncrement+"px)"}}),this.enterTimeout=setTimeout(e,450)}},{key:"componentWillLeave",value:function(e){this.setState({style:{opacity:0,transform:"translate(0, 0)"}}),this.leaveTimeout=setTimeout(e,450)}},{key:"render",value:function(){var e=this.props,t=e.style,n=e.children,o=(0,s.default)(e,["style","children"]),a=this.context.muiTheme.prepareStyles;return S.default.createElement("div",(0,i.default)({},o,{style:a((0,T.default)({},this.state.style,t))}),n)}}]),t}(w.Component);z.contextTypes={muiTheme:k.default.object.isRequired},z.propTypes={};var U=function(e){function t(){var e,n,o,a;(0,p.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=o=(0,y.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(i))),o.handleTouchTapOverlay=function(){o.requestClose(!1)},o.handleKeyUp=function(e){"esc"===(0,R.default)(e)&&o.requestClose(!1)},o.handleResize=function(){o.positionDialog()},a=n,(0,y.default)(o,a)}return(0,g.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){this.positionDialog()}},{key:"componentDidUpdate",value:function(){this.positionDialog()}},{key:"positionDialog",value:function(){var e=this.props,t=e.actions,n=e.autoDetectWindowHeight,o=e.autoScrollBodyContent,r=e.bodyStyle,i=e.open,l=e.repositionOnUpdate,s=e.title;if(i){var u=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=C.default.findDOMNode(this),d=C.default.findDOMNode(this.refs.dialogWindow),p=C.default.findDOMNode(this.refs.dialogContent);d.style.height="",p.style.height="";var f=d.offsetHeight,h=(u-f)/2-64;if(h<16&&(h=16),!l&&c.style.paddingTop||(c.style.paddingTop=h+"px"),n||o){var m=a(this.props,this.context);m.body=(0,T.default)(m.body,r);var y=u-128;s&&(y-=p.previousSibling.offsetHeight),S.default.Children.count(t)&&(y-=p.nextSibling.offsetHeight),p.style.maxHeight=y+"px",y>f&&(p.style.borderBottom="none",p.style.borderTop="none")}}}},{key:"requestClose",value:function(e){!e&&this.props.modal||this.props.onRequestClose&&this.props.onRequestClose(!!e)}},{key:"render",value:function(){var e=this.props,t=e.actions,n=e.actionsContainerClassName,o=e.actionsContainerStyle,r=e.bodyClassName,l=e.bodyStyle,s=e.children,u=e.className,c=e.contentClassName,d=e.contentStyle,p=e.overlayClassName,f=e.overlayStyle,h=e.open,m=e.paperClassName,y=e.paperProps,v=e.style,g=e.titleClassName,b=e.titleStyle,w=e.title,E=this.context.muiTheme.prepareStyles,k=a(this.props,this.context);k.root=(0,T.default)(k.root,v),k.content=(0,T.default)(k.content,d),k.body=(0,T.default)(k.body,l),k.actionsContainer=(0,T.default)(k.actionsContainer,o),k.overlay=(0,T.default)(k.overlay,f),k.title=(0,T.default)(k.title,b);var x=S.default.Children.count(t)>0&&S.default.createElement("div",{className:n,style:E(k.actionsContainer)},S.default.Children.toArray(t)),C=w;return S.default.isValidElement(w)?C=S.default.cloneElement(w,{className:w.props.className||g,style:E((0,T.default)(k.title,w.props.style))}):"string"==typeof w&&(C=S.default.createElement("h3",{className:g,style:E(k.title)},w)),S.default.createElement("div",{className:u,style:E(k.root)},h&&S.default.createElement(M.default,{target:"window",onKeyUp:this.handleKeyUp,onResize:this.handleResize}),S.default.createElement(H.default,{component:"div",ref:"dialogWindow",transitionAppear:!0,transitionAppearTimeout:450,transitionEnter:!0,transitionEnterTimeout:450},h&&S.default.createElement(z,{className:c,style:k.content},S.default.createElement(B.default,(0,i.default)({className:m,zDepth:4},y),C,S.default.createElement("div",{ref:"dialogContent",className:r,style:E(k.body)},s),x))),S.default.createElement(A.default,{show:h,className:p,style:k.overlay,onTouchTap:this.handleTouchTapOverlay}))}}]),t}(w.Component);U.contextTypes={muiTheme:k.default.object.isRequired},U.propTypes={};var q=function(e){function t(){var e,n,o,a;(0,p.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=o=(0,y.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(i))),o.renderLayer=function(){return S.default.createElement(U,o.props)},a=n,(0,y.default)(o,a)}return(0,g.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){return S.default.createElement(D.default,{render:this.renderLayer,open:!0,useLayerForClickAway:!1})}}]),t}(w.Component);q.contextTypes={muiTheme:k.default.object.isRequired},q.defaultProps={autoDetectWindowHeight:!0,autoScrollBodyContent:!1,modal:!1,repositionOnUpdate:!0},q.propTypes={},t.default=q},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),r=o(a),i=n(2),l=o(i),s=n(3),u=o(s),c=n(6),d=o(c),p=n(5),f=o(p),h=n(7),m=o(h),y=n(0),v=o(y),g=n(1),b=o(g),T=n(15),w=o(T),S=n(26),E=o(S),k=n(25),x=o(k),C=n(68),O=o(C),M=n(12),_=o(M),R=n(108),P=o(R),j=n(24),L=o(j),A=n(21),I=(o(A),null),D=function(e){function t(){var e,n,o,a;(0,l.default)(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return n=o=(0,d.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(s))),o.handleTouchTapOverlay=function(e){e.preventDefault(),o.close("clickaway")},o.handleKeyUp=function(e){o.state.open&&!o.props.docked&&"esc"===(0,x.default)(e)&&o.close("escape")},o.onBodyTouchStart=function(e){var t=o.props.swipeAreaWidth,n=o.context.muiTheme.isRtl?document.body.offsetWidth-e.touches[0].pageX:e.touches[0].pageX,a=e.touches[0].pageY;if(null!==t&&!o.state.open)if(o.props.openSecondary){if(n<document.body.offsetWidth-t)return}else if(n>t)return;(o.state.open||I===o.onBodyTouchStart&&!o.props.disableSwipeToOpen)&&(o.maybeSwiping=!0,o.touchStartX=n,o.touchStartY=a,document.body.addEventListener("touchmove",o.onBodyTouchMove),document.body.addEventListener("touchend",o.onBodyTouchEnd),document.body.addEventListener("touchcancel",o.onBodyTouchEnd))},o.onBodyTouchMove=function(e){var t=o.context.muiTheme.isRtl?document.body.offsetWidth-e.touches[0].pageX:e.touches[0].pageX,n=e.touches[0].pageY;if(o.state.swiping)e.preventDefault(),o.setPosition(o.getTranslateX(t));else if(o.maybeSwiping){var a=Math.abs(t-o.touchStartX),r=Math.abs(n-o.touchStartY);a>10&&r<=10?(o.swipeStartX=t,o.setState({swiping:o.state.open?"closing":"opening"}),o.setPosition(o.getTranslateX(t))):a<=10&&r>10&&o.onBodyTouchEnd()}},o.onBodyTouchEnd=function(e){if(o.state.swiping){var t=o.context.muiTheme.isRtl?document.body.offsetWidth-e.changedTouches[0].pageX:e.changedTouches[0].pageX,n=o.getTranslateX(t)/o.getMaxTranslateX();o.maybeSwiping=!1;var a=o.state.swiping;o.setState({swiping:null}),n>.5?"opening"===a?o.setPosition(o.getMaxTranslateX()):o.close("swipe"):"opening"===a?o.open("swipe"):o.setPosition(0)}else o.maybeSwiping=!1;o.removeBodyTouchListeners()},a=n,(0,d.default)(o,a)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.maybeSwiping=!1,this.touchStartX=null,this.touchStartY=null,this.swipeStartX=null,this.setState({open:null!==this.props.open?this.props.open:this.props.docked,swiping:null})}},{key:"componentDidMount",value:function(){this.enableSwipeHandling()}},{key:"componentWillReceiveProps",value:function(e){null!==e.open?this.setState({open:e.open}):this.props.docked!==e.docked&&this.setState({open:e.docked})}},{key:"componentDidUpdate",value:function(){this.enableSwipeHandling()}},{key:"componentWillUnmount",value:function(){this.disableSwipeHandling(),this.removeBodyTouchListeners()}},{key:"getStyles",value:function(){var e=this.context.muiTheme,t=e.drawer,n=this.getTranslateMultiplier()*(this.state.open?0:this.getMaxTranslateX());return{root:{height:"100%",width:this.getTranslatedWidth()||t.width,position:"fixed",zIndex:e.zIndex.drawer,left:0,top:0,transform:"translate("+n+"px, 0)",transition:!this.state.swiping&&_.default.easeOut(null,"transform",null),backgroundColor:t.color,overflow:"auto",WebkitOverflowScrolling:"touch"},overlay:{zIndex:e.zIndex.drawerOverlay,pointerEvents:this.state.open?"auto":"none"},rootWhenOpenRight:{left:"auto",right:0}}}},{key:"shouldShow",value:function(){return this.state.open||!!this.state.swiping}},{key:"close",value:function(e){return null===this.props.open&&this.setState({open:!1}),this.props.onRequestChange&&this.props.onRequestChange(!1,e),this}},{key:"open",value:function(e){return null===this.props.open&&this.setState({open:!0}),this.props.onRequestChange&&this.props.onRequestChange(!0,e),this}},{key:"getTranslatedWidth",value:function(){if("string"==typeof this.props.width){if(!/^\d+(\.\d+)?%$/.test(this.props.width))throw new Error("Not a valid percentage format.");var e=parseFloat(this.props.width)/100;return"undefined"!=typeof window?e*window.innerWidth:1e4}return this.props.width}},{key:"getMaxTranslateX",value:function(){return(this.getTranslatedWidth()||this.context.muiTheme.drawer.width)+10}},{key:"getTranslateMultiplier",value:function(){return this.props.openSecondary?1:-1}},{key:"enableSwipeHandling",value:function(){this.props.docked?this.disableSwipeHandling():(document.body.addEventListener("touchstart",this.onBodyTouchStart),I||(I=this.onBodyTouchStart))}},{key:"disableSwipeHandling",value:function(){document.body.removeEventListener("touchstart",this.onBodyTouchStart),I===this.onBodyTouchStart&&(I=null)}},{key:"removeBodyTouchListeners",value:function(){document.body.removeEventListener("touchmove",this.onBodyTouchMove),document.body.removeEventListener("touchend",this.onBodyTouchEnd),document.body.removeEventListener("touchcancel",this.onBodyTouchEnd)}},{key:"setPosition",value:function(e){var t=this.context.muiTheme.isRtl?-1:1,n=w.default.findDOMNode(this.refs.clickAwayableElement),o="translate("+this.getTranslateMultiplier()*t*e+"px, 0)";this.refs.overlay.setOpacity(1-e/this.getMaxTranslateX()),O.default.set(n.style,"transform",o)}},{key:"getTranslateX",value:function(e){return Math.min(Math.max("closing"===this.state.swiping?this.getTranslateMultiplier()*(e-this.swipeStartX):this.getMaxTranslateX()-this.getTranslateMultiplier()*(this.swipeStartX-e),0),this.getMaxTranslateX())}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,o=e.containerClassName,a=e.containerStyle,r=e.docked,i=e.openSecondary,l=e.overlayClassName,s=e.overlayStyle,u=e.style,c=e.zDepth,d=this.getStyles(),p=void 0;return r||(p=v.default.createElement(P.default,{ref:"overlay",show:this.shouldShow(),className:l,style:(0,m.default)(d.overlay,s),transitionEnabled:!this.state.swiping,onTouchTap:this.handleTouchTapOverlay})),v.default.createElement("div",{className:n,style:u},v.default.createElement(E.default,{target:"window",onKeyUp:this.handleKeyUp}),p,v.default.createElement(L.default,{ref:"clickAwayableElement",zDepth:c,rounded:!1,transitionEnabled:!this.state.swiping,className:o,style:(0,m.default)(d.root,i&&d.rootWhenOpenRight,a)},t))}}]),t}(y.Component);D.defaultProps={disableSwipeToOpen:!1,docked:!0,open:null,openSecondary:!1,swipeAreaWidth:30,width:null,zDepth:2},D.contextTypes={muiTheme:b.default.object.isRequired},D.propTypes={},t.default=D},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(147),a=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=a.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=e.disabled,o=t.muiTheme.baseTheme.spacing,a=t.muiTheme.baseTheme.palette,r=t.muiTheme.dropDownMenu.accentColor;return{control:{cursor:n?"not-allowed":"pointer",height:"100%",position:"relative",width:"100%"},icon:{fill:r,position:"absolute",right:o.desktopGutterLess,top:(o.iconSize-24)/2+o.desktopGutterMini/2},iconChildren:{fill:"inherit"},label:{color:n?a.disabledColor:a.textColor,height:o.desktopToolbarHeight+"px",lineHeight:o.desktopToolbarHeight+"px",overflow:"hidden",opacity:1,position:"relative",paddingLeft:o.desktopGutter,paddingRight:2*o.iconSize+o.desktopGutterMini,textOverflow:"ellipsis",top:0,whiteSpace:"nowrap"},labelWhenOpen:{opacity:0,top:o.desktopToolbarHeight/8},root:{display:"inline-block",fontSize:o.desktopDropDownMenuFontSize,height:o.desktopSubheaderHeight,fontFamily:t.muiTheme.baseTheme.fontFamily,outline:"none",position:"relative",transition:M.default.easeOut()},rootWhenOpen:{opacity:1},underline:{borderTop:"solid 1px "+r,bottom:1,left:0,margin:"-1px "+o.desktopGutter+"px",right:0,position:"absolute"}}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=o(r),l=n(9),s=o(l),u=n(4),c=o(u),d=n(2),p=o(d),f=n(3),h=o(f),m=n(6),y=o(m),v=n(5),g=o(v),b=n(7),T=o(b),w=n(0),S=o(w),E=n(1),k=o(E),x=n(15),C=o(x),O=n(12),M=o(O),_=n(164),R=o(_),P=n(90),j=o(P),L=n(155),A=o(L),I=n(66),D=o(I),N=n(107),B=o(N),W=n(25),H=o(W),z=n(69),U=o(z),q=n(38),F=o(q),K=n(21),Y=(o(K),function(e){function t(){var e,n,o,a;(0,p.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=o=(0,y.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(i))),o.state={open:!1},o.rootNode=void 0,o.arrowNode=void 0,o.handleTouchTapControl=function(e){e.preventDefault(),o.props.disabled||o.setState({open:!o.state.open,anchorEl:o.rootNode})},o.handleRequestCloseMenu=function(){o.close(!1)},o.handleEscKeyDownMenu=function(){o.close(!0)},o.handleKeyDown=function(e){switch((0,H.default)(e)){case"up":case"down":case"space":case"enter":e.preventDefault(),o.setState({open:!0,anchorEl:o.rootNode})}},o.handleItemTouchTap=function(e,t,n){o.props.multiple?o.state.open||o.setState({open:!0}):(e.persist(),o.setState({open:!1},function(){o.props.onChange&&o.props.onChange(e,n,t.props.value),o.close(U.default.isKeyboard(e))}))},o.handleChange=function(e,t){o.props.multiple&&o.props.onChange&&o.props.onChange(e,void 0,t)},o.close=function(e){o.setState({open:!1},function(){if(o.props.onClose&&o.props.onClose(),e){var t=o.arrowNode;C.default.findDOMNode(t).focus(),t.setKeyboardFocus(!0)}})},a=n,(0,y.default)(o,a)}return(0,g.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.autoWidth&&this.setWidth(),this.props.openImmediately&&setTimeout(function(){return e.setState({open:!0,anchorEl:e.rootNode})},0)}},{key:"componentWillReceiveProps",value:function(){this.props.autoWidth&&this.setWidth()}},{key:"getInputNode",value:function(){var e=this,t=this.rootNode;return t.focus=function(){e.props.disabled||e.setState({open:!e.state.open,anchorEl:e.rootNode})},t}},{key:"setWidth",value:function(){var e=this.rootNode;this.props.style&&this.props.style.hasOwnProperty("width")||(e.style.width="auto")}},{key:"render",value:function(){var e=this,t=this.props,n=t.animated,o=t.animation,r=t.autoWidth,l=t.multiple,u=t.children,c=t.className,d=t.disabled,p=t.iconStyle,f=t.labelStyle,h=t.listStyle,m=t.maxHeight,y=t.menuStyle,v=t.selectionRenderer,g=(t.onClose,t.openImmediately,t.menuItemStyle),b=t.selectedMenuItemStyle,w=t.style,E=t.underlineStyle,k=t.value,x=t.iconButton,C=t.anchorOrigin,O=t.targetOrigin,M=(0,s.default)(t,["animated","animation","autoWidth","multiple","children","className","disabled","iconStyle","labelStyle","listStyle","maxHeight","menuStyle","selectionRenderer","onClose","openImmediately","menuItemStyle","selectedMenuItemStyle","style","underlineStyle","value","iconButton","anchorOrigin","targetOrigin"]),_=this.state,R=_.anchorEl,P=_.open,L=this.context.muiTheme.prepareStyles,I=a(this.props,this.context),N="";if(l){var W=[],H=[];S.default.Children.forEach(u,function(e){e&&k&&k.indexOf(e.props.value)>-1&&(v?(W.push(e.props.value),H.push(e)):W.push(e.props.label||e.props.primaryText))}),N=[],N=v?v(W,H):W.join(", ")}else S.default.Children.forEach(u,function(e){e&&k===e.props.value&&(N=v?v(k,e):e.props.label||e.props.primaryText)});var z=void 0;return z=R&&!r?(0,T.default)({width:R.clientWidth},y):y,S.default.createElement("div",(0,i.default)({},M,{ref:function(t){e.rootNode=t},className:c,style:L((0,T.default)({},I.root,P&&I.rootWhenOpen,w))}),S.default.createElement(A.default,{style:I.control,onTouchTap:this.handleTouchTapControl},S.default.createElement("div",{style:L((0,T.default)({},I.label,P&&I.labelWhenOpen,f))},N),S.default.createElement(F.default,{disabled:d,onKeyDown:this.handleKeyDown,ref:function(t){e.arrowNode=t},style:(0,T.default)({},I.icon,p),iconStyle:I.iconChildren},x),S.default.createElement("div",{style:L((0,T.default)({},I.underline,E))})),S.default.createElement(D.default,{anchorOrigin:C,targetOrigin:O,anchorEl:R,animation:o||B.default,open:P,animated:n,onRequestClose:this.handleRequestCloseMenu},S.default.createElement(j.default,{multiple:l,maxHeight:m,desktop:!0,value:k,onEscKeyDown:this.handleEscKeyDownMenu,style:z,listStyle:h,onItemTouchTap:this.handleItemTouchTap,onChange:this.handleChange,menuItemStyle:g,selectedMenuItemStyle:b,autoWidth:r,width:!r&&z?z.width:null},u)))}}]),t}(w.Component));Y.muiName="DropDownMenu",Y.defaultProps={animated:!0,autoWidth:!0,disabled:!1,iconButton:S.default.createElement(R.default,null),openImmediately:!1,maxHeight:500,multiple:!1,anchorOrigin:{vertical:"top",horizontal:"left"}},Y.contextTypes={muiTheme:k.default.object.isRequired},Y.propTypes={},t.default=Y},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),r=o(a),i=n(9),l=o(i),s=n(4),u=o(s),c=n(2),d=o(c),p=n(3),f=o(p),h=n(6),m=o(h),y=n(5),v=o(y),g=n(7),b=o(g),T=n(0),w=o(T),S=n(1),E=o(S),k=n(15),x=o(k),C=n(69),O=o(C),M=n(21),_=(o(M),n(90)),R=o(_),P=n(66),j=o(P),L=n(10),A=(o(L),function(e){function t(){var e,n,o,a;(0,d.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=o=(0,m.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(i))),o.state={menuInitiallyKeyboardFocused:!1,open:!1},o.handleItemTouchTap=function(e,t){if(0!==o.props.touchTapCloseDelay&&!t.props.hasOwnProperty("menuItems")){var n=O.default.isKeyboard(e);o.timerCloseId=setTimeout(function(){o.close(n?"enter":"itemTap",n)},o.props.touchTapCloseDelay)}o.props.onItemTouchTap(e,t)},o.handleRequestClose=function(e){o.close(e)},o.handleEscKeyDownMenu=function(e){o.close("escape",e)},a=n,(0,m.default)(o,a)}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentWillReceiveProps",value:function(e){null!=e.open&&this.setState({open:e.open,anchorEl:this.refs.iconMenuContainer})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timerCloseId)}},{key:"isOpen",value:function(){return this.state.open}},{key:"close",value:function(e,t){var n=this;this.state.open&&(null!==this.props.open?this.props.onRequestChange(!1,e):this.setState({open:!1},function(){if(t){var e=n.refs.iconButton;x.default.findDOMNode(e).focus(),e.setKeyboardFocus()}}))}},{key:"open",value:function(e,t){if(null!==this.props.open)return this.props.onRequestChange(!0,e),this.setState({menuInitiallyKeyboardFocused:O.default.isKeyboard(t),anchorEl:t.currentTarget});this.setState({open:!0,menuInitiallyKeyboardFocused:O.default.isKeyboard(t),anchorEl:t.currentTarget}),t.preventDefault()}},{key:"render",value:function(){var e=this,t=this.props,n=t.anchorOrigin,o=t.className,a=t.animated,i=t.animation,s=t.iconButtonElement,u=t.iconStyle,c=(t.onItemTouchTap,t.onKeyboardFocus),d=t.onMouseDown,p=t.onMouseLeave,f=t.onMouseEnter,h=t.onMouseUp,m=(t.onRequestChange,t.onTouchTap),y=t.listStyle,v=t.menuStyle,g=t.style,T=t.targetOrigin,S=(t.touchTapCloseDelay,t.useLayerForClickAway),E=(0,l.default)(t,["anchorOrigin","className","animated","animation","iconButtonElement","iconStyle","onItemTouchTap","onKeyboardFocus","onMouseDown","onMouseLeave","onMouseEnter","onMouseUp","onRequestChange","onTouchTap","listStyle","menuStyle","style","targetOrigin","touchTapCloseDelay","useLayerForClickAway"]),k=this.context.muiTheme.prepareStyles,x=this.state,C=x.open,M=x.anchorEl,_={root:{display:"inline-block",position:"relative"},menu:{position:"relative"}},P=(0,b.default)(_.root,g),L=(0,b.default)(_.menu,v),A={onKeyboardFocus:c,onTouchTap:function(t){e.open(O.default.isKeyboard(t)?"keyboard":"iconTap",t),s.props.onTouchTap&&s.props.onTouchTap(t)},ref:"iconButton"};(u||s.props.iconStyle)&&(A.iconStyle=u?(0,b.default)({},u,s.props.iconStyle):s.props.iconStyle);var I=w.default.cloneElement(s,A),D=w.default.createElement(R.default,(0,r.default)({},E,{initiallyKeyboardFocused:this.state.menuInitiallyKeyboardFocused,onEscKeyDown:this.handleEscKeyDownMenu,onItemTouchTap:this.handleItemTouchTap,style:L,listStyle:y}),this.props.children);return w.default.createElement("div",{ref:"iconMenuContainer",className:o,onMouseDown:d,onMouseLeave:p,onMouseEnter:f,onMouseUp:h,onTouchTap:m,style:k(P)},I,w.default.createElement(j.default,{anchorOrigin:n,targetOrigin:T,open:C,anchorEl:M,childContextTypes:this.constructor.childContextTypes,useLayerForClickAway:S,onRequestClose:this.handleRequestClose,animated:a,animation:i,context:this.context},D))}}]),t}(T.Component));A.muiName="IconMenu",A.defaultProps={anchorOrigin:{vertical:"top",horizontal:"left"},animated:!0,multiple:!1,open:null,onItemTouchTap:function(){},onKeyboardFocus:function(){},onMouseDown:function(){},onMouseLeave:function(){},onMouseEnter:function(){},onMouseUp:function(){},onRequestChange:function(){},onTouchTap:function(){},targetOrigin:{vertical:"top",horizontal:"left"},touchTapCloseDelay:200,useLayerForClickAway:!1},A.contextTypes={muiTheme:E.default.object.isRequired},A.propTypes={},t.default=A},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MenuItem=t.IconMenu=void 0;var a=n(150),r=o(a),i=n(89),l=o(i);t.IconMenu=r.default,t.MenuItem=l.default,t.default=r.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var o=t.muiTheme,a=o.baseTheme.spacing.desktopSubheaderHeight,r=o.zIndex,i=n.open;return{root:{position:"fixed",left:"50%",display:"flex",bottom:0,zIndex:r.snackbar,visibility:i?"visible":"hidden",transform:i?"translate(-50%, 0)":"translate(-50%, "+a+"px)",transition:C.default.easeOut("400ms","transform")+", "+C.default.easeOut("400ms","visibility")}}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=o(r),l=n(9),s=o(l),u=n(4),c=o(u),d=n(2),p=o(d),f=n(3),h=o(f),m=n(6),y=o(m),v=n(5),g=o(v),b=n(7),T=o(b),w=n(0),S=o(w),E=n(1),k=o(E),x=n(12),C=o(x),O=n(156),M=o(O),_=n(153),R=o(_),P=function(e){function t(){var e,n,o,a;(0,p.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=o=(0,y.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(i))),o.componentClickAway=function(){o.timerTransitionId||(null!==o.props.open&&o.props.onRequestClose?o.props.onRequestClose("clickaway"):o.setState({open:!1}))},a=n,(0,y.default)(o,a)}return(0,g.default)(t,e),(0,h.default)(t,[{key:"componentWillMount",value:function(){this.setState({open:this.props.open,message:this.props.message,action:this.props.action})}},{key:"componentDidMount",value:function(){this.state.open&&(this.setAutoHideTimer(),this.setTransitionTimer())}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(this.props.open&&e.open&&(e.message!==this.props.message||e.action!==this.props.action))this.setState({open:!1}),clearTimeout(this.timerOneAtTheTimeId),this.timerOneAtTheTimeId=setTimeout(function(){t.setState({message:e.message,action:e.action,open:!0})},400);else{var n=e.open;this.setState({open:null!==n?n:this.state.open,message:e.message,action:e.action})}}},{key:"componentDidUpdate",value:function(e,t){t.open!==this.state.open&&(this.state.open?(this.setAutoHideTimer(),this.setTransitionTimer()):clearTimeout(this.timerAutoHideId))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timerAutoHideId),clearTimeout(this.timerTransitionId),clearTimeout(this.timerOneAtTheTimeId)}},{key:"setAutoHideTimer",value:function(){var e=this,t=this.props.autoHideDuration;t>0&&(clearTimeout(this.timerAutoHideId),this.timerAutoHideId=setTimeout(function(){null!==e.props.open&&e.props.onRequestClose?e.props.onRequestClose("timeout"):e.setState({open:!1})},t))}},{key:"setTransitionTimer",value:function(){var e=this;this.timerTransitionId=setTimeout(function(){e.timerTransitionId=void 0},400)}},{key:"render",value:function(){var e=this.props,t=(e.autoHideDuration,e.contentStyle),n=e.bodyStyle,o=(e.message,e.onRequestClose,e.onActionTouchTap),r=e.style,l=(0,s.default)(e,["autoHideDuration","contentStyle","bodyStyle","message","onRequestClose","onActionTouchTap","style"]),u=this.state,c=u.action,d=u.message,p=u.open,f=this.context.muiTheme.prepareStyles,h=a(this.props,this.context,this.state);return S.default.createElement(M.default,{onClickAway:p?this.componentClickAway:null},S.default.createElement("div",(0,i.default)({},l,{style:f((0,T.default)(h.root,r))}),S.default.createElement(R.default,{action:c,contentStyle:t,message:d,open:p,onActionTouchTap:o,style:n})))}}]),t}(w.Component);P.contextTypes={muiTheme:k.default.object.isRequired},P.propTypes={},t.default=P},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=e.open,o=e.width,a=t.muiTheme,r=a.baseTheme,i=r.spacing,l=i.desktopGutter,s=i.desktopSubheaderHeight,u=r.fontFamily,c=a.snackbar,d=c.backgroundColor,p=c.textColor,f=c.actionColor,h=a.borderRadius,m=o===v.SMALL;return{root:{fontFamily:u,backgroundColor:d,padding:"0 "+l+"px",height:s,lineHeight:s+"px",borderRadius:m?0:h,maxWidth:m?"inherit":568,minWidth:m?"inherit":288,width:m?"calc(100vw - "+2*l+"px)":"auto",flexGrow:m?1:0},content:{fontSize:14,color:p,opacity:n?1:0,transition:n?y.default.easeOut("500ms","opacity","100ms"):y.default.easeOut("400ms","opacity")},action:{color:f,float:"right",marginTop:6,marginRight:-16,marginLeft:l,backgroundColor:"transparent"}}}Object.defineProperty(t,"__esModule",{value:!0}),t.SnackbarBody=void 0;var r=n(8),i=o(r),l=n(9),s=o(l),u=n(7),c=o(u),d=n(0),p=o(d),f=n(1),h=o(f),m=n(12),y=o(m),v=n(169),g=o(v),b=n(29),T=o(b),w=function(e,t){var n=e.action,o=e.contentStyle,r=e.message,l=(e.open,e.onActionTouchTap),u=e.style,d=(0,s.default)(e,["action","contentStyle","message","open","onActionTouchTap","style"]),f=t.muiTheme.prepareStyles,h=a(e,t),m=n&&p.default.createElement(T.default,{style:h.action,label:n,onTouchTap:l});return p.default.createElement("div",(0,i.default)({},d,{style:f((0,c.default)(h.root,u))}),p.default.createElement("div",{style:f((0,c.default)(h.content,o))},p.default.createElement("span",null,r),m))};t.SnackbarBody=w,w.propTypes={},w.contextTypes={muiTheme:h.default.object.isRequired},t.default=(0,g.default)()(w)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),r=o(a),i=n(4),l=o(i),s=n(2),u=o(s),c=n(3),d=o(c),p=n(6),f=o(p),h=n(5),m=o(h),y=n(7),v=o(y),g=n(0),b=o(g),T=n(1),w=o(T),S={box:{boxSizing:"border-box"}},E=function(e){function t(){return(0,u.default)(this,t),(0,f.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.beforeStyle,n=e.afterStyle,o=(e.beforeElementType,e.afterElementType,e.elementType,(0,r.default)(e,["beforeStyle","afterStyle","beforeElementType","afterElementType","elementType"])),a=this.context.muiTheme.prepareStyles,i=void 0,l=void 0;t&&(i=b.default.createElement(this.props.beforeElementType,{style:a((0,v.default)({},S.box,t)),key:"::before"})),n&&(l=b.default.createElement(this.props.afterElementType,{style:a((0,v.default)({},S.box,n)),key:"::after"}));var s=[i,this.props.children,l],u=o;return u.style=a((0,v.default)({},this.props.style)),b.default.createElement(this.props.elementType,u,s)}}]),t}(g.Component);E.defaultProps={beforeElementType:"div",afterElementType:"div",elementType:"div"},E.contextTypes={muiTheme:w.default.object.isRequired},E.propTypes={},t.default=E},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),r=o(a),i=n(9),l=o(i),s=n(0),u=o(s),c=n(1),d=(o(c),n(154)),p=o(d),f={before:{content:"' '",display:"table"},after:{content:"' '",clear:"both",display:"table"}},h=function(e){var t=e.style,n=e.children,o=(0,l.default)(e,["style","children"]);return u.default.createElement(p.default,(0,r.default)({},o,{beforeStyle:f.before,afterStyle:f.after,style:t}),n)};h.muiName="ClearFix",h.propTypes={},t.default=h},,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=t.muiTheme.baseTheme;return{root:{cursor:e.disabled?"not-allowed":"pointer",position:"relative",overflow:"visible",display:"table",height:"auto",width:"100%"},input:{position:"absolute",cursor:"inherit",pointerEvents:"all",opacity:0,width:"100%",height:"100%",zIndex:2,left:0,boxSizing:"border-box",padding:0,margin:0},controls:{display:"flex",width:"100%",height:"100%"},label:{float:"left",position:"relative",display:"block",width:"calc(100% - 60px)",lineHeight:"24px",color:n.palette.textColor,fontFamily:n.fontFamily},wrap:{transition:R.default.easeOut(),float:"left",position:"relative",display:"block",flexShrink:0,width:60-n.spacing.desktopGutterLess,marginRight:"right"===e.labelPosition?n.spacing.desktopGutterLess:0,marginLeft:"left"===e.labelPosition?n.spacing.desktopGutterLess:0},ripple:{color:e.rippleColor||n.palette.primary1Color,height:"200%",width:"200%",top:-12,left:-12}}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=o(r),l=n(9),s=o(l),u=n(4),c=o(u),d=n(2),p=o(d),f=n(3),h=o(f),m=n(6),y=o(m),v=n(5),g=o(v),b=n(7),T=o(b),w=n(0),S=o(w),E=n(1),k=o(E),x=n(26),C=o(x),O=n(25),M=o(O),_=n(12),R=o(_),P=n(158),j=o(P),L=n(161),A=o(L),I=n(24),D=o(I),N=n(10),B=(o(N),function(e){function t(){var e,n,o,a;(0,p.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=o=(0,y.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(i))),o.state={isKeyboardFocused:!1},o.handleChange=function(e){o.tabPressed=!1,o.setState({isKeyboardFocused:!1});var t=o.refs.checkbox.checked;!o.props.hasOwnProperty("checked")&&o.props.onParentShouldUpdate&&o.props.onParentShouldUpdate(t),o.props.onSwitch&&o.props.onSwitch(e,t)},o.handleKeyDown=function(e){var t=(0,M.default)(e);"tab"===t&&(o.tabPressed=!0),o.state.isKeyboardFocused&&"space"===t&&o.handleChange(e)},o.handleKeyUp=function(e){o.state.isKeyboardFocused&&"space"===(0,M.default)(e)&&o.handleChange(e)},o.handleMouseDown=function(e){0===e.button&&o.refs.touchRipple.start(e)},o.handleMouseUp=function(){o.refs.touchRipple.end()},o.handleMouseLeave=function(){o.refs.touchRipple.end()},o.handleTouchStart=function(e){o.refs.touchRipple.start(e)},o.handleTouchEnd=function(){o.refs.touchRipple.end()},o.handleBlur=function(e){o.setState({isKeyboardFocused:!1}),o.props.onBlur&&o.props.onBlur(e)},o.handleFocus=function(e){setTimeout(function(){o.tabPressed&&o.setState({isKeyboardFocused:!0})},150),o.props.onFocus&&o.props.onFocus(e)},a=n,(0,y.default)(o,a)}return(0,g.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){var e=this.refs.checkbox;this.props.switched&&e.checked===this.props.switched||!this.props.onParentShouldUpdate||this.props.onParentShouldUpdate(e.checked)}},{key:"componentWillReceiveProps",value:function(e){var t=e.hasOwnProperty("checked"),n=e.hasOwnProperty("defaultChecked")&&e.defaultChecked!==this.props.defaultChecked;if(t||n){var o=e.checked||e.defaultChecked||!1;this.setState({switched:o}),this.props.onParentShouldUpdate&&o!==this.props.switched&&this.props.onParentShouldUpdate(o)}}},{key:"isSwitched",value:function(){return this.refs.checkbox.checked}},{key:"setSwitched",value:function(e){this.props.hasOwnProperty("checked")&&!1!==this.props.checked||(this.props.onParentShouldUpdate&&this.props.onParentShouldUpdate(e),this.refs.checkbox.checked=e)}},{key:"getValue",value:function(){return this.refs.checkbox.value}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.value,o=e.iconStyle,r=e.inputStyle,l=e.inputType,u=e.label,c=e.labelStyle,d=e.labelPosition,p=(e.onSwitch,e.onBlur,e.onFocus,e.onMouseUp,e.onMouseDown,e.onMouseLeave,e.onTouchStart,e.onTouchEnd,e.onParentShouldUpdate,e.disabled),f=e.disableTouchRipple,h=e.disableFocusRipple,m=e.className,y=(e.rippleColor,e.rippleStyle),v=e.style,g=(e.switched,e.switchElement),b=e.thumbStyle,w=e.trackStyle,E=(0,s.default)(e,["name","value","iconStyle","inputStyle","inputType","label","labelStyle","labelPosition","onSwitch","onBlur","onFocus","onMouseUp","onMouseDown","onMouseLeave","onTouchStart","onTouchEnd","onParentShouldUpdate","disabled","disableTouchRipple","disableFocusRipple","className","rippleColor","rippleStyle","style","switched","switchElement","thumbStyle","trackStyle"]),k=this.context.muiTheme.prepareStyles,x=a(this.props,this.context),O=(0,T.default)(x.wrap,o),M=(0,T.default)(x.ripple,y);b&&(O.marginLeft/=2,O.marginRight/=2);var _=u&&S.default.createElement("label",{style:k((0,T.default)(x.label,c))},u),R=!p&&!f,P=!p&&!h,L=S.default.createElement(A.default,{ref:"touchRipple",key:"touchRipple",style:M,color:M.color,muiTheme:this.context.muiTheme,centerRipple:!0}),I=S.default.createElement(j.default,{key:"focusRipple",innerStyle:M,color:M.color,muiTheme:this.context.muiTheme,show:this.state.isKeyboardFocused}),N=[R?L:null,P?I:null],B=S.default.createElement("input",(0,i.default)({},E,{ref:"checkbox",type:l,style:k((0,T.default)(x.input,r)),name:t,value:n,disabled:p,onBlur:this.handleBlur,onFocus:this.handleFocus,onChange:this.handleChange,onMouseUp:R&&this.handleMouseUp,onMouseDown:R&&this.handleMouseDown,onMouseLeave:R&&this.handleMouseLeave,onTouchStart:R&&this.handleTouchStart,onTouchEnd:R&&this.handleTouchEnd})),W=b?S.default.createElement("div",{style:k(O)},S.default.createElement("div",{style:k((0,T.default)({},w))}),S.default.createElement(D.default,{style:b,zDepth:1,circle:!0}," ",N," ")):S.default.createElement("div",{style:k(O)},g,N),H="right"===d?S.default.createElement("div",{style:x.controls},W,_):S.default.createElement("div",{style:x.controls},_,W);return S.default.createElement("div",{ref:"root",className:m,style:k((0,T.default)(x.root,v))},S.default.createElement(C.default,{target:"window",onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp}),B,H)}}]),t}(w.Component));B.contextTypes={muiTheme:k.default.object.isRequired},B.propTypes={},t.default=B},,,,,,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=o(a),i=n(20),l=o(i),s=n(19),u=o(s),c=function(e){return r.default.createElement(u.default,e,r.default.createElement("path",{d:"M9.5,7l5,5l-5,5V7z"}))};c=(0,l.default)(c),c.displayName="NavigationArrowDropRight",c.muiName="SvgIcon",t.default=c},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=o(a),i=n(20),l=o(i),s=n(19),u=o(s),c=function(e){return r.default.createElement(u.default,e,r.default.createElement("path",{d:"M7 10l5 5 5-5z"}))};c=(0,l.default)(c),c.displayName="NavigationArrowDropDown",c.muiName="SvgIcon",t.default=c},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=o(a),i=n(20),l=o(i),s=n(19),u=o(s),c=function(e){return r.default.createElement(u.default,e,r.default.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))};c=(0,l.default)(c),c.displayName="NavigationMenu",c.muiName="SvgIcon",t.default=c},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=o(a),i=n(20),l=o(i),s=n(19),u=o(s),c=function(e){return r.default.createElement(u.default,e,r.default.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}))};c=(0,l.default)(c),c.displayName="NavigationMoreVert",c.muiName="SvgIcon",t.default=c},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=o(a),i=n(20),l=o(i),s=n(19),u=o(s),c=function(e){return r.default.createElement(u.default,e,r.default.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}))};c=(0,l.default)(c),c.displayName="ToggleCheckBoxOutlineBlank",c.muiName="SvgIcon",t.default=c},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=o(a),i=n(20),l=o(i),s=n(19),u=o(s),c=function(e){return r.default.createElement(u.default,e,r.default.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))};c=(0,l.default)(c),c.displayName="ToggleCheckBox",c.muiName="SvgIcon",t.default=c},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.largeWidth,n=void 0===t?992:t,o=e.mediumWidth,a=void 0===o?768:o,r=e.resizeInterval,l=void 0===r?166:r;return function(e){return function(t){function o(){var e,t,n,a;(0,c.default)(this,o);for(var r=arguments.length,i=Array(r),u=0;u<r;u++)i[u]=arguments[u];return t=n=(0,h.default)(this,(e=o.__proto__||(0,s.default)(o)).call.apply(e,[this].concat(i))),n.state={width:null},n.handleResize=function(){clearTimeout(n.deferTimer),n.deferTimer=setTimeout(function(){n.updateWidth()},l)},a=t,(0,h.default)(n,a)}return(0,y.default)(o,t),(0,p.default)(o,[{key:"componentDidMount",value:function(){this.updateWidth()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.deferTimer)}},{key:"updateWidth",value:function(){var e=window.innerWidth,t=void 0;(t=e>=n?E:e>=a?S:w)!==this.state.width&&this.setState({width:t})}},{key:"render",value:function(){var t=this.state.width;return null===t?null:g.default.createElement(T.default,{target:"window",onResize:this.handleResize},g.default.createElement(e,(0,i.default)({width:t},this.props)))}}]),o}(v.Component)}}Object.defineProperty(t,"__esModule",{value:!0}),t.LARGE=t.MEDIUM=t.SMALL=void 0;var r=n(8),i=o(r),l=n(4),s=o(l),u=n(2),c=o(u),d=n(3),p=o(d),f=n(6),h=o(f),m=n(5),y=o(m);t.default=a;var v=n(0),g=o(v),b=n(26),T=o(b),w=t.SMALL=1,S=t.MEDIUM=2,E=t.LARGE=3},function(e,t,n){function o(e,t){for(var n,o=[],a=0,r=0,i="",l=t&&t.delimiter||"/";null!=(n=g.exec(e));){var c=n[0],d=n[1],p=n.index;if(i+=e.slice(r,p),r=p+c.length,d)i+=d[1];else{var f=e[r],h=n[2],m=n[3],y=n[4],v=n[5],b=n[6],T=n[7];i&&(o.push(i),i="");var w=null!=h&&null!=f&&f!==h,S="+"===b||"*"===b,E="?"===b||"*"===b,k=n[2]||l,x=y||v;o.push({name:m||a++,prefix:h||"",delimiter:k,optional:E,repeat:S,partial:w,asterisk:!!T,pattern:x?u(x):T?".*":"[^"+s(k)+"]+?"})}}return r<e.length&&(i+=e.substr(r)),i&&o.push(i),o}function a(e,t){return l(o(e,t))}function r(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function i(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function l(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,o){for(var a="",l=n||{},s=o||{},u=s.pretty?r:encodeURIComponent,c=0;c<e.length;c++){var d=e[c];if("string"!=typeof d){var p,f=l[d.name];if(null==f){if(d.optional){d.partial&&(a+=d.prefix);continue}throw new TypeError('Expected "'+d.name+'" to be defined')}if(v(f)){if(!d.repeat)throw new TypeError('Expected "'+d.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(d.optional)continue;throw new TypeError('Expected "'+d.name+'" to not be empty')}for(var h=0;h<f.length;h++){if(p=u(f[h]),!t[c].test(p))throw new TypeError('Expected all "'+d.name+'" to match "'+d.pattern+'", but received `'+JSON.stringify(p)+"`");a+=(0===h?d.prefix:d.delimiter)+p}}else{if(p=d.asterisk?i(f):u(f),!t[c].test(p))throw new TypeError('Expected "'+d.name+'" to match "'+d.pattern+'", but received "'+p+'"');a+=d.prefix+p}}else a+=d}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function u(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function c(e,t){return e.keys=t,e}function d(e){return e.sensitive?"":"i"}function p(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var o=0;o<n.length;o++)t.push({name:o,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(e,t)}function f(e,t,n){for(var o=[],a=0;a<e.length;a++)o.push(y(e[a],t,n).source);return c(new RegExp("(?:"+o.join("|")+")",d(n)),t)}function h(e,t,n){return m(o(e,n),t,n)}function m(e,t,n){v(t)||(n=t||n,t=[]),n=n||{};for(var o=n.strict,a=!1!==n.end,r="",i=0;i<e.length;i++){var l=e[i];if("string"==typeof l)r+=s(l);else{var u=s(l.prefix),p="(?:"+l.pattern+")";t.push(l),l.repeat&&(p+="(?:"+u+p+")*"),p=l.optional?l.partial?u+"("+p+")?":"(?:"+u+"("+p+"))?":u+"("+p+")",r+=p}}var f=s(n.delimiter||"/"),h=r.slice(-f.length)===f;return o||(r=(h?r.slice(0,-f.length):r)+"(?:"+f+"(?=$))?"),r+=a?"$":o&&h?"":"(?="+f+"|$)",c(new RegExp("^"+r,d(n)),t)}function y(e,t,n){return v(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?p(e,t):v(e)?f(e,t,n):h(e,t,n)}var v=n(171);e.exports=y,e.exports.parse=o,e.exports.compile=a,e.exports.tokensToFunction=l,e.exports.tokensToRegExp=m;var g=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(10),l=n.n(i),s=n(0),u=n.n(s),c=n(1),d=n.n(c),p=n(135),f=n.n(p),h=n(53),m=function(e){function t(){var n,r,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=r=a(this,e.call.apply(e,[this].concat(s))),r.history=f()(r.props),i=n,a(r,i)}return r(t,e),t.prototype.componentWillMount=function(){l()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},t.prototype.render=function(){return u.a.createElement(h.a,{history:this.history,children:this.props.children})},t}(u.a.Component);m.propTypes={basename:d.a.string,forceRefresh:d.a.bool,getUserConfirmation:d.a.func,keyLength:d.a.number,children:d.a.node},t.a=m},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(10),l=n.n(i),s=n(0),u=n.n(s),c=n(1),d=n.n(c),p=n(136),f=n.n(p),h=n(53),m=function(e){function t(){var n,r,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=r=a(this,e.call.apply(e,[this].concat(s))),r.history=f()(r.props),i=n,a(r,i)}return r(t,e),t.prototype.componentWillMount=function(){l()(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},t.prototype.render=function(){return u.a.createElement(h.a,{history:this.history,children:this.props.children})},t}(u.a.Component);m.propTypes={basename:d.a.string,getUserConfirmation:d.a.func,hashType:d.a.oneOf(["hashbang","noslash","slash"]),children:d.a.node},t.a=m},function(e,t,n){"use strict";var o=n(199);t.a=o.a},function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}var a=n(0),r=n.n(a),i=n(1),l=n.n(i),s=n(95),u=n(94),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(e){var t=e.to,n=e.exact,a=e.strict,i=e.location,l=e.activeClassName,p=e.className,f=e.activeStyle,h=e.style,m=e.isActive,y=e.ariaCurrent,v=o(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","ariaCurrent"]);return r.a.createElement(s.a,{path:"object"===(void 0===t?"undefined":d(t))?t.pathname:t,exact:n,strict:a,location:i,children:function(e){var n=e.location,o=e.match,a=!!(m?m(o,n):o);return r.a.createElement(u.a,c({to:t,className:a?[p,l].filter(function(e){return e}).join(" "):p,style:a?c({},h,f):h,"aria-current":a&&y},v))}})};p.propTypes={to:u.a.propTypes.to,exact:l.a.bool,strict:l.a.bool,location:l.a.object,activeClassName:l.a.string,className:l.a.string,activeStyle:l.a.object,style:l.a.object,isActive:l.a.func,ariaCurrent:l.a.oneOf(["page","step","location","true"])},p.defaultProps={activeClassName:"active",ariaCurrent:"true"},t.a=p},function(e,t,n){"use strict";var o=n(200);t.a=o.a},function(e,t,n){"use strict";var o=n(201);t.a=o.a},function(e,t,n){"use strict";var o=n(202);t.a=o.a},function(e,t,n){"use strict";var o=n(203);t.a=o.a},function(e,t,n){"use strict";var o=n(55);t.a=o.a},function(e,t,n){"use strict";var o=n(204);t.a=o.a},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(10),l=n.n(i),s=n(0),u=n.n(s),c=n(1),d=n.n(c),p=n(137),f=n.n(p),h=n(54),m=function(e){function t(){var n,r,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=r=a(this,e.call.apply(e,[this].concat(s))),r.history=f()(r.props),i=n,a(r,i)}return r(t,e),t.prototype.componentWillMount=function(){l()(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},t.prototype.render=function(){return u.a.createElement(h.a,{history:this.history,children:this.props.children})},t}(u.a.Component);m.propTypes={initialEntries:d.a.array,initialIndex:d.a.number,getUserConfirmation:d.a.func,keyLength:d.a.number,children:d.a.node},t.a=m},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),l=n.n(i),s=n(1),u=n.n(s),c=n(16),d=n.n(c),p=function(e){function t(){return o(this,t),a(this,e.apply(this,arguments))}return r(t,e),t.prototype.enable=function(e){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(e)},t.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},t.prototype.componentWillMount=function(){d()(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},t.prototype.componentWillReceiveProps=function(e){e.when?this.props.when&&this.props.message===e.message||this.enable(e.message):this.disable()},t.prototype.componentWillUnmount=function(){this.disable()},t.prototype.render=function(){return null},t}(l.a.Component);p.propTypes={when:u.a.bool,message:u.a.oneOfType([u.a.func,u.a.string]).isRequired},p.defaultProps={when:!0},p.contextTypes={router:u.a.shape({history:u.a.shape({block:u.a.func.isRequired}).isRequired}).isRequired},t.a=p},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),l=n.n(i),s=n(1),u=n.n(s),c=n(10),d=n.n(c),p=n(16),f=n.n(p),h=n(141),m=function(e){function t(){return o(this,t),a(this,e.apply(this,arguments))}return r(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){f()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=n.i(h.a)(e.to),o=n.i(h.a)(this.props.to);if(n.i(h.b)(t,o))return void d()(!1,"You tried to redirect to the same route you're currently on: \""+o.pathname+o.search+'"');this.perform()},t.prototype.perform=function(){var e=this.context.router.history,t=this.props,n=t.push,o=t.to;n?e.push(o):e.replace(o)},t.prototype.render=function(){return null},t}(l.a.Component);m.propTypes={push:u.a.bool,from:u.a.string,to:u.a.oneOfType([u.a.string,u.a.object]).isRequired},m.defaultProps={push:!1},m.contextTypes={router:u.a.shape({history:u.a.shape({push:u.a.func.isRequired,replace:u.a.func.isRequired}).isRequired,staticContext:u.a.object}).isRequired},t.a=m},function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(10),s=n.n(l),u=n(16),c=n.n(u),d=n(0),p=n.n(d),f=n(1),h=n.n(f),m=n(31),y=(n.n(m),n(54)),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},g=function(e){var t=e.pathname,n=void 0===t?"/":t,o=e.search,a=void 0===o?"":o,r=e.hash,i=void 0===r?"":r;return{pathname:n,search:"?"===a?"":a,hash:"#"===i?"":i}},b=function(e,t){return e?v({},t,{pathname:n.i(m.addLeadingSlash)(e)+t.pathname}):t},T=function(e,t){if(!e)return t;var o=n.i(m.addLeadingSlash)(e);return 0!==t.pathname.indexOf(o)?t:v({},t,{pathname:t.pathname.substr(o.length)})},w=function(e){return"string"==typeof e?n.i(m.parsePath)(e):g(e)},S=function(e){return"string"==typeof e?e:n.i(m.createPath)(e)},E=function(e){return function(){c()(!1,"You cannot %s with <StaticRouter>",e)}},k=function(){},x=function(e){function t(){var o,i,l;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return o=i=r(this,e.call.apply(e,[this].concat(u))),i.createHref=function(e){return n.i(m.addLeadingSlash)(i.props.basename+S(e))},i.handlePush=function(e){var t=i.props,n=t.basename,o=t.context;o.action="PUSH",o.location=b(n,w(e)),o.url=S(o.location)},i.handleReplace=function(e){var t=i.props,n=t.basename,o=t.context;o.action="REPLACE",o.location=b(n,w(e)),o.url=S(o.location)},i.handleListen=function(){return k},i.handleBlock=function(){return k},l=o,r(i,l)}return i(t,e),t.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},t.prototype.componentWillMount=function(){s()(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},t.prototype.render=function(){var e=this.props,t=e.basename,n=(e.context,e.location),a=o(e,["basename","context","location"]),r={createHref:this.createHref,action:"POP",location:T(t,w(n)),push:this.handlePush,replace:this.handleReplace,go:E("go"),goBack:E("goBack"),goForward:E("goForward"),listen:this.handleListen,block:this.handleBlock};return p.a.createElement(y.a,v({},a,{history:r}))},t}(p.a.Component);x.propTypes={basename:h.a.string,context:h.a.object.isRequired,location:h.a.oneOfType([h.a.string,h.a.object])},x.defaultProps={basename:"",location:"/"},x.childContextTypes={router:h.a.object.isRequired},t.a=x},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),l=n.n(i),s=n(1),u=n.n(s),c=n(10),d=n.n(c),p=n(16),f=n.n(p),h=n(55),m=function(e){function t(){return o(this,t),a(this,e.apply(this,arguments))}return r(t,e),t.prototype.componentWillMount=function(){f()(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){d()(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),d()(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,o=this.props.location||e.location,a=void 0,r=void 0;return l.a.Children.forEach(t,function(t){if(l.a.isValidElement(t)){var i=t.props,s=i.path,u=i.exact,c=i.strict,d=i.sensitive,p=i.from,f=s||p;null==a&&(r=t,a=f?n.i(h.a)(o.pathname,{path:f,exact:u,strict:c,sensitive:d}):e.match)}}),a?l.a.cloneElement(r,{location:o,computedMatch:a}):null},t}(l.a.Component);m.contextTypes={router:u.a.shape({route:u.a.object.isRequired}).isRequired},m.propTypes={children:u.a.node,location:u.a.object},t.a=m},function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}var a=n(0),r=n.n(a),i=n(1),l=n.n(i),s=n(205),u=n.n(s),c=n(96),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},p=function(e){var t=function(t){var n=t.wrappedComponentRef,a=o(t,["wrappedComponentRef"]);return r.a.createElement(c.a,{render:function(t){return r.a.createElement(e,d({},a,t,{ref:n}))}})};return t.displayName="withRouter("+(e.displayName||e.name)+")",t.WrappedComponent=e,t.propTypes={wrappedComponentRef:l.a.func},u()(t,e)};t.a=p},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){"use strict";var e={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n=Object.defineProperty,o=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,r=Object.getOwnPropertyDescriptor,i=Object.getPrototypeOf,l=i&&i(Object);return function s(u,c,d){if("string"!=typeof c){if(l){var p=i(c);p&&p!==l&&s(u,p,d)}var f=o(c);a&&(f=f.concat(a(c)));for(var h=0;h<f.length;++h){var m=f[h];if(!(e[m]||t[m]||d&&d[m])){var y=r(c,m);try{n(u,m,y)}catch(e){}}}return u}return u}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return i.default.createElement(v.default,{iconButtonElement:i.default.createElement(b.default,null,i.default.createElement(w.default,{className:"submenu-svg",style:{color:"white",fill:"white"}})),targetOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"top"}},i.default.createElement(f.default,{primaryText:"Cerrar sesion",onClick:e.onLogout}))}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=o(r),l=n(59),s=n(144),u=o(s),c=n(148),d=o(c),p=n(101),f=o(p),h=n(163),m=o(h),y=n(151),v=o(y),g=n(38),b=o(g),T=n(166),w=o(T);a.muiName="IconMenu";var S=i.default.createClass({displayName:"AdminBackofficeBar",getInitialState:function(){return{drawerOpen:!1}},getDefaultProps:function(){return{onLogout:function(){}}},closeDrawer:function(){this.setState({drawerOpen:!1})},toggleDrawer:function(){var e=!this.state.drawerOpen;this.setState({drawerOpen:e})},render:function(){var e=this;return i.default.createElement("div",null,i.default.createElement(u.default,{onLeftIconButtonTouchTap:this.toggleDrawer,iconElementRight:i.default.createElement(a,{onLogout:this.props.onLogout}),title:"Administracion HOY COMO"}),i.default.createElement(d.default,{open:this.state.drawerOpen,docked:!1,onRequestChange:function(t){return e.setState({drawerOpen:t})}},i.default.createElement(l.Link,{to:"/index",onClick:this.closeDrawer},i.default.createElement(f.default,null,"Principal")),i.default.createElement(f.default,{primaryText:"Comercios",rightIcon:i.default.createElement(m.default,null),menuItems:[i.default.createElement(l.Link,{to:"/shops/create",onClick:this.closeDrawer},i.default.createElement(f.default,null,"Crear")),i.default.createElement(l.Link,{to:"/shops/list",onClick:this.closeDrawer},i.default.createElement(f.default,null,"Ver"))]})))}});t.default=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(o),r=a.default.createClass({displayName:"AdminIndex",render:function(){return a.default.createElement("div",{className:"with-margin index"},a.default.createElement("h1",null,"Administracion de HOY COMO"),a.default.createElement("h2",null,"Configuracion y estadisticas"),a.default.createElement("p",null,"Desde aqui es posible monitorear a los usuarios registrados y comercios asociados a la aplicacion."))}});t.default=r},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=o(a),i=n(34),l=o(i),s=n(58),u=(o(s),n(41)),c=o(u),d=n(57),p=n(29),f=o(p),h=n(36),m=o(h),y=n(78),v=o(y),g=function(){},b=r.default.createClass({displayName:"AdminLogin",getInitialState:function(){return{username:"",password:"",errMsg:null}},getDefaultProps:function(){return{onSubmit:g}},submitForm:function(){var e=this,t=this.state.username,n=this.state.password,o=btoa(t+":"+n);(0,m.default)({method:"post",url:"/api/v1/admin/login",headers:{Authorization:"Basic "+o}}).then(function(t){console.log("Contenido:"),console.log(t.data),e.props.onSubmit(t.data.token)}).catch(function(t){console.error("Error"),e.setState({errMsg:"Credenciales invalidas"})})},handleKeyPress:function(e){"Enter"==e.key&&this.submitForm()},render:function(){var e=this,t=this.state.errMsg?r.default.createElement("p",{style:{color:"red"}},this.state.errMsg):r.default.createElement("div",null);return r.default.createElement("div",{onKeyPress:this.handleKeyPress},r.default.createElement(v.default,{title:"Admin HOY COMO"}),t,r.default.createElement(l.default,null,r.default.createElement(d.Card,null,r.default.createElement(d.CardHeader,{title:"Iniciar sesion",subtitle:"Ingrese credenciales"}),";",r.default.createElement(d.CardText,{expandable:!1},r.default.createElement(c.default,{name:"username",hint:"username",floatingLabelText:"username",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})}}),r.default.createElement("br",null),r.default.createElement(c.default,{name:"password",hintText:"Password",floatingLabelText:"Password",type:"password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}}),r.default.createElement("br",null)),r.default.createElement(d.CardActions,null,r.default.createElement(f.default,{label:"Iniciar sesion",onClick:this.submitForm})))))}});t.default=b},,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=o(a),i=n(34),l=(o(i),n(58)),s=o(l),u=n(41),c=o(u),d=(n(57),n(79)),p=(o(d),n(29)),f=(o(p),n(45)),h=(o(f),n(80)),m=o(h),y=n(115),v=o(y),g=n(101),b=o(g),T=n(36),w=o(T),S=n(78),E=(o(S),r.default.createClass({displayName:"ShopForm",getDefaultProps:function(){return{token:""}},getInitialState:function(){return{msgSnackbarOpen:!1,name:"",address:"",phone:"",zone:1,districts:null,adminEmail:"",adminName:"",lat:"",long:""}},componentDidMount:function(){var e=this;console.log("token: "+this.props.token),w.default.get("/api/v1/districts").then(function(t){return e.setState({districts:t.data.districts})})},openSnackbar:function(e){console.log("Abriendo snack bar"),this.setState({msgSnackbarOpen:!0,snackbarMessage:e})},handleSnackbarRequestClose:function(){this.setState({msgSnackbarOpen:!1})},handleShopCreateSuccess:function(e){var t=e.shop.id;this.openSnackbar("Comercio "+t+" creado")},handleShopCreateError:function(e){this.openSnackbar(e.response.data.message)},checkFields:function(){var e=this.state,t=e.name,n=e.address,o=e.phone,a=e.zone,r=e.adminEmail,i=e.adminName,l=e.lat,s=e.long;return t&&n&&o&&a&&r&&i&&l&&s?{ok:!0}:{ok:!1,msg:"Parametros incompletos"}},createShop:function(){var e=this,t=this.checkFields();if(!t.ok)return this.openSnackbar(t.msg);var n=this.state,o=n.name,a=n.address,r=n.phone,i=n.zone,l=n.adminEmail,s=n.adminName,u=n.lat,c=n.long,d=this.state.districts.find(function(e){return e.id==i}),p={name:o,address:a,phone:r,zone:d.name,adminEmail:l,adminName:s,lat:u,long:c},f={headers:{Authorization:"Bearer "+this.props.token}};w.default.post("/api/v1/shops",p,f).then(function(t){console.log(t.data),e.handleShopCreateSuccess(t.data)}).catch(function(t){console.error(t),e.handleShopCreateError(t)})},handleZoneChange:function(e,t,n){this.setState({zone:n})},render:function(){var e=this;if(!this.state.districts)return r.default.createElement("span",null,"Espere...");var t=[];return this.state.districts.forEach(function(e){return t.push(r.default.createElement(b.default,{value:e.id,primaryText:e.name}))}),r.default.createElement("div",{style:{paddingBottom:10,backgroundColor:"rgba(255,255,255,0.7)"}},r.default.createElement("div",{style:{margin:20}},r.default.createElement("h1",null,"Nuevo comercio"),r.default.createElement("hr",null),r.default.createElement("h2",null,"Datos del comercio"),r.default.createElement(c.default,{name:"Nombre",hint:"Nombre",floatingLabelText:"Nombre",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}}),r.default.createElement("br",null),r.default.createElement(c.default,{name:"Direccion",hint:"Direccion",floatingLabelText:"Direccion",value:this.state.address,onChange:function(t){return e.setState({address:t.target.value})}}),r.default.createElement("br",null),r.default.createElement(c.default,{name:"Latitud",hint:"Latitud",floatingLabelText:"Latitud",value:this.state.lat,onChange:function(t){return e.setState({lat:t.target.value})}}),r.default.createElement(c.default,{name:"Longitud",hint:"Longitud",floatingLabelText:"Longitud",value:this.state.long,onChange:function(t){return e.setState({long:t.target.value})}}),r.default.createElement("br",null),r.default.createElement(v.default,{value:this.state.zone,onChange:this.handleZoneChange,openImmediately:!1,style:{width:200,padding:0}},t)," ",r.default.createElement("br",null),r.default.createElement(c.default,{name:"Telefono",hint:"Telefono sin guion ni espacios",floatingLabelText:"Telefono",value:this.state.phone,onChange:function(t){return e.setState({phone:t.target.value})},type:"number"}),r.default.createElement("br",null),r.default.createElement("hr",null),r.default.createElement("h2",null,"Datos del administrador del comercio"),r.default.createElement(c.default,{name:"Nombre",hint:"Nombre",floatingLabelText:"Nombre",value:this.state.adminName,onChange:function(t){return e.setState({adminName:t.target.value})}}),r.default.createElement("br",null),r.default.createElement(c.default,{name:"Email",hint:"Email",floatingLabelText:"Email",value:this.state.adminEmail,onChange:function(t){return e.setState({adminEmail:t.target.value})}}),r.default.createElement("br",null),r.default.createElement(s.default,{style:{marginTop:20},label:"Crear comercio",onClick:this.createShop,secondary:!0})),r.default.createElement(m.default,{open:this.state.msgSnackbarOpen,message:this.state.snackbarMessage,autoHideDuration:3e3,onRequestClose:this.handleSnackbarRequestClose}))}}));t.default=E},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){function t(){var t=e.shop.id;e.shop.enabled=!1,(0,b.default)({url:"/api/v1/shops/"+t,method:"PUT",headers:{Authorization:"Bearer "+e.token},data:e.shop}).then(function(t){console.log(t.data),e.onSuccess()}).catch(function(t){console.error(t),e.onError()})}var n=[i.default.createElement(f.default,{label:"Cancelar",primary:!0,onClick:e.onClose}),i.default.createElement(f.default,{label:"Prohibir",primary:!0,onClick:t})];return i.default.createElement(m.default,{title:"Prohibir comercio "+e.shop.id,actions:n,modal:!0,open:e.open},"Desea Prohibir el comercio?")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=o(r),l=n(34),s=(o(l),n(58)),u=(o(s),n(41)),c=(o(u),n(57)),d=n(79),p=(o(d),n(29)),f=o(p),h=n(45),m=o(h),y=n(80),v=o(y),g=n(36),b=o(g),T=n(78),w=(o(T),n(301)),S=o(w),E=i.default.createClass({displayName:"ShopList",getDefaultProps:function(){return{token:""}},getInitialState:function(){return{shops:[],errSnackbarOpen:!1,banShop:null,shopMenu:null}},loadShops:function(){var e=this;b.default.get("/api/v1/shops?token="+this.props.token).then(function(t){var n=t.data.shops;console.log("loadShops shops: "+n),console.log("shops:"),console.log(n),e.setState({shops:n})}).catch(function(t){console.error(t),e.openErrSnackbar("Error al obtener los comercios")})},componentDidMount:function(){console.log("token: "+this.props.token),this.loadShops(),console.log("ShopList DID MOUNT")},openErrSnackbar:function(e){console.log("Abriendo snack bar"),this.setState({errSnackbarOpen:!0,errSnackbarMessage:e})},handleErrSnackbarRequestClose:function(){this.setState({errSnackbarOpen:!1})},closeBanDialog:function(e){var t=this;return function(){t.setState({banShop:null})}},openBanDialog:function(e){var t=this;return function(){var n=e.id||e;t.setState({banShop:n})}},handleShopBanSuccess:function(e){var t=this;return function(){t.closeBanDialog(e)(),t.loadShops(),t.openErrSnackbar("Comercio baneado")}},enableShop:function(e){var t=this;return e.enabled=!0,function(){(0,b.default)({url:"/api/v1/shops/"+e.id,method:"PUT",headers:{Authorization:"Bearer "+t.props.token},data:e}).then(t.loadShops).catch(function(e){console.error(e),t.openErrSnackbar("Error al habilitar comercio")})}},showMenu:function(e){var t=this;return function(){(0,b.default)({url:"/api/v1/shops/"+e.id+"/menu",method:"GET",headers:{Authorization:"Bearer "+t.props.token}}).then(function(e){console.log("showMenu axios response: "),console.log(e.data),t.setState({shopMenu:e.data.menu})}).catch(function(e){console.error(e),t.openErrSnackbar("Error al obtener menu de comercio")})}},handleMenuClose:function(){this.setState({shopMenu:null})},render:function(){var e=this;if(console.log("this.state.shops: "+this.state.shops),0==this.state.shops.length)return i.default.createElement("div",null,"No hay comercios...");var t=null;if(this.state.banShop){console.log("Creando dialogo de baneo");var n=this.state.shops.find(function(t){return t.id==e.state.banShop});t=i.default.createElement(a,{shop:n,token:this.props.token,open:!0,onSuccess:this.handleShopBanSuccess(n),onClose:this.closeBanDialog(n),onError:function(){return e.openErrSnackbar("Error al Prohibir el comercio "+n.id)}})}var o=null;this.state.shopMenu&&(o=i.default.createElement(S.default,{menu:this.state.shopMenu,goBack:this.handleMenuClose}));var r=this.state.shops.map(function(t){return i.default.createElement(c.Card,{style:{backgroundColor:"rgba(255,255,255,0.8)",margin:10}},i.default.createElement(c.CardHeader,{title:"Comercio "+t.id,subtitle:t.name}),i.default.createElement(c.CardText,{expandable:!1},i.default.createElement("p",null,i.default.createElement("strong",null,"Nombre"),": ",t.name," "),i.default.createElement("p",null,i.default.createElement("strong",null,"Direccion"),": ",t.address," "),i.default.createElement("p",null,i.default.createElement("strong",null,"Barrio"),": ",t.zone," "),i.default.createElement("p",null,i.default.createElement("strong",null,"Telefono"),": ",t.phone," ")),i.default.createElement(c.CardActions,null,i.default.createElement(f.default,{label:"Prohibir",secondary:!0,disabled:!t.enabled,onClick:e.openBanDialog(t)}),i.default.createElement(f.default,{label:"Habilitar",disabled:t.enabled,onClick:e.enableShop(t)}),i.default.createElement(f.default,{label:"Menu",onClick:e.showMenu(t)})))}),l=t||o||r;return i.default.createElement("div",null,l,i.default.createElement(v.default,{open:this.state.errSnackbarOpen,message:this.state.errSnackbarMessage,autoHideDuration:3e3,onRequestClose:this.handleErrSnackbarRequestClose}))}});t.default=E},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=o(a),i=n(29),l=o(i),s=function(e){e.title;return r.default.createElement("div",{style:{color:"white",backgroundColor:"rgb(0, 188, 212)",transition:"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms",boxSizing:"border-box",fontFamily:"Roboto, sans-serif",borderRadius:"0px",position:"relative",zIndex:1100,width:"100%",display:"flex",paddingLeft:"24px",paddingRight:"24px"}},r.default.createElement(l.default,{style:{color:"white"},label:"Volver",onClick:e.onClick}))};t.default=s},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=o(a),i=n(15),l=o(i),s=n(59),u=n(34),c=o(u),d=n(36),p=(o(d),n(271)),f=o(p),h=n(272),m=o(h),y=n(273),v=o(y),g=n(276),b=o(g),T=n(275),w=o(T);(0,o(n(81)).default)(),console.log("Parseando cookie "+document.cookie);var S=document.cookie||"",E=S.split("; ").find(function(e){return e.startsWith("token=")}),k=E?E.replace("token=",""):null,x=r.default.createClass({displayName:"AdminBackoffice",getInitialState:function(){return{token:null,user:null,renderReady:!1}},componentDidMount:function(){console.log("AdminBackoffice MONTADA!"),k?this.setToken(k):this.setState({renderReady:!0})},setToken:function(e){e=e.token||e,console.log("Seteando token: "+e),this.setState({token:e,renderReady:!0})},render:function(){var e=this;console.log("RENDERING AdminBackoffice!");var t=this.state.token;return t?(console.log("window.location.hash: "+window.location.hash),"#/"==window.location.hash&&(console.log("REPLACING LOCATION"),window.location.replace("/admin#/index")),r.default.createElement(c.default,null,r.default.createElement("div",null,r.default.createElement(f.default,{onLogout:function(){return e.logoutForm.submit()}}),r.default.createElement(s.Route,{path:"/index",component:m.default}),r.default.createElement(s.Route,{path:"/shops/list",component:function(){return r.default.createElement(b.default,{token:t})}}),r.default.createElement(s.Route,{path:"/shops/create",component:function(){return r.default.createElement(w.default,{token:t})}}),r.default.createElement("form",{action:"/admin/logout",method:"POST",ref:function(t){return e.logoutForm=t},style:{display:"hidden"}})))):r.default.createElement(v.default,{onSubmit:this.setToken})}});l.default.render(r.default.createElement(s.HashRouter,null,r.default.createElement(x,null)),document.getElementById("root"))},,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.menu,n=t.map(function(e){var t=e.dish;return i.default.createElement(c.Card,{style:{backgroundColor:"rgba(255,255,255,0.7)"}},i.default.createElement(c.CardHeader,{title:"Plato "+t.id,subtitle:t.name}),i.default.createElement(c.CardText,{expandable:!1},i.default.createElement("p",null,i.default.createElement("strong",null,"Descripcion:")," ",t.description," "),i.default.createElement("p",null,i.default.createElement("strong",null,"Costo:")," ",t.cost," ")))});return i.default.createElement("div",null,i.default.createElement(y.default,{onClick:e.goBack}),n)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=o(r),l=n(34),s=(o(l),n(58)),u=(o(s),n(41)),c=(o(u),n(57)),d=n(79),p=(o(d),n(29)),f=(o(p),n(45)),h=(o(f),n(80)),m=(o(h),n(298)),y=o(m);t.default=a}],[299]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYWRtaW5iYWNrb2ZmaWNlLmJ1bmRsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2ludmFyaWFudC9icm93c2VyLmpzIiwid2VicGFjazovLy8uL34vaGlzdG9yeS9QYXRoVXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9oaXN0b3J5L2VzL1BhdGhVdGlscy5qcyIsIndlYnBhY2s6Ly8vLi9+L2hpc3RvcnkvZXMvTG9jYXRpb25VdGlscy5qcyIsIndlYnBhY2s6Ly8vLi9+L21hdGVyaWFsLXVpL0RpYWxvZy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2hpc3RvcnkvTG9jYXRpb25VdGlscy5qcyIsIndlYnBhY2s6Ly8vLi9+L2hpc3RvcnkvY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9oaXN0b3J5L2VzL2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyLWRvbS9lcy9Sb3V0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yb3V0ZXIvZXMvUm91dGVyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyL2VzL21hdGNoUGF0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L21hdGVyaWFsLXVpL0NoZWNrYm94L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbWF0ZXJpYWwtdWkvU25hY2tiYXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9oaXN0b3J5L0RPTVV0aWxzLmpzIiwid2VicGFjazovLy8uL34vaGlzdG9yeS9lcy9ET01VdGlscy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvTGluay5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvUm91dGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yb3V0ZXIvZXMvUm91dGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZXNvbHZlLXBhdGhuYW1lL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vdmFsdWUtZXF1YWwvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYXRlcmlhbC11aS9Qb3BvdmVyL1BvcG92ZXJBbmltYXRpb25WZXJ0aWNhbC5qcyIsIndlYnBhY2s6Ly8vLi9+L21hdGVyaWFsLXVpL0Ryb3BEb3duTWVudS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2hpc3RvcnkvY3JlYXRlQnJvd3Nlckhpc3RvcnkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9oaXN0b3J5L2NyZWF0ZUhhc2hIaXN0b3J5LmpzIiwid2VicGFjazovLy8uL34vaGlzdG9yeS9jcmVhdGVNZW1vcnlIaXN0b3J5LmpzIiwid2VicGFjazovLy8uL34vaGlzdG9yeS9lcy9jcmVhdGVCcm93c2VySGlzdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9+L2hpc3RvcnkvZXMvY3JlYXRlSGFzaEhpc3RvcnkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9oaXN0b3J5L2VzL2NyZWF0ZU1lbW9yeUhpc3RvcnkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYXRlcmlhbC11aS9BcHBCYXIvQXBwQmFyLmpzIiwid2VicGFjazovLy8uL34vbWF0ZXJpYWwtdWkvQXBwQmFyL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbWF0ZXJpYWwtdWkvQ2hlY2tib3gvQ2hlY2tib3guanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYXRlcmlhbC11aS9EaWFsb2cvRGlhbG9nLmpzIiwid2VicGFjazovLy8uL34vbWF0ZXJpYWwtdWkvRHJhd2VyL0RyYXdlci5qcyIsIndlYnBhY2s6Ly8vLi9+L21hdGVyaWFsLXVpL0RyYXdlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L21hdGVyaWFsLXVpL0Ryb3BEb3duTWVudS9Ecm9wRG93bk1lbnUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYXRlcmlhbC11aS9JY29uTWVudS9JY29uTWVudS5qcyIsIndlYnBhY2s6Ly8vLi9+L21hdGVyaWFsLXVpL0ljb25NZW51L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbWF0ZXJpYWwtdWkvU25hY2tiYXIvU25hY2tiYXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYXRlcmlhbC11aS9TbmFja2Jhci9TbmFja2JhckJvZHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYXRlcmlhbC11aS9pbnRlcm5hbC9CZWZvcmVBZnRlcldyYXBwZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYXRlcmlhbC11aS9pbnRlcm5hbC9DbGVhckZpeC5qcyIsIndlYnBhY2s6Ly8vLi9+L21hdGVyaWFsLXVpL2ludGVybmFsL0VuaGFuY2VkU3dpdGNoLmpzIiwid2VicGFjazovLy8uL34vbWF0ZXJpYWwtdWkvc3ZnLWljb25zL25hdmlnYXRpb24tYXJyb3ctZHJvcC1yaWdodC5qcyIsIndlYnBhY2s6Ly8vLi9+L21hdGVyaWFsLXVpL3N2Zy1pY29ucy9uYXZpZ2F0aW9uL2Fycm93LWRyb3AtZG93bi5qcyIsIndlYnBhY2s6Ly8vLi9+L21hdGVyaWFsLXVpL3N2Zy1pY29ucy9uYXZpZ2F0aW9uL21lbnUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYXRlcmlhbC11aS9zdmctaWNvbnMvbmF2aWdhdGlvbi9tb3JlLXZlcnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYXRlcmlhbC11aS9zdmctaWNvbnMvdG9nZ2xlL2NoZWNrLWJveC1vdXRsaW5lLWJsYW5rLmpzIiwid2VicGFjazovLy8uL34vbWF0ZXJpYWwtdWkvc3ZnLWljb25zL3RvZ2dsZS9jaGVjay1ib3guanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYXRlcmlhbC11aS91dGlscy93aXRoV2lkdGguanMiLCJ3ZWJwYWNrOi8vLy4vfi9wYXRoLXRvLXJlZ2V4cC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3BhdGgtdG8tcmVnZXhwL34vaXNhcnJheS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvQnJvd3NlclJvdXRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvSGFzaFJvdXRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvTWVtb3J5Um91dGVyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyLWRvbS9lcy9OYXZMaW5rLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyLWRvbS9lcy9Qcm9tcHQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yb3V0ZXItZG9tL2VzL1JlZGlyZWN0LmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyLWRvbS9lcy9TdGF0aWNSb3V0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yb3V0ZXItZG9tL2VzL1N3aXRjaC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvbWF0Y2hQYXRoLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyLWRvbS9lcy93aXRoUm91dGVyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyL2VzL01lbW9yeVJvdXRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXJvdXRlci9lcy9Qcm9tcHQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yb3V0ZXIvZXMvUmVkaXJlY3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yb3V0ZXIvZXMvU3RhdGljUm91dGVyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyL2VzL1N3aXRjaC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXJvdXRlci9lcy93aXRoUm91dGVyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyL34vaG9pc3Qtbm9uLXJlYWN0LXN0YXRpY3MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9BZG1pbkJhY2tvZmZpY2VCYXIuanMiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9BZG1pbkluZGV4LmpzIiwid2VicGFjazovLy8uL2NvbXBvbmVudHMvQWRtaW5Mb2dpbi5qcyIsIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL1Nob3BGb3JtLmpzIiwid2VicGFjazovLy8uL2NvbXBvbmVudHMvU2hvcExpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9BY3Rpb25IZWFkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9BZG1pbkJhY2tvZmZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9TaG9wTWVudS5qcyJdLCJuYW1lcyI6WyJ3ZWJwYWNrSnNvbnAiLCJtb2R1bGUiLCJleHBvcnRzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImludmFyaWFudCIsImNvbmRpdGlvbiIsImZvcm1hdCIsImEiLCJiIiwiYyIsImQiLCJlIiwiZiIsImVycm9yIiwidW5kZWZpbmVkIiwiRXJyb3IiLCJhcmdzIiwiYXJnSW5kZXgiLCJyZXBsYWNlIiwibmFtZSIsImZyYW1lc1RvUG9wIiwiX19lc01vZHVsZSIsImhhc0Jhc2VuYW1lIiwiYWRkTGVhZGluZ1NsYXNoIiwicGF0aCIsImNoYXJBdCIsInN0cmlwTGVhZGluZ1NsYXNoIiwic3Vic3RyIiwicHJlZml4IiwiUmVnRXhwIiwidGVzdCIsInN0cmlwQmFzZW5hbWUiLCJsZW5ndGgiLCJzdHJpcFRyYWlsaW5nU2xhc2giLCJzbGljZSIsInBhcnNlUGF0aCIsInBhdGhuYW1lIiwic2VhcmNoIiwiaGFzaCIsImhhc2hJbmRleCIsImluZGV4T2YiLCJzZWFyY2hJbmRleCIsImNyZWF0ZVBhdGgiLCJsb2NhdGlvbiIsIl9fd2VicGFja19leHBvcnRzX18iLCJjcmVhdGVMb2NhdGlvbiIsImxvY2F0aW9uc0FyZUVxdWFsIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3Jlc29sdmVfcGF0aG5hbWVfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV92YWx1ZV9lcXVhbF9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19QYXRoVXRpbHNfXyIsIl9leHRlbmRzIiwiT2JqZWN0IiwiYXNzaWduIiwidGFyZ2V0IiwiaSIsImFyZ3VtZW50cyIsInNvdXJjZSIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInN0YXRlIiwiY3VycmVudExvY2F0aW9uIiwiZGVjb2RlVVJJIiwiVVJJRXJyb3IiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiZGVmYXVsdCIsIl9EaWFsb2ciLCJfRGlhbG9nMiIsIm9iaiIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfcmVzb2x2ZVBhdGhuYW1lIiwiX3Jlc29sdmVQYXRobmFtZTIiLCJfdmFsdWVFcXVhbCIsIl92YWx1ZUVxdWFsMiIsIl9QYXRoVXRpbHMiLCJfd2FybmluZyIsIl93YXJuaW5nMiIsImNyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyIiwicHJvbXB0Iiwic2V0UHJvbXB0IiwibmV4dFByb21wdCIsImNvbmZpcm1UcmFuc2l0aW9uVG8iLCJhY3Rpb24iLCJnZXRVc2VyQ29uZmlybWF0aW9uIiwiY2FsbGJhY2siLCJyZXN1bHQiLCJsaXN0ZW5lcnMiLCJhcHBlbmRMaXN0ZW5lciIsImZuIiwiaXNBY3RpdmUiLCJsaXN0ZW5lciIsImFwcGx5IiwicHVzaCIsImZpbHRlciIsIml0ZW0iLCJub3RpZnlMaXN0ZW5lcnMiLCJfbGVuIiwiQXJyYXkiLCJfa2V5IiwiZm9yRWFjaCIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQiLCJuIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19Sb3V0ZXJfXyIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsImNvbnN0cnVjdG9yIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X19fZGVmYXVsdCIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9yZWFjdF9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3JlYWN0X19fZGVmYXVsdCIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19wcm9wX3R5cGVzX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQiLCJSb3V0ZXIiLCJfUmVhY3QkQ29tcG9uZW50IiwiX3RlbXAiLCJfdGhpcyIsIl9yZXQiLCJ0aGlzIiwiY29uY2F0IiwibWF0Y2giLCJjb21wdXRlTWF0Y2giLCJwcm9wcyIsImhpc3RvcnkiLCJnZXRDaGlsZENvbnRleHQiLCJyb3V0ZXIiLCJjb250ZXh0Iiwicm91dGUiLCJ1cmwiLCJwYXJhbXMiLCJpc0V4YWN0IiwiY29tcG9uZW50V2lsbE1vdW50IiwiX3RoaXMyIiwiX3Byb3BzIiwiY2hpbGRyZW4iLCJDaGlsZHJlbiIsImNvdW50IiwidW5saXN0ZW4iLCJsaXN0ZW4iLCJzZXRTdGF0ZSIsImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLCJuZXh0UHJvcHMiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsInJlbmRlciIsIm9ubHkiLCJDb21wb25lbnQiLCJwcm9wVHlwZXMiLCJvYmplY3QiLCJpc1JlcXVpcmVkIiwibm9kZSIsImNvbnRleHRUeXBlcyIsImNoaWxkQ29udGV4dFR5cGVzIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3BhdGhfdG9fcmVnZXhwX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcGF0aF90b19yZWdleHBfX19kZWZhdWx0IiwicGF0dGVybkNhY2hlIiwiY2FjaGVDb3VudCIsImNvbXBpbGVQYXRoIiwicGF0dGVybiIsIm9wdGlvbnMiLCJjYWNoZUtleSIsImVuZCIsInN0cmljdCIsInNlbnNpdGl2ZSIsImNhY2hlIiwia2V5cyIsInJlIiwiY29tcGlsZWRQYXR0ZXJuIiwibWF0Y2hQYXRoIiwiX29wdGlvbnMiLCJfb3B0aW9ucyRwYXRoIiwiX29wdGlvbnMkZXhhY3QiLCJleGFjdCIsIl9vcHRpb25zJHN0cmljdCIsIl9vcHRpb25zJHNlbnNpdGl2ZSIsIl9jb21waWxlUGF0aCIsImV4ZWMiLCJ2YWx1ZXMiLCJyZWR1Y2UiLCJtZW1vIiwiaW5kZXgiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX0Jyb3dzZXJSb3V0ZXJfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fSGFzaFJvdXRlcl9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19MaW5rX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX01lbW9yeVJvdXRlcl9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19OYXZMaW5rX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1Byb21wdF9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X19SZWRpcmVjdF9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83X19Sb3V0ZV9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84X19Sb3V0ZXJfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fU3RhdGljUm91dGVyX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEwX19Td2l0Y2hfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTFfX21hdGNoUGF0aF9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMl9fd2l0aFJvdXRlcl9fIiwiX0NoZWNrYm94IiwiX0NoZWNrYm94MiIsIl9TbmFja2JhciIsIl9TbmFja2JhcjIiLCJjYW5Vc2VET00iLCJ3aW5kb3ciLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJhdHRhY2hFdmVudCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkZXRhY2hFdmVudCIsImdldENvbmZpcm1hdGlvbiIsIm1lc3NhZ2UiLCJjb25maXJtIiwic3VwcG9ydHNIaXN0b3J5IiwidWEiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJzdXBwb3J0c1BvcFN0YXRlT25IYXNoQ2hhbmdlIiwic3VwcG9ydHNHb1dpdGhvdXRSZWxvYWRVc2luZ0hhc2giLCJpc0V4dHJhbmVvdXNQb3BzdGF0ZUV2ZW50IiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX19kZWZhdWx0IiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdCIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9pbnZhcmlhbnRfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9pbnZhcmlhbnRfX19kZWZhdWx0IiwiaXNNb2RpZmllZEV2ZW50IiwibWV0YUtleSIsImFsdEtleSIsImN0cmxLZXkiLCJzaGlmdEtleSIsIkxpbmsiLCJoYW5kbGVDbGljayIsIm9uQ2xpY2siLCJkZWZhdWx0UHJldmVudGVkIiwiYnV0dG9uIiwicHJldmVudERlZmF1bHQiLCJfdGhpcyRwcm9wcyIsInRvIiwiaW5uZXJSZWYiLCJocmVmIiwiY3JlYXRlSHJlZiIsInJlZiIsImZ1bmMiLCJzdHJpbmciLCJib29sIiwib25lT2ZUeXBlIiwiZGVmYXVsdFByb3BzIiwic2hhcGUiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3Rfcm91dGVyX2VzX1JvdXRlX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX21hdGNoUGF0aF9fIiwiaXNFbXB0eUNoaWxkcmVuIiwiUm91dGUiLCJfcmVmIiwiY29tcHV0ZWRNYXRjaCIsImNvbXBvbmVudCIsIm5leHRDb250ZXh0IiwiX2NvbnRleHQkcm91dGVyIiwic3RhdGljQ29udGV4dCIsImlzQWJzb2x1dGUiLCJzcGxpY2VPbmUiLCJsaXN0IiwiayIsInBvcCIsInJlc29sdmVQYXRobmFtZSIsImZyb20iLCJ0b1BhcnRzIiwic3BsaXQiLCJmcm9tUGFydHMiLCJpc1RvQWJzIiwiaXNGcm9tQWJzIiwibXVzdEVuZEFicyIsImhhc1RyYWlsaW5nU2xhc2giLCJsYXN0IiwidXAiLCJwYXJ0IiwidW5zaGlmdCIsImpvaW4iLCJ2YWx1ZUVxdWFsIiwiaXNBcnJheSIsImV2ZXJ5IiwiYVR5cGUiLCJfdHlwZW9mIiwiYVZhbHVlIiwidmFsdWVPZiIsImJWYWx1ZSIsImFLZXlzIiwiYktleXMiLCJTeW1ib2wiLCJpdGVyYXRvciIsImdldFN0eWxlcyIsInRhcmdldE9yaWdpbiIsIm9wZW4iLCJtdWlUaGVtZSIsImhvcml6b250YWwiLCJyb290IiwicG9zaXRpb24iLCJ6SW5kZXgiLCJwb3BvdmVyIiwib3BhY2l0eSIsInRyYW5zZm9ybSIsInRyYW5zZm9ybU9yaWdpbiIsInZlcnRpY2FsIiwidHJhbnNpdGlvbiIsIl90cmFuc2l0aW9uczIiLCJlYXNlT3V0IiwibWF4SGVpZ2h0IiwiX2dldFByb3RvdHlwZU9mIiwiX2dldFByb3RvdHlwZU9mMiIsIl9jbGFzc0NhbGxDaGVjazIiLCJfY2xhc3NDYWxsQ2hlY2szIiwiX2NyZWF0ZUNsYXNzMiIsIl9jcmVhdGVDbGFzczMiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMiLCJfaW5oZXJpdHMyIiwiX2luaGVyaXRzMyIsIl9zaW1wbGVBc3NpZ24iLCJfc2ltcGxlQXNzaWduMiIsIl9yZWFjdCIsIl9yZWFjdDIiLCJfcHJvcFR5cGVzIiwiX3Byb3BUeXBlczIiLCJfUGFwZXIiLCJfUGFwZXIyIiwiX3RyYW5zaXRpb25zIiwiX3Byb3BUeXBlczMiLCJQb3BvdmVyQW5pbWF0aW9uVmVydGljYWwiLCJfQ29tcG9uZW50IiwiY2xhc3NOYW1lIiwic3R5bGUiLCJ6RGVwdGgiLCJzdHlsZXMiLCJNZW51SXRlbSIsIkRyb3BEb3duTWVudSIsIl9Ecm9wRG93bk1lbnUyIiwiX0Ryb3BEb3duTWVudTMiLCJfTWVudUl0ZW0yIiwiX01lbnVJdGVtMyIsIl9pbnZhcmlhbnQiLCJfaW52YXJpYW50MiIsIl9Mb2NhdGlvblV0aWxzIiwiX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyIiwiX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyMiIsIl9ET01VdGlscyIsImdldEhpc3RvcnlTdGF0ZSIsImNyZWF0ZUJyb3dzZXJIaXN0b3J5IiwiZ2xvYmFsSGlzdG9yeSIsImNhblVzZUhpc3RvcnkiLCJuZWVkc0hhc2hDaGFuZ2VMaXN0ZW5lciIsIl9wcm9wcyRmb3JjZVJlZnJlc2giLCJmb3JjZVJlZnJlc2giLCJfcHJvcHMkZ2V0VXNlckNvbmZpcm0iLCJfcHJvcHMka2V5TGVuZ3RoIiwia2V5TGVuZ3RoIiwiYmFzZW5hbWUiLCJnZXRET01Mb2NhdGlvbiIsImhpc3RvcnlTdGF0ZSIsIl93aW5kb3ckbG9jYXRpb24iLCJjcmVhdGVLZXkiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJ0cmFuc2l0aW9uTWFuYWdlciIsIm5leHRTdGF0ZSIsImhhbmRsZVBvcFN0YXRlIiwiaGFuZGxlUG9wIiwiaGFuZGxlSGFzaENoYW5nZSIsImZvcmNlTmV4dFBvcCIsIm9rIiwicmV2ZXJ0UG9wIiwiZnJvbUxvY2F0aW9uIiwidG9Mb2NhdGlvbiIsInRvSW5kZXgiLCJhbGxLZXlzIiwiZnJvbUluZGV4IiwiZGVsdGEiLCJnbyIsImluaXRpYWxMb2NhdGlvbiIsInB1c2hTdGF0ZSIsInByZXZJbmRleCIsIm5leHRLZXlzIiwicmVwbGFjZVN0YXRlIiwiZ29CYWNrIiwiZ29Gb3J3YXJkIiwibGlzdGVuZXJDb3VudCIsImNoZWNrRE9NTGlzdGVuZXJzIiwiaXNCbG9ja2VkIiwiYmxvY2siLCJ1bmJsb2NrIiwiSGFzaFBhdGhDb2RlcnMiLCJoYXNoYmFuZyIsImVuY29kZVBhdGgiLCJkZWNvZGVQYXRoIiwibm9zbGFzaCIsInNsYXNoIiwiZ2V0SGFzaFBhdGgiLCJzdWJzdHJpbmciLCJwdXNoSGFzaFBhdGgiLCJyZXBsYWNlSGFzaFBhdGgiLCJjcmVhdGVIYXNoSGlzdG9yeSIsImNhbkdvV2l0aG91dFJlbG9hZCIsIl9wcm9wcyRoYXNoVHlwZSIsImhhc2hUeXBlIiwiX0hhc2hQYXRoQ29kZXJzJGhhc2hUIiwiaWdub3JlUGF0aCIsImVuY29kZWRQYXRoIiwicHJldkxvY2F0aW9uIiwiYWxsUGF0aHMiLCJsYXN0SW5kZXhPZiIsIm5leHRQYXRocyIsImNsYW1wIiwibG93ZXJCb3VuZCIsInVwcGVyQm91bmQiLCJtaW4iLCJtYXgiLCJjcmVhdGVNZW1vcnlIaXN0b3J5IiwiX3Byb3BzJGluaXRpYWxFbnRyaWVzIiwiaW5pdGlhbEVudHJpZXMiLCJfcHJvcHMkaW5pdGlhbEluZGV4IiwiaW5pdGlhbEluZGV4IiwiZW50cmllcyIsIm1hcCIsImVudHJ5IiwibmV4dEluZGV4IiwibmV4dEVudHJpZXMiLCJzcGxpY2UiLCJjYW5HbyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fUGF0aFV0aWxzX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX0xvY2F0aW9uVXRpbHNfXyIsIl9jb250ZXh0JG11aVRoZW1lIiwiYXBwQmFyIiwiaWNvbkJ1dHRvblNpemUiLCJ3aWR0aCIsImRpc3BsYXkiLCJiYWNrZ3JvdW5kQ29sb3IiLCJjb2xvciIsInBhZGRpbmdMZWZ0IiwicGFkZGluZyIsInBhZGRpbmdSaWdodCIsInRpdGxlIiwid2hpdGVTcGFjZSIsIm92ZXJmbG93IiwidGV4dE92ZXJmbG93IiwibWFyZ2luIiwicGFkZGluZ1RvcCIsImxldHRlclNwYWNpbmciLCJmb250U2l6ZSIsImZvbnRXZWlnaHQiLCJ0aXRsZUZvbnRXZWlnaHQiLCJ0ZXh0Q29sb3IiLCJoZWlnaHQiLCJsaW5lSGVpZ2h0IiwibWFpbkVsZW1lbnQiLCJib3hGbGV4IiwiZmxleCIsImljb25CdXR0b25TdHlsZSIsIm1hcmdpblRvcCIsIm1hcmdpblJpZ2h0IiwibWFyZ2luTGVmdCIsImljb25CdXR0b25JY29uU3R5bGUiLCJmaWxsIiwiZmxhdEJ1dHRvbiIsIl9leHRlbmRzMiIsIl9leHRlbmRzMyIsIl9rZXlzIiwiX2tleXMyIiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMiIsIl9vYmplY3RXaXRob3V0UHJvcGVydGllczMiLCJfSWNvbkJ1dHRvbiIsIl9JY29uQnV0dG9uMiIsIl9tZW51IiwiX21lbnUyIiwiQXBwQmFyIiwiaGFuZGxlVG91Y2hUYXBMZWZ0SWNvbkJ1dHRvbiIsIm9uTGVmdEljb25CdXR0b25Ub3VjaFRhcCIsImhhbmRsZVRvdWNoVGFwUmlnaHRJY29uQnV0dG9uIiwib25SaWdodEljb25CdXR0b25Ub3VjaFRhcCIsImhhbmRsZVRpdGxlVG91Y2hUYXAiLCJvblRpdGxlVG91Y2hUYXAiLCJ0aXRsZVN0eWxlIiwiaWNvblN0eWxlTGVmdCIsImljb25TdHlsZVJpZ2h0Iiwic2hvd01lbnVJY29uQnV0dG9uIiwiaWNvbkVsZW1lbnRMZWZ0IiwiaWNvbkVsZW1lbnRSaWdodCIsImljb25DbGFzc05hbWVMZWZ0IiwiaWNvbkNsYXNzTmFtZVJpZ2h0Iiwib3RoZXIiLCJwcmVwYXJlU3R5bGVzIiwibWVudUVsZW1lbnRMZWZ0IiwibWVudUVsZW1lbnRSaWdodCIsInRpdGxlQ29tcG9uZW50IiwiU3RyaW5nIiwidGl0bGVFbGVtZW50Iiwib25Ub3VjaFRhcCIsImljb25MZWZ0U3R5bGUiLCJpY29uRWxlbWVudExlZnRQcm9wcyIsInR5cGUiLCJtdWlOYW1lIiwiaWNvbkVsZW1MZWZ0Q2hpbGRyZW4iLCJpY29uU3R5bGUiLCJjbG9uZUVsZW1lbnQiLCJpY29uQ2xhc3NOYW1lIiwiaWNvblJpZ2h0U3R5bGUiLCJpY29uRWxlbWVudFJpZ2h0UHJvcHMiLCJpY29uRWxlbVJpZ2h0Q2hpbGRyZW4iLCJfaWNvbkJ1dHRvbkljb25TdHlsZSIsInJvdW5kZWQiLCJfQXBwQmFyIiwiX0FwcEJhcjIiLCJjaGVja2JveCIsImljb24iLCJjaGVjayIsInRyYW5zaXRpb25PcmlnaW4iLCJjaGVja2VkQ29sb3IiLCJjaGVja1doZW5Td2l0Y2hlZCIsImNoZWNrV2hlbkRpc2FibGVkIiwiZGlzYWJsZWRDb2xvciIsImJveCIsImJveENvbG9yIiwiYm94V2hlblN3aXRjaGVkIiwiYm94V2hlbkRpc2FibGVkIiwiY2hlY2tlZCIsImxhYmVsIiwiZGlzYWJsZWQiLCJsYWJlbERpc2FibGVkQ29sb3IiLCJsYWJlbENvbG9yIiwiX0VuaGFuY2VkU3dpdGNoIiwiX0VuaGFuY2VkU3dpdGNoMiIsIl9jaGVja0JveE91dGxpbmVCbGFuayIsIl9jaGVja0JveE91dGxpbmVCbGFuazIiLCJfY2hlY2tCb3giLCJfY2hlY2tCb3gyIiwiQ2hlY2tib3giLCJzd2l0Y2hlZCIsImhhbmRsZVN0YXRlQ2hhbmdlIiwibmV3U3dpdGNoZWQiLCJoYW5kbGVDaGVjayIsImlzSW5wdXRDaGVja2VkIiwib25DaGVjayIsImRlZmF1bHRDaGVja2VkIiwidmFsdWVMaW5rIiwicmVmcyIsImVuaGFuY2VkU3dpdGNoIiwiaXNTd2l0Y2hlZCIsIm5ld0NoZWNrZWRWYWx1ZSIsInNldFN3aXRjaGVkIiwiX3Byb3BzMiIsImNoZWNrZWRJY29uIiwidW5jaGVja2VkSWNvbiIsImJveFN0eWxlcyIsImNoZWNrU3R5bGVzIiwiY2hlY2tlZEVsZW1lbnQiLCJ1bkNoZWNrZWRFbGVtZW50IiwiY2hlY2tib3hFbGVtZW50IiwicmlwcGxlQ29sb3IiLCJtZXJnZWRJY29uU3R5bGUiLCJsYWJlbFN0eWxlIiwiZW5oYW5jZWRTd2l0Y2hQcm9wcyIsImlucHV0VHlwZSIsInN3aXRjaEVsZW1lbnQiLCJvblN3aXRjaCIsIm9uUGFyZW50U2hvdWxkVXBkYXRlIiwibGFiZWxQb3NpdGlvbiIsImF1dG9TY3JvbGxCb2R5Q29udGVudCIsIl9jb250ZXh0JG11aVRoZW1lJGJhcyIsImJhc2VUaGVtZSIsInNwYWNpbmciLCJwYWxldHRlIiwiZGlhbG9nIiwiZ3V0dGVyIiwiZGVza3RvcEd1dHRlciIsImJvcmRlclNjcm9sbCIsImJvcmRlckNvbG9yIiwiYm94U2l6aW5nIiwiV2Via2l0VGFwSGlnaGxpZ2h0Q29sb3IiLCJ0b3AiLCJsZWZ0IiwiY29udGVudCIsIm1heFdpZHRoIiwiZGVza3RvcEtleWxpbmVJbmNyZW1lbnQiLCJhY3Rpb25zQ29udGFpbmVyIiwidGV4dEFsaWduIiwib3ZlcmxheSIsImRpYWxvZ092ZXJsYXkiLCJ0aXRsZUZvbnRTaXplIiwibWFyZ2luQm90dG9tIiwiYm9keSIsImJvZHlGb250U2l6ZSIsImJvZHlDb2xvciIsIm92ZXJmbG93WSIsImJvcmRlclRvcCIsImJvcmRlckJvdHRvbSIsIl9yZWFjdERvbSIsIl9yZWFjdERvbTIiLCJfcmVhY3RFdmVudExpc3RlbmVyIiwiX3JlYWN0RXZlbnRMaXN0ZW5lcjIiLCJfa2V5Y29kZSIsIl9rZXljb2RlMiIsIl9PdmVybGF5IiwiX092ZXJsYXkyIiwiX1JlbmRlclRvTGF5ZXIiLCJfUmVuZGVyVG9MYXllcjIiLCJfVHJhbnNpdGlvbkdyb3VwIiwiX1RyYW5zaXRpb25Hcm91cDIiLCJUcmFuc2l0aW9uSXRlbSIsImNsZWFyVGltZW91dCIsImVudGVyVGltZW91dCIsImxlYXZlVGltZW91dCIsImNvbXBvbmVudFdpbGxBcHBlYXIiLCJzZXRUaW1lb3V0IiwiRGlhbG9nSW5saW5lIiwiX0NvbXBvbmVudDIiLCJfcmVmMiIsIl90ZW1wMiIsIl9yZXQyIiwiX2xlbjIiLCJfa2V5MiIsImhhbmRsZVRvdWNoVGFwT3ZlcmxheSIsInJlcXVlc3RDbG9zZSIsImhhbmRsZUtleVVwIiwiaGFuZGxlUmVzaXplIiwicG9zaXRpb25EaWFsb2ciLCJhY3Rpb25zIiwiYXV0b0RldGVjdFdpbmRvd0hlaWdodCIsImJvZHlTdHlsZSIsInJlcG9zaXRpb25PblVwZGF0ZSIsImNsaWVudEhlaWdodCIsImlubmVySGVpZ2h0IiwiZG9jdW1lbnRFbGVtZW50IiwiY29udGFpbmVyIiwiZmluZERPTU5vZGUiLCJkaWFsb2dXaW5kb3ciLCJkaWFsb2dDb250ZW50IiwiZGlhbG9nV2luZG93SGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwibWF4RGlhbG9nQ29udGVudEhlaWdodCIsInByZXZpb3VzU2libGluZyIsIm5leHRTaWJsaW5nIiwiYnV0dG9uQ2xpY2tlZCIsIm1vZGFsIiwib25SZXF1ZXN0Q2xvc2UiLCJfcHJvcHMzIiwiYWN0aW9uc0NvbnRhaW5lckNsYXNzTmFtZSIsImFjdGlvbnNDb250YWluZXJTdHlsZSIsImJvZHlDbGFzc05hbWUiLCJjb250ZW50Q2xhc3NOYW1lIiwiY29udGVudFN0eWxlIiwib3ZlcmxheUNsYXNzTmFtZSIsIm92ZXJsYXlTdHlsZSIsInBhcGVyQ2xhc3NOYW1lIiwicGFwZXJQcm9wcyIsInRpdGxlQ2xhc3NOYW1lIiwidG9BcnJheSIsImlzVmFsaWRFbGVtZW50Iiwib25LZXlVcCIsIm9uUmVzaXplIiwidHJhbnNpdGlvbkFwcGVhciIsInRyYW5zaXRpb25BcHBlYXJUaW1lb3V0IiwidHJhbnNpdGlvbkVudGVyIiwidHJhbnNpdGlvbkVudGVyVGltZW91dCIsInNob3ciLCJEaWFsb2ciLCJfQ29tcG9uZW50MyIsIl9yZWYzIiwiX3RlbXAzIiwiX3RoaXMzIiwiX3JldDMiLCJfbGVuMyIsIl9rZXkzIiwicmVuZGVyTGF5ZXIiLCJ1c2VMYXllckZvckNsaWNrQXdheSIsIl9hdXRvUHJlZml4IiwiX2F1dG9QcmVmaXgyIiwib3Blbk5hdkV2ZW50SGFuZGxlciIsIkRyYXdlciIsImNsb3NlIiwiZG9ja2VkIiwib25Cb2R5VG91Y2hTdGFydCIsInN3aXBlQXJlYVdpZHRoIiwidG91Y2hTdGFydFgiLCJpc1J0bCIsIm9mZnNldFdpZHRoIiwidG91Y2hlcyIsInBhZ2VYIiwidG91Y2hTdGFydFkiLCJwYWdlWSIsIm9wZW5TZWNvbmRhcnkiLCJkaXNhYmxlU3dpcGVUb09wZW4iLCJtYXliZVN3aXBpbmciLCJvbkJvZHlUb3VjaE1vdmUiLCJvbkJvZHlUb3VjaEVuZCIsImN1cnJlbnRYIiwiY3VycmVudFkiLCJzd2lwaW5nIiwic2V0UG9zaXRpb24iLCJnZXRUcmFuc2xhdGVYIiwiZFhBYnMiLCJhYnMiLCJkWUFicyIsInN3aXBlU3RhcnRYIiwiY2hhbmdlZFRvdWNoZXMiLCJ0cmFuc2xhdGVSYXRpbyIsImdldE1heFRyYW5zbGF0ZVgiLCJyZW1vdmVCb2R5VG91Y2hMaXN0ZW5lcnMiLCJlbmFibGVTd2lwZUhhbmRsaW5nIiwiZGlzYWJsZVN3aXBlSGFuZGxpbmciLCJ0aGVtZSIsImRyYXdlciIsIngiLCJnZXRUcmFuc2xhdGVNdWx0aXBsaWVyIiwiZ2V0VHJhbnNsYXRlZFdpZHRoIiwiV2Via2l0T3ZlcmZsb3dTY3JvbGxpbmciLCJkcmF3ZXJPdmVybGF5IiwicG9pbnRlckV2ZW50cyIsInJvb3RXaGVuT3BlblJpZ2h0IiwicmlnaHQiLCJyZWFzb24iLCJvblJlcXVlc3RDaGFuZ2UiLCJwYXJzZUZsb2F0IiwiaW5uZXJXaWR0aCIsInRyYW5zbGF0ZVgiLCJydGxUcmFuc2xhdGVNdWx0aXBsaWVyIiwiY2xpY2tBd2F5YWJsZUVsZW1lbnQiLCJ0cmFuc2Zvcm1DU1MiLCJzZXRPcGFjaXR5Iiwic2V0IiwiY29udGFpbmVyQ2xhc3NOYW1lIiwiY29udGFpbmVyU3R5bGUiLCJzaG91bGRTaG93IiwidHJhbnNpdGlvbkVuYWJsZWQiLCJfRHJhd2VyIiwiX0RyYXdlcjIiLCJhY2NlbnRDb2xvciIsImRyb3BEb3duTWVudSIsImNvbnRyb2wiLCJjdXJzb3IiLCJkZXNrdG9wR3V0dGVyTGVzcyIsImljb25TaXplIiwiZGVza3RvcEd1dHRlck1pbmkiLCJpY29uQ2hpbGRyZW4iLCJkZXNrdG9wVG9vbGJhckhlaWdodCIsImxhYmVsV2hlbk9wZW4iLCJkZXNrdG9wRHJvcERvd25NZW51Rm9udFNpemUiLCJkZXNrdG9wU3ViaGVhZGVySGVpZ2h0IiwiZm9udEZhbWlseSIsIm91dGxpbmUiLCJyb290V2hlbk9wZW4iLCJ1bmRlcmxpbmUiLCJib3R0b20iLCJfYXJyb3dEcm9wRG93biIsIl9hcnJvd0Ryb3BEb3duMiIsIl9NZW51IiwiX01lbnUyIiwiX0NsZWFyRml4IiwiX0NsZWFyRml4MiIsIl9Qb3BvdmVyIiwiX1BvcG92ZXIyIiwiX1BvcG92ZXJBbmltYXRpb25WZXJ0aWNhbCIsIl9Qb3BvdmVyQW5pbWF0aW9uVmVydGljYWwyIiwiX2V2ZW50cyIsIl9ldmVudHMyIiwicm9vdE5vZGUiLCJhcnJvd05vZGUiLCJoYW5kbGVUb3VjaFRhcENvbnRyb2wiLCJhbmNob3JFbCIsImhhbmRsZVJlcXVlc3RDbG9zZU1lbnUiLCJoYW5kbGVFc2NLZXlEb3duTWVudSIsImhhbmRsZUtleURvd24iLCJoYW5kbGVJdGVtVG91Y2hUYXAiLCJjaGlsZCIsIm11bHRpcGxlIiwicGVyc2lzdCIsIm9uQ2hhbmdlIiwiaXNLZXlib2FyZCIsImhhbmRsZUNoYW5nZSIsIm9uQ2xvc2UiLCJkcm9wQXJyb3ciLCJmb2N1cyIsInNldEtleWJvYXJkRm9jdXMiLCJhdXRvV2lkdGgiLCJzZXRXaWR0aCIsIm9wZW5JbW1lZGlhdGVseSIsImVsIiwiX3RoaXM0IiwiYW5pbWF0ZWQiLCJhbmltYXRpb24iLCJsaXN0U3R5bGUiLCJtZW51U3R5bGVQcm9wIiwibWVudVN0eWxlIiwic2VsZWN0aW9uUmVuZGVyZXIiLCJtZW51SXRlbVN0eWxlIiwic2VsZWN0ZWRNZW51SXRlbVN0eWxlIiwidW5kZXJsaW5lU3R5bGUiLCJpY29uQnV0dG9uIiwiYW5jaG9yT3JpZ2luIiwiX3N0YXRlIiwiZGlzcGxheVZhbHVlIiwic2VsZWN0aW9uUmVuZGVyZXJDaGlsZHJlbiIsInByaW1hcnlUZXh0IiwiY2xpZW50V2lkdGgiLCJvbktleURvd24iLCJkZXNrdG9wIiwib25Fc2NLZXlEb3duIiwib25JdGVtVG91Y2hUYXAiLCJJY29uTWVudSIsIm1lbnVJbml0aWFsbHlLZXlib2FyZEZvY3VzZWQiLCJ0b3VjaFRhcENsb3NlRGVsYXkiLCJ0aW1lckNsb3NlSWQiLCJoYW5kbGVSZXF1ZXN0Q2xvc2UiLCJpY29uTWVudUNvbnRhaW5lciIsImN1cnJlbnRUYXJnZXQiLCJpY29uQnV0dG9uRWxlbWVudCIsIm9uS2V5Ym9hcmRGb2N1cyIsIm9uTW91c2VEb3duIiwib25Nb3VzZUxlYXZlIiwib25Nb3VzZUVudGVyIiwib25Nb3VzZVVwIiwibWVudSIsIm1lcmdlZFJvb3RTdHlsZXMiLCJtZXJnZWRNZW51U3R5bGVzIiwiaWNvbkJ1dHRvblByb3BzIiwiaW5pdGlhbGx5S2V5Ym9hcmRGb2N1c2VkIiwiX0ljb25NZW51MiIsIl9JY29uTWVudTMiLCJzbmFja2JhciIsInZpc2liaWxpdHkiLCJfQ2xpY2tBd2F5TGlzdGVuZXIiLCJfQ2xpY2tBd2F5TGlzdGVuZXIyIiwiX1NuYWNrYmFyQm9keSIsIl9TbmFja2JhckJvZHkyIiwiU25hY2tiYXIiLCJjb21wb25lbnRDbGlja0F3YXkiLCJ0aW1lclRyYW5zaXRpb25JZCIsInNldEF1dG9IaWRlVGltZXIiLCJzZXRUcmFuc2l0aW9uVGltZXIiLCJ0aW1lck9uZUF0VGhlVGltZUlkIiwicHJldlByb3BzIiwicHJldlN0YXRlIiwidGltZXJBdXRvSGlkZUlkIiwiYXV0b0hpZGVEdXJhdGlvbiIsIm9uQWN0aW9uVG91Y2hUYXAiLCJvbkNsaWNrQXdheSIsIl9jb250ZXh0JG11aVRoZW1lJGJhczIiLCJfY29udGV4dCRtdWlUaGVtZSRzbmEiLCJhY3Rpb25Db2xvciIsImJvcmRlclJhZGl1cyIsImlzU21hbGwiLCJfd2l0aFdpZHRoIiwiU01BTEwiLCJtaW5XaWR0aCIsImZsZXhHcm93IiwiZmxvYXQiLCJTbmFja2JhckJvZHkiLCJfd2l0aFdpZHRoMiIsIl9GbGF0QnV0dG9uIiwiX0ZsYXRCdXR0b24yIiwiYWN0aW9uQnV0dG9uIiwiQmVmb3JlQWZ0ZXJXcmFwcGVyIiwiYmVmb3JlU3R5bGUiLCJhZnRlclN0eWxlIiwiYmVmb3JlRWxlbWVudFR5cGUiLCJhZnRlckVsZW1lbnRUeXBlIiwiZWxlbWVudFR5cGUiLCJiZWZvcmVFbGVtZW50IiwiYWZ0ZXJFbGVtZW50IiwiX0JlZm9yZUFmdGVyV3JhcHBlciIsIl9CZWZvcmVBZnRlcldyYXBwZXIyIiwiYmVmb3JlIiwiYWZ0ZXIiLCJjbGVhciIsIkNsZWFyRml4IiwiaW5wdXQiLCJjb250cm9scyIsIndyYXAiLCJmbGV4U2hyaW5rIiwicmlwcGxlIiwicHJpbWFyeTFDb2xvciIsIl9Gb2N1c1JpcHBsZSIsIl9Gb2N1c1JpcHBsZTIiLCJfVG91Y2hSaXBwbGUiLCJfVG91Y2hSaXBwbGUyIiwiRW5oYW5jZWRTd2l0Y2giLCJpc0tleWJvYXJkRm9jdXNlZCIsInRhYlByZXNzZWQiLCJjb2RlIiwiaGFuZGxlTW91c2VEb3duIiwidG91Y2hSaXBwbGUiLCJzdGFydCIsImhhbmRsZU1vdXNlVXAiLCJoYW5kbGVNb3VzZUxlYXZlIiwiaGFuZGxlVG91Y2hTdGFydCIsImhhbmRsZVRvdWNoRW5kIiwiaGFuZGxlQmx1ciIsIm9uQmx1ciIsImhhbmRsZUZvY3VzIiwib25Gb2N1cyIsImlucHV0Tm9kZSIsImhhc0NoZWNrZWRQcm9wIiwiaGFzTmV3RGVmYXVsdFByb3AiLCJuZXdTd2l0Y2hlZFZhbHVlIiwiaW5wdXRTdHlsZSIsIm9uVG91Y2hTdGFydCIsIm9uVG91Y2hFbmQiLCJkaXNhYmxlVG91Y2hSaXBwbGUiLCJkaXNhYmxlRm9jdXNSaXBwbGUiLCJyaXBwbGVTdHlsZSIsInRodW1iU3R5bGUiLCJ0cmFja1N0eWxlIiwid3JhcFN0eWxlcyIsIm1lcmdlZFJpcHBsZVN0eWxlIiwibGFiZWxFbGVtZW50Iiwic2hvd1RvdWNoUmlwcGxlIiwic2hvd0ZvY3VzUmlwcGxlIiwiY2VudGVyUmlwcGxlIiwiZm9jdXNSaXBwbGUiLCJpbm5lclN0eWxlIiwicmlwcGxlcyIsImlucHV0RWxlbWVudCIsInN3aXRjaE9yVGh1bWJFbGVtZW50IiwiY2lyY2xlIiwiZWxlbWVudHNJbk9yZGVyIiwiX3B1cmUiLCJfcHVyZTIiLCJfU3ZnSWNvbiIsIl9TdmdJY29uMiIsIk5hdmlnYXRpb25BcnJvd0Ryb3BSaWdodCIsImRpc3BsYXlOYW1lIiwiTmF2aWdhdGlvbkFycm93RHJvcERvd24iLCJOYXZpZ2F0aW9uTWVudSIsIk5hdmlnYXRpb25Nb3JlVmVydCIsIlRvZ2dsZUNoZWNrQm94T3V0bGluZUJsYW5rIiwiVG9nZ2xlQ2hlY2tCb3giLCJ3aXRoV2lkdGgiLCJfb3B0aW9ucyRsYXJnZVdpZHRoIiwibGFyZ2VXaWR0aCIsIl9vcHRpb25zJG1lZGl1bVdpZHRoIiwibWVkaXVtV2lkdGgiLCJfb3B0aW9ucyRyZXNpemVJbnRlcnYiLCJyZXNpemVJbnRlcnZhbCIsIk15Q29tcG9uZW50IiwiV2l0aFdpZHRoIiwiZGVmZXJUaW1lciIsInVwZGF0ZVdpZHRoIiwiTEFSR0UiLCJNRURJVU0iLCJwYXJzZSIsInN0ciIsInJlcyIsInRva2VucyIsImRlZmF1bHREZWxpbWl0ZXIiLCJkZWxpbWl0ZXIiLCJQQVRIX1JFR0VYUCIsIm0iLCJlc2NhcGVkIiwib2Zmc2V0IiwibmV4dCIsImNhcHR1cmUiLCJncm91cCIsIm1vZGlmaWVyIiwiYXN0ZXJpc2siLCJwYXJ0aWFsIiwicmVwZWF0Iiwib3B0aW9uYWwiLCJlc2NhcGVHcm91cCIsImVzY2FwZVN0cmluZyIsImNvbXBpbGUiLCJ0b2tlbnNUb0Z1bmN0aW9uIiwiZW5jb2RlVVJJQ29tcG9uZW50UHJldHR5IiwiZW5jb2RlVVJJIiwiY2hhckNvZGVBdCIsInRvVXBwZXJDYXNlIiwiZW5jb2RlQXN0ZXJpc2siLCJtYXRjaGVzIiwib3B0cyIsImRhdGEiLCJlbmNvZGUiLCJwcmV0dHkiLCJlbmNvZGVVUklDb21wb25lbnQiLCJ0b2tlbiIsInNlZ21lbnQiLCJpc2FycmF5IiwiSlNPTiIsInN0cmluZ2lmeSIsImoiLCJhdHRhY2hLZXlzIiwiZmxhZ3MiLCJyZWdleHBUb1JlZ2V4cCIsImdyb3VwcyIsImFycmF5VG9SZWdleHAiLCJwYXJ0cyIsInBhdGhUb1JlZ2V4cCIsInN0cmluZ1RvUmVnZXhwIiwidG9rZW5zVG9SZWdFeHAiLCJlbmRzV2l0aERlbGltaXRlciIsImFyciIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9yZWFjdF9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3JlYWN0X19fZGVmYXVsdCIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9wcm9wX3R5cGVzX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcHJvcF90eXBlc19fX2RlZmF1bHQiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaGlzdG9yeV9jcmVhdGVCcm93c2VySGlzdG9yeV9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2hpc3RvcnlfY3JlYXRlQnJvd3Nlckhpc3RvcnlfX19kZWZhdWx0IiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19Sb3V0ZXJfXyIsIkJyb3dzZXJSb3V0ZXIiLCJudW1iZXIiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaGlzdG9yeV9jcmVhdGVIYXNoSGlzdG9yeV9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2hpc3RvcnlfY3JlYXRlSGFzaEhpc3RvcnlfX19kZWZhdWx0IiwiSGFzaFJvdXRlciIsIm9uZU9mIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19NZW1vcnlSb3V0ZXJfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fUm91dGVfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fTGlua19fIiwiTmF2TGluayIsImFjdGl2ZUNsYXNzTmFtZSIsImFjdGl2ZVN0eWxlIiwiZ2V0SXNBY3RpdmUiLCJhcmlhQ3VycmVudCIsInJlc3QiLCJhcmlhLWN1cnJlbnQiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3Rfcm91dGVyX2VzX1Byb21wdF9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19SZWRpcmVjdF9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19TdGF0aWNSb3V0ZXJfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9yb3V0ZXJfZXNfU3dpdGNoX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3Rfcm91dGVyX2VzX21hdGNoUGF0aF9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc193aXRoUm91dGVyX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaGlzdG9yeV9jcmVhdGVNZW1vcnlIaXN0b3J5X18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaGlzdG9yeV9jcmVhdGVNZW1vcnlIaXN0b3J5X19fZGVmYXVsdCIsIk1lbW9yeVJvdXRlciIsImFycmF5IiwiUHJvbXB0IiwiZW5hYmxlIiwiZGlzYWJsZSIsIndoZW4iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfd2FybmluZ19fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3dhcm5pbmdfX19kZWZhdWx0IiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2ludmFyaWFudF9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2ludmFyaWFudF9fX2RlZmF1bHQiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfaGlzdG9yeV9fIiwiUmVkaXJlY3QiLCJpc1N0YXRpYyIsInBlcmZvcm0iLCJjb21wb25lbnREaWRNb3VudCIsImNvbXBvbmVudERpZFVwZGF0ZSIsInByZXZUbyIsIm5leHRUbyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9oaXN0b3J5X1BhdGhVdGlsc19fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19Sb3V0ZXJfXyIsIm5vcm1hbGl6ZUxvY2F0aW9uIiwiX29iamVjdCRwYXRobmFtZSIsIl9vYmplY3Qkc2VhcmNoIiwiX29iamVjdCRoYXNoIiwiYWRkQmFzZW5hbWUiLCJiYXNlIiwiY3JlYXRlVVJMIiwic3RhdGljSGFuZGxlciIsIm1ldGhvZE5hbWUiLCJub29wIiwiU3RhdGljUm91dGVyIiwiaGFuZGxlUHVzaCIsImhhbmRsZVJlcGxhY2UiLCJfdGhpcyRwcm9wczIiLCJoYW5kbGVMaXN0ZW4iLCJoYW5kbGVCbG9jayIsIlN3aXRjaCIsImVsZW1lbnQiLCJfZWxlbWVudCRwcm9wcyIsInBhdGhQcm9wIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX2hvaXN0X25vbl9yZWFjdF9zdGF0aWNzX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfaG9pc3Rfbm9uX3JlYWN0X3N0YXRpY3NfX19kZWZhdWx0IiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19Sb3V0ZV9fIiwid2l0aFJvdXRlciIsIkMiLCJ3cmFwcGVkQ29tcG9uZW50UmVmIiwicmVtYWluaW5nUHJvcHMiLCJyb3V0ZUNvbXBvbmVudFByb3BzIiwiV3JhcHBlZENvbXBvbmVudCIsImdsb2JhbCIsImZhY3RvcnkiLCJSRUFDVF9TVEFUSUNTIiwiZ2V0RGVmYXVsdFByb3BzIiwiZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzIiwibWl4aW5zIiwiS05PV05fU1RBVElDUyIsImNhbGxlciIsImNhbGxlZSIsImFyaXR5IiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImdldE93blByb3BlcnR5U3ltYm9scyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImdldFByb3RvdHlwZU9mIiwib2JqZWN0UHJvdG90eXBlIiwiaG9pc3ROb25SZWFjdFN0YXRpY3MiLCJ0YXJnZXRDb21wb25lbnQiLCJzb3VyY2VDb21wb25lbnQiLCJibGFja2xpc3QiLCJpbmhlcml0ZWRDb21wb25lbnQiLCJkZXNjcmlwdG9yIiwiU3ViTWVudSIsIl9tb3JlVmVydDIiLCJvbkxvZ291dCIsIl9yZWFjdFJvdXRlckRvbSIsIl9NZW51SXRlbSIsIl9uYXZpZ2F0aW9uQXJyb3dEcm9wUmlnaHQiLCJfbmF2aWdhdGlvbkFycm93RHJvcFJpZ2h0MiIsIl9JY29uTWVudSIsIl9tb3JlVmVydCIsIkFkbWluQmFja29mZmljZUJhciIsImNyZWF0ZUNsYXNzIiwiZ2V0SW5pdGlhbFN0YXRlIiwiZHJhd2VyT3BlbiIsImNsb3NlRHJhd2VyIiwidG9nZ2xlRHJhd2VyIiwicmlnaHRJY29uIiwibWVudUl0ZW1zIiwiQWRtaW5JbmRleCIsIl9NdWlUaGVtZVByb3ZpZGVyIiwiX011aVRoZW1lUHJvdmlkZXIyIiwiX1JhaXNlZEJ1dHRvbiIsIl9UZXh0RmllbGQiLCJfVGV4dEZpZWxkMiIsIl9DYXJkIiwiX2F4aW9zIiwiX2F4aW9zMiIsIl9IZWFkZXIiLCJfSGVhZGVyMiIsIkVNUFRZX0NBTExCQUNLIiwiQWRtaW5Mb2dpbiIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJlcnJNc2ciLCJvblN1Ym1pdCIsInN1Ym1pdEZvcm0iLCJlbmNvZGVkIiwiYnRvYSIsIm1ldGhvZCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwidGhlbiIsImNvbnRlbnRzIiwiY29uc29sZSIsImxvZyIsImNhdGNoIiwiY2F1c2UiLCJoYW5kbGVLZXlQcmVzcyIsIm1zZ0VsZW0iLCJvbktleVByZXNzIiwiQ2FyZCIsIkNhcmRIZWFkZXIiLCJzdWJ0aXRsZSIsIkNhcmRUZXh0IiwiZXhwYW5kYWJsZSIsImhpbnQiLCJmbG9hdGluZ0xhYmVsVGV4dCIsImhpbnRUZXh0IiwiQ2FyZEFjdGlvbnMiLCJfUmFpc2VkQnV0dG9uMiIsIl9Ecm9wRG93bk1lbnUiLCJTaG9wRm9ybSIsIm1zZ1NuYWNrYmFyT3BlbiIsImFkZHJlc3MiLCJwaG9uZSIsInpvbmUiLCJkaXN0cmljdHMiLCJhZG1pbkVtYWlsIiwiYWRtaW5OYW1lIiwibGF0IiwibG9uZyIsImdldCIsInJlc3BvbnNlIiwib3BlblNuYWNrYmFyIiwibXNnIiwic25hY2tiYXJNZXNzYWdlIiwiaGFuZGxlU25hY2tiYXJSZXF1ZXN0Q2xvc2UiLCJoYW5kbGVTaG9wQ3JlYXRlU3VjY2VzcyIsInNob3BJZCIsInNob3AiLCJpZCIsImhhbmRsZVNob3BDcmVhdGVFcnJvciIsImNoZWNrRmllbGRzIiwiY3JlYXRlU2hvcCIsImZpZWxkc0NoZWNrIiwiX3N0YXRlMiIsInpvbmVPYmoiLCJmaW5kIiwiY29uZmlnIiwicG9zdCIsImhhbmRsZVpvbmVDaGFuZ2UiLCJkaXN0cmljdE1lbnVJdGVtcyIsImRpc3RyaWN0IiwicGFkZGluZ0JvdHRvbSIsInNlY29uZGFyeSIsIkJhblNob3BEaWFsb2ciLCJiYW5TaG9wIiwiZW5hYmxlZCIsIm9uU3VjY2VzcyIsIm9uRXJyb3IiLCJwcmltYXJ5IiwiX1Nob3BNZW51IiwiX1Nob3BNZW51MiIsIlNob3BMaXN0Iiwic2hvcHMiLCJlcnJTbmFja2Jhck9wZW4iLCJzaG9wTWVudSIsImxvYWRTaG9wcyIsIm9wZW5FcnJTbmFja2JhciIsImVyclNuYWNrYmFyTWVzc2FnZSIsImhhbmRsZUVyclNuYWNrYmFyUmVxdWVzdENsb3NlIiwiY2xvc2VCYW5EaWFsb2ciLCJvcGVuQmFuRGlhbG9nIiwiaGFuZGxlU2hvcEJhblN1Y2Nlc3MiLCJlbmFibGVTaG9wIiwic2hvd01lbnUiLCJoYW5kbGVNZW51Q2xvc2UiLCJiYW5TaG9wRGlhbG9nIiwicyIsInNob3BNZW51RWxlbSIsInNob3BDYXJkcyIsIm1haW5FbGVtIiwiQWN0aW9uSGVhZGVyIiwiX0FkbWluQmFja29mZmljZUJhciIsIl9BZG1pbkJhY2tvZmZpY2VCYXIyIiwiX0FkbWluSW5kZXgiLCJfQWRtaW5JbmRleDIiLCJfQWRtaW5Mb2dpbiIsIl9BZG1pbkxvZ2luMiIsIl9TaG9wTGlzdCIsIl9TaG9wTGlzdDIiLCJfU2hvcEZvcm0iLCJfU2hvcEZvcm0yIiwiY29va2llIiwiY29va2llVG9rZW5TdHIiLCJzdGFydHNXaXRoIiwiY29va2llVG9rZW4iLCJBZG1pbkJhY2tvZmZpY2UiLCJ1c2VyIiwicmVuZGVyUmVhZHkiLCJzZXRUb2tlbiIsImxvZ291dEZvcm0iLCJzdWJtaXQiLCJnZXRFbGVtZW50QnlJZCIsIlNob3BNZW51IiwibWVudUNhcmRzIiwiZGlzaCIsImRlc2NyaXB0aW9uIiwiY29zdCIsIl9BY3Rpb25IZWFkZXIyIiwiX0FjdGlvbkhlYWRl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UzVHLEVBQU1rUSxTQUM1QjIxQixHNUVzbVVUcHJDLE9BQU9jLGVBQWUvRCxFQUFTLGNBQzNCZ0UsT0FBTyxHNEV4b1VYLElBQUEwUSxHQUFBelUsRUFBQSxHNUU2b1VJMFUsRUFBVXRRLEVBQXVCcVEsRzRFM29VckM2eEIsRUFBQXRtQyxFQUFBLElBQ0F3bUMsRzVFOG9VeUJwaUMsRUFBdUJraUMsRzRFOW9VaER0bUMsRUFBQSxLQUNBeW1DLEc1RWlwVXFCcmlDLEVBQXVCb2lDLEc0RWpwVTVDeG1DLEVBQUEsS0FDQTJtQyxHNUVvcFVrQnZpQyxFQUF1QnFpQyxHNEVwcFV6Q3ptQyxFQUFBLEtBQ0E4TSxFQUFBOU0sRUFBQSxJQUNBazJCLEc1RXdwVWlCOXhCLEVBQXVCMEksRzRFeHBVeEM5TSxFQUFBLEtBQ0FpRSxHNUUycFVtQkcsRUFBdUI4eEIsRzRFM3BVMUNsMkIsRUFBQSxLQUNBZ04sRzVFOHBVZTVJLEVBQXVCSCxHNEU5cFV0Q2pFLEVBQUEsS0FFQXl1QyxHNUVncVVpQnJxQyxFQUF1QjRJLEc0RWhxVXhDaE4sRUFBQSxNNUVvcVVJd3VDLEVBQWlCcHFDLEVBQXVCcXFDLEVBc0Q1QzF1QyxHQUFRaUUsUTRFaHNVT21xQyxLNUVtc1VaIiwiZmlsZSI6ImFkbWluYmFja29mZmljZS5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3ZWJwYWNrSnNvbnAoWzBdLFtcbi8qIDAgKi8sXG4vKiAxICovLFxuLyogMiAqLyxcbi8qIDMgKi8sXG4vKiA0ICovLFxuLyogNSAqLyxcbi8qIDYgKi8sXG4vKiA3ICovLFxuLyogOCAqLyxcbi8qIDkgKi8sXG4vKiAxMCAqLyxcbi8qIDExICovLFxuLyogMTIgKi8sXG4vKiAxMyAqLyxcbi8qIDE0ICovLFxuLyogMTUgKi8sXG4vKiAxNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuXG5cbi8qKlxuICogVXNlIGludmFyaWFudCgpIHRvIGFzc2VydCBzdGF0ZSB3aGljaCB5b3VyIHByb2dyYW0gYXNzdW1lcyB0byBiZSB0cnVlLlxuICpcbiAqIFByb3ZpZGUgc3ByaW50Zi1zdHlsZSBmb3JtYXQgKG9ubHkgJXMgaXMgc3VwcG9ydGVkKSBhbmQgYXJndW1lbnRzXG4gKiB0byBwcm92aWRlIGluZm9ybWF0aW9uIGFib3V0IHdoYXQgYnJva2UgYW5kIHdoYXQgeW91IHdlcmVcbiAqIGV4cGVjdGluZy5cbiAqXG4gKiBUaGUgaW52YXJpYW50IG1lc3NhZ2Ugd2lsbCBiZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uLCBidXQgdGhlIGludmFyaWFudFxuICogd2lsbCByZW1haW4gdG8gZW5zdXJlIGxvZ2ljIGRvZXMgbm90IGRpZmZlciBpbiBwcm9kdWN0aW9uLlxuICovXG5cbnZhciBpbnZhcmlhbnQgPSBmdW5jdGlvbihjb25kaXRpb24sIGZvcm1hdCwgYSwgYiwgYywgZCwgZSwgZikge1xuICBpZiAoZmFsc2UpIHtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaW52YXJpYW50IHJlcXVpcmVzIGFuIGVycm9yIG1lc3NhZ2UgYXJndW1lbnQnKTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWNvbmRpdGlvbikge1xuICAgIHZhciBlcnJvcjtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgICAnTWluaWZpZWQgZXhjZXB0aW9uIG9jY3VycmVkOyB1c2UgdGhlIG5vbi1taW5pZmllZCBkZXYgZW52aXJvbm1lbnQgJyArXG4gICAgICAgICdmb3IgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZSBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLidcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhcmdzID0gW2EsIGIsIGMsIGQsIGUsIGZdO1xuICAgICAgdmFyIGFyZ0luZGV4ID0gMDtcbiAgICAgIGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgICBmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24oKSB7IHJldHVybiBhcmdzW2FyZ0luZGV4KytdOyB9KVxuICAgICAgKTtcbiAgICAgIGVycm9yLm5hbWUgPSAnSW52YXJpYW50IFZpb2xhdGlvbic7XG4gICAgfVxuXG4gICAgZXJyb3IuZnJhbWVzVG9Qb3AgPSAxOyAvLyB3ZSBkb24ndCBjYXJlIGFib3V0IGludmFyaWFudCdzIG93biBmcmFtZVxuICAgIHRocm93IGVycm9yO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGludmFyaWFudDtcblxuXG4vKioqLyB9KSxcbi8qIDE3ICovLFxuLyogMTggKi8sXG4vKiAxOSAqLyxcbi8qIDIwICovLFxuLyogMjEgKi8sXG4vKiAyMiAqLyxcbi8qIDIzICovLFxuLyogMjQgKi8sXG4vKiAyNSAqLyxcbi8qIDI2ICovLFxuLyogMjcgKi8sXG4vKiAyOCAqLyxcbi8qIDI5ICovLFxuLyogMzAgKi8sXG4vKiAzMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xudmFyIGFkZExlYWRpbmdTbGFzaCA9IGV4cG9ydHMuYWRkTGVhZGluZ1NsYXNoID0gZnVuY3Rpb24gYWRkTGVhZGluZ1NsYXNoKHBhdGgpIHtcbiAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLycgPyBwYXRoIDogJy8nICsgcGF0aDtcbn07XG5cbnZhciBzdHJpcExlYWRpbmdTbGFzaCA9IGV4cG9ydHMuc3RyaXBMZWFkaW5nU2xhc2ggPSBmdW5jdGlvbiBzdHJpcExlYWRpbmdTbGFzaChwYXRoKSB7XG4gIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nID8gcGF0aC5zdWJzdHIoMSkgOiBwYXRoO1xufTtcblxudmFyIGhhc0Jhc2VuYW1lID0gZXhwb3J0cy5oYXNCYXNlbmFtZSA9IGZ1bmN0aW9uIGhhc0Jhc2VuYW1lKHBhdGgsIHByZWZpeCkge1xuICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyBwcmVmaXggKyAnKFxcXFwvfFxcXFw/fCN8JCknLCAnaScpLnRlc3QocGF0aCk7XG59O1xuXG52YXIgc3RyaXBCYXNlbmFtZSA9IGV4cG9ydHMuc3RyaXBCYXNlbmFtZSA9IGZ1bmN0aW9uIHN0cmlwQmFzZW5hbWUocGF0aCwgcHJlZml4KSB7XG4gIHJldHVybiBoYXNCYXNlbmFtZShwYXRoLCBwcmVmaXgpID8gcGF0aC5zdWJzdHIocHJlZml4Lmxlbmd0aCkgOiBwYXRoO1xufTtcblxudmFyIHN0cmlwVHJhaWxpbmdTbGFzaCA9IGV4cG9ydHMuc3RyaXBUcmFpbGluZ1NsYXNoID0gZnVuY3Rpb24gc3RyaXBUcmFpbGluZ1NsYXNoKHBhdGgpIHtcbiAgcmV0dXJuIHBhdGguY2hhckF0KHBhdGgubGVuZ3RoIC0gMSkgPT09ICcvJyA/IHBhdGguc2xpY2UoMCwgLTEpIDogcGF0aDtcbn07XG5cbnZhciBwYXJzZVBhdGggPSBleHBvcnRzLnBhcnNlUGF0aCA9IGZ1bmN0aW9uIHBhcnNlUGF0aChwYXRoKSB7XG4gIHZhciBwYXRobmFtZSA9IHBhdGggfHwgJy8nO1xuICB2YXIgc2VhcmNoID0gJyc7XG4gIHZhciBoYXNoID0gJyc7XG5cbiAgdmFyIGhhc2hJbmRleCA9IHBhdGhuYW1lLmluZGV4T2YoJyMnKTtcbiAgaWYgKGhhc2hJbmRleCAhPT0gLTEpIHtcbiAgICBoYXNoID0gcGF0aG5hbWUuc3Vic3RyKGhhc2hJbmRleCk7XG4gICAgcGF0aG5hbWUgPSBwYXRobmFtZS5zdWJzdHIoMCwgaGFzaEluZGV4KTtcbiAgfVxuXG4gIHZhciBzZWFyY2hJbmRleCA9IHBhdGhuYW1lLmluZGV4T2YoJz8nKTtcbiAgaWYgKHNlYXJjaEluZGV4ICE9PSAtMSkge1xuICAgIHNlYXJjaCA9IHBhdGhuYW1lLnN1YnN0cihzZWFyY2hJbmRleCk7XG4gICAgcGF0aG5hbWUgPSBwYXRobmFtZS5zdWJzdHIoMCwgc2VhcmNoSW5kZXgpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwYXRobmFtZTogcGF0aG5hbWUsXG4gICAgc2VhcmNoOiBzZWFyY2ggPT09ICc/JyA/ICcnIDogc2VhcmNoLFxuICAgIGhhc2g6IGhhc2ggPT09ICcjJyA/ICcnIDogaGFzaFxuICB9O1xufTtcblxudmFyIGNyZWF0ZVBhdGggPSBleHBvcnRzLmNyZWF0ZVBhdGggPSBmdW5jdGlvbiBjcmVhdGVQYXRoKGxvY2F0aW9uKSB7XG4gIHZhciBwYXRobmFtZSA9IGxvY2F0aW9uLnBhdGhuYW1lLFxuICAgICAgc2VhcmNoID0gbG9jYXRpb24uc2VhcmNoLFxuICAgICAgaGFzaCA9IGxvY2F0aW9uLmhhc2g7XG5cblxuICB2YXIgcGF0aCA9IHBhdGhuYW1lIHx8ICcvJztcblxuICBpZiAoc2VhcmNoICYmIHNlYXJjaCAhPT0gJz8nKSBwYXRoICs9IHNlYXJjaC5jaGFyQXQoMCkgPT09ICc/JyA/IHNlYXJjaCA6ICc/JyArIHNlYXJjaDtcblxuICBpZiAoaGFzaCAmJiBoYXNoICE9PSAnIycpIHBhdGggKz0gaGFzaC5jaGFyQXQoMCkgPT09ICcjJyA/IGhhc2ggOiAnIycgKyBoYXNoO1xuXG4gIHJldHVybiBwYXRoO1xufTtcblxuLyoqKi8gfSksXG4vKiAzMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJkXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gYWRkTGVhZGluZ1NsYXNoOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJjXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc3RyaXBMZWFkaW5nU2xhc2g7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImZcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBoYXNCYXNlbmFtZTsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHN0cmlwQmFzZW5hbWU7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImVcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBzdHJpcFRyYWlsaW5nU2xhc2g7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImFcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBwYXJzZVBhdGg7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBjcmVhdGVQYXRoOyB9KTtcbnZhciBhZGRMZWFkaW5nU2xhc2ggPSBmdW5jdGlvbiBhZGRMZWFkaW5nU2xhc2gocGF0aCkge1xuICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJyA/IHBhdGggOiAnLycgKyBwYXRoO1xufTtcblxudmFyIHN0cmlwTGVhZGluZ1NsYXNoID0gZnVuY3Rpb24gc3RyaXBMZWFkaW5nU2xhc2gocGF0aCkge1xuICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJyA/IHBhdGguc3Vic3RyKDEpIDogcGF0aDtcbn07XG5cbnZhciBoYXNCYXNlbmFtZSA9IGZ1bmN0aW9uIGhhc0Jhc2VuYW1lKHBhdGgsIHByZWZpeCkge1xuICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyBwcmVmaXggKyAnKFxcXFwvfFxcXFw/fCN8JCknLCAnaScpLnRlc3QocGF0aCk7XG59O1xuXG52YXIgc3RyaXBCYXNlbmFtZSA9IGZ1bmN0aW9uIHN0cmlwQmFzZW5hbWUocGF0aCwgcHJlZml4KSB7XG4gIHJldHVybiBoYXNCYXNlbmFtZShwYXRoLCBwcmVmaXgpID8gcGF0aC5zdWJzdHIocHJlZml4Lmxlbmd0aCkgOiBwYXRoO1xufTtcblxudmFyIHN0cmlwVHJhaWxpbmdTbGFzaCA9IGZ1bmN0aW9uIHN0cmlwVHJhaWxpbmdTbGFzaChwYXRoKSB7XG4gIHJldHVybiBwYXRoLmNoYXJBdChwYXRoLmxlbmd0aCAtIDEpID09PSAnLycgPyBwYXRoLnNsaWNlKDAsIC0xKSA6IHBhdGg7XG59O1xuXG52YXIgcGFyc2VQYXRoID0gZnVuY3Rpb24gcGFyc2VQYXRoKHBhdGgpIHtcbiAgdmFyIHBhdGhuYW1lID0gcGF0aCB8fCAnLyc7XG4gIHZhciBzZWFyY2ggPSAnJztcbiAgdmFyIGhhc2ggPSAnJztcblxuICB2YXIgaGFzaEluZGV4ID0gcGF0aG5hbWUuaW5kZXhPZignIycpO1xuICBpZiAoaGFzaEluZGV4ICE9PSAtMSkge1xuICAgIGhhc2ggPSBwYXRobmFtZS5zdWJzdHIoaGFzaEluZGV4KTtcbiAgICBwYXRobmFtZSA9IHBhdGhuYW1lLnN1YnN0cigwLCBoYXNoSW5kZXgpO1xuICB9XG5cbiAgdmFyIHNlYXJjaEluZGV4ID0gcGF0aG5hbWUuaW5kZXhPZignPycpO1xuICBpZiAoc2VhcmNoSW5kZXggIT09IC0xKSB7XG4gICAgc2VhcmNoID0gcGF0aG5hbWUuc3Vic3RyKHNlYXJjaEluZGV4KTtcbiAgICBwYXRobmFtZSA9IHBhdGhuYW1lLnN1YnN0cigwLCBzZWFyY2hJbmRleCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHBhdGhuYW1lOiBwYXRobmFtZSxcbiAgICBzZWFyY2g6IHNlYXJjaCA9PT0gJz8nID8gJycgOiBzZWFyY2gsXG4gICAgaGFzaDogaGFzaCA9PT0gJyMnID8gJycgOiBoYXNoXG4gIH07XG59O1xuXG52YXIgY3JlYXRlUGF0aCA9IGZ1bmN0aW9uIGNyZWF0ZVBhdGgobG9jYXRpb24pIHtcbiAgdmFyIHBhdGhuYW1lID0gbG9jYXRpb24ucGF0aG5hbWUsXG4gICAgICBzZWFyY2ggPSBsb2NhdGlvbi5zZWFyY2gsXG4gICAgICBoYXNoID0gbG9jYXRpb24uaGFzaDtcblxuXG4gIHZhciBwYXRoID0gcGF0aG5hbWUgfHwgJy8nO1xuXG4gIGlmIChzZWFyY2ggJiYgc2VhcmNoICE9PSAnPycpIHBhdGggKz0gc2VhcmNoLmNoYXJBdCgwKSA9PT0gJz8nID8gc2VhcmNoIDogJz8nICsgc2VhcmNoO1xuXG4gIGlmIChoYXNoICYmIGhhc2ggIT09ICcjJykgcGF0aCArPSBoYXNoLmNoYXJBdCgwKSA9PT0gJyMnID8gaGFzaCA6ICcjJyArIGhhc2g7XG5cbiAgcmV0dXJuIHBhdGg7XG59O1xuXG4vKioqLyB9KSxcbi8qIDMzICovLFxuLyogMzQgKi8sXG4vKiAzNSAqLyxcbi8qIDM2ICovLFxuLyogMzcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiYVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGNyZWF0ZUxvY2F0aW9uOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJiXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gbG9jYXRpb25zQXJlRXF1YWw7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZXNvbHZlX3BhdGhuYW1lX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk5KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfdmFsdWVfZXF1YWxfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTAwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1BhdGhVdGlsc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5cblxuXG5cbnZhciBjcmVhdGVMb2NhdGlvbiA9IGZ1bmN0aW9uIGNyZWF0ZUxvY2F0aW9uKHBhdGgsIHN0YXRlLCBrZXksIGN1cnJlbnRMb2NhdGlvbikge1xuICB2YXIgbG9jYXRpb24gPSB2b2lkIDA7XG4gIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcbiAgICAvLyBUd28tYXJnIGZvcm06IHB1c2gocGF0aCwgc3RhdGUpXG4gICAgbG9jYXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19QYXRoVXRpbHNfX1tcImFcIiAvKiBwYXJzZVBhdGggKi9dKShwYXRoKTtcbiAgICBsb2NhdGlvbi5zdGF0ZSA9IHN0YXRlO1xuICB9IGVsc2Uge1xuICAgIC8vIE9uZS1hcmcgZm9ybTogcHVzaChsb2NhdGlvbilcbiAgICBsb2NhdGlvbiA9IF9leHRlbmRzKHt9LCBwYXRoKTtcblxuICAgIGlmIChsb2NhdGlvbi5wYXRobmFtZSA9PT0gdW5kZWZpbmVkKSBsb2NhdGlvbi5wYXRobmFtZSA9ICcnO1xuXG4gICAgaWYgKGxvY2F0aW9uLnNlYXJjaCkge1xuICAgICAgaWYgKGxvY2F0aW9uLnNlYXJjaC5jaGFyQXQoMCkgIT09ICc/JykgbG9jYXRpb24uc2VhcmNoID0gJz8nICsgbG9jYXRpb24uc2VhcmNoO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2NhdGlvbi5zZWFyY2ggPSAnJztcbiAgICB9XG5cbiAgICBpZiAobG9jYXRpb24uaGFzaCkge1xuICAgICAgaWYgKGxvY2F0aW9uLmhhc2guY2hhckF0KDApICE9PSAnIycpIGxvY2F0aW9uLmhhc2ggPSAnIycgKyBsb2NhdGlvbi5oYXNoO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2NhdGlvbi5oYXNoID0gJyc7XG4gICAgfVxuXG4gICAgaWYgKHN0YXRlICE9PSB1bmRlZmluZWQgJiYgbG9jYXRpb24uc3RhdGUgPT09IHVuZGVmaW5lZCkgbG9jYXRpb24uc3RhdGUgPSBzdGF0ZTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgbG9jYXRpb24ucGF0aG5hbWUgPSBkZWNvZGVVUkkobG9jYXRpb24ucGF0aG5hbWUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKGUgaW5zdGFuY2VvZiBVUklFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IFVSSUVycm9yKCdQYXRobmFtZSBcIicgKyBsb2NhdGlvbi5wYXRobmFtZSArICdcIiBjb3VsZCBub3QgYmUgZGVjb2RlZC4gJyArICdUaGlzIGlzIGxpa2VseSBjYXVzZWQgYnkgYW4gaW52YWxpZCBwZXJjZW50LWVuY29kaW5nLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgfVxuXG4gIGlmIChrZXkpIGxvY2F0aW9uLmtleSA9IGtleTtcblxuICBpZiAoY3VycmVudExvY2F0aW9uKSB7XG4gICAgLy8gUmVzb2x2ZSBpbmNvbXBsZXRlL3JlbGF0aXZlIHBhdGhuYW1lIHJlbGF0aXZlIHRvIGN1cnJlbnQgbG9jYXRpb24uXG4gICAgaWYgKCFsb2NhdGlvbi5wYXRobmFtZSkge1xuICAgICAgbG9jYXRpb24ucGF0aG5hbWUgPSBjdXJyZW50TG9jYXRpb24ucGF0aG5hbWU7XG4gICAgfSBlbHNlIGlmIChsb2NhdGlvbi5wYXRobmFtZS5jaGFyQXQoMCkgIT09ICcvJykge1xuICAgICAgbG9jYXRpb24ucGF0aG5hbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3Jlc29sdmVfcGF0aG5hbWVfX1tcImRlZmF1bHRcIl0pKGxvY2F0aW9uLnBhdGhuYW1lLCBjdXJyZW50TG9jYXRpb24ucGF0aG5hbWUpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBXaGVuIHRoZXJlIGlzIG5vIHByaW9yIGxvY2F0aW9uIGFuZCBwYXRobmFtZSBpcyBlbXB0eSwgc2V0IGl0IHRvIC9cbiAgICBpZiAoIWxvY2F0aW9uLnBhdGhuYW1lKSB7XG4gICAgICBsb2NhdGlvbi5wYXRobmFtZSA9ICcvJztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbG9jYXRpb247XG59O1xuXG52YXIgbG9jYXRpb25zQXJlRXF1YWwgPSBmdW5jdGlvbiBsb2NhdGlvbnNBcmVFcXVhbChhLCBiKSB7XG4gIHJldHVybiBhLnBhdGhuYW1lID09PSBiLnBhdGhuYW1lICYmIGEuc2VhcmNoID09PSBiLnNlYXJjaCAmJiBhLmhhc2ggPT09IGIuaGFzaCAmJiBhLmtleSA9PT0gYi5rZXkgJiYgX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV92YWx1ZV9lcXVhbF9fW1wiZGVmYXVsdFwiXSkoYS5zdGF0ZSwgYi5zdGF0ZSk7XG59O1xuXG4vKioqLyB9KSxcbi8qIDM4ICovLFxuLyogMzkgKi8sXG4vKiA0MCAqLyxcbi8qIDQxICovLFxuLyogNDIgKi8sXG4vKiA0MyAqLyxcbi8qIDQ0ICovLFxuLyogNDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHVuZGVmaW5lZDtcblxudmFyIF9EaWFsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Nik7XG5cbnZhciBfRGlhbG9nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RpYWxvZyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuZGVmYXVsdCA9IF9EaWFsb2cyLmRlZmF1bHQ7XG5cbi8qKiovIH0pLFxuLyogNDYgKi8sXG4vKiA0NyAqLyxcbi8qIDQ4ICovLFxuLyogNDkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMubG9jYXRpb25zQXJlRXF1YWwgPSBleHBvcnRzLmNyZWF0ZUxvY2F0aW9uID0gdW5kZWZpbmVkO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX3Jlc29sdmVQYXRobmFtZSA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpO1xuXG52YXIgX3Jlc29sdmVQYXRobmFtZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZXNvbHZlUGF0aG5hbWUpO1xuXG52YXIgX3ZhbHVlRXF1YWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMCk7XG5cbnZhciBfdmFsdWVFcXVhbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWx1ZUVxdWFsKTtcblxudmFyIF9QYXRoVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGNyZWF0ZUxvY2F0aW9uID0gZXhwb3J0cy5jcmVhdGVMb2NhdGlvbiA9IGZ1bmN0aW9uIGNyZWF0ZUxvY2F0aW9uKHBhdGgsIHN0YXRlLCBrZXksIGN1cnJlbnRMb2NhdGlvbikge1xuICB2YXIgbG9jYXRpb24gPSB2b2lkIDA7XG4gIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcbiAgICAvLyBUd28tYXJnIGZvcm06IHB1c2gocGF0aCwgc3RhdGUpXG4gICAgbG9jYXRpb24gPSAoMCwgX1BhdGhVdGlscy5wYXJzZVBhdGgpKHBhdGgpO1xuICAgIGxvY2F0aW9uLnN0YXRlID0gc3RhdGU7XG4gIH0gZWxzZSB7XG4gICAgLy8gT25lLWFyZyBmb3JtOiBwdXNoKGxvY2F0aW9uKVxuICAgIGxvY2F0aW9uID0gX2V4dGVuZHMoe30sIHBhdGgpO1xuXG4gICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lID09PSB1bmRlZmluZWQpIGxvY2F0aW9uLnBhdGhuYW1lID0gJyc7XG5cbiAgICBpZiAobG9jYXRpb24uc2VhcmNoKSB7XG4gICAgICBpZiAobG9jYXRpb24uc2VhcmNoLmNoYXJBdCgwKSAhPT0gJz8nKSBsb2NhdGlvbi5zZWFyY2ggPSAnPycgKyBsb2NhdGlvbi5zZWFyY2g7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uLnNlYXJjaCA9ICcnO1xuICAgIH1cblxuICAgIGlmIChsb2NhdGlvbi5oYXNoKSB7XG4gICAgICBpZiAobG9jYXRpb24uaGFzaC5jaGFyQXQoMCkgIT09ICcjJykgbG9jYXRpb24uaGFzaCA9ICcjJyArIGxvY2F0aW9uLmhhc2g7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uLmhhc2ggPSAnJztcbiAgICB9XG5cbiAgICBpZiAoc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBsb2NhdGlvbi5zdGF0ZSA9PT0gdW5kZWZpbmVkKSBsb2NhdGlvbi5zdGF0ZSA9IHN0YXRlO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBsb2NhdGlvbi5wYXRobmFtZSA9IGRlY29kZVVSSShsb2NhdGlvbi5wYXRobmFtZSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIFVSSUVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgVVJJRXJyb3IoJ1BhdGhuYW1lIFwiJyArIGxvY2F0aW9uLnBhdGhuYW1lICsgJ1wiIGNvdWxkIG5vdCBiZSBkZWNvZGVkLiAnICsgJ1RoaXMgaXMgbGlrZWx5IGNhdXNlZCBieSBhbiBpbnZhbGlkIHBlcmNlbnQtZW5jb2RpbmcuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG5cbiAgaWYgKGtleSkgbG9jYXRpb24ua2V5ID0ga2V5O1xuXG4gIGlmIChjdXJyZW50TG9jYXRpb24pIHtcbiAgICAvLyBSZXNvbHZlIGluY29tcGxldGUvcmVsYXRpdmUgcGF0aG5hbWUgcmVsYXRpdmUgdG8gY3VycmVudCBsb2NhdGlvbi5cbiAgICBpZiAoIWxvY2F0aW9uLnBhdGhuYW1lKSB7XG4gICAgICBsb2NhdGlvbi5wYXRobmFtZSA9IGN1cnJlbnRMb2NhdGlvbi5wYXRobmFtZTtcbiAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLnBhdGhuYW1lLmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICBsb2NhdGlvbi5wYXRobmFtZSA9ICgwLCBfcmVzb2x2ZVBhdGhuYW1lMi5kZWZhdWx0KShsb2NhdGlvbi5wYXRobmFtZSwgY3VycmVudExvY2F0aW9uLnBhdGhuYW1lKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gV2hlbiB0aGVyZSBpcyBubyBwcmlvciBsb2NhdGlvbiBhbmQgcGF0aG5hbWUgaXMgZW1wdHksIHNldCBpdCB0byAvXG4gICAgaWYgKCFsb2NhdGlvbi5wYXRobmFtZSkge1xuICAgICAgbG9jYXRpb24ucGF0aG5hbWUgPSAnLyc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGxvY2F0aW9uO1xufTtcblxudmFyIGxvY2F0aW9uc0FyZUVxdWFsID0gZXhwb3J0cy5sb2NhdGlvbnNBcmVFcXVhbCA9IGZ1bmN0aW9uIGxvY2F0aW9uc0FyZUVxdWFsKGEsIGIpIHtcbiAgcmV0dXJuIGEucGF0aG5hbWUgPT09IGIucGF0aG5hbWUgJiYgYS5zZWFyY2ggPT09IGIuc2VhcmNoICYmIGEuaGFzaCA9PT0gYi5oYXNoICYmIGEua2V5ID09PSBiLmtleSAmJiAoMCwgX3ZhbHVlRXF1YWwyLmRlZmF1bHQpKGEuc3RhdGUsIGIuc3RhdGUpO1xufTtcblxuLyoqKi8gfSksXG4vKiA1MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX3dhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIgPSBmdW5jdGlvbiBjcmVhdGVUcmFuc2l0aW9uTWFuYWdlcigpIHtcbiAgdmFyIHByb21wdCA9IG51bGw7XG5cbiAgdmFyIHNldFByb21wdCA9IGZ1bmN0aW9uIHNldFByb21wdChuZXh0UHJvbXB0KSB7XG4gICAgKDAsIF93YXJuaW5nMi5kZWZhdWx0KShwcm9tcHQgPT0gbnVsbCwgJ0EgaGlzdG9yeSBzdXBwb3J0cyBvbmx5IG9uZSBwcm9tcHQgYXQgYSB0aW1lJyk7XG5cbiAgICBwcm9tcHQgPSBuZXh0UHJvbXB0O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChwcm9tcHQgPT09IG5leHRQcm9tcHQpIHByb21wdCA9IG51bGw7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgY29uZmlybVRyYW5zaXRpb25UbyA9IGZ1bmN0aW9uIGNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgY2FsbGJhY2spIHtcbiAgICAvLyBUT0RPOiBJZiBhbm90aGVyIHRyYW5zaXRpb24gc3RhcnRzIHdoaWxlIHdlJ3JlIHN0aWxsIGNvbmZpcm1pbmdcbiAgICAvLyB0aGUgcHJldmlvdXMgb25lLCB3ZSBtYXkgZW5kIHVwIGluIGEgd2VpcmQgc3RhdGUuIEZpZ3VyZSBvdXQgdGhlXG4gICAgLy8gYmVzdCB3YXkgdG8gaGFuZGxlIHRoaXMuXG4gICAgaWYgKHByb21wdCAhPSBudWxsKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHlwZW9mIHByb21wdCA9PT0gJ2Z1bmN0aW9uJyA/IHByb21wdChsb2NhdGlvbiwgYWN0aW9uKSA6IHByb21wdDtcblxuICAgICAgaWYgKHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZ2V0VXNlckNvbmZpcm1hdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGdldFVzZXJDb25maXJtYXRpb24ocmVzdWx0LCBjYWxsYmFjayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgKDAsIF93YXJuaW5nMi5kZWZhdWx0KShmYWxzZSwgJ0EgaGlzdG9yeSBuZWVkcyBhIGdldFVzZXJDb25maXJtYXRpb24gZnVuY3Rpb24gaW4gb3JkZXIgdG8gdXNlIGEgcHJvbXB0IG1lc3NhZ2UnKTtcblxuICAgICAgICAgIGNhbGxiYWNrKHRydWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZXR1cm4gZmFsc2UgZnJvbSBhIHRyYW5zaXRpb24gaG9vayB0byBjYW5jZWwgdGhlIHRyYW5zaXRpb24uXG4gICAgICAgIGNhbGxiYWNrKHJlc3VsdCAhPT0gZmFsc2UpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayh0cnVlKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGxpc3RlbmVycyA9IFtdO1xuXG4gIHZhciBhcHBlbmRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFwcGVuZExpc3RlbmVyKGZuKSB7XG4gICAgdmFyIGlzQWN0aXZlID0gdHJ1ZTtcblxuICAgIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uIGxpc3RlbmVyKCkge1xuICAgICAgaWYgKGlzQWN0aXZlKSBmbi5hcHBseSh1bmRlZmluZWQsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIGxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBpc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgbGlzdGVuZXJzID0gbGlzdGVuZXJzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbSAhPT0gbGlzdGVuZXI7XG4gICAgICB9KTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBub3RpZnlMaXN0ZW5lcnMgPSBmdW5jdGlvbiBub3RpZnlMaXN0ZW5lcnMoKSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgbGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gbGlzdGVuZXIuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHNldFByb21wdDogc2V0UHJvbXB0LFxuICAgIGNvbmZpcm1UcmFuc2l0aW9uVG86IGNvbmZpcm1UcmFuc2l0aW9uVG8sXG4gICAgYXBwZW5kTGlzdGVuZXI6IGFwcGVuZExpc3RlbmVyLFxuICAgIG5vdGlmeUxpc3RlbmVyczogbm90aWZ5TGlzdGVuZXJzXG4gIH07XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBjcmVhdGVUcmFuc2l0aW9uTWFuYWdlcjtcblxuLyoqKi8gfSksXG4vKiA1MSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX18pO1xuXG5cbnZhciBjcmVhdGVUcmFuc2l0aW9uTWFuYWdlciA9IGZ1bmN0aW9uIGNyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyKCkge1xuICB2YXIgcHJvbXB0ID0gbnVsbDtcblxuICB2YXIgc2V0UHJvbXB0ID0gZnVuY3Rpb24gc2V0UHJvbXB0KG5leHRQcm9tcHQpIHtcbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQoKShwcm9tcHQgPT0gbnVsbCwgJ0EgaGlzdG9yeSBzdXBwb3J0cyBvbmx5IG9uZSBwcm9tcHQgYXQgYSB0aW1lJyk7XG5cbiAgICBwcm9tcHQgPSBuZXh0UHJvbXB0O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChwcm9tcHQgPT09IG5leHRQcm9tcHQpIHByb21wdCA9IG51bGw7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgY29uZmlybVRyYW5zaXRpb25UbyA9IGZ1bmN0aW9uIGNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgY2FsbGJhY2spIHtcbiAgICAvLyBUT0RPOiBJZiBhbm90aGVyIHRyYW5zaXRpb24gc3RhcnRzIHdoaWxlIHdlJ3JlIHN0aWxsIGNvbmZpcm1pbmdcbiAgICAvLyB0aGUgcHJldmlvdXMgb25lLCB3ZSBtYXkgZW5kIHVwIGluIGEgd2VpcmQgc3RhdGUuIEZpZ3VyZSBvdXQgdGhlXG4gICAgLy8gYmVzdCB3YXkgdG8gaGFuZGxlIHRoaXMuXG4gICAgaWYgKHByb21wdCAhPSBudWxsKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHlwZW9mIHByb21wdCA9PT0gJ2Z1bmN0aW9uJyA/IHByb21wdChsb2NhdGlvbiwgYWN0aW9uKSA6IHByb21wdDtcblxuICAgICAgaWYgKHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZ2V0VXNlckNvbmZpcm1hdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGdldFVzZXJDb25maXJtYXRpb24ocmVzdWx0LCBjYWxsYmFjayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0KCkoZmFsc2UsICdBIGhpc3RvcnkgbmVlZHMgYSBnZXRVc2VyQ29uZmlybWF0aW9uIGZ1bmN0aW9uIGluIG9yZGVyIHRvIHVzZSBhIHByb21wdCBtZXNzYWdlJyk7XG5cbiAgICAgICAgICBjYWxsYmFjayh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGZyb20gYSB0cmFuc2l0aW9uIGhvb2sgdG8gY2FuY2VsIHRoZSB0cmFuc2l0aW9uLlxuICAgICAgICBjYWxsYmFjayhyZXN1bHQgIT09IGZhbHNlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2sodHJ1ZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBsaXN0ZW5lcnMgPSBbXTtcblxuICB2YXIgYXBwZW5kTGlzdGVuZXIgPSBmdW5jdGlvbiBhcHBlbmRMaXN0ZW5lcihmbikge1xuICAgIHZhciBpc0FjdGl2ZSA9IHRydWU7XG5cbiAgICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbiBsaXN0ZW5lcigpIHtcbiAgICAgIGlmIChpc0FjdGl2ZSkgZm4uYXBwbHkodW5kZWZpbmVkLCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICBsaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgIGxpc3RlbmVycyA9IGxpc3RlbmVycy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0gIT09IGxpc3RlbmVyO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgbm90aWZ5TGlzdGVuZXJzID0gZnVuY3Rpb24gbm90aWZ5TGlzdGVuZXJzKCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIGxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgcmV0dXJuIGxpc3RlbmVyLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBzZXRQcm9tcHQ6IHNldFByb21wdCxcbiAgICBjb25maXJtVHJhbnNpdGlvblRvOiBjb25maXJtVHJhbnNpdGlvblRvLFxuICAgIGFwcGVuZExpc3RlbmVyOiBhcHBlbmRMaXN0ZW5lcixcbiAgICBub3RpZnlMaXN0ZW5lcnM6IG5vdGlmeUxpc3RlbmVyc1xuICB9O1xufTtcblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiYVwiXSA9IChjcmVhdGVUcmFuc2l0aW9uTWFuYWdlcik7XG5cbi8qKiovIH0pLFxuLyogNTIgKi8sXG4vKiA1MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3Rfcm91dGVyX2VzX1JvdXRlcl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NCk7XG4vLyBXcml0dGVuIGluIHRoaXMgcm91bmQgYWJvdXQgd2F5IGZvciBiYWJlbC10cmFuc2Zvcm0taW1wb3J0c1xuXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19Sb3V0ZXJfX1tcImFcIiAvKiBkZWZhdWx0ICovXSk7XG5cbi8qKiovIH0pLFxuLyogNTQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9yZWFjdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcmVhY3RfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9yZWFjdF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX3Byb3BfdHlwZXNfXyk7XG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cblxuXG5cblxuXG4vKipcbiAqIFRoZSBwdWJsaWMgQVBJIGZvciBwdXR0aW5nIGhpc3Rvcnkgb24gY29udGV4dC5cbiAqL1xuXG52YXIgUm91dGVyID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFJvdXRlciwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gUm91dGVyKCkge1xuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUm91dGVyKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX1JlYWN0JENvbXBvbmVudC5jYWxsLmFwcGx5KF9SZWFjdCRDb21wb25lbnQsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG1hdGNoOiBfdGhpcy5jb21wdXRlTWF0Y2goX3RoaXMucHJvcHMuaGlzdG9yeS5sb2NhdGlvbi5wYXRobmFtZSlcbiAgICB9LCBfdGVtcCksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gIFJvdXRlci5wcm90b3R5cGUuZ2V0Q2hpbGRDb250ZXh0ID0gZnVuY3Rpb24gZ2V0Q2hpbGRDb250ZXh0KCkge1xuICAgIHJldHVybiB7XG4gICAgICByb3V0ZXI6IF9leHRlbmRzKHt9LCB0aGlzLmNvbnRleHQucm91dGVyLCB7XG4gICAgICAgIGhpc3Rvcnk6IHRoaXMucHJvcHMuaGlzdG9yeSxcbiAgICAgICAgcm91dGU6IHtcbiAgICAgICAgICBsb2NhdGlvbjogdGhpcy5wcm9wcy5oaXN0b3J5LmxvY2F0aW9uLFxuICAgICAgICAgIG1hdGNoOiB0aGlzLnN0YXRlLm1hdGNoXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfTtcbiAgfTtcblxuICBSb3V0ZXIucHJvdG90eXBlLmNvbXB1dGVNYXRjaCA9IGZ1bmN0aW9uIGNvbXB1dGVNYXRjaChwYXRobmFtZSkge1xuICAgIHJldHVybiB7XG4gICAgICBwYXRoOiAnLycsXG4gICAgICB1cmw6ICcvJyxcbiAgICAgIHBhcmFtczoge30sXG4gICAgICBpc0V4YWN0OiBwYXRobmFtZSA9PT0gJy8nXG4gICAgfTtcbiAgfTtcblxuICBSb3V0ZXIucHJvdG90eXBlLmNvbXBvbmVudFdpbGxNb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICBjaGlsZHJlbiA9IF9wcm9wcy5jaGlsZHJlbixcbiAgICAgICAgaGlzdG9yeSA9IF9wcm9wcy5oaXN0b3J5O1xuXG5cbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X19fZGVmYXVsdCgpKGNoaWxkcmVuID09IG51bGwgfHwgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3JlYWN0X19fZGVmYXVsdC5hLkNoaWxkcmVuLmNvdW50KGNoaWxkcmVuKSA9PT0gMSwgJ0EgPFJvdXRlcj4gbWF5IGhhdmUgb25seSBvbmUgY2hpbGQgZWxlbWVudCcpO1xuXG4gICAgLy8gRG8gdGhpcyBoZXJlIHNvIHdlIGNhbiBzZXRTdGF0ZSB3aGVuIGEgPFJlZGlyZWN0PiBjaGFuZ2VzIHRoZVxuICAgIC8vIGxvY2F0aW9uIGluIGNvbXBvbmVudFdpbGxNb3VudC4gVGhpcyBoYXBwZW5zIGUuZy4gd2hlbiBkb2luZ1xuICAgIC8vIHNlcnZlciByZW5kZXJpbmcgdXNpbmcgYSA8U3RhdGljUm91dGVyPi5cbiAgICB0aGlzLnVubGlzdGVuID0gaGlzdG9yeS5saXN0ZW4oZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMyLnNldFN0YXRlKHtcbiAgICAgICAgbWF0Y2g6IF90aGlzMi5jb21wdXRlTWF0Y2goaGlzdG9yeS5sb2NhdGlvbi5wYXRobmFtZSlcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIFJvdXRlci5wcm90b3R5cGUuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0KCkodGhpcy5wcm9wcy5oaXN0b3J5ID09PSBuZXh0UHJvcHMuaGlzdG9yeSwgJ1lvdSBjYW5ub3QgY2hhbmdlIDxSb3V0ZXIgaGlzdG9yeT4nKTtcbiAgfTtcblxuICBSb3V0ZXIucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy51bmxpc3RlbigpO1xuICB9O1xuXG4gIFJvdXRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBjaGlsZHJlbiA9IHRoaXMucHJvcHMuY2hpbGRyZW47XG5cbiAgICByZXR1cm4gY2hpbGRyZW4gPyBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcmVhY3RfX19kZWZhdWx0LmEuQ2hpbGRyZW4ub25seShjaGlsZHJlbikgOiBudWxsO1xuICB9O1xuXG4gIHJldHVybiBSb3V0ZXI7XG59KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9yZWFjdF9fX2RlZmF1bHQuYS5Db21wb25lbnQpO1xuXG5Sb3V0ZXIucHJvcFR5cGVzID0ge1xuICBoaXN0b3J5OiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vYmplY3QuaXNSZXF1aXJlZCxcbiAgY2hpbGRyZW46IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19wcm9wX3R5cGVzX19fZGVmYXVsdC5hLm5vZGVcbn07XG5Sb3V0ZXIuY29udGV4dFR5cGVzID0ge1xuICByb3V0ZXI6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19wcm9wX3R5cGVzX19fZGVmYXVsdC5hLm9iamVjdFxufTtcblJvdXRlci5jaGlsZENvbnRleHRUeXBlcyA9IHtcbiAgcm91dGVyOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vYmplY3QuaXNSZXF1aXJlZFxufTtcblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKFJvdXRlcik7XG5cbi8qKiovIH0pLFxuLyogNTUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3BhdGhfdG9fcmVnZXhwX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3MCk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3BhdGhfdG9fcmVnZXhwX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcGF0aF90b19yZWdleHBfXyk7XG5cblxudmFyIHBhdHRlcm5DYWNoZSA9IHt9O1xudmFyIGNhY2hlTGltaXQgPSAxMDAwMDtcbnZhciBjYWNoZUNvdW50ID0gMDtcblxudmFyIGNvbXBpbGVQYXRoID0gZnVuY3Rpb24gY29tcGlsZVBhdGgocGF0dGVybiwgb3B0aW9ucykge1xuICB2YXIgY2FjaGVLZXkgPSAnJyArIG9wdGlvbnMuZW5kICsgb3B0aW9ucy5zdHJpY3QgKyBvcHRpb25zLnNlbnNpdGl2ZTtcbiAgdmFyIGNhY2hlID0gcGF0dGVybkNhY2hlW2NhY2hlS2V5XSB8fCAocGF0dGVybkNhY2hlW2NhY2hlS2V5XSA9IHt9KTtcblxuICBpZiAoY2FjaGVbcGF0dGVybl0pIHJldHVybiBjYWNoZVtwYXR0ZXJuXTtcblxuICB2YXIga2V5cyA9IFtdO1xuICB2YXIgcmUgPSBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcGF0aF90b19yZWdleHBfX19kZWZhdWx0KCkocGF0dGVybiwga2V5cywgb3B0aW9ucyk7XG4gIHZhciBjb21waWxlZFBhdHRlcm4gPSB7IHJlOiByZSwga2V5czoga2V5cyB9O1xuXG4gIGlmIChjYWNoZUNvdW50IDwgY2FjaGVMaW1pdCkge1xuICAgIGNhY2hlW3BhdHRlcm5dID0gY29tcGlsZWRQYXR0ZXJuO1xuICAgIGNhY2hlQ291bnQrKztcbiAgfVxuXG4gIHJldHVybiBjb21waWxlZFBhdHRlcm47XG59O1xuXG4vKipcbiAqIFB1YmxpYyBBUEkgZm9yIG1hdGNoaW5nIGEgVVJMIHBhdGhuYW1lIHRvIGEgcGF0aCBwYXR0ZXJuLlxuICovXG52YXIgbWF0Y2hQYXRoID0gZnVuY3Rpb24gbWF0Y2hQYXRoKHBhdGhuYW1lKSB7XG4gIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnKSBvcHRpb25zID0geyBwYXRoOiBvcHRpb25zIH07XG5cbiAgdmFyIF9vcHRpb25zID0gb3B0aW9ucyxcbiAgICAgIF9vcHRpb25zJHBhdGggPSBfb3B0aW9ucy5wYXRoLFxuICAgICAgcGF0aCA9IF9vcHRpb25zJHBhdGggPT09IHVuZGVmaW5lZCA/ICcvJyA6IF9vcHRpb25zJHBhdGgsXG4gICAgICBfb3B0aW9ucyRleGFjdCA9IF9vcHRpb25zLmV4YWN0LFxuICAgICAgZXhhY3QgPSBfb3B0aW9ucyRleGFjdCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfb3B0aW9ucyRleGFjdCxcbiAgICAgIF9vcHRpb25zJHN0cmljdCA9IF9vcHRpb25zLnN0cmljdCxcbiAgICAgIHN0cmljdCA9IF9vcHRpb25zJHN0cmljdCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfb3B0aW9ucyRzdHJpY3QsXG4gICAgICBfb3B0aW9ucyRzZW5zaXRpdmUgPSBfb3B0aW9ucy5zZW5zaXRpdmUsXG4gICAgICBzZW5zaXRpdmUgPSBfb3B0aW9ucyRzZW5zaXRpdmUgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX29wdGlvbnMkc2Vuc2l0aXZlO1xuXG4gIHZhciBfY29tcGlsZVBhdGggPSBjb21waWxlUGF0aChwYXRoLCB7IGVuZDogZXhhY3QsIHN0cmljdDogc3RyaWN0LCBzZW5zaXRpdmU6IHNlbnNpdGl2ZSB9KSxcbiAgICAgIHJlID0gX2NvbXBpbGVQYXRoLnJlLFxuICAgICAga2V5cyA9IF9jb21waWxlUGF0aC5rZXlzO1xuXG4gIHZhciBtYXRjaCA9IHJlLmV4ZWMocGF0aG5hbWUpO1xuXG4gIGlmICghbWF0Y2gpIHJldHVybiBudWxsO1xuXG4gIHZhciB1cmwgPSBtYXRjaFswXSxcbiAgICAgIHZhbHVlcyA9IG1hdGNoLnNsaWNlKDEpO1xuXG4gIHZhciBpc0V4YWN0ID0gcGF0aG5hbWUgPT09IHVybDtcblxuICBpZiAoZXhhY3QgJiYgIWlzRXhhY3QpIHJldHVybiBudWxsO1xuXG4gIHJldHVybiB7XG4gICAgcGF0aDogcGF0aCwgLy8gdGhlIHBhdGggcGF0dGVybiB1c2VkIHRvIG1hdGNoXG4gICAgdXJsOiBwYXRoID09PSAnLycgJiYgdXJsID09PSAnJyA/ICcvJyA6IHVybCwgLy8gdGhlIG1hdGNoZWQgcG9ydGlvbiBvZiB0aGUgVVJMXG4gICAgaXNFeGFjdDogaXNFeGFjdCwgLy8gd2hldGhlciBvciBub3Qgd2UgbWF0Y2hlZCBleGFjdGx5XG4gICAgcGFyYW1zOiBrZXlzLnJlZHVjZShmdW5jdGlvbiAobWVtbywga2V5LCBpbmRleCkge1xuICAgICAgbWVtb1trZXkubmFtZV0gPSB2YWx1ZXNbaW5kZXhdO1xuICAgICAgcmV0dXJuIG1lbW87XG4gICAgfSwge30pXG4gIH07XG59O1xuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKG1hdGNoUGF0aCk7XG5cbi8qKiovIH0pLFxuLyogNTYgKi8sXG4vKiA1NyAqLyxcbi8qIDU4ICovLFxuLyogNTkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19Ccm93c2VyUm91dGVyX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4OSk7XG4vKiBoYXJtb255IHJlZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJCcm93c2VyUm91dGVyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19Ccm93c2VyUm91dGVyX19bXCJhXCJdOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX0hhc2hSb3V0ZXJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTkwKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkhhc2hSb3V0ZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX0hhc2hSb3V0ZXJfX1tcImFcIl07IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fTGlua19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NCk7XG4vKiBoYXJtb255IHJlZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJMaW5rXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19MaW5rX19bXCJhXCJdOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX01lbW9yeVJvdXRlcl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTEpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiTWVtb3J5Um91dGVyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19NZW1vcnlSb3V0ZXJfX1tcImFcIl07IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fTmF2TGlua19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiTmF2TGlua1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fTmF2TGlua19fW1wiYVwiXTsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19Qcm9tcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTkzKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlByb21wdFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fUHJvbXB0X19bXCJhXCJdOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1JlZGlyZWN0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5NCk7XG4vKiBoYXJtb255IHJlZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJSZWRpcmVjdFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fUmVkaXJlY3RfX1tcImFcIl07IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fUm91dGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTUpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiUm91dGVcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfX1JvdXRlX19bXCJhXCJdOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfX1JvdXRlcl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Myk7XG4vKiBoYXJtb255IHJlZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJSb3V0ZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfX1JvdXRlcl9fW1wiYVwiXTsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV85X19TdGF0aWNSb3V0ZXJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTk1KTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN0YXRpY1JvdXRlclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fU3RhdGljUm91dGVyX19bXCJhXCJdOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEwX19Td2l0Y2hfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTk2KTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN3aXRjaFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTBfX1N3aXRjaF9fW1wiYVwiXTsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMV9fbWF0Y2hQYXRoX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5Nyk7XG4vKiBoYXJtb255IHJlZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJtYXRjaFBhdGhcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzExX19tYXRjaFBhdGhfX1tcImFcIl07IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTJfX3dpdGhSb3V0ZXJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTk4KTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIndpdGhSb3V0ZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEyX193aXRoUm91dGVyX19bXCJhXCJdOyB9KTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbi8qKiovIH0pLFxuLyogNjAgKi8sXG4vKiA2MSAqLyxcbi8qIDYyICovLFxuLyogNjMgKi8sXG4vKiA2NCAqLyxcbi8qIDY1ICovLFxuLyogNjYgKi8sXG4vKiA2NyAqLyxcbi8qIDY4ICovLFxuLyogNjkgKi8sXG4vKiA3MCAqLyxcbi8qIDcxICovLFxuLyogNzIgKi8sXG4vKiA3MyAqLyxcbi8qIDc0ICovLFxuLyogNzUgKi8sXG4vKiA3NiAqLyxcbi8qIDc3ICovLFxuLyogNzggKi8sXG4vKiA3OSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdW5kZWZpbmVkO1xuXG52YXIgX0NoZWNrYm94ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDUpO1xuXG52YXIgX0NoZWNrYm94MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NoZWNrYm94KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZXhwb3J0cy5kZWZhdWx0ID0gX0NoZWNrYm94Mi5kZWZhdWx0O1xuXG4vKioqLyB9KSxcbi8qIDgwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB1bmRlZmluZWQ7XG5cbnZhciBfU25hY2tiYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Mik7XG5cbnZhciBfU25hY2tiYXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU25hY2tiYXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5leHBvcnRzLmRlZmF1bHQgPSBfU25hY2tiYXIyLmRlZmF1bHQ7XG5cbi8qKiovIH0pLFxuLyogODEgKi8sXG4vKiA4MiAqLyxcbi8qIDgzICovLFxuLyogODQgKi8sXG4vKiA4NSAqLyxcbi8qIDg2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG52YXIgY2FuVXNlRE9NID0gZXhwb3J0cy5jYW5Vc2VET00gPSAhISh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZG9jdW1lbnQgJiYgd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO1xuXG52YXIgYWRkRXZlbnRMaXN0ZW5lciA9IGV4cG9ydHMuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIobm9kZSwgZXZlbnQsIGxpc3RlbmVyKSB7XG4gIHJldHVybiBub2RlLmFkZEV2ZW50TGlzdGVuZXIgPyBub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyLCBmYWxzZSkgOiBub2RlLmF0dGFjaEV2ZW50KCdvbicgKyBldmVudCwgbGlzdGVuZXIpO1xufTtcblxudmFyIHJlbW92ZUV2ZW50TGlzdGVuZXIgPSBleHBvcnRzLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKG5vZGUsIGV2ZW50LCBsaXN0ZW5lcikge1xuICByZXR1cm4gbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyID8gbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpIDogbm9kZS5kZXRhY2hFdmVudCgnb24nICsgZXZlbnQsIGxpc3RlbmVyKTtcbn07XG5cbnZhciBnZXRDb25maXJtYXRpb24gPSBleHBvcnRzLmdldENvbmZpcm1hdGlvbiA9IGZ1bmN0aW9uIGdldENvbmZpcm1hdGlvbihtZXNzYWdlLCBjYWxsYmFjaykge1xuICByZXR1cm4gY2FsbGJhY2sod2luZG93LmNvbmZpcm0obWVzc2FnZSkpO1xufTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1hbGVydFxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgSFRNTDUgaGlzdG9yeSBBUEkgaXMgc3VwcG9ydGVkLiBUYWtlbiBmcm9tIE1vZGVybml6ci5cbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci9ibG9iL21hc3Rlci9MSUNFTlNFXG4gKiBodHRwczovL2dpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci9ibG9iL21hc3Rlci9mZWF0dXJlLWRldGVjdHMvaGlzdG9yeS5qc1xuICogY2hhbmdlZCB0byBhdm9pZCBmYWxzZSBuZWdhdGl2ZXMgZm9yIFdpbmRvd3MgUGhvbmVzOiBodHRwczovL2dpdGh1Yi5jb20vcmVhY3Rqcy9yZWFjdC1yb3V0ZXIvaXNzdWVzLzU4NlxuICovXG52YXIgc3VwcG9ydHNIaXN0b3J5ID0gZXhwb3J0cy5zdXBwb3J0c0hpc3RvcnkgPSBmdW5jdGlvbiBzdXBwb3J0c0hpc3RvcnkoKSB7XG4gIHZhciB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xuXG4gIGlmICgodWEuaW5kZXhPZignQW5kcm9pZCAyLicpICE9PSAtMSB8fCB1YS5pbmRleE9mKCdBbmRyb2lkIDQuMCcpICE9PSAtMSkgJiYgdWEuaW5kZXhPZignTW9iaWxlIFNhZmFyaScpICE9PSAtMSAmJiB1YS5pbmRleE9mKCdDaHJvbWUnKSA9PT0gLTEgJiYgdWEuaW5kZXhPZignV2luZG93cyBQaG9uZScpID09PSAtMSkgcmV0dXJuIGZhbHNlO1xuXG4gIHJldHVybiB3aW5kb3cuaGlzdG9yeSAmJiAncHVzaFN0YXRlJyBpbiB3aW5kb3cuaGlzdG9yeTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGJyb3dzZXIgZmlyZXMgcG9wc3RhdGUgb24gaGFzaCBjaGFuZ2UuXG4gKiBJRTEwIGFuZCBJRTExIGRvIG5vdC5cbiAqL1xudmFyIHN1cHBvcnRzUG9wU3RhdGVPbkhhc2hDaGFuZ2UgPSBleHBvcnRzLnN1cHBvcnRzUG9wU3RhdGVPbkhhc2hDaGFuZ2UgPSBmdW5jdGlvbiBzdXBwb3J0c1BvcFN0YXRlT25IYXNoQ2hhbmdlKCkge1xuICByZXR1cm4gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignVHJpZGVudCcpID09PSAtMTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBmYWxzZSBpZiB1c2luZyBnbyhuKSB3aXRoIGhhc2ggaGlzdG9yeSBjYXVzZXMgYSBmdWxsIHBhZ2UgcmVsb2FkLlxuICovXG52YXIgc3VwcG9ydHNHb1dpdGhvdXRSZWxvYWRVc2luZ0hhc2ggPSBleHBvcnRzLnN1cHBvcnRzR29XaXRob3V0UmVsb2FkVXNpbmdIYXNoID0gZnVuY3Rpb24gc3VwcG9ydHNHb1dpdGhvdXRSZWxvYWRVc2luZ0hhc2goKSB7XG4gIHJldHVybiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94JykgPT09IC0xO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYSBnaXZlbiBwb3BzdGF0ZSBldmVudCBpcyBhbiBleHRyYW5lb3VzIFdlYktpdCBldmVudC5cbiAqIEFjY291bnRzIGZvciB0aGUgZmFjdCB0aGF0IENocm9tZSBvbiBpT1MgZmlyZXMgcmVhbCBwb3BzdGF0ZSBldmVudHNcbiAqIGNvbnRhaW5pbmcgdW5kZWZpbmVkIHN0YXRlIHdoZW4gcHJlc3NpbmcgdGhlIGJhY2sgYnV0dG9uLlxuICovXG52YXIgaXNFeHRyYW5lb3VzUG9wc3RhdGVFdmVudCA9IGV4cG9ydHMuaXNFeHRyYW5lb3VzUG9wc3RhdGVFdmVudCA9IGZ1bmN0aW9uIGlzRXh0cmFuZW91c1BvcHN0YXRlRXZlbnQoZXZlbnQpIHtcbiAgcmV0dXJuIGV2ZW50LnN0YXRlID09PSB1bmRlZmluZWQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdDcmlPUycpID09PSAtMTtcbn07XG5cbi8qKiovIH0pLFxuLyogODcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiYVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGNhblVzZURPTTsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGFkZEV2ZW50TGlzdGVuZXI7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImVcIiwgZnVuY3Rpb24oKSB7IHJldHVybiByZW1vdmVFdmVudExpc3RlbmVyOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJjXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZ2V0Q29uZmlybWF0aW9uOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJmXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc3VwcG9ydHNIaXN0b3J5OyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJnXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc3VwcG9ydHNQb3BTdGF0ZU9uSGFzaENoYW5nZTsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiYlwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHN1cHBvcnRzR29XaXRob3V0UmVsb2FkVXNpbmdIYXNoOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJoXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gaXNFeHRyYW5lb3VzUG9wc3RhdGVFdmVudDsgfSk7XG52YXIgY2FuVXNlRE9NID0gISEodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmRvY3VtZW50ICYmIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcblxudmFyIGFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKG5vZGUsIGV2ZW50LCBsaXN0ZW5lcikge1xuICByZXR1cm4gbm9kZS5hZGRFdmVudExpc3RlbmVyID8gbm9kZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpIDogbm9kZS5hdHRhY2hFdmVudCgnb24nICsgZXZlbnQsIGxpc3RlbmVyKTtcbn07XG5cbnZhciByZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcihub2RlLCBldmVudCwgbGlzdGVuZXIpIHtcbiAgcmV0dXJuIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA/IG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIsIGZhbHNlKSA6IG5vZGUuZGV0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBsaXN0ZW5lcik7XG59O1xuXG52YXIgZ2V0Q29uZmlybWF0aW9uID0gZnVuY3Rpb24gZ2V0Q29uZmlybWF0aW9uKG1lc3NhZ2UsIGNhbGxiYWNrKSB7XG4gIHJldHVybiBjYWxsYmFjayh3aW5kb3cuY29uZmlybShtZXNzYWdlKSk7XG59OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWFsZXJ0XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBIVE1MNSBoaXN0b3J5IEFQSSBpcyBzdXBwb3J0ZWQuIFRha2VuIGZyb20gTW9kZXJuaXpyLlxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9Nb2Rlcm5penIvTW9kZXJuaXpyL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9Nb2Rlcm5penIvTW9kZXJuaXpyL2Jsb2IvbWFzdGVyL2ZlYXR1cmUtZGV0ZWN0cy9oaXN0b3J5LmpzXG4gKiBjaGFuZ2VkIHRvIGF2b2lkIGZhbHNlIG5lZ2F0aXZlcyBmb3IgV2luZG93cyBQaG9uZXM6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdGpzL3JlYWN0LXJvdXRlci9pc3N1ZXMvNTg2XG4gKi9cbnZhciBzdXBwb3J0c0hpc3RvcnkgPSBmdW5jdGlvbiBzdXBwb3J0c0hpc3RvcnkoKSB7XG4gIHZhciB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xuXG4gIGlmICgodWEuaW5kZXhPZignQW5kcm9pZCAyLicpICE9PSAtMSB8fCB1YS5pbmRleE9mKCdBbmRyb2lkIDQuMCcpICE9PSAtMSkgJiYgdWEuaW5kZXhPZignTW9iaWxlIFNhZmFyaScpICE9PSAtMSAmJiB1YS5pbmRleE9mKCdDaHJvbWUnKSA9PT0gLTEgJiYgdWEuaW5kZXhPZignV2luZG93cyBQaG9uZScpID09PSAtMSkgcmV0dXJuIGZhbHNlO1xuXG4gIHJldHVybiB3aW5kb3cuaGlzdG9yeSAmJiAncHVzaFN0YXRlJyBpbiB3aW5kb3cuaGlzdG9yeTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGJyb3dzZXIgZmlyZXMgcG9wc3RhdGUgb24gaGFzaCBjaGFuZ2UuXG4gKiBJRTEwIGFuZCBJRTExIGRvIG5vdC5cbiAqL1xudmFyIHN1cHBvcnRzUG9wU3RhdGVPbkhhc2hDaGFuZ2UgPSBmdW5jdGlvbiBzdXBwb3J0c1BvcFN0YXRlT25IYXNoQ2hhbmdlKCkge1xuICByZXR1cm4gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignVHJpZGVudCcpID09PSAtMTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBmYWxzZSBpZiB1c2luZyBnbyhuKSB3aXRoIGhhc2ggaGlzdG9yeSBjYXVzZXMgYSBmdWxsIHBhZ2UgcmVsb2FkLlxuICovXG52YXIgc3VwcG9ydHNHb1dpdGhvdXRSZWxvYWRVc2luZ0hhc2ggPSBmdW5jdGlvbiBzdXBwb3J0c0dvV2l0aG91dFJlbG9hZFVzaW5nSGFzaCgpIHtcbiAgcmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gnKSA9PT0gLTE7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIGdpdmVuIHBvcHN0YXRlIGV2ZW50IGlzIGFuIGV4dHJhbmVvdXMgV2ViS2l0IGV2ZW50LlxuICogQWNjb3VudHMgZm9yIHRoZSBmYWN0IHRoYXQgQ2hyb21lIG9uIGlPUyBmaXJlcyByZWFsIHBvcHN0YXRlIGV2ZW50c1xuICogY29udGFpbmluZyB1bmRlZmluZWQgc3RhdGUgd2hlbiBwcmVzc2luZyB0aGUgYmFjayBidXR0b24uXG4gKi9cbnZhciBpc0V4dHJhbmVvdXNQb3BzdGF0ZUV2ZW50ID0gZnVuY3Rpb24gaXNFeHRyYW5lb3VzUG9wc3RhdGVFdmVudChldmVudCkge1xuICByZXR1cm4gZXZlbnQuc3RhdGUgPT09IHVuZGVmaW5lZCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0NyaU9TJykgPT09IC0xO1xufTtcblxuLyoqKi8gfSksXG4vKiA4OCAqLyxcbi8qIDg5ICovLFxuLyogOTAgKi8sXG4vKiA5MSAqLyxcbi8qIDkyICovLFxuLyogOTMgKi8sXG4vKiA5NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9pbnZhcmlhbnRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9pbnZhcmlhbnRfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9pbnZhcmlhbnRfXyk7XG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMob2JqLCBrZXlzKSB7IHZhciB0YXJnZXQgPSB7fTsgZm9yICh2YXIgaSBpbiBvYmopIHsgaWYgKGtleXMuaW5kZXhPZihpKSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBpKSkgY29udGludWU7IHRhcmdldFtpXSA9IG9ialtpXTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuXG5cblxuXG52YXIgaXNNb2RpZmllZEV2ZW50ID0gZnVuY3Rpb24gaXNNb2RpZmllZEV2ZW50KGV2ZW50KSB7XG4gIHJldHVybiAhIShldmVudC5tZXRhS2V5IHx8IGV2ZW50LmFsdEtleSB8fCBldmVudC5jdHJsS2V5IHx8IGV2ZW50LnNoaWZ0S2V5KTtcbn07XG5cbi8qKlxuICogVGhlIHB1YmxpYyBBUEkgZm9yIHJlbmRlcmluZyBhIGhpc3RvcnktYXdhcmUgPGE+LlxuICovXG5cbnZhciBMaW5rID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKExpbmssIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIExpbmsoKSB7XG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMaW5rKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX1JlYWN0JENvbXBvbmVudC5jYWxsLmFwcGx5KF9SZWFjdCRDb21wb25lbnQsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKF90aGlzLnByb3BzLm9uQ2xpY2spIF90aGlzLnByb3BzLm9uQ2xpY2soZXZlbnQpO1xuXG4gICAgICBpZiAoIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgJiYgLy8gb25DbGljayBwcmV2ZW50ZWQgZGVmYXVsdFxuICAgICAgZXZlbnQuYnV0dG9uID09PSAwICYmIC8vIGlnbm9yZSByaWdodCBjbGlja3NcbiAgICAgICFfdGhpcy5wcm9wcy50YXJnZXQgJiYgLy8gbGV0IGJyb3dzZXIgaGFuZGxlIFwidGFyZ2V0PV9ibGFua1wiIGV0Yy5cbiAgICAgICFpc01vZGlmaWVkRXZlbnQoZXZlbnQpIC8vIGlnbm9yZSBjbGlja3Mgd2l0aCBtb2RpZmllciBrZXlzXG4gICAgICApIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgdmFyIGhpc3RvcnkgPSBfdGhpcy5jb250ZXh0LnJvdXRlci5oaXN0b3J5O1xuICAgICAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLFxuICAgICAgICAgICAgICByZXBsYWNlID0gX3RoaXMkcHJvcHMucmVwbGFjZSxcbiAgICAgICAgICAgICAgdG8gPSBfdGhpcyRwcm9wcy50bztcblxuXG4gICAgICAgICAgaWYgKHJlcGxhY2UpIHtcbiAgICAgICAgICAgIGhpc3RvcnkucmVwbGFjZSh0byk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhpc3RvcnkucHVzaCh0byk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwgX3RlbXApLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7XG4gIH1cblxuICBMaW5rLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgIHJlcGxhY2UgPSBfcHJvcHMucmVwbGFjZSxcbiAgICAgICAgdG8gPSBfcHJvcHMudG8sXG4gICAgICAgIGlubmVyUmVmID0gX3Byb3BzLmlubmVyUmVmLFxuICAgICAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcHJvcHMsIFsncmVwbGFjZScsICd0bycsICdpbm5lclJlZiddKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuXG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX2ludmFyaWFudF9fX2RlZmF1bHQoKSh0aGlzLmNvbnRleHQucm91dGVyLCAnWW91IHNob3VsZCBub3QgdXNlIDxMaW5rPiBvdXRzaWRlIGEgPFJvdXRlcj4nKTtcblxuICAgIHZhciBocmVmID0gdGhpcy5jb250ZXh0LnJvdXRlci5oaXN0b3J5LmNyZWF0ZUhyZWYodHlwZW9mIHRvID09PSAnc3RyaW5nJyA/IHsgcGF0aG5hbWU6IHRvIH0gOiB0byk7XG5cbiAgICByZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoJ2EnLCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHsgb25DbGljazogdGhpcy5oYW5kbGVDbGljaywgaHJlZjogaHJlZiwgcmVmOiBpbm5lclJlZiB9KSk7XG4gIH07XG5cbiAgcmV0dXJuIExpbms7XG59KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fX2RlZmF1bHQuYS5Db21wb25lbnQpO1xuXG5MaW5rLnByb3BUeXBlcyA9IHtcbiAgb25DbGljazogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuZnVuYyxcbiAgdGFyZ2V0OiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5zdHJpbmcsXG4gIHJlcGxhY2U6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmJvb2wsXG4gIHRvOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vbmVPZlR5cGUoW19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLnN0cmluZywgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEub2JqZWN0XSkuaXNSZXF1aXJlZCxcbiAgaW5uZXJSZWY6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLm9uZU9mVHlwZShbX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuc3RyaW5nLCBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5mdW5jXSlcbn07XG5MaW5rLmRlZmF1bHRQcm9wcyA9IHtcbiAgcmVwbGFjZTogZmFsc2Vcbn07XG5MaW5rLmNvbnRleHRUeXBlcyA9IHtcbiAgcm91dGVyOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5zaGFwZSh7XG4gICAgaGlzdG9yeTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuc2hhcGUoe1xuICAgICAgcHVzaDogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuZnVuYy5pc1JlcXVpcmVkLFxuICAgICAgcmVwbGFjZTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuZnVuYy5pc1JlcXVpcmVkLFxuICAgICAgY3JlYXRlSHJlZjogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuZnVuYy5pc1JlcXVpcmVkXG4gICAgfSkuaXNSZXF1aXJlZFxuICB9KS5pc1JlcXVpcmVkXG59O1xuXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAoTGluayk7XG5cbi8qKiovIH0pLFxuLyogOTUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19Sb3V0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Nik7XG4vLyBXcml0dGVuIGluIHRoaXMgcm91bmQgYWJvdXQgd2F5IGZvciBiYWJlbC10cmFuc2Zvcm0taW1wb3J0c1xuXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19Sb3V0ZV9fW1wiYVwiIC8qIGRlZmF1bHQgKi9dKTtcblxuLyoqKi8gfSksXG4vKiA5NiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9pbnZhcmlhbnRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9pbnZhcmlhbnRfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9pbnZhcmlhbnRfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3JlYWN0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9yZWFjdF9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3JlYWN0X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19wcm9wX3R5cGVzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19wcm9wX3R5cGVzX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX21hdGNoUGF0aF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSk7XG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cblxuXG5cblxuXG5cbnZhciBpc0VtcHR5Q2hpbGRyZW4gPSBmdW5jdGlvbiBpc0VtcHR5Q2hpbGRyZW4oY2hpbGRyZW4pIHtcbiAgcmV0dXJuIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9yZWFjdF9fX2RlZmF1bHQuYS5DaGlsZHJlbi5jb3VudChjaGlsZHJlbikgPT09IDA7XG59O1xuXG4vKipcbiAqIFRoZSBwdWJsaWMgQVBJIGZvciBtYXRjaGluZyBhIHNpbmdsZSBwYXRoIGFuZCByZW5kZXJpbmcuXG4gKi9cblxudmFyIFJvdXRlID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFJvdXRlLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBSb3V0ZSgpIHtcbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJvdXRlKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX1JlYWN0JENvbXBvbmVudC5jYWxsLmFwcGx5KF9SZWFjdCRDb21wb25lbnQsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG1hdGNoOiBfdGhpcy5jb21wdXRlTWF0Y2goX3RoaXMucHJvcHMsIF90aGlzLmNvbnRleHQucm91dGVyKVxuICAgIH0sIF90ZW1wKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgUm91dGUucHJvdG90eXBlLmdldENoaWxkQ29udGV4dCA9IGZ1bmN0aW9uIGdldENoaWxkQ29udGV4dCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcm91dGVyOiBfZXh0ZW5kcyh7fSwgdGhpcy5jb250ZXh0LnJvdXRlciwge1xuICAgICAgICByb3V0ZToge1xuICAgICAgICAgIGxvY2F0aW9uOiB0aGlzLnByb3BzLmxvY2F0aW9uIHx8IHRoaXMuY29udGV4dC5yb3V0ZXIucm91dGUubG9jYXRpb24sXG4gICAgICAgICAgbWF0Y2g6IHRoaXMuc3RhdGUubWF0Y2hcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9O1xuICB9O1xuXG4gIFJvdXRlLnByb3RvdHlwZS5jb21wdXRlTWF0Y2ggPSBmdW5jdGlvbiBjb21wdXRlTWF0Y2goX3JlZiwgcm91dGVyKSB7XG4gICAgdmFyIGNvbXB1dGVkTWF0Y2ggPSBfcmVmLmNvbXB1dGVkTWF0Y2gsXG4gICAgICAgIGxvY2F0aW9uID0gX3JlZi5sb2NhdGlvbixcbiAgICAgICAgcGF0aCA9IF9yZWYucGF0aCxcbiAgICAgICAgc3RyaWN0ID0gX3JlZi5zdHJpY3QsXG4gICAgICAgIGV4YWN0ID0gX3JlZi5leGFjdCxcbiAgICAgICAgc2Vuc2l0aXZlID0gX3JlZi5zZW5zaXRpdmU7XG5cbiAgICBpZiAoY29tcHV0ZWRNYXRjaCkgcmV0dXJuIGNvbXB1dGVkTWF0Y2g7IC8vIDxTd2l0Y2g+IGFscmVhZHkgY29tcHV0ZWQgdGhlIG1hdGNoIGZvciB1c1xuXG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX2ludmFyaWFudF9fX2RlZmF1bHQoKShyb3V0ZXIsICdZb3Ugc2hvdWxkIG5vdCB1c2UgPFJvdXRlPiBvciB3aXRoUm91dGVyKCkgb3V0c2lkZSBhIDxSb3V0ZXI+Jyk7XG5cbiAgICB2YXIgcm91dGUgPSByb3V0ZXIucm91dGU7XG5cbiAgICB2YXIgcGF0aG5hbWUgPSAobG9jYXRpb24gfHwgcm91dGUubG9jYXRpb24pLnBhdGhuYW1lO1xuXG4gICAgcmV0dXJuIHBhdGggPyBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19tYXRjaFBhdGhfX1tcImFcIiAvKiBkZWZhdWx0ICovXSkocGF0aG5hbWUsIHsgcGF0aDogcGF0aCwgc3RyaWN0OiBzdHJpY3QsIGV4YWN0OiBleGFjdCwgc2Vuc2l0aXZlOiBzZW5zaXRpdmUgfSkgOiByb3V0ZS5tYXRjaDtcbiAgfTtcblxuICBSb3V0ZS5wcm90b3R5cGUuY29tcG9uZW50V2lsbE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCgpKCEodGhpcy5wcm9wcy5jb21wb25lbnQgJiYgdGhpcy5wcm9wcy5yZW5kZXIpLCAnWW91IHNob3VsZCBub3QgdXNlIDxSb3V0ZSBjb21wb25lbnQ+IGFuZCA8Um91dGUgcmVuZGVyPiBpbiB0aGUgc2FtZSByb3V0ZTsgPFJvdXRlIHJlbmRlcj4gd2lsbCBiZSBpZ25vcmVkJyk7XG5cbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQoKSghKHRoaXMucHJvcHMuY29tcG9uZW50ICYmIHRoaXMucHJvcHMuY2hpbGRyZW4gJiYgIWlzRW1wdHlDaGlsZHJlbih0aGlzLnByb3BzLmNoaWxkcmVuKSksICdZb3Ugc2hvdWxkIG5vdCB1c2UgPFJvdXRlIGNvbXBvbmVudD4gYW5kIDxSb3V0ZSBjaGlsZHJlbj4gaW4gdGhlIHNhbWUgcm91dGU7IDxSb3V0ZSBjaGlsZHJlbj4gd2lsbCBiZSBpZ25vcmVkJyk7XG5cbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQoKSghKHRoaXMucHJvcHMucmVuZGVyICYmIHRoaXMucHJvcHMuY2hpbGRyZW4gJiYgIWlzRW1wdHlDaGlsZHJlbih0aGlzLnByb3BzLmNoaWxkcmVuKSksICdZb3Ugc2hvdWxkIG5vdCB1c2UgPFJvdXRlIHJlbmRlcj4gYW5kIDxSb3V0ZSBjaGlsZHJlbj4gaW4gdGhlIHNhbWUgcm91dGU7IDxSb3V0ZSBjaGlsZHJlbj4gd2lsbCBiZSBpZ25vcmVkJyk7XG4gIH07XG5cbiAgUm91dGUucHJvdG90eXBlLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcywgbmV4dENvbnRleHQpIHtcbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQoKSghKG5leHRQcm9wcy5sb2NhdGlvbiAmJiAhdGhpcy5wcm9wcy5sb2NhdGlvbiksICc8Um91dGU+IGVsZW1lbnRzIHNob3VsZCBub3QgY2hhbmdlIGZyb20gdW5jb250cm9sbGVkIHRvIGNvbnRyb2xsZWQgKG9yIHZpY2UgdmVyc2EpLiBZb3UgaW5pdGlhbGx5IHVzZWQgbm8gXCJsb2NhdGlvblwiIHByb3AgYW5kIHRoZW4gcHJvdmlkZWQgb25lIG9uIGEgc3Vic2VxdWVudCByZW5kZXIuJyk7XG5cbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQoKSghKCFuZXh0UHJvcHMubG9jYXRpb24gJiYgdGhpcy5wcm9wcy5sb2NhdGlvbiksICc8Um91dGU+IGVsZW1lbnRzIHNob3VsZCBub3QgY2hhbmdlIGZyb20gY29udHJvbGxlZCB0byB1bmNvbnRyb2xsZWQgKG9yIHZpY2UgdmVyc2EpLiBZb3UgcHJvdmlkZWQgYSBcImxvY2F0aW9uXCIgcHJvcCBpbml0aWFsbHkgYnV0IG9taXR0ZWQgaXQgb24gYSBzdWJzZXF1ZW50IHJlbmRlci4nKTtcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgbWF0Y2g6IHRoaXMuY29tcHV0ZU1hdGNoKG5leHRQcm9wcywgbmV4dENvbnRleHQucm91dGVyKVxuICAgIH0pO1xuICB9O1xuXG4gIFJvdXRlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIG1hdGNoID0gdGhpcy5zdGF0ZS5tYXRjaDtcbiAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgY2hpbGRyZW4gPSBfcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgIGNvbXBvbmVudCA9IF9wcm9wcy5jb21wb25lbnQsXG4gICAgICAgIHJlbmRlciA9IF9wcm9wcy5yZW5kZXI7XG4gICAgdmFyIF9jb250ZXh0JHJvdXRlciA9IHRoaXMuY29udGV4dC5yb3V0ZXIsXG4gICAgICAgIGhpc3RvcnkgPSBfY29udGV4dCRyb3V0ZXIuaGlzdG9yeSxcbiAgICAgICAgcm91dGUgPSBfY29udGV4dCRyb3V0ZXIucm91dGUsXG4gICAgICAgIHN0YXRpY0NvbnRleHQgPSBfY29udGV4dCRyb3V0ZXIuc3RhdGljQ29udGV4dDtcblxuICAgIHZhciBsb2NhdGlvbiA9IHRoaXMucHJvcHMubG9jYXRpb24gfHwgcm91dGUubG9jYXRpb247XG4gICAgdmFyIHByb3BzID0geyBtYXRjaDogbWF0Y2gsIGxvY2F0aW9uOiBsb2NhdGlvbiwgaGlzdG9yeTogaGlzdG9yeSwgc3RhdGljQ29udGV4dDogc3RhdGljQ29udGV4dCB9O1xuXG4gICAgcmV0dXJuIGNvbXBvbmVudCA/IC8vIGNvbXBvbmVudCBwcm9wIGdldHMgZmlyc3QgcHJpb3JpdHksIG9ubHkgY2FsbGVkIGlmIHRoZXJlJ3MgYSBtYXRjaFxuICAgIG1hdGNoID8gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3JlYWN0X19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50LCBwcm9wcykgOiBudWxsIDogcmVuZGVyID8gLy8gcmVuZGVyIHByb3AgaXMgbmV4dCwgb25seSBjYWxsZWQgaWYgdGhlcmUncyBhIG1hdGNoXG4gICAgbWF0Y2ggPyByZW5kZXIocHJvcHMpIDogbnVsbCA6IGNoaWxkcmVuID8gLy8gY2hpbGRyZW4gY29tZSBsYXN0LCBhbHdheXMgY2FsbGVkXG4gICAgdHlwZW9mIGNoaWxkcmVuID09PSAnZnVuY3Rpb24nID8gY2hpbGRyZW4ocHJvcHMpIDogIWlzRW1wdHlDaGlsZHJlbihjaGlsZHJlbikgPyBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcmVhY3RfX19kZWZhdWx0LmEuQ2hpbGRyZW4ub25seShjaGlsZHJlbikgOiBudWxsIDogbnVsbDtcbiAgfTtcblxuICByZXR1cm4gUm91dGU7XG59KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9yZWFjdF9fX2RlZmF1bHQuYS5Db21wb25lbnQpO1xuXG5Sb3V0ZS5wcm9wVHlwZXMgPSB7XG4gIGNvbXB1dGVkTWF0Y2g6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19wcm9wX3R5cGVzX19fZGVmYXVsdC5hLm9iamVjdCwgLy8gcHJpdmF0ZSwgZnJvbSA8U3dpdGNoPlxuICBwYXRoOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5zdHJpbmcsXG4gIGV4YWN0OiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5ib29sLFxuICBzdHJpY3Q6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmJvb2wsXG4gIHNlbnNpdGl2ZTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuYm9vbCxcbiAgY29tcG9uZW50OiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5mdW5jLFxuICByZW5kZXI6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmZ1bmMsXG4gIGNoaWxkcmVuOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vbmVPZlR5cGUoW19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmZ1bmMsIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19wcm9wX3R5cGVzX19fZGVmYXVsdC5hLm5vZGVdKSxcbiAgbG9jYXRpb246IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19wcm9wX3R5cGVzX19fZGVmYXVsdC5hLm9iamVjdFxufTtcblJvdXRlLmNvbnRleHRUeXBlcyA9IHtcbiAgcm91dGVyOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5zaGFwZSh7XG4gICAgaGlzdG9yeTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgcm91dGU6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19wcm9wX3R5cGVzX19fZGVmYXVsdC5hLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIHN0YXRpY0NvbnRleHQ6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19wcm9wX3R5cGVzX19fZGVmYXVsdC5hLm9iamVjdFxuICB9KVxufTtcblJvdXRlLmNoaWxkQ29udGV4dFR5cGVzID0ge1xuICByb3V0ZXI6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19wcm9wX3R5cGVzX19fZGVmYXVsdC5hLm9iamVjdC5pc1JlcXVpcmVkXG59O1xuXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAoUm91dGUpO1xuXG4vKioqLyB9KSxcbi8qIDk3ICovLFxuLyogOTggKi8sXG4vKiA5OSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3dlYnBhY2tfZXhwb3J0c19fLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmZ1bmN0aW9uIGlzQWJzb2x1dGUocGF0aG5hbWUpIHtcbiAgcmV0dXJuIHBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nO1xufVxuXG4vLyBBYm91dCAxLjV4IGZhc3RlciB0aGFuIHRoZSB0d28tYXJnIHZlcnNpb24gb2YgQXJyYXkjc3BsaWNlKClcbmZ1bmN0aW9uIHNwbGljZU9uZShsaXN0LCBpbmRleCkge1xuICBmb3IgKHZhciBpID0gaW5kZXgsIGsgPSBpICsgMSwgbiA9IGxpc3QubGVuZ3RoOyBrIDwgbjsgaSArPSAxLCBrICs9IDEpIHtcbiAgICBsaXN0W2ldID0gbGlzdFtrXTtcbiAgfVxuXG4gIGxpc3QucG9wKCk7XG59XG5cbi8vIFRoaXMgaW1wbGVtZW50YXRpb24gaXMgYmFzZWQgaGVhdmlseSBvbiBub2RlJ3MgdXJsLnBhcnNlXG5mdW5jdGlvbiByZXNvbHZlUGF0aG5hbWUodG8pIHtcbiAgdmFyIGZyb20gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnO1xuXG4gIHZhciB0b1BhcnRzID0gdG8gJiYgdG8uc3BsaXQoJy8nKSB8fCBbXTtcbiAgdmFyIGZyb21QYXJ0cyA9IGZyb20gJiYgZnJvbS5zcGxpdCgnLycpIHx8IFtdO1xuXG4gIHZhciBpc1RvQWJzID0gdG8gJiYgaXNBYnNvbHV0ZSh0byk7XG4gIHZhciBpc0Zyb21BYnMgPSBmcm9tICYmIGlzQWJzb2x1dGUoZnJvbSk7XG4gIHZhciBtdXN0RW5kQWJzID0gaXNUb0FicyB8fCBpc0Zyb21BYnM7XG5cbiAgaWYgKHRvICYmIGlzQWJzb2x1dGUodG8pKSB7XG4gICAgLy8gdG8gaXMgYWJzb2x1dGVcbiAgICBmcm9tUGFydHMgPSB0b1BhcnRzO1xuICB9IGVsc2UgaWYgKHRvUGFydHMubGVuZ3RoKSB7XG4gICAgLy8gdG8gaXMgcmVsYXRpdmUsIGRyb3AgdGhlIGZpbGVuYW1lXG4gICAgZnJvbVBhcnRzLnBvcCgpO1xuICAgIGZyb21QYXJ0cyA9IGZyb21QYXJ0cy5jb25jYXQodG9QYXJ0cyk7XG4gIH1cblxuICBpZiAoIWZyb21QYXJ0cy5sZW5ndGgpIHJldHVybiAnLyc7XG5cbiAgdmFyIGhhc1RyYWlsaW5nU2xhc2ggPSB2b2lkIDA7XG4gIGlmIChmcm9tUGFydHMubGVuZ3RoKSB7XG4gICAgdmFyIGxhc3QgPSBmcm9tUGFydHNbZnJvbVBhcnRzLmxlbmd0aCAtIDFdO1xuICAgIGhhc1RyYWlsaW5nU2xhc2ggPSBsYXN0ID09PSAnLicgfHwgbGFzdCA9PT0gJy4uJyB8fCBsYXN0ID09PSAnJztcbiAgfSBlbHNlIHtcbiAgICBoYXNUcmFpbGluZ1NsYXNoID0gZmFsc2U7XG4gIH1cblxuICB2YXIgdXAgPSAwO1xuICBmb3IgKHZhciBpID0gZnJvbVBhcnRzLmxlbmd0aDsgaSA+PSAwOyBpLS0pIHtcbiAgICB2YXIgcGFydCA9IGZyb21QYXJ0c1tpXTtcblxuICAgIGlmIChwYXJ0ID09PSAnLicpIHtcbiAgICAgIHNwbGljZU9uZShmcm9tUGFydHMsIGkpO1xuICAgIH0gZWxzZSBpZiAocGFydCA9PT0gJy4uJykge1xuICAgICAgc3BsaWNlT25lKGZyb21QYXJ0cywgaSk7XG4gICAgICB1cCsrO1xuICAgIH0gZWxzZSBpZiAodXApIHtcbiAgICAgIHNwbGljZU9uZShmcm9tUGFydHMsIGkpO1xuICAgICAgdXAtLTtcbiAgICB9XG4gIH1cblxuICBpZiAoIW11c3RFbmRBYnMpIGZvciAoOyB1cC0tOyB1cCkge1xuICAgIGZyb21QYXJ0cy51bnNoaWZ0KCcuLicpO1xuICB9aWYgKG11c3RFbmRBYnMgJiYgZnJvbVBhcnRzWzBdICE9PSAnJyAmJiAoIWZyb21QYXJ0c1swXSB8fCAhaXNBYnNvbHV0ZShmcm9tUGFydHNbMF0pKSkgZnJvbVBhcnRzLnVuc2hpZnQoJycpO1xuXG4gIHZhciByZXN1bHQgPSBmcm9tUGFydHMuam9pbignLycpO1xuXG4gIGlmIChoYXNUcmFpbGluZ1NsYXNoICYmIHJlc3VsdC5zdWJzdHIoLTEpICE9PSAnLycpIHJlc3VsdCArPSAnLyc7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChyZXNvbHZlUGF0aG5hbWUpO1xuXG4vKioqLyB9KSxcbi8qIDEwMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3dlYnBhY2tfZXhwb3J0c19fLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuZnVuY3Rpb24gdmFsdWVFcXVhbChhLCBiKSB7XG4gIGlmIChhID09PSBiKSByZXR1cm4gdHJ1ZTtcblxuICBpZiAoYSA9PSBudWxsIHx8IGIgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChBcnJheS5pc0FycmF5KGEpKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYikgJiYgYS5sZW5ndGggPT09IGIubGVuZ3RoICYmIGEuZXZlcnkoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICByZXR1cm4gdmFsdWVFcXVhbChpdGVtLCBiW2luZGV4XSk7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgYVR5cGUgPSB0eXBlb2YgYSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoYSk7XG4gIHZhciBiVHlwZSA9IHR5cGVvZiBiID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihiKTtcblxuICBpZiAoYVR5cGUgIT09IGJUeXBlKSByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKGFUeXBlID09PSAnb2JqZWN0Jykge1xuICAgIHZhciBhVmFsdWUgPSBhLnZhbHVlT2YoKTtcbiAgICB2YXIgYlZhbHVlID0gYi52YWx1ZU9mKCk7XG5cbiAgICBpZiAoYVZhbHVlICE9PSBhIHx8IGJWYWx1ZSAhPT0gYikgcmV0dXJuIHZhbHVlRXF1YWwoYVZhbHVlLCBiVmFsdWUpO1xuXG4gICAgdmFyIGFLZXlzID0gT2JqZWN0LmtleXMoYSk7XG4gICAgdmFyIGJLZXlzID0gT2JqZWN0LmtleXMoYik7XG5cbiAgICBpZiAoYUtleXMubGVuZ3RoICE9PSBiS2V5cy5sZW5ndGgpIHJldHVybiBmYWxzZTtcblxuICAgIHJldHVybiBhS2V5cy5ldmVyeShmdW5jdGlvbiAoa2V5KSB7XG4gICAgICByZXR1cm4gdmFsdWVFcXVhbChhW2tleV0sIGJba2V5XSk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSAodmFsdWVFcXVhbCk7XG5cbi8qKiovIH0pLFxuLyogMTAxICovLFxuLyogMTAyICovLFxuLyogMTAzICovLFxuLyogMTA0ICovLFxuLyogMTA1ICovLFxuLyogMTA2ICovLFxuLyogMTA3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7XG5cbnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblxudmFyIF9pbmhlcml0czIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXG52YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cbnZhciBfc2ltcGxlQXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblxudmFyIF9zaW1wbGVBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2ltcGxlQXNzaWduKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbnZhciBfUGFwZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblxudmFyIF9QYXBlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9QYXBlcik7XG5cbnZhciBfdHJhbnNpdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblxudmFyIF90cmFuc2l0aW9uczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90cmFuc2l0aW9ucyk7XG5cbnZhciBfcHJvcFR5cGVzMyA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXG52YXIgX3Byb3BUeXBlczQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gZ2V0U3R5bGVzKHByb3BzLCBjb250ZXh0LCBzdGF0ZSkge1xuICB2YXIgdGFyZ2V0T3JpZ2luID0gcHJvcHMudGFyZ2V0T3JpZ2luO1xuICB2YXIgb3BlbiA9IHN0YXRlLm9wZW47XG4gIHZhciBtdWlUaGVtZSA9IGNvbnRleHQubXVpVGhlbWU7XG5cbiAgdmFyIGhvcml6b250YWwgPSB0YXJnZXRPcmlnaW4uaG9yaXpvbnRhbC5yZXBsYWNlKCdtaWRkbGUnLCAndmVydGljYWwnKTtcblxuICByZXR1cm4ge1xuICAgIHJvb3Q6IHtcbiAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICAgekluZGV4OiBtdWlUaGVtZS56SW5kZXgucG9wb3ZlcixcbiAgICAgIG9wYWNpdHk6IG9wZW4gPyAxIDogMCxcbiAgICAgIHRyYW5zZm9ybTogb3BlbiA/ICdzY2FsZVkoMSknIDogJ3NjYWxlWSgwKScsXG4gICAgICB0cmFuc2Zvcm1PcmlnaW46IGhvcml6b250YWwgKyAnICcgKyB0YXJnZXRPcmlnaW4udmVydGljYWwsXG4gICAgICB0cmFuc2l0aW9uOiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnNDUwbXMnLCBbJ3RyYW5zZm9ybScsICdvcGFjaXR5J10pLFxuICAgICAgbWF4SGVpZ2h0OiAnMTAwJSdcbiAgICB9XG4gIH07XG59XG5cbnZhciBQb3BvdmVyQW5pbWF0aW9uVmVydGljYWwgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShQb3BvdmVyQW5pbWF0aW9uVmVydGljYWwsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFBvcG92ZXJBbmltYXRpb25WZXJ0aWNhbCgpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBQb3BvdmVyQW5pbWF0aW9uVmVydGljYWwpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChfcmVmID0gUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShQb3BvdmVyQW5pbWF0aW9uVmVydGljYWwpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG9wZW46IGZhbHNlXG4gICAgfSwgX3RlbXApLCAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKFBvcG92ZXJBbmltYXRpb25WZXJ0aWNhbCwgW3tcbiAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IG9wZW46IHRydWUgfSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcmVhY3Qvbm8tZGlkLW1vdW50LXNldC1zdGF0ZVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIG9wZW46IG5leHRQcm9wcy5vcGVuXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBjbGFzc05hbWUgPSBfcHJvcHMuY2xhc3NOYW1lLFxuICAgICAgICAgIHN0eWxlID0gX3Byb3BzLnN0eWxlLFxuICAgICAgICAgIHpEZXB0aCA9IF9wcm9wcy56RGVwdGg7XG5cblxuICAgICAgdmFyIHN0eWxlcyA9IGdldFN0eWxlcyh0aGlzLnByb3BzLCB0aGlzLmNvbnRleHQsIHRoaXMuc3RhdGUpO1xuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgIF9QYXBlcjIuZGVmYXVsdCxcbiAgICAgICAge1xuICAgICAgICAgIHN0eWxlOiAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLnJvb3QsIHN0eWxlKSxcbiAgICAgICAgICB6RGVwdGg6IHpEZXB0aCxcbiAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZVxuICAgICAgICB9LFxuICAgICAgICB0aGlzLnByb3BzLmNoaWxkcmVuXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsO1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsLmRlZmF1bHRQcm9wcyA9IHtcbiAgc3R5bGU6IHt9LFxuICB6RGVwdGg6IDFcbn07XG5Qb3BvdmVyQW5pbWF0aW9uVmVydGljYWwuY29udGV4dFR5cGVzID0ge1xuICBtdWlUaGVtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QuaXNSZXF1aXJlZFxufTtcblBvcG92ZXJBbmltYXRpb25WZXJ0aWNhbC5wcm9wVHlwZXMgPSAgZmFsc2UgPyB7XG4gIGNoaWxkcmVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIGNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIG9wZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbC5pc1JlcXVpcmVkLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIHN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgdGFyZ2V0T3JpZ2luOiBfcHJvcFR5cGVzNC5kZWZhdWx0Lm9yaWdpbi5pc1JlcXVpcmVkLFxuICB6RGVwdGg6IF9wcm9wVHlwZXM0LmRlZmF1bHQuekRlcHRoXG59IDoge307XG5leHBvcnRzLmRlZmF1bHQgPSBQb3BvdmVyQW5pbWF0aW9uVmVydGljYWw7XG5cbi8qKiovIH0pLFxuLyogMTA4ICovLFxuLyogMTA5ICovLFxuLyogMTEwICovLFxuLyogMTExICovLFxuLyogMTEyICovLFxuLyogMTEzICovLFxuLyogMTE0ICovLFxuLyogMTE1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBleHBvcnRzLk1lbnVJdGVtID0gZXhwb3J0cy5Ecm9wRG93bk1lbnUgPSB1bmRlZmluZWQ7XG5cbnZhciBfRHJvcERvd25NZW51MiA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ5KTtcblxudmFyIF9Ecm9wRG93bk1lbnUzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRHJvcERvd25NZW51Mik7XG5cbnZhciBfTWVudUl0ZW0yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OSk7XG5cbnZhciBfTWVudUl0ZW0zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTWVudUl0ZW0yKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZXhwb3J0cy5Ecm9wRG93bk1lbnUgPSBfRHJvcERvd25NZW51My5kZWZhdWx0O1xuZXhwb3J0cy5NZW51SXRlbSA9IF9NZW51SXRlbTMuZGVmYXVsdDtcbmV4cG9ydHMuZGVmYXVsdCA9IF9Ecm9wRG93bk1lbnUzLmRlZmF1bHQ7XG5cbi8qKiovIH0pLFxuLyogMTE2ICovLFxuLyogMTE3ICovLFxuLyogMTE4ICovLFxuLyogMTE5ICovLFxuLyogMTIwICovLFxuLyogMTIxICovLFxuLyogMTIyICovLFxuLyogMTIzICovLFxuLyogMTI0ICovLFxuLyogMTI1ICovLFxuLyogMTI2ICovLFxuLyogMTI3ICovLFxuLyogMTI4ICovLFxuLyogMTI5ICovLFxuLyogMTMwICovLFxuLyogMTMxICovLFxuLyogMTMyICovLFxuLyogMTMzICovLFxuLyogMTM0ICovLFxuLyogMTM1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF93YXJuaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cbnZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblxudmFyIF9pbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblxudmFyIF9pbnZhcmlhbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW52YXJpYW50KTtcblxudmFyIF9Mb2NhdGlvblV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7XG5cbnZhciBfUGF0aFV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSk7XG5cbnZhciBfY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblxudmFyIF9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcik7XG5cbnZhciBfRE9NVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg2KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIFBvcFN0YXRlRXZlbnQgPSAncG9wc3RhdGUnO1xudmFyIEhhc2hDaGFuZ2VFdmVudCA9ICdoYXNoY2hhbmdlJztcblxudmFyIGdldEhpc3RvcnlTdGF0ZSA9IGZ1bmN0aW9uIGdldEhpc3RvcnlTdGF0ZSgpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gd2luZG93Lmhpc3Rvcnkuc3RhdGUgfHwge307XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBJRSAxMSBzb21ldGltZXMgdGhyb3dzIHdoZW4gYWNjZXNzaW5nIHdpbmRvdy5oaXN0b3J5LnN0YXRlXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9SZWFjdFRyYWluaW5nL2hpc3RvcnkvcHVsbC8yODlcbiAgICByZXR1cm4ge307XG4gIH1cbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIGhpc3Rvcnkgb2JqZWN0IHRoYXQgdXNlcyB0aGUgSFRNTDUgaGlzdG9yeSBBUEkgaW5jbHVkaW5nXG4gKiBwdXNoU3RhdGUsIHJlcGxhY2VTdGF0ZSwgYW5kIHRoZSBwb3BzdGF0ZSBldmVudC5cbiAqL1xudmFyIGNyZWF0ZUJyb3dzZXJIaXN0b3J5ID0gZnVuY3Rpb24gY3JlYXRlQnJvd3Nlckhpc3RvcnkoKSB7XG4gIHZhciBwcm9wcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgKDAsIF9pbnZhcmlhbnQyLmRlZmF1bHQpKF9ET01VdGlscy5jYW5Vc2VET00sICdCcm93c2VyIGhpc3RvcnkgbmVlZHMgYSBET00nKTtcblxuICB2YXIgZ2xvYmFsSGlzdG9yeSA9IHdpbmRvdy5oaXN0b3J5O1xuICB2YXIgY2FuVXNlSGlzdG9yeSA9ICgwLCBfRE9NVXRpbHMuc3VwcG9ydHNIaXN0b3J5KSgpO1xuICB2YXIgbmVlZHNIYXNoQ2hhbmdlTGlzdGVuZXIgPSAhKDAsIF9ET01VdGlscy5zdXBwb3J0c1BvcFN0YXRlT25IYXNoQ2hhbmdlKSgpO1xuXG4gIHZhciBfcHJvcHMkZm9yY2VSZWZyZXNoID0gcHJvcHMuZm9yY2VSZWZyZXNoLFxuICAgICAgZm9yY2VSZWZyZXNoID0gX3Byb3BzJGZvcmNlUmVmcmVzaCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcHJvcHMkZm9yY2VSZWZyZXNoLFxuICAgICAgX3Byb3BzJGdldFVzZXJDb25maXJtID0gcHJvcHMuZ2V0VXNlckNvbmZpcm1hdGlvbixcbiAgICAgIGdldFVzZXJDb25maXJtYXRpb24gPSBfcHJvcHMkZ2V0VXNlckNvbmZpcm0gPT09IHVuZGVmaW5lZCA/IF9ET01VdGlscy5nZXRDb25maXJtYXRpb24gOiBfcHJvcHMkZ2V0VXNlckNvbmZpcm0sXG4gICAgICBfcHJvcHMka2V5TGVuZ3RoID0gcHJvcHMua2V5TGVuZ3RoLFxuICAgICAga2V5TGVuZ3RoID0gX3Byb3BzJGtleUxlbmd0aCA9PT0gdW5kZWZpbmVkID8gNiA6IF9wcm9wcyRrZXlMZW5ndGg7XG5cbiAgdmFyIGJhc2VuYW1lID0gcHJvcHMuYmFzZW5hbWUgPyAoMCwgX1BhdGhVdGlscy5zdHJpcFRyYWlsaW5nU2xhc2gpKCgwLCBfUGF0aFV0aWxzLmFkZExlYWRpbmdTbGFzaCkocHJvcHMuYmFzZW5hbWUpKSA6ICcnO1xuXG4gIHZhciBnZXRET01Mb2NhdGlvbiA9IGZ1bmN0aW9uIGdldERPTUxvY2F0aW9uKGhpc3RvcnlTdGF0ZSkge1xuICAgIHZhciBfcmVmID0gaGlzdG9yeVN0YXRlIHx8IHt9LFxuICAgICAgICBrZXkgPSBfcmVmLmtleSxcbiAgICAgICAgc3RhdGUgPSBfcmVmLnN0YXRlO1xuXG4gICAgdmFyIF93aW5kb3ckbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24sXG4gICAgICAgIHBhdGhuYW1lID0gX3dpbmRvdyRsb2NhdGlvbi5wYXRobmFtZSxcbiAgICAgICAgc2VhcmNoID0gX3dpbmRvdyRsb2NhdGlvbi5zZWFyY2gsXG4gICAgICAgIGhhc2ggPSBfd2luZG93JGxvY2F0aW9uLmhhc2g7XG5cblxuICAgIHZhciBwYXRoID0gcGF0aG5hbWUgKyBzZWFyY2ggKyBoYXNoO1xuXG4gICAgKDAsIF93YXJuaW5nMi5kZWZhdWx0KSghYmFzZW5hbWUgfHwgKDAsIF9QYXRoVXRpbHMuaGFzQmFzZW5hbWUpKHBhdGgsIGJhc2VuYW1lKSwgJ1lvdSBhcmUgYXR0ZW1wdGluZyB0byB1c2UgYSBiYXNlbmFtZSBvbiBhIHBhZ2Ugd2hvc2UgVVJMIHBhdGggZG9lcyBub3QgYmVnaW4gJyArICd3aXRoIHRoZSBiYXNlbmFtZS4gRXhwZWN0ZWQgcGF0aCBcIicgKyBwYXRoICsgJ1wiIHRvIGJlZ2luIHdpdGggXCInICsgYmFzZW5hbWUgKyAnXCIuJyk7XG5cbiAgICBpZiAoYmFzZW5hbWUpIHBhdGggPSAoMCwgX1BhdGhVdGlscy5zdHJpcEJhc2VuYW1lKShwYXRoLCBiYXNlbmFtZSk7XG5cbiAgICByZXR1cm4gKDAsIF9Mb2NhdGlvblV0aWxzLmNyZWF0ZUxvY2F0aW9uKShwYXRoLCBzdGF0ZSwga2V5KTtcbiAgfTtcblxuICB2YXIgY3JlYXRlS2V5ID0gZnVuY3Rpb24gY3JlYXRlS2V5KCkge1xuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwga2V5TGVuZ3RoKTtcbiAgfTtcblxuICB2YXIgdHJhbnNpdGlvbk1hbmFnZXIgPSAoMCwgX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyMi5kZWZhdWx0KSgpO1xuXG4gIHZhciBzZXRTdGF0ZSA9IGZ1bmN0aW9uIHNldFN0YXRlKG5leHRTdGF0ZSkge1xuICAgIF9leHRlbmRzKGhpc3RvcnksIG5leHRTdGF0ZSk7XG5cbiAgICBoaXN0b3J5Lmxlbmd0aCA9IGdsb2JhbEhpc3RvcnkubGVuZ3RoO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIubm90aWZ5TGlzdGVuZXJzKGhpc3RvcnkubG9jYXRpb24sIGhpc3RvcnkuYWN0aW9uKTtcbiAgfTtcblxuICB2YXIgaGFuZGxlUG9wU3RhdGUgPSBmdW5jdGlvbiBoYW5kbGVQb3BTdGF0ZShldmVudCkge1xuICAgIC8vIElnbm9yZSBleHRyYW5lb3VzIHBvcHN0YXRlIGV2ZW50cyBpbiBXZWJLaXQuXG4gICAgaWYgKCgwLCBfRE9NVXRpbHMuaXNFeHRyYW5lb3VzUG9wc3RhdGVFdmVudCkoZXZlbnQpKSByZXR1cm47XG5cbiAgICBoYW5kbGVQb3AoZ2V0RE9NTG9jYXRpb24oZXZlbnQuc3RhdGUpKTtcbiAgfTtcblxuICB2YXIgaGFuZGxlSGFzaENoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZUhhc2hDaGFuZ2UoKSB7XG4gICAgaGFuZGxlUG9wKGdldERPTUxvY2F0aW9uKGdldEhpc3RvcnlTdGF0ZSgpKSk7XG4gIH07XG5cbiAgdmFyIGZvcmNlTmV4dFBvcCA9IGZhbHNlO1xuXG4gIHZhciBoYW5kbGVQb3AgPSBmdW5jdGlvbiBoYW5kbGVQb3AobG9jYXRpb24pIHtcbiAgICBpZiAoZm9yY2VOZXh0UG9wKSB7XG4gICAgICBmb3JjZU5leHRQb3AgPSBmYWxzZTtcbiAgICAgIHNldFN0YXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhY3Rpb24gPSAnUE9QJztcblxuICAgICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgICAgaWYgKG9rKSB7XG4gICAgICAgICAgc2V0U3RhdGUoeyBhY3Rpb246IGFjdGlvbiwgbG9jYXRpb246IGxvY2F0aW9uIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldmVydFBvcChsb2NhdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICB2YXIgcmV2ZXJ0UG9wID0gZnVuY3Rpb24gcmV2ZXJ0UG9wKGZyb21Mb2NhdGlvbikge1xuICAgIHZhciB0b0xvY2F0aW9uID0gaGlzdG9yeS5sb2NhdGlvbjtcblxuICAgIC8vIFRPRE86IFdlIGNvdWxkIHByb2JhYmx5IG1ha2UgdGhpcyBtb3JlIHJlbGlhYmxlIGJ5XG4gICAgLy8ga2VlcGluZyBhIGxpc3Qgb2Yga2V5cyB3ZSd2ZSBzZWVuIGluIHNlc3Npb25TdG9yYWdlLlxuICAgIC8vIEluc3RlYWQsIHdlIGp1c3QgZGVmYXVsdCB0byAwIGZvciBrZXlzIHdlIGRvbid0IGtub3cuXG5cbiAgICB2YXIgdG9JbmRleCA9IGFsbEtleXMuaW5kZXhPZih0b0xvY2F0aW9uLmtleSk7XG5cbiAgICBpZiAodG9JbmRleCA9PT0gLTEpIHRvSW5kZXggPSAwO1xuXG4gICAgdmFyIGZyb21JbmRleCA9IGFsbEtleXMuaW5kZXhPZihmcm9tTG9jYXRpb24ua2V5KTtcblxuICAgIGlmIChmcm9tSW5kZXggPT09IC0xKSBmcm9tSW5kZXggPSAwO1xuXG4gICAgdmFyIGRlbHRhID0gdG9JbmRleCAtIGZyb21JbmRleDtcblxuICAgIGlmIChkZWx0YSkge1xuICAgICAgZm9yY2VOZXh0UG9wID0gdHJ1ZTtcbiAgICAgIGdvKGRlbHRhKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGluaXRpYWxMb2NhdGlvbiA9IGdldERPTUxvY2F0aW9uKGdldEhpc3RvcnlTdGF0ZSgpKTtcbiAgdmFyIGFsbEtleXMgPSBbaW5pdGlhbExvY2F0aW9uLmtleV07XG5cbiAgLy8gUHVibGljIGludGVyZmFjZVxuXG4gIHZhciBjcmVhdGVIcmVmID0gZnVuY3Rpb24gY3JlYXRlSHJlZihsb2NhdGlvbikge1xuICAgIHJldHVybiBiYXNlbmFtZSArICgwLCBfUGF0aFV0aWxzLmNyZWF0ZVBhdGgpKGxvY2F0aW9uKTtcbiAgfTtcblxuICB2YXIgcHVzaCA9IGZ1bmN0aW9uIHB1c2gocGF0aCwgc3RhdGUpIHtcbiAgICAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKCEoKHR5cGVvZiBwYXRoID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihwYXRoKSkgPT09ICdvYmplY3QnICYmIHBhdGguc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBzdGF0ZSAhPT0gdW5kZWZpbmVkKSwgJ1lvdSBzaG91bGQgYXZvaWQgcHJvdmlkaW5nIGEgMm5kIHN0YXRlIGFyZ3VtZW50IHRvIHB1c2ggd2hlbiB0aGUgMXN0ICcgKyAnYXJndW1lbnQgaXMgYSBsb2NhdGlvbi1saWtlIG9iamVjdCB0aGF0IGFscmVhZHkgaGFzIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7XG5cbiAgICB2YXIgYWN0aW9uID0gJ1BVU0gnO1xuICAgIHZhciBsb2NhdGlvbiA9ICgwLCBfTG9jYXRpb25VdGlscy5jcmVhdGVMb2NhdGlvbikocGF0aCwgc3RhdGUsIGNyZWF0ZUtleSgpLCBoaXN0b3J5LmxvY2F0aW9uKTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG5cbiAgICAgIHZhciBocmVmID0gY3JlYXRlSHJlZihsb2NhdGlvbik7XG4gICAgICB2YXIga2V5ID0gbG9jYXRpb24ua2V5LFxuICAgICAgICAgIHN0YXRlID0gbG9jYXRpb24uc3RhdGU7XG5cblxuICAgICAgaWYgKGNhblVzZUhpc3RvcnkpIHtcbiAgICAgICAgZ2xvYmFsSGlzdG9yeS5wdXNoU3RhdGUoeyBrZXk6IGtleSwgc3RhdGU6IHN0YXRlIH0sIG51bGwsIGhyZWYpO1xuXG4gICAgICAgIGlmIChmb3JjZVJlZnJlc2gpIHtcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhyZWY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHByZXZJbmRleCA9IGFsbEtleXMuaW5kZXhPZihoaXN0b3J5LmxvY2F0aW9uLmtleSk7XG4gICAgICAgICAgdmFyIG5leHRLZXlzID0gYWxsS2V5cy5zbGljZSgwLCBwcmV2SW5kZXggPT09IC0xID8gMCA6IHByZXZJbmRleCArIDEpO1xuXG4gICAgICAgICAgbmV4dEtleXMucHVzaChsb2NhdGlvbi5rZXkpO1xuICAgICAgICAgIGFsbEtleXMgPSBuZXh0S2V5cztcblxuICAgICAgICAgIHNldFN0YXRlKHsgYWN0aW9uOiBhY3Rpb24sIGxvY2F0aW9uOiBsb2NhdGlvbiB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKDAsIF93YXJuaW5nMi5kZWZhdWx0KShzdGF0ZSA9PT0gdW5kZWZpbmVkLCAnQnJvd3NlciBoaXN0b3J5IGNhbm5vdCBwdXNoIHN0YXRlIGluIGJyb3dzZXJzIHRoYXQgZG8gbm90IHN1cHBvcnQgSFRNTDUgaGlzdG9yeScpO1xuXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICB2YXIgcmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UocGF0aCwgc3RhdGUpIHtcbiAgICAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKCEoKHR5cGVvZiBwYXRoID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihwYXRoKSkgPT09ICdvYmplY3QnICYmIHBhdGguc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBzdGF0ZSAhPT0gdW5kZWZpbmVkKSwgJ1lvdSBzaG91bGQgYXZvaWQgcHJvdmlkaW5nIGEgMm5kIHN0YXRlIGFyZ3VtZW50IHRvIHJlcGxhY2Ugd2hlbiB0aGUgMXN0ICcgKyAnYXJndW1lbnQgaXMgYSBsb2NhdGlvbi1saWtlIG9iamVjdCB0aGF0IGFscmVhZHkgaGFzIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7XG5cbiAgICB2YXIgYWN0aW9uID0gJ1JFUExBQ0UnO1xuICAgIHZhciBsb2NhdGlvbiA9ICgwLCBfTG9jYXRpb25VdGlscy5jcmVhdGVMb2NhdGlvbikocGF0aCwgc3RhdGUsIGNyZWF0ZUtleSgpLCBoaXN0b3J5LmxvY2F0aW9uKTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG5cbiAgICAgIHZhciBocmVmID0gY3JlYXRlSHJlZihsb2NhdGlvbik7XG4gICAgICB2YXIga2V5ID0gbG9jYXRpb24ua2V5LFxuICAgICAgICAgIHN0YXRlID0gbG9jYXRpb24uc3RhdGU7XG5cblxuICAgICAgaWYgKGNhblVzZUhpc3RvcnkpIHtcbiAgICAgICAgZ2xvYmFsSGlzdG9yeS5yZXBsYWNlU3RhdGUoeyBrZXk6IGtleSwgc3RhdGU6IHN0YXRlIH0sIG51bGwsIGhyZWYpO1xuXG4gICAgICAgIGlmIChmb3JjZVJlZnJlc2gpIHtcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShocmVmKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgcHJldkluZGV4ID0gYWxsS2V5cy5pbmRleE9mKGhpc3RvcnkubG9jYXRpb24ua2V5KTtcblxuICAgICAgICAgIGlmIChwcmV2SW5kZXggIT09IC0xKSBhbGxLZXlzW3ByZXZJbmRleF0gPSBsb2NhdGlvbi5rZXk7XG5cbiAgICAgICAgICBzZXRTdGF0ZSh7IGFjdGlvbjogYWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24gfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkoc3RhdGUgPT09IHVuZGVmaW5lZCwgJ0Jyb3dzZXIgaGlzdG9yeSBjYW5ub3QgcmVwbGFjZSBzdGF0ZSBpbiBicm93c2VycyB0aGF0IGRvIG5vdCBzdXBwb3J0IEhUTUw1IGhpc3RvcnknKTtcblxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShocmVmKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICB2YXIgZ28gPSBmdW5jdGlvbiBnbyhuKSB7XG4gICAgZ2xvYmFsSGlzdG9yeS5nbyhuKTtcbiAgfTtcblxuICB2YXIgZ29CYWNrID0gZnVuY3Rpb24gZ29CYWNrKCkge1xuICAgIHJldHVybiBnbygtMSk7XG4gIH07XG5cbiAgdmFyIGdvRm9yd2FyZCA9IGZ1bmN0aW9uIGdvRm9yd2FyZCgpIHtcbiAgICByZXR1cm4gZ28oMSk7XG4gIH07XG5cbiAgdmFyIGxpc3RlbmVyQ291bnQgPSAwO1xuXG4gIHZhciBjaGVja0RPTUxpc3RlbmVycyA9IGZ1bmN0aW9uIGNoZWNrRE9NTGlzdGVuZXJzKGRlbHRhKSB7XG4gICAgbGlzdGVuZXJDb3VudCArPSBkZWx0YTtcblxuICAgIGlmIChsaXN0ZW5lckNvdW50ID09PSAxKSB7XG4gICAgICAoMCwgX0RPTVV0aWxzLmFkZEV2ZW50TGlzdGVuZXIpKHdpbmRvdywgUG9wU3RhdGVFdmVudCwgaGFuZGxlUG9wU3RhdGUpO1xuXG4gICAgICBpZiAobmVlZHNIYXNoQ2hhbmdlTGlzdGVuZXIpICgwLCBfRE9NVXRpbHMuYWRkRXZlbnRMaXN0ZW5lcikod2luZG93LCBIYXNoQ2hhbmdlRXZlbnQsIGhhbmRsZUhhc2hDaGFuZ2UpO1xuICAgIH0gZWxzZSBpZiAobGlzdGVuZXJDb3VudCA9PT0gMCkge1xuICAgICAgKDAsIF9ET01VdGlscy5yZW1vdmVFdmVudExpc3RlbmVyKSh3aW5kb3csIFBvcFN0YXRlRXZlbnQsIGhhbmRsZVBvcFN0YXRlKTtcblxuICAgICAgaWYgKG5lZWRzSGFzaENoYW5nZUxpc3RlbmVyKSAoMCwgX0RPTVV0aWxzLnJlbW92ZUV2ZW50TGlzdGVuZXIpKHdpbmRvdywgSGFzaENoYW5nZUV2ZW50LCBoYW5kbGVIYXNoQ2hhbmdlKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGlzQmxvY2tlZCA9IGZhbHNlO1xuXG4gIHZhciBibG9jayA9IGZ1bmN0aW9uIGJsb2NrKCkge1xuICAgIHZhciBwcm9tcHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlO1xuXG4gICAgdmFyIHVuYmxvY2sgPSB0cmFuc2l0aW9uTWFuYWdlci5zZXRQcm9tcHQocHJvbXB0KTtcblxuICAgIGlmICghaXNCbG9ja2VkKSB7XG4gICAgICBjaGVja0RPTUxpc3RlbmVycygxKTtcbiAgICAgIGlzQmxvY2tlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChpc0Jsb2NrZWQpIHtcbiAgICAgICAgaXNCbG9ja2VkID0gZmFsc2U7XG4gICAgICAgIGNoZWNrRE9NTGlzdGVuZXJzKC0xKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHVuYmxvY2soKTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBsaXN0ZW4gPSBmdW5jdGlvbiBsaXN0ZW4obGlzdGVuZXIpIHtcbiAgICB2YXIgdW5saXN0ZW4gPSB0cmFuc2l0aW9uTWFuYWdlci5hcHBlbmRMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgY2hlY2tET01MaXN0ZW5lcnMoMSk7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgY2hlY2tET01MaXN0ZW5lcnMoLTEpO1xuICAgICAgdW5saXN0ZW4oKTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBoaXN0b3J5ID0ge1xuICAgIGxlbmd0aDogZ2xvYmFsSGlzdG9yeS5sZW5ndGgsXG4gICAgYWN0aW9uOiAnUE9QJyxcbiAgICBsb2NhdGlvbjogaW5pdGlhbExvY2F0aW9uLFxuICAgIGNyZWF0ZUhyZWY6IGNyZWF0ZUhyZWYsXG4gICAgcHVzaDogcHVzaCxcbiAgICByZXBsYWNlOiByZXBsYWNlLFxuICAgIGdvOiBnbyxcbiAgICBnb0JhY2s6IGdvQmFjayxcbiAgICBnb0ZvcndhcmQ6IGdvRm9yd2FyZCxcbiAgICBibG9jazogYmxvY2ssXG4gICAgbGlzdGVuOiBsaXN0ZW5cbiAgfTtcblxuICByZXR1cm4gaGlzdG9yeTtcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGNyZWF0ZUJyb3dzZXJIaXN0b3J5O1xuXG4vKioqLyB9KSxcbi8qIDEzNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX3dhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG52YXIgX2ludmFyaWFudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXG52YXIgX2ludmFyaWFudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbnZhcmlhbnQpO1xuXG52YXIgX0xvY2F0aW9uVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KTtcblxudmFyIF9QYXRoVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTtcblxudmFyIF9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXG52YXIgX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyKTtcblxudmFyIF9ET01VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oODYpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgSGFzaENoYW5nZUV2ZW50ID0gJ2hhc2hjaGFuZ2UnO1xuXG52YXIgSGFzaFBhdGhDb2RlcnMgPSB7XG4gIGhhc2hiYW5nOiB7XG4gICAgZW5jb2RlUGF0aDogZnVuY3Rpb24gZW5jb2RlUGF0aChwYXRoKSB7XG4gICAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICchJyA/IHBhdGggOiAnIS8nICsgKDAsIF9QYXRoVXRpbHMuc3RyaXBMZWFkaW5nU2xhc2gpKHBhdGgpO1xuICAgIH0sXG4gICAgZGVjb2RlUGF0aDogZnVuY3Rpb24gZGVjb2RlUGF0aChwYXRoKSB7XG4gICAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICchJyA/IHBhdGguc3Vic3RyKDEpIDogcGF0aDtcbiAgICB9XG4gIH0sXG4gIG5vc2xhc2g6IHtcbiAgICBlbmNvZGVQYXRoOiBfUGF0aFV0aWxzLnN0cmlwTGVhZGluZ1NsYXNoLFxuICAgIGRlY29kZVBhdGg6IF9QYXRoVXRpbHMuYWRkTGVhZGluZ1NsYXNoXG4gIH0sXG4gIHNsYXNoOiB7XG4gICAgZW5jb2RlUGF0aDogX1BhdGhVdGlscy5hZGRMZWFkaW5nU2xhc2gsXG4gICAgZGVjb2RlUGF0aDogX1BhdGhVdGlscy5hZGRMZWFkaW5nU2xhc2hcbiAgfVxufTtcblxudmFyIGdldEhhc2hQYXRoID0gZnVuY3Rpb24gZ2V0SGFzaFBhdGgoKSB7XG4gIC8vIFdlIGNhbid0IHVzZSB3aW5kb3cubG9jYXRpb24uaGFzaCBoZXJlIGJlY2F1c2UgaXQncyBub3RcbiAgLy8gY29uc2lzdGVudCBhY3Jvc3MgYnJvd3NlcnMgLSBGaXJlZm94IHdpbGwgcHJlLWRlY29kZSBpdCFcbiAgdmFyIGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgdmFyIGhhc2hJbmRleCA9IGhyZWYuaW5kZXhPZignIycpO1xuICByZXR1cm4gaGFzaEluZGV4ID09PSAtMSA/ICcnIDogaHJlZi5zdWJzdHJpbmcoaGFzaEluZGV4ICsgMSk7XG59O1xuXG52YXIgcHVzaEhhc2hQYXRoID0gZnVuY3Rpb24gcHVzaEhhc2hQYXRoKHBhdGgpIHtcbiAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gcGF0aDtcbn07XG5cbnZhciByZXBsYWNlSGFzaFBhdGggPSBmdW5jdGlvbiByZXBsYWNlSGFzaFBhdGgocGF0aCkge1xuICB2YXIgaGFzaEluZGV4ID0gd2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZignIycpO1xuXG4gIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNsaWNlKDAsIGhhc2hJbmRleCA+PSAwID8gaGFzaEluZGV4IDogMCkgKyAnIycgKyBwYXRoKTtcbn07XG5cbnZhciBjcmVhdGVIYXNoSGlzdG9yeSA9IGZ1bmN0aW9uIGNyZWF0ZUhhc2hIaXN0b3J5KCkge1xuICB2YXIgcHJvcHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gICgwLCBfaW52YXJpYW50Mi5kZWZhdWx0KShfRE9NVXRpbHMuY2FuVXNlRE9NLCAnSGFzaCBoaXN0b3J5IG5lZWRzIGEgRE9NJyk7XG5cbiAgdmFyIGdsb2JhbEhpc3RvcnkgPSB3aW5kb3cuaGlzdG9yeTtcbiAgdmFyIGNhbkdvV2l0aG91dFJlbG9hZCA9ICgwLCBfRE9NVXRpbHMuc3VwcG9ydHNHb1dpdGhvdXRSZWxvYWRVc2luZ0hhc2gpKCk7XG5cbiAgdmFyIF9wcm9wcyRnZXRVc2VyQ29uZmlybSA9IHByb3BzLmdldFVzZXJDb25maXJtYXRpb24sXG4gICAgICBnZXRVc2VyQ29uZmlybWF0aW9uID0gX3Byb3BzJGdldFVzZXJDb25maXJtID09PSB1bmRlZmluZWQgPyBfRE9NVXRpbHMuZ2V0Q29uZmlybWF0aW9uIDogX3Byb3BzJGdldFVzZXJDb25maXJtLFxuICAgICAgX3Byb3BzJGhhc2hUeXBlID0gcHJvcHMuaGFzaFR5cGUsXG4gICAgICBoYXNoVHlwZSA9IF9wcm9wcyRoYXNoVHlwZSA9PT0gdW5kZWZpbmVkID8gJ3NsYXNoJyA6IF9wcm9wcyRoYXNoVHlwZTtcblxuICB2YXIgYmFzZW5hbWUgPSBwcm9wcy5iYXNlbmFtZSA/ICgwLCBfUGF0aFV0aWxzLnN0cmlwVHJhaWxpbmdTbGFzaCkoKDAsIF9QYXRoVXRpbHMuYWRkTGVhZGluZ1NsYXNoKShwcm9wcy5iYXNlbmFtZSkpIDogJyc7XG5cbiAgdmFyIF9IYXNoUGF0aENvZGVycyRoYXNoVCA9IEhhc2hQYXRoQ29kZXJzW2hhc2hUeXBlXSxcbiAgICAgIGVuY29kZVBhdGggPSBfSGFzaFBhdGhDb2RlcnMkaGFzaFQuZW5jb2RlUGF0aCxcbiAgICAgIGRlY29kZVBhdGggPSBfSGFzaFBhdGhDb2RlcnMkaGFzaFQuZGVjb2RlUGF0aDtcblxuXG4gIHZhciBnZXRET01Mb2NhdGlvbiA9IGZ1bmN0aW9uIGdldERPTUxvY2F0aW9uKCkge1xuICAgIHZhciBwYXRoID0gZGVjb2RlUGF0aChnZXRIYXNoUGF0aCgpKTtcblxuICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkoIWJhc2VuYW1lIHx8ICgwLCBfUGF0aFV0aWxzLmhhc0Jhc2VuYW1lKShwYXRoLCBiYXNlbmFtZSksICdZb3UgYXJlIGF0dGVtcHRpbmcgdG8gdXNlIGEgYmFzZW5hbWUgb24gYSBwYWdlIHdob3NlIFVSTCBwYXRoIGRvZXMgbm90IGJlZ2luICcgKyAnd2l0aCB0aGUgYmFzZW5hbWUuIEV4cGVjdGVkIHBhdGggXCInICsgcGF0aCArICdcIiB0byBiZWdpbiB3aXRoIFwiJyArIGJhc2VuYW1lICsgJ1wiLicpO1xuXG4gICAgaWYgKGJhc2VuYW1lKSBwYXRoID0gKDAsIF9QYXRoVXRpbHMuc3RyaXBCYXNlbmFtZSkocGF0aCwgYmFzZW5hbWUpO1xuXG4gICAgcmV0dXJuICgwLCBfTG9jYXRpb25VdGlscy5jcmVhdGVMb2NhdGlvbikocGF0aCk7XG4gIH07XG5cbiAgdmFyIHRyYW5zaXRpb25NYW5hZ2VyID0gKDAsIF9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcjIuZGVmYXVsdCkoKTtcblxuICB2YXIgc2V0U3RhdGUgPSBmdW5jdGlvbiBzZXRTdGF0ZShuZXh0U3RhdGUpIHtcbiAgICBfZXh0ZW5kcyhoaXN0b3J5LCBuZXh0U3RhdGUpO1xuXG4gICAgaGlzdG9yeS5sZW5ndGggPSBnbG9iYWxIaXN0b3J5Lmxlbmd0aDtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLm5vdGlmeUxpc3RlbmVycyhoaXN0b3J5LmxvY2F0aW9uLCBoaXN0b3J5LmFjdGlvbik7XG4gIH07XG5cbiAgdmFyIGZvcmNlTmV4dFBvcCA9IGZhbHNlO1xuICB2YXIgaWdub3JlUGF0aCA9IG51bGw7XG5cbiAgdmFyIGhhbmRsZUhhc2hDaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVIYXNoQ2hhbmdlKCkge1xuICAgIHZhciBwYXRoID0gZ2V0SGFzaFBhdGgoKTtcbiAgICB2YXIgZW5jb2RlZFBhdGggPSBlbmNvZGVQYXRoKHBhdGgpO1xuXG4gICAgaWYgKHBhdGggIT09IGVuY29kZWRQYXRoKSB7XG4gICAgICAvLyBFbnN1cmUgd2UgYWx3YXlzIGhhdmUgYSBwcm9wZXJseS1lbmNvZGVkIGhhc2guXG4gICAgICByZXBsYWNlSGFzaFBhdGgoZW5jb2RlZFBhdGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbG9jYXRpb24gPSBnZXRET01Mb2NhdGlvbigpO1xuICAgICAgdmFyIHByZXZMb2NhdGlvbiA9IGhpc3RvcnkubG9jYXRpb247XG5cbiAgICAgIGlmICghZm9yY2VOZXh0UG9wICYmICgwLCBfTG9jYXRpb25VdGlscy5sb2NhdGlvbnNBcmVFcXVhbCkocHJldkxvY2F0aW9uLCBsb2NhdGlvbikpIHJldHVybjsgLy8gQSBoYXNoY2hhbmdlIGRvZXNuJ3QgYWx3YXlzID09IGxvY2F0aW9uIGNoYW5nZS5cblxuICAgICAgaWYgKGlnbm9yZVBhdGggPT09ICgwLCBfUGF0aFV0aWxzLmNyZWF0ZVBhdGgpKGxvY2F0aW9uKSkgcmV0dXJuOyAvLyBJZ25vcmUgdGhpcyBjaGFuZ2U7IHdlIGFscmVhZHkgc2V0U3RhdGUgaW4gcHVzaC9yZXBsYWNlLlxuXG4gICAgICBpZ25vcmVQYXRoID0gbnVsbDtcblxuICAgICAgaGFuZGxlUG9wKGxvY2F0aW9uKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGhhbmRsZVBvcCA9IGZ1bmN0aW9uIGhhbmRsZVBvcChsb2NhdGlvbikge1xuICAgIGlmIChmb3JjZU5leHRQb3ApIHtcbiAgICAgIGZvcmNlTmV4dFBvcCA9IGZhbHNlO1xuICAgICAgc2V0U3RhdGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGFjdGlvbiA9ICdQT1AnO1xuXG4gICAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgICBpZiAob2spIHtcbiAgICAgICAgICBzZXRTdGF0ZSh7IGFjdGlvbjogYWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24gfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV2ZXJ0UG9wKGxvY2F0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciByZXZlcnRQb3AgPSBmdW5jdGlvbiByZXZlcnRQb3AoZnJvbUxvY2F0aW9uKSB7XG4gICAgdmFyIHRvTG9jYXRpb24gPSBoaXN0b3J5LmxvY2F0aW9uO1xuXG4gICAgLy8gVE9ETzogV2UgY291bGQgcHJvYmFibHkgbWFrZSB0aGlzIG1vcmUgcmVsaWFibGUgYnlcbiAgICAvLyBrZWVwaW5nIGEgbGlzdCBvZiBwYXRocyB3ZSd2ZSBzZWVuIGluIHNlc3Npb25TdG9yYWdlLlxuICAgIC8vIEluc3RlYWQsIHdlIGp1c3QgZGVmYXVsdCB0byAwIGZvciBwYXRocyB3ZSBkb24ndCBrbm93LlxuXG4gICAgdmFyIHRvSW5kZXggPSBhbGxQYXRocy5sYXN0SW5kZXhPZigoMCwgX1BhdGhVdGlscy5jcmVhdGVQYXRoKSh0b0xvY2F0aW9uKSk7XG5cbiAgICBpZiAodG9JbmRleCA9PT0gLTEpIHRvSW5kZXggPSAwO1xuXG4gICAgdmFyIGZyb21JbmRleCA9IGFsbFBhdGhzLmxhc3RJbmRleE9mKCgwLCBfUGF0aFV0aWxzLmNyZWF0ZVBhdGgpKGZyb21Mb2NhdGlvbikpO1xuXG4gICAgaWYgKGZyb21JbmRleCA9PT0gLTEpIGZyb21JbmRleCA9IDA7XG5cbiAgICB2YXIgZGVsdGEgPSB0b0luZGV4IC0gZnJvbUluZGV4O1xuXG4gICAgaWYgKGRlbHRhKSB7XG4gICAgICBmb3JjZU5leHRQb3AgPSB0cnVlO1xuICAgICAgZ28oZGVsdGEpO1xuICAgIH1cbiAgfTtcblxuICAvLyBFbnN1cmUgdGhlIGhhc2ggaXMgZW5jb2RlZCBwcm9wZXJseSBiZWZvcmUgZG9pbmcgYW55dGhpbmcgZWxzZS5cbiAgdmFyIHBhdGggPSBnZXRIYXNoUGF0aCgpO1xuICB2YXIgZW5jb2RlZFBhdGggPSBlbmNvZGVQYXRoKHBhdGgpO1xuXG4gIGlmIChwYXRoICE9PSBlbmNvZGVkUGF0aCkgcmVwbGFjZUhhc2hQYXRoKGVuY29kZWRQYXRoKTtcblxuICB2YXIgaW5pdGlhbExvY2F0aW9uID0gZ2V0RE9NTG9jYXRpb24oKTtcbiAgdmFyIGFsbFBhdGhzID0gWygwLCBfUGF0aFV0aWxzLmNyZWF0ZVBhdGgpKGluaXRpYWxMb2NhdGlvbildO1xuXG4gIC8vIFB1YmxpYyBpbnRlcmZhY2VcblxuICB2YXIgY3JlYXRlSHJlZiA9IGZ1bmN0aW9uIGNyZWF0ZUhyZWYobG9jYXRpb24pIHtcbiAgICByZXR1cm4gJyMnICsgZW5jb2RlUGF0aChiYXNlbmFtZSArICgwLCBfUGF0aFV0aWxzLmNyZWF0ZVBhdGgpKGxvY2F0aW9uKSk7XG4gIH07XG5cbiAgdmFyIHB1c2ggPSBmdW5jdGlvbiBwdXNoKHBhdGgsIHN0YXRlKSB7XG4gICAgKDAsIF93YXJuaW5nMi5kZWZhdWx0KShzdGF0ZSA9PT0gdW5kZWZpbmVkLCAnSGFzaCBoaXN0b3J5IGNhbm5vdCBwdXNoIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7XG5cbiAgICB2YXIgYWN0aW9uID0gJ1BVU0gnO1xuICAgIHZhciBsb2NhdGlvbiA9ICgwLCBfTG9jYXRpb25VdGlscy5jcmVhdGVMb2NhdGlvbikocGF0aCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGhpc3RvcnkubG9jYXRpb24pO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmICghb2spIHJldHVybjtcblxuICAgICAgdmFyIHBhdGggPSAoMCwgX1BhdGhVdGlscy5jcmVhdGVQYXRoKShsb2NhdGlvbik7XG4gICAgICB2YXIgZW5jb2RlZFBhdGggPSBlbmNvZGVQYXRoKGJhc2VuYW1lICsgcGF0aCk7XG4gICAgICB2YXIgaGFzaENoYW5nZWQgPSBnZXRIYXNoUGF0aCgpICE9PSBlbmNvZGVkUGF0aDtcblxuICAgICAgaWYgKGhhc2hDaGFuZ2VkKSB7XG4gICAgICAgIC8vIFdlIGNhbm5vdCB0ZWxsIGlmIGEgaGFzaGNoYW5nZSB3YXMgY2F1c2VkIGJ5IGEgUFVTSCwgc28gd2UnZFxuICAgICAgICAvLyByYXRoZXIgc2V0U3RhdGUgaGVyZSBhbmQgaWdub3JlIHRoZSBoYXNoY2hhbmdlLiBUaGUgY2F2ZWF0IGhlcmVcbiAgICAgICAgLy8gaXMgdGhhdCBvdGhlciBoYXNoIGhpc3RvcmllcyBpbiB0aGUgcGFnZSB3aWxsIGNvbnNpZGVyIGl0IGEgUE9QLlxuICAgICAgICBpZ25vcmVQYXRoID0gcGF0aDtcbiAgICAgICAgcHVzaEhhc2hQYXRoKGVuY29kZWRQYXRoKTtcblxuICAgICAgICB2YXIgcHJldkluZGV4ID0gYWxsUGF0aHMubGFzdEluZGV4T2YoKDAsIF9QYXRoVXRpbHMuY3JlYXRlUGF0aCkoaGlzdG9yeS5sb2NhdGlvbikpO1xuICAgICAgICB2YXIgbmV4dFBhdGhzID0gYWxsUGF0aHMuc2xpY2UoMCwgcHJldkluZGV4ID09PSAtMSA/IDAgOiBwcmV2SW5kZXggKyAxKTtcblxuICAgICAgICBuZXh0UGF0aHMucHVzaChwYXRoKTtcbiAgICAgICAgYWxsUGF0aHMgPSBuZXh0UGF0aHM7XG5cbiAgICAgICAgc2V0U3RhdGUoeyBhY3Rpb246IGFjdGlvbiwgbG9jYXRpb246IGxvY2F0aW9uIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKDAsIF93YXJuaW5nMi5kZWZhdWx0KShmYWxzZSwgJ0hhc2ggaGlzdG9yeSBjYW5ub3QgUFVTSCB0aGUgc2FtZSBwYXRoOyBhIG5ldyBlbnRyeSB3aWxsIG5vdCBiZSBhZGRlZCB0byB0aGUgaGlzdG9yeSBzdGFjaycpO1xuXG4gICAgICAgIHNldFN0YXRlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIHJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlKHBhdGgsIHN0YXRlKSB7XG4gICAgKDAsIF93YXJuaW5nMi5kZWZhdWx0KShzdGF0ZSA9PT0gdW5kZWZpbmVkLCAnSGFzaCBoaXN0b3J5IGNhbm5vdCByZXBsYWNlIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7XG5cbiAgICB2YXIgYWN0aW9uID0gJ1JFUExBQ0UnO1xuICAgIHZhciBsb2NhdGlvbiA9ICgwLCBfTG9jYXRpb25VdGlscy5jcmVhdGVMb2NhdGlvbikocGF0aCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGhpc3RvcnkubG9jYXRpb24pO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmICghb2spIHJldHVybjtcblxuICAgICAgdmFyIHBhdGggPSAoMCwgX1BhdGhVdGlscy5jcmVhdGVQYXRoKShsb2NhdGlvbik7XG4gICAgICB2YXIgZW5jb2RlZFBhdGggPSBlbmNvZGVQYXRoKGJhc2VuYW1lICsgcGF0aCk7XG4gICAgICB2YXIgaGFzaENoYW5nZWQgPSBnZXRIYXNoUGF0aCgpICE9PSBlbmNvZGVkUGF0aDtcblxuICAgICAgaWYgKGhhc2hDaGFuZ2VkKSB7XG4gICAgICAgIC8vIFdlIGNhbm5vdCB0ZWxsIGlmIGEgaGFzaGNoYW5nZSB3YXMgY2F1c2VkIGJ5IGEgUkVQTEFDRSwgc28gd2UnZFxuICAgICAgICAvLyByYXRoZXIgc2V0U3RhdGUgaGVyZSBhbmQgaWdub3JlIHRoZSBoYXNoY2hhbmdlLiBUaGUgY2F2ZWF0IGhlcmVcbiAgICAgICAgLy8gaXMgdGhhdCBvdGhlciBoYXNoIGhpc3RvcmllcyBpbiB0aGUgcGFnZSB3aWxsIGNvbnNpZGVyIGl0IGEgUE9QLlxuICAgICAgICBpZ25vcmVQYXRoID0gcGF0aDtcbiAgICAgICAgcmVwbGFjZUhhc2hQYXRoKGVuY29kZWRQYXRoKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHByZXZJbmRleCA9IGFsbFBhdGhzLmluZGV4T2YoKDAsIF9QYXRoVXRpbHMuY3JlYXRlUGF0aCkoaGlzdG9yeS5sb2NhdGlvbikpO1xuXG4gICAgICBpZiAocHJldkluZGV4ICE9PSAtMSkgYWxsUGF0aHNbcHJldkluZGV4XSA9IHBhdGg7XG5cbiAgICAgIHNldFN0YXRlKHsgYWN0aW9uOiBhY3Rpb24sIGxvY2F0aW9uOiBsb2NhdGlvbiB9KTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgZ28gPSBmdW5jdGlvbiBnbyhuKSB7XG4gICAgKDAsIF93YXJuaW5nMi5kZWZhdWx0KShjYW5Hb1dpdGhvdXRSZWxvYWQsICdIYXNoIGhpc3RvcnkgZ28obikgY2F1c2VzIGEgZnVsbCBwYWdlIHJlbG9hZCBpbiB0aGlzIGJyb3dzZXInKTtcblxuICAgIGdsb2JhbEhpc3RvcnkuZ28obik7XG4gIH07XG5cbiAgdmFyIGdvQmFjayA9IGZ1bmN0aW9uIGdvQmFjaygpIHtcbiAgICByZXR1cm4gZ28oLTEpO1xuICB9O1xuXG4gIHZhciBnb0ZvcndhcmQgPSBmdW5jdGlvbiBnb0ZvcndhcmQoKSB7XG4gICAgcmV0dXJuIGdvKDEpO1xuICB9O1xuXG4gIHZhciBsaXN0ZW5lckNvdW50ID0gMDtcblxuICB2YXIgY2hlY2tET01MaXN0ZW5lcnMgPSBmdW5jdGlvbiBjaGVja0RPTUxpc3RlbmVycyhkZWx0YSkge1xuICAgIGxpc3RlbmVyQ291bnQgKz0gZGVsdGE7XG5cbiAgICBpZiAobGlzdGVuZXJDb3VudCA9PT0gMSkge1xuICAgICAgKDAsIF9ET01VdGlscy5hZGRFdmVudExpc3RlbmVyKSh3aW5kb3csIEhhc2hDaGFuZ2VFdmVudCwgaGFuZGxlSGFzaENoYW5nZSk7XG4gICAgfSBlbHNlIGlmIChsaXN0ZW5lckNvdW50ID09PSAwKSB7XG4gICAgICAoMCwgX0RPTVV0aWxzLnJlbW92ZUV2ZW50TGlzdGVuZXIpKHdpbmRvdywgSGFzaENoYW5nZUV2ZW50LCBoYW5kbGVIYXNoQ2hhbmdlKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGlzQmxvY2tlZCA9IGZhbHNlO1xuXG4gIHZhciBibG9jayA9IGZ1bmN0aW9uIGJsb2NrKCkge1xuICAgIHZhciBwcm9tcHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlO1xuXG4gICAgdmFyIHVuYmxvY2sgPSB0cmFuc2l0aW9uTWFuYWdlci5zZXRQcm9tcHQocHJvbXB0KTtcblxuICAgIGlmICghaXNCbG9ja2VkKSB7XG4gICAgICBjaGVja0RPTUxpc3RlbmVycygxKTtcbiAgICAgIGlzQmxvY2tlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChpc0Jsb2NrZWQpIHtcbiAgICAgICAgaXNCbG9ja2VkID0gZmFsc2U7XG4gICAgICAgIGNoZWNrRE9NTGlzdGVuZXJzKC0xKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHVuYmxvY2soKTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBsaXN0ZW4gPSBmdW5jdGlvbiBsaXN0ZW4obGlzdGVuZXIpIHtcbiAgICB2YXIgdW5saXN0ZW4gPSB0cmFuc2l0aW9uTWFuYWdlci5hcHBlbmRMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgY2hlY2tET01MaXN0ZW5lcnMoMSk7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgY2hlY2tET01MaXN0ZW5lcnMoLTEpO1xuICAgICAgdW5saXN0ZW4oKTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBoaXN0b3J5ID0ge1xuICAgIGxlbmd0aDogZ2xvYmFsSGlzdG9yeS5sZW5ndGgsXG4gICAgYWN0aW9uOiAnUE9QJyxcbiAgICBsb2NhdGlvbjogaW5pdGlhbExvY2F0aW9uLFxuICAgIGNyZWF0ZUhyZWY6IGNyZWF0ZUhyZWYsXG4gICAgcHVzaDogcHVzaCxcbiAgICByZXBsYWNlOiByZXBsYWNlLFxuICAgIGdvOiBnbyxcbiAgICBnb0JhY2s6IGdvQmFjayxcbiAgICBnb0ZvcndhcmQ6IGdvRm9yd2FyZCxcbiAgICBibG9jazogYmxvY2ssXG4gICAgbGlzdGVuOiBsaXN0ZW5cbiAgfTtcblxuICByZXR1cm4gaGlzdG9yeTtcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGNyZWF0ZUhhc2hIaXN0b3J5O1xuXG4vKioqLyB9KSxcbi8qIDEzNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfd2FybmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXG52YXIgX3dhcm5pbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2FybmluZyk7XG5cbnZhciBfUGF0aFV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSk7XG5cbnZhciBfTG9jYXRpb25VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpO1xuXG52YXIgX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cbnZhciBfY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgY2xhbXAgPSBmdW5jdGlvbiBjbGFtcChuLCBsb3dlckJvdW5kLCB1cHBlckJvdW5kKSB7XG4gIHJldHVybiBNYXRoLm1pbihNYXRoLm1heChuLCBsb3dlckJvdW5kKSwgdXBwZXJCb3VuZCk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBoaXN0b3J5IG9iamVjdCB0aGF0IHN0b3JlcyBsb2NhdGlvbnMgaW4gbWVtb3J5LlxuICovXG52YXIgY3JlYXRlTWVtb3J5SGlzdG9yeSA9IGZ1bmN0aW9uIGNyZWF0ZU1lbW9yeUhpc3RvcnkoKSB7XG4gIHZhciBwcm9wcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gIHZhciBnZXRVc2VyQ29uZmlybWF0aW9uID0gcHJvcHMuZ2V0VXNlckNvbmZpcm1hdGlvbixcbiAgICAgIF9wcm9wcyRpbml0aWFsRW50cmllcyA9IHByb3BzLmluaXRpYWxFbnRyaWVzLFxuICAgICAgaW5pdGlhbEVudHJpZXMgPSBfcHJvcHMkaW5pdGlhbEVudHJpZXMgPT09IHVuZGVmaW5lZCA/IFsnLyddIDogX3Byb3BzJGluaXRpYWxFbnRyaWVzLFxuICAgICAgX3Byb3BzJGluaXRpYWxJbmRleCA9IHByb3BzLmluaXRpYWxJbmRleCxcbiAgICAgIGluaXRpYWxJbmRleCA9IF9wcm9wcyRpbml0aWFsSW5kZXggPT09IHVuZGVmaW5lZCA/IDAgOiBfcHJvcHMkaW5pdGlhbEluZGV4LFxuICAgICAgX3Byb3BzJGtleUxlbmd0aCA9IHByb3BzLmtleUxlbmd0aCxcbiAgICAgIGtleUxlbmd0aCA9IF9wcm9wcyRrZXlMZW5ndGggPT09IHVuZGVmaW5lZCA/IDYgOiBfcHJvcHMka2V5TGVuZ3RoO1xuXG5cbiAgdmFyIHRyYW5zaXRpb25NYW5hZ2VyID0gKDAsIF9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcjIuZGVmYXVsdCkoKTtcblxuICB2YXIgc2V0U3RhdGUgPSBmdW5jdGlvbiBzZXRTdGF0ZShuZXh0U3RhdGUpIHtcbiAgICBfZXh0ZW5kcyhoaXN0b3J5LCBuZXh0U3RhdGUpO1xuXG4gICAgaGlzdG9yeS5sZW5ndGggPSBoaXN0b3J5LmVudHJpZXMubGVuZ3RoO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIubm90aWZ5TGlzdGVuZXJzKGhpc3RvcnkubG9jYXRpb24sIGhpc3RvcnkuYWN0aW9uKTtcbiAgfTtcblxuICB2YXIgY3JlYXRlS2V5ID0gZnVuY3Rpb24gY3JlYXRlS2V5KCkge1xuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwga2V5TGVuZ3RoKTtcbiAgfTtcblxuICB2YXIgaW5kZXggPSBjbGFtcChpbml0aWFsSW5kZXgsIDAsIGluaXRpYWxFbnRyaWVzLmxlbmd0aCAtIDEpO1xuICB2YXIgZW50cmllcyA9IGluaXRpYWxFbnRyaWVzLm1hcChmdW5jdGlvbiAoZW50cnkpIHtcbiAgICByZXR1cm4gdHlwZW9mIGVudHJ5ID09PSAnc3RyaW5nJyA/ICgwLCBfTG9jYXRpb25VdGlscy5jcmVhdGVMb2NhdGlvbikoZW50cnksIHVuZGVmaW5lZCwgY3JlYXRlS2V5KCkpIDogKDAsIF9Mb2NhdGlvblV0aWxzLmNyZWF0ZUxvY2F0aW9uKShlbnRyeSwgdW5kZWZpbmVkLCBlbnRyeS5rZXkgfHwgY3JlYXRlS2V5KCkpO1xuICB9KTtcblxuICAvLyBQdWJsaWMgaW50ZXJmYWNlXG5cbiAgdmFyIGNyZWF0ZUhyZWYgPSBfUGF0aFV0aWxzLmNyZWF0ZVBhdGg7XG5cbiAgdmFyIHB1c2ggPSBmdW5jdGlvbiBwdXNoKHBhdGgsIHN0YXRlKSB7XG4gICAgKDAsIF93YXJuaW5nMi5kZWZhdWx0KSghKCh0eXBlb2YgcGF0aCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YocGF0aCkpID09PSAnb2JqZWN0JyAmJiBwYXRoLnN0YXRlICE9PSB1bmRlZmluZWQgJiYgc3RhdGUgIT09IHVuZGVmaW5lZCksICdZb3Ugc2hvdWxkIGF2b2lkIHByb3ZpZGluZyBhIDJuZCBzdGF0ZSBhcmd1bWVudCB0byBwdXNoIHdoZW4gdGhlIDFzdCAnICsgJ2FyZ3VtZW50IGlzIGEgbG9jYXRpb24tbGlrZSBvYmplY3QgdGhhdCBhbHJlYWR5IGhhcyBzdGF0ZTsgaXQgaXMgaWdub3JlZCcpO1xuXG4gICAgdmFyIGFjdGlvbiA9ICdQVVNIJztcbiAgICB2YXIgbG9jYXRpb24gPSAoMCwgX0xvY2F0aW9uVXRpbHMuY3JlYXRlTG9jYXRpb24pKHBhdGgsIHN0YXRlLCBjcmVhdGVLZXkoKSwgaGlzdG9yeS5sb2NhdGlvbik7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKCFvaykgcmV0dXJuO1xuXG4gICAgICB2YXIgcHJldkluZGV4ID0gaGlzdG9yeS5pbmRleDtcbiAgICAgIHZhciBuZXh0SW5kZXggPSBwcmV2SW5kZXggKyAxO1xuXG4gICAgICB2YXIgbmV4dEVudHJpZXMgPSBoaXN0b3J5LmVudHJpZXMuc2xpY2UoMCk7XG4gICAgICBpZiAobmV4dEVudHJpZXMubGVuZ3RoID4gbmV4dEluZGV4KSB7XG4gICAgICAgIG5leHRFbnRyaWVzLnNwbGljZShuZXh0SW5kZXgsIG5leHRFbnRyaWVzLmxlbmd0aCAtIG5leHRJbmRleCwgbG9jYXRpb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV4dEVudHJpZXMucHVzaChsb2NhdGlvbik7XG4gICAgICB9XG5cbiAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgIGxvY2F0aW9uOiBsb2NhdGlvbixcbiAgICAgICAgaW5kZXg6IG5leHRJbmRleCxcbiAgICAgICAgZW50cmllczogbmV4dEVudHJpZXNcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciByZXBsYWNlID0gZnVuY3Rpb24gcmVwbGFjZShwYXRoLCBzdGF0ZSkge1xuICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkoISgodHlwZW9mIHBhdGggPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHBhdGgpKSA9PT0gJ29iamVjdCcgJiYgcGF0aC5zdGF0ZSAhPT0gdW5kZWZpbmVkICYmIHN0YXRlICE9PSB1bmRlZmluZWQpLCAnWW91IHNob3VsZCBhdm9pZCBwcm92aWRpbmcgYSAybmQgc3RhdGUgYXJndW1lbnQgdG8gcmVwbGFjZSB3aGVuIHRoZSAxc3QgJyArICdhcmd1bWVudCBpcyBhIGxvY2F0aW9uLWxpa2Ugb2JqZWN0IHRoYXQgYWxyZWFkeSBoYXMgc3RhdGU7IGl0IGlzIGlnbm9yZWQnKTtcblxuICAgIHZhciBhY3Rpb24gPSAnUkVQTEFDRSc7XG4gICAgdmFyIGxvY2F0aW9uID0gKDAsIF9Mb2NhdGlvblV0aWxzLmNyZWF0ZUxvY2F0aW9uKShwYXRoLCBzdGF0ZSwgY3JlYXRlS2V5KCksIGhpc3RvcnkubG9jYXRpb24pO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmICghb2spIHJldHVybjtcblxuICAgICAgaGlzdG9yeS5lbnRyaWVzW2hpc3RvcnkuaW5kZXhdID0gbG9jYXRpb247XG5cbiAgICAgIHNldFN0YXRlKHsgYWN0aW9uOiBhY3Rpb24sIGxvY2F0aW9uOiBsb2NhdGlvbiB9KTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgZ28gPSBmdW5jdGlvbiBnbyhuKSB7XG4gICAgdmFyIG5leHRJbmRleCA9IGNsYW1wKGhpc3RvcnkuaW5kZXggKyBuLCAwLCBoaXN0b3J5LmVudHJpZXMubGVuZ3RoIC0gMSk7XG5cbiAgICB2YXIgYWN0aW9uID0gJ1BPUCc7XG4gICAgdmFyIGxvY2F0aW9uID0gaGlzdG9yeS5lbnRyaWVzW25leHRJbmRleF07XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKG9rKSB7XG4gICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sXG4gICAgICAgICAgaW5kZXg6IG5leHRJbmRleFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE1pbWljIHRoZSBiZWhhdmlvciBvZiBET00gaGlzdG9yaWVzIGJ5XG4gICAgICAgIC8vIGNhdXNpbmcgYSByZW5kZXIgYWZ0ZXIgYSBjYW5jZWxsZWQgUE9QLlxuICAgICAgICBzZXRTdGF0ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHZhciBnb0JhY2sgPSBmdW5jdGlvbiBnb0JhY2soKSB7XG4gICAgcmV0dXJuIGdvKC0xKTtcbiAgfTtcblxuICB2YXIgZ29Gb3J3YXJkID0gZnVuY3Rpb24gZ29Gb3J3YXJkKCkge1xuICAgIHJldHVybiBnbygxKTtcbiAgfTtcblxuICB2YXIgY2FuR28gPSBmdW5jdGlvbiBjYW5HbyhuKSB7XG4gICAgdmFyIG5leHRJbmRleCA9IGhpc3RvcnkuaW5kZXggKyBuO1xuICAgIHJldHVybiBuZXh0SW5kZXggPj0gMCAmJiBuZXh0SW5kZXggPCBoaXN0b3J5LmVudHJpZXMubGVuZ3RoO1xuICB9O1xuXG4gIHZhciBibG9jayA9IGZ1bmN0aW9uIGJsb2NrKCkge1xuICAgIHZhciBwcm9tcHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlO1xuICAgIHJldHVybiB0cmFuc2l0aW9uTWFuYWdlci5zZXRQcm9tcHQocHJvbXB0KTtcbiAgfTtcblxuICB2YXIgbGlzdGVuID0gZnVuY3Rpb24gbGlzdGVuKGxpc3RlbmVyKSB7XG4gICAgcmV0dXJuIHRyYW5zaXRpb25NYW5hZ2VyLmFwcGVuZExpc3RlbmVyKGxpc3RlbmVyKTtcbiAgfTtcblxuICB2YXIgaGlzdG9yeSA9IHtcbiAgICBsZW5ndGg6IGVudHJpZXMubGVuZ3RoLFxuICAgIGFjdGlvbjogJ1BPUCcsXG4gICAgbG9jYXRpb246IGVudHJpZXNbaW5kZXhdLFxuICAgIGluZGV4OiBpbmRleCxcbiAgICBlbnRyaWVzOiBlbnRyaWVzLFxuICAgIGNyZWF0ZUhyZWY6IGNyZWF0ZUhyZWYsXG4gICAgcHVzaDogcHVzaCxcbiAgICByZXBsYWNlOiByZXBsYWNlLFxuICAgIGdvOiBnbyxcbiAgICBnb0JhY2s6IGdvQmFjayxcbiAgICBnb0ZvcndhcmQ6IGdvRm9yd2FyZCxcbiAgICBjYW5HbzogY2FuR28sXG4gICAgYmxvY2s6IGJsb2NrLFxuICAgIGxpc3RlbjogbGlzdGVuXG4gIH07XG5cbiAgcmV0dXJuIGhpc3Rvcnk7XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBjcmVhdGVNZW1vcnlIaXN0b3J5O1xuXG4vKioqLyB9KSxcbi8qIDEzOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9pbnZhcmlhbnRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9pbnZhcmlhbnRfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9pbnZhcmlhbnRfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19Mb2NhdGlvblV0aWxzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1BhdGhVdGlsc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19ET01VdGlsc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Nyk7XG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cblxuXG5cblxuXG5cblxudmFyIFBvcFN0YXRlRXZlbnQgPSAncG9wc3RhdGUnO1xudmFyIEhhc2hDaGFuZ2VFdmVudCA9ICdoYXNoY2hhbmdlJztcblxudmFyIGdldEhpc3RvcnlTdGF0ZSA9IGZ1bmN0aW9uIGdldEhpc3RvcnlTdGF0ZSgpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gd2luZG93Lmhpc3Rvcnkuc3RhdGUgfHwge307XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBJRSAxMSBzb21ldGltZXMgdGhyb3dzIHdoZW4gYWNjZXNzaW5nIHdpbmRvdy5oaXN0b3J5LnN0YXRlXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9SZWFjdFRyYWluaW5nL2hpc3RvcnkvcHVsbC8yODlcbiAgICByZXR1cm4ge307XG4gIH1cbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIGhpc3Rvcnkgb2JqZWN0IHRoYXQgdXNlcyB0aGUgSFRNTDUgaGlzdG9yeSBBUEkgaW5jbHVkaW5nXG4gKiBwdXNoU3RhdGUsIHJlcGxhY2VTdGF0ZSwgYW5kIHRoZSBwb3BzdGF0ZSBldmVudC5cbiAqL1xudmFyIGNyZWF0ZUJyb3dzZXJIaXN0b3J5ID0gZnVuY3Rpb24gY3JlYXRlQnJvd3Nlckhpc3RvcnkoKSB7XG4gIHZhciBwcm9wcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX2ludmFyaWFudF9fX2RlZmF1bHQoKShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX0RPTVV0aWxzX19bXCJhXCIgLyogY2FuVXNlRE9NICovXSwgJ0Jyb3dzZXIgaGlzdG9yeSBuZWVkcyBhIERPTScpO1xuXG4gIHZhciBnbG9iYWxIaXN0b3J5ID0gd2luZG93Lmhpc3Rvcnk7XG4gIHZhciBjYW5Vc2VIaXN0b3J5ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fRE9NVXRpbHNfX1tcImZcIiAvKiBzdXBwb3J0c0hpc3RvcnkgKi9dKSgpO1xuICB2YXIgbmVlZHNIYXNoQ2hhbmdlTGlzdGVuZXIgPSAhX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fRE9NVXRpbHNfX1tcImdcIiAvKiBzdXBwb3J0c1BvcFN0YXRlT25IYXNoQ2hhbmdlICovXSkoKTtcblxuICB2YXIgX3Byb3BzJGZvcmNlUmVmcmVzaCA9IHByb3BzLmZvcmNlUmVmcmVzaCxcbiAgICAgIGZvcmNlUmVmcmVzaCA9IF9wcm9wcyRmb3JjZVJlZnJlc2ggPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3Byb3BzJGZvcmNlUmVmcmVzaCxcbiAgICAgIF9wcm9wcyRnZXRVc2VyQ29uZmlybSA9IHByb3BzLmdldFVzZXJDb25maXJtYXRpb24sXG4gICAgICBnZXRVc2VyQ29uZmlybWF0aW9uID0gX3Byb3BzJGdldFVzZXJDb25maXJtID09PSB1bmRlZmluZWQgPyBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX0RPTVV0aWxzX19bXCJjXCIgLyogZ2V0Q29uZmlybWF0aW9uICovXSA6IF9wcm9wcyRnZXRVc2VyQ29uZmlybSxcbiAgICAgIF9wcm9wcyRrZXlMZW5ndGggPSBwcm9wcy5rZXlMZW5ndGgsXG4gICAgICBrZXlMZW5ndGggPSBfcHJvcHMka2V5TGVuZ3RoID09PSB1bmRlZmluZWQgPyA2IDogX3Byb3BzJGtleUxlbmd0aDtcblxuICB2YXIgYmFzZW5hbWUgPSBwcm9wcy5iYXNlbmFtZSA/IF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1BhdGhVdGlsc19fW1wiZVwiIC8qIHN0cmlwVHJhaWxpbmdTbGFzaCAqL10pKF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1BhdGhVdGlsc19fW1wiZFwiIC8qIGFkZExlYWRpbmdTbGFzaCAqL10pKHByb3BzLmJhc2VuYW1lKSkgOiAnJztcblxuICB2YXIgZ2V0RE9NTG9jYXRpb24gPSBmdW5jdGlvbiBnZXRET01Mb2NhdGlvbihoaXN0b3J5U3RhdGUpIHtcbiAgICB2YXIgX3JlZiA9IGhpc3RvcnlTdGF0ZSB8fCB7fSxcbiAgICAgICAga2V5ID0gX3JlZi5rZXksXG4gICAgICAgIHN0YXRlID0gX3JlZi5zdGF0ZTtcblxuICAgIHZhciBfd2luZG93JGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLFxuICAgICAgICBwYXRobmFtZSA9IF93aW5kb3ckbG9jYXRpb24ucGF0aG5hbWUsXG4gICAgICAgIHNlYXJjaCA9IF93aW5kb3ckbG9jYXRpb24uc2VhcmNoLFxuICAgICAgICBoYXNoID0gX3dpbmRvdyRsb2NhdGlvbi5oYXNoO1xuXG5cbiAgICB2YXIgcGF0aCA9IHBhdGhuYW1lICsgc2VhcmNoICsgaGFzaDtcblxuICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCgpKCFiYXNlbmFtZSB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19QYXRoVXRpbHNfX1tcImZcIiAvKiBoYXNCYXNlbmFtZSAqL10pKHBhdGgsIGJhc2VuYW1lKSwgJ1lvdSBhcmUgYXR0ZW1wdGluZyB0byB1c2UgYSBiYXNlbmFtZSBvbiBhIHBhZ2Ugd2hvc2UgVVJMIHBhdGggZG9lcyBub3QgYmVnaW4gJyArICd3aXRoIHRoZSBiYXNlbmFtZS4gRXhwZWN0ZWQgcGF0aCBcIicgKyBwYXRoICsgJ1wiIHRvIGJlZ2luIHdpdGggXCInICsgYmFzZW5hbWUgKyAnXCIuJyk7XG5cbiAgICBpZiAoYmFzZW5hbWUpIHBhdGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19QYXRoVXRpbHNfX1tcImdcIiAvKiBzdHJpcEJhc2VuYW1lICovXSkocGF0aCwgYmFzZW5hbWUpO1xuXG4gICAgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX0xvY2F0aW9uVXRpbHNfX1tcImFcIiAvKiBjcmVhdGVMb2NhdGlvbiAqL10pKHBhdGgsIHN0YXRlLCBrZXkpO1xuICB9O1xuXG4gIHZhciBjcmVhdGVLZXkgPSBmdW5jdGlvbiBjcmVhdGVLZXkoKSB7XG4gICAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCBrZXlMZW5ndGgpO1xuICB9O1xuXG4gIHZhciB0cmFuc2l0aW9uTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyX19bXCJhXCIgLyogZGVmYXVsdCAqL10pKCk7XG5cbiAgdmFyIHNldFN0YXRlID0gZnVuY3Rpb24gc2V0U3RhdGUobmV4dFN0YXRlKSB7XG4gICAgX2V4dGVuZHMoaGlzdG9yeSwgbmV4dFN0YXRlKTtcblxuICAgIGhpc3RvcnkubGVuZ3RoID0gZ2xvYmFsSGlzdG9yeS5sZW5ndGg7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5ub3RpZnlMaXN0ZW5lcnMoaGlzdG9yeS5sb2NhdGlvbiwgaGlzdG9yeS5hY3Rpb24pO1xuICB9O1xuXG4gIHZhciBoYW5kbGVQb3BTdGF0ZSA9IGZ1bmN0aW9uIGhhbmRsZVBvcFN0YXRlKGV2ZW50KSB7XG4gICAgLy8gSWdub3JlIGV4dHJhbmVvdXMgcG9wc3RhdGUgZXZlbnRzIGluIFdlYktpdC5cbiAgICBpZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fRE9NVXRpbHNfX1tcImhcIiAvKiBpc0V4dHJhbmVvdXNQb3BzdGF0ZUV2ZW50ICovXSkoZXZlbnQpKSByZXR1cm47XG5cbiAgICBoYW5kbGVQb3AoZ2V0RE9NTG9jYXRpb24oZXZlbnQuc3RhdGUpKTtcbiAgfTtcblxuICB2YXIgaGFuZGxlSGFzaENoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZUhhc2hDaGFuZ2UoKSB7XG4gICAgaGFuZGxlUG9wKGdldERPTUxvY2F0aW9uKGdldEhpc3RvcnlTdGF0ZSgpKSk7XG4gIH07XG5cbiAgdmFyIGZvcmNlTmV4dFBvcCA9IGZhbHNlO1xuXG4gIHZhciBoYW5kbGVQb3AgPSBmdW5jdGlvbiBoYW5kbGVQb3AobG9jYXRpb24pIHtcbiAgICBpZiAoZm9yY2VOZXh0UG9wKSB7XG4gICAgICBmb3JjZU5leHRQb3AgPSBmYWxzZTtcbiAgICAgIHNldFN0YXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhY3Rpb24gPSAnUE9QJztcblxuICAgICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgICAgaWYgKG9rKSB7XG4gICAgICAgICAgc2V0U3RhdGUoeyBhY3Rpb246IGFjdGlvbiwgbG9jYXRpb246IGxvY2F0aW9uIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldmVydFBvcChsb2NhdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICB2YXIgcmV2ZXJ0UG9wID0gZnVuY3Rpb24gcmV2ZXJ0UG9wKGZyb21Mb2NhdGlvbikge1xuICAgIHZhciB0b0xvY2F0aW9uID0gaGlzdG9yeS5sb2NhdGlvbjtcblxuICAgIC8vIFRPRE86IFdlIGNvdWxkIHByb2JhYmx5IG1ha2UgdGhpcyBtb3JlIHJlbGlhYmxlIGJ5XG4gICAgLy8ga2VlcGluZyBhIGxpc3Qgb2Yga2V5cyB3ZSd2ZSBzZWVuIGluIHNlc3Npb25TdG9yYWdlLlxuICAgIC8vIEluc3RlYWQsIHdlIGp1c3QgZGVmYXVsdCB0byAwIGZvciBrZXlzIHdlIGRvbid0IGtub3cuXG5cbiAgICB2YXIgdG9JbmRleCA9IGFsbEtleXMuaW5kZXhPZih0b0xvY2F0aW9uLmtleSk7XG5cbiAgICBpZiAodG9JbmRleCA9PT0gLTEpIHRvSW5kZXggPSAwO1xuXG4gICAgdmFyIGZyb21JbmRleCA9IGFsbEtleXMuaW5kZXhPZihmcm9tTG9jYXRpb24ua2V5KTtcblxuICAgIGlmIChmcm9tSW5kZXggPT09IC0xKSBmcm9tSW5kZXggPSAwO1xuXG4gICAgdmFyIGRlbHRhID0gdG9JbmRleCAtIGZyb21JbmRleDtcblxuICAgIGlmIChkZWx0YSkge1xuICAgICAgZm9yY2VOZXh0UG9wID0gdHJ1ZTtcbiAgICAgIGdvKGRlbHRhKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGluaXRpYWxMb2NhdGlvbiA9IGdldERPTUxvY2F0aW9uKGdldEhpc3RvcnlTdGF0ZSgpKTtcbiAgdmFyIGFsbEtleXMgPSBbaW5pdGlhbExvY2F0aW9uLmtleV07XG5cbiAgLy8gUHVibGljIGludGVyZmFjZVxuXG4gIHZhciBjcmVhdGVIcmVmID0gZnVuY3Rpb24gY3JlYXRlSHJlZihsb2NhdGlvbikge1xuICAgIHJldHVybiBiYXNlbmFtZSArIF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1BhdGhVdGlsc19fW1wiYlwiIC8qIGNyZWF0ZVBhdGggKi9dKShsb2NhdGlvbik7XG4gIH07XG5cbiAgdmFyIHB1c2ggPSBmdW5jdGlvbiBwdXNoKHBhdGgsIHN0YXRlKSB7XG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0KCkoISgodHlwZW9mIHBhdGggPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHBhdGgpKSA9PT0gJ29iamVjdCcgJiYgcGF0aC5zdGF0ZSAhPT0gdW5kZWZpbmVkICYmIHN0YXRlICE9PSB1bmRlZmluZWQpLCAnWW91IHNob3VsZCBhdm9pZCBwcm92aWRpbmcgYSAybmQgc3RhdGUgYXJndW1lbnQgdG8gcHVzaCB3aGVuIHRoZSAxc3QgJyArICdhcmd1bWVudCBpcyBhIGxvY2F0aW9uLWxpa2Ugb2JqZWN0IHRoYXQgYWxyZWFkeSBoYXMgc3RhdGU7IGl0IGlzIGlnbm9yZWQnKTtcblxuICAgIHZhciBhY3Rpb24gPSAnUFVTSCc7XG4gICAgdmFyIGxvY2F0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fTG9jYXRpb25VdGlsc19fW1wiYVwiIC8qIGNyZWF0ZUxvY2F0aW9uICovXSkocGF0aCwgc3RhdGUsIGNyZWF0ZUtleSgpLCBoaXN0b3J5LmxvY2F0aW9uKTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG5cbiAgICAgIHZhciBocmVmID0gY3JlYXRlSHJlZihsb2NhdGlvbik7XG4gICAgICB2YXIga2V5ID0gbG9jYXRpb24ua2V5LFxuICAgICAgICAgIHN0YXRlID0gbG9jYXRpb24uc3RhdGU7XG5cblxuICAgICAgaWYgKGNhblVzZUhpc3RvcnkpIHtcbiAgICAgICAgZ2xvYmFsSGlzdG9yeS5wdXNoU3RhdGUoeyBrZXk6IGtleSwgc3RhdGU6IHN0YXRlIH0sIG51bGwsIGhyZWYpO1xuXG4gICAgICAgIGlmIChmb3JjZVJlZnJlc2gpIHtcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhyZWY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHByZXZJbmRleCA9IGFsbEtleXMuaW5kZXhPZihoaXN0b3J5LmxvY2F0aW9uLmtleSk7XG4gICAgICAgICAgdmFyIG5leHRLZXlzID0gYWxsS2V5cy5zbGljZSgwLCBwcmV2SW5kZXggPT09IC0xID8gMCA6IHByZXZJbmRleCArIDEpO1xuXG4gICAgICAgICAgbmV4dEtleXMucHVzaChsb2NhdGlvbi5rZXkpO1xuICAgICAgICAgIGFsbEtleXMgPSBuZXh0S2V5cztcblxuICAgICAgICAgIHNldFN0YXRlKHsgYWN0aW9uOiBhY3Rpb24sIGxvY2F0aW9uOiBsb2NhdGlvbiB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0KCkoc3RhdGUgPT09IHVuZGVmaW5lZCwgJ0Jyb3dzZXIgaGlzdG9yeSBjYW5ub3QgcHVzaCBzdGF0ZSBpbiBicm93c2VycyB0aGF0IGRvIG5vdCBzdXBwb3J0IEhUTUw1IGhpc3RvcnknKTtcblxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhyZWY7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIHJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlKHBhdGgsIHN0YXRlKSB7XG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0KCkoISgodHlwZW9mIHBhdGggPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHBhdGgpKSA9PT0gJ29iamVjdCcgJiYgcGF0aC5zdGF0ZSAhPT0gdW5kZWZpbmVkICYmIHN0YXRlICE9PSB1bmRlZmluZWQpLCAnWW91IHNob3VsZCBhdm9pZCBwcm92aWRpbmcgYSAybmQgc3RhdGUgYXJndW1lbnQgdG8gcmVwbGFjZSB3aGVuIHRoZSAxc3QgJyArICdhcmd1bWVudCBpcyBhIGxvY2F0aW9uLWxpa2Ugb2JqZWN0IHRoYXQgYWxyZWFkeSBoYXMgc3RhdGU7IGl0IGlzIGlnbm9yZWQnKTtcblxuICAgIHZhciBhY3Rpb24gPSAnUkVQTEFDRSc7XG4gICAgdmFyIGxvY2F0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fTG9jYXRpb25VdGlsc19fW1wiYVwiIC8qIGNyZWF0ZUxvY2F0aW9uICovXSkocGF0aCwgc3RhdGUsIGNyZWF0ZUtleSgpLCBoaXN0b3J5LmxvY2F0aW9uKTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG5cbiAgICAgIHZhciBocmVmID0gY3JlYXRlSHJlZihsb2NhdGlvbik7XG4gICAgICB2YXIga2V5ID0gbG9jYXRpb24ua2V5LFxuICAgICAgICAgIHN0YXRlID0gbG9jYXRpb24uc3RhdGU7XG5cblxuICAgICAgaWYgKGNhblVzZUhpc3RvcnkpIHtcbiAgICAgICAgZ2xvYmFsSGlzdG9yeS5yZXBsYWNlU3RhdGUoeyBrZXk6IGtleSwgc3RhdGU6IHN0YXRlIH0sIG51bGwsIGhyZWYpO1xuXG4gICAgICAgIGlmIChmb3JjZVJlZnJlc2gpIHtcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShocmVmKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgcHJldkluZGV4ID0gYWxsS2V5cy5pbmRleE9mKGhpc3RvcnkubG9jYXRpb24ua2V5KTtcblxuICAgICAgICAgIGlmIChwcmV2SW5kZXggIT09IC0xKSBhbGxLZXlzW3ByZXZJbmRleF0gPSBsb2NhdGlvbi5rZXk7XG5cbiAgICAgICAgICBzZXRTdGF0ZSh7IGFjdGlvbjogYWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24gfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCgpKHN0YXRlID09PSB1bmRlZmluZWQsICdCcm93c2VyIGhpc3RvcnkgY2Fubm90IHJlcGxhY2Ugc3RhdGUgaW4gYnJvd3NlcnMgdGhhdCBkbyBub3Qgc3VwcG9ydCBIVE1MNSBoaXN0b3J5Jyk7XG5cbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoaHJlZik7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdvID0gZnVuY3Rpb24gZ28obikge1xuICAgIGdsb2JhbEhpc3RvcnkuZ28obik7XG4gIH07XG5cbiAgdmFyIGdvQmFjayA9IGZ1bmN0aW9uIGdvQmFjaygpIHtcbiAgICByZXR1cm4gZ28oLTEpO1xuICB9O1xuXG4gIHZhciBnb0ZvcndhcmQgPSBmdW5jdGlvbiBnb0ZvcndhcmQoKSB7XG4gICAgcmV0dXJuIGdvKDEpO1xuICB9O1xuXG4gIHZhciBsaXN0ZW5lckNvdW50ID0gMDtcblxuICB2YXIgY2hlY2tET01MaXN0ZW5lcnMgPSBmdW5jdGlvbiBjaGVja0RPTUxpc3RlbmVycyhkZWx0YSkge1xuICAgIGxpc3RlbmVyQ291bnQgKz0gZGVsdGE7XG5cbiAgICBpZiAobGlzdGVuZXJDb3VudCA9PT0gMSkge1xuICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fRE9NVXRpbHNfX1tcImRcIiAvKiBhZGRFdmVudExpc3RlbmVyICovXSkod2luZG93LCBQb3BTdGF0ZUV2ZW50LCBoYW5kbGVQb3BTdGF0ZSk7XG5cbiAgICAgIGlmIChuZWVkc0hhc2hDaGFuZ2VMaXN0ZW5lcikgX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fRE9NVXRpbHNfX1tcImRcIiAvKiBhZGRFdmVudExpc3RlbmVyICovXSkod2luZG93LCBIYXNoQ2hhbmdlRXZlbnQsIGhhbmRsZUhhc2hDaGFuZ2UpO1xuICAgIH0gZWxzZSBpZiAobGlzdGVuZXJDb3VudCA9PT0gMCkge1xuICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fRE9NVXRpbHNfX1tcImVcIiAvKiByZW1vdmVFdmVudExpc3RlbmVyICovXSkod2luZG93LCBQb3BTdGF0ZUV2ZW50LCBoYW5kbGVQb3BTdGF0ZSk7XG5cbiAgICAgIGlmIChuZWVkc0hhc2hDaGFuZ2VMaXN0ZW5lcikgX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fRE9NVXRpbHNfX1tcImVcIiAvKiByZW1vdmVFdmVudExpc3RlbmVyICovXSkod2luZG93LCBIYXNoQ2hhbmdlRXZlbnQsIGhhbmRsZUhhc2hDaGFuZ2UpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgaXNCbG9ja2VkID0gZmFsc2U7XG5cbiAgdmFyIGJsb2NrID0gZnVuY3Rpb24gYmxvY2soKSB7XG4gICAgdmFyIHByb21wdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZmFsc2U7XG5cbiAgICB2YXIgdW5ibG9jayA9IHRyYW5zaXRpb25NYW5hZ2VyLnNldFByb21wdChwcm9tcHQpO1xuXG4gICAgaWYgKCFpc0Jsb2NrZWQpIHtcbiAgICAgIGNoZWNrRE9NTGlzdGVuZXJzKDEpO1xuICAgICAgaXNCbG9ja2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGlzQmxvY2tlZCkge1xuICAgICAgICBpc0Jsb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgY2hlY2tET01MaXN0ZW5lcnMoLTEpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdW5ibG9jaygpO1xuICAgIH07XG4gIH07XG5cbiAgdmFyIGxpc3RlbiA9IGZ1bmN0aW9uIGxpc3RlbihsaXN0ZW5lcikge1xuICAgIHZhciB1bmxpc3RlbiA9IHRyYW5zaXRpb25NYW5hZ2VyLmFwcGVuZExpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICBjaGVja0RPTUxpc3RlbmVycygxKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGVja0RPTUxpc3RlbmVycygtMSk7XG4gICAgICB1bmxpc3RlbigpO1xuICAgIH07XG4gIH07XG5cbiAgdmFyIGhpc3RvcnkgPSB7XG4gICAgbGVuZ3RoOiBnbG9iYWxIaXN0b3J5Lmxlbmd0aCxcbiAgICBhY3Rpb246ICdQT1AnLFxuICAgIGxvY2F0aW9uOiBpbml0aWFsTG9jYXRpb24sXG4gICAgY3JlYXRlSHJlZjogY3JlYXRlSHJlZixcbiAgICBwdXNoOiBwdXNoLFxuICAgIHJlcGxhY2U6IHJlcGxhY2UsXG4gICAgZ286IGdvLFxuICAgIGdvQmFjazogZ29CYWNrLFxuICAgIGdvRm9yd2FyZDogZ29Gb3J3YXJkLFxuICAgIGJsb2NrOiBibG9jayxcbiAgICBsaXN0ZW46IGxpc3RlblxuICB9O1xuXG4gIHJldHVybiBoaXN0b3J5O1xufTtcblxuLyogdW51c2VkIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gdmFyIF91bnVzZWRfd2VicGFja19kZWZhdWx0X2V4cG9ydCA9IChjcmVhdGVCcm93c2VySGlzdG9yeSk7XG5cbi8qKiovIH0pLFxuLyogMTM5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX2ludmFyaWFudF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX2ludmFyaWFudF9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX2ludmFyaWFudF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX0xvY2F0aW9uVXRpbHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fUGF0aFV0aWxzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX0RPTVV0aWxzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg3KTtcbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cblxuXG5cblxuXG5cblxudmFyIEhhc2hDaGFuZ2VFdmVudCA9ICdoYXNoY2hhbmdlJztcblxudmFyIEhhc2hQYXRoQ29kZXJzID0ge1xuICBoYXNoYmFuZzoge1xuICAgIGVuY29kZVBhdGg6IGZ1bmN0aW9uIGVuY29kZVBhdGgocGF0aCkge1xuICAgICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnIScgPyBwYXRoIDogJyEvJyArIF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1BhdGhVdGlsc19fW1wiY1wiIC8qIHN0cmlwTGVhZGluZ1NsYXNoICovXSkocGF0aCk7XG4gICAgfSxcbiAgICBkZWNvZGVQYXRoOiBmdW5jdGlvbiBkZWNvZGVQYXRoKHBhdGgpIHtcbiAgICAgIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJyEnID8gcGF0aC5zdWJzdHIoMSkgOiBwYXRoO1xuICAgIH1cbiAgfSxcbiAgbm9zbGFzaDoge1xuICAgIGVuY29kZVBhdGg6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fUGF0aFV0aWxzX19bXCJjXCIgLyogc3RyaXBMZWFkaW5nU2xhc2ggKi9dLFxuICAgIGRlY29kZVBhdGg6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fUGF0aFV0aWxzX19bXCJkXCIgLyogYWRkTGVhZGluZ1NsYXNoICovXVxuICB9LFxuICBzbGFzaDoge1xuICAgIGVuY29kZVBhdGg6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fUGF0aFV0aWxzX19bXCJkXCIgLyogYWRkTGVhZGluZ1NsYXNoICovXSxcbiAgICBkZWNvZGVQYXRoOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1BhdGhVdGlsc19fW1wiZFwiIC8qIGFkZExlYWRpbmdTbGFzaCAqL11cbiAgfVxufTtcblxudmFyIGdldEhhc2hQYXRoID0gZnVuY3Rpb24gZ2V0SGFzaFBhdGgoKSB7XG4gIC8vIFdlIGNhbid0IHVzZSB3aW5kb3cubG9jYXRpb24uaGFzaCBoZXJlIGJlY2F1c2UgaXQncyBub3RcbiAgLy8gY29uc2lzdGVudCBhY3Jvc3MgYnJvd3NlcnMgLSBGaXJlZm94IHdpbGwgcHJlLWRlY29kZSBpdCFcbiAgdmFyIGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgdmFyIGhhc2hJbmRleCA9IGhyZWYuaW5kZXhPZignIycpO1xuICByZXR1cm4gaGFzaEluZGV4ID09PSAtMSA/ICcnIDogaHJlZi5zdWJzdHJpbmcoaGFzaEluZGV4ICsgMSk7XG59O1xuXG52YXIgcHVzaEhhc2hQYXRoID0gZnVuY3Rpb24gcHVzaEhhc2hQYXRoKHBhdGgpIHtcbiAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gcGF0aDtcbn07XG5cbnZhciByZXBsYWNlSGFzaFBhdGggPSBmdW5jdGlvbiByZXBsYWNlSGFzaFBhdGgocGF0aCkge1xuICB2YXIgaGFzaEluZGV4ID0gd2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZignIycpO1xuXG4gIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNsaWNlKDAsIGhhc2hJbmRleCA+PSAwID8gaGFzaEluZGV4IDogMCkgKyAnIycgKyBwYXRoKTtcbn07XG5cbnZhciBjcmVhdGVIYXNoSGlzdG9yeSA9IGZ1bmN0aW9uIGNyZWF0ZUhhc2hIaXN0b3J5KCkge1xuICB2YXIgcHJvcHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9pbnZhcmlhbnRfX19kZWZhdWx0KCkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19ET01VdGlsc19fW1wiYVwiIC8qIGNhblVzZURPTSAqL10sICdIYXNoIGhpc3RvcnkgbmVlZHMgYSBET00nKTtcblxuICB2YXIgZ2xvYmFsSGlzdG9yeSA9IHdpbmRvdy5oaXN0b3J5O1xuICB2YXIgY2FuR29XaXRob3V0UmVsb2FkID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fRE9NVXRpbHNfX1tcImJcIiAvKiBzdXBwb3J0c0dvV2l0aG91dFJlbG9hZFVzaW5nSGFzaCAqL10pKCk7XG5cbiAgdmFyIF9wcm9wcyRnZXRVc2VyQ29uZmlybSA9IHByb3BzLmdldFVzZXJDb25maXJtYXRpb24sXG4gICAgICBnZXRVc2VyQ29uZmlybWF0aW9uID0gX3Byb3BzJGdldFVzZXJDb25maXJtID09PSB1bmRlZmluZWQgPyBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX0RPTVV0aWxzX19bXCJjXCIgLyogZ2V0Q29uZmlybWF0aW9uICovXSA6IF9wcm9wcyRnZXRVc2VyQ29uZmlybSxcbiAgICAgIF9wcm9wcyRoYXNoVHlwZSA9IHByb3BzLmhhc2hUeXBlLFxuICAgICAgaGFzaFR5cGUgPSBfcHJvcHMkaGFzaFR5cGUgPT09IHVuZGVmaW5lZCA/ICdzbGFzaCcgOiBfcHJvcHMkaGFzaFR5cGU7XG5cbiAgdmFyIGJhc2VuYW1lID0gcHJvcHMuYmFzZW5hbWUgPyBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19QYXRoVXRpbHNfX1tcImVcIiAvKiBzdHJpcFRyYWlsaW5nU2xhc2ggKi9dKShfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19QYXRoVXRpbHNfX1tcImRcIiAvKiBhZGRMZWFkaW5nU2xhc2ggKi9dKShwcm9wcy5iYXNlbmFtZSkpIDogJyc7XG5cbiAgdmFyIF9IYXNoUGF0aENvZGVycyRoYXNoVCA9IEhhc2hQYXRoQ29kZXJzW2hhc2hUeXBlXSxcbiAgICAgIGVuY29kZVBhdGggPSBfSGFzaFBhdGhDb2RlcnMkaGFzaFQuZW5jb2RlUGF0aCxcbiAgICAgIGRlY29kZVBhdGggPSBfSGFzaFBhdGhDb2RlcnMkaGFzaFQuZGVjb2RlUGF0aDtcblxuXG4gIHZhciBnZXRET01Mb2NhdGlvbiA9IGZ1bmN0aW9uIGdldERPTUxvY2F0aW9uKCkge1xuICAgIHZhciBwYXRoID0gZGVjb2RlUGF0aChnZXRIYXNoUGF0aCgpKTtcblxuICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCgpKCFiYXNlbmFtZSB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19QYXRoVXRpbHNfX1tcImZcIiAvKiBoYXNCYXNlbmFtZSAqL10pKHBhdGgsIGJhc2VuYW1lKSwgJ1lvdSBhcmUgYXR0ZW1wdGluZyB0byB1c2UgYSBiYXNlbmFtZSBvbiBhIHBhZ2Ugd2hvc2UgVVJMIHBhdGggZG9lcyBub3QgYmVnaW4gJyArICd3aXRoIHRoZSBiYXNlbmFtZS4gRXhwZWN0ZWQgcGF0aCBcIicgKyBwYXRoICsgJ1wiIHRvIGJlZ2luIHdpdGggXCInICsgYmFzZW5hbWUgKyAnXCIuJyk7XG5cbiAgICBpZiAoYmFzZW5hbWUpIHBhdGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19QYXRoVXRpbHNfX1tcImdcIiAvKiBzdHJpcEJhc2VuYW1lICovXSkocGF0aCwgYmFzZW5hbWUpO1xuXG4gICAgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX0xvY2F0aW9uVXRpbHNfX1tcImFcIiAvKiBjcmVhdGVMb2NhdGlvbiAqL10pKHBhdGgpO1xuICB9O1xuXG4gIHZhciB0cmFuc2l0aW9uTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyX19bXCJhXCIgLyogZGVmYXVsdCAqL10pKCk7XG5cbiAgdmFyIHNldFN0YXRlID0gZnVuY3Rpb24gc2V0U3RhdGUobmV4dFN0YXRlKSB7XG4gICAgX2V4dGVuZHMoaGlzdG9yeSwgbmV4dFN0YXRlKTtcblxuICAgIGhpc3RvcnkubGVuZ3RoID0gZ2xvYmFsSGlzdG9yeS5sZW5ndGg7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5ub3RpZnlMaXN0ZW5lcnMoaGlzdG9yeS5sb2NhdGlvbiwgaGlzdG9yeS5hY3Rpb24pO1xuICB9O1xuXG4gIHZhciBmb3JjZU5leHRQb3AgPSBmYWxzZTtcbiAgdmFyIGlnbm9yZVBhdGggPSBudWxsO1xuXG4gIHZhciBoYW5kbGVIYXNoQ2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlSGFzaENoYW5nZSgpIHtcbiAgICB2YXIgcGF0aCA9IGdldEhhc2hQYXRoKCk7XG4gICAgdmFyIGVuY29kZWRQYXRoID0gZW5jb2RlUGF0aChwYXRoKTtcblxuICAgIGlmIChwYXRoICE9PSBlbmNvZGVkUGF0aCkge1xuICAgICAgLy8gRW5zdXJlIHdlIGFsd2F5cyBoYXZlIGEgcHJvcGVybHktZW5jb2RlZCBoYXNoLlxuICAgICAgcmVwbGFjZUhhc2hQYXRoKGVuY29kZWRQYXRoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGxvY2F0aW9uID0gZ2V0RE9NTG9jYXRpb24oKTtcbiAgICAgIHZhciBwcmV2TG9jYXRpb24gPSBoaXN0b3J5LmxvY2F0aW9uO1xuXG4gICAgICBpZiAoIWZvcmNlTmV4dFBvcCAmJiBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19Mb2NhdGlvblV0aWxzX19bXCJiXCIgLyogbG9jYXRpb25zQXJlRXF1YWwgKi9dKShwcmV2TG9jYXRpb24sIGxvY2F0aW9uKSkgcmV0dXJuOyAvLyBBIGhhc2hjaGFuZ2UgZG9lc24ndCBhbHdheXMgPT0gbG9jYXRpb24gY2hhbmdlLlxuXG4gICAgICBpZiAoaWdub3JlUGF0aCA9PT0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fUGF0aFV0aWxzX19bXCJiXCIgLyogY3JlYXRlUGF0aCAqL10pKGxvY2F0aW9uKSkgcmV0dXJuOyAvLyBJZ25vcmUgdGhpcyBjaGFuZ2U7IHdlIGFscmVhZHkgc2V0U3RhdGUgaW4gcHVzaC9yZXBsYWNlLlxuXG4gICAgICBpZ25vcmVQYXRoID0gbnVsbDtcblxuICAgICAgaGFuZGxlUG9wKGxvY2F0aW9uKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGhhbmRsZVBvcCA9IGZ1bmN0aW9uIGhhbmRsZVBvcChsb2NhdGlvbikge1xuICAgIGlmIChmb3JjZU5leHRQb3ApIHtcbiAgICAgIGZvcmNlTmV4dFBvcCA9IGZhbHNlO1xuICAgICAgc2V0U3RhdGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGFjdGlvbiA9ICdQT1AnO1xuXG4gICAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgICBpZiAob2spIHtcbiAgICAgICAgICBzZXRTdGF0ZSh7IGFjdGlvbjogYWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24gfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV2ZXJ0UG9wKGxvY2F0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciByZXZlcnRQb3AgPSBmdW5jdGlvbiByZXZlcnRQb3AoZnJvbUxvY2F0aW9uKSB7XG4gICAgdmFyIHRvTG9jYXRpb24gPSBoaXN0b3J5LmxvY2F0aW9uO1xuXG4gICAgLy8gVE9ETzogV2UgY291bGQgcHJvYmFibHkgbWFrZSB0aGlzIG1vcmUgcmVsaWFibGUgYnlcbiAgICAvLyBrZWVwaW5nIGEgbGlzdCBvZiBwYXRocyB3ZSd2ZSBzZWVuIGluIHNlc3Npb25TdG9yYWdlLlxuICAgIC8vIEluc3RlYWQsIHdlIGp1c3QgZGVmYXVsdCB0byAwIGZvciBwYXRocyB3ZSBkb24ndCBrbm93LlxuXG4gICAgdmFyIHRvSW5kZXggPSBhbGxQYXRocy5sYXN0SW5kZXhPZihfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19QYXRoVXRpbHNfX1tcImJcIiAvKiBjcmVhdGVQYXRoICovXSkodG9Mb2NhdGlvbikpO1xuXG4gICAgaWYgKHRvSW5kZXggPT09IC0xKSB0b0luZGV4ID0gMDtcblxuICAgIHZhciBmcm9tSW5kZXggPSBhbGxQYXRocy5sYXN0SW5kZXhPZihfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19QYXRoVXRpbHNfX1tcImJcIiAvKiBjcmVhdGVQYXRoICovXSkoZnJvbUxvY2F0aW9uKSk7XG5cbiAgICBpZiAoZnJvbUluZGV4ID09PSAtMSkgZnJvbUluZGV4ID0gMDtcblxuICAgIHZhciBkZWx0YSA9IHRvSW5kZXggLSBmcm9tSW5kZXg7XG5cbiAgICBpZiAoZGVsdGEpIHtcbiAgICAgIGZvcmNlTmV4dFBvcCA9IHRydWU7XG4gICAgICBnbyhkZWx0YSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEVuc3VyZSB0aGUgaGFzaCBpcyBlbmNvZGVkIHByb3Blcmx5IGJlZm9yZSBkb2luZyBhbnl0aGluZyBlbHNlLlxuICB2YXIgcGF0aCA9IGdldEhhc2hQYXRoKCk7XG4gIHZhciBlbmNvZGVkUGF0aCA9IGVuY29kZVBhdGgocGF0aCk7XG5cbiAgaWYgKHBhdGggIT09IGVuY29kZWRQYXRoKSByZXBsYWNlSGFzaFBhdGgoZW5jb2RlZFBhdGgpO1xuXG4gIHZhciBpbml0aWFsTG9jYXRpb24gPSBnZXRET01Mb2NhdGlvbigpO1xuICB2YXIgYWxsUGF0aHMgPSBbX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fUGF0aFV0aWxzX19bXCJiXCIgLyogY3JlYXRlUGF0aCAqL10pKGluaXRpYWxMb2NhdGlvbildO1xuXG4gIC8vIFB1YmxpYyBpbnRlcmZhY2VcblxuICB2YXIgY3JlYXRlSHJlZiA9IGZ1bmN0aW9uIGNyZWF0ZUhyZWYobG9jYXRpb24pIHtcbiAgICByZXR1cm4gJyMnICsgZW5jb2RlUGF0aChiYXNlbmFtZSArIF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1BhdGhVdGlsc19fW1wiYlwiIC8qIGNyZWF0ZVBhdGggKi9dKShsb2NhdGlvbikpO1xuICB9O1xuXG4gIHZhciBwdXNoID0gZnVuY3Rpb24gcHVzaChwYXRoLCBzdGF0ZSkge1xuICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCgpKHN0YXRlID09PSB1bmRlZmluZWQsICdIYXNoIGhpc3RvcnkgY2Fubm90IHB1c2ggc3RhdGU7IGl0IGlzIGlnbm9yZWQnKTtcblxuICAgIHZhciBhY3Rpb24gPSAnUFVTSCc7XG4gICAgdmFyIGxvY2F0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fTG9jYXRpb25VdGlsc19fW1wiYVwiIC8qIGNyZWF0ZUxvY2F0aW9uICovXSkocGF0aCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGhpc3RvcnkubG9jYXRpb24pO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmICghb2spIHJldHVybjtcblxuICAgICAgdmFyIHBhdGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19QYXRoVXRpbHNfX1tcImJcIiAvKiBjcmVhdGVQYXRoICovXSkobG9jYXRpb24pO1xuICAgICAgdmFyIGVuY29kZWRQYXRoID0gZW5jb2RlUGF0aChiYXNlbmFtZSArIHBhdGgpO1xuICAgICAgdmFyIGhhc2hDaGFuZ2VkID0gZ2V0SGFzaFBhdGgoKSAhPT0gZW5jb2RlZFBhdGg7XG5cbiAgICAgIGlmIChoYXNoQ2hhbmdlZCkge1xuICAgICAgICAvLyBXZSBjYW5ub3QgdGVsbCBpZiBhIGhhc2hjaGFuZ2Ugd2FzIGNhdXNlZCBieSBhIFBVU0gsIHNvIHdlJ2RcbiAgICAgICAgLy8gcmF0aGVyIHNldFN0YXRlIGhlcmUgYW5kIGlnbm9yZSB0aGUgaGFzaGNoYW5nZS4gVGhlIGNhdmVhdCBoZXJlXG4gICAgICAgIC8vIGlzIHRoYXQgb3RoZXIgaGFzaCBoaXN0b3JpZXMgaW4gdGhlIHBhZ2Ugd2lsbCBjb25zaWRlciBpdCBhIFBPUC5cbiAgICAgICAgaWdub3JlUGF0aCA9IHBhdGg7XG4gICAgICAgIHB1c2hIYXNoUGF0aChlbmNvZGVkUGF0aCk7XG5cbiAgICAgICAgdmFyIHByZXZJbmRleCA9IGFsbFBhdGhzLmxhc3RJbmRleE9mKF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1BhdGhVdGlsc19fW1wiYlwiIC8qIGNyZWF0ZVBhdGggKi9dKShoaXN0b3J5LmxvY2F0aW9uKSk7XG4gICAgICAgIHZhciBuZXh0UGF0aHMgPSBhbGxQYXRocy5zbGljZSgwLCBwcmV2SW5kZXggPT09IC0xID8gMCA6IHByZXZJbmRleCArIDEpO1xuXG4gICAgICAgIG5leHRQYXRocy5wdXNoKHBhdGgpO1xuICAgICAgICBhbGxQYXRocyA9IG5leHRQYXRocztcblxuICAgICAgICBzZXRTdGF0ZSh7IGFjdGlvbjogYWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24gfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQoKShmYWxzZSwgJ0hhc2ggaGlzdG9yeSBjYW5ub3QgUFVTSCB0aGUgc2FtZSBwYXRoOyBhIG5ldyBlbnRyeSB3aWxsIG5vdCBiZSBhZGRlZCB0byB0aGUgaGlzdG9yeSBzdGFjaycpO1xuXG4gICAgICAgIHNldFN0YXRlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIHJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlKHBhdGgsIHN0YXRlKSB7XG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0KCkoc3RhdGUgPT09IHVuZGVmaW5lZCwgJ0hhc2ggaGlzdG9yeSBjYW5ub3QgcmVwbGFjZSBzdGF0ZTsgaXQgaXMgaWdub3JlZCcpO1xuXG4gICAgdmFyIGFjdGlvbiA9ICdSRVBMQUNFJztcbiAgICB2YXIgbG9jYXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19Mb2NhdGlvblV0aWxzX19bXCJhXCIgLyogY3JlYXRlTG9jYXRpb24gKi9dKShwYXRoLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgaGlzdG9yeS5sb2NhdGlvbik7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKCFvaykgcmV0dXJuO1xuXG4gICAgICB2YXIgcGF0aCA9IF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1BhdGhVdGlsc19fW1wiYlwiIC8qIGNyZWF0ZVBhdGggKi9dKShsb2NhdGlvbik7XG4gICAgICB2YXIgZW5jb2RlZFBhdGggPSBlbmNvZGVQYXRoKGJhc2VuYW1lICsgcGF0aCk7XG4gICAgICB2YXIgaGFzaENoYW5nZWQgPSBnZXRIYXNoUGF0aCgpICE9PSBlbmNvZGVkUGF0aDtcblxuICAgICAgaWYgKGhhc2hDaGFuZ2VkKSB7XG4gICAgICAgIC8vIFdlIGNhbm5vdCB0ZWxsIGlmIGEgaGFzaGNoYW5nZSB3YXMgY2F1c2VkIGJ5IGEgUkVQTEFDRSwgc28gd2UnZFxuICAgICAgICAvLyByYXRoZXIgc2V0U3RhdGUgaGVyZSBhbmQgaWdub3JlIHRoZSBoYXNoY2hhbmdlLiBUaGUgY2F2ZWF0IGhlcmVcbiAgICAgICAgLy8gaXMgdGhhdCBvdGhlciBoYXNoIGhpc3RvcmllcyBpbiB0aGUgcGFnZSB3aWxsIGNvbnNpZGVyIGl0IGEgUE9QLlxuICAgICAgICBpZ25vcmVQYXRoID0gcGF0aDtcbiAgICAgICAgcmVwbGFjZUhhc2hQYXRoKGVuY29kZWRQYXRoKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHByZXZJbmRleCA9IGFsbFBhdGhzLmluZGV4T2YoX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fUGF0aFV0aWxzX19bXCJiXCIgLyogY3JlYXRlUGF0aCAqL10pKGhpc3RvcnkubG9jYXRpb24pKTtcblxuICAgICAgaWYgKHByZXZJbmRleCAhPT0gLTEpIGFsbFBhdGhzW3ByZXZJbmRleF0gPSBwYXRoO1xuXG4gICAgICBzZXRTdGF0ZSh7IGFjdGlvbjogYWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24gfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdvID0gZnVuY3Rpb24gZ28obikge1xuICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCgpKGNhbkdvV2l0aG91dFJlbG9hZCwgJ0hhc2ggaGlzdG9yeSBnbyhuKSBjYXVzZXMgYSBmdWxsIHBhZ2UgcmVsb2FkIGluIHRoaXMgYnJvd3NlcicpO1xuXG4gICAgZ2xvYmFsSGlzdG9yeS5nbyhuKTtcbiAgfTtcblxuICB2YXIgZ29CYWNrID0gZnVuY3Rpb24gZ29CYWNrKCkge1xuICAgIHJldHVybiBnbygtMSk7XG4gIH07XG5cbiAgdmFyIGdvRm9yd2FyZCA9IGZ1bmN0aW9uIGdvRm9yd2FyZCgpIHtcbiAgICByZXR1cm4gZ28oMSk7XG4gIH07XG5cbiAgdmFyIGxpc3RlbmVyQ291bnQgPSAwO1xuXG4gIHZhciBjaGVja0RPTUxpc3RlbmVycyA9IGZ1bmN0aW9uIGNoZWNrRE9NTGlzdGVuZXJzKGRlbHRhKSB7XG4gICAgbGlzdGVuZXJDb3VudCArPSBkZWx0YTtcblxuICAgIGlmIChsaXN0ZW5lckNvdW50ID09PSAxKSB7XG4gICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19ET01VdGlsc19fW1wiZFwiIC8qIGFkZEV2ZW50TGlzdGVuZXIgKi9dKSh3aW5kb3csIEhhc2hDaGFuZ2VFdmVudCwgaGFuZGxlSGFzaENoYW5nZSk7XG4gICAgfSBlbHNlIGlmIChsaXN0ZW5lckNvdW50ID09PSAwKSB7XG4gICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19ET01VdGlsc19fW1wiZVwiIC8qIHJlbW92ZUV2ZW50TGlzdGVuZXIgKi9dKSh3aW5kb3csIEhhc2hDaGFuZ2VFdmVudCwgaGFuZGxlSGFzaENoYW5nZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBpc0Jsb2NrZWQgPSBmYWxzZTtcblxuICB2YXIgYmxvY2sgPSBmdW5jdGlvbiBibG9jaygpIHtcbiAgICB2YXIgcHJvbXB0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmYWxzZTtcblxuICAgIHZhciB1bmJsb2NrID0gdHJhbnNpdGlvbk1hbmFnZXIuc2V0UHJvbXB0KHByb21wdCk7XG5cbiAgICBpZiAoIWlzQmxvY2tlZCkge1xuICAgICAgY2hlY2tET01MaXN0ZW5lcnMoMSk7XG4gICAgICBpc0Jsb2NrZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaXNCbG9ja2VkKSB7XG4gICAgICAgIGlzQmxvY2tlZCA9IGZhbHNlO1xuICAgICAgICBjaGVja0RPTUxpc3RlbmVycygtMSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bmJsb2NrKCk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgbGlzdGVuID0gZnVuY3Rpb24gbGlzdGVuKGxpc3RlbmVyKSB7XG4gICAgdmFyIHVubGlzdGVuID0gdHJhbnNpdGlvbk1hbmFnZXIuYXBwZW5kTGlzdGVuZXIobGlzdGVuZXIpO1xuICAgIGNoZWNrRE9NTGlzdGVuZXJzKDEpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrRE9NTGlzdGVuZXJzKC0xKTtcbiAgICAgIHVubGlzdGVuKCk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgaGlzdG9yeSA9IHtcbiAgICBsZW5ndGg6IGdsb2JhbEhpc3RvcnkubGVuZ3RoLFxuICAgIGFjdGlvbjogJ1BPUCcsXG4gICAgbG9jYXRpb246IGluaXRpYWxMb2NhdGlvbixcbiAgICBjcmVhdGVIcmVmOiBjcmVhdGVIcmVmLFxuICAgIHB1c2g6IHB1c2gsXG4gICAgcmVwbGFjZTogcmVwbGFjZSxcbiAgICBnbzogZ28sXG4gICAgZ29CYWNrOiBnb0JhY2ssXG4gICAgZ29Gb3J3YXJkOiBnb0ZvcndhcmQsXG4gICAgYmxvY2s6IGJsb2NrLFxuICAgIGxpc3RlbjogbGlzdGVuXG4gIH07XG5cbiAgcmV0dXJuIGhpc3Rvcnk7XG59O1xuXG4vKiB1bnVzZWQgaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyB2YXIgX3VudXNlZF93ZWJwYWNrX2RlZmF1bHRfZXhwb3J0ID0gKGNyZWF0ZUhhc2hIaXN0b3J5KTtcblxuLyoqKi8gfSksXG4vKiAxNDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1BhdGhVdGlsc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19Mb2NhdGlvblV0aWxzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuXG5cblxuXG5cbnZhciBjbGFtcCA9IGZ1bmN0aW9uIGNsYW1wKG4sIGxvd2VyQm91bmQsIHVwcGVyQm91bmQpIHtcbiAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KG4sIGxvd2VyQm91bmQpLCB1cHBlckJvdW5kKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIGhpc3Rvcnkgb2JqZWN0IHRoYXQgc3RvcmVzIGxvY2F0aW9ucyBpbiBtZW1vcnkuXG4gKi9cbnZhciBjcmVhdGVNZW1vcnlIaXN0b3J5ID0gZnVuY3Rpb24gY3JlYXRlTWVtb3J5SGlzdG9yeSgpIHtcbiAgdmFyIHByb3BzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgdmFyIGdldFVzZXJDb25maXJtYXRpb24gPSBwcm9wcy5nZXRVc2VyQ29uZmlybWF0aW9uLFxuICAgICAgX3Byb3BzJGluaXRpYWxFbnRyaWVzID0gcHJvcHMuaW5pdGlhbEVudHJpZXMsXG4gICAgICBpbml0aWFsRW50cmllcyA9IF9wcm9wcyRpbml0aWFsRW50cmllcyA9PT0gdW5kZWZpbmVkID8gWycvJ10gOiBfcHJvcHMkaW5pdGlhbEVudHJpZXMsXG4gICAgICBfcHJvcHMkaW5pdGlhbEluZGV4ID0gcHJvcHMuaW5pdGlhbEluZGV4LFxuICAgICAgaW5pdGlhbEluZGV4ID0gX3Byb3BzJGluaXRpYWxJbmRleCA9PT0gdW5kZWZpbmVkID8gMCA6IF9wcm9wcyRpbml0aWFsSW5kZXgsXG4gICAgICBfcHJvcHMka2V5TGVuZ3RoID0gcHJvcHMua2V5TGVuZ3RoLFxuICAgICAga2V5TGVuZ3RoID0gX3Byb3BzJGtleUxlbmd0aCA9PT0gdW5kZWZpbmVkID8gNiA6IF9wcm9wcyRrZXlMZW5ndGg7XG5cblxuICB2YXIgdHJhbnNpdGlvbk1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcl9fW1wiYVwiIC8qIGRlZmF1bHQgKi9dKSgpO1xuXG4gIHZhciBzZXRTdGF0ZSA9IGZ1bmN0aW9uIHNldFN0YXRlKG5leHRTdGF0ZSkge1xuICAgIF9leHRlbmRzKGhpc3RvcnksIG5leHRTdGF0ZSk7XG5cbiAgICBoaXN0b3J5Lmxlbmd0aCA9IGhpc3RvcnkuZW50cmllcy5sZW5ndGg7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5ub3RpZnlMaXN0ZW5lcnMoaGlzdG9yeS5sb2NhdGlvbiwgaGlzdG9yeS5hY3Rpb24pO1xuICB9O1xuXG4gIHZhciBjcmVhdGVLZXkgPSBmdW5jdGlvbiBjcmVhdGVLZXkoKSB7XG4gICAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCBrZXlMZW5ndGgpO1xuICB9O1xuXG4gIHZhciBpbmRleCA9IGNsYW1wKGluaXRpYWxJbmRleCwgMCwgaW5pdGlhbEVudHJpZXMubGVuZ3RoIC0gMSk7XG4gIHZhciBlbnRyaWVzID0gaW5pdGlhbEVudHJpZXMubWFwKGZ1bmN0aW9uIChlbnRyeSkge1xuICAgIHJldHVybiB0eXBlb2YgZW50cnkgPT09ICdzdHJpbmcnID8gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fTG9jYXRpb25VdGlsc19fW1wiYVwiIC8qIGNyZWF0ZUxvY2F0aW9uICovXSkoZW50cnksIHVuZGVmaW5lZCwgY3JlYXRlS2V5KCkpIDogX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fTG9jYXRpb25VdGlsc19fW1wiYVwiIC8qIGNyZWF0ZUxvY2F0aW9uICovXSkoZW50cnksIHVuZGVmaW5lZCwgZW50cnkua2V5IHx8IGNyZWF0ZUtleSgpKTtcbiAgfSk7XG5cbiAgLy8gUHVibGljIGludGVyZmFjZVxuXG4gIHZhciBjcmVhdGVIcmVmID0gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19QYXRoVXRpbHNfX1tcImJcIiAvKiBjcmVhdGVQYXRoICovXTtcblxuICB2YXIgcHVzaCA9IGZ1bmN0aW9uIHB1c2gocGF0aCwgc3RhdGUpIHtcbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQoKSghKCh0eXBlb2YgcGF0aCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YocGF0aCkpID09PSAnb2JqZWN0JyAmJiBwYXRoLnN0YXRlICE9PSB1bmRlZmluZWQgJiYgc3RhdGUgIT09IHVuZGVmaW5lZCksICdZb3Ugc2hvdWxkIGF2b2lkIHByb3ZpZGluZyBhIDJuZCBzdGF0ZSBhcmd1bWVudCB0byBwdXNoIHdoZW4gdGhlIDFzdCAnICsgJ2FyZ3VtZW50IGlzIGEgbG9jYXRpb24tbGlrZSBvYmplY3QgdGhhdCBhbHJlYWR5IGhhcyBzdGF0ZTsgaXQgaXMgaWdub3JlZCcpO1xuXG4gICAgdmFyIGFjdGlvbiA9ICdQVVNIJztcbiAgICB2YXIgbG9jYXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19Mb2NhdGlvblV0aWxzX19bXCJhXCIgLyogY3JlYXRlTG9jYXRpb24gKi9dKShwYXRoLCBzdGF0ZSwgY3JlYXRlS2V5KCksIGhpc3RvcnkubG9jYXRpb24pO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmICghb2spIHJldHVybjtcblxuICAgICAgdmFyIHByZXZJbmRleCA9IGhpc3RvcnkuaW5kZXg7XG4gICAgICB2YXIgbmV4dEluZGV4ID0gcHJldkluZGV4ICsgMTtcblxuICAgICAgdmFyIG5leHRFbnRyaWVzID0gaGlzdG9yeS5lbnRyaWVzLnNsaWNlKDApO1xuICAgICAgaWYgKG5leHRFbnRyaWVzLmxlbmd0aCA+IG5leHRJbmRleCkge1xuICAgICAgICBuZXh0RW50cmllcy5zcGxpY2UobmV4dEluZGV4LCBuZXh0RW50cmllcy5sZW5ndGggLSBuZXh0SW5kZXgsIGxvY2F0aW9uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHRFbnRyaWVzLnB1c2gobG9jYXRpb24pO1xuICAgICAgfVxuXG4gICAgICBzZXRTdGF0ZSh7XG4gICAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sXG4gICAgICAgIGluZGV4OiBuZXh0SW5kZXgsXG4gICAgICAgIGVudHJpZXM6IG5leHRFbnRyaWVzXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgcmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UocGF0aCwgc3RhdGUpIHtcbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQoKSghKCh0eXBlb2YgcGF0aCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YocGF0aCkpID09PSAnb2JqZWN0JyAmJiBwYXRoLnN0YXRlICE9PSB1bmRlZmluZWQgJiYgc3RhdGUgIT09IHVuZGVmaW5lZCksICdZb3Ugc2hvdWxkIGF2b2lkIHByb3ZpZGluZyBhIDJuZCBzdGF0ZSBhcmd1bWVudCB0byByZXBsYWNlIHdoZW4gdGhlIDFzdCAnICsgJ2FyZ3VtZW50IGlzIGEgbG9jYXRpb24tbGlrZSBvYmplY3QgdGhhdCBhbHJlYWR5IGhhcyBzdGF0ZTsgaXQgaXMgaWdub3JlZCcpO1xuXG4gICAgdmFyIGFjdGlvbiA9ICdSRVBMQUNFJztcbiAgICB2YXIgbG9jYXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19Mb2NhdGlvblV0aWxzX19bXCJhXCIgLyogY3JlYXRlTG9jYXRpb24gKi9dKShwYXRoLCBzdGF0ZSwgY3JlYXRlS2V5KCksIGhpc3RvcnkubG9jYXRpb24pO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmICghb2spIHJldHVybjtcblxuICAgICAgaGlzdG9yeS5lbnRyaWVzW2hpc3RvcnkuaW5kZXhdID0gbG9jYXRpb247XG5cbiAgICAgIHNldFN0YXRlKHsgYWN0aW9uOiBhY3Rpb24sIGxvY2F0aW9uOiBsb2NhdGlvbiB9KTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgZ28gPSBmdW5jdGlvbiBnbyhuKSB7XG4gICAgdmFyIG5leHRJbmRleCA9IGNsYW1wKGhpc3RvcnkuaW5kZXggKyBuLCAwLCBoaXN0b3J5LmVudHJpZXMubGVuZ3RoIC0gMSk7XG5cbiAgICB2YXIgYWN0aW9uID0gJ1BPUCc7XG4gICAgdmFyIGxvY2F0aW9uID0gaGlzdG9yeS5lbnRyaWVzW25leHRJbmRleF07XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKG9rKSB7XG4gICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sXG4gICAgICAgICAgaW5kZXg6IG5leHRJbmRleFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE1pbWljIHRoZSBiZWhhdmlvciBvZiBET00gaGlzdG9yaWVzIGJ5XG4gICAgICAgIC8vIGNhdXNpbmcgYSByZW5kZXIgYWZ0ZXIgYSBjYW5jZWxsZWQgUE9QLlxuICAgICAgICBzZXRTdGF0ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHZhciBnb0JhY2sgPSBmdW5jdGlvbiBnb0JhY2soKSB7XG4gICAgcmV0dXJuIGdvKC0xKTtcbiAgfTtcblxuICB2YXIgZ29Gb3J3YXJkID0gZnVuY3Rpb24gZ29Gb3J3YXJkKCkge1xuICAgIHJldHVybiBnbygxKTtcbiAgfTtcblxuICB2YXIgY2FuR28gPSBmdW5jdGlvbiBjYW5HbyhuKSB7XG4gICAgdmFyIG5leHRJbmRleCA9IGhpc3RvcnkuaW5kZXggKyBuO1xuICAgIHJldHVybiBuZXh0SW5kZXggPj0gMCAmJiBuZXh0SW5kZXggPCBoaXN0b3J5LmVudHJpZXMubGVuZ3RoO1xuICB9O1xuXG4gIHZhciBibG9jayA9IGZ1bmN0aW9uIGJsb2NrKCkge1xuICAgIHZhciBwcm9tcHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlO1xuICAgIHJldHVybiB0cmFuc2l0aW9uTWFuYWdlci5zZXRQcm9tcHQocHJvbXB0KTtcbiAgfTtcblxuICB2YXIgbGlzdGVuID0gZnVuY3Rpb24gbGlzdGVuKGxpc3RlbmVyKSB7XG4gICAgcmV0dXJuIHRyYW5zaXRpb25NYW5hZ2VyLmFwcGVuZExpc3RlbmVyKGxpc3RlbmVyKTtcbiAgfTtcblxuICB2YXIgaGlzdG9yeSA9IHtcbiAgICBsZW5ndGg6IGVudHJpZXMubGVuZ3RoLFxuICAgIGFjdGlvbjogJ1BPUCcsXG4gICAgbG9jYXRpb246IGVudHJpZXNbaW5kZXhdLFxuICAgIGluZGV4OiBpbmRleCxcbiAgICBlbnRyaWVzOiBlbnRyaWVzLFxuICAgIGNyZWF0ZUhyZWY6IGNyZWF0ZUhyZWYsXG4gICAgcHVzaDogcHVzaCxcbiAgICByZXBsYWNlOiByZXBsYWNlLFxuICAgIGdvOiBnbyxcbiAgICBnb0JhY2s6IGdvQmFjayxcbiAgICBnb0ZvcndhcmQ6IGdvRm9yd2FyZCxcbiAgICBjYW5HbzogY2FuR28sXG4gICAgYmxvY2s6IGJsb2NrLFxuICAgIGxpc3RlbjogbGlzdGVuXG4gIH07XG5cbiAgcmV0dXJuIGhpc3Rvcnk7XG59O1xuXG4vKiB1bnVzZWQgaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyB2YXIgX3VudXNlZF93ZWJwYWNrX2RlZmF1bHRfZXhwb3J0ID0gKGNyZWF0ZU1lbW9yeUhpc3RvcnkpO1xuXG4vKioqLyB9KSxcbi8qIDE0MSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2NyZWF0ZUJyb3dzZXJIaXN0b3J5X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOCk7XG4vKiB1bnVzZWQgaGFybW9ueSByZWV4cG9ydCBjcmVhdGVCcm93c2VySGlzdG9yeSAqL1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fY3JlYXRlSGFzaEhpc3RvcnlfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTM5KTtcbi8qIHVudXNlZCBoYXJtb255IHJlZXhwb3J0IGNyZWF0ZUhhc2hIaXN0b3J5ICovXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19jcmVhdGVNZW1vcnlIaXN0b3J5X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MCk7XG4vKiB1bnVzZWQgaGFybW9ueSByZWV4cG9ydCBjcmVhdGVNZW1vcnlIaXN0b3J5ICovXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19Mb2NhdGlvblV0aWxzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImFcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX0xvY2F0aW9uVXRpbHNfX1tcImFcIl07IH0pO1xuLyogaGFybW9ueSByZWV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiYlwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fTG9jYXRpb25VdGlsc19fW1wiYlwiXTsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19QYXRoVXRpbHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuLyogdW51c2VkIGhhcm1vbnkgcmVleHBvcnQgcGFyc2VQYXRoICovXG4vKiB1bnVzZWQgaGFybW9ueSByZWV4cG9ydCBjcmVhdGVQYXRoICovXG5cblxuXG5cblxuXG5cblxuXG5cbi8qKiovIH0pLFxuLyogMTQyICovLFxuLyogMTQzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXG52YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXG52YXIgX2tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMik7XG5cbnZhciBfa2V5czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9rZXlzKTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMik7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7XG5cbnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblxudmFyIF9pbmhlcml0czIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXG52YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cbmV4cG9ydHMuZ2V0U3R5bGVzID0gZ2V0U3R5bGVzO1xuXG52YXIgX3NpbXBsZUFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cbnZhciBfc2ltcGxlQXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NpbXBsZUFzc2lnbik7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX0ljb25CdXR0b24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblxudmFyIF9JY29uQnV0dG9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ljb25CdXR0b24pO1xuXG52YXIgX21lbnUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NSk7XG5cbnZhciBfbWVudTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tZW51KTtcblxudmFyIF9QYXBlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXG52YXIgX1BhcGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BhcGVyKTtcblxudmFyIF9wcm9wVHlwZXMzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cbnZhciBfcHJvcFR5cGVzNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlczMpO1xuXG52YXIgX3dhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBnZXRTdHlsZXMocHJvcHMsIGNvbnRleHQpIHtcbiAgdmFyIF9jb250ZXh0JG11aVRoZW1lID0gY29udGV4dC5tdWlUaGVtZSxcbiAgICAgIGFwcEJhciA9IF9jb250ZXh0JG11aVRoZW1lLmFwcEJhcixcbiAgICAgIGljb25CdXR0b25TaXplID0gX2NvbnRleHQkbXVpVGhlbWUuYnV0dG9uLmljb25CdXR0b25TaXplLFxuICAgICAgekluZGV4ID0gX2NvbnRleHQkbXVpVGhlbWUuekluZGV4O1xuXG5cbiAgdmFyIGZsYXRCdXR0b25TaXplID0gMzY7XG5cbiAgdmFyIHN0eWxlcyA9IHtcbiAgICByb290OiB7XG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgIHpJbmRleDogekluZGV4LmFwcEJhcixcbiAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IGFwcEJhci5jb2xvcixcbiAgICAgIHBhZGRpbmdMZWZ0OiBhcHBCYXIucGFkZGluZyxcbiAgICAgIHBhZGRpbmdSaWdodDogYXBwQmFyLnBhZGRpbmdcbiAgICB9LFxuICAgIHRpdGxlOiB7XG4gICAgICB3aGl0ZVNwYWNlOiAnbm93cmFwJyxcbiAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICAgIHRleHRPdmVyZmxvdzogJ2VsbGlwc2lzJyxcbiAgICAgIG1hcmdpbjogMCxcbiAgICAgIHBhZGRpbmdUb3A6IDAsXG4gICAgICBsZXR0ZXJTcGFjaW5nOiAwLFxuICAgICAgZm9udFNpemU6IDI0LFxuICAgICAgZm9udFdlaWdodDogYXBwQmFyLnRpdGxlRm9udFdlaWdodCxcbiAgICAgIGNvbG9yOiBhcHBCYXIudGV4dENvbG9yLFxuICAgICAgaGVpZ2h0OiBhcHBCYXIuaGVpZ2h0LFxuICAgICAgbGluZUhlaWdodDogYXBwQmFyLmhlaWdodCArICdweCdcbiAgICB9LFxuICAgIG1haW5FbGVtZW50OiB7XG4gICAgICBib3hGbGV4OiAxLFxuICAgICAgZmxleDogJzEnXG4gICAgfSxcbiAgICBpY29uQnV0dG9uU3R5bGU6IHtcbiAgICAgIG1hcmdpblRvcDogKGFwcEJhci5oZWlnaHQgLSBpY29uQnV0dG9uU2l6ZSkgLyAyLFxuICAgICAgbWFyZ2luUmlnaHQ6IDgsXG4gICAgICBtYXJnaW5MZWZ0OiAtMTZcbiAgICB9LFxuICAgIGljb25CdXR0b25JY29uU3R5bGU6IHtcbiAgICAgIGZpbGw6IGFwcEJhci50ZXh0Q29sb3IsXG4gICAgICBjb2xvcjogYXBwQmFyLnRleHRDb2xvclxuICAgIH0sXG4gICAgZmxhdEJ1dHRvbjoge1xuICAgICAgY29sb3I6IGFwcEJhci50ZXh0Q29sb3IsXG4gICAgICBtYXJnaW5Ub3A6IChpY29uQnV0dG9uU2l6ZSAtIGZsYXRCdXR0b25TaXplKSAvIDIgKyAxXG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBzdHlsZXM7XG59XG5cbnZhciBBcHBCYXIgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShBcHBCYXIsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEFwcEJhcigpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBBcHBCYXIpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChfcmVmID0gQXBwQmFyLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShBcHBCYXIpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5oYW5kbGVUb3VjaFRhcExlZnRJY29uQnV0dG9uID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoX3RoaXMucHJvcHMub25MZWZ0SWNvbkJ1dHRvblRvdWNoVGFwKSB7XG4gICAgICAgIF90aGlzLnByb3BzLm9uTGVmdEljb25CdXR0b25Ub3VjaFRhcChldmVudCk7XG4gICAgICB9XG4gICAgfSwgX3RoaXMuaGFuZGxlVG91Y2hUYXBSaWdodEljb25CdXR0b24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmIChfdGhpcy5wcm9wcy5vblJpZ2h0SWNvbkJ1dHRvblRvdWNoVGFwKSB7XG4gICAgICAgIF90aGlzLnByb3BzLm9uUmlnaHRJY29uQnV0dG9uVG91Y2hUYXAoZXZlbnQpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmhhbmRsZVRpdGxlVG91Y2hUYXAgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmIChfdGhpcy5wcm9wcy5vblRpdGxlVG91Y2hUYXApIHtcbiAgICAgICAgX3RoaXMucHJvcHMub25UaXRsZVRvdWNoVGFwKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9LCBfdGVtcCksICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkoX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoQXBwQmFyLCBbe1xuICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgZmFsc2UgPyAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKCF0aGlzLnByb3BzLmljb25FbGVtZW50TGVmdCB8fCAhdGhpcy5wcm9wcy5pY29uQ2xhc3NOYW1lTGVmdCwgJ01hdGVyaWFsLVVJOiBQcm9wZXJ0aWVzIGljb25FbGVtZW50TGVmdFxcbiAgICAgIGFuZCBpY29uQ2xhc3NOYW1lTGVmdCBjYW5ub3QgYmUgc2ltdWx0YW5lb3VzbHkgZGVmaW5lZC4gUGxlYXNlIHVzZSBvbmUgb3IgdGhlIG90aGVyLicpIDogdm9pZCAwO1xuXG4gICAgICAgZmFsc2UgPyAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKCF0aGlzLnByb3BzLmljb25FbGVtZW50UmlnaHQgfHwgIXRoaXMucHJvcHMuaWNvbkNsYXNzTmFtZVJpZ2h0LCAnTWF0ZXJpYWwtVUk6IFByb3BlcnRpZXMgaWNvbkVsZW1lbnRSaWdodFxcbiAgICAgIGFuZCBpY29uQ2xhc3NOYW1lUmlnaHQgY2Fubm90IGJlIHNpbXVsdGFuZW91c2x5IGRlZmluZWQuIFBsZWFzZSB1c2Ugb25lIG9yIHRoZSBvdGhlci4nKSA6IHZvaWQgMDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICB0aXRsZSA9IF9wcm9wcy50aXRsZSxcbiAgICAgICAgICB0aXRsZVN0eWxlID0gX3Byb3BzLnRpdGxlU3R5bGUsXG4gICAgICAgICAgaWNvblN0eWxlTGVmdCA9IF9wcm9wcy5pY29uU3R5bGVMZWZ0LFxuICAgICAgICAgIGljb25TdHlsZVJpZ2h0ID0gX3Byb3BzLmljb25TdHlsZVJpZ2h0LFxuICAgICAgICAgIG9uVGl0bGVUb3VjaFRhcCA9IF9wcm9wcy5vblRpdGxlVG91Y2hUYXAsXG4gICAgICAgICAgc2hvd01lbnVJY29uQnV0dG9uID0gX3Byb3BzLnNob3dNZW51SWNvbkJ1dHRvbixcbiAgICAgICAgICBpY29uRWxlbWVudExlZnQgPSBfcHJvcHMuaWNvbkVsZW1lbnRMZWZ0LFxuICAgICAgICAgIGljb25FbGVtZW50UmlnaHQgPSBfcHJvcHMuaWNvbkVsZW1lbnRSaWdodCxcbiAgICAgICAgICBpY29uQ2xhc3NOYW1lTGVmdCA9IF9wcm9wcy5pY29uQ2xhc3NOYW1lTGVmdCxcbiAgICAgICAgICBpY29uQ2xhc3NOYW1lUmlnaHQgPSBfcHJvcHMuaWNvbkNsYXNzTmFtZVJpZ2h0LFxuICAgICAgICAgIG9uTGVmdEljb25CdXR0b25Ub3VjaFRhcCA9IF9wcm9wcy5vbkxlZnRJY29uQnV0dG9uVG91Y2hUYXAsXG4gICAgICAgICAgb25SaWdodEljb25CdXR0b25Ub3VjaFRhcCA9IF9wcm9wcy5vblJpZ2h0SWNvbkJ1dHRvblRvdWNoVGFwLFxuICAgICAgICAgIGNsYXNzTmFtZSA9IF9wcm9wcy5jbGFzc05hbWUsXG4gICAgICAgICAgc3R5bGUgPSBfcHJvcHMuc3R5bGUsXG4gICAgICAgICAgekRlcHRoID0gX3Byb3BzLnpEZXB0aCxcbiAgICAgICAgICBjaGlsZHJlbiA9IF9wcm9wcy5jaGlsZHJlbixcbiAgICAgICAgICBvdGhlciA9ICgwLCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzLmRlZmF1bHQpKF9wcm9wcywgWyd0aXRsZScsICd0aXRsZVN0eWxlJywgJ2ljb25TdHlsZUxlZnQnLCAnaWNvblN0eWxlUmlnaHQnLCAnb25UaXRsZVRvdWNoVGFwJywgJ3Nob3dNZW51SWNvbkJ1dHRvbicsICdpY29uRWxlbWVudExlZnQnLCAnaWNvbkVsZW1lbnRSaWdodCcsICdpY29uQ2xhc3NOYW1lTGVmdCcsICdpY29uQ2xhc3NOYW1lUmlnaHQnLCAnb25MZWZ0SWNvbkJ1dHRvblRvdWNoVGFwJywgJ29uUmlnaHRJY29uQnV0dG9uVG91Y2hUYXAnLCAnY2xhc3NOYW1lJywgJ3N0eWxlJywgJ3pEZXB0aCcsICdjaGlsZHJlbiddKTtcbiAgICAgIHZhciBwcmVwYXJlU3R5bGVzID0gdGhpcy5jb250ZXh0Lm11aVRoZW1lLnByZXBhcmVTdHlsZXM7XG5cbiAgICAgIHZhciBzdHlsZXMgPSBnZXRTdHlsZXModGhpcy5wcm9wcywgdGhpcy5jb250ZXh0KTtcblxuICAgICAgdmFyIG1lbnVFbGVtZW50TGVmdCA9IHZvaWQgMDtcbiAgICAgIHZhciBtZW51RWxlbWVudFJpZ2h0ID0gdm9pZCAwO1xuXG4gICAgICAvLyBJZiB0aGUgdGl0bGUgaXMgYSBzdHJpbmcsIHdyYXAgaW4gYW4gaDEgdGFnLlxuICAgICAgLy8gSWYgbm90LCB3cmFwIGluIGEgZGl2IHRhZy5cbiAgICAgIHZhciB0aXRsZUNvbXBvbmVudCA9IHR5cGVvZiB0aXRsZSA9PT0gJ3N0cmluZycgfHwgdGl0bGUgaW5zdGFuY2VvZiBTdHJpbmcgPyAnaDEnIDogJ2Rpdic7XG5cbiAgICAgIHZhciB0aXRsZUVsZW1lbnQgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCh0aXRsZUNvbXBvbmVudCwge1xuICAgICAgICBvblRvdWNoVGFwOiB0aGlzLmhhbmRsZVRpdGxlVG91Y2hUYXAsXG4gICAgICAgIHN0eWxlOiBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMudGl0bGUsIHN0eWxlcy5tYWluRWxlbWVudCwgdGl0bGVTdHlsZSkpXG4gICAgICB9LCB0aXRsZSk7XG5cbiAgICAgIHZhciBpY29uTGVmdFN0eWxlID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBzdHlsZXMuaWNvbkJ1dHRvblN0eWxlLCBpY29uU3R5bGVMZWZ0KTtcblxuICAgICAgaWYgKHNob3dNZW51SWNvbkJ1dHRvbikge1xuICAgICAgICBpZiAoaWNvbkVsZW1lbnRMZWZ0KSB7XG4gICAgICAgICAgdmFyIGljb25FbGVtZW50TGVmdFByb3BzID0ge307XG5cbiAgICAgICAgICBpZiAoaWNvbkVsZW1lbnRMZWZ0LnR5cGUubXVpTmFtZSA9PT0gJ0ljb25CdXR0b24nKSB7XG4gICAgICAgICAgICB2YXIgaWNvbkVsZW1MZWZ0Q2hpbGRyZW4gPSBpY29uRWxlbWVudExlZnQucHJvcHMuY2hpbGRyZW47XG4gICAgICAgICAgICB2YXIgaWNvbkJ1dHRvbkljb25TdHlsZSA9ICEoaWNvbkVsZW1MZWZ0Q2hpbGRyZW4gJiYgaWNvbkVsZW1MZWZ0Q2hpbGRyZW4ucHJvcHMgJiYgaWNvbkVsZW1MZWZ0Q2hpbGRyZW4ucHJvcHMuY29sb3IpID8gc3R5bGVzLmljb25CdXR0b25JY29uU3R5bGUgOiBudWxsO1xuXG4gICAgICAgICAgICBpY29uRWxlbWVudExlZnRQcm9wcy5pY29uU3R5bGUgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe30sIGljb25CdXR0b25JY29uU3R5bGUsIGljb25FbGVtZW50TGVmdC5wcm9wcy5pY29uU3R5bGUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghaWNvbkVsZW1lbnRMZWZ0LnByb3BzLm9uVG91Y2hUYXAgJiYgdGhpcy5wcm9wcy5vbkxlZnRJY29uQnV0dG9uVG91Y2hUYXApIHtcbiAgICAgICAgICAgIGljb25FbGVtZW50TGVmdFByb3BzLm9uVG91Y2hUYXAgPSB0aGlzLmhhbmRsZVRvdWNoVGFwTGVmdEljb25CdXR0b247XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbWVudUVsZW1lbnRMZWZ0ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgc3R5bGU6IHByZXBhcmVTdHlsZXMoaWNvbkxlZnRTdHlsZSkgfSxcbiAgICAgICAgICAgICgwLCBfa2V5czIuZGVmYXVsdCkoaWNvbkVsZW1lbnRMZWZ0UHJvcHMpLmxlbmd0aCA+IDAgPyAoMCwgX3JlYWN0LmNsb25lRWxlbWVudCkoaWNvbkVsZW1lbnRMZWZ0LCBpY29uRWxlbWVudExlZnRQcm9wcykgOiBpY29uRWxlbWVudExlZnRcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1lbnVFbGVtZW50TGVmdCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgX0ljb25CdXR0b24yLmRlZmF1bHQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHN0eWxlOiBpY29uTGVmdFN0eWxlLFxuICAgICAgICAgICAgICBpY29uU3R5bGU6IHN0eWxlcy5pY29uQnV0dG9uSWNvblN0eWxlLFxuICAgICAgICAgICAgICBpY29uQ2xhc3NOYW1lOiBpY29uQ2xhc3NOYW1lTGVmdCxcbiAgICAgICAgICAgICAgb25Ub3VjaFRhcDogdGhpcy5oYW5kbGVUb3VjaFRhcExlZnRJY29uQnV0dG9uXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaWNvbkNsYXNzTmFtZUxlZnQgPyAnJyA6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9tZW51Mi5kZWZhdWx0LCB7IHN0eWxlOiAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe30sIHN0eWxlcy5pY29uQnV0dG9uSWNvblN0eWxlKSB9KVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGljb25SaWdodFN0eWxlID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBzdHlsZXMuaWNvbkJ1dHRvblN0eWxlLCB7XG4gICAgICAgIG1hcmdpblJpZ2h0OiAtMTYsXG4gICAgICAgIG1hcmdpbkxlZnQ6ICdhdXRvJ1xuICAgICAgfSwgaWNvblN0eWxlUmlnaHQpO1xuXG4gICAgICBpZiAoaWNvbkVsZW1lbnRSaWdodCkge1xuICAgICAgICB2YXIgaWNvbkVsZW1lbnRSaWdodFByb3BzID0ge307XG5cbiAgICAgICAgc3dpdGNoIChpY29uRWxlbWVudFJpZ2h0LnR5cGUubXVpTmFtZSkge1xuICAgICAgICAgIGNhc2UgJ0ljb25NZW51JzpcbiAgICAgICAgICBjYXNlICdJY29uQnV0dG9uJzpcbiAgICAgICAgICAgIHZhciBpY29uRWxlbVJpZ2h0Q2hpbGRyZW4gPSBpY29uRWxlbWVudFJpZ2h0LnByb3BzLmNoaWxkcmVuO1xuICAgICAgICAgICAgdmFyIF9pY29uQnV0dG9uSWNvblN0eWxlID0gIShpY29uRWxlbVJpZ2h0Q2hpbGRyZW4gJiYgaWNvbkVsZW1SaWdodENoaWxkcmVuLnByb3BzICYmIGljb25FbGVtUmlnaHRDaGlsZHJlbi5wcm9wcy5jb2xvcikgPyBzdHlsZXMuaWNvbkJ1dHRvbkljb25TdHlsZSA6IG51bGw7XG5cbiAgICAgICAgICAgIGljb25FbGVtZW50UmlnaHRQcm9wcy5pY29uU3R5bGUgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe30sIF9pY29uQnV0dG9uSWNvblN0eWxlLCBpY29uRWxlbWVudFJpZ2h0LnByb3BzLmljb25TdHlsZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ0ZsYXRCdXR0b24nOlxuICAgICAgICAgICAgaWNvbkVsZW1lbnRSaWdodFByb3BzLnN0eWxlID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBzdHlsZXMuZmxhdEJ1dHRvbiwgaWNvbkVsZW1lbnRSaWdodC5wcm9wcy5zdHlsZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWljb25FbGVtZW50UmlnaHQucHJvcHMub25Ub3VjaFRhcCAmJiB0aGlzLnByb3BzLm9uUmlnaHRJY29uQnV0dG9uVG91Y2hUYXApIHtcbiAgICAgICAgICBpY29uRWxlbWVudFJpZ2h0UHJvcHMub25Ub3VjaFRhcCA9IHRoaXMuaGFuZGxlVG91Y2hUYXBSaWdodEljb25CdXR0b247XG4gICAgICAgIH1cblxuICAgICAgICBtZW51RWxlbWVudFJpZ2h0ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgeyBzdHlsZTogcHJlcGFyZVN0eWxlcyhpY29uUmlnaHRTdHlsZSkgfSxcbiAgICAgICAgICAoMCwgX2tleXMyLmRlZmF1bHQpKGljb25FbGVtZW50UmlnaHRQcm9wcykubGVuZ3RoID4gMCA/ICgwLCBfcmVhY3QuY2xvbmVFbGVtZW50KShpY29uRWxlbWVudFJpZ2h0LCBpY29uRWxlbWVudFJpZ2h0UHJvcHMpIDogaWNvbkVsZW1lbnRSaWdodFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChpY29uQ2xhc3NOYW1lUmlnaHQpIHtcbiAgICAgICAgbWVudUVsZW1lbnRSaWdodCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9JY29uQnV0dG9uMi5kZWZhdWx0LCB7XG4gICAgICAgICAgc3R5bGU6IGljb25SaWdodFN0eWxlLFxuICAgICAgICAgIGljb25TdHlsZTogc3R5bGVzLmljb25CdXR0b25JY29uU3R5bGUsXG4gICAgICAgICAgaWNvbkNsYXNzTmFtZTogaWNvbkNsYXNzTmFtZVJpZ2h0LFxuICAgICAgICAgIG9uVG91Y2hUYXA6IHRoaXMuaGFuZGxlVG91Y2hUYXBSaWdodEljb25CdXR0b25cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgX1BhcGVyMi5kZWZhdWx0LFxuICAgICAgICAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBvdGhlciwge1xuICAgICAgICAgIHJvdW5kZWQ6IGZhbHNlLFxuICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICAgIHN0eWxlOiAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe30sIHN0eWxlcy5yb290LCBzdHlsZSksXG4gICAgICAgICAgekRlcHRoOiB6RGVwdGhcbiAgICAgICAgfSksXG4gICAgICAgIG1lbnVFbGVtZW50TGVmdCxcbiAgICAgICAgdGl0bGVFbGVtZW50LFxuICAgICAgICBtZW51RWxlbWVudFJpZ2h0LFxuICAgICAgICBjaGlsZHJlblxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIEFwcEJhcjtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbkFwcEJhci5tdWlOYW1lID0gJ0FwcEJhcic7XG5BcHBCYXIuZGVmYXVsdFByb3BzID0ge1xuICBzaG93TWVudUljb25CdXR0b246IHRydWUsXG4gIHRpdGxlOiAnJyxcbiAgekRlcHRoOiAxXG59O1xuQXBwQmFyLmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5BcHBCYXIucHJvcFR5cGVzID0gIGZhbHNlID8ge1xuICAvKipcbiAgICogQ2FuIGJlIHVzZWQgdG8gcmVuZGVyIGEgdGFiIGluc2lkZSBhbiBhcHAgYmFyIGZvciBpbnN0YW5jZS5cbiAgICovXG4gIGNoaWxkcmVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIC8qKlxuICAgKiBBcHBsaWVkIHRvIHRoZSBhcHAgYmFyJ3Mgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgY2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIFRoZSBjbGFzc25hbWUgb2YgdGhlIGljb24gb24gdGhlIGxlZnQgb2YgdGhlIGFwcCBiYXIuXG4gICAqIElmIHlvdSBhcmUgdXNpbmcgYSBzdHlsZXNoZWV0IGZvciB5b3VyIGljb25zLCBlbnRlciB0aGUgY2xhc3MgbmFtZSBmb3IgdGhlIGljb24gdG8gYmUgdXNlZCBoZXJlLlxuICAgKi9cbiAgaWNvbkNsYXNzTmFtZUxlZnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogU2ltaWxpYXIgdG8gdGhlIGljb25DbGFzc05hbWVMZWZ0IHByb3AgZXhjZXB0IHRoYXRcbiAgICogaXQgYXBwbGllcyB0byB0aGUgaWNvbiBkaXNwbGF5ZWQgb24gdGhlIHJpZ2h0IG9mIHRoZSBhcHAgYmFyLlxuICAgKi9cbiAgaWNvbkNsYXNzTmFtZVJpZ2h0OiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIFRoZSBjdXN0b20gZWxlbWVudCB0byBiZSBkaXNwbGF5ZWQgb24gdGhlIGxlZnQgc2lkZSBvZiB0aGVcbiAgICogYXBwIGJhciBzdWNoIGFzIGFuIFN2Z0ljb24uXG4gICAqL1xuICBpY29uRWxlbWVudExlZnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZWxlbWVudCxcbiAgLyoqXG4gICAqIFNpbWlsaWFyIHRvIHRoZSBpY29uRWxlbWVudExlZnQgcHJvcCBleGNlcHQgdGhhdCB0aGlzIGVsZW1lbnQgaXMgZGlzcGxheWVkIG9uIHRoZSByaWdodCBvZiB0aGUgYXBwIGJhci5cbiAgICovXG4gIGljb25FbGVtZW50UmlnaHQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZWxlbWVudCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBlbGVtZW50IGRpc3BsYXllZCBvbiB0aGUgbGVmdCBzaWRlIG9mIHRoZSBhcHAgYmFyLlxuICAgKi9cbiAgaWNvblN0eWxlTGVmdDogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgZWxlbWVudCBkaXNwbGF5ZWQgb24gdGhlIHJpZ2h0IHNpZGUgb2YgdGhlIGFwcCBiYXIuXG4gICAqL1xuICBpY29uU3R5bGVSaWdodDogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmdW5jdGlvbiBmb3Igd2hlbiB0aGUgbGVmdCBpY29uIGlzIHNlbGVjdGVkIHZpYSBhIHRvdWNoIHRhcC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IFRvdWNoVGFwIGV2ZW50IHRhcmdldGluZyB0aGUgbGVmdCBgSWNvbkJ1dHRvbmAuXG4gICAqL1xuICBvbkxlZnRJY29uQnV0dG9uVG91Y2hUYXA6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZvciB3aGVuIHRoZSByaWdodCBpY29uIGlzIHNlbGVjdGVkIHZpYSBhIHRvdWNoIHRhcC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IFRvdWNoVGFwIGV2ZW50IHRhcmdldGluZyB0aGUgcmlnaHQgYEljb25CdXR0b25gLlxuICAgKi9cbiAgb25SaWdodEljb25CdXR0b25Ub3VjaFRhcDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gZm9yIHdoZW4gdGhlIHRpdGxlIHRleHQgaXMgc2VsZWN0ZWQgdmlhIGEgdG91Y2ggdGFwLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgVG91Y2hUYXAgZXZlbnQgdGFyZ2V0aW5nIHRoZSBgdGl0bGVgIG5vZGUuXG4gICAqL1xuICBvblRpdGxlVG91Y2hUYXA6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hldGhlciBvciBub3QgdG8gZGlzcGxheSB0aGUgTWVudSBpY29uIG5leHQgdG8gdGhlIHRpdGxlLlxuICAgKiBTZXR0aW5nIHRoaXMgcHJvcCB0byBmYWxzZSB3aWxsIGhpZGUgdGhlIGljb24uXG4gICAqL1xuICBzaG93TWVudUljb25CdXR0b246IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBUaGUgdGl0bGUgdG8gZGlzcGxheSBvbiB0aGUgYXBwIGJhci5cbiAgICovXG4gIHRpdGxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgYXBwIGJhcidzIHRpdGxlIGVsZW1lbnQuXG4gICAqL1xuICB0aXRsZVN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIFRoZSB6RGVwdGggb2YgdGhlIGNvbXBvbmVudC5cbiAgICogVGhlIHNoYWRvdyBvZiB0aGUgYXBwIGJhciBpcyBhbHNvIGRlcGVuZGVudCBvbiB0aGlzIHByb3BlcnR5LlxuICAgKi9cbiAgekRlcHRoOiBfcHJvcFR5cGVzNC5kZWZhdWx0LnpEZXB0aFxufSA6IHt9O1xuZXhwb3J0cy5kZWZhdWx0ID0gQXBwQmFyO1xuXG4vKioqLyB9KSxcbi8qIDE0NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdW5kZWZpbmVkO1xuXG52YXIgX0FwcEJhciA9IF9fd2VicGFja19yZXF1aXJlX18oMTQzKTtcblxudmFyIF9BcHBCYXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQXBwQmFyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZXhwb3J0cy5kZWZhdWx0ID0gX0FwcEJhcjIuZGVmYXVsdDtcblxuLyoqKi8gfSksXG4vKiAxNDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cbnZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RXaXRob3V0UHJvcGVydGllczIpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7XG5cbnZhciBfaW5oZXJpdHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG52YXIgX3NpbXBsZUFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cbnZhciBfc2ltcGxlQXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NpbXBsZUFzc2lnbik7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX0VuaGFuY2VkU3dpdGNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTcpO1xuXG52YXIgX0VuaGFuY2VkU3dpdGNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0VuaGFuY2VkU3dpdGNoKTtcblxudmFyIF90cmFuc2l0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXG52YXIgX3RyYW5zaXRpb25zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RyYW5zaXRpb25zKTtcblxudmFyIF9jaGVja0JveE91dGxpbmVCbGFuayA9IF9fd2VicGFja19yZXF1aXJlX18oMTY3KTtcblxudmFyIF9jaGVja0JveE91dGxpbmVCbGFuazIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jaGVja0JveE91dGxpbmVCbGFuayk7XG5cbnZhciBfY2hlY2tCb3ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OCk7XG5cbnZhciBfY2hlY2tCb3gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hlY2tCb3gpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBnZXRTdHlsZXMocHJvcHMsIGNvbnRleHQpIHtcbiAgdmFyIGNoZWNrYm94ID0gY29udGV4dC5tdWlUaGVtZS5jaGVja2JveDtcblxuICB2YXIgY2hlY2tib3hTaXplID0gMjQ7XG5cbiAgcmV0dXJuIHtcbiAgICBpY29uOiB7XG4gICAgICBoZWlnaHQ6IGNoZWNrYm94U2l6ZSxcbiAgICAgIHdpZHRoOiBjaGVja2JveFNpemVcbiAgICB9LFxuICAgIGNoZWNrOiB7XG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIG9wYWNpdHk6IDAsXG4gICAgICB0cmFuc2Zvcm06ICdzY2FsZSgwKScsXG4gICAgICB0cmFuc2l0aW9uT3JpZ2luOiAnNTAlIDUwJScsXG4gICAgICB0cmFuc2l0aW9uOiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnNDUwbXMnLCAnb3BhY2l0eScsICcwbXMnKSArICcsICcgKyBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnMG1zJywgJ3RyYW5zZm9ybScsICc0NTBtcycpLFxuICAgICAgZmlsbDogY2hlY2tib3guY2hlY2tlZENvbG9yXG4gICAgfSxcbiAgICBjaGVja1doZW5Td2l0Y2hlZDoge1xuICAgICAgb3BhY2l0eTogMSxcbiAgICAgIHRyYW5zZm9ybTogJ3NjYWxlKDEpJyxcbiAgICAgIHRyYW5zaXRpb246IF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KCcwbXMnLCAnb3BhY2l0eScsICcwbXMnKSArICcsICcgKyBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnODAwbXMnLCAndHJhbnNmb3JtJywgJzBtcycpXG4gICAgfSxcbiAgICBjaGVja1doZW5EaXNhYmxlZDoge1xuICAgICAgZmlsbDogY2hlY2tib3guZGlzYWJsZWRDb2xvclxuICAgIH0sXG4gICAgYm94OiB7XG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIG9wYWNpdHk6IDEsXG4gICAgICBmaWxsOiBjaGVja2JveC5ib3hDb2xvcixcbiAgICAgIHRyYW5zaXRpb246IF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KCcxMDAwbXMnLCAnb3BhY2l0eScsICcyMDBtcycpXG4gICAgfSxcbiAgICBib3hXaGVuU3dpdGNoZWQ6IHtcbiAgICAgIG9wYWNpdHk6IDAsXG4gICAgICB0cmFuc2l0aW9uOiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnNjUwbXMnLCAnb3BhY2l0eScsICcxNTBtcycpLFxuICAgICAgZmlsbDogY2hlY2tib3guY2hlY2tlZENvbG9yXG4gICAgfSxcbiAgICBib3hXaGVuRGlzYWJsZWQ6IHtcbiAgICAgIGZpbGw6IHByb3BzLmNoZWNrZWQgPyAndHJhbnNwYXJlbnQnIDogY2hlY2tib3guZGlzYWJsZWRDb2xvclxuICAgIH0sXG4gICAgbGFiZWw6IHtcbiAgICAgIGNvbG9yOiBwcm9wcy5kaXNhYmxlZCA/IGNoZWNrYm94LmxhYmVsRGlzYWJsZWRDb2xvciA6IGNoZWNrYm94LmxhYmVsQ29sb3JcbiAgICB9XG4gIH07XG59XG5cbnZhciBDaGVja2JveCA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKENoZWNrYm94LCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBDaGVja2JveCgpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBDaGVja2JveCk7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKF9yZWYgPSBDaGVja2JveC5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoQ2hlY2tib3gpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHN3aXRjaGVkOiBmYWxzZVxuICAgIH0sIF90aGlzLmhhbmRsZVN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKG5ld1N3aXRjaGVkKSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHN3aXRjaGVkOiBuZXdTd2l0Y2hlZFxuICAgICAgfSk7XG4gICAgfSwgX3RoaXMuaGFuZGxlQ2hlY2sgPSBmdW5jdGlvbiAoZXZlbnQsIGlzSW5wdXRDaGVja2VkKSB7XG4gICAgICBpZiAoX3RoaXMucHJvcHMub25DaGVjaykge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbkNoZWNrKGV2ZW50LCBpc0lucHV0Q2hlY2tlZCk7XG4gICAgICB9XG4gICAgfSwgX3RlbXApLCAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKENoZWNrYm94LCBbe1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGNoZWNrZWQgPSBfcHJvcHMuY2hlY2tlZCxcbiAgICAgICAgICBkZWZhdWx0Q2hlY2tlZCA9IF9wcm9wcy5kZWZhdWx0Q2hlY2tlZCxcbiAgICAgICAgICB2YWx1ZUxpbmsgPSBfcHJvcHMudmFsdWVMaW5rO1xuXG5cbiAgICAgIGlmIChjaGVja2VkIHx8IGRlZmF1bHRDaGVja2VkIHx8IHZhbHVlTGluayAmJiB2YWx1ZUxpbmsudmFsdWUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgc3dpdGNoZWQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5jaGVja2VkICE9PSBuZXh0UHJvcHMuY2hlY2tlZCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBzd2l0Y2hlZDogbmV4dFByb3BzLmNoZWNrZWRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnaXNDaGVja2VkJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNDaGVja2VkKCkge1xuICAgICAgcmV0dXJuIHRoaXMucmVmcy5lbmhhbmNlZFN3aXRjaC5pc1N3aXRjaGVkKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2V0Q2hlY2tlZCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldENoZWNrZWQobmV3Q2hlY2tlZFZhbHVlKSB7XG4gICAgICB0aGlzLnJlZnMuZW5oYW5jZWRTd2l0Y2guc2V0U3dpdGNoZWQobmV3Q2hlY2tlZFZhbHVlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3Byb3BzMiA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgaWNvblN0eWxlID0gX3Byb3BzMi5pY29uU3R5bGUsXG4gICAgICAgICAgb25DaGVjayA9IF9wcm9wczIub25DaGVjayxcbiAgICAgICAgICBjaGVja2VkSWNvbiA9IF9wcm9wczIuY2hlY2tlZEljb24sXG4gICAgICAgICAgdW5jaGVja2VkSWNvbiA9IF9wcm9wczIudW5jaGVja2VkSWNvbixcbiAgICAgICAgICBvdGhlciA9ICgwLCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzLmRlZmF1bHQpKF9wcm9wczIsIFsnaWNvblN0eWxlJywgJ29uQ2hlY2snLCAnY2hlY2tlZEljb24nLCAndW5jaGVja2VkSWNvbiddKTtcblxuICAgICAgdmFyIHN0eWxlcyA9IGdldFN0eWxlcyh0aGlzLnByb3BzLCB0aGlzLmNvbnRleHQpO1xuICAgICAgdmFyIGJveFN0eWxlcyA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMuYm94LCB0aGlzLnN0YXRlLnN3aXRjaGVkICYmIHN0eWxlcy5ib3hXaGVuU3dpdGNoZWQsIGljb25TdHlsZSwgdGhpcy5wcm9wcy5kaXNhYmxlZCAmJiBzdHlsZXMuYm94V2hlbkRpc2FibGVkKTtcbiAgICAgIHZhciBjaGVja1N0eWxlcyA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMuY2hlY2ssIHRoaXMuc3RhdGUuc3dpdGNoZWQgJiYgc3R5bGVzLmNoZWNrV2hlblN3aXRjaGVkLCBpY29uU3R5bGUsIHRoaXMucHJvcHMuZGlzYWJsZWQgJiYgc3R5bGVzLmNoZWNrV2hlbkRpc2FibGVkKTtcblxuICAgICAgdmFyIGNoZWNrZWRFbGVtZW50ID0gY2hlY2tlZEljb24gPyBfcmVhY3QyLmRlZmF1bHQuY2xvbmVFbGVtZW50KGNoZWNrZWRJY29uLCB7XG4gICAgICAgIHN0eWxlOiAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoY2hlY2tTdHlsZXMsIGNoZWNrZWRJY29uLnByb3BzLnN0eWxlKVxuICAgICAgfSkgOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY2hlY2tCb3gyLmRlZmF1bHQsIHtcbiAgICAgICAgc3R5bGU6IGNoZWNrU3R5bGVzXG4gICAgICB9KTtcblxuICAgICAgdmFyIHVuQ2hlY2tlZEVsZW1lbnQgPSB1bmNoZWNrZWRJY29uID8gX3JlYWN0Mi5kZWZhdWx0LmNsb25lRWxlbWVudCh1bmNoZWNrZWRJY29uLCB7XG4gICAgICAgIHN0eWxlOiAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoYm94U3R5bGVzLCB1bmNoZWNrZWRJY29uLnByb3BzLnN0eWxlKVxuICAgICAgfSkgOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY2hlY2tCb3hPdXRsaW5lQmxhbmsyLmRlZmF1bHQsIHtcbiAgICAgICAgc3R5bGU6IGJveFN0eWxlc1xuICAgICAgfSk7XG5cbiAgICAgIHZhciBjaGVja2JveEVsZW1lbnQgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIG51bGwsXG4gICAgICAgIHVuQ2hlY2tlZEVsZW1lbnQsXG4gICAgICAgIGNoZWNrZWRFbGVtZW50XG4gICAgICApO1xuXG4gICAgICB2YXIgcmlwcGxlQ29sb3IgPSB0aGlzLnN0YXRlLnN3aXRjaGVkID8gY2hlY2tTdHlsZXMuZmlsbCA6IGJveFN0eWxlcy5maWxsO1xuICAgICAgdmFyIG1lcmdlZEljb25TdHlsZSA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMuaWNvbiwgaWNvblN0eWxlKTtcblxuICAgICAgdmFyIGxhYmVsU3R5bGUgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLmxhYmVsLCB0aGlzLnByb3BzLmxhYmVsU3R5bGUpO1xuXG4gICAgICB2YXIgZW5oYW5jZWRTd2l0Y2hQcm9wcyA9IHtcbiAgICAgICAgcmVmOiAnZW5oYW5jZWRTd2l0Y2gnLFxuICAgICAgICBpbnB1dFR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgIHN3aXRjaGVkOiB0aGlzLnN0YXRlLnN3aXRjaGVkLFxuICAgICAgICBzd2l0Y2hFbGVtZW50OiBjaGVja2JveEVsZW1lbnQsXG4gICAgICAgIHJpcHBsZUNvbG9yOiByaXBwbGVDb2xvcixcbiAgICAgICAgaWNvblN0eWxlOiBtZXJnZWRJY29uU3R5bGUsXG4gICAgICAgIG9uU3dpdGNoOiB0aGlzLmhhbmRsZUNoZWNrLFxuICAgICAgICBsYWJlbFN0eWxlOiBsYWJlbFN0eWxlLFxuICAgICAgICBvblBhcmVudFNob3VsZFVwZGF0ZTogdGhpcy5oYW5kbGVTdGF0ZUNoYW5nZSxcbiAgICAgICAgbGFiZWxQb3NpdGlvbjogdGhpcy5wcm9wcy5sYWJlbFBvc2l0aW9uXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0VuaGFuY2VkU3dpdGNoMi5kZWZhdWx0LCAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBvdGhlciwgZW5oYW5jZWRTd2l0Y2hQcm9wcykpO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gQ2hlY2tib3g7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5DaGVja2JveC5kZWZhdWx0UHJvcHMgPSB7XG4gIGxhYmVsUG9zaXRpb246ICdyaWdodCcsXG4gIGRpc2FibGVkOiBmYWxzZVxufTtcbkNoZWNrYm94LmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5DaGVja2JveC5wcm9wVHlwZXMgPSAgZmFsc2UgPyB7XG4gIC8qKlxuICAgKiBDaGVja2JveCBpcyBjaGVja2VkIGlmIHRydWUuXG4gICAqL1xuICBjaGVja2VkOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBUaGUgU3ZnSWNvbiB0byB1c2UgZm9yIHRoZSBjaGVja2VkIHN0YXRlLlxuICAgKiBUaGlzIGlzIHVzZWZ1bCB0byBjcmVhdGUgaWNvbiB0b2dnbGVzLlxuICAgKi9cbiAgY2hlY2tlZEljb246IF9wcm9wVHlwZXMyLmRlZmF1bHQuZWxlbWVudCxcbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IHN0YXRlIG9mIG91ciBjaGVja2JveCBjb21wb25lbnQuXG4gICAqICoqV2FybmluZzoqKiBUaGlzIGNhbm5vdCBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggYGNoZWNrZWRgLlxuICAgKiBEZWNpZGUgYmV0d2VlbiB1c2luZyBhIGNvbnRyb2xsZWQgb3IgdW5jb250cm9sbGVkIGlucHV0IGVsZW1lbnQgYW5kIHJlbW92ZSBvbmUgb2YgdGhlc2UgcHJvcHMuXG4gICAqIE1vcmUgaW5mbzogaHR0cHM6Ly9mYi5tZS9yZWFjdC1jb250cm9sbGVkLWNvbXBvbmVudHNcbiAgICovXG4gIGRlZmF1bHRDaGVja2VkOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBEaXNhYmxlZCBpZiB0cnVlLlxuICAgKi9cbiAgZGlzYWJsZWQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlcyB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgaWNvbiBlbGVtZW50LlxuICAgKi9cbiAgaWNvblN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlcyB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICovXG4gIGlucHV0U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogV2hlcmUgdGhlIGxhYmVsIHdpbGwgYmUgcGxhY2VkIG5leHQgdG8gdGhlIGNoZWNrYm94LlxuICAgKi9cbiAgbGFiZWxQb3NpdGlvbjogX3Byb3BUeXBlczIuZGVmYXVsdC5vbmVPZihbJ2xlZnQnLCAncmlnaHQnXSksXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIENoZWNrYm94IGVsZW1lbnQgbGFiZWwuXG4gICAqL1xuICBsYWJlbFN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgaXMgZmlyZWQgd2hlbiB0aGUgY2hlY2tib3ggaXMgY2hlY2tlZC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IGBjaGFuZ2VgIGV2ZW50IHRhcmdldGluZyB0aGUgdW5kZXJseWluZyBjaGVja2JveCBgaW5wdXRgLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzSW5wdXRDaGVja2VkIFRoZSBgY2hlY2tlZGAgdmFsdWUgb2YgdGhlIHVuZGVybHlpbmcgY2hlY2tib3ggYGlucHV0YC5cbiAgICovXG4gIG9uQ2hlY2s6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBUaGUgU3ZnSWNvbiB0byB1c2UgZm9yIHRoZSB1bmNoZWNrZWQgc3RhdGUuXG4gICAqIFRoaXMgaXMgdXNlZnVsIHRvIGNyZWF0ZSBpY29uIHRvZ2dsZXMuXG4gICAqL1xuICB1bmNoZWNrZWRJY29uOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmVsZW1lbnQsXG4gIC8qKlxuICAgKiBWYWx1ZUxpbmsgZm9yIHdoZW4gdXNpbmcgY29udHJvbGxlZCBjaGVja2JveC5cbiAgICovXG4gIHZhbHVlTGluazogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3Rcbn0gOiB7fTtcbmV4cG9ydHMuZGVmYXVsdCA9IENoZWNrYm94O1xuXG4vKioqLyB9KSxcbi8qIDE0NiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblxudmFyIF9leHRlbmRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4dGVuZHMyKTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMik7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7XG5cbnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblxudmFyIF9pbmhlcml0czIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXG52YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cbnZhciBfc2ltcGxlQXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblxudmFyIF9zaW1wbGVBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2ltcGxlQXNzaWduKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbnZhciBfcmVhY3REb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblxudmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cbnZhciBfcmVhY3RFdmVudExpc3RlbmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cbnZhciBfcmVhY3RFdmVudExpc3RlbmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RXZlbnRMaXN0ZW5lcik7XG5cbnZhciBfa2V5Y29kZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXG52YXIgX2tleWNvZGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5Y29kZSk7XG5cbnZhciBfdHJhbnNpdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblxudmFyIF90cmFuc2l0aW9uczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90cmFuc2l0aW9ucyk7XG5cbnZhciBfT3ZlcmxheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTA4KTtcblxudmFyIF9PdmVybGF5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX092ZXJsYXkpO1xuXG52YXIgX1JlbmRlclRvTGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1OSk7XG5cbnZhciBfUmVuZGVyVG9MYXllcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9SZW5kZXJUb0xheWVyKTtcblxudmFyIF9QYXBlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXG52YXIgX1BhcGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BhcGVyKTtcblxudmFyIF9UcmFuc2l0aW9uR3JvdXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk3KTtcblxudmFyIF9UcmFuc2l0aW9uR3JvdXAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfVHJhbnNpdGlvbkdyb3VwKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIFRyYW5zaXRpb25JdGVtID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoVHJhbnNpdGlvbkl0ZW0sIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFRyYW5zaXRpb25JdGVtKCkge1xuICAgIHZhciBfcmVmO1xuXG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIFRyYW5zaXRpb25JdGVtKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoX3JlZiA9IFRyYW5zaXRpb25JdGVtLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShUcmFuc2l0aW9uSXRlbSkpLmNhbGwuYXBwbHkoX3JlZiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLnN0YXRlID0ge1xuICAgICAgc3R5bGU6IHt9XG4gICAgfSwgX3RlbXApLCAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKFRyYW5zaXRpb25JdGVtLCBbe1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxVbm1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5lbnRlclRpbWVvdXQpO1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubGVhdmVUaW1lb3V0KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsRW50ZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsRW50ZXIoY2FsbGJhY2spIHtcbiAgICAgIHRoaXMuY29tcG9uZW50V2lsbEFwcGVhcihjYWxsYmFjayk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbEFwcGVhcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxBcHBlYXIoY2FsbGJhY2spIHtcbiAgICAgIHZhciBzcGFjaW5nID0gdGhpcy5jb250ZXh0Lm11aVRoZW1lLmJhc2VUaGVtZS5zcGFjaW5nO1xuXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgwLCAnICsgc3BhY2luZy5kZXNrdG9wS2V5bGluZUluY3JlbWVudCArICdweCknXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmVudGVyVGltZW91dCA9IHNldFRpbWVvdXQoY2FsbGJhY2ssIDQ1MCk7IC8vIG1hdGNoZXMgdHJhbnNpdGlvbiBkdXJhdGlvblxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxMZWF2ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxMZWF2ZShjYWxsYmFjaykge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoMCwgMCknXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmxlYXZlVGltZW91dCA9IHNldFRpbWVvdXQoY2FsbGJhY2ssIDQ1MCk7IC8vIG1hdGNoZXMgdHJhbnNpdGlvbiBkdXJhdGlvblxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIHN0eWxlID0gX3Byb3BzLnN0eWxlLFxuICAgICAgICAgIGNoaWxkcmVuID0gX3Byb3BzLmNoaWxkcmVuLFxuICAgICAgICAgIG90aGVyID0gKDAsIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMuZGVmYXVsdCkoX3Byb3BzLCBbJ3N0eWxlJywgJ2NoaWxkcmVuJ10pO1xuICAgICAgdmFyIHByZXBhcmVTdHlsZXMgPSB0aGlzLmNvbnRleHQubXVpVGhlbWUucHJlcGFyZVN0eWxlcztcblxuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBvdGhlciwgeyBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe30sIHRoaXMuc3RhdGUuc3R5bGUsIHN0eWxlKSkgfSksXG4gICAgICAgIGNoaWxkcmVuXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gVHJhbnNpdGlvbkl0ZW07XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5UcmFuc2l0aW9uSXRlbS5jb250ZXh0VHlwZXMgPSB7XG4gIG11aVRoZW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkXG59O1xuVHJhbnNpdGlvbkl0ZW0ucHJvcFR5cGVzID0gIGZhbHNlID8ge1xuICBjaGlsZHJlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3Rcbn0gOiB7fTtcblxuXG5mdW5jdGlvbiBnZXRTdHlsZXMocHJvcHMsIGNvbnRleHQpIHtcbiAgdmFyIGF1dG9TY3JvbGxCb2R5Q29udGVudCA9IHByb3BzLmF1dG9TY3JvbGxCb2R5Q29udGVudCxcbiAgICAgIG9wZW4gPSBwcm9wcy5vcGVuO1xuICB2YXIgX2NvbnRleHQkbXVpVGhlbWUgPSBjb250ZXh0Lm11aVRoZW1lLFxuICAgICAgX2NvbnRleHQkbXVpVGhlbWUkYmFzID0gX2NvbnRleHQkbXVpVGhlbWUuYmFzZVRoZW1lLFxuICAgICAgc3BhY2luZyA9IF9jb250ZXh0JG11aVRoZW1lJGJhcy5zcGFjaW5nLFxuICAgICAgcGFsZXR0ZSA9IF9jb250ZXh0JG11aVRoZW1lJGJhcy5wYWxldHRlLFxuICAgICAgZGlhbG9nID0gX2NvbnRleHQkbXVpVGhlbWUuZGlhbG9nLFxuICAgICAgekluZGV4ID0gX2NvbnRleHQkbXVpVGhlbWUuekluZGV4O1xuXG5cbiAgdmFyIGd1dHRlciA9IHNwYWNpbmcuZGVza3RvcEd1dHRlcjtcbiAgdmFyIGJvcmRlclNjcm9sbCA9ICcxcHggc29saWQgJyArIHBhbGV0dGUuYm9yZGVyQ29sb3I7XG5cbiAgcmV0dXJuIHtcbiAgICByb290OiB7XG4gICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnLFxuICAgICAgV2Via2l0VGFwSGlnaGxpZ2h0Q29sb3I6ICdyZ2JhKDAsMCwwLDApJywgLy8gUmVtb3ZlIG1vYmlsZSBjb2xvciBmbGFzaGluZyAoZGVwcmVjYXRlZClcbiAgICAgIHpJbmRleDogekluZGV4LmRpYWxvZyxcbiAgICAgIHRvcDogMCxcbiAgICAgIGxlZnQ6IG9wZW4gPyAwIDogLTEwMDAwLFxuICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgdHJhbnNpdGlvbjogb3BlbiA/IF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KCcwbXMnLCAnbGVmdCcsICcwbXMnKSA6IF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KCcwbXMnLCAnbGVmdCcsICc0NTBtcycpXG4gICAgfSxcbiAgICBjb250ZW50OiB7XG4gICAgICBib3hTaXppbmc6ICdib3JkZXItYm94JyxcbiAgICAgIFdlYmtpdFRhcEhpZ2hsaWdodENvbG9yOiAncmdiYSgwLDAsMCwwKScsIC8vIFJlbW92ZSBtb2JpbGUgY29sb3IgZmxhc2hpbmcgKGRlcHJlY2F0ZWQpXG4gICAgICB0cmFuc2l0aW9uOiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgpLFxuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICB3aWR0aDogJzc1JScsXG4gICAgICBtYXhXaWR0aDogc3BhY2luZy5kZXNrdG9wS2V5bGluZUluY3JlbWVudCAqIDEyLFxuICAgICAgbWFyZ2luOiAnMCBhdXRvJyxcbiAgICAgIHpJbmRleDogekluZGV4LmRpYWxvZ1xuICAgIH0sXG4gICAgYWN0aW9uc0NvbnRhaW5lcjoge1xuICAgICAgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsXG4gICAgICBXZWJraXRUYXBIaWdobGlnaHRDb2xvcjogJ3JnYmEoMCwwLDAsMCknLCAvLyBSZW1vdmUgbW9iaWxlIGNvbG9yIGZsYXNoaW5nIChkZXByZWNhdGVkKVxuICAgICAgcGFkZGluZzogOCxcbiAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICB0ZXh0QWxpZ246ICdyaWdodCcsXG4gICAgICBtYXJnaW5Ub3A6IGF1dG9TY3JvbGxCb2R5Q29udGVudCA/IC0xIDogMFxuICAgIH0sXG4gICAgb3ZlcmxheToge1xuICAgICAgekluZGV4OiB6SW5kZXguZGlhbG9nT3ZlcmxheVxuICAgIH0sXG4gICAgdGl0bGU6IHtcbiAgICAgIG1hcmdpbjogMCxcbiAgICAgIHBhZGRpbmc6IGd1dHRlciArICdweCAnICsgZ3V0dGVyICsgJ3B4IDIwcHggJyArIGd1dHRlciArICdweCcsXG4gICAgICBjb2xvcjogcGFsZXR0ZS50ZXh0Q29sb3IsXG4gICAgICBmb250U2l6ZTogZGlhbG9nLnRpdGxlRm9udFNpemUsXG4gICAgICBsaW5lSGVpZ2h0OiAnMzJweCcsXG4gICAgICBmb250V2VpZ2h0OiA0MDAsXG4gICAgICBtYXJnaW5Cb3R0b206IGF1dG9TY3JvbGxCb2R5Q29udGVudCA/IC0xIDogMFxuICAgIH0sXG4gICAgYm9keToge1xuICAgICAgZm9udFNpemU6IGRpYWxvZy5ib2R5Rm9udFNpemUsXG4gICAgICBjb2xvcjogZGlhbG9nLmJvZHlDb2xvcixcbiAgICAgIHBhZGRpbmc6IChwcm9wcy50aXRsZSA/IDAgOiBndXR0ZXIpICsgJ3B4ICcgKyBndXR0ZXIgKyAncHggJyArIGd1dHRlciArICdweCcsXG4gICAgICBib3hTaXppbmc6ICdib3JkZXItYm94JyxcbiAgICAgIG92ZXJmbG93WTogYXV0b1Njcm9sbEJvZHlDb250ZW50ID8gJ2F1dG8nIDogJ2hpZGRlbicsXG4gICAgICBib3JkZXJUb3A6IGF1dG9TY3JvbGxCb2R5Q29udGVudCA/IGJvcmRlclNjcm9sbCA6ICdub25lJyxcbiAgICAgIGJvcmRlckJvdHRvbTogYXV0b1Njcm9sbEJvZHlDb250ZW50ID8gYm9yZGVyU2Nyb2xsIDogJ25vbmUnXG4gICAgfVxuICB9O1xufVxuXG52YXIgRGlhbG9nSW5saW5lID0gZnVuY3Rpb24gKF9Db21wb25lbnQyKSB7XG4gICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKERpYWxvZ0lubGluZSwgX0NvbXBvbmVudDIpO1xuXG4gIGZ1bmN0aW9uIERpYWxvZ0lubGluZSgpIHtcbiAgICB2YXIgX3JlZjI7XG5cbiAgICB2YXIgX3RlbXAyLCBfdGhpczIsIF9yZXQyO1xuXG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRGlhbG9nSW5saW5lKTtcblxuICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICBhcmdzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQyID0gKF90ZW1wMiA9IChfdGhpczIgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChfcmVmMiA9IERpYWxvZ0lubGluZS5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRGlhbG9nSW5saW5lKSkuY2FsbC5hcHBseShfcmVmMiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpczIpLCBfdGhpczIuaGFuZGxlVG91Y2hUYXBPdmVybGF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMyLnJlcXVlc3RDbG9zZShmYWxzZSk7XG4gICAgfSwgX3RoaXMyLmhhbmRsZUtleVVwID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoKDAsIF9rZXljb2RlMi5kZWZhdWx0KShldmVudCkgPT09ICdlc2MnKSB7XG4gICAgICAgIF90aGlzMi5yZXF1ZXN0Q2xvc2UoZmFsc2UpO1xuICAgICAgfVxuICAgIH0sIF90aGlzMi5oYW5kbGVSZXNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpczIucG9zaXRpb25EaWFsb2coKTtcbiAgICB9LCBfdGVtcDIpLCAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKF90aGlzMiwgX3JldDIpO1xuICB9XG5cbiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRGlhbG9nSW5saW5lLCBbe1xuICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICB0aGlzLnBvc2l0aW9uRGlhbG9nKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50RGlkVXBkYXRlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgdGhpcy5wb3NpdGlvbkRpYWxvZygpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3Bvc2l0aW9uRGlhbG9nJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcG9zaXRpb25EaWFsb2coKSB7XG4gICAgICB2YXIgX3Byb3BzMiA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgYWN0aW9ucyA9IF9wcm9wczIuYWN0aW9ucyxcbiAgICAgICAgICBhdXRvRGV0ZWN0V2luZG93SGVpZ2h0ID0gX3Byb3BzMi5hdXRvRGV0ZWN0V2luZG93SGVpZ2h0LFxuICAgICAgICAgIGF1dG9TY3JvbGxCb2R5Q29udGVudCA9IF9wcm9wczIuYXV0b1Njcm9sbEJvZHlDb250ZW50LFxuICAgICAgICAgIGJvZHlTdHlsZSA9IF9wcm9wczIuYm9keVN0eWxlLFxuICAgICAgICAgIG9wZW4gPSBfcHJvcHMyLm9wZW4sXG4gICAgICAgICAgcmVwb3NpdGlvbk9uVXBkYXRlID0gX3Byb3BzMi5yZXBvc2l0aW9uT25VcGRhdGUsXG4gICAgICAgICAgdGl0bGUgPSBfcHJvcHMyLnRpdGxlO1xuXG5cbiAgICAgIGlmICghb3Blbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBjbGllbnRIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDtcbiAgICAgIHZhciBjb250YWluZXIgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcyk7XG4gICAgICB2YXIgZGlhbG9nV2luZG93ID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMucmVmcy5kaWFsb2dXaW5kb3cpO1xuICAgICAgdmFyIGRpYWxvZ0NvbnRlbnQgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcy5yZWZzLmRpYWxvZ0NvbnRlbnQpO1xuICAgICAgdmFyIG1pblBhZGRpbmdUb3AgPSAxNjtcblxuICAgICAgLy8gUmVzZXQgdGhlIGhlaWdodCBpbiBjYXNlIHRoZSB3aW5kb3cgd2FzIHJlc2l6ZWQuXG4gICAgICBkaWFsb2dXaW5kb3cuc3R5bGUuaGVpZ2h0ID0gJyc7XG4gICAgICBkaWFsb2dDb250ZW50LnN0eWxlLmhlaWdodCA9ICcnO1xuXG4gICAgICB2YXIgZGlhbG9nV2luZG93SGVpZ2h0ID0gZGlhbG9nV2luZG93Lm9mZnNldEhlaWdodDtcbiAgICAgIHZhciBwYWRkaW5nVG9wID0gKGNsaWVudEhlaWdodCAtIGRpYWxvZ1dpbmRvd0hlaWdodCkgLyAyIC0gNjQ7XG4gICAgICBpZiAocGFkZGluZ1RvcCA8IG1pblBhZGRpbmdUb3ApIHBhZGRpbmdUb3AgPSBtaW5QYWRkaW5nVG9wO1xuXG4gICAgICAvLyBWZXJ0aWNhbGx5IGNlbnRlciB0aGUgZGlhbG9nIHdpbmRvdywgYnV0IG1ha2Ugc3VyZSBpdCBkb2Vzbid0XG4gICAgICAvLyB0cmFuc2l0aW9uIHRvIHRoYXQgcG9zaXRpb24uXG4gICAgICBpZiAocmVwb3NpdGlvbk9uVXBkYXRlIHx8ICFjb250YWluZXIuc3R5bGUucGFkZGluZ1RvcCkge1xuICAgICAgICBjb250YWluZXIuc3R5bGUucGFkZGluZ1RvcCA9IHBhZGRpbmdUb3AgKyAncHgnO1xuICAgICAgfVxuXG4gICAgICAvLyBGb3JjZSBhIGhlaWdodCBpZiB0aGUgZGlhbG9nIGlzIHRhbGxlciB0aGFuIGNsaWVudEhlaWdodFxuICAgICAgaWYgKGF1dG9EZXRlY3RXaW5kb3dIZWlnaHQgfHwgYXV0b1Njcm9sbEJvZHlDb250ZW50KSB7XG4gICAgICAgIHZhciBzdHlsZXMgPSBnZXRTdHlsZXModGhpcy5wcm9wcywgdGhpcy5jb250ZXh0KTtcbiAgICAgICAgc3R5bGVzLmJvZHkgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLmJvZHksIGJvZHlTdHlsZSk7XG4gICAgICAgIHZhciBtYXhEaWFsb2dDb250ZW50SGVpZ2h0ID0gY2xpZW50SGVpZ2h0IC0gMiAqIDY0O1xuXG4gICAgICAgIGlmICh0aXRsZSkgbWF4RGlhbG9nQ29udGVudEhlaWdodCAtPSBkaWFsb2dDb250ZW50LnByZXZpb3VzU2libGluZy5vZmZzZXRIZWlnaHQ7XG5cbiAgICAgICAgaWYgKF9yZWFjdDIuZGVmYXVsdC5DaGlsZHJlbi5jb3VudChhY3Rpb25zKSkge1xuICAgICAgICAgIG1heERpYWxvZ0NvbnRlbnRIZWlnaHQgLT0gZGlhbG9nQ29udGVudC5uZXh0U2libGluZy5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBkaWFsb2dDb250ZW50LnN0eWxlLm1heEhlaWdodCA9IG1heERpYWxvZ0NvbnRlbnRIZWlnaHQgKyAncHgnO1xuICAgICAgICBpZiAobWF4RGlhbG9nQ29udGVudEhlaWdodCA+IGRpYWxvZ1dpbmRvd0hlaWdodCkge1xuICAgICAgICAgIGRpYWxvZ0NvbnRlbnQuc3R5bGUuYm9yZGVyQm90dG9tID0gJ25vbmUnO1xuICAgICAgICAgIGRpYWxvZ0NvbnRlbnQuc3R5bGUuYm9yZGVyVG9wID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVxdWVzdENsb3NlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVxdWVzdENsb3NlKGJ1dHRvbkNsaWNrZWQpIHtcbiAgICAgIGlmICghYnV0dG9uQ2xpY2tlZCAmJiB0aGlzLnByb3BzLm1vZGFsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMucHJvcHMub25SZXF1ZXN0Q2xvc2UpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vblJlcXVlc3RDbG9zZSghIWJ1dHRvbkNsaWNrZWQpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfcHJvcHMzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBhY3Rpb25zID0gX3Byb3BzMy5hY3Rpb25zLFxuICAgICAgICAgIGFjdGlvbnNDb250YWluZXJDbGFzc05hbWUgPSBfcHJvcHMzLmFjdGlvbnNDb250YWluZXJDbGFzc05hbWUsXG4gICAgICAgICAgYWN0aW9uc0NvbnRhaW5lclN0eWxlID0gX3Byb3BzMy5hY3Rpb25zQ29udGFpbmVyU3R5bGUsXG4gICAgICAgICAgYm9keUNsYXNzTmFtZSA9IF9wcm9wczMuYm9keUNsYXNzTmFtZSxcbiAgICAgICAgICBib2R5U3R5bGUgPSBfcHJvcHMzLmJvZHlTdHlsZSxcbiAgICAgICAgICBjaGlsZHJlbiA9IF9wcm9wczMuY2hpbGRyZW4sXG4gICAgICAgICAgY2xhc3NOYW1lID0gX3Byb3BzMy5jbGFzc05hbWUsXG4gICAgICAgICAgY29udGVudENsYXNzTmFtZSA9IF9wcm9wczMuY29udGVudENsYXNzTmFtZSxcbiAgICAgICAgICBjb250ZW50U3R5bGUgPSBfcHJvcHMzLmNvbnRlbnRTdHlsZSxcbiAgICAgICAgICBvdmVybGF5Q2xhc3NOYW1lID0gX3Byb3BzMy5vdmVybGF5Q2xhc3NOYW1lLFxuICAgICAgICAgIG92ZXJsYXlTdHlsZSA9IF9wcm9wczMub3ZlcmxheVN0eWxlLFxuICAgICAgICAgIG9wZW4gPSBfcHJvcHMzLm9wZW4sXG4gICAgICAgICAgcGFwZXJDbGFzc05hbWUgPSBfcHJvcHMzLnBhcGVyQ2xhc3NOYW1lLFxuICAgICAgICAgIHBhcGVyUHJvcHMgPSBfcHJvcHMzLnBhcGVyUHJvcHMsXG4gICAgICAgICAgc3R5bGUgPSBfcHJvcHMzLnN0eWxlLFxuICAgICAgICAgIHRpdGxlQ2xhc3NOYW1lID0gX3Byb3BzMy50aXRsZUNsYXNzTmFtZSxcbiAgICAgICAgICB0aXRsZVN0eWxlID0gX3Byb3BzMy50aXRsZVN0eWxlLFxuICAgICAgICAgIHRpdGxlID0gX3Byb3BzMy50aXRsZTtcbiAgICAgIHZhciBwcmVwYXJlU3R5bGVzID0gdGhpcy5jb250ZXh0Lm11aVRoZW1lLnByZXBhcmVTdHlsZXM7XG5cbiAgICAgIHZhciBzdHlsZXMgPSBnZXRTdHlsZXModGhpcy5wcm9wcywgdGhpcy5jb250ZXh0KTtcblxuICAgICAgc3R5bGVzLnJvb3QgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLnJvb3QsIHN0eWxlKTtcbiAgICAgIHN0eWxlcy5jb250ZW50ID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5jb250ZW50LCBjb250ZW50U3R5bGUpO1xuICAgICAgc3R5bGVzLmJvZHkgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLmJvZHksIGJvZHlTdHlsZSk7XG4gICAgICBzdHlsZXMuYWN0aW9uc0NvbnRhaW5lciA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMuYWN0aW9uc0NvbnRhaW5lciwgYWN0aW9uc0NvbnRhaW5lclN0eWxlKTtcbiAgICAgIHN0eWxlcy5vdmVybGF5ID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5vdmVybGF5LCBvdmVybGF5U3R5bGUpO1xuICAgICAgc3R5bGVzLnRpdGxlID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy50aXRsZSwgdGl0bGVTdHlsZSk7XG5cbiAgICAgIHZhciBhY3Rpb25zQ29udGFpbmVyID0gX3JlYWN0Mi5kZWZhdWx0LkNoaWxkcmVuLmNvdW50KGFjdGlvbnMpID4gMCAmJiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgY2xhc3NOYW1lOiBhY3Rpb25zQ29udGFpbmVyQ2xhc3NOYW1lLCBzdHlsZTogcHJlcGFyZVN0eWxlcyhzdHlsZXMuYWN0aW9uc0NvbnRhaW5lcikgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LkNoaWxkcmVuLnRvQXJyYXkoYWN0aW9ucylcbiAgICAgICk7XG5cbiAgICAgIHZhciB0aXRsZUVsZW1lbnQgPSB0aXRsZTtcbiAgICAgIGlmIChfcmVhY3QyLmRlZmF1bHQuaXNWYWxpZEVsZW1lbnQodGl0bGUpKSB7XG4gICAgICAgIHRpdGxlRWxlbWVudCA9IF9yZWFjdDIuZGVmYXVsdC5jbG9uZUVsZW1lbnQodGl0bGUsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IHRpdGxlLnByb3BzLmNsYXNzTmFtZSB8fCB0aXRsZUNsYXNzTmFtZSxcbiAgICAgICAgICBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLnRpdGxlLCB0aXRsZS5wcm9wcy5zdHlsZSkpXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGl0bGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRpdGxlRWxlbWVudCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdoMycsXG4gICAgICAgICAgeyBjbGFzc05hbWU6IHRpdGxlQ2xhc3NOYW1lLCBzdHlsZTogcHJlcGFyZVN0eWxlcyhzdHlsZXMudGl0bGUpIH0sXG4gICAgICAgICAgdGl0bGVcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyBjbGFzc05hbWU6IGNsYXNzTmFtZSwgc3R5bGU6IHByZXBhcmVTdHlsZXMoc3R5bGVzLnJvb3QpIH0sXG4gICAgICAgIG9wZW4gJiYgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0RXZlbnRMaXN0ZW5lcjIuZGVmYXVsdCwge1xuICAgICAgICAgIHRhcmdldDogJ3dpbmRvdycsXG4gICAgICAgICAgb25LZXlVcDogdGhpcy5oYW5kbGVLZXlVcCxcbiAgICAgICAgICBvblJlc2l6ZTogdGhpcy5oYW5kbGVSZXNpemVcbiAgICAgICAgfSksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIF9UcmFuc2l0aW9uR3JvdXAyLmRlZmF1bHQsXG4gICAgICAgICAge1xuICAgICAgICAgICAgY29tcG9uZW50OiAnZGl2JyxcbiAgICAgICAgICAgIHJlZjogJ2RpYWxvZ1dpbmRvdycsXG4gICAgICAgICAgICB0cmFuc2l0aW9uQXBwZWFyOiB0cnVlLFxuICAgICAgICAgICAgdHJhbnNpdGlvbkFwcGVhclRpbWVvdXQ6IDQ1MCxcbiAgICAgICAgICAgIHRyYW5zaXRpb25FbnRlcjogdHJ1ZSxcbiAgICAgICAgICAgIHRyYW5zaXRpb25FbnRlclRpbWVvdXQ6IDQ1MFxuICAgICAgICAgIH0sXG4gICAgICAgICAgb3BlbiAmJiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgIFRyYW5zaXRpb25JdGVtLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjbGFzc05hbWU6IGNvbnRlbnRDbGFzc05hbWUsXG4gICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMuY29udGVudFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBfUGFwZXIyLmRlZmF1bHQsXG4gICAgICAgICAgICAgICgwLCBfZXh0ZW5kczMuZGVmYXVsdCkoeyBjbGFzc05hbWU6IHBhcGVyQ2xhc3NOYW1lLCB6RGVwdGg6IDQgfSwgcGFwZXJQcm9wcyksXG4gICAgICAgICAgICAgIHRpdGxlRWxlbWVudCxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgcmVmOiAnZGlhbG9nQ29udGVudCcsXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGJvZHlDbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgICBzdHlsZTogcHJlcGFyZVN0eWxlcyhzdHlsZXMuYm9keSlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIGFjdGlvbnNDb250YWluZXJcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgICksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9PdmVybGF5Mi5kZWZhdWx0LCB7XG4gICAgICAgICAgc2hvdzogb3BlbixcbiAgICAgICAgICBjbGFzc05hbWU6IG92ZXJsYXlDbGFzc05hbWUsXG4gICAgICAgICAgc3R5bGU6IHN0eWxlcy5vdmVybGF5LFxuICAgICAgICAgIG9uVG91Y2hUYXA6IHRoaXMuaGFuZGxlVG91Y2hUYXBPdmVybGF5XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gRGlhbG9nSW5saW5lO1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuRGlhbG9nSW5saW5lLmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5EaWFsb2dJbmxpbmUucHJvcFR5cGVzID0gIGZhbHNlID8ge1xuICBhY3Rpb25zOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIGFjdGlvbnNDb250YWluZXJDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBhY3Rpb25zQ29udGFpbmVyU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBhdXRvRGV0ZWN0V2luZG93SGVpZ2h0OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIGF1dG9TY3JvbGxCb2R5Q29udGVudDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBib2R5Q2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgYm9keVN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgY2hpbGRyZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgY2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgY29udGVudENsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGNvbnRlbnRTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIG1vZGFsOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIG9uUmVxdWVzdENsb3NlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIG9wZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbC5pc1JlcXVpcmVkLFxuICBvdmVybGF5Q2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgb3ZlcmxheVN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgcGFwZXJDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBwYXBlclByb3BzOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgcmVwb3NpdGlvbk9uVXBkYXRlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIHN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgdGl0bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgdGl0bGVDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICB0aXRsZVN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdFxufSA6IHt9O1xuXG52YXIgRGlhbG9nID0gZnVuY3Rpb24gKF9Db21wb25lbnQzKSB7XG4gICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKERpYWxvZywgX0NvbXBvbmVudDMpO1xuXG4gIGZ1bmN0aW9uIERpYWxvZygpIHtcbiAgICB2YXIgX3JlZjM7XG5cbiAgICB2YXIgX3RlbXAzLCBfdGhpczMsIF9yZXQzO1xuXG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRGlhbG9nKTtcblxuICAgIGZvciAodmFyIF9sZW4zID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4zKSwgX2tleTMgPSAwOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7XG4gICAgICBhcmdzW19rZXkzXSA9IGFyZ3VtZW50c1tfa2V5M107XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQzID0gKF90ZW1wMyA9IChfdGhpczMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChfcmVmMyA9IERpYWxvZy5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRGlhbG9nKSkuY2FsbC5hcHBseShfcmVmMywgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpczMpLCBfdGhpczMucmVuZGVyTGF5ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRGlhbG9nSW5saW5lLCBfdGhpczMucHJvcHMpO1xuICAgIH0sIF90ZW1wMyksICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkoX3RoaXMzLCBfcmV0Myk7XG4gIH1cblxuICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShEaWFsb2csIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9SZW5kZXJUb0xheWVyMi5kZWZhdWx0LCB7IHJlbmRlcjogdGhpcy5yZW5kZXJMYXllciwgb3BlbjogdHJ1ZSwgdXNlTGF5ZXJGb3JDbGlja0F3YXk6IGZhbHNlIH0pO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gRGlhbG9nO1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuRGlhbG9nLmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5EaWFsb2cuZGVmYXVsdFByb3BzID0ge1xuICBhdXRvRGV0ZWN0V2luZG93SGVpZ2h0OiB0cnVlLFxuICBhdXRvU2Nyb2xsQm9keUNvbnRlbnQ6IGZhbHNlLFxuICBtb2RhbDogZmFsc2UsXG4gIHJlcG9zaXRpb25PblVwZGF0ZTogdHJ1ZVxufTtcbkRpYWxvZy5wcm9wVHlwZXMgPSAgZmFsc2UgPyB7XG4gIC8qKlxuICAgKiBBY3Rpb24gYnV0dG9ucyB0byBkaXNwbGF5IGJlbG93IHRoZSBEaWFsb2cgY29udGVudCAoYGNoaWxkcmVuYCkuXG4gICAqIFRoaXMgcHJvcGVydHkgYWNjZXB0cyBlaXRoZXIgYSBSZWFjdCBlbGVtZW50LCBvciBhbiBhcnJheSBvZiBSZWFjdCBlbGVtZW50cy5cbiAgICovXG4gIGFjdGlvbnM6IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgLyoqXG4gICAqIFRoZSBgY2xhc3NOYW1lYCB0byBhZGQgdG8gdGhlIGFjdGlvbnMgY29udGFpbmVyJ3Mgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgYWN0aW9uc0NvbnRhaW5lckNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIGFjdGlvbnMgY29udGFpbmVyJ3Mgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgYWN0aW9uc0NvbnRhaW5lclN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIElmIHNldCB0byB0cnVlLCB0aGUgaGVpZ2h0IG9mIHRoZSBgRGlhbG9nYCB3aWxsIGJlIGF1dG8gZGV0ZWN0ZWQuIEEgbWF4IGhlaWdodFxuICAgKiB3aWxsIGJlIGVuZm9yY2VkIHNvIHRoYXQgdGhlIGNvbnRlbnQgZG9lcyBub3QgZXh0ZW5kIGJleW9uZCB0aGUgdmlld3BvcnQuXG4gICAqL1xuICBhdXRvRGV0ZWN0V2luZG93SGVpZ2h0OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBJZiBzZXQgdG8gdHJ1ZSwgdGhlIGJvZHkgY29udGVudCBvZiB0aGUgYERpYWxvZ2Agd2lsbCBiZSBzY3JvbGxhYmxlLlxuICAgKi9cbiAgYXV0b1Njcm9sbEJvZHlDb250ZW50OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBUaGUgYGNsYXNzTmFtZWAgdG8gYWRkIHRvIHRoZSBjb250ZW50J3Mgcm9vdCBlbGVtZW50IHVuZGVyIHRoZSB0aXRsZS5cbiAgICovXG4gIGJvZHlDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogT3ZlcnJpZGVzIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBjb250ZW50J3Mgcm9vdCBlbGVtZW50IHVuZGVyIHRoZSB0aXRsZS5cbiAgICovXG4gIGJvZHlTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBUaGUgY29udGVudHMgb2YgdGhlIGBEaWFsb2dgLlxuICAgKi9cbiAgY2hpbGRyZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBUaGUgYGNsYXNzTmFtZWAgdG8gYWRkIHRvIHRoZSBjb250ZW50IGNvbnRhaW5lci5cbiAgICovXG4gIGNvbnRlbnRDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogT3ZlcnJpZGVzIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBjb250ZW50IGNvbnRhaW5lci5cbiAgICovXG4gIGNvbnRlbnRTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBGb3JjZSB0aGUgdXNlciB0byB1c2Ugb25lIG9mIHRoZSBhY3Rpb25zIGluIHRoZSBgRGlhbG9nYC5cbiAgICogQ2xpY2tpbmcgb3V0c2lkZSB0aGUgYERpYWxvZ2Agd2lsbCBub3QgdHJpZ2dlciB0aGUgYG9uUmVxdWVzdENsb3NlYC5cbiAgICovXG4gIG1vZGFsOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBGaXJlZCB3aGVuIHRoZSBgRGlhbG9nYCBpcyByZXF1ZXN0ZWQgdG8gYmUgY2xvc2VkIGJ5IGEgY2xpY2sgb3V0c2lkZSB0aGUgYERpYWxvZ2Agb3Igb24gdGhlIGJ1dHRvbnMuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbH0gYnV0dG9uQ2xpY2tlZCBEZXRlcm1pbmVzIHdoZXRoZXIgYSBidXR0b24gY2xpY2sgdHJpZ2dlcmVkIHRoaXMgcmVxdWVzdC5cbiAgICovXG4gIG9uUmVxdWVzdENsb3NlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBDb250cm9scyB3aGV0aGVyIHRoZSBEaWFsb2cgaXMgb3BlbmVkIG9yIG5vdC5cbiAgICovXG4gIG9wZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbC5pc1JlcXVpcmVkLFxuICAvKipcbiAgICogVGhlIGBjbGFzc05hbWVgIHRvIGFkZCB0byB0aGUgYE92ZXJsYXlgIGNvbXBvbmVudCB0aGF0IGlzIHJlbmRlcmVkIGJlaGluZCB0aGUgYERpYWxvZ2AuXG4gICAqL1xuICBvdmVybGF5Q2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIE92ZXJyaWRlcyB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgYE92ZXJsYXlgIGNvbXBvbmVudCB0aGF0IGlzIHJlbmRlcmVkIGJlaGluZCB0aGUgYERpYWxvZ2AuXG4gICAqL1xuICBvdmVybGF5U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhlIENTUyBjbGFzcyBuYW1lIG9mIHRoZSBgUGFwZXJgIGVsZW1lbnQuXG4gICAqL1xuICBwYXBlckNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBQcm9wZXJ0aWVzIGFwcGxpZWQgdG8gdGhlIGBQYXBlcmAgZWxlbWVudC5cbiAgICovXG4gIHBhcGVyUHJvcHM6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBgRGlhbG9nYCBzaG91bGQgYmUgcmVwb3NpdGlvbmVkIHdoZW4gaXQncyBjb250ZW50cyBhcmUgdXBkYXRlZC5cbiAgICovXG4gIHJlcG9zaXRpb25PblVwZGF0ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIHN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIFRoZSB0aXRsZSB0byBkaXNwbGF5IG9uIHRoZSBgRGlhbG9nYC4gQ291bGQgYmUgbnVtYmVyLCBzdHJpbmcsIGVsZW1lbnQgb3IgYW4gYXJyYXkgY29udGFpbmluZyB0aGVzZSB0eXBlcy5cbiAgICovXG4gIHRpdGxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIC8qKlxuICAgKiBUaGUgYGNsYXNzTmFtZWAgdG8gYWRkIHRvIHRoZSB0aXRsZSdzIHJvb3QgY29udGFpbmVyIGVsZW1lbnQuXG4gICAqL1xuICB0aXRsZUNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIHRpdGxlJ3Mgcm9vdCBjb250YWluZXIgZWxlbWVudC5cbiAgICovXG4gIHRpdGxlU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0XG59IDoge307XG5leHBvcnRzLmRlZmF1bHQgPSBEaWFsb2c7XG5cbi8qKiovIH0pLFxuLyogMTQ3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7XG5cbnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblxudmFyIF9pbmhlcml0czIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXG52YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cbnZhciBfc2ltcGxlQXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblxudmFyIF9zaW1wbGVBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2ltcGxlQXNzaWduKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbnZhciBfcmVhY3REb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblxudmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cbnZhciBfcmVhY3RFdmVudExpc3RlbmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cbnZhciBfcmVhY3RFdmVudExpc3RlbmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RXZlbnRMaXN0ZW5lcik7XG5cbnZhciBfa2V5Y29kZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXG52YXIgX2tleWNvZGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5Y29kZSk7XG5cbnZhciBfYXV0b1ByZWZpeCA9IF9fd2VicGFja19yZXF1aXJlX18oNjgpO1xuXG52YXIgX2F1dG9QcmVmaXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXV0b1ByZWZpeCk7XG5cbnZhciBfdHJhbnNpdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblxudmFyIF90cmFuc2l0aW9uczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90cmFuc2l0aW9ucyk7XG5cbnZhciBfT3ZlcmxheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTA4KTtcblxudmFyIF9PdmVybGF5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX092ZXJsYXkpO1xuXG52YXIgX1BhcGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cbnZhciBfUGFwZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUGFwZXIpO1xuXG52YXIgX3Byb3BUeXBlczMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblxudmFyIF9wcm9wVHlwZXM0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzMyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBvcGVuTmF2RXZlbnRIYW5kbGVyID0gbnVsbDtcblxudmFyIERyYXdlciA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKERyYXdlciwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gRHJhd2VyKCkge1xuICAgIHZhciBfcmVmO1xuXG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERyYXdlcik7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKF9yZWYgPSBEcmF3ZXIuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERyYXdlcikpLmNhbGwuYXBwbHkoX3JlZiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLmhhbmRsZVRvdWNoVGFwT3ZlcmxheSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIF90aGlzLmNsb3NlKCdjbGlja2F3YXknKTtcbiAgICB9LCBfdGhpcy5oYW5kbGVLZXlVcCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKF90aGlzLnN0YXRlLm9wZW4gJiYgIV90aGlzLnByb3BzLmRvY2tlZCAmJiAoMCwgX2tleWNvZGUyLmRlZmF1bHQpKGV2ZW50KSA9PT0gJ2VzYycpIHtcbiAgICAgICAgX3RoaXMuY2xvc2UoJ2VzY2FwZScpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLm9uQm9keVRvdWNoU3RhcnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciBzd2lwZUFyZWFXaWR0aCA9IF90aGlzLnByb3BzLnN3aXBlQXJlYVdpZHRoO1xuXG4gICAgICB2YXIgdG91Y2hTdGFydFggPSBfdGhpcy5jb250ZXh0Lm11aVRoZW1lLmlzUnRsID8gZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aCAtIGV2ZW50LnRvdWNoZXNbMF0ucGFnZVggOiBldmVudC50b3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgdmFyIHRvdWNoU3RhcnRZID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWTtcblxuICAgICAgLy8gT3BlbiBvbmx5IGlmIHN3aXBpbmcgZnJvbSBmYXIgbGVmdCAob3IgcmlnaHQpIHdoaWxlIGNsb3NlZFxuICAgICAgaWYgKHN3aXBlQXJlYVdpZHRoICE9PSBudWxsICYmICFfdGhpcy5zdGF0ZS5vcGVuKSB7XG4gICAgICAgIGlmIChfdGhpcy5wcm9wcy5vcGVuU2Vjb25kYXJ5KSB7XG4gICAgICAgICAgLy8gSWYgb3BlblNlY29uZGFyeSBpcyB0cnVlIGNhbGN1bGF0ZSBmcm9tIHRoZSBmYXIgcmlnaHRcbiAgICAgICAgICBpZiAodG91Y2hTdGFydFggPCBkb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoIC0gc3dpcGVBcmVhV2lkdGgpIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiBvcGVuU2Vjb25kYXJ5IGlzIGZhbHNlIGNhbGN1bGF0ZSBmcm9tIHRoZSBmYXIgbGVmdFxuICAgICAgICAgIGlmICh0b3VjaFN0YXJ0WCA+IHN3aXBlQXJlYVdpZHRoKSByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFfdGhpcy5zdGF0ZS5vcGVuICYmIChvcGVuTmF2RXZlbnRIYW5kbGVyICE9PSBfdGhpcy5vbkJvZHlUb3VjaFN0YXJ0IHx8IF90aGlzLnByb3BzLmRpc2FibGVTd2lwZVRvT3BlbikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5tYXliZVN3aXBpbmcgPSB0cnVlO1xuICAgICAgX3RoaXMudG91Y2hTdGFydFggPSB0b3VjaFN0YXJ0WDtcbiAgICAgIF90aGlzLnRvdWNoU3RhcnRZID0gdG91Y2hTdGFydFk7XG5cbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgX3RoaXMub25Cb2R5VG91Y2hNb3ZlKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBfdGhpcy5vbkJvZHlUb3VjaEVuZCk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgX3RoaXMub25Cb2R5VG91Y2hFbmQpO1xuICAgIH0sIF90aGlzLm9uQm9keVRvdWNoTW92ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyIGN1cnJlbnRYID0gX3RoaXMuY29udGV4dC5tdWlUaGVtZS5pc1J0bCA/IGRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGggLSBldmVudC50b3VjaGVzWzBdLnBhZ2VYIDogZXZlbnQudG91Y2hlc1swXS5wYWdlWDtcbiAgICAgIHZhciBjdXJyZW50WSA9IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVk7XG5cbiAgICAgIGlmIChfdGhpcy5zdGF0ZS5zd2lwaW5nKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIF90aGlzLnNldFBvc2l0aW9uKF90aGlzLmdldFRyYW5zbGF0ZVgoY3VycmVudFgpKTtcbiAgICAgIH0gZWxzZSBpZiAoX3RoaXMubWF5YmVTd2lwaW5nKSB7XG4gICAgICAgIHZhciBkWEFicyA9IE1hdGguYWJzKGN1cnJlbnRYIC0gX3RoaXMudG91Y2hTdGFydFgpO1xuICAgICAgICB2YXIgZFlBYnMgPSBNYXRoLmFicyhjdXJyZW50WSAtIF90aGlzLnRvdWNoU3RhcnRZKTtcbiAgICAgICAgLy8gSWYgdGhlIHVzZXIgaGFzIG1vdmVkIGhpcyB0aHVtYiB0ZW4gcGl4ZWxzIGluIGVpdGhlciBkaXJlY3Rpb24sXG4gICAgICAgIC8vIHdlIGNhbiBzYWZlbHkgbWFrZSBhbiBhc3N1bXB0aW9uIGFib3V0IHdoZXRoZXIgaGUgd2FzIGludGVuZGluZ1xuICAgICAgICAvLyB0byBzd2lwZSBvciBzY3JvbGwuXG4gICAgICAgIHZhciB0aHJlc2hvbGQgPSAxMDtcblxuICAgICAgICBpZiAoZFhBYnMgPiB0aHJlc2hvbGQgJiYgZFlBYnMgPD0gdGhyZXNob2xkKSB7XG4gICAgICAgICAgX3RoaXMuc3dpcGVTdGFydFggPSBjdXJyZW50WDtcbiAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzd2lwaW5nOiBfdGhpcy5zdGF0ZS5vcGVuID8gJ2Nsb3NpbmcnIDogJ29wZW5pbmcnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgX3RoaXMuc2V0UG9zaXRpb24oX3RoaXMuZ2V0VHJhbnNsYXRlWChjdXJyZW50WCkpO1xuICAgICAgICB9IGVsc2UgaWYgKGRYQWJzIDw9IHRocmVzaG9sZCAmJiBkWUFicyA+IHRocmVzaG9sZCkge1xuICAgICAgICAgIF90aGlzLm9uQm9keVRvdWNoRW5kKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCBfdGhpcy5vbkJvZHlUb3VjaEVuZCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKF90aGlzLnN0YXRlLnN3aXBpbmcpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRYID0gX3RoaXMuY29udGV4dC5tdWlUaGVtZS5pc1J0bCA/IGRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGggLSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCA6IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgICB2YXIgdHJhbnNsYXRlUmF0aW8gPSBfdGhpcy5nZXRUcmFuc2xhdGVYKGN1cnJlbnRYKSAvIF90aGlzLmdldE1heFRyYW5zbGF0ZVgoKTtcblxuICAgICAgICBfdGhpcy5tYXliZVN3aXBpbmcgPSBmYWxzZTtcbiAgICAgICAgdmFyIHN3aXBpbmcgPSBfdGhpcy5zdGF0ZS5zd2lwaW5nO1xuICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgc3dpcGluZzogbnVsbFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBXZSBoYXZlIHRvIG9wZW4gb3IgY2xvc2UgYWZ0ZXIgc2V0dGluZyBzd2lwaW5nIHRvIG51bGwsXG4gICAgICAgIC8vIGJlY2F1c2Ugb25seSB0aGVuIENTUyB0cmFuc2l0aW9uIGlzIGVuYWJsZWQuXG4gICAgICAgIGlmICh0cmFuc2xhdGVSYXRpbyA+IDAuNSkge1xuICAgICAgICAgIGlmIChzd2lwaW5nID09PSAnb3BlbmluZycpIHtcbiAgICAgICAgICAgIF90aGlzLnNldFBvc2l0aW9uKF90aGlzLmdldE1heFRyYW5zbGF0ZVgoKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLmNsb3NlKCdzd2lwZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoc3dpcGluZyA9PT0gJ29wZW5pbmcnKSB7XG4gICAgICAgICAgICBfdGhpcy5vcGVuKCdzd2lwZScpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRQb3NpdGlvbigwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF90aGlzLm1heWJlU3dpcGluZyA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5yZW1vdmVCb2R5VG91Y2hMaXN0ZW5lcnMoKTtcbiAgICB9LCBfdGVtcCksICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkoX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRHJhd2VyLCBbe1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgIHRoaXMubWF5YmVTd2lwaW5nID0gZmFsc2U7XG4gICAgICB0aGlzLnRvdWNoU3RhcnRYID0gbnVsbDtcbiAgICAgIHRoaXMudG91Y2hTdGFydFkgPSBudWxsO1xuICAgICAgdGhpcy5zd2lwZVN0YXJ0WCA9IG51bGw7XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBvcGVuOiB0aGlzLnByb3BzLm9wZW4gIT09IG51bGwgPyB0aGlzLnByb3BzLm9wZW4gOiB0aGlzLnByb3BzLmRvY2tlZCxcbiAgICAgICAgc3dpcGluZzogbnVsbFxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHRoaXMuZW5hYmxlU3dpcGVIYW5kbGluZygpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgLy8gSWYgY29udHJvbGxlZCB0aGVuIHRoZSBvcGVuIHByb3AgdGFrZXMgcHJlY2VkZW5jZS5cbiAgICAgIGlmIChuZXh0UHJvcHMub3BlbiAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBvcGVuOiBuZXh0UHJvcHMub3BlblxuICAgICAgICB9KTtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBpZiBkb2NrZWQgaXMgY2hhbmdlZCwgY2hhbmdlIHRoZSBvcGVuIHN0YXRlIGZvciB3aGVuIHVuY29udHJvbGxlZC5cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5kb2NrZWQgIT09IG5leHRQcm9wcy5kb2NrZWQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgb3BlbjogbmV4dFByb3BzLmRvY2tlZFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnREaWRVcGRhdGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICB0aGlzLmVuYWJsZVN3aXBlSGFuZGxpbmcoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsVW5tb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdGhpcy5kaXNhYmxlU3dpcGVIYW5kbGluZygpO1xuICAgICAgdGhpcy5yZW1vdmVCb2R5VG91Y2hMaXN0ZW5lcnMoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdnZXRTdHlsZXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTdHlsZXMoKSB7XG4gICAgICB2YXIgbXVpVGhlbWUgPSB0aGlzLmNvbnRleHQubXVpVGhlbWU7XG4gICAgICB2YXIgdGhlbWUgPSBtdWlUaGVtZS5kcmF3ZXI7XG5cbiAgICAgIHZhciB4ID0gdGhpcy5nZXRUcmFuc2xhdGVNdWx0aXBsaWVyKCkgKiAodGhpcy5zdGF0ZS5vcGVuID8gMCA6IHRoaXMuZ2V0TWF4VHJhbnNsYXRlWCgpKTtcblxuICAgICAgdmFyIHN0eWxlcyA9IHtcbiAgICAgICAgcm9vdDoge1xuICAgICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICAgIHdpZHRoOiB0aGlzLmdldFRyYW5zbGF0ZWRXaWR0aCgpIHx8IHRoZW1lLndpZHRoLFxuICAgICAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICAgICAgIHpJbmRleDogbXVpVGhlbWUuekluZGV4LmRyYXdlcixcbiAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoJyArIHggKyAncHgsIDApJyxcbiAgICAgICAgICB0cmFuc2l0aW9uOiAhdGhpcy5zdGF0ZS5zd2lwaW5nICYmIF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KG51bGwsICd0cmFuc2Zvcm0nLCBudWxsKSxcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoZW1lLmNvbG9yLFxuICAgICAgICAgIG92ZXJmbG93OiAnYXV0bycsXG4gICAgICAgICAgV2Via2l0T3ZlcmZsb3dTY3JvbGxpbmc6ICd0b3VjaCcgLy8gaU9TIG1vbWVudHVtIHNjcm9sbGluZ1xuICAgICAgICB9LFxuICAgICAgICBvdmVybGF5OiB7XG4gICAgICAgICAgekluZGV4OiBtdWlUaGVtZS56SW5kZXguZHJhd2VyT3ZlcmxheSxcbiAgICAgICAgICBwb2ludGVyRXZlbnRzOiB0aGlzLnN0YXRlLm9wZW4gPyAnYXV0bycgOiAnbm9uZScgLy8gQnlwYXNzIG1vdXNlIGV2ZW50cyB3aGVuIGxlZnQgbmF2IGlzIGNsb3NpbmcuXG4gICAgICAgIH0sXG4gICAgICAgIHJvb3RXaGVuT3BlblJpZ2h0OiB7XG4gICAgICAgICAgbGVmdDogJ2F1dG8nLFxuICAgICAgICAgIHJpZ2h0OiAwXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBzdHlsZXM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2hvdWxkU2hvdycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNob3VsZFNob3coKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdGF0ZS5vcGVuIHx8ICEhdGhpcy5zdGF0ZS5zd2lwaW5nOyAvLyBjb21wb25lbnQgaXMgc3dpcGluZ1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2Nsb3NlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2UocmVhc29uKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5vcGVuID09PSBudWxsKSB0aGlzLnNldFN0YXRlKHsgb3BlbjogZmFsc2UgfSk7XG4gICAgICBpZiAodGhpcy5wcm9wcy5vblJlcXVlc3RDaGFuZ2UpIHRoaXMucHJvcHMub25SZXF1ZXN0Q2hhbmdlKGZhbHNlLCByZWFzb24pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb3BlbicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW4ocmVhc29uKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5vcGVuID09PSBudWxsKSB0aGlzLnNldFN0YXRlKHsgb3BlbjogdHJ1ZSB9KTtcbiAgICAgIGlmICh0aGlzLnByb3BzLm9uUmVxdWVzdENoYW5nZSkgdGhpcy5wcm9wcy5vblJlcXVlc3RDaGFuZ2UodHJ1ZSwgcmVhc29uKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2dldFRyYW5zbGF0ZWRXaWR0aCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRyYW5zbGF0ZWRXaWR0aCgpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy53aWR0aCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKCEvXlxcZCsoXFwuXFxkKyk/JSQvLnRlc3QodGhpcy5wcm9wcy53aWR0aCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBhIHZhbGlkIHBlcmNlbnRhZ2UgZm9ybWF0LicpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB3aWR0aCA9IHBhcnNlRmxvYXQodGhpcy5wcm9wcy53aWR0aCkgLyAxMDAuMDtcbiAgICAgICAgLy8gV2UgYXJlIGRvaW5nIG91ciBiZXN0IG9uIHRoZSBTZXJ2ZXIgdG8gcmVuZGVyIGEgY29uc2lzdGVudCBVSSwgaGVuY2UgdGhlXG4gICAgICAgIC8vIGRlZmF1bHQgdmFsdWUgb2YgMTAwMDBcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2lkdGggKiB3aW5kb3cuaW5uZXJXaWR0aCA6IDEwMDAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMud2lkdGg7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZ2V0TWF4VHJhbnNsYXRlWCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldE1heFRyYW5zbGF0ZVgoKSB7XG4gICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFRyYW5zbGF0ZWRXaWR0aCgpIHx8IHRoaXMuY29udGV4dC5tdWlUaGVtZS5kcmF3ZXIud2lkdGg7XG4gICAgICByZXR1cm4gd2lkdGggKyAxMDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdnZXRUcmFuc2xhdGVNdWx0aXBsaWVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VHJhbnNsYXRlTXVsdGlwbGllcigpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLm9wZW5TZWNvbmRhcnkgPyAxIDogLTE7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZW5hYmxlU3dpcGVIYW5kbGluZycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVuYWJsZVN3aXBlSGFuZGxpbmcoKSB7XG4gICAgICBpZiAoIXRoaXMucHJvcHMuZG9ja2VkKSB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMub25Cb2R5VG91Y2hTdGFydCk7XG4gICAgICAgIGlmICghb3Blbk5hdkV2ZW50SGFuZGxlcikge1xuICAgICAgICAgIG9wZW5OYXZFdmVudEhhbmRsZXIgPSB0aGlzLm9uQm9keVRvdWNoU3RhcnQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGlzYWJsZVN3aXBlSGFuZGxpbmcoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdkaXNhYmxlU3dpcGVIYW5kbGluZycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2FibGVTd2lwZUhhbmRsaW5nKCkge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5vbkJvZHlUb3VjaFN0YXJ0KTtcbiAgICAgIGlmIChvcGVuTmF2RXZlbnRIYW5kbGVyID09PSB0aGlzLm9uQm9keVRvdWNoU3RhcnQpIHtcbiAgICAgICAgb3Blbk5hdkV2ZW50SGFuZGxlciA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVtb3ZlQm9keVRvdWNoTGlzdGVuZXJzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlQm9keVRvdWNoTGlzdGVuZXJzKCkge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLm9uQm9keVRvdWNoTW92ZSk7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5vbkJvZHlUb3VjaEVuZCk7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgdGhpcy5vbkJvZHlUb3VjaEVuZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2V0UG9zaXRpb24nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRQb3NpdGlvbih0cmFuc2xhdGVYKSB7XG4gICAgICB2YXIgcnRsVHJhbnNsYXRlTXVsdGlwbGllciA9IHRoaXMuY29udGV4dC5tdWlUaGVtZS5pc1J0bCA/IC0xIDogMTtcbiAgICAgIHZhciBkcmF3ZXIgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcy5yZWZzLmNsaWNrQXdheWFibGVFbGVtZW50KTtcbiAgICAgIHZhciB0cmFuc2Zvcm1DU1MgPSAndHJhbnNsYXRlKCcgKyB0aGlzLmdldFRyYW5zbGF0ZU11bHRpcGxpZXIoKSAqIHJ0bFRyYW5zbGF0ZU11bHRpcGxpZXIgKiB0cmFuc2xhdGVYICsgJ3B4LCAwKSc7XG4gICAgICB0aGlzLnJlZnMub3ZlcmxheS5zZXRPcGFjaXR5KDEgLSB0cmFuc2xhdGVYIC8gdGhpcy5nZXRNYXhUcmFuc2xhdGVYKCkpO1xuICAgICAgX2F1dG9QcmVmaXgyLmRlZmF1bHQuc2V0KGRyYXdlci5zdHlsZSwgJ3RyYW5zZm9ybScsIHRyYW5zZm9ybUNTUyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZ2V0VHJhbnNsYXRlWCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRyYW5zbGF0ZVgoY3VycmVudFgpIHtcbiAgICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1heCh0aGlzLnN0YXRlLnN3aXBpbmcgPT09ICdjbG9zaW5nJyA/IHRoaXMuZ2V0VHJhbnNsYXRlTXVsdGlwbGllcigpICogKGN1cnJlbnRYIC0gdGhpcy5zd2lwZVN0YXJ0WCkgOiB0aGlzLmdldE1heFRyYW5zbGF0ZVgoKSAtIHRoaXMuZ2V0VHJhbnNsYXRlTXVsdGlwbGllcigpICogKHRoaXMuc3dpcGVTdGFydFggLSBjdXJyZW50WCksIDApLCB0aGlzLmdldE1heFRyYW5zbGF0ZVgoKSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgY2hpbGRyZW4gPSBfcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgICAgY2xhc3NOYW1lID0gX3Byb3BzLmNsYXNzTmFtZSxcbiAgICAgICAgICBjb250YWluZXJDbGFzc05hbWUgPSBfcHJvcHMuY29udGFpbmVyQ2xhc3NOYW1lLFxuICAgICAgICAgIGNvbnRhaW5lclN0eWxlID0gX3Byb3BzLmNvbnRhaW5lclN0eWxlLFxuICAgICAgICAgIGRvY2tlZCA9IF9wcm9wcy5kb2NrZWQsXG4gICAgICAgICAgb3BlblNlY29uZGFyeSA9IF9wcm9wcy5vcGVuU2Vjb25kYXJ5LFxuICAgICAgICAgIG92ZXJsYXlDbGFzc05hbWUgPSBfcHJvcHMub3ZlcmxheUNsYXNzTmFtZSxcbiAgICAgICAgICBvdmVybGF5U3R5bGUgPSBfcHJvcHMub3ZlcmxheVN0eWxlLFxuICAgICAgICAgIHN0eWxlID0gX3Byb3BzLnN0eWxlLFxuICAgICAgICAgIHpEZXB0aCA9IF9wcm9wcy56RGVwdGg7XG5cblxuICAgICAgdmFyIHN0eWxlcyA9IHRoaXMuZ2V0U3R5bGVzKCk7XG5cbiAgICAgIHZhciBvdmVybGF5ID0gdm9pZCAwO1xuICAgICAgaWYgKCFkb2NrZWQpIHtcbiAgICAgICAgb3ZlcmxheSA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9PdmVybGF5Mi5kZWZhdWx0LCB7XG4gICAgICAgICAgcmVmOiAnb3ZlcmxheScsXG4gICAgICAgICAgc2hvdzogdGhpcy5zaG91bGRTaG93KCksXG4gICAgICAgICAgY2xhc3NOYW1lOiBvdmVybGF5Q2xhc3NOYW1lLFxuICAgICAgICAgIHN0eWxlOiAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLm92ZXJsYXksIG92ZXJsYXlTdHlsZSksXG4gICAgICAgICAgdHJhbnNpdGlvbkVuYWJsZWQ6ICF0aGlzLnN0YXRlLnN3aXBpbmcsXG4gICAgICAgICAgb25Ub3VjaFRhcDogdGhpcy5oYW5kbGVUb3VjaFRhcE92ZXJsYXlcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHtcbiAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgICBzdHlsZTogc3R5bGVcbiAgICAgICAgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0RXZlbnRMaXN0ZW5lcjIuZGVmYXVsdCwgeyB0YXJnZXQ6ICd3aW5kb3cnLCBvbktleVVwOiB0aGlzLmhhbmRsZUtleVVwIH0pLFxuICAgICAgICBvdmVybGF5LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICBfUGFwZXIyLmRlZmF1bHQsXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVmOiAnY2xpY2tBd2F5YWJsZUVsZW1lbnQnLFxuICAgICAgICAgICAgekRlcHRoOiB6RGVwdGgsXG4gICAgICAgICAgICByb3VuZGVkOiBmYWxzZSxcbiAgICAgICAgICAgIHRyYW5zaXRpb25FbmFibGVkOiAhdGhpcy5zdGF0ZS5zd2lwaW5nLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBjb250YWluZXJDbGFzc05hbWUsXG4gICAgICAgICAgICBzdHlsZTogKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5yb290LCBvcGVuU2Vjb25kYXJ5ICYmIHN0eWxlcy5yb290V2hlbk9wZW5SaWdodCwgY29udGFpbmVyU3R5bGUpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjaGlsZHJlblxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gRHJhd2VyO1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuRHJhd2VyLmRlZmF1bHRQcm9wcyA9IHtcbiAgZGlzYWJsZVN3aXBlVG9PcGVuOiBmYWxzZSxcbiAgZG9ja2VkOiB0cnVlLFxuICBvcGVuOiBudWxsLFxuICBvcGVuU2Vjb25kYXJ5OiBmYWxzZSxcbiAgc3dpcGVBcmVhV2lkdGg6IDMwLFxuICB3aWR0aDogbnVsbCxcbiAgekRlcHRoOiAyXG59O1xuRHJhd2VyLmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5EcmF3ZXIucHJvcFR5cGVzID0gIGZhbHNlID8ge1xuICAvKipcbiAgICogVGhlIGNvbnRlbnRzIG9mIHRoZSBgRHJhd2VyYFxuICAgKi9cbiAgY2hpbGRyZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgLyoqXG4gICAqIFRoZSBDU1MgY2xhc3MgbmFtZSBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgY2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIFRoZSBDU1MgY2xhc3MgbmFtZSBvZiB0aGUgY29udGFpbmVyIGVsZW1lbnQuXG4gICAqL1xuICBjb250YWluZXJDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIGNvbnRhaW5lciBlbGVtZW50LlxuICAgKi9cbiAgY29udGFpbmVyU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogSWYgdHJ1ZSwgc3dpcGluZyBzaWRld2F5cyB3aGVuIHRoZSBgRHJhd2VyYCBpcyBjbG9zZWQgd2lsbCBub3Qgb3BlbiBpdC5cbiAgICovXG4gIGRpc2FibGVTd2lwZVRvT3BlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogSWYgdHJ1ZSwgdGhlIGBEcmF3ZXJgIHdpbGwgYmUgZG9ja2VkLiBJbiB0aGlzIHN0YXRlLCB0aGUgb3ZlcmxheSB3b24ndCBzaG93IGFuZFxuICAgKiBjbGlja2luZyBvbiBhIG1lbnUgaXRlbSB3aWxsIG5vdCBjbG9zZSB0aGUgYERyYXdlcmAuXG4gICAqL1xuICBkb2NrZWQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZpcmVkIHdoZW4gdGhlIGBvcGVuYCBzdGF0ZSBvZiB0aGUgYERyYXdlcmAgaXMgcmVxdWVzdGVkIHRvIGJlIGNoYW5nZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3BlbiBJZiB0cnVlLCB0aGUgYERyYXdlcmAgd2FzIHJlcXVlc3RlZCB0byBiZSBvcGVuZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gVGhlIHJlYXNvbiBmb3IgdGhlIG9wZW4gb3IgY2xvc2UgcmVxdWVzdC4gUG9zc2libGUgdmFsdWVzIGFyZVxuICAgKiAnc3dpcGUnIGZvciBvcGVuIHJlcXVlc3RzOyAnY2xpY2thd2F5JyAob24gb3ZlcmxheSBjbGlja3MpLFxuICAgKiAnZXNjYXBlJyAob24gZXNjYXBlIGtleSBwcmVzcyksIGFuZCAnc3dpcGUnIGZvciBjbG9zZSByZXF1ZXN0cy5cbiAgICovXG4gIG9uUmVxdWVzdENoYW5nZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogSWYgdHJ1ZSwgdGhlIGBEcmF3ZXJgIGlzIG9wZW5lZC4gIFByb3ZpZGluZyBhIHZhbHVlIHdpbGwgdHVybiB0aGUgYERyYXdlcmBcbiAgICogaW50byBhIGNvbnRyb2xsZWQgY29tcG9uZW50LlxuICAgKi9cbiAgb3BlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogSWYgdHJ1ZSwgdGhlIGBEcmF3ZXJgIGlzIHBvc2l0aW9uZWQgdG8gb3BlbiBmcm9tIHRoZSBvcHBvc2l0ZSBzaWRlLlxuICAgKi9cbiAgb3BlblNlY29uZGFyeTogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogVGhlIENTUyBjbGFzcyBuYW1lIHRvIGFkZCB0byB0aGUgYE92ZXJsYXlgIGNvbXBvbmVudCB0aGF0IGlzIHJlbmRlcmVkIGJlaGluZCB0aGUgYERyYXdlcmAuXG4gICAqL1xuICBvdmVybGF5Q2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBgT3ZlcmxheWAgY29tcG9uZW50IHRoYXQgaXMgcmVuZGVyZWQgYmVoaW5kIHRoZSBgRHJhd2VyYC5cbiAgICovXG4gIG92ZXJsYXlTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhlIHdpZHRoIG9mIHRoZSBsZWZ0IG1vc3QgKG9yIHJpZ2h0IG1vc3QpIGFyZWEgaW4gcGl4ZWxzIHdoZXJlIHRoZSBgRHJhd2VyYCBjYW4gYmVcbiAgICogc3dpcGVkIG9wZW4gZnJvbS4gU2V0dGluZyB0aGlzIHRvIGBudWxsYCBzcGFucyB0aGF0IGFyZWEgdG8gdGhlIGVudGlyZSBwYWdlXG4gICAqICgqKkNBVVRJT04hKiogU2V0dGluZyB0aGlzIHByb3BlcnR5IHRvIGBudWxsYCBtaWdodCBjYXVzZSBpc3N1ZXMgd2l0aCBzbGlkZXJzIGFuZFxuICAgKiBzd2lwZWFibGUgYFRhYnNgOiB1c2UgYXQgeW91ciBvd24gcmlzaykuXG4gICAqL1xuICBzd2lwZUFyZWFXaWR0aDogX3Byb3BUeXBlczIuZGVmYXVsdC5udW1iZXIsXG4gIC8qKlxuICAgKiBUaGUgd2lkdGggb2YgdGhlIGBEcmF3ZXJgIGluIHBpeGVscyBvciBwZXJjZW50YWdlIGluIHN0cmluZyBmb3JtYXQgZXguIGA1MCVgIHRvIGZpbGxcbiAgICogaGFsZiBvZiB0aGUgd2luZG93IG9yIGAxMDAlYCBhbmQgc28gb24uIERlZmF1bHRzIHRvIHVzaW5nIHRoZSB2YWx1ZXMgZnJvbSB0aGVtZS5cbiAgICovXG4gIHdpZHRoOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9uZU9mVHlwZShbX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsIF9wcm9wVHlwZXMyLmRlZmF1bHQubnVtYmVyXSksXG4gIC8qKlxuICAgKiBUaGUgekRlcHRoIG9mIHRoZSBgRHJhd2VyYC5cbiAgICovXG4gIHpEZXB0aDogX3Byb3BUeXBlczQuZGVmYXVsdC56RGVwdGhcblxufSA6IHt9O1xuZXhwb3J0cy5kZWZhdWx0ID0gRHJhd2VyO1xuXG4vKioqLyB9KSxcbi8qIDE0OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdW5kZWZpbmVkO1xuXG52YXIgX0RyYXdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ3KTtcblxudmFyIF9EcmF3ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRHJhd2VyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZXhwb3J0cy5kZWZhdWx0ID0gX0RyYXdlcjIuZGVmYXVsdDtcblxuLyoqKi8gfSksXG4vKiAxNDkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cbnZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RXaXRob3V0UHJvcGVydGllczIpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7XG5cbnZhciBfaW5oZXJpdHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG52YXIgX3NpbXBsZUFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cbnZhciBfc2ltcGxlQXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NpbXBsZUFzc2lnbik7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cbnZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXG52YXIgX3RyYW5zaXRpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cbnZhciBfdHJhbnNpdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHJhbnNpdGlvbnMpO1xuXG52YXIgX2Fycm93RHJvcERvd24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NCk7XG5cbnZhciBfYXJyb3dEcm9wRG93bjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hcnJvd0Ryb3BEb3duKTtcblxudmFyIF9NZW51ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MCk7XG5cbnZhciBfTWVudTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9NZW51KTtcblxudmFyIF9DbGVhckZpeCA9IF9fd2VicGFja19yZXF1aXJlX18oMTU1KTtcblxudmFyIF9DbGVhckZpeDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9DbGVhckZpeCk7XG5cbnZhciBfUG9wb3ZlciA9IF9fd2VicGFja19yZXF1aXJlX18oNjYpO1xuXG52YXIgX1BvcG92ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUG9wb3Zlcik7XG5cbnZhciBfUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDcpO1xuXG52YXIgX1BvcG92ZXJBbmltYXRpb25WZXJ0aWNhbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Qb3BvdmVyQW5pbWF0aW9uVmVydGljYWwpO1xuXG52YXIgX2tleWNvZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblxudmFyIF9rZXljb2RlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2tleWNvZGUpO1xuXG52YXIgX2V2ZW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oNjkpO1xuXG52YXIgX2V2ZW50czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ldmVudHMpO1xuXG52YXIgX0ljb25CdXR0b24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblxudmFyIF9JY29uQnV0dG9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ljb25CdXR0b24pO1xuXG52YXIgX3Byb3BUeXBlczMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblxudmFyIF9wcm9wVHlwZXM0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzMyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGdldFN0eWxlcyhwcm9wcywgY29udGV4dCkge1xuICB2YXIgZGlzYWJsZWQgPSBwcm9wcy5kaXNhYmxlZDtcblxuICB2YXIgc3BhY2luZyA9IGNvbnRleHQubXVpVGhlbWUuYmFzZVRoZW1lLnNwYWNpbmc7XG4gIHZhciBwYWxldHRlID0gY29udGV4dC5tdWlUaGVtZS5iYXNlVGhlbWUucGFsZXR0ZTtcbiAgdmFyIGFjY2VudENvbG9yID0gY29udGV4dC5tdWlUaGVtZS5kcm9wRG93bk1lbnUuYWNjZW50Q29sb3I7XG4gIHJldHVybiB7XG4gICAgY29udHJvbDoge1xuICAgICAgY3Vyc29yOiBkaXNhYmxlZCA/ICdub3QtYWxsb3dlZCcgOiAncG9pbnRlcicsXG4gICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgd2lkdGg6ICcxMDAlJ1xuICAgIH0sXG4gICAgaWNvbjoge1xuICAgICAgZmlsbDogYWNjZW50Q29sb3IsXG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIHJpZ2h0OiBzcGFjaW5nLmRlc2t0b3BHdXR0ZXJMZXNzLFxuICAgICAgdG9wOiAoc3BhY2luZy5pY29uU2l6ZSAtIDI0KSAvIDIgKyBzcGFjaW5nLmRlc2t0b3BHdXR0ZXJNaW5pIC8gMlxuICAgIH0sXG4gICAgaWNvbkNoaWxkcmVuOiB7XG4gICAgICBmaWxsOiAnaW5oZXJpdCdcbiAgICB9LFxuICAgIGxhYmVsOiB7XG4gICAgICBjb2xvcjogZGlzYWJsZWQgPyBwYWxldHRlLmRpc2FibGVkQ29sb3IgOiBwYWxldHRlLnRleHRDb2xvcixcbiAgICAgIGhlaWdodDogc3BhY2luZy5kZXNrdG9wVG9vbGJhckhlaWdodCArICdweCcsXG4gICAgICBsaW5lSGVpZ2h0OiBzcGFjaW5nLmRlc2t0b3BUb29sYmFySGVpZ2h0ICsgJ3B4JyxcbiAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICAgIG9wYWNpdHk6IDEsXG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgIHBhZGRpbmdMZWZ0OiBzcGFjaW5nLmRlc2t0b3BHdXR0ZXIsXG4gICAgICBwYWRkaW5nUmlnaHQ6IHNwYWNpbmcuaWNvblNpemUgKiAyICsgc3BhY2luZy5kZXNrdG9wR3V0dGVyTWluaSxcbiAgICAgIHRleHRPdmVyZmxvdzogJ2VsbGlwc2lzJyxcbiAgICAgIHRvcDogMCxcbiAgICAgIHdoaXRlU3BhY2U6ICdub3dyYXAnXG4gICAgfSxcbiAgICBsYWJlbFdoZW5PcGVuOiB7XG4gICAgICBvcGFjaXR5OiAwLFxuICAgICAgdG9wOiBzcGFjaW5nLmRlc2t0b3BUb29sYmFySGVpZ2h0IC8gOFxuICAgIH0sXG4gICAgcm9vdDoge1xuICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICBmb250U2l6ZTogc3BhY2luZy5kZXNrdG9wRHJvcERvd25NZW51Rm9udFNpemUsXG4gICAgICBoZWlnaHQ6IHNwYWNpbmcuZGVza3RvcFN1YmhlYWRlckhlaWdodCxcbiAgICAgIGZvbnRGYW1pbHk6IGNvbnRleHQubXVpVGhlbWUuYmFzZVRoZW1lLmZvbnRGYW1pbHksXG4gICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgIHRyYW5zaXRpb246IF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KClcbiAgICB9LFxuICAgIHJvb3RXaGVuT3Blbjoge1xuICAgICAgb3BhY2l0eTogMVxuICAgIH0sXG4gICAgdW5kZXJsaW5lOiB7XG4gICAgICBib3JkZXJUb3A6ICdzb2xpZCAxcHggJyArIGFjY2VudENvbG9yLFxuICAgICAgYm90dG9tOiAxLFxuICAgICAgbGVmdDogMCxcbiAgICAgIG1hcmdpbjogJy0xcHggJyArIHNwYWNpbmcuZGVza3RvcEd1dHRlciArICdweCcsXG4gICAgICByaWdodDogMCxcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnXG4gICAgfVxuICB9O1xufVxuXG52YXIgRHJvcERvd25NZW51ID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoRHJvcERvd25NZW51LCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBEcm9wRG93bk1lbnUoKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRHJvcERvd25NZW51KTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoX3JlZiA9IERyb3BEb3duTWVudS5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRHJvcERvd25NZW51KSkuY2FsbC5hcHBseShfcmVmLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBvcGVuOiBmYWxzZVxuICAgIH0sIF90aGlzLnJvb3ROb2RlID0gdW5kZWZpbmVkLCBfdGhpcy5hcnJvd05vZGUgPSB1bmRlZmluZWQsIF90aGlzLmhhbmRsZVRvdWNoVGFwQ29udHJvbCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmICghX3RoaXMucHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIG9wZW46ICFfdGhpcy5zdGF0ZS5vcGVuLFxuICAgICAgICAgIGFuY2hvckVsOiBfdGhpcy5yb290Tm9kZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCBfdGhpcy5oYW5kbGVSZXF1ZXN0Q2xvc2VNZW51ID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuY2xvc2UoZmFsc2UpO1xuICAgIH0sIF90aGlzLmhhbmRsZUVzY0tleURvd25NZW51ID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuY2xvc2UodHJ1ZSk7XG4gICAgfSwgX3RoaXMuaGFuZGxlS2V5RG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgc3dpdGNoICgoMCwgX2tleWNvZGUyLmRlZmF1bHQpKGV2ZW50KSkge1xuICAgICAgICBjYXNlICd1cCc6XG4gICAgICAgIGNhc2UgJ2Rvd24nOlxuICAgICAgICBjYXNlICdzcGFjZSc6XG4gICAgICAgIGNhc2UgJ2VudGVyJzpcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIG9wZW46IHRydWUsXG4gICAgICAgICAgICBhbmNob3JFbDogX3RoaXMucm9vdE5vZGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9LCBfdGhpcy5oYW5kbGVJdGVtVG91Y2hUYXAgPSBmdW5jdGlvbiAoZXZlbnQsIGNoaWxkLCBpbmRleCkge1xuICAgICAgaWYgKF90aGlzLnByb3BzLm11bHRpcGxlKSB7XG4gICAgICAgIGlmICghX3RoaXMuc3RhdGUub3Blbikge1xuICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgb3BlbjogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXZlbnQucGVyc2lzdCgpO1xuICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgb3BlbjogZmFsc2VcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChfdGhpcy5wcm9wcy5vbkNoYW5nZSkge1xuICAgICAgICAgICAgX3RoaXMucHJvcHMub25DaGFuZ2UoZXZlbnQsIGluZGV4LCBjaGlsZC5wcm9wcy52YWx1ZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX3RoaXMuY2xvc2UoX2V2ZW50czIuZGVmYXVsdC5pc0tleWJvYXJkKGV2ZW50KSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmhhbmRsZUNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCwgdmFsdWUpIHtcbiAgICAgIGlmIChfdGhpcy5wcm9wcy5tdWx0aXBsZSAmJiBfdGhpcy5wcm9wcy5vbkNoYW5nZSkge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbkNoYW5nZShldmVudCwgdW5kZWZpbmVkLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSwgX3RoaXMuY2xvc2UgPSBmdW5jdGlvbiAoaXNLZXlib2FyZCkge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBvcGVuOiBmYWxzZVxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoX3RoaXMucHJvcHMub25DbG9zZSkge1xuICAgICAgICAgIF90aGlzLnByb3BzLm9uQ2xvc2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0tleWJvYXJkKSB7XG4gICAgICAgICAgdmFyIGRyb3BBcnJvdyA9IF90aGlzLmFycm93Tm9kZTtcbiAgICAgICAgICB2YXIgZHJvcE5vZGUgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUoZHJvcEFycm93KTtcbiAgICAgICAgICBkcm9wTm9kZS5mb2N1cygpO1xuICAgICAgICAgIGRyb3BBcnJvdy5zZXRLZXlib2FyZEZvY3VzKHRydWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LCBfdGVtcCksICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkoX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgLy8gVGhlIG5lc3RlZCBzdHlsZXMgZm9yIGRyb3AtZG93bi1tZW51IGFyZSBtb2RpZmllZCBieSB0b29sYmFyIGFuZCBwb3NzaWJseVxuICAvLyBvdGhlciB1c2VyIGNvbXBvbmVudHMsIHNvIGl0IHdpbGwgZ2l2ZSBmdWxsIGFjY2VzcyB0byBpdHMganMgc3R5bGVzIHJhdGhlclxuICAvLyB0aGFuIGp1c3QgdGhlIHBhcmVudC5cblxuXG4gICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKERyb3BEb3duTWVudSwgW3tcbiAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmF1dG9XaWR0aCkge1xuICAgICAgICB0aGlzLnNldFdpZHRoKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5wcm9wcy5vcGVuSW1tZWRpYXRlbHkpIHtcbiAgICAgICAgLy8gVE9ETzogVGVtcG9yYXJ5IGZpeCB0byBtYWtlIG9wZW5JbW1lZGlhdGVseSB3b3JrIHdpdGggcG9wb3Zlci5cbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgcmVhY3Qvbm8tZGlkLW1vdW50LXNldC1zdGF0ZSAqL1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMyLnNldFN0YXRlKHtcbiAgICAgICAgICAgIG9wZW46IHRydWUsXG4gICAgICAgICAgICBhbmNob3JFbDogX3RoaXMyLnJvb3ROb2RlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIDApO1xuICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIHJlYWN0L25vLWRpZC1tb3VudC1zZXQtc3RhdGUgKi9cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcygpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmF1dG9XaWR0aCkge1xuICAgICAgICB0aGlzLnNldFdpZHRoKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZ2V0SW5wdXROb2RlJyxcblxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgZGVwcmVjYXRlZCBidXQgc3RpbGwgaGVyZSBiZWNhdXNlIHRoZSBUZXh0RmllbGRcbiAgICAgKiBuZWVkIGl0IGluIG9yZGVyIHRvIHdvcmsuIFRPRE86IFRoYXQgd2lsbCBiZSBhZGRyZXNzZWQgbGF0ZXIuXG4gICAgICovXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldElucHV0Tm9kZSgpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICB2YXIgcm9vdE5vZGUgPSB0aGlzLnJvb3ROb2RlO1xuXG4gICAgICByb290Tm9kZS5mb2N1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFfdGhpczMucHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgICAgICBfdGhpczMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgb3BlbjogIV90aGlzMy5zdGF0ZS5vcGVuLFxuICAgICAgICAgICAgYW5jaG9yRWw6IF90aGlzMy5yb290Tm9kZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gcm9vdE5vZGU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2V0V2lkdGgnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRXaWR0aCgpIHtcbiAgICAgIHZhciBlbCA9IHRoaXMucm9vdE5vZGU7XG4gICAgICBpZiAoIXRoaXMucHJvcHMuc3R5bGUgfHwgIXRoaXMucHJvcHMuc3R5bGUuaGFzT3duUHJvcGVydHkoJ3dpZHRoJykpIHtcbiAgICAgICAgZWwuc3R5bGUud2lkdGggPSAnYXV0byc7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGFuaW1hdGVkID0gX3Byb3BzLmFuaW1hdGVkLFxuICAgICAgICAgIGFuaW1hdGlvbiA9IF9wcm9wcy5hbmltYXRpb24sXG4gICAgICAgICAgYXV0b1dpZHRoID0gX3Byb3BzLmF1dG9XaWR0aCxcbiAgICAgICAgICBtdWx0aXBsZSA9IF9wcm9wcy5tdWx0aXBsZSxcbiAgICAgICAgICBjaGlsZHJlbiA9IF9wcm9wcy5jaGlsZHJlbixcbiAgICAgICAgICBjbGFzc05hbWUgPSBfcHJvcHMuY2xhc3NOYW1lLFxuICAgICAgICAgIGRpc2FibGVkID0gX3Byb3BzLmRpc2FibGVkLFxuICAgICAgICAgIGljb25TdHlsZSA9IF9wcm9wcy5pY29uU3R5bGUsXG4gICAgICAgICAgbGFiZWxTdHlsZSA9IF9wcm9wcy5sYWJlbFN0eWxlLFxuICAgICAgICAgIGxpc3RTdHlsZSA9IF9wcm9wcy5saXN0U3R5bGUsXG4gICAgICAgICAgbWF4SGVpZ2h0ID0gX3Byb3BzLm1heEhlaWdodCxcbiAgICAgICAgICBtZW51U3R5bGVQcm9wID0gX3Byb3BzLm1lbnVTdHlsZSxcbiAgICAgICAgICBzZWxlY3Rpb25SZW5kZXJlciA9IF9wcm9wcy5zZWxlY3Rpb25SZW5kZXJlcixcbiAgICAgICAgICBvbkNsb3NlID0gX3Byb3BzLm9uQ2xvc2UsXG4gICAgICAgICAgb3BlbkltbWVkaWF0ZWx5ID0gX3Byb3BzLm9wZW5JbW1lZGlhdGVseSxcbiAgICAgICAgICBtZW51SXRlbVN0eWxlID0gX3Byb3BzLm1lbnVJdGVtU3R5bGUsXG4gICAgICAgICAgc2VsZWN0ZWRNZW51SXRlbVN0eWxlID0gX3Byb3BzLnNlbGVjdGVkTWVudUl0ZW1TdHlsZSxcbiAgICAgICAgICBzdHlsZSA9IF9wcm9wcy5zdHlsZSxcbiAgICAgICAgICB1bmRlcmxpbmVTdHlsZSA9IF9wcm9wcy51bmRlcmxpbmVTdHlsZSxcbiAgICAgICAgICB2YWx1ZSA9IF9wcm9wcy52YWx1ZSxcbiAgICAgICAgICBpY29uQnV0dG9uID0gX3Byb3BzLmljb25CdXR0b24sXG4gICAgICAgICAgYW5jaG9yT3JpZ2luID0gX3Byb3BzLmFuY2hvck9yaWdpbixcbiAgICAgICAgICB0YXJnZXRPcmlnaW4gPSBfcHJvcHMudGFyZ2V0T3JpZ2luLFxuICAgICAgICAgIG90aGVyID0gKDAsIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMuZGVmYXVsdCkoX3Byb3BzLCBbJ2FuaW1hdGVkJywgJ2FuaW1hdGlvbicsICdhdXRvV2lkdGgnLCAnbXVsdGlwbGUnLCAnY2hpbGRyZW4nLCAnY2xhc3NOYW1lJywgJ2Rpc2FibGVkJywgJ2ljb25TdHlsZScsICdsYWJlbFN0eWxlJywgJ2xpc3RTdHlsZScsICdtYXhIZWlnaHQnLCAnbWVudVN0eWxlJywgJ3NlbGVjdGlvblJlbmRlcmVyJywgJ29uQ2xvc2UnLCAnb3BlbkltbWVkaWF0ZWx5JywgJ21lbnVJdGVtU3R5bGUnLCAnc2VsZWN0ZWRNZW51SXRlbVN0eWxlJywgJ3N0eWxlJywgJ3VuZGVybGluZVN0eWxlJywgJ3ZhbHVlJywgJ2ljb25CdXR0b24nLCAnYW5jaG9yT3JpZ2luJywgJ3RhcmdldE9yaWdpbiddKTtcbiAgICAgIHZhciBfc3RhdGUgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgIGFuY2hvckVsID0gX3N0YXRlLmFuY2hvckVsLFxuICAgICAgICAgIG9wZW4gPSBfc3RhdGUub3BlbjtcbiAgICAgIHZhciBwcmVwYXJlU3R5bGVzID0gdGhpcy5jb250ZXh0Lm11aVRoZW1lLnByZXBhcmVTdHlsZXM7XG5cbiAgICAgIHZhciBzdHlsZXMgPSBnZXRTdHlsZXModGhpcy5wcm9wcywgdGhpcy5jb250ZXh0KTtcblxuICAgICAgdmFyIGRpc3BsYXlWYWx1ZSA9ICcnO1xuICAgICAgaWYgKCFtdWx0aXBsZSkge1xuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuQ2hpbGRyZW4uZm9yRWFjaChjaGlsZHJlbiwgZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgaWYgKGNoaWxkICYmIHZhbHVlID09PSBjaGlsZC5wcm9wcy52YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHNlbGVjdGlvblJlbmRlcmVyKSB7XG4gICAgICAgICAgICAgIGRpc3BsYXlWYWx1ZSA9IHNlbGVjdGlvblJlbmRlcmVyKHZhbHVlLCBjaGlsZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBUaGlzIHdpbGwgbmVlZCB0byBiZSBpbXByb3ZlZCAoaW4gY2FzZSBwcmltYXJ5VGV4dCBpcyBhIG5vZGUpXG4gICAgICAgICAgICAgIGRpc3BsYXlWYWx1ZSA9IGNoaWxkLnByb3BzLmxhYmVsIHx8IGNoaWxkLnByb3BzLnByaW1hcnlUZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdmFsdWVzID0gW107XG4gICAgICAgIHZhciBzZWxlY3Rpb25SZW5kZXJlckNoaWxkcmVuID0gW107XG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5DaGlsZHJlbi5mb3JFYWNoKGNoaWxkcmVuLCBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgICBpZiAoY2hpbGQgJiYgdmFsdWUgJiYgdmFsdWUuaW5kZXhPZihjaGlsZC5wcm9wcy52YWx1ZSkgPiAtMSkge1xuICAgICAgICAgICAgaWYgKHNlbGVjdGlvblJlbmRlcmVyKSB7XG4gICAgICAgICAgICAgIHZhbHVlcy5wdXNoKGNoaWxkLnByb3BzLnZhbHVlKTtcbiAgICAgICAgICAgICAgc2VsZWN0aW9uUmVuZGVyZXJDaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhbHVlcy5wdXNoKGNoaWxkLnByb3BzLmxhYmVsIHx8IGNoaWxkLnByb3BzLnByaW1hcnlUZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRpc3BsYXlWYWx1ZSA9IFtdO1xuICAgICAgICBpZiAoc2VsZWN0aW9uUmVuZGVyZXIpIHtcbiAgICAgICAgICBkaXNwbGF5VmFsdWUgPSBzZWxlY3Rpb25SZW5kZXJlcih2YWx1ZXMsIHNlbGVjdGlvblJlbmRlcmVyQ2hpbGRyZW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRpc3BsYXlWYWx1ZSA9IHZhbHVlcy5qb2luKCcsICcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBtZW51U3R5bGUgPSB2b2lkIDA7XG4gICAgICBpZiAoYW5jaG9yRWwgJiYgIWF1dG9XaWR0aCkge1xuICAgICAgICBtZW51U3R5bGUgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe1xuICAgICAgICAgIHdpZHRoOiBhbmNob3JFbC5jbGllbnRXaWR0aFxuICAgICAgICB9LCBtZW51U3R5bGVQcm9wKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1lbnVTdHlsZSA9IG1lbnVTdHlsZVByb3A7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgICgwLCBfZXh0ZW5kczMuZGVmYXVsdCkoe30sIG90aGVyLCB7XG4gICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYobm9kZSkge1xuICAgICAgICAgICAgX3RoaXM0LnJvb3ROb2RlID0gbm9kZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICAgIHN0eWxlOiBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgc3R5bGVzLnJvb3QsIG9wZW4gJiYgc3R5bGVzLnJvb3RXaGVuT3Blbiwgc3R5bGUpKVxuICAgICAgICB9KSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgX0NsZWFyRml4Mi5kZWZhdWx0LFxuICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5jb250cm9sLCBvblRvdWNoVGFwOiB0aGlzLmhhbmRsZVRvdWNoVGFwQ29udHJvbCB9LFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7IHN0eWxlOiBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgc3R5bGVzLmxhYmVsLCBvcGVuICYmIHN0eWxlcy5sYWJlbFdoZW5PcGVuLCBsYWJlbFN0eWxlKSkgfSxcbiAgICAgICAgICAgIGRpc3BsYXlWYWx1ZVxuICAgICAgICAgICksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBfSWNvbkJ1dHRvbjIuZGVmYXVsdCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLFxuICAgICAgICAgICAgICBvbktleURvd246IHRoaXMuaGFuZGxlS2V5RG93bixcbiAgICAgICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYobm9kZSkge1xuICAgICAgICAgICAgICAgIF90aGlzNC5hcnJvd05vZGUgPSBub2RlO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBzdHlsZTogKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBzdHlsZXMuaWNvbiwgaWNvblN0eWxlKSxcbiAgICAgICAgICAgICAgaWNvblN0eWxlOiBzdHlsZXMuaWNvbkNoaWxkcmVuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaWNvbkJ1dHRvblxuICAgICAgICAgICksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgc3R5bGU6IHByZXBhcmVTdHlsZXMoKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBzdHlsZXMudW5kZXJsaW5lLCB1bmRlcmxpbmVTdHlsZSkpIH0pXG4gICAgICAgICksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIF9Qb3BvdmVyMi5kZWZhdWx0LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGFuY2hvck9yaWdpbjogYW5jaG9yT3JpZ2luLFxuICAgICAgICAgICAgdGFyZ2V0T3JpZ2luOiB0YXJnZXRPcmlnaW4sXG4gICAgICAgICAgICBhbmNob3JFbDogYW5jaG9yRWwsXG4gICAgICAgICAgICBhbmltYXRpb246IGFuaW1hdGlvbiB8fCBfUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsMi5kZWZhdWx0LFxuICAgICAgICAgICAgb3Blbjogb3BlbixcbiAgICAgICAgICAgIGFuaW1hdGVkOiBhbmltYXRlZCxcbiAgICAgICAgICAgIG9uUmVxdWVzdENsb3NlOiB0aGlzLmhhbmRsZVJlcXVlc3RDbG9zZU1lbnVcbiAgICAgICAgICB9LFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgX01lbnUyLmRlZmF1bHQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIG11bHRpcGxlOiBtdWx0aXBsZSxcbiAgICAgICAgICAgICAgbWF4SGVpZ2h0OiBtYXhIZWlnaHQsXG4gICAgICAgICAgICAgIGRlc2t0b3A6IHRydWUsXG4gICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgb25Fc2NLZXlEb3duOiB0aGlzLmhhbmRsZUVzY0tleURvd25NZW51LFxuICAgICAgICAgICAgICBzdHlsZTogbWVudVN0eWxlLFxuICAgICAgICAgICAgICBsaXN0U3R5bGU6IGxpc3RTdHlsZSxcbiAgICAgICAgICAgICAgb25JdGVtVG91Y2hUYXA6IHRoaXMuaGFuZGxlSXRlbVRvdWNoVGFwLFxuICAgICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5oYW5kbGVDaGFuZ2UsXG4gICAgICAgICAgICAgIG1lbnVJdGVtU3R5bGU6IG1lbnVJdGVtU3R5bGUsXG4gICAgICAgICAgICAgIHNlbGVjdGVkTWVudUl0ZW1TdHlsZTogc2VsZWN0ZWRNZW51SXRlbVN0eWxlLFxuICAgICAgICAgICAgICBhdXRvV2lkdGg6IGF1dG9XaWR0aCxcbiAgICAgICAgICAgICAgd2lkdGg6ICFhdXRvV2lkdGggJiYgbWVudVN0eWxlID8gbWVudVN0eWxlLndpZHRoIDogbnVsbFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNoaWxkcmVuXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gRHJvcERvd25NZW51O1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuRHJvcERvd25NZW51Lm11aU5hbWUgPSAnRHJvcERvd25NZW51JztcbkRyb3BEb3duTWVudS5kZWZhdWx0UHJvcHMgPSB7XG4gIGFuaW1hdGVkOiB0cnVlLFxuICBhdXRvV2lkdGg6IHRydWUsXG4gIGRpc2FibGVkOiBmYWxzZSxcbiAgaWNvbkJ1dHRvbjogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2Fycm93RHJvcERvd24yLmRlZmF1bHQsIG51bGwpLFxuICBvcGVuSW1tZWRpYXRlbHk6IGZhbHNlLFxuICBtYXhIZWlnaHQ6IDUwMCxcbiAgbXVsdGlwbGU6IGZhbHNlLFxuICBhbmNob3JPcmlnaW46IHtcbiAgICB2ZXJ0aWNhbDogJ3RvcCcsXG4gICAgaG9yaXpvbnRhbDogJ2xlZnQnXG4gIH1cbn07XG5Ecm9wRG93bk1lbnUuY29udGV4dFR5cGVzID0ge1xuICBtdWlUaGVtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QuaXNSZXF1aXJlZFxufTtcbkRyb3BEb3duTWVudS5wcm9wVHlwZXMgPSAgZmFsc2UgPyB7XG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSBwb2ludCBvbiB0aGUgYW5jaG9yIHRoYXQgdGhlIHBvcG92ZXInc1xuICAgKiBgdGFyZ2V0T3JpZ2luYCB3aWxsIGF0dGFjaCB0by5cbiAgICogT3B0aW9uczpcbiAgICogdmVydGljYWw6IFt0b3AsIGNlbnRlciwgYm90dG9tXVxuICAgKiBob3Jpem9udGFsOiBbbGVmdCwgbWlkZGxlLCByaWdodF0uXG4gICAqL1xuICBhbmNob3JPcmlnaW46IF9wcm9wVHlwZXM0LmRlZmF1bHQub3JpZ2luLFxuICAvKipcbiAgICogSWYgdHJ1ZSwgdGhlIHBvcG92ZXIgd2lsbCBhcHBseSB0cmFuc2l0aW9ucyB3aGVuXG4gICAqIGl0IGdldHMgYWRkZWQgdG8gdGhlIERPTS5cbiAgICovXG4gIGFuaW1hdGVkOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgZGVmYXVsdCBhbmltYXRpb24gY29tcG9uZW50IHVzZWQuXG4gICAqL1xuICBhbmltYXRpb246IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIFRoZSB3aWR0aCB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgc2V0IGFjY29yZGluZyB0byB0aGUgaXRlbXMgaW5zaWRlIHRoZSBtZW51LlxuICAgKiBUbyBjb250cm9sIHRoaXMgd2lkdGggaW4gY3NzIGluc3RlYWQsIHNldCB0aGlzIHByb3AgdG8gYGZhbHNlYC5cbiAgICovXG4gIGF1dG9XaWR0aDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogVGhlIGBNZW51SXRlbWBzIHRvIHBvcHVsYXRlIHRoZSBgTWVudWAgd2l0aC4gSWYgdGhlIGBNZW51SXRlbXNgIGhhdmUgdGhlXG4gICAqIHByb3AgYGxhYmVsYCB0aGF0IHZhbHVlIHdpbGwgYmUgdXNlZCB0byByZW5kZXIgdGhlIHJlcHJlc2VudGF0aW9uIG9mIHRoYXRcbiAgICogaXRlbSB3aXRoaW4gdGhlIGZpZWxkLlxuICAgKi9cbiAgY2hpbGRyZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgLyoqXG4gICAqIFRoZSBjc3MgY2xhc3MgbmFtZSBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgY2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIERpc2FibGVzIHRoZSBtZW51LlxuICAgKi9cbiAgZGlzYWJsZWQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlcyBkZWZhdWx0IGBTdmdJY29uYCBkcm9wZG93biBhcnJvdyBjb21wb25lbnQuXG4gICAqL1xuICBpY29uQnV0dG9uOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgdGhlIHN0eWxlcyBvZiBpY29uIGVsZW1lbnQuXG4gICAqL1xuICBpY29uU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogT3ZlcnJpZGVzIHRoZSBzdHlsZXMgb2YgbGFiZWwgd2hlbiB0aGUgYERyb3BEb3duTWVudWAgaXMgaW5hY3RpdmUuXG4gICAqL1xuICBsYWJlbFN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIFRoZSBzdHlsZSBvYmplY3QgdG8gdXNlIHRvIG92ZXJyaWRlIHVuZGVybHlpbmcgbGlzdCBzdHlsZS5cbiAgICovXG4gIGxpc3RTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBoZWlnaHQgb2YgdGhlIGBNZW51YCB3aGVuIGl0IGlzIGRpc3BsYXllZC5cbiAgICovXG4gIG1heEhlaWdodDogX3Byb3BUeXBlczIuZGVmYXVsdC5udW1iZXIsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiBtZW51IGl0ZW1zLlxuICAgKi9cbiAgbWVudUl0ZW1TdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgdGhlIHN0eWxlcyBvZiBgTWVudWAgd2hlbiB0aGUgYERyb3BEb3duTWVudWAgaXMgZGlzcGxheWVkLlxuICAgKi9cbiAgbWVudVN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIElmIHRydWUsIGB2YWx1ZWAgbXVzdCBiZSBhbiBhcnJheSBhbmQgdGhlIG1lbnUgd2lsbCBzdXBwb3J0XG4gICAqIG11bHRpcGxlIHNlbGVjdGlvbnMuXG4gICAqL1xuICBtdWx0aXBsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gZmlyZWQgd2hlbiBhIG1lbnUgaXRlbSBpcyBjbGlja2VkLCBvdGhlciB0aGFuIHRoZSBvbmUgY3VycmVudGx5IHNlbGVjdGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgVG91Y2hUYXAgZXZlbnQgdGFyZ2V0aW5nIHRoZSBtZW51IGl0ZW0gdGhhdCB3YXMgY2xpY2tlZC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGtleSBUaGUgaW5kZXggb2YgdGhlIGNsaWNrZWQgbWVudSBpdGVtIGluIHRoZSBgY2hpbGRyZW5gIGNvbGxlY3Rpb24uXG4gICAqIEBwYXJhbSB7YW55fSB2YWx1ZSBJZiBgbXVsdGlwbGVgIGlzIHRydWUsIHRoZSBtZW51J3MgYHZhbHVlYFxuICAgKiBhcnJheSB3aXRoIGVpdGhlciB0aGUgbWVudSBpdGVtJ3MgYHZhbHVlYCBhZGRlZCAoaWZcbiAgICogaXQgd2Fzbid0IGFscmVhZHkgc2VsZWN0ZWQpIG9yIG9taXR0ZWQgKGlmIGl0IHdhcyBhbHJlYWR5IHNlbGVjdGVkKS5cbiAgICogT3RoZXJ3aXNlLCB0aGUgYHZhbHVlYCBvZiB0aGUgbWVudSBpdGVtLlxuICAgKi9cbiAgb25DaGFuZ2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZpcmVkIHdoZW4gdGhlIG1lbnUgaXMgY2xvc2VkLlxuICAgKi9cbiAgb25DbG9zZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogU2V0IHRvIHRydWUgdG8gaGF2ZSB0aGUgYERyb3BEb3duTWVudWAgYXV0b21hdGljYWxseSBvcGVuIG9uIG1vdW50LlxuICAgKi9cbiAgb3BlbkltbWVkaWF0ZWx5OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiBzZWxlY3RlZCBtZW51IGl0ZW1zLlxuICAgKi9cbiAgc2VsZWN0ZWRNZW51SXRlbVN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZpcmVkIHdoZW4gYSBtZW51IGl0ZW0gaXMgY2xpY2tlZCwgb3RoZXIgdGhhbiB0aGUgb25lIGN1cnJlbnRseSBzZWxlY3RlZC5cbiAgICpcbiAgICogQHBhcmFtIHthbnl9IHZhbHVlIElmIGBtdWx0aXBsZWAgaXMgdHJ1ZSwgdGhlIG1lbnUncyBgdmFsdWVgXG4gICAqIGFycmF5IHdpdGggZWl0aGVyIHRoZSBtZW51IGl0ZW0ncyBgdmFsdWVgIGFkZGVkIChpZlxuICAgKiBpdCB3YXNuJ3QgYWxyZWFkeSBzZWxlY3RlZCkgb3Igb21pdHRlZCAoaWYgaXQgd2FzIGFscmVhZHkgc2VsZWN0ZWQpLlxuICAgKiBPdGhlcndpc2UsIHRoZSBgdmFsdWVgIG9mIHRoZSBtZW51IGl0ZW0uXG4gICAqIEBwYXJhbSB7YW55fSBtZW51SXRlbSBUaGUgc2VsZWN0ZWQgYE1lbnVJdGVtYC5cbiAgICogSWYgYG11bHRpcGxlYCBpcyB0cnVlLCB0aGlzIHdpbGwgYmUgYW4gYXJyYXkgd2l0aCB0aGUgYE1lbnVJdGVtYHMgbWF0Y2hpbmcgdGhlIGB2YWx1ZWBzIHBhcmFtZXRlci5cbiAgICovXG4gIHNlbGVjdGlvblJlbmRlcmVyOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhpcyBpcyB0aGUgcG9pbnQgb24gdGhlIHBvcG92ZXIgd2hpY2ggd2lsbCBhdHRhY2ggdG9cbiAgICogdGhlIGFuY2hvcidzIG9yaWdpbi5cbiAgICogT3B0aW9uczpcbiAgICogdmVydGljYWw6IFt0b3AsIGNlbnRlciwgYm90dG9tXVxuICAgKiBob3Jpem9udGFsOiBbbGVmdCwgbWlkZGxlLCByaWdodF0uXG4gICAqL1xuICB0YXJnZXRPcmlnaW46IF9wcm9wVHlwZXM0LmRlZmF1bHQub3JpZ2luLFxuICAvKipcbiAgICogT3ZlcnJpZGVzIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSB1bmRlcmxpbmUuXG4gICAqL1xuICB1bmRlcmxpbmVTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBJZiBgbXVsdGlwbGVgIGlzIHRydWUsIGFuIGFycmF5IG9mIHRoZSBgdmFsdWVgcyBvZiB0aGUgc2VsZWN0ZWRcbiAgICogbWVudSBpdGVtcy4gT3RoZXJ3aXNlLCB0aGUgYHZhbHVlYCBvZiB0aGUgc2VsZWN0ZWQgbWVudSBpdGVtLlxuICAgKiBJZiBwcm92aWRlZCwgdGhlIG1lbnUgd2lsbCBiZSBhIGNvbnRyb2xsZWQgY29tcG9uZW50LlxuICAgKi9cbiAgdmFsdWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYW55XG59IDoge307XG5leHBvcnRzLmRlZmF1bHQgPSBEcm9wRG93bk1lbnU7XG5cbi8qKiovIH0pLFxuLyogMTUwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXG52YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTtcblxudmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpO1xuXG52YXIgX2luaGVyaXRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cbnZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTtcblxudmFyIF9zaW1wbGVBc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXG52YXIgX3NpbXBsZUFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaW1wbGVBc3NpZ24pO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxudmFyIF9yZWFjdERvbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXG52YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblxudmFyIF9ldmVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY5KTtcblxudmFyIF9ldmVudHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXZlbnRzKTtcblxudmFyIF9wcm9wVHlwZXMzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cbnZhciBfcHJvcFR5cGVzNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlczMpO1xuXG52YXIgX01lbnUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkwKTtcblxudmFyIF9NZW51MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX01lbnUpO1xuXG52YXIgX1BvcG92ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY2KTtcblxudmFyIF9Qb3BvdmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BvcG92ZXIpO1xuXG52YXIgX3dhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgSWNvbk1lbnUgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShJY29uTWVudSwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gSWNvbk1lbnUoKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgSWNvbk1lbnUpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChfcmVmID0gSWNvbk1lbnUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKEljb25NZW51KSkuY2FsbC5hcHBseShfcmVmLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBtZW51SW5pdGlhbGx5S2V5Ym9hcmRGb2N1c2VkOiBmYWxzZSxcbiAgICAgIG9wZW46IGZhbHNlXG4gICAgfSwgX3RoaXMuaGFuZGxlSXRlbVRvdWNoVGFwID0gZnVuY3Rpb24gKGV2ZW50LCBjaGlsZCkge1xuICAgICAgaWYgKF90aGlzLnByb3BzLnRvdWNoVGFwQ2xvc2VEZWxheSAhPT0gMCAmJiAhY2hpbGQucHJvcHMuaGFzT3duUHJvcGVydHkoJ21lbnVJdGVtcycpKSB7XG4gICAgICAgIHZhciBpc0tleWJvYXJkID0gX2V2ZW50czIuZGVmYXVsdC5pc0tleWJvYXJkKGV2ZW50KTtcbiAgICAgICAgX3RoaXMudGltZXJDbG9zZUlkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMuY2xvc2UoaXNLZXlib2FyZCA/ICdlbnRlcicgOiAnaXRlbVRhcCcsIGlzS2V5Ym9hcmQpO1xuICAgICAgICB9LCBfdGhpcy5wcm9wcy50b3VjaFRhcENsb3NlRGVsYXkpO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5wcm9wcy5vbkl0ZW1Ub3VjaFRhcChldmVudCwgY2hpbGQpO1xuICAgIH0sIF90aGlzLmhhbmRsZVJlcXVlc3RDbG9zZSA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIF90aGlzLmNsb3NlKHJlYXNvbik7XG4gICAgfSwgX3RoaXMuaGFuZGxlRXNjS2V5RG93bk1lbnUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIF90aGlzLmNsb3NlKCdlc2NhcGUnLCBldmVudCk7XG4gICAgfSwgX3RlbXApLCAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKEljb25NZW51LCBbe1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgaWYgKG5leHRQcm9wcy5vcGVuICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgb3BlbjogbmV4dFByb3BzLm9wZW4sXG4gICAgICAgICAgYW5jaG9yRWw6IHRoaXMucmVmcy5pY29uTWVudUNvbnRhaW5lclxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsVW5tb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJDbG9zZUlkKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdpc09wZW4nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc09wZW4oKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdGF0ZS5vcGVuO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2Nsb3NlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2UocmVhc29uLCBpc0tleWJvYXJkKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgaWYgKCF0aGlzLnN0YXRlLm9wZW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wcm9wcy5vcGVuICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25SZXF1ZXN0Q2hhbmdlKGZhbHNlLCByZWFzb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IG9wZW46IGZhbHNlIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAvLyBTZXQgZm9jdXMgb24gdGhlIGljb24gYnV0dG9uIHdoZW4gdGhlIG1lbnUgY2xvc2VcbiAgICAgICAgICBpZiAoaXNLZXlib2FyZCkge1xuICAgICAgICAgICAgdmFyIGljb25CdXR0b24gPSBfdGhpczIucmVmcy5pY29uQnV0dG9uO1xuICAgICAgICAgICAgX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKGljb25CdXR0b24pLmZvY3VzKCk7XG4gICAgICAgICAgICBpY29uQnV0dG9uLnNldEtleWJvYXJkRm9jdXMoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29wZW4nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuKHJlYXNvbiwgZXZlbnQpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLm9wZW4gIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vblJlcXVlc3RDaGFuZ2UodHJ1ZSwgcmVhc29uKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgbWVudUluaXRpYWxseUtleWJvYXJkRm9jdXNlZDogX2V2ZW50czIuZGVmYXVsdC5pc0tleWJvYXJkKGV2ZW50KSxcbiAgICAgICAgICBhbmNob3JFbDogZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIG9wZW46IHRydWUsXG4gICAgICAgIG1lbnVJbml0aWFsbHlLZXlib2FyZEZvY3VzZWQ6IF9ldmVudHMyLmRlZmF1bHQuaXNLZXlib2FyZChldmVudCksXG4gICAgICAgIGFuY2hvckVsOiBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICB9KTtcblxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgYW5jaG9yT3JpZ2luID0gX3Byb3BzLmFuY2hvck9yaWdpbixcbiAgICAgICAgICBjbGFzc05hbWUgPSBfcHJvcHMuY2xhc3NOYW1lLFxuICAgICAgICAgIGFuaW1hdGVkID0gX3Byb3BzLmFuaW1hdGVkLFxuICAgICAgICAgIGFuaW1hdGlvbiA9IF9wcm9wcy5hbmltYXRpb24sXG4gICAgICAgICAgaWNvbkJ1dHRvbkVsZW1lbnQgPSBfcHJvcHMuaWNvbkJ1dHRvbkVsZW1lbnQsXG4gICAgICAgICAgaWNvblN0eWxlID0gX3Byb3BzLmljb25TdHlsZSxcbiAgICAgICAgICBvbkl0ZW1Ub3VjaFRhcCA9IF9wcm9wcy5vbkl0ZW1Ub3VjaFRhcCxcbiAgICAgICAgICBvbktleWJvYXJkRm9jdXMgPSBfcHJvcHMub25LZXlib2FyZEZvY3VzLFxuICAgICAgICAgIG9uTW91c2VEb3duID0gX3Byb3BzLm9uTW91c2VEb3duLFxuICAgICAgICAgIG9uTW91c2VMZWF2ZSA9IF9wcm9wcy5vbk1vdXNlTGVhdmUsXG4gICAgICAgICAgb25Nb3VzZUVudGVyID0gX3Byb3BzLm9uTW91c2VFbnRlcixcbiAgICAgICAgICBvbk1vdXNlVXAgPSBfcHJvcHMub25Nb3VzZVVwLFxuICAgICAgICAgIG9uUmVxdWVzdENoYW5nZSA9IF9wcm9wcy5vblJlcXVlc3RDaGFuZ2UsXG4gICAgICAgICAgb25Ub3VjaFRhcCA9IF9wcm9wcy5vblRvdWNoVGFwLFxuICAgICAgICAgIGxpc3RTdHlsZSA9IF9wcm9wcy5saXN0U3R5bGUsXG4gICAgICAgICAgbWVudVN0eWxlID0gX3Byb3BzLm1lbnVTdHlsZSxcbiAgICAgICAgICBzdHlsZSA9IF9wcm9wcy5zdHlsZSxcbiAgICAgICAgICB0YXJnZXRPcmlnaW4gPSBfcHJvcHMudGFyZ2V0T3JpZ2luLFxuICAgICAgICAgIHRvdWNoVGFwQ2xvc2VEZWxheSA9IF9wcm9wcy50b3VjaFRhcENsb3NlRGVsYXksXG4gICAgICAgICAgdXNlTGF5ZXJGb3JDbGlja0F3YXkgPSBfcHJvcHMudXNlTGF5ZXJGb3JDbGlja0F3YXksXG4gICAgICAgICAgb3RoZXIgPSAoMCwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMy5kZWZhdWx0KShfcHJvcHMsIFsnYW5jaG9yT3JpZ2luJywgJ2NsYXNzTmFtZScsICdhbmltYXRlZCcsICdhbmltYXRpb24nLCAnaWNvbkJ1dHRvbkVsZW1lbnQnLCAnaWNvblN0eWxlJywgJ29uSXRlbVRvdWNoVGFwJywgJ29uS2V5Ym9hcmRGb2N1cycsICdvbk1vdXNlRG93bicsICdvbk1vdXNlTGVhdmUnLCAnb25Nb3VzZUVudGVyJywgJ29uTW91c2VVcCcsICdvblJlcXVlc3RDaGFuZ2UnLCAnb25Ub3VjaFRhcCcsICdsaXN0U3R5bGUnLCAnbWVudVN0eWxlJywgJ3N0eWxlJywgJ3RhcmdldE9yaWdpbicsICd0b3VjaFRhcENsb3NlRGVsYXknLCAndXNlTGF5ZXJGb3JDbGlja0F3YXknXSk7XG4gICAgICB2YXIgcHJlcGFyZVN0eWxlcyA9IHRoaXMuY29udGV4dC5tdWlUaGVtZS5wcmVwYXJlU3R5bGVzO1xuICAgICAgdmFyIF9zdGF0ZSA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgb3BlbiA9IF9zdGF0ZS5vcGVuLFxuICAgICAgICAgIGFuY2hvckVsID0gX3N0YXRlLmFuY2hvckVsO1xuXG5cbiAgICAgIHZhciBzdHlsZXMgPSB7XG4gICAgICAgIHJvb3Q6IHtcbiAgICAgICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJ1xuICAgICAgICB9LFxuICAgICAgICBtZW51OiB7XG4gICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZSdcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdmFyIG1lcmdlZFJvb3RTdHlsZXMgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLnJvb3QsIHN0eWxlKTtcbiAgICAgIHZhciBtZXJnZWRNZW51U3R5bGVzID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5tZW51LCBtZW51U3R5bGUpO1xuXG4gICAgICAgZmFsc2UgPyAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKGljb25CdXR0b25FbGVtZW50LnR5cGUubXVpTmFtZSAhPT0gJ1N2Z0ljb24nLCAnTWF0ZXJpYWwtVUk6IFlvdSBzaG91ZCBub3QgcHJvdmlkZSBhbiA8U3ZnSWNvbiAvPiB0byB0aGUgXFwnaWNvbkJ1dHRvbkVsZW1lbnRcXCcgcHJvcGVydHkgb2YgPEljb25NZW51IC8+LlxcbllvdSBzaG91bGQgd3JhcHBlZCBpdCB3aXRoIGFuIDxJY29uQnV0dG9uIC8+LicpIDogdm9pZCAwO1xuXG4gICAgICB2YXIgaWNvbkJ1dHRvblByb3BzID0ge1xuICAgICAgICBvbktleWJvYXJkRm9jdXM6IG9uS2V5Ym9hcmRGb2N1cyxcbiAgICAgICAgb25Ub3VjaFRhcDogZnVuY3Rpb24gb25Ub3VjaFRhcChldmVudCkge1xuICAgICAgICAgIF90aGlzMy5vcGVuKF9ldmVudHMyLmRlZmF1bHQuaXNLZXlib2FyZChldmVudCkgPyAna2V5Ym9hcmQnIDogJ2ljb25UYXAnLCBldmVudCk7XG4gICAgICAgICAgaWYgKGljb25CdXR0b25FbGVtZW50LnByb3BzLm9uVG91Y2hUYXApIHtcbiAgICAgICAgICAgIGljb25CdXR0b25FbGVtZW50LnByb3BzLm9uVG91Y2hUYXAoZXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVmOiAnaWNvbkJ1dHRvbidcbiAgICAgIH07XG4gICAgICBpZiAoaWNvblN0eWxlIHx8IGljb25CdXR0b25FbGVtZW50LnByb3BzLmljb25TdHlsZSkge1xuICAgICAgICBpY29uQnV0dG9uUHJvcHMuaWNvblN0eWxlID0gaWNvblN0eWxlID8gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBpY29uU3R5bGUsIGljb25CdXR0b25FbGVtZW50LnByb3BzLmljb25TdHlsZSkgOiBpY29uQnV0dG9uRWxlbWVudC5wcm9wcy5pY29uU3R5bGU7XG4gICAgICB9XG4gICAgICB2YXIgaWNvbkJ1dHRvbiA9IF9yZWFjdDIuZGVmYXVsdC5jbG9uZUVsZW1lbnQoaWNvbkJ1dHRvbkVsZW1lbnQsIGljb25CdXR0b25Qcm9wcyk7XG5cbiAgICAgIHZhciBtZW51ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgIF9NZW51Mi5kZWZhdWx0LFxuICAgICAgICAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBvdGhlciwge1xuICAgICAgICAgIGluaXRpYWxseUtleWJvYXJkRm9jdXNlZDogdGhpcy5zdGF0ZS5tZW51SW5pdGlhbGx5S2V5Ym9hcmRGb2N1c2VkLFxuICAgICAgICAgIG9uRXNjS2V5RG93bjogdGhpcy5oYW5kbGVFc2NLZXlEb3duTWVudSxcbiAgICAgICAgICBvbkl0ZW1Ub3VjaFRhcDogdGhpcy5oYW5kbGVJdGVtVG91Y2hUYXAsXG4gICAgICAgICAgc3R5bGU6IG1lcmdlZE1lbnVTdHlsZXMsXG4gICAgICAgICAgbGlzdFN0eWxlOiBsaXN0U3R5bGVcbiAgICAgICAgfSksXG4gICAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW5cbiAgICAgICk7XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHtcbiAgICAgICAgICByZWY6ICdpY29uTWVudUNvbnRhaW5lcicsXG4gICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgICAgb25Nb3VzZURvd246IG9uTW91c2VEb3duLFxuICAgICAgICAgIG9uTW91c2VMZWF2ZTogb25Nb3VzZUxlYXZlLFxuICAgICAgICAgIG9uTW91c2VFbnRlcjogb25Nb3VzZUVudGVyLFxuICAgICAgICAgIG9uTW91c2VVcDogb25Nb3VzZVVwLFxuICAgICAgICAgIG9uVG91Y2hUYXA6IG9uVG91Y2hUYXAsXG4gICAgICAgICAgc3R5bGU6IHByZXBhcmVTdHlsZXMobWVyZ2VkUm9vdFN0eWxlcylcbiAgICAgICAgfSxcbiAgICAgICAgaWNvbkJ1dHRvbixcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgX1BvcG92ZXIyLmRlZmF1bHQsXG4gICAgICAgICAge1xuICAgICAgICAgICAgYW5jaG9yT3JpZ2luOiBhbmNob3JPcmlnaW4sXG4gICAgICAgICAgICB0YXJnZXRPcmlnaW46IHRhcmdldE9yaWdpbixcbiAgICAgICAgICAgIG9wZW46IG9wZW4sXG4gICAgICAgICAgICBhbmNob3JFbDogYW5jaG9yRWwsXG4gICAgICAgICAgICBjaGlsZENvbnRleHRUeXBlczogdGhpcy5jb25zdHJ1Y3Rvci5jaGlsZENvbnRleHRUeXBlcyxcbiAgICAgICAgICAgIHVzZUxheWVyRm9yQ2xpY2tBd2F5OiB1c2VMYXllckZvckNsaWNrQXdheSxcbiAgICAgICAgICAgIG9uUmVxdWVzdENsb3NlOiB0aGlzLmhhbmRsZVJlcXVlc3RDbG9zZSxcbiAgICAgICAgICAgIGFuaW1hdGVkOiBhbmltYXRlZCxcbiAgICAgICAgICAgIGFuaW1hdGlvbjogYW5pbWF0aW9uLFxuICAgICAgICAgICAgY29udGV4dDogdGhpcy5jb250ZXh0XG4gICAgICAgICAgfSxcbiAgICAgICAgICBtZW51XG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBJY29uTWVudTtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbkljb25NZW51Lm11aU5hbWUgPSAnSWNvbk1lbnUnO1xuSWNvbk1lbnUuZGVmYXVsdFByb3BzID0ge1xuICBhbmNob3JPcmlnaW46IHtcbiAgICB2ZXJ0aWNhbDogJ3RvcCcsXG4gICAgaG9yaXpvbnRhbDogJ2xlZnQnXG4gIH0sXG4gIGFuaW1hdGVkOiB0cnVlLFxuICBtdWx0aXBsZTogZmFsc2UsXG4gIG9wZW46IG51bGwsXG4gIG9uSXRlbVRvdWNoVGFwOiBmdW5jdGlvbiBvbkl0ZW1Ub3VjaFRhcCgpIHt9LFxuICBvbktleWJvYXJkRm9jdXM6IGZ1bmN0aW9uIG9uS2V5Ym9hcmRGb2N1cygpIHt9LFxuICBvbk1vdXNlRG93bjogZnVuY3Rpb24gb25Nb3VzZURvd24oKSB7fSxcbiAgb25Nb3VzZUxlYXZlOiBmdW5jdGlvbiBvbk1vdXNlTGVhdmUoKSB7fSxcbiAgb25Nb3VzZUVudGVyOiBmdW5jdGlvbiBvbk1vdXNlRW50ZXIoKSB7fSxcbiAgb25Nb3VzZVVwOiBmdW5jdGlvbiBvbk1vdXNlVXAoKSB7fSxcbiAgb25SZXF1ZXN0Q2hhbmdlOiBmdW5jdGlvbiBvblJlcXVlc3RDaGFuZ2UoKSB7fSxcbiAgb25Ub3VjaFRhcDogZnVuY3Rpb24gb25Ub3VjaFRhcCgpIHt9LFxuICB0YXJnZXRPcmlnaW46IHtcbiAgICB2ZXJ0aWNhbDogJ3RvcCcsXG4gICAgaG9yaXpvbnRhbDogJ2xlZnQnXG4gIH0sXG4gIHRvdWNoVGFwQ2xvc2VEZWxheTogMjAwLFxuICB1c2VMYXllckZvckNsaWNrQXdheTogZmFsc2Vcbn07XG5JY29uTWVudS5jb250ZXh0VHlwZXMgPSB7XG4gIG11aVRoZW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkXG59O1xuSWNvbk1lbnUucHJvcFR5cGVzID0gIGZhbHNlID8ge1xuICAvKipcbiAgICogVGhpcyBpcyB0aGUgcG9pbnQgb24gdGhlIGljb24gd2hlcmUgdGhlIG1lbnVcbiAgICogYHRhcmdldE9yaWdpbmAgd2lsbCBhdHRhY2guXG4gICAqIE9wdGlvbnM6XG4gICAqIHZlcnRpY2FsOiBbdG9wLCBjZW50ZXIsIGJvdHRvbV1cbiAgICogaG9yaXpvbnRhbDogW2xlZnQsIG1pZGRsZSwgcmlnaHRdLlxuICAgKi9cbiAgYW5jaG9yT3JpZ2luOiBfcHJvcFR5cGVzNC5kZWZhdWx0Lm9yaWdpbixcbiAgLyoqXG4gICAqIElmIHRydWUsIHRoZSBwb3BvdmVyIHdpbGwgYXBwbHkgdHJhbnNpdGlvbnMgd2hlblxuICAgKiBpdCBnZXRzIGFkZGVkIHRvIHRoZSBET00uXG4gICAqL1xuICBhbmltYXRlZDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGRlZmF1bHQgYW5pbWF0aW9uIGNvbXBvbmVudCB1c2VkLlxuICAgKi9cbiAgYW5pbWF0aW9uOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBTaG91bGQgYmUgdXNlZCB0byBwYXNzIGBNZW51SXRlbWAgY29tcG9uZW50cy5cbiAgICovXG4gIGNoaWxkcmVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIC8qKlxuICAgKiBUaGUgQ1NTIGNsYXNzIG5hbWUgb2YgdGhlIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIGNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSBgSWNvbkJ1dHRvbmAgdG8gcmVuZGVyLiBUaGlzIGJ1dHRvbiB3aWxsIG9wZW4gdGhlIG1lbnUuXG4gICAqL1xuICBpY29uQnV0dG9uRWxlbWVudDogX3Byb3BUeXBlczIuZGVmYXVsdC5lbGVtZW50LmlzUmVxdWlyZWQsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgdW5kZXJseWluZyBpY29uIGVsZW1lbnQuXG4gICAqL1xuICBpY29uU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIHVuZGVybHlpbmcgYExpc3RgIGVsZW1lbnQuXG4gICAqL1xuICBsaXN0U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIG1lbnUgZWxlbWVudC5cbiAgICovXG4gIG1lbnVTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBJZiB0cnVlLCB0aGUgdmFsdWUgY2FuIGFuIGJlIGFycmF5IGFuZCBhbGxvdyB0aGUgbWVudSB0byBiZSBhIG11bHRpLXNlbGVjdC5cbiAgICovXG4gIG11bHRpcGxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmdW5jdGlvbiBmaXJlZCB3aGVuIGEgbWVudSBpdGVtIGlzIHNlbGVjdGVkIHdpdGggYSB0b3VjaC10YXAuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBUb3VjaFRhcCBldmVudCB0YXJnZXRpbmcgdGhlIHNlbGVjdGVkIG1lbnUgaXRlbSBlbGVtZW50LlxuICAgKiBAcGFyYW0ge29iamVjdH0gY2hpbGQgVGhlIHNlbGVjdGVkIGVsZW1lbnQuXG4gICAqL1xuICBvbkl0ZW1Ub3VjaFRhcDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gZmlyZWQgd2hlbiB0aGUgYEljb25CdXR0b25gIGVsZW1lbnQgaXMgZm9jdXNlZCBvciBibHVycmVkIGJ5IHRoZSBrZXlib2FyZC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IGBmb2N1c2Agb3IgYGJsdXJgIGV2ZW50IHRhcmdldGluZyB0aGUgYEljb25CdXR0b25gIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0ga2V5Ym9hcmRGb2N1c2VkIElmIHRydWUsIHRoZSBgSWNvbkJ1dHRvbmAgZWxlbWVudCBpcyBmb2N1c2VkLlxuICAgKi9cbiAgb25LZXlib2FyZEZvY3VzOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKiBAaWdub3JlICovXG4gIG9uTW91c2VEb3duOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKiBAaWdub3JlICovXG4gIG9uTW91c2VFbnRlcjogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKiogQGlnbm9yZSAqL1xuICBvbk1vdXNlTGVhdmU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqIEBpZ25vcmUgKi9cbiAgb25Nb3VzZVVwOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmdW5jdGlvbiBmaXJlZCB3aGVuIHRoZSBgb3BlbmAgc3RhdGUgb2YgdGhlIG1lbnUgaXMgcmVxdWVzdGVkIHRvIGJlIGNoYW5nZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3BlbiBJZiB0cnVlLCB0aGUgbWVudSB3YXMgcmVxdWVzdGVkIHRvIGJlIG9wZW5lZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlYXNvbiBUaGUgcmVhc29uIGZvciB0aGUgb3BlbiBvciBjbG9zZSByZXF1ZXN0LiBQb3NzaWJsZSB2YWx1ZXMgYXJlXG4gICAqICdrZXlib2FyZCcgYW5kICdpY29uVGFwJyBmb3Igb3BlbiByZXF1ZXN0czsgJ2VudGVyJywgJ2VzY2FwZScsICdpdGVtVGFwJywgYW5kICdjbGlja0F3YXknXG4gICAqIGZvciBjbG9zZSByZXF1ZXN0cy5cbiAgICovXG4gIG9uUmVxdWVzdENoYW5nZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gZmlyZWQgd2hlbiB0aGUgYEljb25CdXR0b25gIGVsZW1lbnQgaXMgdG91Y2gtdGFwcGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgVG91Y2hUYXAgZXZlbnQgdGFyZ2V0aW5nIHRoZSBgSWNvbkJ1dHRvbmAgZWxlbWVudC5cbiAgICovXG4gIG9uVG91Y2hUYXA6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIElmIHRydWUsIHRoZSBgSWNvbk1lbnVgIGlzIG9wZW5lZC5cbiAgICovXG4gIG9wZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSBwb2ludCBvbiB0aGUgbWVudSB3aGljaCB3aWxsIHN0aWNrIHRvIHRoZSBtZW51XG4gICAqIG9yaWdpbi5cbiAgICogT3B0aW9uczpcbiAgICogdmVydGljYWw6IFt0b3AsIGNlbnRlciwgYm90dG9tXVxuICAgKiBob3Jpem9udGFsOiBbbGVmdCwgbWlkZGxlLCByaWdodF0uXG4gICAqL1xuICB0YXJnZXRPcmlnaW46IF9wcm9wVHlwZXM0LmRlZmF1bHQub3JpZ2luLFxuICAvKipcbiAgICogU2V0cyB0aGUgZGVsYXkgaW4gbWlsbGlzZWNvbmRzIGJlZm9yZSBjbG9zaW5nIHRoZVxuICAgKiBtZW51IHdoZW4gYW4gaXRlbSBpcyBjbGlja2VkLlxuICAgKiBJZiBzZXQgdG8gMCB0aGVuIHRoZSBhdXRvIGNsb3NlIGZ1bmN0aW9uYWxpdHlcbiAgICogd2lsbCBiZSBkaXNhYmxlZC5cbiAgICovXG4gIHRvdWNoVGFwQ2xvc2VEZWxheTogX3Byb3BUeXBlczIuZGVmYXVsdC5udW1iZXIsXG4gIC8qKlxuICAgKiBJZiB0cnVlLCB0aGUgcG9wb3ZlciB3aWxsIHJlbmRlciBvbiB0b3Agb2YgYW4gaW52aXNpYmxlXG4gICAqIGxheWVyLCB3aGljaCB3aWxsIHByZXZlbnQgY2xpY2tzIHRvIHRoZSB1bmRlcmx5aW5nIGVsZW1lbnRzLlxuICAgKi9cbiAgdXNlTGF5ZXJGb3JDbGlja0F3YXk6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbFxufSA6IHt9O1xuZXhwb3J0cy5kZWZhdWx0ID0gSWNvbk1lbnU7XG5cbi8qKiovIH0pLFxuLyogMTUxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBleHBvcnRzLk1lbnVJdGVtID0gZXhwb3J0cy5JY29uTWVudSA9IHVuZGVmaW5lZDtcblxudmFyIF9JY29uTWVudTIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MCk7XG5cbnZhciBfSWNvbk1lbnUzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSWNvbk1lbnUyKTtcblxudmFyIF9NZW51SXRlbTIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg5KTtcblxudmFyIF9NZW51SXRlbTMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9NZW51SXRlbTIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5leHBvcnRzLkljb25NZW51ID0gX0ljb25NZW51My5kZWZhdWx0O1xuZXhwb3J0cy5NZW51SXRlbSA9IF9NZW51SXRlbTMuZGVmYXVsdDtcbmV4cG9ydHMuZGVmYXVsdCA9IF9JY29uTWVudTMuZGVmYXVsdDtcblxuLyoqKi8gfSksXG4vKiAxNTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cbnZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RXaXRob3V0UHJvcGVydGllczIpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7XG5cbnZhciBfaW5oZXJpdHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG52YXIgX3NpbXBsZUFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cbnZhciBfc2ltcGxlQXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NpbXBsZUFzc2lnbik7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX3RyYW5zaXRpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cbnZhciBfdHJhbnNpdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHJhbnNpdGlvbnMpO1xuXG52YXIgX0NsaWNrQXdheUxpc3RlbmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTYpO1xuXG52YXIgX0NsaWNrQXdheUxpc3RlbmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NsaWNrQXdheUxpc3RlbmVyKTtcblxudmFyIF9TbmFja2JhckJvZHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Myk7XG5cbnZhciBfU25hY2tiYXJCb2R5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1NuYWNrYmFyQm9keSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGdldFN0eWxlcyhwcm9wcywgY29udGV4dCwgc3RhdGUpIHtcbiAgdmFyIF9jb250ZXh0JG11aVRoZW1lID0gY29udGV4dC5tdWlUaGVtZSxcbiAgICAgIGRlc2t0b3BTdWJoZWFkZXJIZWlnaHQgPSBfY29udGV4dCRtdWlUaGVtZS5iYXNlVGhlbWUuc3BhY2luZy5kZXNrdG9wU3ViaGVhZGVySGVpZ2h0LFxuICAgICAgekluZGV4ID0gX2NvbnRleHQkbXVpVGhlbWUuekluZGV4O1xuICB2YXIgb3BlbiA9IHN0YXRlLm9wZW47XG5cblxuICB2YXIgc3R5bGVzID0ge1xuICAgIHJvb3Q6IHtcbiAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICAgbGVmdDogJzUwJScsXG4gICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICBib3R0b206IDAsXG4gICAgICB6SW5kZXg6IHpJbmRleC5zbmFja2JhcixcbiAgICAgIHZpc2liaWxpdHk6IG9wZW4gPyAndmlzaWJsZScgOiAnaGlkZGVuJyxcbiAgICAgIHRyYW5zZm9ybTogb3BlbiA/ICd0cmFuc2xhdGUoLTUwJSwgMCknIDogJ3RyYW5zbGF0ZSgtNTAlLCAnICsgZGVza3RvcFN1YmhlYWRlckhlaWdodCArICdweCknLFxuICAgICAgdHJhbnNpdGlvbjogX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoJzQwMG1zJywgJ3RyYW5zZm9ybScpICsgJywgJyArIF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KCc0MDBtcycsICd2aXNpYmlsaXR5JylcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHN0eWxlcztcbn1cblxudmFyIFNuYWNrYmFyID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoU25hY2tiYXIsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFNuYWNrYmFyKCkge1xuICAgIHZhciBfcmVmO1xuXG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIFNuYWNrYmFyKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoX3JlZiA9IFNuYWNrYmFyLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShTbmFja2JhcikpLmNhbGwuYXBwbHkoX3JlZiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLmNvbXBvbmVudENsaWNrQXdheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChfdGhpcy50aW1lclRyYW5zaXRpb25JZCkge1xuICAgICAgICAvLyBJZiB0cmFuc2l0aW9uaW5nLCBkb24ndCBjbG9zZSB0aGUgc25hY2tiYXIuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKF90aGlzLnByb3BzLm9wZW4gIT09IG51bGwgJiYgX3RoaXMucHJvcHMub25SZXF1ZXN0Q2xvc2UpIHtcbiAgICAgICAgX3RoaXMucHJvcHMub25SZXF1ZXN0Q2xvc2UoJ2NsaWNrYXdheScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBvcGVuOiBmYWxzZSB9KTtcbiAgICAgIH1cbiAgICB9LCBfdGVtcCksICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkoX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoU25hY2tiYXIsIFt7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbE1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIG9wZW46IHRoaXMucHJvcHMub3BlbixcbiAgICAgICAgbWVzc2FnZTogdGhpcy5wcm9wcy5tZXNzYWdlLFxuICAgICAgICBhY3Rpb246IHRoaXMucHJvcHMuYWN0aW9uXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgaWYgKHRoaXMuc3RhdGUub3Blbikge1xuICAgICAgICB0aGlzLnNldEF1dG9IaWRlVGltZXIoKTtcbiAgICAgICAgdGhpcy5zZXRUcmFuc2l0aW9uVGltZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy5vcGVuICYmIG5leHRQcm9wcy5vcGVuICYmIChuZXh0UHJvcHMubWVzc2FnZSAhPT0gdGhpcy5wcm9wcy5tZXNzYWdlIHx8IG5leHRQcm9wcy5hY3Rpb24gIT09IHRoaXMucHJvcHMuYWN0aW9uKSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBvcGVuOiBmYWxzZVxuICAgICAgICB9KTtcblxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lck9uZUF0VGhlVGltZUlkKTtcbiAgICAgICAgdGhpcy50aW1lck9uZUF0VGhlVGltZUlkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMyLnNldFN0YXRlKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IG5leHRQcm9wcy5tZXNzYWdlLFxuICAgICAgICAgICAgYWN0aW9uOiBuZXh0UHJvcHMuYWN0aW9uLFxuICAgICAgICAgICAgb3BlbjogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9LCA0MDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG9wZW4gPSBuZXh0UHJvcHMub3BlbjtcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBvcGVuOiBvcGVuICE9PSBudWxsID8gb3BlbiA6IHRoaXMuc3RhdGUub3BlbixcbiAgICAgICAgICBtZXNzYWdlOiBuZXh0UHJvcHMubWVzc2FnZSxcbiAgICAgICAgICBhY3Rpb246IG5leHRQcm9wcy5hY3Rpb25cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50RGlkVXBkYXRlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICBpZiAocHJldlN0YXRlLm9wZW4gIT09IHRoaXMuc3RhdGUub3Blbikge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5vcGVuKSB7XG4gICAgICAgICAgdGhpcy5zZXRBdXRvSGlkZVRpbWVyKCk7XG4gICAgICAgICAgdGhpcy5zZXRUcmFuc2l0aW9uVGltZXIoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lckF1dG9IaWRlSWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbFVubW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyQXV0b0hpZGVJZCk7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lclRyYW5zaXRpb25JZCk7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lck9uZUF0VGhlVGltZUlkKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzZXRBdXRvSGlkZVRpbWVyJyxcblxuXG4gICAgLy8gVGltZXIgdGhhdCBjb250cm9scyBkZWxheSBiZWZvcmUgc25hY2tiYXIgYXV0byBoaWRlc1xuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRBdXRvSGlkZVRpbWVyKCkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHZhciBhdXRvSGlkZUR1cmF0aW9uID0gdGhpcy5wcm9wcy5hdXRvSGlkZUR1cmF0aW9uO1xuXG4gICAgICBpZiAoYXV0b0hpZGVEdXJhdGlvbiA+IDApIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJBdXRvSGlkZUlkKTtcbiAgICAgICAgdGhpcy50aW1lckF1dG9IaWRlSWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoX3RoaXMzLnByb3BzLm9wZW4gIT09IG51bGwgJiYgX3RoaXMzLnByb3BzLm9uUmVxdWVzdENsb3NlKSB7XG4gICAgICAgICAgICBfdGhpczMucHJvcHMub25SZXF1ZXN0Q2xvc2UoJ3RpbWVvdXQnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMzLnNldFN0YXRlKHsgb3BlbjogZmFsc2UgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBhdXRvSGlkZUR1cmF0aW9uKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUaW1lciB0aGF0IGNvbnRyb2xzIGRlbGF5IGJlZm9yZSBjbGljay1hd2F5IGV2ZW50cyBhcmUgY2FwdHVyZWQgKGJhc2VkIG9uIHdoZW4gYW5pbWF0aW9uIGNvbXBsZXRlcylcblxuICB9LCB7XG4gICAga2V5OiAnc2V0VHJhbnNpdGlvblRpbWVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VHJhbnNpdGlvblRpbWVyKCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIHRoaXMudGltZXJUcmFuc2l0aW9uSWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXM0LnRpbWVyVHJhbnNpdGlvbklkID0gdW5kZWZpbmVkO1xuICAgICAgfSwgNDAwKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBhdXRvSGlkZUR1cmF0aW9uID0gX3Byb3BzLmF1dG9IaWRlRHVyYXRpb24sXG4gICAgICAgICAgY29udGVudFN0eWxlID0gX3Byb3BzLmNvbnRlbnRTdHlsZSxcbiAgICAgICAgICBib2R5U3R5bGUgPSBfcHJvcHMuYm9keVN0eWxlLFxuICAgICAgICAgIG1lc3NhZ2VQcm9wID0gX3Byb3BzLm1lc3NhZ2UsXG4gICAgICAgICAgb25SZXF1ZXN0Q2xvc2UgPSBfcHJvcHMub25SZXF1ZXN0Q2xvc2UsXG4gICAgICAgICAgb25BY3Rpb25Ub3VjaFRhcCA9IF9wcm9wcy5vbkFjdGlvblRvdWNoVGFwLFxuICAgICAgICAgIHN0eWxlID0gX3Byb3BzLnN0eWxlLFxuICAgICAgICAgIG90aGVyID0gKDAsIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMuZGVmYXVsdCkoX3Byb3BzLCBbJ2F1dG9IaWRlRHVyYXRpb24nLCAnY29udGVudFN0eWxlJywgJ2JvZHlTdHlsZScsICdtZXNzYWdlJywgJ29uUmVxdWVzdENsb3NlJywgJ29uQWN0aW9uVG91Y2hUYXAnLCAnc3R5bGUnXSk7XG4gICAgICB2YXIgX3N0YXRlID0gdGhpcy5zdGF0ZSxcbiAgICAgICAgICBhY3Rpb24gPSBfc3RhdGUuYWN0aW9uLFxuICAgICAgICAgIG1lc3NhZ2UgPSBfc3RhdGUubWVzc2FnZSxcbiAgICAgICAgICBvcGVuID0gX3N0YXRlLm9wZW47XG4gICAgICB2YXIgcHJlcGFyZVN0eWxlcyA9IHRoaXMuY29udGV4dC5tdWlUaGVtZS5wcmVwYXJlU3R5bGVzO1xuXG4gICAgICB2YXIgc3R5bGVzID0gZ2V0U3R5bGVzKHRoaXMucHJvcHMsIHRoaXMuY29udGV4dCwgdGhpcy5zdGF0ZSk7XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgX0NsaWNrQXdheUxpc3RlbmVyMi5kZWZhdWx0LFxuICAgICAgICB7IG9uQ2xpY2tBd2F5OiBvcGVuID8gdGhpcy5jb21wb25lbnRDbGlja0F3YXkgOiBudWxsIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICgwLCBfZXh0ZW5kczMuZGVmYXVsdCkoe30sIG90aGVyLCB7IHN0eWxlOiBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMucm9vdCwgc3R5bGUpKSB9KSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfU25hY2tiYXJCb2R5Mi5kZWZhdWx0LCB7XG4gICAgICAgICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgICAgICAgIGNvbnRlbnRTdHlsZTogY29udGVudFN0eWxlLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgIG9wZW46IG9wZW4sXG4gICAgICAgICAgICBvbkFjdGlvblRvdWNoVGFwOiBvbkFjdGlvblRvdWNoVGFwLFxuICAgICAgICAgICAgc3R5bGU6IGJvZHlTdHlsZVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBTbmFja2Jhcjtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cblNuYWNrYmFyLmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5TbmFja2Jhci5wcm9wVHlwZXMgPSAgZmFsc2UgPyB7XG4gIC8qKlxuICAgKiBUaGUgbGFiZWwgZm9yIHRoZSBhY3Rpb24gb24gdGhlIHNuYWNrYmFyLlxuICAgKi9cbiAgYWN0aW9uOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byB3YWl0IGJlZm9yZSBhdXRvbWF0aWNhbGx5IGRpc21pc3NpbmcuXG4gICAqIElmIG5vIHZhbHVlIGlzIHNwZWNpZmllZCB0aGUgc25hY2tiYXIgd2lsbCBkaXNtaXNzIG5vcm1hbGx5LlxuICAgKiBJZiBhIHZhbHVlIGlzIHByb3ZpZGVkIHRoZSBzbmFja2JhciBjYW4gc3RpbGwgYmUgZGlzbWlzc2VkIG5vcm1hbGx5LlxuICAgKiBJZiBhIHNuYWNrYmFyIGlzIGRpc21pc3NlZCBiZWZvcmUgdGhlIHRpbWVyIGV4cGlyZXMsIHRoZSB0aW1lciB3aWxsIGJlIGNsZWFyZWQuXG4gICAqL1xuICBhdXRvSGlkZUR1cmF0aW9uOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm51bWJlcixcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBib2R5IGVsZW1lbnQuXG4gICAqL1xuICBib2R5U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhlIGNzcyBjbGFzcyBuYW1lIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBjbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIGNvbnRlbnQgZWxlbWVudC5cbiAgICovXG4gIGNvbnRlbnRTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBUaGUgbWVzc2FnZSB0byBiZSBkaXNwbGF5ZWQuXG4gICAqXG4gICAqIChOb3RlOiBJZiB0aGUgbWVzc2FnZSBpcyBhbiBlbGVtZW50IG9yIGFycmF5LCBhbmQgdGhlIGBTbmFja2JhcmAgbWF5IHJlLXJlbmRlciB3aGlsZSBpdCBpcyBzdGlsbCBvcGVuLFxuICAgKiBlbnN1cmUgdGhhdCB0aGUgc2FtZSBvYmplY3QgcmVtYWlucyBhcyB0aGUgYG1lc3NhZ2VgIHByb3BlcnR5IGlmIHlvdSB3YW50IHRvIGF2b2lkIHRoZSBgU25hY2tiYXJgIGhpZGluZyBhbmRcbiAgICogc2hvd2luZyBhZ2FpbilcbiAgICovXG4gIG1lc3NhZ2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZS5pc1JlcXVpcmVkLFxuICAvKipcbiAgICogRmlyZWQgd2hlbiB0aGUgYWN0aW9uIGJ1dHRvbiBpcyB0b3VjaHRhcHBlZC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IEFjdGlvbiBidXR0b24gZXZlbnQuXG4gICAqL1xuICBvbkFjdGlvblRvdWNoVGFwOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBGaXJlZCB3aGVuIHRoZSBgU25hY2tiYXJgIGlzIHJlcXVlc3RlZCB0byBiZSBjbG9zZWQgYnkgYSBjbGljayBvdXRzaWRlIHRoZSBgU25hY2tiYXJgLCBvciBhZnRlciB0aGVcbiAgICogYGF1dG9IaWRlRHVyYXRpb25gIHRpbWVyIGV4cGlyZXMuXG4gICAqXG4gICAqIFR5cGljYWxseSBgb25SZXF1ZXN0Q2xvc2VgIGlzIHVzZWQgdG8gc2V0IHN0YXRlIGluIHRoZSBwYXJlbnQgY29tcG9uZW50LCB3aGljaCBpcyB1c2VkIHRvIGNvbnRyb2wgdGhlIGBTbmFja2JhcmBcbiAgICogYG9wZW5gIHByb3AuXG4gICAqXG4gICAqIFRoZSBgcmVhc29uYCBwYXJhbWV0ZXIgY2FuIG9wdGlvbmFsbHkgYmUgdXNlZCB0byBjb250cm9sIHRoZSByZXNwb25zZSB0byBgb25SZXF1ZXN0Q2xvc2VgLFxuICAgKiBmb3IgZXhhbXBsZSBpZ25vcmluZyBgY2xpY2thd2F5YC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlYXNvbiBDYW4gYmU6YFwidGltZW91dFwiYCAoYGF1dG9IaWRlRHVyYXRpb25gIGV4cGlyZWQpIG9yOiBgXCJjbGlja2F3YXlcImBcbiAgICovXG4gIG9uUmVxdWVzdENsb3NlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBDb250cm9scyB3aGV0aGVyIHRoZSBgU25hY2tiYXJgIGlzIG9wZW5lZCBvciBub3QuXG4gICAqL1xuICBvcGVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wuaXNSZXF1aXJlZCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3Rcbn0gOiB7fTtcbmV4cG9ydHMuZGVmYXVsdCA9IFNuYWNrYmFyO1xuXG4vKioqLyB9KSxcbi8qIDE1MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5TbmFja2JhckJvZHkgPSB1bmRlZmluZWQ7XG5cbnZhciBfZXh0ZW5kczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXG52YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyKTtcblxudmFyIF9zaW1wbGVBc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXG52YXIgX3NpbXBsZUFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaW1wbGVBc3NpZ24pO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxudmFyIF90cmFuc2l0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXG52YXIgX3RyYW5zaXRpb25zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RyYW5zaXRpb25zKTtcblxudmFyIF93aXRoV2lkdGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OSk7XG5cbnZhciBfd2l0aFdpZHRoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dpdGhXaWR0aCk7XG5cbnZhciBfRmxhdEJ1dHRvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXG52YXIgX0ZsYXRCdXR0b24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRmxhdEJ1dHRvbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGdldFN0eWxlcyhwcm9wcywgY29udGV4dCkge1xuICB2YXIgb3BlbiA9IHByb3BzLm9wZW4sXG4gICAgICB3aWR0aCA9IHByb3BzLndpZHRoO1xuICB2YXIgX2NvbnRleHQkbXVpVGhlbWUgPSBjb250ZXh0Lm11aVRoZW1lLFxuICAgICAgX2NvbnRleHQkbXVpVGhlbWUkYmFzID0gX2NvbnRleHQkbXVpVGhlbWUuYmFzZVRoZW1lLFxuICAgICAgX2NvbnRleHQkbXVpVGhlbWUkYmFzMiA9IF9jb250ZXh0JG11aVRoZW1lJGJhcy5zcGFjaW5nLFxuICAgICAgZGVza3RvcEd1dHRlciA9IF9jb250ZXh0JG11aVRoZW1lJGJhczIuZGVza3RvcEd1dHRlcixcbiAgICAgIGRlc2t0b3BTdWJoZWFkZXJIZWlnaHQgPSBfY29udGV4dCRtdWlUaGVtZSRiYXMyLmRlc2t0b3BTdWJoZWFkZXJIZWlnaHQsXG4gICAgICBmb250RmFtaWx5ID0gX2NvbnRleHQkbXVpVGhlbWUkYmFzLmZvbnRGYW1pbHksXG4gICAgICBfY29udGV4dCRtdWlUaGVtZSRzbmEgPSBfY29udGV4dCRtdWlUaGVtZS5zbmFja2JhcixcbiAgICAgIGJhY2tncm91bmRDb2xvciA9IF9jb250ZXh0JG11aVRoZW1lJHNuYS5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICB0ZXh0Q29sb3IgPSBfY29udGV4dCRtdWlUaGVtZSRzbmEudGV4dENvbG9yLFxuICAgICAgYWN0aW9uQ29sb3IgPSBfY29udGV4dCRtdWlUaGVtZSRzbmEuYWN0aW9uQ29sb3IsXG4gICAgICBib3JkZXJSYWRpdXMgPSBfY29udGV4dCRtdWlUaGVtZS5ib3JkZXJSYWRpdXM7XG5cblxuICB2YXIgaXNTbWFsbCA9IHdpZHRoID09PSBfd2l0aFdpZHRoLlNNQUxMO1xuXG4gIHZhciBzdHlsZXMgPSB7XG4gICAgcm9vdDoge1xuICAgICAgZm9udEZhbWlseTogZm9udEZhbWlseSxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogYmFja2dyb3VuZENvbG9yLFxuICAgICAgcGFkZGluZzogJzAgJyArIGRlc2t0b3BHdXR0ZXIgKyAncHgnLFxuICAgICAgaGVpZ2h0OiBkZXNrdG9wU3ViaGVhZGVySGVpZ2h0LFxuICAgICAgbGluZUhlaWdodDogZGVza3RvcFN1YmhlYWRlckhlaWdodCArICdweCcsXG4gICAgICBib3JkZXJSYWRpdXM6IGlzU21hbGwgPyAwIDogYm9yZGVyUmFkaXVzLFxuICAgICAgbWF4V2lkdGg6IGlzU21hbGwgPyAnaW5oZXJpdCcgOiA1NjgsXG4gICAgICBtaW5XaWR0aDogaXNTbWFsbCA/ICdpbmhlcml0JyA6IDI4OCxcbiAgICAgIHdpZHRoOiBpc1NtYWxsID8gJ2NhbGMoMTAwdncgLSAnICsgZGVza3RvcEd1dHRlciAqIDIgKyAncHgpJyA6ICdhdXRvJyxcbiAgICAgIGZsZXhHcm93OiBpc1NtYWxsID8gMSA6IDBcbiAgICB9LFxuICAgIGNvbnRlbnQ6IHtcbiAgICAgIGZvbnRTaXplOiAxNCxcbiAgICAgIGNvbG9yOiB0ZXh0Q29sb3IsXG4gICAgICBvcGFjaXR5OiBvcGVuID8gMSA6IDAsXG4gICAgICB0cmFuc2l0aW9uOiBvcGVuID8gX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoJzUwMG1zJywgJ29wYWNpdHknLCAnMTAwbXMnKSA6IF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KCc0MDBtcycsICdvcGFjaXR5JylcbiAgICB9LFxuICAgIGFjdGlvbjoge1xuICAgICAgY29sb3I6IGFjdGlvbkNvbG9yLFxuICAgICAgZmxvYXQ6ICdyaWdodCcsXG4gICAgICBtYXJnaW5Ub3A6IDYsXG4gICAgICBtYXJnaW5SaWdodDogLTE2LFxuICAgICAgbWFyZ2luTGVmdDogZGVza3RvcEd1dHRlcixcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50J1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gc3R5bGVzO1xufVxuXG52YXIgU25hY2tiYXJCb2R5ID0gZnVuY3Rpb24gU25hY2tiYXJCb2R5KHByb3BzLCBjb250ZXh0KSB7XG4gIHZhciBhY3Rpb24gPSBwcm9wcy5hY3Rpb24sXG4gICAgICBjb250ZW50U3R5bGUgPSBwcm9wcy5jb250ZW50U3R5bGUsXG4gICAgICBtZXNzYWdlID0gcHJvcHMubWVzc2FnZSxcbiAgICAgIG9wZW4gPSBwcm9wcy5vcGVuLFxuICAgICAgb25BY3Rpb25Ub3VjaFRhcCA9IHByb3BzLm9uQWN0aW9uVG91Y2hUYXAsXG4gICAgICBzdHlsZSA9IHByb3BzLnN0eWxlLFxuICAgICAgb3RoZXIgPSAoMCwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMy5kZWZhdWx0KShwcm9wcywgWydhY3Rpb24nLCAnY29udGVudFN0eWxlJywgJ21lc3NhZ2UnLCAnb3BlbicsICdvbkFjdGlvblRvdWNoVGFwJywgJ3N0eWxlJ10pO1xuICB2YXIgcHJlcGFyZVN0eWxlcyA9IGNvbnRleHQubXVpVGhlbWUucHJlcGFyZVN0eWxlcztcblxuICB2YXIgc3R5bGVzID0gZ2V0U3R5bGVzKHByb3BzLCBjb250ZXh0KTtcblxuICB2YXIgYWN0aW9uQnV0dG9uID0gYWN0aW9uICYmIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9GbGF0QnV0dG9uMi5kZWZhdWx0LCB7XG4gICAgc3R5bGU6IHN0eWxlcy5hY3Rpb24sXG4gICAgbGFiZWw6IGFjdGlvbixcbiAgICBvblRvdWNoVGFwOiBvbkFjdGlvblRvdWNoVGFwXG4gIH0pO1xuXG4gIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAnZGl2JyxcbiAgICAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBvdGhlciwgeyBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLnJvb3QsIHN0eWxlKSkgfSksXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAnZGl2JyxcbiAgICAgIHsgc3R5bGU6IHByZXBhcmVTdHlsZXMoKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5jb250ZW50LCBjb250ZW50U3R5bGUpKSB9LFxuICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdzcGFuJyxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgbWVzc2FnZVxuICAgICAgKSxcbiAgICAgIGFjdGlvbkJ1dHRvblxuICAgIClcbiAgKTtcbn07XG5cbmV4cG9ydHMuU25hY2tiYXJCb2R5ID0gU25hY2tiYXJCb2R5O1xuU25hY2tiYXJCb2R5LnByb3BUeXBlcyA9ICBmYWxzZSA/IHtcbiAgLyoqXG4gICAqIFRoZSBsYWJlbCBmb3IgdGhlIGFjdGlvbiBvbiB0aGUgc25hY2tiYXIuXG4gICAqL1xuICBhY3Rpb246IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBjb250ZW50IGVsZW1lbnQuXG4gICAqL1xuICBjb250ZW50U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhlIG1lc3NhZ2UgdG8gYmUgZGlzcGxheWVkLlxuICAgKlxuICAgKiAoTm90ZTogSWYgdGhlIG1lc3NhZ2UgaXMgYW4gZWxlbWVudCBvciBhcnJheSwgYW5kIHRoZSBgU25hY2tiYXJgIG1heSByZS1yZW5kZXIgd2hpbGUgaXQgaXMgc3RpbGwgb3BlbixcbiAgICogZW5zdXJlIHRoYXQgdGhlIHNhbWUgb2JqZWN0IHJlbWFpbnMgYXMgdGhlIGBtZXNzYWdlYCBwcm9wZXJ0eSBpZiB5b3Ugd2FudCB0byBhdm9pZCB0aGUgYFNuYWNrYmFyYCBoaWRpbmcgYW5kXG4gICAqIHNob3dpbmcgYWdhaW4pXG4gICAqL1xuICBtZXNzYWdlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUuaXNSZXF1aXJlZCxcbiAgLyoqXG4gICAqIEZpcmVkIHdoZW4gdGhlIGFjdGlvbiBidXR0b24gaXMgdG91Y2h0YXBwZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBBY3Rpb24gYnV0dG9uIGV2ZW50LlxuICAgKi9cbiAgb25BY3Rpb25Ub3VjaFRhcDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKiBDb250cm9scyB3aGV0aGVyIHRoZSBgU25hY2tiYXJgIGlzIG9wZW5lZCBvciBub3QuXG4gICAqL1xuICBvcGVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wuaXNSZXF1aXJlZCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqIFdpZHRoIG9mIHRoZSBzY3JlZW4uXG4gICAqL1xuICB3aWR0aDogX3Byb3BUeXBlczIuZGVmYXVsdC5udW1iZXIuaXNSZXF1aXJlZFxufSA6IHt9O1xuXG5TbmFja2JhckJvZHkuY29udGV4dFR5cGVzID0ge1xuICBtdWlUaGVtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QuaXNSZXF1aXJlZFxufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gKDAsIF93aXRoV2lkdGgyLmRlZmF1bHQpKCkoU25hY2tiYXJCb2R5KTtcblxuLyoqKi8gfSksXG4vKiAxNTQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMik7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7XG5cbnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblxudmFyIF9pbmhlcml0czIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXG52YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cbnZhciBfc2ltcGxlQXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblxudmFyIF9zaW1wbGVBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2ltcGxlQXNzaWduKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKlxuICogIEJlZm9yZUFmdGVyV3JhcHBlclxuICogICAgQW4gYWx0ZXJuYXRpdmUgZm9yIHRoZSA6OmJlZm9yZSBhbmQgOjphZnRlciBjc3MgcHNldWRvLWVsZW1lbnRzIGZvclxuICogICAgY29tcG9uZW50cyB3aG9zZSBzdHlsZXMgYXJlIGRlZmluZWQgaW4gamF2YXNjcmlwdCBpbnN0ZWFkIG9mIGNzcy5cbiAqXG4gKiAgVXNhZ2U6IEZvciB0aGUgZWxlbWVudCB0aGF0IHdlIHdhbnQgdG8gYXBwbHkgYmVmb3JlIGFuZCBhZnRlciBlbGVtZW50cyB0byxcbiAqICAgIHdyYXAgaXRzIGNoaWxkcmVuIHdpdGggQmVmb3JlQWZ0ZXJXcmFwcGVyLiBGb3IgZXhhbXBsZTpcbiAqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBhcGVyPlxuICogIDxQYXBlcj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4gLy8gU2VlIG5vdGljZVxuICogICAgPEJlZm9yZUFmdGVyV3JhcHBlcj4gICAgICAgIHJlbmRlcnMgICAgICAgICA8ZGl2Lz4gLy8gYmVmb3JlIGVsZW1lbnRcbiAqICAgICAgW2NoaWxkcmVuIG9mIHBhcGVyXSAgICAgICAtLS0tLS0+ICAgICAgICAgW2NoaWxkcmVuIG9mIHBhcGVyXVxuICogICAgPC9CZWZvcmVBZnRlcldyYXBwZXI+ICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Lz4gLy8gYWZ0ZXIgZWxlbWVudFxuICogIDwvUGFwZXI+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9QYXBlcj5cbiAqXG4gKiAgTm90aWNlOiBOb3RpY2UgdGhhdCB0aGlzIGRpdiBidW5kbGVzIHRvZ2V0aGVyIG91ciBlbGVtZW50cy4gSWYgdGhlIGVsZW1lbnRcbiAqICAgIHRoYXQgd2Ugd2FudCB0byBhcHBseSBiZWZvcmUgYW5kIGFmdGVyIGVsZW1lbnRzIGlzIGEgSFRNTCB0YWcgKGkuZS4gYVxuICogICAgZGl2LCBwLCBvciBidXR0b24gdGFnKSwgd2UgY2FuIGF2b2lkIHRoaXMgZXh0cmEgbmVzdGluZyBieSBwYXNzaW5nIHVzaW5nXG4gKiAgICB0aGUgQmVmb3JlQWZ0ZXJXcmFwcGVyIGluIHBsYWNlIG9mIHNhaWQgdGFnIGxpa2Ugc286XG4gKlxuICogIDxwPlxuICogICAgPEJlZm9yZUFmdGVyV3JhcHBlcj4gICBkbyB0aGlzIGluc3RlYWQgICA8QmVmb3JlQWZ0ZXJXcmFwcGVyIGVsZW1lbnRUeXBlPSdwJz5cbiAqICAgICAgW2NoaWxkcmVuIG9mIHBdICAgICAgICAgIC0tLS0tLT4gICAgICAgICBbY2hpbGRyZW4gb2YgcF1cbiAqICAgIDwvQmVmb3JlQWZ0ZXJXcmFwcGVyPiAgICAgICAgICAgICAgICAgICAgPC9CZWZvcmVBZnRlcldyYXBwZXI+XG4gKiAgPC9wPlxuICpcbiAqICBCZWZvcmVBZnRlcldyYXBwZXIgZmVhdHVyZXMgc3ByZWFkIGZ1bmN0aW9uYWxpdHkuIFRoaXMgbWVhbnMgdGhhdCB3ZSBjYW5cbiAqICBwYXNzIEhUTUwgdGFnIHByb3BlcnRpZXMgZGlyZWN0bHkgaW50byB0aGUgQmVmb3JlQWZ0ZXJXcmFwcGVyIHRhZy5cbiAqXG4gKiAgV2hlbiB1c2luZyBCZWZvcmVBZnRlcldyYXBwZXIsIGVuc3VyZSB0aGF0IHRoZSBwYXJlbnQgb2YgdGhlIGJlZm9yZUVsZW1lbnRcbiAqICBhbmQgYWZ0ZXJFbGVtZW50IGhhdmUgYSBkZWZpbmVkIHN0eWxlIHBvc2l0aW9uLlxuICovXG5cbnZhciBzdHlsZXMgPSB7XG4gIGJveDoge1xuICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnXG4gIH1cbn07XG5cbnZhciBCZWZvcmVBZnRlcldyYXBwZXIgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShCZWZvcmVBZnRlcldyYXBwZXIsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEJlZm9yZUFmdGVyV3JhcHBlcigpIHtcbiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBCZWZvcmVBZnRlcldyYXBwZXIpO1xuICAgIHJldHVybiAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChCZWZvcmVBZnRlcldyYXBwZXIuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKEJlZm9yZUFmdGVyV3JhcHBlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoQmVmb3JlQWZ0ZXJXcmFwcGVyLCBbe1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGJlZm9yZVN0eWxlID0gX3Byb3BzLmJlZm9yZVN0eWxlLFxuICAgICAgICAgIGFmdGVyU3R5bGUgPSBfcHJvcHMuYWZ0ZXJTdHlsZSxcbiAgICAgICAgICBiZWZvcmVFbGVtZW50VHlwZSA9IF9wcm9wcy5iZWZvcmVFbGVtZW50VHlwZSxcbiAgICAgICAgICBhZnRlckVsZW1lbnRUeXBlID0gX3Byb3BzLmFmdGVyRWxlbWVudFR5cGUsXG4gICAgICAgICAgZWxlbWVudFR5cGUgPSBfcHJvcHMuZWxlbWVudFR5cGUsXG4gICAgICAgICAgb3RoZXIgPSAoMCwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMy5kZWZhdWx0KShfcHJvcHMsIFsnYmVmb3JlU3R5bGUnLCAnYWZ0ZXJTdHlsZScsICdiZWZvcmVFbGVtZW50VHlwZScsICdhZnRlckVsZW1lbnRUeXBlJywgJ2VsZW1lbnRUeXBlJ10pO1xuICAgICAgdmFyIHByZXBhcmVTdHlsZXMgPSB0aGlzLmNvbnRleHQubXVpVGhlbWUucHJlcGFyZVN0eWxlcztcblxuXG4gICAgICB2YXIgYmVmb3JlRWxlbWVudCA9IHZvaWQgMDtcbiAgICAgIHZhciBhZnRlckVsZW1lbnQgPSB2b2lkIDA7XG5cbiAgICAgIGlmIChiZWZvcmVTdHlsZSkge1xuICAgICAgICBiZWZvcmVFbGVtZW50ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQodGhpcy5wcm9wcy5iZWZvcmVFbGVtZW50VHlwZSwge1xuICAgICAgICAgIHN0eWxlOiBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgc3R5bGVzLmJveCwgYmVmb3JlU3R5bGUpKSxcbiAgICAgICAgICBrZXk6ICc6OmJlZm9yZSdcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChhZnRlclN0eWxlKSB7XG4gICAgICAgIGFmdGVyRWxlbWVudCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KHRoaXMucHJvcHMuYWZ0ZXJFbGVtZW50VHlwZSwge1xuICAgICAgICAgIHN0eWxlOiBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgc3R5bGVzLmJveCwgYWZ0ZXJTdHlsZSkpLFxuICAgICAgICAgIGtleTogJzo6YWZ0ZXInXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2hpbGRyZW4gPSBbYmVmb3JlRWxlbWVudCwgdGhpcy5wcm9wcy5jaGlsZHJlbiwgYWZ0ZXJFbGVtZW50XTtcblxuICAgICAgdmFyIHByb3BzID0gb3RoZXI7XG4gICAgICBwcm9wcy5zdHlsZSA9IHByZXBhcmVTdHlsZXMoKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCB0aGlzLnByb3BzLnN0eWxlKSk7XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCh0aGlzLnByb3BzLmVsZW1lbnRUeXBlLCBwcm9wcywgY2hpbGRyZW4pO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gQmVmb3JlQWZ0ZXJXcmFwcGVyO1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuQmVmb3JlQWZ0ZXJXcmFwcGVyLmRlZmF1bHRQcm9wcyA9IHtcbiAgYmVmb3JlRWxlbWVudFR5cGU6ICdkaXYnLFxuICBhZnRlckVsZW1lbnRUeXBlOiAnZGl2JyxcbiAgZWxlbWVudFR5cGU6ICdkaXYnXG59O1xuQmVmb3JlQWZ0ZXJXcmFwcGVyLmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5CZWZvcmVBZnRlcldyYXBwZXIucHJvcFR5cGVzID0gIGZhbHNlID8ge1xuICBhZnRlckVsZW1lbnRUeXBlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgYWZ0ZXJTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGJlZm9yZUVsZW1lbnRUeXBlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgYmVmb3JlU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBjaGlsZHJlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICBlbGVtZW50VHlwZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0XG59IDoge307XG5leHBvcnRzLmRlZmF1bHQgPSBCZWZvcmVBZnRlcldyYXBwZXI7XG5cbi8qKiovIH0pLFxuLyogMTU1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXG52YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbnZhciBfQmVmb3JlQWZ0ZXJXcmFwcGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTQpO1xuXG52YXIgX0JlZm9yZUFmdGVyV3JhcHBlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9CZWZvcmVBZnRlcldyYXBwZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgc3R5bGVzID0ge1xuICBiZWZvcmU6IHtcbiAgICBjb250ZW50OiBcIicgJ1wiLFxuICAgIGRpc3BsYXk6ICd0YWJsZSdcbiAgfSxcbiAgYWZ0ZXI6IHtcbiAgICBjb250ZW50OiBcIicgJ1wiLFxuICAgIGNsZWFyOiAnYm90aCcsXG4gICAgZGlzcGxheTogJ3RhYmxlJ1xuICB9XG59O1xuXG52YXIgQ2xlYXJGaXggPSBmdW5jdGlvbiBDbGVhckZpeChfcmVmKSB7XG4gIHZhciBzdHlsZSA9IF9yZWYuc3R5bGUsXG4gICAgICBjaGlsZHJlbiA9IF9yZWYuY2hpbGRyZW4sXG4gICAgICBvdGhlciA9ICgwLCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzLmRlZmF1bHQpKF9yZWYsIFsnc3R5bGUnLCAnY2hpbGRyZW4nXSk7XG4gIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICBfQmVmb3JlQWZ0ZXJXcmFwcGVyMi5kZWZhdWx0LFxuICAgICgwLCBfZXh0ZW5kczMuZGVmYXVsdCkoe30sIG90aGVyLCB7XG4gICAgICBiZWZvcmVTdHlsZTogc3R5bGVzLmJlZm9yZSxcbiAgICAgIGFmdGVyU3R5bGU6IHN0eWxlcy5hZnRlcixcbiAgICAgIHN0eWxlOiBzdHlsZVxuICAgIH0pLFxuICAgIGNoaWxkcmVuXG4gICk7XG59O1xuXG5DbGVhckZpeC5tdWlOYW1lID0gJ0NsZWFyRml4JztcblxuQ2xlYXJGaXgucHJvcFR5cGVzID0gIGZhbHNlID8ge1xuICBjaGlsZHJlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIHN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdFxufSA6IHt9O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBDbGVhckZpeDtcblxuLyoqKi8gfSksXG4vKiAxNTYgKi8sXG4vKiAxNTcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cbnZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RXaXRob3V0UHJvcGVydGllczIpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7XG5cbnZhciBfaW5oZXJpdHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG52YXIgX3NpbXBsZUFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cbnZhciBfc2ltcGxlQXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NpbXBsZUFzc2lnbik7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX3JlYWN0RXZlbnRMaXN0ZW5lciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXG52YXIgX3JlYWN0RXZlbnRMaXN0ZW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdEV2ZW50TGlzdGVuZXIpO1xuXG52YXIgX2tleWNvZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblxudmFyIF9rZXljb2RlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2tleWNvZGUpO1xuXG52YXIgX3RyYW5zaXRpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cbnZhciBfdHJhbnNpdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHJhbnNpdGlvbnMpO1xuXG52YXIgX0ZvY3VzUmlwcGxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTgpO1xuXG52YXIgX0ZvY3VzUmlwcGxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ZvY3VzUmlwcGxlKTtcblxudmFyIF9Ub3VjaFJpcHBsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYxKTtcblxudmFyIF9Ub3VjaFJpcHBsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Ub3VjaFJpcHBsZSk7XG5cbnZhciBfUGFwZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblxudmFyIF9QYXBlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9QYXBlcik7XG5cbnZhciBfd2FybmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXG52YXIgX3dhcm5pbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2FybmluZyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGdldFN0eWxlcyhwcm9wcywgY29udGV4dCkge1xuICB2YXIgYmFzZVRoZW1lID0gY29udGV4dC5tdWlUaGVtZS5iYXNlVGhlbWU7XG5cblxuICByZXR1cm4ge1xuICAgIHJvb3Q6IHtcbiAgICAgIGN1cnNvcjogcHJvcHMuZGlzYWJsZWQgPyAnbm90LWFsbG93ZWQnIDogJ3BvaW50ZXInLFxuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICBvdmVyZmxvdzogJ3Zpc2libGUnLFxuICAgICAgZGlzcGxheTogJ3RhYmxlJyxcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgd2lkdGg6ICcxMDAlJ1xuICAgIH0sXG4gICAgaW5wdXQ6IHtcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgY3Vyc29yOiAnaW5oZXJpdCcsXG4gICAgICBwb2ludGVyRXZlbnRzOiAnYWxsJyxcbiAgICAgIG9wYWNpdHk6IDAsXG4gICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICB6SW5kZXg6IDIsXG4gICAgICBsZWZ0OiAwLFxuICAgICAgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsXG4gICAgICBwYWRkaW5nOiAwLFxuICAgICAgbWFyZ2luOiAwXG4gICAgfSxcbiAgICBjb250cm9sczoge1xuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgIGhlaWdodDogJzEwMCUnXG4gICAgfSxcbiAgICBsYWJlbDoge1xuICAgICAgZmxvYXQ6ICdsZWZ0JyxcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgIHdpZHRoOiAnY2FsYygxMDAlIC0gNjBweCknLFxuICAgICAgbGluZUhlaWdodDogJzI0cHgnLFxuICAgICAgY29sb3I6IGJhc2VUaGVtZS5wYWxldHRlLnRleHRDb2xvcixcbiAgICAgIGZvbnRGYW1pbHk6IGJhc2VUaGVtZS5mb250RmFtaWx5XG4gICAgfSxcbiAgICB3cmFwOiB7XG4gICAgICB0cmFuc2l0aW9uOiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgpLFxuICAgICAgZmxvYXQ6ICdsZWZ0JyxcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgIGZsZXhTaHJpbms6IDAsXG4gICAgICB3aWR0aDogNjAgLSBiYXNlVGhlbWUuc3BhY2luZy5kZXNrdG9wR3V0dGVyTGVzcyxcbiAgICAgIG1hcmdpblJpZ2h0OiBwcm9wcy5sYWJlbFBvc2l0aW9uID09PSAncmlnaHQnID8gYmFzZVRoZW1lLnNwYWNpbmcuZGVza3RvcEd1dHRlckxlc3MgOiAwLFxuICAgICAgbWFyZ2luTGVmdDogcHJvcHMubGFiZWxQb3NpdGlvbiA9PT0gJ2xlZnQnID8gYmFzZVRoZW1lLnNwYWNpbmcuZGVza3RvcEd1dHRlckxlc3MgOiAwXG4gICAgfSxcbiAgICByaXBwbGU6IHtcbiAgICAgIGNvbG9yOiBwcm9wcy5yaXBwbGVDb2xvciB8fCBiYXNlVGhlbWUucGFsZXR0ZS5wcmltYXJ5MUNvbG9yLFxuICAgICAgaGVpZ2h0OiAnMjAwJScsXG4gICAgICB3aWR0aDogJzIwMCUnLFxuICAgICAgdG9wOiAtMTIsXG4gICAgICBsZWZ0OiAtMTJcbiAgICB9XG4gIH07XG59XG5cbnZhciBFbmhhbmNlZFN3aXRjaCA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKEVuaGFuY2VkU3dpdGNoLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBFbmhhbmNlZFN3aXRjaCgpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBFbmhhbmNlZFN3aXRjaCk7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKF9yZWYgPSBFbmhhbmNlZFN3aXRjaC5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRW5oYW5jZWRTd2l0Y2gpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGlzS2V5Ym9hcmRGb2N1c2VkOiBmYWxzZVxuICAgIH0sIF90aGlzLmhhbmRsZUNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgX3RoaXMudGFiUHJlc3NlZCA9IGZhbHNlO1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBpc0tleWJvYXJkRm9jdXNlZDogZmFsc2VcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgaXNJbnB1dENoZWNrZWQgPSBfdGhpcy5yZWZzLmNoZWNrYm94LmNoZWNrZWQ7XG5cbiAgICAgIGlmICghX3RoaXMucHJvcHMuaGFzT3duUHJvcGVydHkoJ2NoZWNrZWQnKSAmJiBfdGhpcy5wcm9wcy5vblBhcmVudFNob3VsZFVwZGF0ZSkge1xuICAgICAgICBfdGhpcy5wcm9wcy5vblBhcmVudFNob3VsZFVwZGF0ZShpc0lucHV0Q2hlY2tlZCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChfdGhpcy5wcm9wcy5vblN3aXRjaCkge1xuICAgICAgICBfdGhpcy5wcm9wcy5vblN3aXRjaChldmVudCwgaXNJbnB1dENoZWNrZWQpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmhhbmRsZUtleURvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciBjb2RlID0gKDAsIF9rZXljb2RlMi5kZWZhdWx0KShldmVudCk7XG5cbiAgICAgIGlmIChjb2RlID09PSAndGFiJykge1xuICAgICAgICBfdGhpcy50YWJQcmVzc2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChfdGhpcy5zdGF0ZS5pc0tleWJvYXJkRm9jdXNlZCAmJiBjb2RlID09PSAnc3BhY2UnKSB7XG4gICAgICAgIF90aGlzLmhhbmRsZUNoYW5nZShldmVudCk7XG4gICAgICB9XG4gICAgfSwgX3RoaXMuaGFuZGxlS2V5VXAgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmIChfdGhpcy5zdGF0ZS5pc0tleWJvYXJkRm9jdXNlZCAmJiAoMCwgX2tleWNvZGUyLmRlZmF1bHQpKGV2ZW50KSA9PT0gJ3NwYWNlJykge1xuICAgICAgICBfdGhpcy5oYW5kbGVDaGFuZ2UoZXZlbnQpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmhhbmRsZU1vdXNlRG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgLy8gb25seSBsaXN0ZW4gdG8gbGVmdCBjbGlja3NcbiAgICAgIGlmIChldmVudC5idXR0b24gPT09IDApIHtcbiAgICAgICAgX3RoaXMucmVmcy50b3VjaFJpcHBsZS5zdGFydChldmVudCk7XG4gICAgICB9XG4gICAgfSwgX3RoaXMuaGFuZGxlTW91c2VVcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnJlZnMudG91Y2hSaXBwbGUuZW5kKCk7XG4gICAgfSwgX3RoaXMuaGFuZGxlTW91c2VMZWF2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnJlZnMudG91Y2hSaXBwbGUuZW5kKCk7XG4gICAgfSwgX3RoaXMuaGFuZGxlVG91Y2hTdGFydCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgX3RoaXMucmVmcy50b3VjaFJpcHBsZS5zdGFydChldmVudCk7XG4gICAgfSwgX3RoaXMuaGFuZGxlVG91Y2hFbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5yZWZzLnRvdWNoUmlwcGxlLmVuZCgpO1xuICAgIH0sIF90aGlzLmhhbmRsZUJsdXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgaXNLZXlib2FyZEZvY3VzZWQ6IGZhbHNlXG4gICAgICB9KTtcblxuICAgICAgaWYgKF90aGlzLnByb3BzLm9uQmx1cikge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbkJsdXIoZXZlbnQpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmhhbmRsZUZvY3VzID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAvLyBzZXRUaW1lb3V0IGlzIG5lZWRlZCBiZWN1YXNlIHRoZSBmb2N1cyBldmVudCBmaXJlcyBmaXJzdFxuICAgICAgLy8gV2FpdCBzbyB0aGF0IHdlIGNhbiBjYXB0dXJlIGlmIHRoaXMgd2FzIGEga2V5Ym9hcmQgZm9jdXNcbiAgICAgIC8vIG9yIHRvdWNoIGZvY3VzXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF90aGlzLnRhYlByZXNzZWQpIHtcbiAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc0tleWJvYXJkRm9jdXNlZDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LCAxNTApO1xuXG4gICAgICBpZiAoX3RoaXMucHJvcHMub25Gb2N1cykge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbkZvY3VzKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9LCBfdGVtcCksICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkoX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRW5oYW5jZWRTd2l0Y2gsIFt7XG4gICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHZhciBpbnB1dE5vZGUgPSB0aGlzLnJlZnMuY2hlY2tib3g7XG4gICAgICBpZiAoKCF0aGlzLnByb3BzLnN3aXRjaGVkIHx8IGlucHV0Tm9kZS5jaGVja2VkICE9PSB0aGlzLnByb3BzLnN3aXRjaGVkKSAmJiB0aGlzLnByb3BzLm9uUGFyZW50U2hvdWxkVXBkYXRlKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25QYXJlbnRTaG91bGRVcGRhdGUoaW5wdXROb2RlLmNoZWNrZWQpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgdmFyIGhhc0NoZWNrZWRQcm9wID0gbmV4dFByb3BzLmhhc093blByb3BlcnR5KCdjaGVja2VkJyk7XG4gICAgICB2YXIgaGFzTmV3RGVmYXVsdFByb3AgPSBuZXh0UHJvcHMuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHRDaGVja2VkJykgJiYgbmV4dFByb3BzLmRlZmF1bHRDaGVja2VkICE9PSB0aGlzLnByb3BzLmRlZmF1bHRDaGVja2VkO1xuXG4gICAgICBpZiAoaGFzQ2hlY2tlZFByb3AgfHwgaGFzTmV3RGVmYXVsdFByb3ApIHtcbiAgICAgICAgdmFyIHN3aXRjaGVkID0gbmV4dFByb3BzLmNoZWNrZWQgfHwgbmV4dFByb3BzLmRlZmF1bHRDaGVja2VkIHx8IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIHN3aXRjaGVkOiBzd2l0Y2hlZFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5vblBhcmVudFNob3VsZFVwZGF0ZSAmJiBzd2l0Y2hlZCAhPT0gdGhpcy5wcm9wcy5zd2l0Y2hlZCkge1xuICAgICAgICAgIHRoaXMucHJvcHMub25QYXJlbnRTaG91bGRVcGRhdGUoc3dpdGNoZWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnaXNTd2l0Y2hlZCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzU3dpdGNoZWQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZWZzLmNoZWNrYm94LmNoZWNrZWQ7XG4gICAgfVxuXG4gICAgLy8gbm8gY2FsbGJhY2sgaGVyZSBiZWNhdXNlIHRoZXJlIGlzIG5vIGV2ZW50XG5cbiAgfSwge1xuICAgIGtleTogJ3NldFN3aXRjaGVkJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U3dpdGNoZWQobmV3U3dpdGNoZWRWYWx1ZSkge1xuICAgICAgaWYgKCF0aGlzLnByb3BzLmhhc093blByb3BlcnR5KCdjaGVja2VkJykgfHwgdGhpcy5wcm9wcy5jaGVja2VkID09PSBmYWxzZSkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5vblBhcmVudFNob3VsZFVwZGF0ZSkge1xuICAgICAgICAgIHRoaXMucHJvcHMub25QYXJlbnRTaG91bGRVcGRhdGUobmV3U3dpdGNoZWRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWZzLmNoZWNrYm94LmNoZWNrZWQgPSBuZXdTd2l0Y2hlZFZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgIGZhbHNlID8gKDAsIF93YXJuaW5nMi5kZWZhdWx0KShmYWxzZSwgJ01hdGVyaWFsLVVJOiBDYW5ub3QgY2FsbCBzZXQgbWV0aG9kIHdoaWxlIGNoZWNrZWQgaXMgZGVmaW5lZCBhcyBhIHByb3BlcnR5LicpIDogdm9pZCAwO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2dldFZhbHVlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZWZzLmNoZWNrYm94LnZhbHVlO1xuICAgIH1cblxuICAgIC8vIENoZWNrYm94IGlucHV0cyBvbmx5IHVzZSBTUEFDRSB0byBjaGFuZ2UgdGhlaXIgc3RhdGUuIFVzaW5nIEVOVEVSIHdpbGxcbiAgICAvLyB1cGRhdGUgdGhlIHVpIGJ1dCBub3QgdGhlIGlucHV0LlxuXG5cbiAgICAvKipcbiAgICAgKiBCZWNhdXNlIGJvdGggdGhlIHJpcHBsZXMgYW5kIHRoZSBjaGVja2JveCBpbnB1dCBjYW5ub3Qgc2hhcmUgcG9pbnRlclxuICAgICAqIGV2ZW50cywgdGhlIGNoZWNrYm94IGlucHV0IHRha2VzIGNvbnRyb2wgb2YgcG9pbnRlciBldmVudHMgYW5kIGNhbGxzXG4gICAgICogcmlwcGxlIGFuaW1hdGlvbnMgbWFudWFsbHkuXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIG5hbWUgPSBfcHJvcHMubmFtZSxcbiAgICAgICAgICB2YWx1ZSA9IF9wcm9wcy52YWx1ZSxcbiAgICAgICAgICBpY29uU3R5bGUgPSBfcHJvcHMuaWNvblN0eWxlLFxuICAgICAgICAgIGlucHV0U3R5bGUgPSBfcHJvcHMuaW5wdXRTdHlsZSxcbiAgICAgICAgICBpbnB1dFR5cGUgPSBfcHJvcHMuaW5wdXRUeXBlLFxuICAgICAgICAgIGxhYmVsID0gX3Byb3BzLmxhYmVsLFxuICAgICAgICAgIGxhYmVsU3R5bGUgPSBfcHJvcHMubGFiZWxTdHlsZSxcbiAgICAgICAgICBsYWJlbFBvc2l0aW9uID0gX3Byb3BzLmxhYmVsUG9zaXRpb24sXG4gICAgICAgICAgb25Td2l0Y2ggPSBfcHJvcHMub25Td2l0Y2gsXG4gICAgICAgICAgb25CbHVyID0gX3Byb3BzLm9uQmx1cixcbiAgICAgICAgICBvbkZvY3VzID0gX3Byb3BzLm9uRm9jdXMsXG4gICAgICAgICAgb25Nb3VzZVVwID0gX3Byb3BzLm9uTW91c2VVcCxcbiAgICAgICAgICBvbk1vdXNlRG93biA9IF9wcm9wcy5vbk1vdXNlRG93bixcbiAgICAgICAgICBvbk1vdXNlTGVhdmUgPSBfcHJvcHMub25Nb3VzZUxlYXZlLFxuICAgICAgICAgIG9uVG91Y2hTdGFydCA9IF9wcm9wcy5vblRvdWNoU3RhcnQsXG4gICAgICAgICAgb25Ub3VjaEVuZCA9IF9wcm9wcy5vblRvdWNoRW5kLFxuICAgICAgICAgIG9uUGFyZW50U2hvdWxkVXBkYXRlID0gX3Byb3BzLm9uUGFyZW50U2hvdWxkVXBkYXRlLFxuICAgICAgICAgIGRpc2FibGVkID0gX3Byb3BzLmRpc2FibGVkLFxuICAgICAgICAgIGRpc2FibGVUb3VjaFJpcHBsZSA9IF9wcm9wcy5kaXNhYmxlVG91Y2hSaXBwbGUsXG4gICAgICAgICAgZGlzYWJsZUZvY3VzUmlwcGxlID0gX3Byb3BzLmRpc2FibGVGb2N1c1JpcHBsZSxcbiAgICAgICAgICBjbGFzc05hbWUgPSBfcHJvcHMuY2xhc3NOYW1lLFxuICAgICAgICAgIHJpcHBsZUNvbG9yID0gX3Byb3BzLnJpcHBsZUNvbG9yLFxuICAgICAgICAgIHJpcHBsZVN0eWxlID0gX3Byb3BzLnJpcHBsZVN0eWxlLFxuICAgICAgICAgIHN0eWxlID0gX3Byb3BzLnN0eWxlLFxuICAgICAgICAgIHN3aXRjaGVkID0gX3Byb3BzLnN3aXRjaGVkLFxuICAgICAgICAgIHN3aXRjaEVsZW1lbnQgPSBfcHJvcHMuc3dpdGNoRWxlbWVudCxcbiAgICAgICAgICB0aHVtYlN0eWxlID0gX3Byb3BzLnRodW1iU3R5bGUsXG4gICAgICAgICAgdHJhY2tTdHlsZSA9IF9wcm9wcy50cmFja1N0eWxlLFxuICAgICAgICAgIG90aGVyID0gKDAsIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMuZGVmYXVsdCkoX3Byb3BzLCBbJ25hbWUnLCAndmFsdWUnLCAnaWNvblN0eWxlJywgJ2lucHV0U3R5bGUnLCAnaW5wdXRUeXBlJywgJ2xhYmVsJywgJ2xhYmVsU3R5bGUnLCAnbGFiZWxQb3NpdGlvbicsICdvblN3aXRjaCcsICdvbkJsdXInLCAnb25Gb2N1cycsICdvbk1vdXNlVXAnLCAnb25Nb3VzZURvd24nLCAnb25Nb3VzZUxlYXZlJywgJ29uVG91Y2hTdGFydCcsICdvblRvdWNoRW5kJywgJ29uUGFyZW50U2hvdWxkVXBkYXRlJywgJ2Rpc2FibGVkJywgJ2Rpc2FibGVUb3VjaFJpcHBsZScsICdkaXNhYmxlRm9jdXNSaXBwbGUnLCAnY2xhc3NOYW1lJywgJ3JpcHBsZUNvbG9yJywgJ3JpcHBsZVN0eWxlJywgJ3N0eWxlJywgJ3N3aXRjaGVkJywgJ3N3aXRjaEVsZW1lbnQnLCAndGh1bWJTdHlsZScsICd0cmFja1N0eWxlJ10pO1xuICAgICAgdmFyIHByZXBhcmVTdHlsZXMgPSB0aGlzLmNvbnRleHQubXVpVGhlbWUucHJlcGFyZVN0eWxlcztcblxuICAgICAgdmFyIHN0eWxlcyA9IGdldFN0eWxlcyh0aGlzLnByb3BzLCB0aGlzLmNvbnRleHQpO1xuICAgICAgdmFyIHdyYXBTdHlsZXMgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLndyYXAsIGljb25TdHlsZSk7XG4gICAgICB2YXIgbWVyZ2VkUmlwcGxlU3R5bGUgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLnJpcHBsZSwgcmlwcGxlU3R5bGUpO1xuXG4gICAgICBpZiAodGh1bWJTdHlsZSkge1xuICAgICAgICB3cmFwU3R5bGVzLm1hcmdpbkxlZnQgLz0gMjtcbiAgICAgICAgd3JhcFN0eWxlcy5tYXJnaW5SaWdodCAvPSAyO1xuICAgICAgfVxuXG4gICAgICB2YXIgbGFiZWxFbGVtZW50ID0gbGFiZWwgJiYgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdsYWJlbCcsXG4gICAgICAgIHsgc3R5bGU6IHByZXBhcmVTdHlsZXMoKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5sYWJlbCwgbGFiZWxTdHlsZSkpIH0sXG4gICAgICAgIGxhYmVsXG4gICAgICApO1xuXG4gICAgICB2YXIgc2hvd1RvdWNoUmlwcGxlID0gIWRpc2FibGVkICYmICFkaXNhYmxlVG91Y2hSaXBwbGU7XG4gICAgICB2YXIgc2hvd0ZvY3VzUmlwcGxlID0gIWRpc2FibGVkICYmICFkaXNhYmxlRm9jdXNSaXBwbGU7XG5cbiAgICAgIHZhciB0b3VjaFJpcHBsZSA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Ub3VjaFJpcHBsZTIuZGVmYXVsdCwge1xuICAgICAgICByZWY6ICd0b3VjaFJpcHBsZScsXG4gICAgICAgIGtleTogJ3RvdWNoUmlwcGxlJyxcbiAgICAgICAgc3R5bGU6IG1lcmdlZFJpcHBsZVN0eWxlLFxuICAgICAgICBjb2xvcjogbWVyZ2VkUmlwcGxlU3R5bGUuY29sb3IsXG4gICAgICAgIG11aVRoZW1lOiB0aGlzLmNvbnRleHQubXVpVGhlbWUsXG4gICAgICAgIGNlbnRlclJpcHBsZTogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIHZhciBmb2N1c1JpcHBsZSA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Gb2N1c1JpcHBsZTIuZGVmYXVsdCwge1xuICAgICAgICBrZXk6ICdmb2N1c1JpcHBsZScsXG4gICAgICAgIGlubmVyU3R5bGU6IG1lcmdlZFJpcHBsZVN0eWxlLFxuICAgICAgICBjb2xvcjogbWVyZ2VkUmlwcGxlU3R5bGUuY29sb3IsXG4gICAgICAgIG11aVRoZW1lOiB0aGlzLmNvbnRleHQubXVpVGhlbWUsXG4gICAgICAgIHNob3c6IHRoaXMuc3RhdGUuaXNLZXlib2FyZEZvY3VzZWRcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgcmlwcGxlcyA9IFtzaG93VG91Y2hSaXBwbGUgPyB0b3VjaFJpcHBsZSA6IG51bGwsIHNob3dGb2N1c1JpcHBsZSA/IGZvY3VzUmlwcGxlIDogbnVsbF07XG5cbiAgICAgIHZhciBpbnB1dEVsZW1lbnQgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBvdGhlciwge1xuICAgICAgICByZWY6ICdjaGVja2JveCcsXG4gICAgICAgIHR5cGU6IGlucHV0VHlwZSxcbiAgICAgICAgc3R5bGU6IHByZXBhcmVTdHlsZXMoKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5pbnB1dCwgaW5wdXRTdHlsZSkpLFxuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgICAgb25CbHVyOiB0aGlzLmhhbmRsZUJsdXIsXG4gICAgICAgIG9uRm9jdXM6IHRoaXMuaGFuZGxlRm9jdXMsXG4gICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUNoYW5nZSxcbiAgICAgICAgb25Nb3VzZVVwOiBzaG93VG91Y2hSaXBwbGUgJiYgdGhpcy5oYW5kbGVNb3VzZVVwLFxuICAgICAgICBvbk1vdXNlRG93bjogc2hvd1RvdWNoUmlwcGxlICYmIHRoaXMuaGFuZGxlTW91c2VEb3duLFxuICAgICAgICBvbk1vdXNlTGVhdmU6IHNob3dUb3VjaFJpcHBsZSAmJiB0aGlzLmhhbmRsZU1vdXNlTGVhdmUsXG4gICAgICAgIG9uVG91Y2hTdGFydDogc2hvd1RvdWNoUmlwcGxlICYmIHRoaXMuaGFuZGxlVG91Y2hTdGFydCxcbiAgICAgICAgb25Ub3VjaEVuZDogc2hvd1RvdWNoUmlwcGxlICYmIHRoaXMuaGFuZGxlVG91Y2hFbmRcbiAgICAgIH0pKTtcblxuICAgICAgLy8gSWYgdG9nZ2xlIGNvbXBvbmVudCAoaW5kaWNhdGVkIGJ5IHdoZXRoZXIgdGhlIHN0eWxlIGluY2x1ZGVzIHRodW1iKSBtYW51YWxseSBsYXkgb3V0XG4gICAgICAvLyBlbGVtZW50cyBpbiBvcmRlciB0byBuZXN0IHJpcHBsZSBlbGVtZW50c1xuICAgICAgdmFyIHN3aXRjaE9yVGh1bWJFbGVtZW50ID0gIXRodW1iU3R5bGUgPyBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgc3R5bGU6IHByZXBhcmVTdHlsZXMod3JhcFN0eWxlcykgfSxcbiAgICAgICAgc3dpdGNoRWxlbWVudCxcbiAgICAgICAgcmlwcGxlc1xuICAgICAgKSA6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyBzdHlsZTogcHJlcGFyZVN0eWxlcyh3cmFwU3R5bGVzKSB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe30sIHRyYWNrU3R5bGUpKSB9KSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgX1BhcGVyMi5kZWZhdWx0LFxuICAgICAgICAgIHsgc3R5bGU6IHRodW1iU3R5bGUsIHpEZXB0aDogMSwgY2lyY2xlOiB0cnVlIH0sXG4gICAgICAgICAgJyAnLFxuICAgICAgICAgIHJpcHBsZXMsXG4gICAgICAgICAgJyAnXG4gICAgICAgIClcbiAgICAgICk7XG5cbiAgICAgIHZhciBlbGVtZW50c0luT3JkZXIgPSBsYWJlbFBvc2l0aW9uID09PSAncmlnaHQnID8gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IHN0eWxlOiBzdHlsZXMuY29udHJvbHMgfSxcbiAgICAgICAgc3dpdGNoT3JUaHVtYkVsZW1lbnQsXG4gICAgICAgIGxhYmVsRWxlbWVudFxuICAgICAgKSA6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyBzdHlsZTogc3R5bGVzLmNvbnRyb2xzIH0sXG4gICAgICAgIGxhYmVsRWxlbWVudCxcbiAgICAgICAgc3dpdGNoT3JUaHVtYkVsZW1lbnRcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgcmVmOiAncm9vdCcsIGNsYXNzTmFtZTogY2xhc3NOYW1lLCBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLnJvb3QsIHN0eWxlKSkgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0RXZlbnRMaXN0ZW5lcjIuZGVmYXVsdCwge1xuICAgICAgICAgIHRhcmdldDogJ3dpbmRvdycsXG4gICAgICAgICAgb25LZXlEb3duOiB0aGlzLmhhbmRsZUtleURvd24sXG4gICAgICAgICAgb25LZXlVcDogdGhpcy5oYW5kbGVLZXlVcFxuICAgICAgICB9KSxcbiAgICAgICAgaW5wdXRFbGVtZW50LFxuICAgICAgICBlbGVtZW50c0luT3JkZXJcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBFbmhhbmNlZFN3aXRjaDtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbkVuaGFuY2VkU3dpdGNoLmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5FbmhhbmNlZFN3aXRjaC5wcm9wVHlwZXMgPSAgZmFsc2UgPyB7XG4gIGNoZWNrZWQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgY2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgZGVmYXVsdENoZWNrZWQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgZGlzYWJsZUZvY3VzUmlwcGxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIGRpc2FibGVUb3VjaFJpcHBsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBkaXNhYmxlZDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBpY29uU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBpbnB1dFN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgaW5wdXRUeXBlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZy5pc1JlcXVpcmVkLFxuICBsYWJlbDogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICBsYWJlbFBvc2l0aW9uOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9uZU9mKFsnbGVmdCcsICdyaWdodCddKSxcbiAgbGFiZWxTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIG5hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBvbkJsdXI6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgb25Gb2N1czogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBvbk1vdXNlRG93bjogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBvbk1vdXNlTGVhdmU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgb25Nb3VzZVVwOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIG9uUGFyZW50U2hvdWxkVXBkYXRlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIG9uU3dpdGNoOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIG9uVG91Y2hFbmQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgb25Ub3VjaFN0YXJ0OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIHJpcHBsZUNvbG9yOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgcmlwcGxlU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIHN3aXRjaEVsZW1lbnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZWxlbWVudC5pc1JlcXVpcmVkLFxuICBzd2l0Y2hlZDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLmlzUmVxdWlyZWQsXG4gIHRodW1iU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICB0cmFja1N0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgdmFsdWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYW55XG59IDoge307XG5leHBvcnRzLmRlZmF1bHQgPSBFbmhhbmNlZFN3aXRjaDtcblxuLyoqKi8gfSksXG4vKiAxNTggKi8sXG4vKiAxNTkgKi8sXG4vKiAxNjAgKi8sXG4vKiAxNjEgKi8sXG4vKiAxNjIgKi8sXG4vKiAxNjMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3B1cmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblxudmFyIF9wdXJlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3B1cmUpO1xuXG52YXIgX1N2Z0ljb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblxudmFyIF9TdmdJY29uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N2Z0ljb24pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgTmF2aWdhdGlvbkFycm93RHJvcFJpZ2h0ID0gZnVuY3Rpb24gTmF2aWdhdGlvbkFycm93RHJvcFJpZ2h0KHByb3BzKSB7XG4gIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICBfU3ZnSWNvbjIuZGVmYXVsdCxcbiAgICBwcm9wcyxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgncGF0aCcsIHsgZDogJ005LjUsN2w1LDVsLTUsNVY3eicgfSlcbiAgKTtcbn07XG5cbk5hdmlnYXRpb25BcnJvd0Ryb3BSaWdodCA9ICgwLCBfcHVyZTIuZGVmYXVsdCkoTmF2aWdhdGlvbkFycm93RHJvcFJpZ2h0KTtcbk5hdmlnYXRpb25BcnJvd0Ryb3BSaWdodC5kaXNwbGF5TmFtZSA9ICdOYXZpZ2F0aW9uQXJyb3dEcm9wUmlnaHQnO1xuTmF2aWdhdGlvbkFycm93RHJvcFJpZ2h0Lm11aU5hbWUgPSAnU3ZnSWNvbic7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IE5hdmlnYXRpb25BcnJvd0Ryb3BSaWdodDtcblxuLyoqKi8gfSksXG4vKiAxNjQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3B1cmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblxudmFyIF9wdXJlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3B1cmUpO1xuXG52YXIgX1N2Z0ljb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblxudmFyIF9TdmdJY29uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N2Z0ljb24pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgTmF2aWdhdGlvbkFycm93RHJvcERvd24gPSBmdW5jdGlvbiBOYXZpZ2F0aW9uQXJyb3dEcm9wRG93bihwcm9wcykge1xuICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgX1N2Z0ljb24yLmRlZmF1bHQsXG4gICAgcHJvcHMsXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3BhdGgnLCB7IGQ6ICdNNyAxMGw1IDUgNS01eicgfSlcbiAgKTtcbn07XG5OYXZpZ2F0aW9uQXJyb3dEcm9wRG93biA9ICgwLCBfcHVyZTIuZGVmYXVsdCkoTmF2aWdhdGlvbkFycm93RHJvcERvd24pO1xuTmF2aWdhdGlvbkFycm93RHJvcERvd24uZGlzcGxheU5hbWUgPSAnTmF2aWdhdGlvbkFycm93RHJvcERvd24nO1xuTmF2aWdhdGlvbkFycm93RHJvcERvd24ubXVpTmFtZSA9ICdTdmdJY29uJztcblxuZXhwb3J0cy5kZWZhdWx0ID0gTmF2aWdhdGlvbkFycm93RHJvcERvd247XG5cbi8qKiovIH0pLFxuLyogMTY1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wdXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cbnZhciBfcHVyZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wdXJlKTtcblxudmFyIF9TdmdJY29uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cbnZhciBfU3ZnSWNvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TdmdJY29uKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIE5hdmlnYXRpb25NZW51ID0gZnVuY3Rpb24gTmF2aWdhdGlvbk1lbnUocHJvcHMpIHtcbiAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgIF9TdmdJY29uMi5kZWZhdWx0LFxuICAgIHByb3BzLFxuICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdwYXRoJywgeyBkOiAnTTMgMThoMTh2LTJIM3Yyem0wLTVoMTh2LTJIM3Yyem0wLTd2MmgxOFY2SDN6JyB9KVxuICApO1xufTtcbk5hdmlnYXRpb25NZW51ID0gKDAsIF9wdXJlMi5kZWZhdWx0KShOYXZpZ2F0aW9uTWVudSk7XG5OYXZpZ2F0aW9uTWVudS5kaXNwbGF5TmFtZSA9ICdOYXZpZ2F0aW9uTWVudSc7XG5OYXZpZ2F0aW9uTWVudS5tdWlOYW1lID0gJ1N2Z0ljb24nO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBOYXZpZ2F0aW9uTWVudTtcblxuLyoqKi8gfSksXG4vKiAxNjYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3B1cmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblxudmFyIF9wdXJlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3B1cmUpO1xuXG52YXIgX1N2Z0ljb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblxudmFyIF9TdmdJY29uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N2Z0ljb24pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgTmF2aWdhdGlvbk1vcmVWZXJ0ID0gZnVuY3Rpb24gTmF2aWdhdGlvbk1vcmVWZXJ0KHByb3BzKSB7XG4gIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICBfU3ZnSWNvbjIuZGVmYXVsdCxcbiAgICBwcm9wcyxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgncGF0aCcsIHsgZDogJ00xMiA4YzEuMSAwIDItLjkgMi0ycy0uOS0yLTItMi0yIC45LTIgMiAuOSAyIDIgMnptMCAyYy0xLjEgMC0yIC45LTIgMnMuOSAyIDIgMiAyLS45IDItMi0uOS0yLTItMnptMCA2Yy0xLjEgMC0yIC45LTIgMnMuOSAyIDIgMiAyLS45IDItMi0uOS0yLTItMnonIH0pXG4gICk7XG59O1xuTmF2aWdhdGlvbk1vcmVWZXJ0ID0gKDAsIF9wdXJlMi5kZWZhdWx0KShOYXZpZ2F0aW9uTW9yZVZlcnQpO1xuTmF2aWdhdGlvbk1vcmVWZXJ0LmRpc3BsYXlOYW1lID0gJ05hdmlnYXRpb25Nb3JlVmVydCc7XG5OYXZpZ2F0aW9uTW9yZVZlcnQubXVpTmFtZSA9ICdTdmdJY29uJztcblxuZXhwb3J0cy5kZWZhdWx0ID0gTmF2aWdhdGlvbk1vcmVWZXJ0O1xuXG4vKioqLyB9KSxcbi8qIDE2NyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHVyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXG52YXIgX3B1cmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHVyZSk7XG5cbnZhciBfU3ZnSWNvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXG52YXIgX1N2Z0ljb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3ZnSWNvbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBUb2dnbGVDaGVja0JveE91dGxpbmVCbGFuayA9IGZ1bmN0aW9uIFRvZ2dsZUNoZWNrQm94T3V0bGluZUJsYW5rKHByb3BzKSB7XG4gIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICBfU3ZnSWNvbjIuZGVmYXVsdCxcbiAgICBwcm9wcyxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgncGF0aCcsIHsgZDogJ00xOSA1djE0SDVWNWgxNG0wLTJINWMtMS4xIDAtMiAuOS0yIDJ2MTRjMCAxLjEuOSAyIDIgMmgxNGMxLjEgMCAyLS45IDItMlY1YzAtMS4xLS45LTItMi0yeicgfSlcbiAgKTtcbn07XG5Ub2dnbGVDaGVja0JveE91dGxpbmVCbGFuayA9ICgwLCBfcHVyZTIuZGVmYXVsdCkoVG9nZ2xlQ2hlY2tCb3hPdXRsaW5lQmxhbmspO1xuVG9nZ2xlQ2hlY2tCb3hPdXRsaW5lQmxhbmsuZGlzcGxheU5hbWUgPSAnVG9nZ2xlQ2hlY2tCb3hPdXRsaW5lQmxhbmsnO1xuVG9nZ2xlQ2hlY2tCb3hPdXRsaW5lQmxhbmsubXVpTmFtZSA9ICdTdmdJY29uJztcblxuZXhwb3J0cy5kZWZhdWx0ID0gVG9nZ2xlQ2hlY2tCb3hPdXRsaW5lQmxhbms7XG5cbi8qKiovIH0pLFxuLyogMTY4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wdXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cbnZhciBfcHVyZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wdXJlKTtcblxudmFyIF9TdmdJY29uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cbnZhciBfU3ZnSWNvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TdmdJY29uKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIFRvZ2dsZUNoZWNrQm94ID0gZnVuY3Rpb24gVG9nZ2xlQ2hlY2tCb3gocHJvcHMpIHtcbiAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgIF9TdmdJY29uMi5kZWZhdWx0LFxuICAgIHByb3BzLFxuICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdwYXRoJywgeyBkOiAnTTE5IDNINWMtMS4xMSAwLTIgLjktMiAydjE0YzAgMS4xLjg5IDIgMiAyaDE0YzEuMTEgMCAyLS45IDItMlY1YzAtMS4xLS44OS0yLTItMnptLTkgMTRsLTUtNSAxLjQxLTEuNDFMMTAgMTQuMTdsNy41OS03LjU5TDE5IDhsLTkgOXonIH0pXG4gICk7XG59O1xuVG9nZ2xlQ2hlY2tCb3ggPSAoMCwgX3B1cmUyLmRlZmF1bHQpKFRvZ2dsZUNoZWNrQm94KTtcblRvZ2dsZUNoZWNrQm94LmRpc3BsYXlOYW1lID0gJ1RvZ2dsZUNoZWNrQm94JztcblRvZ2dsZUNoZWNrQm94Lm11aU5hbWUgPSAnU3ZnSWNvbic7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFRvZ2dsZUNoZWNrQm94O1xuXG4vKioqLyB9KSxcbi8qIDE2OSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5MQVJHRSA9IGV4cG9ydHMuTUVESVVNID0gZXhwb3J0cy5TTUFMTCA9IHVuZGVmaW5lZDtcblxudmFyIF9leHRlbmRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cbnZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7XG5cbnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblxudmFyIF9pbmhlcml0czIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXG52YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IHdpdGhXaWR0aDtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0RXZlbnRMaXN0ZW5lciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXG52YXIgX3JlYWN0RXZlbnRMaXN0ZW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdEV2ZW50TGlzdGVuZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgU01BTEwgPSBleHBvcnRzLlNNQUxMID0gMTtcbnZhciBNRURJVU0gPSBleHBvcnRzLk1FRElVTSA9IDI7XG52YXIgTEFSR0UgPSBleHBvcnRzLkxBUkdFID0gMztcblxuZnVuY3Rpb24gd2l0aFdpZHRoKCkge1xuICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gIHZhciBfb3B0aW9ucyRsYXJnZVdpZHRoID0gb3B0aW9ucy5sYXJnZVdpZHRoLFxuICAgICAgbGFyZ2VXaWR0aCA9IF9vcHRpb25zJGxhcmdlV2lkdGggPT09IHVuZGVmaW5lZCA/IDk5MiA6IF9vcHRpb25zJGxhcmdlV2lkdGgsXG4gICAgICBfb3B0aW9ucyRtZWRpdW1XaWR0aCA9IG9wdGlvbnMubWVkaXVtV2lkdGgsXG4gICAgICBtZWRpdW1XaWR0aCA9IF9vcHRpb25zJG1lZGl1bVdpZHRoID09PSB1bmRlZmluZWQgPyA3NjggOiBfb3B0aW9ucyRtZWRpdW1XaWR0aCxcbiAgICAgIF9vcHRpb25zJHJlc2l6ZUludGVydiA9IG9wdGlvbnMucmVzaXplSW50ZXJ2YWwsXG4gICAgICByZXNpemVJbnRlcnZhbCA9IF9vcHRpb25zJHJlc2l6ZUludGVydiA9PT0gdW5kZWZpbmVkID8gMTY2IDogX29wdGlvbnMkcmVzaXplSW50ZXJ2O1xuXG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChNeUNvbXBvbmVudCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAgICAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoV2l0aFdpZHRoLCBfQ29tcG9uZW50KTtcblxuICAgICAgZnVuY3Rpb24gV2l0aFdpZHRoKCkge1xuICAgICAgICB2YXIgX3JlZjtcblxuICAgICAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIFdpdGhXaWR0aCk7XG5cbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChfcmVmID0gV2l0aFdpZHRoLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShXaXRoV2lkdGgpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICB3aWR0aDogbnVsbFxuICAgICAgICB9LCBfdGhpcy5oYW5kbGVSZXNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzLmRlZmVyVGltZXIpO1xuICAgICAgICAgIF90aGlzLmRlZmVyVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnVwZGF0ZVdpZHRoKCk7XG4gICAgICAgICAgfSwgcmVzaXplSW50ZXJ2YWwpO1xuICAgICAgICB9LCBfdGVtcCksICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkoX3RoaXMsIF9yZXQpO1xuICAgICAgfVxuXG4gICAgICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShXaXRoV2lkdGgsIFt7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICAgIHRoaXMudXBkYXRlV2lkdGgoKTtcbiAgICAgICAgfVxuICAgICAgfSwge1xuICAgICAgICBrZXk6ICdjb21wb25lbnRXaWxsVW5tb3VudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5kZWZlclRpbWVyKTtcbiAgICAgICAgfVxuICAgICAgfSwge1xuICAgICAgICBrZXk6ICd1cGRhdGVXaWR0aCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVXaWR0aCgpIHtcbiAgICAgICAgICB2YXIgaW5uZXJXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICAgIHZhciB3aWR0aCA9IHZvaWQgMDtcblxuICAgICAgICAgIGlmIChpbm5lcldpZHRoID49IGxhcmdlV2lkdGgpIHtcbiAgICAgICAgICAgIHdpZHRoID0gTEFSR0U7XG4gICAgICAgICAgfSBlbHNlIGlmIChpbm5lcldpZHRoID49IG1lZGl1bVdpZHRoKSB7XG4gICAgICAgICAgICB3aWR0aCA9IE1FRElVTTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gaW5uZXJXaWR0aCA8IDc2OFxuICAgICAgICAgICAgd2lkdGggPSBTTUFMTDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAod2lkdGggIT09IHRoaXMuc3RhdGUud2lkdGgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICB3aWR0aDogd2lkdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuc3RhdGUud2lkdGg7XG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBXaGVuIHJlbmRlcmluZyB0aGUgY29tcG9uZW50IG9uIHRoZSBzZXJ2ZXIsXG4gICAgICAgICAgICogd2UgaGF2ZSBubyBpZGVhIGFib3V0IHRoZSBzY3JlZW4gd2lkdGguXG4gICAgICAgICAgICogSW4gb3JkZXIgdG8gcHJldmVudCBibGlua3MgYW5kIGhlbHAgdGhlIHJlY29uY2lsaWF0aW9uXG4gICAgICAgICAgICogd2UgYXJlIG5vdCByZW5kZXJpbmcgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEEgYmV0dGVyIGFsdGVybmF0aXZlIHdvdWxkIGJlIHRvIHNlbmQgY2xpZW50IGhpbnRzLlxuICAgICAgICAgICAqIEJ1dCB0aGUgYnJvd3NlciBzdXBwb3J0IG9mIHRoaXMgQVBJIGlzIGxvdzpcbiAgICAgICAgICAgKiBodHRwOi8vY2FuaXVzZS5jb20vI3NlYXJjaD1jbGllbnQlMjBoaW50XG4gICAgICAgICAgICovXG4gICAgICAgICAgaWYgKHdpZHRoID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBfcmVhY3RFdmVudExpc3RlbmVyMi5kZWZhdWx0LFxuICAgICAgICAgICAgeyB0YXJnZXQ6ICd3aW5kb3cnLCBvblJlc2l6ZTogdGhpcy5oYW5kbGVSZXNpemUgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KE15Q29tcG9uZW50LCAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHtcbiAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoXG4gICAgICAgICAgICB9LCB0aGlzLnByb3BzKSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XSk7XG4gICAgICByZXR1cm4gV2l0aFdpZHRoO1xuICAgIH0oX3JlYWN0LkNvbXBvbmVudCk7XG4gIH07XG59XG5cbi8qKiovIH0pLFxuLyogMTcwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciBpc2FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzEpXG5cbi8qKlxuICogRXhwb3NlIGBwYXRoVG9SZWdleHBgLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IHBhdGhUb1JlZ2V4cFxubW9kdWxlLmV4cG9ydHMucGFyc2UgPSBwYXJzZVxubW9kdWxlLmV4cG9ydHMuY29tcGlsZSA9IGNvbXBpbGVcbm1vZHVsZS5leHBvcnRzLnRva2Vuc1RvRnVuY3Rpb24gPSB0b2tlbnNUb0Z1bmN0aW9uXG5tb2R1bGUuZXhwb3J0cy50b2tlbnNUb1JlZ0V4cCA9IHRva2Vuc1RvUmVnRXhwXG5cbi8qKlxuICogVGhlIG1haW4gcGF0aCBtYXRjaGluZyByZWdleHAgdXRpbGl0eS5cbiAqXG4gKiBAdHlwZSB7UmVnRXhwfVxuICovXG52YXIgUEFUSF9SRUdFWFAgPSBuZXcgUmVnRXhwKFtcbiAgLy8gTWF0Y2ggZXNjYXBlZCBjaGFyYWN0ZXJzIHRoYXQgd291bGQgb3RoZXJ3aXNlIGFwcGVhciBpbiBmdXR1cmUgbWF0Y2hlcy5cbiAgLy8gVGhpcyBhbGxvd3MgdGhlIHVzZXIgdG8gZXNjYXBlIHNwZWNpYWwgY2hhcmFjdGVycyB0aGF0IHdvbid0IHRyYW5zZm9ybS5cbiAgJyhcXFxcXFxcXC4pJyxcbiAgLy8gTWF0Y2ggRXhwcmVzcy1zdHlsZSBwYXJhbWV0ZXJzIGFuZCB1bi1uYW1lZCBwYXJhbWV0ZXJzIHdpdGggYSBwcmVmaXhcbiAgLy8gYW5kIG9wdGlvbmFsIHN1ZmZpeGVzLiBNYXRjaGVzIGFwcGVhciBhczpcbiAgLy9cbiAgLy8gXCIvOnRlc3QoXFxcXGQrKT9cIiA9PiBbXCIvXCIsIFwidGVzdFwiLCBcIlxcZCtcIiwgdW5kZWZpbmVkLCBcIj9cIiwgdW5kZWZpbmVkXVxuICAvLyBcIi9yb3V0ZShcXFxcZCspXCIgID0+IFt1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBcIlxcZCtcIiwgdW5kZWZpbmVkLCB1bmRlZmluZWRdXG4gIC8vIFwiLypcIiAgICAgICAgICAgID0+IFtcIi9cIiwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBcIipcIl1cbiAgJyhbXFxcXC8uXSk/KD86KD86XFxcXDooXFxcXHcrKSg/OlxcXFwoKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKCldKSspXFxcXCkpP3xcXFxcKCgoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpXSkrKVxcXFwpKShbKyo/XSk/fChcXFxcKikpJ1xuXS5qb2luKCd8JyksICdnJylcblxuLyoqXG4gKiBQYXJzZSBhIHN0cmluZyBmb3IgdGhlIHJhdyB0b2tlbnMuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSAgc3RyXG4gKiBAcGFyYW0gIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAcmV0dXJuIHshQXJyYXl9XG4gKi9cbmZ1bmN0aW9uIHBhcnNlIChzdHIsIG9wdGlvbnMpIHtcbiAgdmFyIHRva2VucyA9IFtdXG4gIHZhciBrZXkgPSAwXG4gIHZhciBpbmRleCA9IDBcbiAgdmFyIHBhdGggPSAnJ1xuICB2YXIgZGVmYXVsdERlbGltaXRlciA9IG9wdGlvbnMgJiYgb3B0aW9ucy5kZWxpbWl0ZXIgfHwgJy8nXG4gIHZhciByZXNcblxuICB3aGlsZSAoKHJlcyA9IFBBVEhfUkVHRVhQLmV4ZWMoc3RyKSkgIT0gbnVsbCkge1xuICAgIHZhciBtID0gcmVzWzBdXG4gICAgdmFyIGVzY2FwZWQgPSByZXNbMV1cbiAgICB2YXIgb2Zmc2V0ID0gcmVzLmluZGV4XG4gICAgcGF0aCArPSBzdHIuc2xpY2UoaW5kZXgsIG9mZnNldClcbiAgICBpbmRleCA9IG9mZnNldCArIG0ubGVuZ3RoXG5cbiAgICAvLyBJZ25vcmUgYWxyZWFkeSBlc2NhcGVkIHNlcXVlbmNlcy5cbiAgICBpZiAoZXNjYXBlZCkge1xuICAgICAgcGF0aCArPSBlc2NhcGVkWzFdXG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIHZhciBuZXh0ID0gc3RyW2luZGV4XVxuICAgIHZhciBwcmVmaXggPSByZXNbMl1cbiAgICB2YXIgbmFtZSA9IHJlc1szXVxuICAgIHZhciBjYXB0dXJlID0gcmVzWzRdXG4gICAgdmFyIGdyb3VwID0gcmVzWzVdXG4gICAgdmFyIG1vZGlmaWVyID0gcmVzWzZdXG4gICAgdmFyIGFzdGVyaXNrID0gcmVzWzddXG5cbiAgICAvLyBQdXNoIHRoZSBjdXJyZW50IHBhdGggb250byB0aGUgdG9rZW5zLlxuICAgIGlmIChwYXRoKSB7XG4gICAgICB0b2tlbnMucHVzaChwYXRoKVxuICAgICAgcGF0aCA9ICcnXG4gICAgfVxuXG4gICAgdmFyIHBhcnRpYWwgPSBwcmVmaXggIT0gbnVsbCAmJiBuZXh0ICE9IG51bGwgJiYgbmV4dCAhPT0gcHJlZml4XG4gICAgdmFyIHJlcGVhdCA9IG1vZGlmaWVyID09PSAnKycgfHwgbW9kaWZpZXIgPT09ICcqJ1xuICAgIHZhciBvcHRpb25hbCA9IG1vZGlmaWVyID09PSAnPycgfHwgbW9kaWZpZXIgPT09ICcqJ1xuICAgIHZhciBkZWxpbWl0ZXIgPSByZXNbMl0gfHwgZGVmYXVsdERlbGltaXRlclxuICAgIHZhciBwYXR0ZXJuID0gY2FwdHVyZSB8fCBncm91cFxuXG4gICAgdG9rZW5zLnB1c2goe1xuICAgICAgbmFtZTogbmFtZSB8fCBrZXkrKyxcbiAgICAgIHByZWZpeDogcHJlZml4IHx8ICcnLFxuICAgICAgZGVsaW1pdGVyOiBkZWxpbWl0ZXIsXG4gICAgICBvcHRpb25hbDogb3B0aW9uYWwsXG4gICAgICByZXBlYXQ6IHJlcGVhdCxcbiAgICAgIHBhcnRpYWw6IHBhcnRpYWwsXG4gICAgICBhc3RlcmlzazogISFhc3RlcmlzayxcbiAgICAgIHBhdHRlcm46IHBhdHRlcm4gPyBlc2NhcGVHcm91cChwYXR0ZXJuKSA6IChhc3RlcmlzayA/ICcuKicgOiAnW14nICsgZXNjYXBlU3RyaW5nKGRlbGltaXRlcikgKyAnXSs/JylcbiAgICB9KVxuICB9XG5cbiAgLy8gTWF0Y2ggYW55IGNoYXJhY3RlcnMgc3RpbGwgcmVtYWluaW5nLlxuICBpZiAoaW5kZXggPCBzdHIubGVuZ3RoKSB7XG4gICAgcGF0aCArPSBzdHIuc3Vic3RyKGluZGV4KVxuICB9XG5cbiAgLy8gSWYgdGhlIHBhdGggZXhpc3RzLCBwdXNoIGl0IG9udG8gdGhlIGVuZC5cbiAgaWYgKHBhdGgpIHtcbiAgICB0b2tlbnMucHVzaChwYXRoKVxuICB9XG5cbiAgcmV0dXJuIHRva2Vuc1xufVxuXG4vKipcbiAqIENvbXBpbGUgYSBzdHJpbmcgdG8gYSB0ZW1wbGF0ZSBmdW5jdGlvbiBmb3IgdGhlIHBhdGguXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSAgICAgICAgICAgICBzdHJcbiAqIEBwYXJhbSAge09iamVjdD19ICAgICAgICAgICAgb3B0aW9uc1xuICogQHJldHVybiB7IWZ1bmN0aW9uKE9iamVjdD0sIE9iamVjdD0pfVxuICovXG5mdW5jdGlvbiBjb21waWxlIChzdHIsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIHRva2Vuc1RvRnVuY3Rpb24ocGFyc2Uoc3RyLCBvcHRpb25zKSlcbn1cblxuLyoqXG4gKiBQcmV0dGllciBlbmNvZGluZyBvZiBVUkkgcGF0aCBzZWdtZW50cy5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGVuY29kZVVSSUNvbXBvbmVudFByZXR0eSAoc3RyKSB7XG4gIHJldHVybiBlbmNvZGVVUkkoc3RyKS5yZXBsYWNlKC9bXFwvPyNdL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgcmV0dXJuICclJyArIGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKVxuICB9KVxufVxuXG4vKipcbiAqIEVuY29kZSB0aGUgYXN0ZXJpc2sgcGFyYW1ldGVyLiBTaW1pbGFyIHRvIGBwcmV0dHlgLCBidXQgYWxsb3dzIHNsYXNoZXMuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBlbmNvZGVBc3RlcmlzayAoc3RyKSB7XG4gIHJldHVybiBlbmNvZGVVUkkoc3RyKS5yZXBsYWNlKC9bPyNdL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgcmV0dXJuICclJyArIGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKVxuICB9KVxufVxuXG4vKipcbiAqIEV4cG9zZSBhIG1ldGhvZCBmb3IgdHJhbnNmb3JtaW5nIHRva2VucyBpbnRvIHRoZSBwYXRoIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiB0b2tlbnNUb0Z1bmN0aW9uICh0b2tlbnMpIHtcbiAgLy8gQ29tcGlsZSBhbGwgdGhlIHRva2VucyBpbnRvIHJlZ2V4cHMuXG4gIHZhciBtYXRjaGVzID0gbmV3IEFycmF5KHRva2Vucy5sZW5ndGgpXG5cbiAgLy8gQ29tcGlsZSBhbGwgdGhlIHBhdHRlcm5zIGJlZm9yZSBjb21waWxhdGlvbi5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAodHlwZW9mIHRva2Vuc1tpXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIG1hdGNoZXNbaV0gPSBuZXcgUmVnRXhwKCdeKD86JyArIHRva2Vuc1tpXS5wYXR0ZXJuICsgJykkJylcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKG9iaiwgb3B0cykge1xuICAgIHZhciBwYXRoID0gJydcbiAgICB2YXIgZGF0YSA9IG9iaiB8fCB7fVxuICAgIHZhciBvcHRpb25zID0gb3B0cyB8fCB7fVxuICAgIHZhciBlbmNvZGUgPSBvcHRpb25zLnByZXR0eSA/IGVuY29kZVVSSUNvbXBvbmVudFByZXR0eSA6IGVuY29kZVVSSUNvbXBvbmVudFxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB0b2tlbiA9IHRva2Vuc1tpXVxuXG4gICAgICBpZiAodHlwZW9mIHRva2VuID09PSAnc3RyaW5nJykge1xuICAgICAgICBwYXRoICs9IHRva2VuXG5cbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgdmFyIHZhbHVlID0gZGF0YVt0b2tlbi5uYW1lXVxuICAgICAgdmFyIHNlZ21lbnRcblxuICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgaWYgKHRva2VuLm9wdGlvbmFsKSB7XG4gICAgICAgICAgLy8gUHJlcGVuZCBwYXJ0aWFsIHNlZ21lbnQgcHJlZml4ZXMuXG4gICAgICAgICAgaWYgKHRva2VuLnBhcnRpYWwpIHtcbiAgICAgICAgICAgIHBhdGggKz0gdG9rZW4ucHJlZml4XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBcIicgKyB0b2tlbi5uYW1lICsgJ1wiIHRvIGJlIGRlZmluZWQnKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChpc2FycmF5KHZhbHVlKSkge1xuICAgICAgICBpZiAoIXRva2VuLnJlcGVhdCkge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIFwiJyArIHRva2VuLm5hbWUgKyAnXCIgdG8gbm90IHJlcGVhdCwgYnV0IHJlY2VpdmVkIGAnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpICsgJ2AnKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGlmICh0b2tlbi5vcHRpb25hbCkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgXCInICsgdG9rZW4ubmFtZSArICdcIiB0byBub3QgYmUgZW1wdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmFsdWUubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBzZWdtZW50ID0gZW5jb2RlKHZhbHVlW2pdKVxuXG4gICAgICAgICAgaWYgKCFtYXRjaGVzW2ldLnRlc3Qoc2VnbWVudCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGFsbCBcIicgKyB0b2tlbi5uYW1lICsgJ1wiIHRvIG1hdGNoIFwiJyArIHRva2VuLnBhdHRlcm4gKyAnXCIsIGJ1dCByZWNlaXZlZCBgJyArIEpTT04uc3RyaW5naWZ5KHNlZ21lbnQpICsgJ2AnKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHBhdGggKz0gKGogPT09IDAgPyB0b2tlbi5wcmVmaXggOiB0b2tlbi5kZWxpbWl0ZXIpICsgc2VnbWVudFxuICAgICAgICB9XG5cbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgc2VnbWVudCA9IHRva2VuLmFzdGVyaXNrID8gZW5jb2RlQXN0ZXJpc2sodmFsdWUpIDogZW5jb2RlKHZhbHVlKVxuXG4gICAgICBpZiAoIW1hdGNoZXNbaV0udGVzdChzZWdtZW50KSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBcIicgKyB0b2tlbi5uYW1lICsgJ1wiIHRvIG1hdGNoIFwiJyArIHRva2VuLnBhdHRlcm4gKyAnXCIsIGJ1dCByZWNlaXZlZCBcIicgKyBzZWdtZW50ICsgJ1wiJylcbiAgICAgIH1cblxuICAgICAgcGF0aCArPSB0b2tlbi5wcmVmaXggKyBzZWdtZW50XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhdGhcbiAgfVxufVxuXG4vKipcbiAqIEVzY2FwZSBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBzdHJpbmcuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZXNjYXBlU3RyaW5nIChzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oWy4rKj89XiE6JHt9KClbXFxdfFxcL1xcXFxdKS9nLCAnXFxcXCQxJylcbn1cblxuLyoqXG4gKiBFc2NhcGUgdGhlIGNhcHR1cmluZyBncm91cCBieSBlc2NhcGluZyBzcGVjaWFsIGNoYXJhY3RlcnMgYW5kIG1lYW5pbmcuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSBncm91cFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBlc2NhcGVHcm91cCAoZ3JvdXApIHtcbiAgcmV0dXJuIGdyb3VwLnJlcGxhY2UoLyhbPSE6JFxcLygpXSkvZywgJ1xcXFwkMScpXG59XG5cbi8qKlxuICogQXR0YWNoIHRoZSBrZXlzIGFzIGEgcHJvcGVydHkgb2YgdGhlIHJlZ2V4cC5cbiAqXG4gKiBAcGFyYW0gIHshUmVnRXhwfSByZVxuICogQHBhcmFtICB7QXJyYXl9ICAga2V5c1xuICogQHJldHVybiB7IVJlZ0V4cH1cbiAqL1xuZnVuY3Rpb24gYXR0YWNoS2V5cyAocmUsIGtleXMpIHtcbiAgcmUua2V5cyA9IGtleXNcbiAgcmV0dXJuIHJlXG59XG5cbi8qKlxuICogR2V0IHRoZSBmbGFncyBmb3IgYSByZWdleHAgZnJvbSB0aGUgb3B0aW9ucy5cbiAqXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZmxhZ3MgKG9wdGlvbnMpIHtcbiAgcmV0dXJuIG9wdGlvbnMuc2Vuc2l0aXZlID8gJycgOiAnaSdcbn1cblxuLyoqXG4gKiBQdWxsIG91dCBrZXlzIGZyb20gYSByZWdleHAuXG4gKlxuICogQHBhcmFtICB7IVJlZ0V4cH0gcGF0aFxuICogQHBhcmFtICB7IUFycmF5fSAga2V5c1xuICogQHJldHVybiB7IVJlZ0V4cH1cbiAqL1xuZnVuY3Rpb24gcmVnZXhwVG9SZWdleHAgKHBhdGgsIGtleXMpIHtcbiAgLy8gVXNlIGEgbmVnYXRpdmUgbG9va2FoZWFkIHRvIG1hdGNoIG9ubHkgY2FwdHVyaW5nIGdyb3Vwcy5cbiAgdmFyIGdyb3VwcyA9IHBhdGguc291cmNlLm1hdGNoKC9cXCgoPyFcXD8pL2cpXG5cbiAgaWYgKGdyb3Vwcykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JvdXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBrZXlzLnB1c2goe1xuICAgICAgICBuYW1lOiBpLFxuICAgICAgICBwcmVmaXg6IG51bGwsXG4gICAgICAgIGRlbGltaXRlcjogbnVsbCxcbiAgICAgICAgb3B0aW9uYWw6IGZhbHNlLFxuICAgICAgICByZXBlYXQ6IGZhbHNlLFxuICAgICAgICBwYXJ0aWFsOiBmYWxzZSxcbiAgICAgICAgYXN0ZXJpc2s6IGZhbHNlLFxuICAgICAgICBwYXR0ZXJuOiBudWxsXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhdHRhY2hLZXlzKHBhdGgsIGtleXMpXG59XG5cbi8qKlxuICogVHJhbnNmb3JtIGFuIGFycmF5IGludG8gYSByZWdleHAuXG4gKlxuICogQHBhcmFtICB7IUFycmF5fSAgcGF0aFxuICogQHBhcmFtICB7QXJyYXl9ICAga2V5c1xuICogQHBhcmFtICB7IU9iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7IVJlZ0V4cH1cbiAqL1xuZnVuY3Rpb24gYXJyYXlUb1JlZ2V4cCAocGF0aCwga2V5cywgb3B0aW9ucykge1xuICB2YXIgcGFydHMgPSBbXVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xuICAgIHBhcnRzLnB1c2gocGF0aFRvUmVnZXhwKHBhdGhbaV0sIGtleXMsIG9wdGlvbnMpLnNvdXJjZSlcbiAgfVxuXG4gIHZhciByZWdleHAgPSBuZXcgUmVnRXhwKCcoPzonICsgcGFydHMuam9pbignfCcpICsgJyknLCBmbGFncyhvcHRpb25zKSlcblxuICByZXR1cm4gYXR0YWNoS2V5cyhyZWdleHAsIGtleXMpXG59XG5cbi8qKlxuICogQ3JlYXRlIGEgcGF0aCByZWdleHAgZnJvbSBzdHJpbmcgaW5wdXQuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSAgcGF0aFxuICogQHBhcmFtICB7IUFycmF5fSAga2V5c1xuICogQHBhcmFtICB7IU9iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7IVJlZ0V4cH1cbiAqL1xuZnVuY3Rpb24gc3RyaW5nVG9SZWdleHAgKHBhdGgsIGtleXMsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIHRva2Vuc1RvUmVnRXhwKHBhcnNlKHBhdGgsIG9wdGlvbnMpLCBrZXlzLCBvcHRpb25zKVxufVxuXG4vKipcbiAqIEV4cG9zZSBhIGZ1bmN0aW9uIGZvciB0YWtpbmcgdG9rZW5zIGFuZCByZXR1cm5pbmcgYSBSZWdFeHAuXG4gKlxuICogQHBhcmFtICB7IUFycmF5fSAgICAgICAgICB0b2tlbnNcbiAqIEBwYXJhbSAgeyhBcnJheXxPYmplY3QpPX0ga2V5c1xuICogQHBhcmFtICB7T2JqZWN0PX0gICAgICAgICBvcHRpb25zXG4gKiBAcmV0dXJuIHshUmVnRXhwfVxuICovXG5mdW5jdGlvbiB0b2tlbnNUb1JlZ0V4cCAodG9rZW5zLCBrZXlzLCBvcHRpb25zKSB7XG4gIGlmICghaXNhcnJheShrZXlzKSkge1xuICAgIG9wdGlvbnMgPSAvKiogQHR5cGUgeyFPYmplY3R9ICovIChrZXlzIHx8IG9wdGlvbnMpXG4gICAga2V5cyA9IFtdXG4gIH1cblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuXG4gIHZhciBzdHJpY3QgPSBvcHRpb25zLnN0cmljdFxuICB2YXIgZW5kID0gb3B0aW9ucy5lbmQgIT09IGZhbHNlXG4gIHZhciByb3V0ZSA9ICcnXG5cbiAgLy8gSXRlcmF0ZSBvdmVyIHRoZSB0b2tlbnMgYW5kIGNyZWF0ZSBvdXIgcmVnZXhwIHN0cmluZy5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgdG9rZW4gPSB0b2tlbnNbaV1cblxuICAgIGlmICh0eXBlb2YgdG9rZW4gPT09ICdzdHJpbmcnKSB7XG4gICAgICByb3V0ZSArPSBlc2NhcGVTdHJpbmcodG9rZW4pXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBwcmVmaXggPSBlc2NhcGVTdHJpbmcodG9rZW4ucHJlZml4KVxuICAgICAgdmFyIGNhcHR1cmUgPSAnKD86JyArIHRva2VuLnBhdHRlcm4gKyAnKSdcblxuICAgICAga2V5cy5wdXNoKHRva2VuKVxuXG4gICAgICBpZiAodG9rZW4ucmVwZWF0KSB7XG4gICAgICAgIGNhcHR1cmUgKz0gJyg/OicgKyBwcmVmaXggKyBjYXB0dXJlICsgJykqJ1xuICAgICAgfVxuXG4gICAgICBpZiAodG9rZW4ub3B0aW9uYWwpIHtcbiAgICAgICAgaWYgKCF0b2tlbi5wYXJ0aWFsKSB7XG4gICAgICAgICAgY2FwdHVyZSA9ICcoPzonICsgcHJlZml4ICsgJygnICsgY2FwdHVyZSArICcpKT8nXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FwdHVyZSA9IHByZWZpeCArICcoJyArIGNhcHR1cmUgKyAnKT8nXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhcHR1cmUgPSBwcmVmaXggKyAnKCcgKyBjYXB0dXJlICsgJyknXG4gICAgICB9XG5cbiAgICAgIHJvdXRlICs9IGNhcHR1cmVcbiAgICB9XG4gIH1cblxuICB2YXIgZGVsaW1pdGVyID0gZXNjYXBlU3RyaW5nKG9wdGlvbnMuZGVsaW1pdGVyIHx8ICcvJylcbiAgdmFyIGVuZHNXaXRoRGVsaW1pdGVyID0gcm91dGUuc2xpY2UoLWRlbGltaXRlci5sZW5ndGgpID09PSBkZWxpbWl0ZXJcblxuICAvLyBJbiBub24tc3RyaWN0IG1vZGUgd2UgYWxsb3cgYSBzbGFzaCBhdCB0aGUgZW5kIG9mIG1hdGNoLiBJZiB0aGUgcGF0aCB0b1xuICAvLyBtYXRjaCBhbHJlYWR5IGVuZHMgd2l0aCBhIHNsYXNoLCB3ZSByZW1vdmUgaXQgZm9yIGNvbnNpc3RlbmN5LiBUaGUgc2xhc2hcbiAgLy8gaXMgdmFsaWQgYXQgdGhlIGVuZCBvZiBhIHBhdGggbWF0Y2gsIG5vdCBpbiB0aGUgbWlkZGxlLiBUaGlzIGlzIGltcG9ydGFudFxuICAvLyBpbiBub24tZW5kaW5nIG1vZGUsIHdoZXJlIFwiL3Rlc3QvXCIgc2hvdWxkbid0IG1hdGNoIFwiL3Rlc3QvL3JvdXRlXCIuXG4gIGlmICghc3RyaWN0KSB7XG4gICAgcm91dGUgPSAoZW5kc1dpdGhEZWxpbWl0ZXIgPyByb3V0ZS5zbGljZSgwLCAtZGVsaW1pdGVyLmxlbmd0aCkgOiByb3V0ZSkgKyAnKD86JyArIGRlbGltaXRlciArICcoPz0kKSk/J1xuICB9XG5cbiAgaWYgKGVuZCkge1xuICAgIHJvdXRlICs9ICckJ1xuICB9IGVsc2Uge1xuICAgIC8vIEluIG5vbi1lbmRpbmcgbW9kZSwgd2UgbmVlZCB0aGUgY2FwdHVyaW5nIGdyb3VwcyB0byBtYXRjaCBhcyBtdWNoIGFzXG4gICAgLy8gcG9zc2libGUgYnkgdXNpbmcgYSBwb3NpdGl2ZSBsb29rYWhlYWQgdG8gdGhlIGVuZCBvciBuZXh0IHBhdGggc2VnbWVudC5cbiAgICByb3V0ZSArPSBzdHJpY3QgJiYgZW5kc1dpdGhEZWxpbWl0ZXIgPyAnJyA6ICcoPz0nICsgZGVsaW1pdGVyICsgJ3wkKSdcbiAgfVxuXG4gIHJldHVybiBhdHRhY2hLZXlzKG5ldyBSZWdFeHAoJ14nICsgcm91dGUsIGZsYWdzKG9wdGlvbnMpKSwga2V5cylcbn1cblxuLyoqXG4gKiBOb3JtYWxpemUgdGhlIGdpdmVuIHBhdGggc3RyaW5nLCByZXR1cm5pbmcgYSByZWd1bGFyIGV4cHJlc3Npb24uXG4gKlxuICogQW4gZW1wdHkgYXJyYXkgY2FuIGJlIHBhc3NlZCBpbiBmb3IgdGhlIGtleXMsIHdoaWNoIHdpbGwgaG9sZCB0aGVcbiAqIHBsYWNlaG9sZGVyIGtleSBkZXNjcmlwdGlvbnMuIEZvciBleGFtcGxlLCB1c2luZyBgL3VzZXIvOmlkYCwgYGtleXNgIHdpbGxcbiAqIGNvbnRhaW4gYFt7IG5hbWU6ICdpZCcsIGRlbGltaXRlcjogJy8nLCBvcHRpb25hbDogZmFsc2UsIHJlcGVhdDogZmFsc2UgfV1gLlxuICpcbiAqIEBwYXJhbSAgeyhzdHJpbmd8UmVnRXhwfEFycmF5KX0gcGF0aFxuICogQHBhcmFtICB7KEFycmF5fE9iamVjdCk9fSAgICAgICBrZXlzXG4gKiBAcGFyYW0gIHtPYmplY3Q9fSAgICAgICAgICAgICAgIG9wdGlvbnNcbiAqIEByZXR1cm4geyFSZWdFeHB9XG4gKi9cbmZ1bmN0aW9uIHBhdGhUb1JlZ2V4cCAocGF0aCwga2V5cywgb3B0aW9ucykge1xuICBpZiAoIWlzYXJyYXkoa2V5cykpIHtcbiAgICBvcHRpb25zID0gLyoqIEB0eXBlIHshT2JqZWN0fSAqLyAoa2V5cyB8fCBvcHRpb25zKVxuICAgIGtleXMgPSBbXVxuICB9XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cblxuICBpZiAocGF0aCBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgIHJldHVybiByZWdleHBUb1JlZ2V4cChwYXRoLCAvKiogQHR5cGUgeyFBcnJheX0gKi8gKGtleXMpKVxuICB9XG5cbiAgaWYgKGlzYXJyYXkocGF0aCkpIHtcbiAgICByZXR1cm4gYXJyYXlUb1JlZ2V4cCgvKiogQHR5cGUgeyFBcnJheX0gKi8gKHBhdGgpLCAvKiogQHR5cGUgeyFBcnJheX0gKi8gKGtleXMpLCBvcHRpb25zKVxuICB9XG5cbiAgcmV0dXJuIHN0cmluZ1RvUmVnZXhwKC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAocGF0aCksIC8qKiBAdHlwZSB7IUFycmF5fSAqLyAoa2V5cyksIG9wdGlvbnMpXG59XG5cblxuLyoqKi8gfSksXG4vKiAxNzEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcnIpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG5cbi8qKiovIH0pLFxuLyogMTcyICovLFxuLyogMTczICovLFxuLyogMTc0ICovLFxuLyogMTc1ICovLFxuLyogMTc2ICovLFxuLyogMTc3ICovLFxuLyogMTc4ICovLFxuLyogMTc5ICovLFxuLyogMTgwICovLFxuLyogMTgxICovLFxuLyogMTgyICovLFxuLyogMTgzICovLFxuLyogMTg0ICovLFxuLyogMTg1ICovLFxuLyogMTg2ICovLFxuLyogMTg3ICovLFxuLyogMTg4ICovLFxuLyogMTg5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3JlYWN0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9yZWFjdF9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3JlYWN0X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9wcm9wX3R5cGVzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9wcm9wX3R5cGVzX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcHJvcF90eXBlc19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaGlzdG9yeV9jcmVhdGVCcm93c2VySGlzdG9yeV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzUpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19oaXN0b3J5X2NyZWF0ZUJyb3dzZXJIaXN0b3J5X19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaGlzdG9yeV9jcmVhdGVCcm93c2VySGlzdG9yeV9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1JvdXRlcl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Myk7XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cblxuXG5cblxuXG5cbi8qKlxuICogVGhlIHB1YmxpYyBBUEkgZm9yIGEgPFJvdXRlcj4gdGhhdCB1c2VzIEhUTUw1IGhpc3RvcnkuXG4gKi9cblxudmFyIEJyb3dzZXJSb3V0ZXIgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoQnJvd3NlclJvdXRlciwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQnJvd3NlclJvdXRlcigpIHtcbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJyb3dzZXJSb3V0ZXIpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfUmVhY3QkQ29tcG9uZW50LmNhbGwuYXBwbHkoX1JlYWN0JENvbXBvbmVudCwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLmhpc3RvcnkgPSBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaGlzdG9yeV9jcmVhdGVCcm93c2VySGlzdG9yeV9fX2RlZmF1bHQoKShfdGhpcy5wcm9wcyksIF90ZW1wKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgQnJvd3NlclJvdXRlci5wcm90b3R5cGUuY29tcG9uZW50V2lsbE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCgpKCF0aGlzLnByb3BzLmhpc3RvcnksICc8QnJvd3NlclJvdXRlcj4gaWdub3JlcyB0aGUgaGlzdG9yeSBwcm9wLiBUbyB1c2UgYSBjdXN0b20gaGlzdG9yeSwgJyArICd1c2UgYGltcG9ydCB7IFJvdXRlciB9YCBpbnN0ZWFkIG9mIGBpbXBvcnQgeyBCcm93c2VyUm91dGVyIGFzIFJvdXRlciB9YC4nKTtcbiAgfTtcblxuICBCcm93c2VyUm91dGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgcmV0dXJuIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9yZWFjdF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fUm91dGVyX19bXCJhXCIgLyogZGVmYXVsdCAqL10sIHsgaGlzdG9yeTogdGhpcy5oaXN0b3J5LCBjaGlsZHJlbjogdGhpcy5wcm9wcy5jaGlsZHJlbiB9KTtcbiAgfTtcblxuICByZXR1cm4gQnJvd3NlclJvdXRlcjtcbn0oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3JlYWN0X19fZGVmYXVsdC5hLkNvbXBvbmVudCk7XG5cbkJyb3dzZXJSb3V0ZXIucHJvcFR5cGVzID0ge1xuICBiYXNlbmFtZTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuc3RyaW5nLFxuICBmb3JjZVJlZnJlc2g6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmJvb2wsXG4gIGdldFVzZXJDb25maXJtYXRpb246IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmZ1bmMsXG4gIGtleUxlbmd0aDogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEubnVtYmVyLFxuICBjaGlsZHJlbjogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEubm9kZVxufTtcblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKEJyb3dzZXJSb3V0ZXIpO1xuXG4vKioqLyB9KSxcbi8qIDE5MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9yZWFjdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcmVhY3RfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9yZWFjdF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcHJvcF90eXBlc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcHJvcF90eXBlc19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3Byb3BfdHlwZXNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2hpc3RvcnlfY3JlYXRlSGFzaEhpc3RvcnlfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTM2KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaGlzdG9yeV9jcmVhdGVIYXNoSGlzdG9yeV9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2hpc3RvcnlfY3JlYXRlSGFzaEhpc3RvcnlfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19Sb3V0ZXJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpO1xuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5cblxuXG5cblxuXG4vKipcbiAqIFRoZSBwdWJsaWMgQVBJIGZvciBhIDxSb3V0ZXI+IHRoYXQgdXNlcyB3aW5kb3cubG9jYXRpb24uaGFzaC5cbiAqL1xuXG52YXIgSGFzaFJvdXRlciA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhIYXNoUm91dGVyLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBIYXNoUm91dGVyKCkge1xuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSGFzaFJvdXRlcik7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9SZWFjdCRDb21wb25lbnQuY2FsbC5hcHBseShfUmVhY3QkQ29tcG9uZW50LCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuaGlzdG9yeSA9IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19oaXN0b3J5X2NyZWF0ZUhhc2hIaXN0b3J5X19fZGVmYXVsdCgpKF90aGlzLnByb3BzKSwgX3RlbXApLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7XG4gIH1cblxuICBIYXNoUm91dGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0KCkoIXRoaXMucHJvcHMuaGlzdG9yeSwgJzxIYXNoUm91dGVyPiBpZ25vcmVzIHRoZSBoaXN0b3J5IHByb3AuIFRvIHVzZSBhIGN1c3RvbSBoaXN0b3J5LCAnICsgJ3VzZSBgaW1wb3J0IHsgUm91dGVyIH1gIGluc3RlYWQgb2YgYGltcG9ydCB7IEhhc2hSb3V0ZXIgYXMgUm91dGVyIH1gLicpO1xuICB9O1xuXG4gIEhhc2hSb3V0ZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICByZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3JlYWN0X19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19Sb3V0ZXJfX1tcImFcIiAvKiBkZWZhdWx0ICovXSwgeyBoaXN0b3J5OiB0aGlzLmhpc3RvcnksIGNoaWxkcmVuOiB0aGlzLnByb3BzLmNoaWxkcmVuIH0pO1xuICB9O1xuXG4gIHJldHVybiBIYXNoUm91dGVyO1xufShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcmVhY3RfX19kZWZhdWx0LmEuQ29tcG9uZW50KTtcblxuSGFzaFJvdXRlci5wcm9wVHlwZXMgPSB7XG4gIGJhc2VuYW1lOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5zdHJpbmcsXG4gIGdldFVzZXJDb25maXJtYXRpb246IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmZ1bmMsXG4gIGhhc2hUeXBlOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vbmVPZihbJ2hhc2hiYW5nJywgJ25vc2xhc2gnLCAnc2xhc2gnXSksXG4gIGNoaWxkcmVuOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5ub2RlXG59O1xuXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAoSGFzaFJvdXRlcik7XG5cbi8qKiovIH0pLFxuLyogMTkxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9yb3V0ZXJfZXNfTWVtb3J5Um91dGVyX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5OSk7XG4vLyBXcml0dGVuIGluIHRoaXMgcm91bmQgYWJvdXQgd2F5IGZvciBiYWJlbC10cmFuc2Zvcm0taW1wb3J0c1xuXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19NZW1vcnlSb3V0ZXJfX1tcImFcIiAvKiBkZWZhdWx0ICovXSk7XG5cbi8qKiovIH0pLFxuLyogMTkyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19Sb3V0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19MaW5rX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk0KTtcbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKG9iaiwga2V5cykgeyB2YXIgdGFyZ2V0ID0ge307IGZvciAodmFyIGkgaW4gb2JqKSB7IGlmIChrZXlzLmluZGV4T2YoaSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgaSkpIGNvbnRpbnVlOyB0YXJnZXRbaV0gPSBvYmpbaV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5cblxuXG5cblxuLyoqXG4gKiBBIDxMaW5rPiB3cmFwcGVyIHRoYXQga25vd3MgaWYgaXQncyBcImFjdGl2ZVwiIG9yIG5vdC5cbiAqL1xudmFyIE5hdkxpbmsgPSBmdW5jdGlvbiBOYXZMaW5rKF9yZWYpIHtcbiAgdmFyIHRvID0gX3JlZi50byxcbiAgICAgIGV4YWN0ID0gX3JlZi5leGFjdCxcbiAgICAgIHN0cmljdCA9IF9yZWYuc3RyaWN0LFxuICAgICAgbG9jYXRpb24gPSBfcmVmLmxvY2F0aW9uLFxuICAgICAgYWN0aXZlQ2xhc3NOYW1lID0gX3JlZi5hY3RpdmVDbGFzc05hbWUsXG4gICAgICBjbGFzc05hbWUgPSBfcmVmLmNsYXNzTmFtZSxcbiAgICAgIGFjdGl2ZVN0eWxlID0gX3JlZi5hY3RpdmVTdHlsZSxcbiAgICAgIHN0eWxlID0gX3JlZi5zdHlsZSxcbiAgICAgIGdldElzQWN0aXZlID0gX3JlZi5pc0FjdGl2ZSxcbiAgICAgIGFyaWFDdXJyZW50ID0gX3JlZi5hcmlhQ3VycmVudCxcbiAgICAgIHJlc3QgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgWyd0bycsICdleGFjdCcsICdzdHJpY3QnLCAnbG9jYXRpb24nLCAnYWN0aXZlQ2xhc3NOYW1lJywgJ2NsYXNzTmFtZScsICdhY3RpdmVTdHlsZScsICdzdHlsZScsICdpc0FjdGl2ZScsICdhcmlhQ3VycmVudCddKTtcblxuICByZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19Sb3V0ZV9fW1wiYVwiIC8qIGRlZmF1bHQgKi9dLCB7XG4gICAgcGF0aDogKHR5cGVvZiB0byA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodG8pKSA9PT0gJ29iamVjdCcgPyB0by5wYXRobmFtZSA6IHRvLFxuICAgIGV4YWN0OiBleGFjdCxcbiAgICBzdHJpY3Q6IHN0cmljdCxcbiAgICBsb2NhdGlvbjogbG9jYXRpb24sXG4gICAgY2hpbGRyZW46IGZ1bmN0aW9uIGNoaWxkcmVuKF9yZWYyKSB7XG4gICAgICB2YXIgbG9jYXRpb24gPSBfcmVmMi5sb2NhdGlvbixcbiAgICAgICAgICBtYXRjaCA9IF9yZWYyLm1hdGNoO1xuXG4gICAgICB2YXIgaXNBY3RpdmUgPSAhIShnZXRJc0FjdGl2ZSA/IGdldElzQWN0aXZlKG1hdGNoLCBsb2NhdGlvbikgOiBtYXRjaCk7XG5cbiAgICAgIHJldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX0xpbmtfX1tcImFcIiAvKiBkZWZhdWx0ICovXSwgX2V4dGVuZHMoe1xuICAgICAgICB0bzogdG8sXG4gICAgICAgIGNsYXNzTmFtZTogaXNBY3RpdmUgPyBbY2xhc3NOYW1lLCBhY3RpdmVDbGFzc05hbWVdLmZpbHRlcihmdW5jdGlvbiAoaSkge1xuICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9KS5qb2luKCcgJykgOiBjbGFzc05hbWUsXG4gICAgICAgIHN0eWxlOiBpc0FjdGl2ZSA/IF9leHRlbmRzKHt9LCBzdHlsZSwgYWN0aXZlU3R5bGUpIDogc3R5bGUsXG4gICAgICAgICdhcmlhLWN1cnJlbnQnOiBpc0FjdGl2ZSAmJiBhcmlhQ3VycmVudFxuICAgICAgfSwgcmVzdCkpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5OYXZMaW5rLnByb3BUeXBlcyA9IHtcbiAgdG86IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fTGlua19fW1wiYVwiIC8qIGRlZmF1bHQgKi9dLnByb3BUeXBlcy50byxcbiAgZXhhY3Q6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmJvb2wsXG4gIHN0cmljdDogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuYm9vbCxcbiAgbG9jYXRpb246IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLm9iamVjdCxcbiAgYWN0aXZlQ2xhc3NOYW1lOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5zdHJpbmcsXG4gIGNsYXNzTmFtZTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuc3RyaW5nLFxuICBhY3RpdmVTdHlsZTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEub2JqZWN0LFxuICBzdHlsZTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEub2JqZWN0LFxuICBpc0FjdGl2ZTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuZnVuYyxcbiAgYXJpYUN1cnJlbnQ6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLm9uZU9mKFsncGFnZScsICdzdGVwJywgJ2xvY2F0aW9uJywgJ3RydWUnXSlcbn07XG5cbk5hdkxpbmsuZGVmYXVsdFByb3BzID0ge1xuICBhY3RpdmVDbGFzc05hbWU6ICdhY3RpdmUnLFxuICBhcmlhQ3VycmVudDogJ3RydWUnXG59O1xuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKE5hdkxpbmspO1xuXG4vKioqLyB9KSxcbi8qIDE5MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3Rfcm91dGVyX2VzX1Byb21wdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDApO1xuLy8gV3JpdHRlbiBpbiB0aGlzIHJvdW5kIGFib3V0IHdheSBmb3IgYmFiZWwtdHJhbnNmb3JtLWltcG9ydHNcblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9yb3V0ZXJfZXNfUHJvbXB0X19bXCJhXCIgLyogZGVmYXVsdCAqL10pO1xuXG4vKioqLyB9KSxcbi8qIDE5NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3Rfcm91dGVyX2VzX1JlZGlyZWN0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwMSk7XG4vLyBXcml0dGVuIGluIHRoaXMgcm91bmQgYWJvdXQgd2F5IGZvciBiYWJlbC10cmFuc2Zvcm0taW1wb3J0c1xuXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19SZWRpcmVjdF9fW1wiYVwiIC8qIGRlZmF1bHQgKi9dKTtcblxuLyoqKi8gfSksXG4vKiAxOTUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19TdGF0aWNSb3V0ZXJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjAyKTtcbi8vIFdyaXR0ZW4gaW4gdGhpcyByb3VuZCBhYm91dCB3YXkgZm9yIGJhYmVsLXRyYW5zZm9ybS1pbXBvcnRzXG5cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiYVwiXSA9IChfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3Rfcm91dGVyX2VzX1N0YXRpY1JvdXRlcl9fW1wiYVwiIC8qIGRlZmF1bHQgKi9dKTtcblxuLyoqKi8gfSksXG4vKiAxOTYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19Td2l0Y2hfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjAzKTtcbi8vIFdyaXR0ZW4gaW4gdGhpcyByb3VuZCBhYm91dCB3YXkgZm9yIGJhYmVsLXRyYW5zZm9ybS1pbXBvcnRzXG5cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiYVwiXSA9IChfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3Rfcm91dGVyX2VzX1N3aXRjaF9fW1wiYVwiIC8qIGRlZmF1bHQgKi9dKTtcblxuLyoqKi8gfSksXG4vKiAxOTcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19tYXRjaFBhdGhfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpO1xuLy8gV3JpdHRlbiBpbiB0aGlzIHJvdW5kIGFib3V0IHdheSBmb3IgYmFiZWwtdHJhbnNmb3JtLWltcG9ydHNcblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9yb3V0ZXJfZXNfbWF0Y2hQYXRoX19bXCJhXCIgLyogZGVmYXVsdCAqL10pO1xuXG4vKioqLyB9KSxcbi8qIDE5OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3Rfcm91dGVyX2VzX3dpdGhSb3V0ZXJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjA0KTtcbi8vIFdyaXR0ZW4gaW4gdGhpcyByb3VuZCBhYm91dCB3YXkgZm9yIGJhYmVsLXRyYW5zZm9ybS1pbXBvcnRzXG5cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiYVwiXSA9IChfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3Rfcm91dGVyX2VzX3dpdGhSb3V0ZXJfX1tcImFcIiAvKiBkZWZhdWx0ICovXSk7XG5cbi8qKiovIH0pLFxuLyogMTk5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3JlYWN0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9yZWFjdF9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3JlYWN0X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9wcm9wX3R5cGVzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9wcm9wX3R5cGVzX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcHJvcF90eXBlc19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaGlzdG9yeV9jcmVhdGVNZW1vcnlIaXN0b3J5X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2hpc3RvcnlfY3JlYXRlTWVtb3J5SGlzdG9yeV9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2hpc3RvcnlfY3JlYXRlTWVtb3J5SGlzdG9yeV9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1JvdXRlcl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NCk7XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cblxuXG5cblxuXG5cbi8qKlxuICogVGhlIHB1YmxpYyBBUEkgZm9yIGEgPFJvdXRlcj4gdGhhdCBzdG9yZXMgbG9jYXRpb24gaW4gbWVtb3J5LlxuICovXG5cbnZhciBNZW1vcnlSb3V0ZXIgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoTWVtb3J5Um91dGVyLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBNZW1vcnlSb3V0ZXIoKSB7XG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNZW1vcnlSb3V0ZXIpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfUmVhY3QkQ29tcG9uZW50LmNhbGwuYXBwbHkoX1JlYWN0JENvbXBvbmVudCwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLmhpc3RvcnkgPSBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaGlzdG9yeV9jcmVhdGVNZW1vcnlIaXN0b3J5X19fZGVmYXVsdCgpKF90aGlzLnByb3BzKSwgX3RlbXApLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7XG4gIH1cblxuICBNZW1vcnlSb3V0ZXIucHJvdG90eXBlLmNvbXBvbmVudFdpbGxNb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQoKSghdGhpcy5wcm9wcy5oaXN0b3J5LCAnPE1lbW9yeVJvdXRlcj4gaWdub3JlcyB0aGUgaGlzdG9yeSBwcm9wLiBUbyB1c2UgYSBjdXN0b20gaGlzdG9yeSwgJyArICd1c2UgYGltcG9ydCB7IFJvdXRlciB9YCBpbnN0ZWFkIG9mIGBpbXBvcnQgeyBNZW1vcnlSb3V0ZXIgYXMgUm91dGVyIH1gLicpO1xuICB9O1xuXG4gIE1lbW9yeVJvdXRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHJldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcmVhY3RfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1JvdXRlcl9fW1wiYVwiIC8qIGRlZmF1bHQgKi9dLCB7IGhpc3Rvcnk6IHRoaXMuaGlzdG9yeSwgY2hpbGRyZW46IHRoaXMucHJvcHMuY2hpbGRyZW4gfSk7XG4gIH07XG5cbiAgcmV0dXJuIE1lbW9yeVJvdXRlcjtcbn0oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3JlYWN0X19fZGVmYXVsdC5hLkNvbXBvbmVudCk7XG5cbk1lbW9yeVJvdXRlci5wcm9wVHlwZXMgPSB7XG4gIGluaXRpYWxFbnRyaWVzOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5hcnJheSxcbiAgaW5pdGlhbEluZGV4OiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5udW1iZXIsXG4gIGdldFVzZXJDb25maXJtYXRpb246IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmZ1bmMsXG4gIGtleUxlbmd0aDogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEubnVtYmVyLFxuICBjaGlsZHJlbjogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEubm9kZVxufTtcblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKE1lbW9yeVJvdXRlcik7XG5cbi8qKiovIH0pLFxuLyogMjAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX2ludmFyaWFudF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX2ludmFyaWFudF9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX2ludmFyaWFudF9fKTtcbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuXG5cblxuXG4vKipcbiAqIFRoZSBwdWJsaWMgQVBJIGZvciBwcm9tcHRpbmcgdGhlIHVzZXIgYmVmb3JlIG5hdmlnYXRpbmcgYXdheVxuICogZnJvbSBhIHNjcmVlbiB3aXRoIGEgY29tcG9uZW50LlxuICovXG5cbnZhciBQcm9tcHQgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoUHJvbXB0LCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBQcm9tcHQoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb21wdCk7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX1JlYWN0JENvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIFByb21wdC5wcm90b3R5cGUuZW5hYmxlID0gZnVuY3Rpb24gZW5hYmxlKG1lc3NhZ2UpIHtcbiAgICBpZiAodGhpcy51bmJsb2NrKSB0aGlzLnVuYmxvY2soKTtcblxuICAgIHRoaXMudW5ibG9jayA9IHRoaXMuY29udGV4dC5yb3V0ZXIuaGlzdG9yeS5ibG9jayhtZXNzYWdlKTtcbiAgfTtcblxuICBQcm9tcHQucHJvdG90eXBlLmRpc2FibGUgPSBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgIGlmICh0aGlzLnVuYmxvY2spIHtcbiAgICAgIHRoaXMudW5ibG9jaygpO1xuICAgICAgdGhpcy51bmJsb2NrID0gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgUHJvbXB0LnByb3RvdHlwZS5jb21wb25lbnRXaWxsTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX2ludmFyaWFudF9fX2RlZmF1bHQoKSh0aGlzLmNvbnRleHQucm91dGVyLCAnWW91IHNob3VsZCBub3QgdXNlIDxQcm9tcHQ+IG91dHNpZGUgYSA8Um91dGVyPicpO1xuXG4gICAgaWYgKHRoaXMucHJvcHMud2hlbikgdGhpcy5lbmFibGUodGhpcy5wcm9wcy5tZXNzYWdlKTtcbiAgfTtcblxuICBQcm9tcHQucHJvdG90eXBlLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgIGlmIChuZXh0UHJvcHMud2hlbikge1xuICAgICAgaWYgKCF0aGlzLnByb3BzLndoZW4gfHwgdGhpcy5wcm9wcy5tZXNzYWdlICE9PSBuZXh0UHJvcHMubWVzc2FnZSkgdGhpcy5lbmFibGUobmV4dFByb3BzLm1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRpc2FibGUoKTtcbiAgICB9XG4gIH07XG5cbiAgUHJvbXB0LnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMuZGlzYWJsZSgpO1xuICB9O1xuXG4gIFByb21wdC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIHJldHVybiBQcm9tcHQ7XG59KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fX2RlZmF1bHQuYS5Db21wb25lbnQpO1xuXG5Qcm9tcHQucHJvcFR5cGVzID0ge1xuICB3aGVuOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5ib29sLFxuICBtZXNzYWdlOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vbmVPZlR5cGUoW19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmZ1bmMsIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLnN0cmluZ10pLmlzUmVxdWlyZWRcbn07XG5Qcm9tcHQuZGVmYXVsdFByb3BzID0ge1xuICB3aGVuOiB0cnVlXG59O1xuUHJvbXB0LmNvbnRleHRUeXBlcyA9IHtcbiAgcm91dGVyOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5zaGFwZSh7XG4gICAgaGlzdG9yeTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuc2hhcGUoe1xuICAgICAgYmxvY2s6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmZ1bmMuaXNSZXF1aXJlZFxuICAgIH0pLmlzUmVxdWlyZWRcbiAgfSkuaXNSZXF1aXJlZFxufTtcblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKFByb21wdCk7XG5cbi8qKiovIH0pLFxuLyogMjAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3dhcm5pbmdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl93YXJuaW5nX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfd2FybmluZ19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaW52YXJpYW50X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaW52YXJpYW50X19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaW52YXJpYW50X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9oaXN0b3J5X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MSk7XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cblxuXG5cblxuXG5cbi8qKlxuICogVGhlIHB1YmxpYyBBUEkgZm9yIHVwZGF0aW5nIHRoZSBsb2NhdGlvbiBwcm9ncmFtbWF0aWNhbGx5XG4gKiB3aXRoIGEgY29tcG9uZW50LlxuICovXG5cbnZhciBSZWRpcmVjdCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhSZWRpcmVjdCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gUmVkaXJlY3QoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlZGlyZWN0KTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfUmVhY3QkQ29tcG9uZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgUmVkaXJlY3QucHJvdG90eXBlLmlzU3RhdGljID0gZnVuY3Rpb24gaXNTdGF0aWMoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dC5yb3V0ZXIgJiYgdGhpcy5jb250ZXh0LnJvdXRlci5zdGF0aWNDb250ZXh0O1xuICB9O1xuXG4gIFJlZGlyZWN0LnByb3RvdHlwZS5jb21wb25lbnRXaWxsTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2ludmFyaWFudF9fX2RlZmF1bHQoKSh0aGlzLmNvbnRleHQucm91dGVyLCAnWW91IHNob3VsZCBub3QgdXNlIDxSZWRpcmVjdD4gb3V0c2lkZSBhIDxSb3V0ZXI+Jyk7XG5cbiAgICBpZiAodGhpcy5pc1N0YXRpYygpKSB0aGlzLnBlcmZvcm0oKTtcbiAgfTtcblxuICBSZWRpcmVjdC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBpZiAoIXRoaXMuaXNTdGF0aWMoKSkgdGhpcy5wZXJmb3JtKCk7XG4gIH07XG5cbiAgUmVkaXJlY3QucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICB2YXIgcHJldlRvID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9oaXN0b3J5X19bXCJhXCIgLyogY3JlYXRlTG9jYXRpb24gKi9dKShwcmV2UHJvcHMudG8pO1xuICAgIHZhciBuZXh0VG8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X2hpc3RvcnlfX1tcImFcIiAvKiBjcmVhdGVMb2NhdGlvbiAqL10pKHRoaXMucHJvcHMudG8pO1xuXG4gICAgaWYgKF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfaGlzdG9yeV9fW1wiYlwiIC8qIGxvY2F0aW9uc0FyZUVxdWFsICovXSkocHJldlRvLCBuZXh0VG8pKSB7XG4gICAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfd2FybmluZ19fX2RlZmF1bHQoKShmYWxzZSwgJ1lvdSB0cmllZCB0byByZWRpcmVjdCB0byB0aGUgc2FtZSByb3V0ZSB5b3VcXCdyZSBjdXJyZW50bHkgb246ICcgKyAoJ1wiJyArIG5leHRUby5wYXRobmFtZSArIG5leHRUby5zZWFyY2ggKyAnXCInKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5wZXJmb3JtKCk7XG4gIH07XG5cbiAgUmVkaXJlY3QucHJvdG90eXBlLnBlcmZvcm0gPSBmdW5jdGlvbiBwZXJmb3JtKCkge1xuICAgIHZhciBoaXN0b3J5ID0gdGhpcy5jb250ZXh0LnJvdXRlci5oaXN0b3J5O1xuICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICBwdXNoID0gX3Byb3BzLnB1c2gsXG4gICAgICAgIHRvID0gX3Byb3BzLnRvO1xuXG5cbiAgICBpZiAocHVzaCkge1xuICAgICAgaGlzdG9yeS5wdXNoKHRvKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGlzdG9yeS5yZXBsYWNlKHRvKTtcbiAgICB9XG4gIH07XG5cbiAgUmVkaXJlY3QucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICByZXR1cm4gUmVkaXJlY3Q7XG59KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fX2RlZmF1bHQuYS5Db21wb25lbnQpO1xuXG5SZWRpcmVjdC5wcm9wVHlwZXMgPSB7XG4gIHB1c2g6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmJvb2wsXG4gIGZyb206IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLnN0cmluZyxcbiAgdG86IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLm9uZU9mVHlwZShbX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuc3RyaW5nLCBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vYmplY3RdKS5pc1JlcXVpcmVkXG59O1xuUmVkaXJlY3QuZGVmYXVsdFByb3BzID0ge1xuICBwdXNoOiBmYWxzZVxufTtcblJlZGlyZWN0LmNvbnRleHRUeXBlcyA9IHtcbiAgcm91dGVyOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5zaGFwZSh7XG4gICAgaGlzdG9yeTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuc2hhcGUoe1xuICAgICAgcHVzaDogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuZnVuYy5pc1JlcXVpcmVkLFxuICAgICAgcmVwbGFjZTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuZnVuYy5pc1JlcXVpcmVkXG4gICAgfSkuaXNSZXF1aXJlZCxcbiAgICBzdGF0aWNDb250ZXh0OiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vYmplY3RcbiAgfSkuaXNSZXF1aXJlZFxufTtcblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKFJlZGlyZWN0KTtcblxuLyoqKi8gfSksXG4vKiAyMDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9yZWFjdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcmVhY3RfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9yZWFjdF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX3Byb3BfdHlwZXNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X2hpc3RvcnlfUGF0aFV0aWxzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfaGlzdG9yeV9QYXRoVXRpbHNfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9oaXN0b3J5X1BhdGhVdGlsc19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1JvdXRlcl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NCk7XG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMob2JqLCBrZXlzKSB7IHZhciB0YXJnZXQgPSB7fTsgZm9yICh2YXIgaSBpbiBvYmopIHsgaWYgKGtleXMuaW5kZXhPZihpKSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBpKSkgY29udGludWU7IHRhcmdldFtpXSA9IG9ialtpXTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuXG5cblxuXG5cblxuXG52YXIgbm9ybWFsaXplTG9jYXRpb24gPSBmdW5jdGlvbiBub3JtYWxpemVMb2NhdGlvbihvYmplY3QpIHtcbiAgdmFyIF9vYmplY3QkcGF0aG5hbWUgPSBvYmplY3QucGF0aG5hbWUsXG4gICAgICBwYXRobmFtZSA9IF9vYmplY3QkcGF0aG5hbWUgPT09IHVuZGVmaW5lZCA/ICcvJyA6IF9vYmplY3QkcGF0aG5hbWUsXG4gICAgICBfb2JqZWN0JHNlYXJjaCA9IG9iamVjdC5zZWFyY2gsXG4gICAgICBzZWFyY2ggPSBfb2JqZWN0JHNlYXJjaCA9PT0gdW5kZWZpbmVkID8gJycgOiBfb2JqZWN0JHNlYXJjaCxcbiAgICAgIF9vYmplY3QkaGFzaCA9IG9iamVjdC5oYXNoLFxuICAgICAgaGFzaCA9IF9vYmplY3QkaGFzaCA9PT0gdW5kZWZpbmVkID8gJycgOiBfb2JqZWN0JGhhc2g7XG5cblxuICByZXR1cm4ge1xuICAgIHBhdGhuYW1lOiBwYXRobmFtZSxcbiAgICBzZWFyY2g6IHNlYXJjaCA9PT0gJz8nID8gJycgOiBzZWFyY2gsXG4gICAgaGFzaDogaGFzaCA9PT0gJyMnID8gJycgOiBoYXNoXG4gIH07XG59O1xuXG52YXIgYWRkQmFzZW5hbWUgPSBmdW5jdGlvbiBhZGRCYXNlbmFtZShiYXNlbmFtZSwgbG9jYXRpb24pIHtcbiAgaWYgKCFiYXNlbmFtZSkgcmV0dXJuIGxvY2F0aW9uO1xuXG4gIHJldHVybiBfZXh0ZW5kcyh7fSwgbG9jYXRpb24sIHtcbiAgICBwYXRobmFtZTogX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9oaXN0b3J5X1BhdGhVdGlsc19fW1wiYWRkTGVhZGluZ1NsYXNoXCJdKShiYXNlbmFtZSkgKyBsb2NhdGlvbi5wYXRobmFtZVxuICB9KTtcbn07XG5cbnZhciBzdHJpcEJhc2VuYW1lID0gZnVuY3Rpb24gc3RyaXBCYXNlbmFtZShiYXNlbmFtZSwgbG9jYXRpb24pIHtcbiAgaWYgKCFiYXNlbmFtZSkgcmV0dXJuIGxvY2F0aW9uO1xuXG4gIHZhciBiYXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9oaXN0b3J5X1BhdGhVdGlsc19fW1wiYWRkTGVhZGluZ1NsYXNoXCJdKShiYXNlbmFtZSk7XG5cbiAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoYmFzZSkgIT09IDApIHJldHVybiBsb2NhdGlvbjtcblxuICByZXR1cm4gX2V4dGVuZHMoe30sIGxvY2F0aW9uLCB7XG4gICAgcGF0aG5hbWU6IGxvY2F0aW9uLnBhdGhuYW1lLnN1YnN0cihiYXNlLmxlbmd0aClcbiAgfSk7XG59O1xuXG52YXIgY3JlYXRlTG9jYXRpb24gPSBmdW5jdGlvbiBjcmVhdGVMb2NhdGlvbihsb2NhdGlvbikge1xuICByZXR1cm4gdHlwZW9mIGxvY2F0aW9uID09PSAnc3RyaW5nJyA/IF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfaGlzdG9yeV9QYXRoVXRpbHNfX1tcInBhcnNlUGF0aFwiXSkobG9jYXRpb24pIDogbm9ybWFsaXplTG9jYXRpb24obG9jYXRpb24pO1xufTtcblxudmFyIGNyZWF0ZVVSTCA9IGZ1bmN0aW9uIGNyZWF0ZVVSTChsb2NhdGlvbikge1xuICByZXR1cm4gdHlwZW9mIGxvY2F0aW9uID09PSAnc3RyaW5nJyA/IGxvY2F0aW9uIDogX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9oaXN0b3J5X1BhdGhVdGlsc19fW1wiY3JlYXRlUGF0aFwiXSkobG9jYXRpb24pO1xufTtcblxudmFyIHN0YXRpY0hhbmRsZXIgPSBmdW5jdGlvbiBzdGF0aWNIYW5kbGVyKG1ldGhvZE5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X19fZGVmYXVsdCgpKGZhbHNlLCAnWW91IGNhbm5vdCAlcyB3aXRoIDxTdGF0aWNSb3V0ZXI+JywgbWV0aG9kTmFtZSk7XG4gIH07XG59O1xuXG52YXIgbm9vcCA9IGZ1bmN0aW9uIG5vb3AoKSB7fTtcblxuLyoqXG4gKiBUaGUgcHVibGljIHRvcC1sZXZlbCBBUEkgZm9yIGEgXCJzdGF0aWNcIiA8Um91dGVyPiwgc28tY2FsbGVkIGJlY2F1c2UgaXRcbiAqIGNhbid0IGFjdHVhbGx5IGNoYW5nZSB0aGUgY3VycmVudCBsb2NhdGlvbi4gSW5zdGVhZCwgaXQganVzdCByZWNvcmRzXG4gKiBsb2NhdGlvbiBjaGFuZ2VzIGluIGEgY29udGV4dCBvYmplY3QuIFVzZWZ1bCBtYWlubHkgaW4gdGVzdGluZyBhbmRcbiAqIHNlcnZlci1yZW5kZXJpbmcgc2NlbmFyaW9zLlxuICovXG5cbnZhciBTdGF0aWNSb3V0ZXIgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoU3RhdGljUm91dGVyLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBTdGF0aWNSb3V0ZXIoKSB7XG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGF0aWNSb3V0ZXIpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfUmVhY3QkQ29tcG9uZW50LmNhbGwuYXBwbHkoX1JlYWN0JENvbXBvbmVudCwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLmNyZWF0ZUhyZWYgPSBmdW5jdGlvbiAocGF0aCkge1xuICAgICAgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfaGlzdG9yeV9QYXRoVXRpbHNfX1tcImFkZExlYWRpbmdTbGFzaFwiXSkoX3RoaXMucHJvcHMuYmFzZW5hbWUgKyBjcmVhdGVVUkwocGF0aCkpO1xuICAgIH0sIF90aGlzLmhhbmRsZVB1c2ggPSBmdW5jdGlvbiAobG9jYXRpb24pIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIGJhc2VuYW1lID0gX3RoaXMkcHJvcHMuYmFzZW5hbWUsXG4gICAgICAgICAgY29udGV4dCA9IF90aGlzJHByb3BzLmNvbnRleHQ7XG5cbiAgICAgIGNvbnRleHQuYWN0aW9uID0gJ1BVU0gnO1xuICAgICAgY29udGV4dC5sb2NhdGlvbiA9IGFkZEJhc2VuYW1lKGJhc2VuYW1lLCBjcmVhdGVMb2NhdGlvbihsb2NhdGlvbikpO1xuICAgICAgY29udGV4dC51cmwgPSBjcmVhdGVVUkwoY29udGV4dC5sb2NhdGlvbik7XG4gICAgfSwgX3RoaXMuaGFuZGxlUmVwbGFjZSA9IGZ1bmN0aW9uIChsb2NhdGlvbikge1xuICAgICAgdmFyIF90aGlzJHByb3BzMiA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIGJhc2VuYW1lID0gX3RoaXMkcHJvcHMyLmJhc2VuYW1lLFxuICAgICAgICAgIGNvbnRleHQgPSBfdGhpcyRwcm9wczIuY29udGV4dDtcblxuICAgICAgY29udGV4dC5hY3Rpb24gPSAnUkVQTEFDRSc7XG4gICAgICBjb250ZXh0LmxvY2F0aW9uID0gYWRkQmFzZW5hbWUoYmFzZW5hbWUsIGNyZWF0ZUxvY2F0aW9uKGxvY2F0aW9uKSk7XG4gICAgICBjb250ZXh0LnVybCA9IGNyZWF0ZVVSTChjb250ZXh0LmxvY2F0aW9uKTtcbiAgICB9LCBfdGhpcy5oYW5kbGVMaXN0ZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbm9vcDtcbiAgICB9LCBfdGhpcy5oYW5kbGVCbG9jayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBub29wO1xuICAgIH0sIF90ZW1wKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgU3RhdGljUm91dGVyLnByb3RvdHlwZS5nZXRDaGlsZENvbnRleHQgPSBmdW5jdGlvbiBnZXRDaGlsZENvbnRleHQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJvdXRlcjoge1xuICAgICAgICBzdGF0aWNDb250ZXh0OiB0aGlzLnByb3BzLmNvbnRleHRcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIFN0YXRpY1JvdXRlci5wcm90b3R5cGUuY29tcG9uZW50V2lsbE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCgpKCF0aGlzLnByb3BzLmhpc3RvcnksICc8U3RhdGljUm91dGVyPiBpZ25vcmVzIHRoZSBoaXN0b3J5IHByb3AuIFRvIHVzZSBhIGN1c3RvbSBoaXN0b3J5LCAnICsgJ3VzZSBgaW1wb3J0IHsgUm91dGVyIH1gIGluc3RlYWQgb2YgYGltcG9ydCB7IFN0YXRpY1JvdXRlciBhcyBSb3V0ZXIgfWAuJyk7XG4gIH07XG5cbiAgU3RhdGljUm91dGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgIGJhc2VuYW1lID0gX3Byb3BzLmJhc2VuYW1lLFxuICAgICAgICBjb250ZXh0ID0gX3Byb3BzLmNvbnRleHQsXG4gICAgICAgIGxvY2F0aW9uID0gX3Byb3BzLmxvY2F0aW9uLFxuICAgICAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcHJvcHMsIFsnYmFzZW5hbWUnLCAnY29udGV4dCcsICdsb2NhdGlvbiddKTtcblxuICAgIHZhciBoaXN0b3J5ID0ge1xuICAgICAgY3JlYXRlSHJlZjogdGhpcy5jcmVhdGVIcmVmLFxuICAgICAgYWN0aW9uOiAnUE9QJyxcbiAgICAgIGxvY2F0aW9uOiBzdHJpcEJhc2VuYW1lKGJhc2VuYW1lLCBjcmVhdGVMb2NhdGlvbihsb2NhdGlvbikpLFxuICAgICAgcHVzaDogdGhpcy5oYW5kbGVQdXNoLFxuICAgICAgcmVwbGFjZTogdGhpcy5oYW5kbGVSZXBsYWNlLFxuICAgICAgZ286IHN0YXRpY0hhbmRsZXIoJ2dvJyksXG4gICAgICBnb0JhY2s6IHN0YXRpY0hhbmRsZXIoJ2dvQmFjaycpLFxuICAgICAgZ29Gb3J3YXJkOiBzdGF0aWNIYW5kbGVyKCdnb0ZvcndhcmQnKSxcbiAgICAgIGxpc3RlbjogdGhpcy5oYW5kbGVMaXN0ZW4sXG4gICAgICBibG9jazogdGhpcy5oYW5kbGVCbG9ja1xuICAgIH07XG5cbiAgICByZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3JlYWN0X19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19Sb3V0ZXJfX1tcImFcIiAvKiBkZWZhdWx0ICovXSwgX2V4dGVuZHMoe30sIHByb3BzLCB7IGhpc3Rvcnk6IGhpc3RvcnkgfSkpO1xuICB9O1xuXG4gIHJldHVybiBTdGF0aWNSb3V0ZXI7XG59KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9yZWFjdF9fX2RlZmF1bHQuYS5Db21wb25lbnQpO1xuXG5TdGF0aWNSb3V0ZXIucHJvcFR5cGVzID0ge1xuICBiYXNlbmFtZTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuc3RyaW5nLFxuICBjb250ZXh0OiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vYmplY3QuaXNSZXF1aXJlZCxcbiAgbG9jYXRpb246IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19wcm9wX3R5cGVzX19fZGVmYXVsdC5hLm9uZU9mVHlwZShbX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuc3RyaW5nLCBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vYmplY3RdKVxufTtcblN0YXRpY1JvdXRlci5kZWZhdWx0UHJvcHMgPSB7XG4gIGJhc2VuYW1lOiAnJyxcbiAgbG9jYXRpb246ICcvJ1xufTtcblN0YXRpY1JvdXRlci5jaGlsZENvbnRleHRUeXBlcyA9IHtcbiAgcm91dGVyOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vYmplY3QuaXNSZXF1aXJlZFxufTtcblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKFN0YXRpY1JvdXRlcik7XG5cbi8qKiovIH0pLFxuLyogMjAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3dhcm5pbmdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl93YXJuaW5nX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfd2FybmluZ19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaW52YXJpYW50X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaW52YXJpYW50X19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaW52YXJpYW50X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fbWF0Y2hQYXRoX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTtcbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuXG5cblxuXG5cblxuLyoqXG4gKiBUaGUgcHVibGljIEFQSSBmb3IgcmVuZGVyaW5nIHRoZSBmaXJzdCA8Um91dGU+IHRoYXQgbWF0Y2hlcy5cbiAqL1xuXG52YXIgU3dpdGNoID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFN3aXRjaCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gU3dpdGNoKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTd2l0Y2gpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9SZWFjdCRDb21wb25lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBTd2l0Y2gucHJvdG90eXBlLmNvbXBvbmVudFdpbGxNb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaW52YXJpYW50X19fZGVmYXVsdCgpKHRoaXMuY29udGV4dC5yb3V0ZXIsICdZb3Ugc2hvdWxkIG5vdCB1c2UgPFN3aXRjaD4gb3V0c2lkZSBhIDxSb3V0ZXI+Jyk7XG4gIH07XG5cbiAgU3dpdGNoLnByb3RvdHlwZS5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfd2FybmluZ19fX2RlZmF1bHQoKSghKG5leHRQcm9wcy5sb2NhdGlvbiAmJiAhdGhpcy5wcm9wcy5sb2NhdGlvbiksICc8U3dpdGNoPiBlbGVtZW50cyBzaG91bGQgbm90IGNoYW5nZSBmcm9tIHVuY29udHJvbGxlZCB0byBjb250cm9sbGVkIChvciB2aWNlIHZlcnNhKS4gWW91IGluaXRpYWxseSB1c2VkIG5vIFwibG9jYXRpb25cIiBwcm9wIGFuZCB0aGVuIHByb3ZpZGVkIG9uZSBvbiBhIHN1YnNlcXVlbnQgcmVuZGVyLicpO1xuXG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3dhcm5pbmdfX19kZWZhdWx0KCkoISghbmV4dFByb3BzLmxvY2F0aW9uICYmIHRoaXMucHJvcHMubG9jYXRpb24pLCAnPFN3aXRjaD4gZWxlbWVudHMgc2hvdWxkIG5vdCBjaGFuZ2UgZnJvbSBjb250cm9sbGVkIHRvIHVuY29udHJvbGxlZCAob3IgdmljZSB2ZXJzYSkuIFlvdSBwcm92aWRlZCBhIFwibG9jYXRpb25cIiBwcm9wIGluaXRpYWxseSBidXQgb21pdHRlZCBpdCBvbiBhIHN1YnNlcXVlbnQgcmVuZGVyLicpO1xuICB9O1xuXG4gIFN3aXRjaC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciByb3V0ZSA9IHRoaXMuY29udGV4dC5yb3V0ZXIucm91dGU7XG4gICAgdmFyIGNoaWxkcmVuID0gdGhpcy5wcm9wcy5jaGlsZHJlbjtcblxuICAgIHZhciBsb2NhdGlvbiA9IHRoaXMucHJvcHMubG9jYXRpb24gfHwgcm91dGUubG9jYXRpb247XG5cbiAgICB2YXIgbWF0Y2ggPSB2b2lkIDAsXG4gICAgICAgIGNoaWxkID0gdm9pZCAwO1xuICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fX2RlZmF1bHQuYS5DaGlsZHJlbi5mb3JFYWNoKGNoaWxkcmVuLCBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgaWYgKCFfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX19kZWZhdWx0LmEuaXNWYWxpZEVsZW1lbnQoZWxlbWVudCkpIHJldHVybjtcblxuICAgICAgdmFyIF9lbGVtZW50JHByb3BzID0gZWxlbWVudC5wcm9wcyxcbiAgICAgICAgICBwYXRoUHJvcCA9IF9lbGVtZW50JHByb3BzLnBhdGgsXG4gICAgICAgICAgZXhhY3QgPSBfZWxlbWVudCRwcm9wcy5leGFjdCxcbiAgICAgICAgICBzdHJpY3QgPSBfZWxlbWVudCRwcm9wcy5zdHJpY3QsXG4gICAgICAgICAgc2Vuc2l0aXZlID0gX2VsZW1lbnQkcHJvcHMuc2Vuc2l0aXZlLFxuICAgICAgICAgIGZyb20gPSBfZWxlbWVudCRwcm9wcy5mcm9tO1xuXG4gICAgICB2YXIgcGF0aCA9IHBhdGhQcm9wIHx8IGZyb207XG5cbiAgICAgIGlmIChtYXRjaCA9PSBudWxsKSB7XG4gICAgICAgIGNoaWxkID0gZWxlbWVudDtcbiAgICAgICAgbWF0Y2ggPSBwYXRoID8gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fbWF0Y2hQYXRoX19bXCJhXCIgLyogZGVmYXVsdCAqL10pKGxvY2F0aW9uLnBhdGhuYW1lLCB7IHBhdGg6IHBhdGgsIGV4YWN0OiBleGFjdCwgc3RyaWN0OiBzdHJpY3QsIHNlbnNpdGl2ZTogc2Vuc2l0aXZlIH0pIDogcm91dGUubWF0Y2g7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbWF0Y2ggPyBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX19kZWZhdWx0LmEuY2xvbmVFbGVtZW50KGNoaWxkLCB7IGxvY2F0aW9uOiBsb2NhdGlvbiwgY29tcHV0ZWRNYXRjaDogbWF0Y2ggfSkgOiBudWxsO1xuICB9O1xuXG4gIHJldHVybiBTd2l0Y2g7XG59KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fX2RlZmF1bHQuYS5Db21wb25lbnQpO1xuXG5Td2l0Y2guY29udGV4dFR5cGVzID0ge1xuICByb3V0ZXI6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLnNoYXBlKHtcbiAgICByb3V0ZTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEub2JqZWN0LmlzUmVxdWlyZWRcbiAgfSkuaXNSZXF1aXJlZFxufTtcblN3aXRjaC5wcm9wVHlwZXMgPSB7XG4gIGNoaWxkcmVuOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5ub2RlLFxuICBsb2NhdGlvbjogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEub2JqZWN0XG59O1xuXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAoU3dpdGNoKTtcblxuLyoqKi8gfSksXG4vKiAyMDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfaG9pc3Rfbm9uX3JlYWN0X3N0YXRpY3NfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjA1KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfaG9pc3Rfbm9uX3JlYWN0X3N0YXRpY3NfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9ob2lzdF9ub25fcmVhY3Rfc3RhdGljc19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1JvdXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2KTtcbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhvYmosIGtleXMpIHsgdmFyIHRhcmdldCA9IHt9OyBmb3IgKHZhciBpIGluIG9iaikgeyBpZiAoa2V5cy5pbmRleE9mKGkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGkpKSBjb250aW51ZTsgdGFyZ2V0W2ldID0gb2JqW2ldOyB9IHJldHVybiB0YXJnZXQ7IH1cblxuXG5cblxuXG5cbi8qKlxuICogQSBwdWJsaWMgaGlnaGVyLW9yZGVyIGNvbXBvbmVudCB0byBhY2Nlc3MgdGhlIGltcGVyYXRpdmUgQVBJXG4gKi9cbnZhciB3aXRoUm91dGVyID0gZnVuY3Rpb24gd2l0aFJvdXRlcihDb21wb25lbnQpIHtcbiAgdmFyIEMgPSBmdW5jdGlvbiBDKHByb3BzKSB7XG4gICAgdmFyIHdyYXBwZWRDb21wb25lbnRSZWYgPSBwcm9wcy53cmFwcGVkQ29tcG9uZW50UmVmLFxuICAgICAgICByZW1haW5pbmdQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhwcm9wcywgWyd3cmFwcGVkQ29tcG9uZW50UmVmJ10pO1xuXG4gICAgcmV0dXJuIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fUm91dGVfX1tcImFcIiAvKiBkZWZhdWx0ICovXSwgeyByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihyb3V0ZUNvbXBvbmVudFByb3BzKSB7XG4gICAgICAgIHJldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChDb21wb25lbnQsIF9leHRlbmRzKHt9LCByZW1haW5pbmdQcm9wcywgcm91dGVDb21wb25lbnRQcm9wcywgeyByZWY6IHdyYXBwZWRDb21wb25lbnRSZWYgfSkpO1xuICAgICAgfSB9KTtcbiAgfTtcblxuICBDLmRpc3BsYXlOYW1lID0gJ3dpdGhSb3V0ZXIoJyArIChDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgQ29tcG9uZW50Lm5hbWUpICsgJyknO1xuICBDLldyYXBwZWRDb21wb25lbnQgPSBDb21wb25lbnQ7XG4gIEMucHJvcFR5cGVzID0ge1xuICAgIHdyYXBwZWRDb21wb25lbnRSZWY6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmZ1bmNcbiAgfTtcblxuICByZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX2hvaXN0X25vbl9yZWFjdF9zdGF0aWNzX19fZGVmYXVsdCgpKEMsIENvbXBvbmVudCk7XG59O1xuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKHdpdGhSb3V0ZXIpO1xuXG4vKioqLyB9KSxcbi8qIDIwNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE1LCBZYWhvbyEgSW5jLlxuICogQ29weXJpZ2h0cyBsaWNlbnNlZCB1bmRlciB0aGUgTmV3IEJTRCBMaWNlbnNlLiBTZWUgdGhlIGFjY29tcGFueWluZyBMSUNFTlNFIGZpbGUgZm9yIHRlcm1zLlxuICovXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgICB0cnVlID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICAgIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG4gICAgKGdsb2JhbC5ob2lzdE5vblJlYWN0U3RhdGljcyA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIFxuICAgIHZhciBSRUFDVF9TVEFUSUNTID0ge1xuICAgICAgICBjaGlsZENvbnRleHRUeXBlczogdHJ1ZSxcbiAgICAgICAgY29udGV4dFR5cGVzOiB0cnVlLFxuICAgICAgICBkZWZhdWx0UHJvcHM6IHRydWUsXG4gICAgICAgIGRpc3BsYXlOYW1lOiB0cnVlLFxuICAgICAgICBnZXREZWZhdWx0UHJvcHM6IHRydWUsXG4gICAgICAgIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wczogdHJ1ZSxcbiAgICAgICAgbWl4aW5zOiB0cnVlLFxuICAgICAgICBwcm9wVHlwZXM6IHRydWUsXG4gICAgICAgIHR5cGU6IHRydWVcbiAgICB9O1xuICAgIFxuICAgIHZhciBLTk9XTl9TVEFUSUNTID0ge1xuICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICBsZW5ndGg6IHRydWUsXG4gICAgICAgIHByb3RvdHlwZTogdHJ1ZSxcbiAgICAgICAgY2FsbGVyOiB0cnVlLFxuICAgICAgICBjYWxsZWU6IHRydWUsXG4gICAgICAgIGFyZ3VtZW50czogdHJ1ZSxcbiAgICAgICAgYXJpdHk6IHRydWVcbiAgICB9O1xuICAgIFxuICAgIHZhciBkZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbiAgICB2YXIgZ2V0T3duUHJvcGVydHlOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xuICAgIHZhciBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xuICAgIHZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuICAgIHZhciBnZXRQcm90b3R5cGVPZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbiAgICB2YXIgb2JqZWN0UHJvdG90eXBlID0gZ2V0UHJvdG90eXBlT2YgJiYgZ2V0UHJvdG90eXBlT2YoT2JqZWN0KTtcbiAgICBcbiAgICByZXR1cm4gZnVuY3Rpb24gaG9pc3ROb25SZWFjdFN0YXRpY3ModGFyZ2V0Q29tcG9uZW50LCBzb3VyY2VDb21wb25lbnQsIGJsYWNrbGlzdCkge1xuICAgICAgICBpZiAodHlwZW9mIHNvdXJjZUNvbXBvbmVudCAhPT0gJ3N0cmluZycpIHsgLy8gZG9uJ3QgaG9pc3Qgb3ZlciBzdHJpbmcgKGh0bWwpIGNvbXBvbmVudHNcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG9iamVjdFByb3RvdHlwZSkge1xuICAgICAgICAgICAgICAgIHZhciBpbmhlcml0ZWRDb21wb25lbnQgPSBnZXRQcm90b3R5cGVPZihzb3VyY2VDb21wb25lbnQpO1xuICAgICAgICAgICAgICAgIGlmIChpbmhlcml0ZWRDb21wb25lbnQgJiYgaW5oZXJpdGVkQ29tcG9uZW50ICE9PSBvYmplY3RQcm90b3R5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9pc3ROb25SZWFjdFN0YXRpY3ModGFyZ2V0Q29tcG9uZW50LCBpbmhlcml0ZWRDb21wb25lbnQsIGJsYWNrbGlzdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIga2V5cyA9IGdldE93blByb3BlcnR5TmFtZXMoc291cmNlQ29tcG9uZW50KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgICAgICAgICAgICAgIGtleXMgPSBrZXlzLmNvbmNhdChnZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlQ29tcG9uZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgICAgIGlmICghUkVBQ1RfU1RBVElDU1trZXldICYmICFLTk9XTl9TVEFUSUNTW2tleV0gJiYgKCFibGFja2xpc3QgfHwgIWJsYWNrbGlzdFtrZXldKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2VDb21wb25lbnQsIGtleSk7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7IC8vIEF2b2lkIGZhaWx1cmVzIGZyb20gcmVhZC1vbmx5IHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZVByb3BlcnR5KHRhcmdldENvbXBvbmVudCwga2V5LCBkZXNjcmlwdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRDb21wb25lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0YXJnZXRDb21wb25lbnQ7XG4gICAgfTtcbn0pKSk7XG5cblxuLyoqKi8gfSksXG4vKiAyMDYgKi8sXG4vKiAyMDcgKi8sXG4vKiAyMDggKi8sXG4vKiAyMDkgKi8sXG4vKiAyMTAgKi8sXG4vKiAyMTEgKi8sXG4vKiAyMTIgKi8sXG4vKiAyMTMgKi8sXG4vKiAyMTQgKi8sXG4vKiAyMTUgKi8sXG4vKiAyMTYgKi8sXG4vKiAyMTcgKi8sXG4vKiAyMTggKi8sXG4vKiAyMTkgKi8sXG4vKiAyMjAgKi8sXG4vKiAyMjEgKi8sXG4vKiAyMjIgKi8sXG4vKiAyMjMgKi8sXG4vKiAyMjQgKi8sXG4vKiAyMjUgKi8sXG4vKiAyMjYgKi8sXG4vKiAyMjcgKi8sXG4vKiAyMjggKi8sXG4vKiAyMjkgKi8sXG4vKiAyMzAgKi8sXG4vKiAyMzEgKi8sXG4vKiAyMzIgKi8sXG4vKiAyMzMgKi8sXG4vKiAyMzQgKi8sXG4vKiAyMzUgKi8sXG4vKiAyMzYgKi8sXG4vKiAyMzcgKi8sXG4vKiAyMzggKi8sXG4vKiAyMzkgKi8sXG4vKiAyNDAgKi8sXG4vKiAyNDEgKi8sXG4vKiAyNDIgKi8sXG4vKiAyNDMgKi8sXG4vKiAyNDQgKi8sXG4vKiAyNDUgKi8sXG4vKiAyNDYgKi8sXG4vKiAyNDcgKi8sXG4vKiAyNDggKi8sXG4vKiAyNDkgKi8sXG4vKiAyNTAgKi8sXG4vKiAyNTEgKi8sXG4vKiAyNTIgKi8sXG4vKiAyNTMgKi8sXG4vKiAyNTQgKi8sXG4vKiAyNTUgKi8sXG4vKiAyNTYgKi8sXG4vKiAyNTcgKi8sXG4vKiAyNTggKi8sXG4vKiAyNTkgKi8sXG4vKiAyNjAgKi8sXG4vKiAyNjEgKi8sXG4vKiAyNjIgKi8sXG4vKiAyNjMgKi8sXG4vKiAyNjQgKi8sXG4vKiAyNjUgKi8sXG4vKiAyNjYgKi8sXG4vKiAyNjcgKi8sXG4vKiAyNjggKi8sXG4vKiAyNjkgKi8sXG4vKiAyNzAgKi8sXG4vKiAyNzEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3RSb3V0ZXJEb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KTtcblxudmFyIF9BcHBCYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NCk7XG5cbnZhciBfQXBwQmFyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0FwcEJhcik7XG5cbnZhciBfRHJhd2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDgpO1xuXG52YXIgX0RyYXdlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EcmF3ZXIpO1xuXG52YXIgX01lbnVJdGVtID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpO1xuXG52YXIgX01lbnVJdGVtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX01lbnVJdGVtKTtcblxudmFyIF9uYXZpZ2F0aW9uQXJyb3dEcm9wUmlnaHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Myk7XG5cbnZhciBfbmF2aWdhdGlvbkFycm93RHJvcFJpZ2h0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25hdmlnYXRpb25BcnJvd0Ryb3BSaWdodCk7XG5cbnZhciBfSWNvbk1lbnUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MSk7XG5cbnZhciBfSWNvbk1lbnUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSWNvbk1lbnUpO1xuXG52YXIgX0ljb25CdXR0b24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblxudmFyIF9JY29uQnV0dG9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ljb25CdXR0b24pO1xuXG52YXIgX21vcmVWZXJ0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjYpO1xuXG52YXIgX21vcmVWZXJ0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21vcmVWZXJ0KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gU3ViTWVudShwcm9wcykge1xuICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgX0ljb25NZW51Mi5kZWZhdWx0LFxuICAgICAgICB7XG4gICAgICAgICAgICBpY29uQnV0dG9uRWxlbWVudDogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgX0ljb25CdXR0b24yLmRlZmF1bHQsXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfbW9yZVZlcnQyLmRlZmF1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnc3VibWVudS1zdmcnLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogeyBjb2xvcjogJ3doaXRlJywgZmlsbDogJ3doaXRlJyB9IH0pXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgdGFyZ2V0T3JpZ2luOiB7IGhvcml6b250YWw6ICdyaWdodCcsIHZlcnRpY2FsOiAndG9wJyB9LFxuICAgICAgICAgICAgYW5jaG9yT3JpZ2luOiB7IGhvcml6b250YWw6ICdyaWdodCcsIHZlcnRpY2FsOiAndG9wJyB9IH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9NZW51SXRlbTIuZGVmYXVsdCwgeyBwcmltYXJ5VGV4dDogJ0NlcnJhciBzZXNpb24nLCBvbkNsaWNrOiBwcm9wcy5vbkxvZ291dCB9KVxuICAgICk7XG59XG5cblN1Yk1lbnUubXVpTmFtZSA9ICdJY29uTWVudSc7XG5cbnZhciBBZG1pbkJhY2tvZmZpY2VCYXIgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlQ2xhc3Moe1xuICAgIGRpc3BsYXlOYW1lOiAnQWRtaW5CYWNrb2ZmaWNlQmFyJyxcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRyYXdlck9wZW46IGZhbHNlXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9uTG9nb3V0OiBmdW5jdGlvbiBvbkxvZ291dCgpIHt9XG4gICAgICAgIH07XG4gICAgfSxcbiAgICBjbG9zZURyYXdlcjogZnVuY3Rpb24gY2xvc2VEcmF3ZXIoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkcmF3ZXJPcGVuOiBmYWxzZSB9KTtcbiAgICB9LFxuICAgIHRvZ2dsZURyYXdlcjogZnVuY3Rpb24gdG9nZ2xlRHJhd2VyKCkge1xuICAgICAgICB2YXIgZHJhd2VyT3BlbiA9ICF0aGlzLnN0YXRlLmRyYXdlck9wZW47XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkcmF3ZXJPcGVuOiBkcmF3ZXJPcGVuIH0pO1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0FwcEJhcjIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgIG9uTGVmdEljb25CdXR0b25Ub3VjaFRhcDogdGhpcy50b2dnbGVEcmF3ZXIsXG4gICAgICAgICAgICAgICAgaWNvbkVsZW1lbnRSaWdodDogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoU3ViTWVudSwgeyBvbkxvZ291dDogdGhpcy5wcm9wcy5vbkxvZ291dCB9KSxcbiAgICAgICAgICAgICAgICB0aXRsZTogJ0FkbWluaXN0cmFjaW9uIEhPWSBDT01PJyB9KSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIF9EcmF3ZXIyLmRlZmF1bHQsXG4gICAgICAgICAgICAgICAgeyBvcGVuOiB0aGlzLnN0YXRlLmRyYXdlck9wZW4sIGRvY2tlZDogZmFsc2UsIG9uUmVxdWVzdENoYW5nZTogZnVuY3Rpb24gb25SZXF1ZXN0Q2hhbmdlKG9wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7IGRyYXdlck9wZW46IG9wZW4gfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Um91dGVyRG9tLkxpbmssXG4gICAgICAgICAgICAgICAgICAgIHsgdG86ICcvaW5kZXgnLCBvbkNsaWNrOiB0aGlzLmNsb3NlRHJhd2VyIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgX01lbnVJdGVtMi5kZWZhdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdQcmluY2lwYWwnXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9NZW51SXRlbTIuZGVmYXVsdCwgeyBwcmltYXJ5VGV4dDogJ0NvbWVyY2lvcycsXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0SWNvbjogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX25hdmlnYXRpb25BcnJvd0Ryb3BSaWdodDIuZGVmYXVsdCwgbnVsbCksXG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtczogW19yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Um91dGVyRG9tLkxpbmssXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHRvOiAnL3Nob3BzL2NyZWF0ZScsIG9uQ2xpY2s6IHRoaXMuY2xvc2VEcmF3ZXIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9NZW51SXRlbTIuZGVmYXVsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDcmVhcidcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3RSb3V0ZXJEb20uTGluayxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgdG86ICcvc2hvcHMvbGlzdCcsIG9uQ2xpY2s6IHRoaXMuY2xvc2VEcmF3ZXIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9NZW51SXRlbTIuZGVmYXVsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdWZXInXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICldIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IEFkbWluQmFja29mZmljZUJhcjtcblxuLyoqKi8gfSksXG4vKiAyNzIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKiBDb21wb25lbnRlIGluZGljZSBkZSBhZG1pbmlzdHJhY2lvbiBkZSBIT1kgQ09NTyAqL1xudmFyIEFkbWluSW5kZXggPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlQ2xhc3Moe1xuICAgIGRpc3BsYXlOYW1lOiBcIkFkbWluSW5kZXhcIixcblxuICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6IFwid2l0aC1tYXJnaW4gaW5kZXhcIiB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgXCJoMVwiLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgXCJBZG1pbmlzdHJhY2lvbiBkZSBIT1kgQ09NT1wiXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgXCJoMlwiLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgXCJDb25maWd1cmFjaW9uIHkgZXN0YWRpc3RpY2FzXCJcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBcInBcIixcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIFwiRGVzZGUgYXF1aSBlcyBwb3NpYmxlIG1vbml0b3JlYXIgYSBsb3MgdXN1YXJpb3MgcmVnaXN0cmFkb3MgeSBjb21lcmNpb3MgYXNvY2lhZG9zIGEgbGEgYXBsaWNhY2lvbi5cIlxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBBZG1pbkluZGV4O1xuXG4vKioqLyB9KSxcbi8qIDI3MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9NdWlUaGVtZVByb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG5cbnZhciBfTXVpVGhlbWVQcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9NdWlUaGVtZVByb3ZpZGVyKTtcblxudmFyIF9SYWlzZWRCdXR0b24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4KTtcblxudmFyIF9SYWlzZWRCdXR0b24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUmFpc2VkQnV0dG9uKTtcblxudmFyIF9UZXh0RmllbGQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblxudmFyIF9UZXh0RmllbGQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfVGV4dEZpZWxkKTtcblxudmFyIF9DYXJkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nyk7XG5cbnZhciBfRmxhdEJ1dHRvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXG52YXIgX0ZsYXRCdXR0b24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRmxhdEJ1dHRvbik7XG5cbnZhciBfYXhpb3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblxudmFyIF9heGlvczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9heGlvcyk7XG5cbnZhciBfSGVhZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OCk7XG5cbnZhciBfSGVhZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0hlYWRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8vaW1wb3J0IG1haW5Db25maWcgZnJvbSAnLi4vY29uZmlnL21haW4tY29uZmlnJztcblxuLyogRklOIERFIElNUE9SVFMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIEVNUFRZX0NBTExCQUNLID0gZnVuY3Rpb24gRU1QVFlfQ0FMTEJBQ0soKSB7fTtcblxudmFyIEFkbWluTG9naW4gPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlQ2xhc3Moe1xuICAgIGRpc3BsYXlOYW1lOiAnQWRtaW5Mb2dpbicsXG5cbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiAnJyxcbiAgICAgICAgICAgIHBhc3N3b3JkOiAnJyxcbiAgICAgICAgICAgIGVyck1zZzogbnVsbFxuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICAgICAgcmV0dXJuIHsgb25TdWJtaXQ6IEVNUFRZX0NBTExCQUNLIH07XG4gICAgfSxcblxuICAgIHN1Ym1pdEZvcm06IGZ1bmN0aW9uIHN1Ym1pdEZvcm0oKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgdmFyIHVzZXJuYW1lID0gdGhpcy5zdGF0ZS51c2VybmFtZTtcbiAgICAgICAgdmFyIHBhc3N3b3JkID0gdGhpcy5zdGF0ZS5wYXNzd29yZDtcblxuICAgICAgICAvL2hhZ28gZW5jb2RpbmcgYmFzZTY0IHBhcmEgcGFzYXIgbGFzIGNyZWRlbmNpYWxlc1xuICAgICAgICB2YXIgZW5jb2RlZCA9IGJ0b2EodXNlcm5hbWUgKyAnOicgKyBwYXNzd29yZCk7XG5cbiAgICAgICAgKDAsIF9heGlvczIuZGVmYXVsdCkoe1xuICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsIC8veW91IGNhbiBzZXQgd2hhdCByZXF1ZXN0IHlvdSB3YW50IHRvIGJlXG4gICAgICAgICAgICB1cmw6ICcvYXBpL3YxL2FkbWluL2xvZ2luJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogJ0Jhc2ljICcgKyBlbmNvZGVkIH1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29udGVudHMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb250ZW5pZG86Jyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjb250ZW50cy5kYXRhKTtcbiAgICAgICAgICAgIF90aGlzLnByb3BzLm9uU3VibWl0KGNvbnRlbnRzLmRhdGEudG9rZW4pO1xuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoY2F1c2UpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yJyk7XG4gICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGVyck1zZzogJ0NyZWRlbmNpYWxlcyBpbnZhbGlkYXMnIH0pO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgaGFuZGxlS2V5UHJlc3M6IGZ1bmN0aW9uIGhhbmRsZUtleVByZXNzKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5rZXkgPT0gJ0VudGVyJykgdGhpcy5zdWJtaXRGb3JtKCk7XG4gICAgfSxcblxuICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICB2YXIgbXNnRWxlbSA9IHRoaXMuc3RhdGUuZXJyTXNnID8gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAncCcsXG4gICAgICAgICAgICB7IHN0eWxlOiB7IGNvbG9yOiAncmVkJyB9IH0sXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmVyck1zZ1xuICAgICAgICApIDogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIG51bGwpO1xuXG4gICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBvbktleVByZXNzOiB0aGlzLmhhbmRsZUtleVByZXNzIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfSGVhZGVyMi5kZWZhdWx0LCB7IHRpdGxlOiAnQWRtaW4gSE9ZIENPTU8nIH0pLFxuICAgICAgICAgICAgbXNnRWxlbSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIF9NdWlUaGVtZVByb3ZpZGVyMi5kZWZhdWx0LFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIF9DYXJkLkNhcmQsXG4gICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9DYXJkLkNhcmRIZWFkZXIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnSW5pY2lhciBzZXNpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6ICdJbmdyZXNlIGNyZWRlbmNpYWxlcycgfSksXG4gICAgICAgICAgICAgICAgICAgICc7JyxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBfQ2FyZC5DYXJkVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgZXhwYW5kYWJsZTogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9UZXh0RmllbGQyLmRlZmF1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndXNlcm5hbWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpbnQ6ICd1c2VybmFtZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRpbmdMYWJlbFRleHQ6ICd1c2VybmFtZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5zZXRTdGF0ZSh7IHVzZXJuYW1lOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2JyJywgbnVsbCksXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfVGV4dEZpZWxkMi5kZWZhdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaW50VGV4dDogJ1Bhc3N3b3JkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9hdGluZ0xhYmVsVGV4dDogJ1Bhc3N3b3JkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncGFzc3dvcmQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLnBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuc2V0U3RhdGUoeyBwYXNzd29yZDogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdicicsIG51bGwpXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgX0NhcmQuQ2FyZEFjdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0ZsYXRCdXR0b24yLmRlZmF1bHQsIHsgbGFiZWw6ICdJbmljaWFyIHNlc2lvbicsIG9uQ2xpY2s6IHRoaXMuc3VibWl0Rm9ybSB9KVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBBZG1pbkxvZ2luO1xuXG4vKioqLyB9KSxcbi8qIDI3NCAqLyxcbi8qIDI3NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9NdWlUaGVtZVByb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG5cbnZhciBfTXVpVGhlbWVQcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9NdWlUaGVtZVByb3ZpZGVyKTtcblxudmFyIF9SYWlzZWRCdXR0b24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4KTtcblxudmFyIF9SYWlzZWRCdXR0b24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUmFpc2VkQnV0dG9uKTtcblxudmFyIF9UZXh0RmllbGQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblxudmFyIF9UZXh0RmllbGQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfVGV4dEZpZWxkKTtcblxudmFyIF9DYXJkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nyk7XG5cbnZhciBfQ2hlY2tib3ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KTtcblxudmFyIF9DaGVja2JveDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9DaGVja2JveCk7XG5cbnZhciBfRmxhdEJ1dHRvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXG52YXIgX0ZsYXRCdXR0b24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRmxhdEJ1dHRvbik7XG5cbnZhciBfRGlhbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cbnZhciBfRGlhbG9nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RpYWxvZyk7XG5cbnZhciBfU25hY2tiYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgwKTtcblxudmFyIF9TbmFja2JhcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TbmFja2Jhcik7XG5cbnZhciBfRHJvcERvd25NZW51ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTUpO1xuXG52YXIgX0Ryb3BEb3duTWVudTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Ecm9wRG93bk1lbnUpO1xuXG52YXIgX01lbnVJdGVtID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpO1xuXG52YXIgX01lbnVJdGVtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX01lbnVJdGVtKTtcblxudmFyIF9heGlvcyA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpO1xuXG52YXIgX2F4aW9zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F4aW9zKTtcblxudmFyIF9IZWFkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc4KTtcblxudmFyIF9IZWFkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSGVhZGVyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyogRklOIERFIElNUE9SVFMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIFNob3BGb3JtID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ1Nob3BGb3JtJyxcbiAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICAgICAgcmV0dXJuIHsgdG9rZW46ICcnIH07XG4gICAgfSxcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1zZ1NuYWNrYmFyT3BlbjogZmFsc2UsXG4gICAgICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgICAgIGFkZHJlc3M6ICcnLFxuICAgICAgICAgICAgcGhvbmU6ICcnLFxuICAgICAgICAgICAgem9uZTogMSxcbiAgICAgICAgICAgIGRpc3RyaWN0czogbnVsbCxcbiAgICAgICAgICAgIGFkbWluRW1haWw6ICcnLFxuICAgICAgICAgICAgYWRtaW5OYW1lOiAnJyxcbiAgICAgICAgICAgIGxhdDogJycsXG4gICAgICAgICAgICBsb25nOiAnJ1xuICAgICAgICB9O1xuICAgIH0sXG4gICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCd0b2tlbjogJyArIHRoaXMucHJvcHMudG9rZW4pO1xuICAgICAgICBfYXhpb3MyLmRlZmF1bHQuZ2V0KCcvYXBpL3YxL2Rpc3RyaWN0cycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc2V0U3RhdGUoeyBkaXN0cmljdHM6IHJlc3BvbnNlLmRhdGEuZGlzdHJpY3RzIH0pO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIG9wZW5TbmFja2JhcjogZnVuY3Rpb24gb3BlblNuYWNrYmFyKG1zZykge1xuICAgICAgICBjb25zb2xlLmxvZygnQWJyaWVuZG8gc25hY2sgYmFyJyk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBtc2dTbmFja2Jhck9wZW46IHRydWUsIHNuYWNrYmFyTWVzc2FnZTogbXNnIH0pO1xuICAgIH0sXG4gICAgaGFuZGxlU25hY2tiYXJSZXF1ZXN0Q2xvc2U6IGZ1bmN0aW9uIGhhbmRsZVNuYWNrYmFyUmVxdWVzdENsb3NlKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgbXNnU25hY2tiYXJPcGVuOiBmYWxzZSB9KTtcbiAgICB9LFxuICAgIGhhbmRsZVNob3BDcmVhdGVTdWNjZXNzOiBmdW5jdGlvbiBoYW5kbGVTaG9wQ3JlYXRlU3VjY2VzcyhkYXRhKSB7XG4gICAgICAgIHZhciBzaG9wSWQgPSBkYXRhLnNob3AuaWQ7XG4gICAgICAgIHRoaXMub3BlblNuYWNrYmFyKCdDb21lcmNpbyAnICsgc2hvcElkICsgJyBjcmVhZG8nKTtcbiAgICB9LFxuICAgIGhhbmRsZVNob3BDcmVhdGVFcnJvcjogZnVuY3Rpb24gaGFuZGxlU2hvcENyZWF0ZUVycm9yKGNhdXNlKSB7XG4gICAgICAgIHRoaXMub3BlblNuYWNrYmFyKGNhdXNlLnJlc3BvbnNlLmRhdGEubWVzc2FnZSk7XG4gICAgfSxcbiAgICBjaGVja0ZpZWxkczogZnVuY3Rpb24gY2hlY2tGaWVsZHMoKSB7XG4gICAgICAgIHZhciBfc3RhdGUgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgICAgbmFtZSA9IF9zdGF0ZS5uYW1lLFxuICAgICAgICAgICAgYWRkcmVzcyA9IF9zdGF0ZS5hZGRyZXNzLFxuICAgICAgICAgICAgcGhvbmUgPSBfc3RhdGUucGhvbmUsXG4gICAgICAgICAgICB6b25lID0gX3N0YXRlLnpvbmUsXG4gICAgICAgICAgICBhZG1pbkVtYWlsID0gX3N0YXRlLmFkbWluRW1haWwsXG4gICAgICAgICAgICBhZG1pbk5hbWUgPSBfc3RhdGUuYWRtaW5OYW1lLFxuICAgICAgICAgICAgbGF0ID0gX3N0YXRlLmxhdCxcbiAgICAgICAgICAgIGxvbmcgPSBfc3RhdGUubG9uZztcblxuICAgICAgICBpZiAoIW5hbWUgfHwgIWFkZHJlc3MgfHwgIXBob25lIHx8ICF6b25lIHx8ICFhZG1pbkVtYWlsIHx8ICFhZG1pbk5hbWUgfHwgIWxhdCB8fCAhbG9uZykge1xuICAgICAgICAgICAgcmV0dXJuIHsgb2s6IGZhbHNlLCBtc2c6ICdQYXJhbWV0cm9zIGluY29tcGxldG9zJyB9O1xuICAgICAgICB9IGVsc2UgcmV0dXJuIHsgb2s6IHRydWUgfTtcbiAgICB9LFxuICAgIGNyZWF0ZVNob3A6IGZ1bmN0aW9uIGNyZWF0ZVNob3AoKSB7XG4gICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgIHZhciBmaWVsZHNDaGVjayA9IHRoaXMuY2hlY2tGaWVsZHMoKTtcbiAgICAgICAgaWYgKCFmaWVsZHNDaGVjay5vaykgcmV0dXJuIHRoaXMub3BlblNuYWNrYmFyKGZpZWxkc0NoZWNrLm1zZyk7XG5cbiAgICAgICAgdmFyIF9zdGF0ZTIgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgICAgbmFtZSA9IF9zdGF0ZTIubmFtZSxcbiAgICAgICAgICAgIGFkZHJlc3MgPSBfc3RhdGUyLmFkZHJlc3MsXG4gICAgICAgICAgICBwaG9uZSA9IF9zdGF0ZTIucGhvbmUsXG4gICAgICAgICAgICB6b25lID0gX3N0YXRlMi56b25lLFxuICAgICAgICAgICAgYWRtaW5FbWFpbCA9IF9zdGF0ZTIuYWRtaW5FbWFpbCxcbiAgICAgICAgICAgIGFkbWluTmFtZSA9IF9zdGF0ZTIuYWRtaW5OYW1lLFxuICAgICAgICAgICAgbGF0ID0gX3N0YXRlMi5sYXQsXG4gICAgICAgICAgICBsb25nID0gX3N0YXRlMi5sb25nO1xuXG4gICAgICAgIHZhciB6b25lT2JqID0gdGhpcy5zdGF0ZS5kaXN0cmljdHMuZmluZChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgcmV0dXJuIGQuaWQgPT0gem9uZTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8qIFRPRE8gOiBQT1IgQUhPUkEgU0UgR1VBUkRBIExBIFpPTkEgQ09NTyBVTiBWQVJDSEFSLiBMQSBNSVNNQSBERUJFUklBIEdVQVJEQVJTRSBDT01PIFVOIElEIERFIERJU1RSSVRPICovXG4gICAgICAgIHZhciBib2R5ID0geyBuYW1lOiBuYW1lLCBhZGRyZXNzOiBhZGRyZXNzLCBwaG9uZTogcGhvbmUsIHpvbmU6IHpvbmVPYmoubmFtZSwgYWRtaW5FbWFpbDogYWRtaW5FbWFpbCwgYWRtaW5OYW1lOiBhZG1pbk5hbWUsIGxhdDogbGF0LCBsb25nOiBsb25nIH07XG4gICAgICAgIHZhciBjb25maWcgPSB7IGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0aGlzLnByb3BzLnRva2VuIH0gfTtcbiAgICAgICAgX2F4aW9zMi5kZWZhdWx0LnBvc3QoJy9hcGkvdjEvc2hvcHMnLCBib2R5LCBjb25maWcpLnRoZW4oZnVuY3Rpb24gKGNvbnRlbnRzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjb250ZW50cy5kYXRhKTtcbiAgICAgICAgICAgIF90aGlzMi5oYW5kbGVTaG9wQ3JlYXRlU3VjY2Vzcyhjb250ZW50cy5kYXRhKTtcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGNhdXNlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGNhdXNlKTtcbiAgICAgICAgICAgIF90aGlzMi5oYW5kbGVTaG9wQ3JlYXRlRXJyb3IoY2F1c2UpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGhhbmRsZVpvbmVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVpvbmVDaGFuZ2UoZXZlbnQsIGluZGV4LCB2YWx1ZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgem9uZTogdmFsdWUgfSk7XG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgICAgLy8gc2kgbG9zIGRpc3RyaXRvcyBubyBmdWVyb24gY2FyZ2Fkb3MsIGVudG9uY2VzIHNlIGluZGljYSBhbCB1c3VhcmlvIHF1ZSBkZWJlIGVzcGVyYXJcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmRpc3RyaWN0cykgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICdFc3BlcmUuLi4nXG4gICAgICAgICk7XG5cbiAgICAgICAgdmFyIGRpc3RyaWN0TWVudUl0ZW1zID0gW107XG4gICAgICAgIHRoaXMuc3RhdGUuZGlzdHJpY3RzLmZvckVhY2goZnVuY3Rpb24gKGRpc3RyaWN0KSB7XG4gICAgICAgICAgICByZXR1cm4gZGlzdHJpY3RNZW51SXRlbXMucHVzaChfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTWVudUl0ZW0yLmRlZmF1bHQsIHsgdmFsdWU6IGRpc3RyaWN0LmlkLCBwcmltYXJ5VGV4dDogZGlzdHJpY3QubmFtZSB9KSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBzdHlsZTogeyBwYWRkaW5nQm90dG9tOiAxMCwgYmFja2dyb3VuZENvbG9yOiAncmdiYSgyNTUsMjU1LDI1NSwwLjcpJyB9IH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IHN0eWxlOiB7IG1hcmdpbjogMjAgfSB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnaDEnLFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAnTnVldm8gY29tZXJjaW8nXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaHInLCBudWxsKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2gyJyxcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgJ0RhdG9zIGRlbCBjb21lcmNpbydcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9UZXh0RmllbGQyLmRlZmF1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ05vbWJyZScsXG4gICAgICAgICAgICAgICAgICAgIGhpbnQ6ICdOb21icmUnLFxuICAgICAgICAgICAgICAgICAgICBmbG9hdGluZ0xhYmVsVGV4dDogJ05vbWJyZScsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLnNldFN0YXRlKHsgbmFtZTogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2JyJywgbnVsbCksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1RleHRGaWVsZDIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnRGlyZWNjaW9uJyxcbiAgICAgICAgICAgICAgICAgICAgaGludDogJ0RpcmVjY2lvbicsXG4gICAgICAgICAgICAgICAgICAgIGZsb2F0aW5nTGFiZWxUZXh0OiAnRGlyZWNjaW9uJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUuYWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuc2V0U3RhdGUoeyBhZGRyZXNzOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSB9KSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnYnInLCBudWxsKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfVGV4dEZpZWxkMi5kZWZhdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdMYXRpdHVkJyxcbiAgICAgICAgICAgICAgICAgICAgaGludDogJ0xhdGl0dWQnLFxuICAgICAgICAgICAgICAgICAgICBmbG9hdGluZ0xhYmVsVGV4dDogJ0xhdGl0dWQnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5sYXQsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLnNldFN0YXRlKHsgbGF0OiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSB9KSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfVGV4dEZpZWxkMi5kZWZhdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdMb25naXR1ZCcsXG4gICAgICAgICAgICAgICAgICAgIGhpbnQ6ICdMb25naXR1ZCcsXG4gICAgICAgICAgICAgICAgICAgIGZsb2F0aW5nTGFiZWxUZXh0OiAnTG9uZ2l0dWQnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5sb25nLFxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5zZXRTdGF0ZSh7IGxvbmc6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IH0pLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdicicsIG51bGwpLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICBfRHJvcERvd25NZW51Mi5kZWZhdWx0LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS56b25lLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlWm9uZUNoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5JbW1lZGlhdGVseTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogeyB3aWR0aDogMjAwLCBwYWRkaW5nOiAwIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgZGlzdHJpY3RNZW51SXRlbXNcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICcgJyxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnYnInLCBudWxsKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfVGV4dEZpZWxkMi5kZWZhdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdUZWxlZm9ubycsXG4gICAgICAgICAgICAgICAgICAgIGhpbnQ6ICdUZWxlZm9ubyBzaW4gZ3Vpb24gbmkgZXNwYWNpb3MnLFxuICAgICAgICAgICAgICAgICAgICBmbG9hdGluZ0xhYmVsVGV4dDogJ1RlbGVmb25vJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUucGhvbmUsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLnNldFN0YXRlKHsgcGhvbmU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyB9KSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnYnInLCBudWxsKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaHInLCBudWxsKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2gyJyxcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgJ0RhdG9zIGRlbCBhZG1pbmlzdHJhZG9yIGRlbCBjb21lcmNpbydcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9UZXh0RmllbGQyLmRlZmF1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ05vbWJyZScsXG4gICAgICAgICAgICAgICAgICAgIGhpbnQ6ICdOb21icmUnLFxuICAgICAgICAgICAgICAgICAgICBmbG9hdGluZ0xhYmVsVGV4dDogJ05vbWJyZScsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLmFkbWluTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuc2V0U3RhdGUoeyBhZG1pbk5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IH0pLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdicicsIG51bGwpLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9UZXh0RmllbGQyLmRlZmF1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0VtYWlsJyxcbiAgICAgICAgICAgICAgICAgICAgaGludDogJ0VtYWlsJyxcbiAgICAgICAgICAgICAgICAgICAgZmxvYXRpbmdMYWJlbFRleHQ6ICdFbWFpbCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLmFkbWluRW1haWwsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLnNldFN0YXRlKHsgYWRtaW5FbWFpbDogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2JyJywgbnVsbCksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1JhaXNlZEJ1dHRvbjIuZGVmYXVsdCwgeyBzdHlsZTogeyBtYXJnaW5Ub3A6IDIwIH0sIGxhYmVsOiAnQ3JlYXIgY29tZXJjaW8nLCBvbkNsaWNrOiB0aGlzLmNyZWF0ZVNob3AsIHNlY29uZGFyeTogdHJ1ZSB9KVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9TbmFja2JhcjIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgIG9wZW46IHRoaXMuc3RhdGUubXNnU25hY2tiYXJPcGVuLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuc3RhdGUuc25hY2tiYXJNZXNzYWdlLFxuICAgICAgICAgICAgICAgIGF1dG9IaWRlRHVyYXRpb246IDMwMDAsXG4gICAgICAgICAgICAgICAgb25SZXF1ZXN0Q2xvc2U6IHRoaXMuaGFuZGxlU25hY2tiYXJSZXF1ZXN0Q2xvc2UgfSlcbiAgICAgICAgKTtcbiAgICB9XG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gU2hvcEZvcm07XG5cbi8qKiovIH0pLFxuLyogMjc2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX011aVRoZW1lUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTtcblxudmFyIF9NdWlUaGVtZVByb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX011aVRoZW1lUHJvdmlkZXIpO1xuXG52YXIgX1JhaXNlZEJ1dHRvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpO1xuXG52YXIgX1JhaXNlZEJ1dHRvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9SYWlzZWRCdXR0b24pO1xuXG52YXIgX1RleHRGaWVsZCA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXG52YXIgX1RleHRGaWVsZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9UZXh0RmllbGQpO1xuXG52YXIgX0NhcmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KTtcblxudmFyIF9DaGVja2JveCA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpO1xuXG52YXIgX0NoZWNrYm94MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NoZWNrYm94KTtcblxudmFyIF9GbGF0QnV0dG9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cbnZhciBfRmxhdEJ1dHRvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9GbGF0QnV0dG9uKTtcblxudmFyIF9EaWFsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblxudmFyIF9EaWFsb2cyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGlhbG9nKTtcblxudmFyIF9TbmFja2JhciA9IF9fd2VicGFja19yZXF1aXJlX18oODApO1xuXG52YXIgX1NuYWNrYmFyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1NuYWNrYmFyKTtcblxudmFyIF9heGlvcyA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpO1xuXG52YXIgX2F4aW9zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F4aW9zKTtcblxudmFyIF9IZWFkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc4KTtcblxudmFyIF9IZWFkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSGVhZGVyKTtcblxudmFyIF9TaG9wTWVudSA9IF9fd2VicGFja19yZXF1aXJlX18oMzAxKTtcblxudmFyIF9TaG9wTWVudTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TaG9wTWVudSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qIEZJTiBERSBJTVBPUlRTIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbnZhciBFTVBUWV9DQUxMQkFDSyA9IGZ1bmN0aW9uIEVNUFRZX0NBTExCQUNLKCkge307XG5cbmZ1bmN0aW9uIEJhblNob3BEaWFsb2cocHJvcHMpIHtcbiAgICBmdW5jdGlvbiBiYW5TaG9wKCkge1xuICAgICAgICB2YXIgc2hvcElkID0gcHJvcHMuc2hvcC5pZDtcbiAgICAgICAgcHJvcHMuc2hvcC5lbmFibGVkID0gZmFsc2U7XG4gICAgICAgICgwLCBfYXhpb3MyLmRlZmF1bHQpKHtcbiAgICAgICAgICAgIHVybDogJy9hcGkvdjEvc2hvcHMvJyArIHNob3BJZCxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgcHJvcHMudG9rZW4gfSxcbiAgICAgICAgICAgIGRhdGE6IHByb3BzLnNob3BcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29udGVudHMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvbnRlbnRzLmRhdGEpO1xuICAgICAgICAgICAgcHJvcHMub25TdWNjZXNzKCk7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChjYXVzZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihjYXVzZSk7XG4gICAgICAgICAgICBwcm9wcy5vbkVycm9yKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBhY3Rpb25zID0gW19yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9GbGF0QnV0dG9uMi5kZWZhdWx0LCB7XG4gICAgICAgIGxhYmVsOiAnQ2FuY2VsYXInLFxuICAgICAgICBwcmltYXJ5OiB0cnVlLFxuICAgICAgICBvbkNsaWNrOiBwcm9wcy5vbkNsb3NlXG4gICAgfSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9GbGF0QnV0dG9uMi5kZWZhdWx0LCB7XG4gICAgICAgIGxhYmVsOiAnUHJvaGliaXInLFxuICAgICAgICBwcmltYXJ5OiB0cnVlLFxuICAgICAgICBvbkNsaWNrOiBiYW5TaG9wXG4gICAgfSldO1xuXG4gICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICBfRGlhbG9nMi5kZWZhdWx0LFxuICAgICAgICB7XG4gICAgICAgICAgICB0aXRsZTogJ1Byb2hpYmlyIGNvbWVyY2lvICcgKyBwcm9wcy5zaG9wLmlkLFxuICAgICAgICAgICAgYWN0aW9uczogYWN0aW9ucyxcbiAgICAgICAgICAgIG1vZGFsOiB0cnVlLFxuICAgICAgICAgICAgb3BlbjogcHJvcHMub3BlbiB9LFxuICAgICAgICAnXFx4QkZEZXNlYSBQcm9oaWJpciBlbCBjb21lcmNpbz8nXG4gICAgKTtcbn1cblxudmFyIFNob3BMaXN0ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ1Nob3BMaXN0JyxcbiAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICAgICAgcmV0dXJuIHsgdG9rZW46ICcnIH07XG4gICAgfSxcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNob3BzOiBbXSxcbiAgICAgICAgICAgIGVyclNuYWNrYmFyT3BlbjogZmFsc2UsXG4gICAgICAgICAgICBiYW5TaG9wOiBudWxsLFxuICAgICAgICAgICAgc2hvcE1lbnU6IG51bGxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGxvYWRTaG9wczogZnVuY3Rpb24gbG9hZFNob3BzKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIF9heGlvczIuZGVmYXVsdC5nZXQoJy9hcGkvdjEvc2hvcHM/dG9rZW49JyArIHRoaXMucHJvcHMudG9rZW4pLnRoZW4oZnVuY3Rpb24gKGNvbnRlbnRzKSB7XG4gICAgICAgICAgICB2YXIgc2hvcHMgPSBjb250ZW50cy5kYXRhLnNob3BzO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvYWRTaG9wcyBzaG9wczogJyArIHNob3BzKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzaG9wczonKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHNob3BzKTtcbiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2hvcHM6IHNob3BzIH0pO1xuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoY2F1c2UpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoY2F1c2UpO1xuICAgICAgICAgICAgX3RoaXMub3BlbkVyclNuYWNrYmFyKCdFcnJvciBhbCBvYnRlbmVyIGxvcyBjb21lcmNpb3MnKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0b2tlbjogJyArIHRoaXMucHJvcHMudG9rZW4pO1xuICAgICAgICB0aGlzLmxvYWRTaG9wcygpO1xuICAgICAgICBjb25zb2xlLmxvZygnU2hvcExpc3QgRElEIE1PVU5UJyk7XG4gICAgfSxcbiAgICBvcGVuRXJyU25hY2tiYXI6IGZ1bmN0aW9uIG9wZW5FcnJTbmFja2Jhcihtc2cpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0FicmllbmRvIHNuYWNrIGJhcicpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgZXJyU25hY2tiYXJPcGVuOiB0cnVlLCBlcnJTbmFja2Jhck1lc3NhZ2U6IG1zZyB9KTtcbiAgICB9LFxuICAgIGhhbmRsZUVyclNuYWNrYmFyUmVxdWVzdENsb3NlOiBmdW5jdGlvbiBoYW5kbGVFcnJTbmFja2JhclJlcXVlc3RDbG9zZSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGVyclNuYWNrYmFyT3BlbjogZmFsc2UgfSk7XG4gICAgfSxcbiAgICBjbG9zZUJhbkRpYWxvZzogZnVuY3Rpb24gY2xvc2VCYW5EaWFsb2coc2hvcCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLnNldFN0YXRlKHsgYmFuU2hvcDogbnVsbCB9KTtcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIG9wZW5CYW5EaWFsb2c6IGZ1bmN0aW9uIG9wZW5CYW5EaWFsb2coc2hvcCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2hvcElkID0gc2hvcC5pZCB8fCBzaG9wO1xuICAgICAgICAgICAgc2VsZi5zZXRTdGF0ZSh7IGJhblNob3A6IHNob3BJZCB9KTtcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGhhbmRsZVNob3BCYW5TdWNjZXNzOiBmdW5jdGlvbiBoYW5kbGVTaG9wQmFuU3VjY2VzcyhzaG9wKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuY2xvc2VCYW5EaWFsb2coc2hvcCkoKTtcbiAgICAgICAgICAgIHNlbGYubG9hZFNob3BzKCk7XG4gICAgICAgICAgICBzZWxmLm9wZW5FcnJTbmFja2JhcignQ29tZXJjaW8gYmFuZWFkbycpO1xuICAgICAgICB9O1xuICAgIH0sXG4gICAgZW5hYmxlU2hvcDogZnVuY3Rpb24gZW5hYmxlU2hvcChzaG9wKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgc2hvcC5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICgwLCBfYXhpb3MyLmRlZmF1bHQpKHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvYXBpL3YxL3Nob3BzLycgKyBzaG9wLmlkLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHNlbGYucHJvcHMudG9rZW4gfSxcbiAgICAgICAgICAgICAgICBkYXRhOiBzaG9wXG4gICAgICAgICAgICB9KS50aGVuKHNlbGYubG9hZFNob3BzKS5jYXRjaChmdW5jdGlvbiAoY2F1c2UpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGNhdXNlKTtcbiAgICAgICAgICAgICAgICBzZWxmLm9wZW5FcnJTbmFja2JhcignRXJyb3IgYWwgaGFiaWxpdGFyIGNvbWVyY2lvJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHNob3dNZW51OiBmdW5jdGlvbiBzaG93TWVudShzaG9wKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICgwLCBfYXhpb3MyLmRlZmF1bHQpKHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvYXBpL3YxL3Nob3BzLycgKyBzaG9wLmlkICsgJy9tZW51JyxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBzZWxmLnByb3BzLnRva2VuIH1cbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Nob3dNZW51IGF4aW9zIHJlc3BvbnNlOiAnKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICBzZWxmLnNldFN0YXRlKHsgc2hvcE1lbnU6IHJlc3BvbnNlLmRhdGEubWVudSB9KTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChjYXVzZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoY2F1c2UpO1xuICAgICAgICAgICAgICAgIHNlbGYub3BlbkVyclNuYWNrYmFyKCdFcnJvciBhbCBvYnRlbmVyIG1lbnUgZGUgY29tZXJjaW8nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH0sXG4gICAgaGFuZGxlTWVudUNsb3NlOiBmdW5jdGlvbiBoYW5kbGVNZW51Q2xvc2UoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzaG9wTWVudTogbnVsbCB9KTtcbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICBjb25zb2xlLmxvZyhcInRoaXMuc3RhdGUuc2hvcHM6IFwiICsgdGhpcy5zdGF0ZS5zaG9wcyk7XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2hvcHMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICdObyBoYXkgY29tZXJjaW9zLi4uJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBiYW5TaG9wRGlhbG9nID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuYmFuU2hvcCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NyZWFuZG8gZGlhbG9nbyBkZSBiYW5lbycpO1xuICAgICAgICAgICAgdmFyIHNob3AgPSB0aGlzLnN0YXRlLnNob3BzLmZpbmQoZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcy5pZCA9PSBfdGhpczIuc3RhdGUuYmFuU2hvcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYmFuU2hvcERpYWxvZyA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEJhblNob3BEaWFsb2csIHtcbiAgICAgICAgICAgICAgICBzaG9wOiBzaG9wLFxuICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLnByb3BzLnRva2VuLFxuICAgICAgICAgICAgICAgIG9wZW46IHRydWUsXG4gICAgICAgICAgICAgICAgb25TdWNjZXNzOiB0aGlzLmhhbmRsZVNob3BCYW5TdWNjZXNzKHNob3ApLFxuICAgICAgICAgICAgICAgIG9uQ2xvc2U6IHRoaXMuY2xvc2VCYW5EaWFsb2coc2hvcCksXG4gICAgICAgICAgICAgICAgb25FcnJvcjogZnVuY3Rpb24gb25FcnJvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5vcGVuRXJyU25hY2tiYXIoJ0Vycm9yIGFsIFByb2hpYmlyIGVsIGNvbWVyY2lvICcgKyBzaG9wLmlkKTtcbiAgICAgICAgICAgICAgICB9IH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNob3BNZW51RWxlbSA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNob3BNZW51KSB7XG4gICAgICAgICAgICBzaG9wTWVudUVsZW0gPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfU2hvcE1lbnUyLmRlZmF1bHQsIHsgbWVudTogdGhpcy5zdGF0ZS5zaG9wTWVudSwgZ29CYWNrOiB0aGlzLmhhbmRsZU1lbnVDbG9zZSB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzaG9wQ2FyZHMgPSB0aGlzLnN0YXRlLnNob3BzLm1hcChmdW5jdGlvbiAoc2hvcCkge1xuICAgICAgICAgICAgdmFyIGJhY2tDb2xvcnMgPSBbJyMxQTkzODYnLCAncmdiKDIxLCAxMTQsIDEwNSknLCAnIzEzNEU0OCddO1xuICAgICAgICAgICAgdmFyIGNvbElkeCA9IDA7XG5cbiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBfQ2FyZC5DYXJkLFxuICAgICAgICAgICAgICAgIHsgc3R5bGU6IHsgYmFja2dyb3VuZENvbG9yOiBcInJnYmEoMjU1LDI1NSwyNTUsMC44KVwiLCBtYXJnaW46IDEwIH0gfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfQ2FyZC5DYXJkSGVhZGVyLCB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnQ29tZXJjaW8gJyArIHNob3AuaWQsXG4gICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiBzaG9wLm5hbWVcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgX0NhcmQuQ2FyZFRleHQsXG4gICAgICAgICAgICAgICAgICAgIHsgZXhwYW5kYWJsZTogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0cm9uZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTm9tYnJlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICc6ICcsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG9wLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnICdcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0cm9uZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRGlyZWNjaW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICc6ICcsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG9wLmFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAnICdcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0cm9uZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQmFycmlvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICc6ICcsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG9wLnpvbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnICdcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0cm9uZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVGVsZWZvbm8nXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgJzogJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3AucGhvbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnICdcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIF9DYXJkLkNhcmRBY3Rpb25zLFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfRmxhdEJ1dHRvbjIuZGVmYXVsdCwgeyBsYWJlbDogJ1Byb2hpYmlyJywgc2Vjb25kYXJ5OiB0cnVlLCBkaXNhYmxlZDogIXNob3AuZW5hYmxlZCwgb25DbGljazogX3RoaXMyLm9wZW5CYW5EaWFsb2coc2hvcCkgfSksXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9GbGF0QnV0dG9uMi5kZWZhdWx0LCB7IGxhYmVsOiAnSGFiaWxpdGFyJywgZGlzYWJsZWQ6IHNob3AuZW5hYmxlZCwgb25DbGljazogX3RoaXMyLmVuYWJsZVNob3Aoc2hvcCkgfSksXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9GbGF0QnV0dG9uMi5kZWZhdWx0LCB7IGxhYmVsOiAnTWVudScsIG9uQ2xpY2s6IF90aGlzMi5zaG93TWVudShzaG9wKSB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBtYWluRWxlbSA9IGJhblNob3BEaWFsb2cgfHwgc2hvcE1lbnVFbGVtIHx8IHNob3BDYXJkcztcblxuICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBtYWluRWxlbSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9TbmFja2JhcjIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgIG9wZW46IHRoaXMuc3RhdGUuZXJyU25hY2tiYXJPcGVuLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuc3RhdGUuZXJyU25hY2tiYXJNZXNzYWdlLFxuICAgICAgICAgICAgICAgIGF1dG9IaWRlRHVyYXRpb246IDMwMDAsXG4gICAgICAgICAgICAgICAgb25SZXF1ZXN0Q2xvc2U6IHRoaXMuaGFuZGxlRXJyU25hY2tiYXJSZXF1ZXN0Q2xvc2VcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFNob3BMaXN0O1xuXG4vKioqLyB9KSxcbi8qIDI3NyAqLyxcbi8qIDI3OCAqLyxcbi8qIDI3OSAqLyxcbi8qIDI4MCAqLyxcbi8qIDI4MSAqLyxcbi8qIDI4MiAqLyxcbi8qIDI4MyAqLyxcbi8qIDI4NCAqLyxcbi8qIDI4NSAqLyxcbi8qIDI4NiAqLyxcbi8qIDI4NyAqLyxcbi8qIDI4OCAqLyxcbi8qIDI4OSAqLyxcbi8qIDI5MCAqLyxcbi8qIDI5MSAqLyxcbi8qIDI5MiAqLyxcbi8qIDI5MyAqLyxcbi8qIDI5NCAqLyxcbi8qIDI5NSAqLyxcbi8qIDI5NiAqLyxcbi8qIDI5NyAqLyxcbi8qIDI5OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9GbGF0QnV0dG9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cbnZhciBfRmxhdEJ1dHRvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9GbGF0QnV0dG9uKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIEFjdGlvbkhlYWRlciA9IGZ1bmN0aW9uIEFjdGlvbkhlYWRlcihwcm9wcykge1xuICAgIHZhciB0aXRsZSA9IHByb3BzLnRpdGxlIHx8ICdTaGFyZWQgc2VydmVyJztcbiAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IHN0eWxlOiB7IGNvbG9yOiAnd2hpdGUnLCBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2IoMCwgMTg4LCAyMTIpJywgdHJhbnNpdGlvbjogJ2FsbCA0NTBtcyBjdWJpYy1iZXppZXIoMC4yMywgMSwgMC4zMiwgMSkgMG1zJywgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsIGZvbnRGYW1pbHk6ICdSb2JvdG8sIHNhbnMtc2VyaWYnLCBib3JkZXJSYWRpdXM6ICcwcHgnLCBwb3NpdGlvbjogJ3JlbGF0aXZlJywgekluZGV4OiAxMTAwLCB3aWR0aDogJzEwMCUnLCBkaXNwbGF5OiAnZmxleCcsIHBhZGRpbmdMZWZ0OiAnMjRweCcsIHBhZGRpbmdSaWdodDogJzI0cHgnIH0gfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0ZsYXRCdXR0b24yLmRlZmF1bHQsIHsgc3R5bGU6IHsgY29sb3I6ICd3aGl0ZScgfSwgbGFiZWw6ICdWb2x2ZXInLCBvbkNsaWNrOiBwcm9wcy5vbkNsaWNrIH0pXG4gICAgKTtcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IEFjdGlvbkhlYWRlcjtcblxuLyoqKi8gfSksXG4vKiAyOTkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cbnZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXG52YXIgX3JlYWN0Um91dGVyRG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSk7XG5cbnZhciBfTXVpVGhlbWVQcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXG52YXIgX011aVRoZW1lUHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTXVpVGhlbWVQcm92aWRlcik7XG5cbnZhciBfYXhpb3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblxudmFyIF9heGlvczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9heGlvcyk7XG5cbnZhciBfQWRtaW5CYWNrb2ZmaWNlQmFyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNzEpO1xuXG52YXIgX0FkbWluQmFja29mZmljZUJhcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9BZG1pbkJhY2tvZmZpY2VCYXIpO1xuXG52YXIgX0FkbWluSW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3Mik7XG5cbnZhciBfQWRtaW5JbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9BZG1pbkluZGV4KTtcblxudmFyIF9BZG1pbkxvZ2luID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNzMpO1xuXG52YXIgX0FkbWluTG9naW4yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQWRtaW5Mb2dpbik7XG5cbnZhciBfU2hvcExpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3Nik7XG5cbnZhciBfU2hvcExpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU2hvcExpc3QpO1xuXG52YXIgX1Nob3BGb3JtID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNzUpO1xuXG52YXIgX1Nob3BGb3JtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Nob3BGb3JtKTtcblxudmFyIF9yZWFjdFRhcEV2ZW50UGx1Z2luID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MSk7XG5cbnZhciBfcmVhY3RUYXBFdmVudFBsdWdpbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdFRhcEV2ZW50UGx1Z2luKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuKDAsIF9yZWFjdFRhcEV2ZW50UGx1Z2luMi5kZWZhdWx0KSgpO1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLyogRVNURSBGUkFHTUVOVE8gREUgQ09ESUdPIEVTIFJFUVVFUklETyBQQVJBIExPUyBFVkVOVE9TIERFIFRJUE8gVE9VQ0ggTyBDTElDSyBFTiBDT01QT05FTlRFUyBNQVRFUklBTC1VSSAqL1xuY29uc29sZS5sb2coJ1BhcnNlYW5kbyBjb29raWUgJyArIGRvY3VtZW50LmNvb2tpZSk7XG52YXIgY29va2llID0gZG9jdW1lbnQuY29va2llIHx8ICcnO1xudmFyIGNvb2tpZVRva2VuU3RyID0gY29va2llLnNwbGl0KCc7ICcpLmZpbmQoZnVuY3Rpb24gKHMpIHtcbiAgICByZXR1cm4gcy5zdGFydHNXaXRoKCd0b2tlbj0nKTtcbn0pO1xudmFyIGNvb2tpZVRva2VuID0gY29va2llVG9rZW5TdHIgPyBjb29raWVUb2tlblN0ci5yZXBsYWNlKCd0b2tlbj0nLCAnJykgOiBudWxsO1xuXG52YXIgQWRtaW5CYWNrb2ZmaWNlID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ0FkbWluQmFja29mZmljZScsXG4gICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b2tlbjogbnVsbCxcbiAgICAgICAgICAgIHVzZXI6IG51bGwsXG4gICAgICAgICAgICByZW5kZXJSZWFkeTogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgLyogU0UgQ0FSR0FOIExBUyBDQU5DSU9ORVMgREVTUFVFUyBRVUUgRUwgQ09NUE9ORU5URSBIQVlBIFNJRE8gTU9OVEFETyAqL1xuICAgICAgICBjb25zb2xlLmxvZygnQWRtaW5CYWNrb2ZmaWNlIE1PTlRBREEhJyk7XG4gICAgICAgIC8qIFNpIHNlIGVuY3VlbnRyYSB1biB0b2tlbiBlbiBsYXMgY29va2llcyBlbnRvbmNlcyBzZSBzZXRlYSBlbCBtaXNtbyB5IHNlIG9idGllbmUgZWwgdXN1YXJpb1xyXG4gICAgICAgIENhc28gY29udHJhcmlvLCBzZSBtYXJjYSBhbCBjb21wb25lbnRlIGNvbW8gbGlzdG8gcGFyYSByZW5kZXJpemFyICovXG4gICAgICAgIGlmIChjb29raWVUb2tlbikgdGhpcy5zZXRUb2tlbihjb29raWVUb2tlbik7ZWxzZSB0aGlzLnNldFN0YXRlKHsgcmVuZGVyUmVhZHk6IHRydWUgfSk7XG4gICAgfSxcbiAgICBzZXRUb2tlbjogZnVuY3Rpb24gc2V0VG9rZW4odG9rZW4pIHtcbiAgICAgICAgdG9rZW4gPSB0b2tlbi50b2tlbiB8fCB0b2tlbjtcbiAgICAgICAgY29uc29sZS5sb2coJ1NldGVhbmRvIHRva2VuOiAnICsgdG9rZW4pO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgdG9rZW46IHRva2VuLCByZW5kZXJSZWFkeTogdHJ1ZSB9KTtcbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdSRU5ERVJJTkcgQWRtaW5CYWNrb2ZmaWNlIScpO1xuXG4gICAgICAgIC8vaWYgKCF0aGlzLnN0YXRlLnJlbmRlclJlYWR5KSByZXR1cm4gKDxzcGFuPkVzcGVyZS4uLjwvc3Bhbj4pO1xuXG4gICAgICAgIHZhciB0b2tlbiA9IHRoaXMuc3RhdGUudG9rZW47XG4gICAgICAgIGlmICghdG9rZW4pIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfQWRtaW5Mb2dpbjIuZGVmYXVsdCwgeyBvblN1Ym1pdDogdGhpcy5zZXRUb2tlbiB9KTtcblxuICAgICAgICBjb25zb2xlLmxvZygnd2luZG93LmxvY2F0aW9uLmhhc2g6ICcgKyB3aW5kb3cubG9jYXRpb24uaGFzaCk7XG4gICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaGFzaCA9PSAnIy8nKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUkVQTEFDSU5HIExPQ0FUSU9OJyk7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgnL2FkbWluIy9pbmRleCcpO1xuICAgICAgICAgICAgLy9yZXR1cm4gPHNwYW4+UmVkaXJlY2Npb25hbmRvLi4uPC9zcGFuPjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIFNpIHVuIHVzdWFyaW8gaW5pY2lvIHNlc2lvbiwgcmVuZGVyaXpvIGxhIGFwcCBub3JtYWwgKi9cbiAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgX011aVRoZW1lUHJvdmlkZXIyLmRlZmF1bHQsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfQWRtaW5CYWNrb2ZmaWNlQmFyMi5kZWZhdWx0LCB7IG9uTG9nb3V0OiBmdW5jdGlvbiBvbkxvZ291dCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2dvdXRGb3JtLnN1Ym1pdCgpO1xuICAgICAgICAgICAgICAgICAgICB9IH0pLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFJvdXRlckRvbS5Sb3V0ZSwgeyBwYXRoOiAnL2luZGV4JywgY29tcG9uZW50OiBfQWRtaW5JbmRleDIuZGVmYXVsdCB9KSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSb3V0ZXJEb20uUm91dGUsIHsgcGF0aDogJy9zaG9wcy9saXN0JywgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1Nob3BMaXN0Mi5kZWZhdWx0LCB7IHRva2VuOiB0b2tlbiB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSB9KSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSb3V0ZXJEb20uUm91dGUsIHsgcGF0aDogJy9zaG9wcy9jcmVhdGUnLCBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfU2hvcEZvcm0yLmRlZmF1bHQsIHsgdG9rZW46IHRva2VuIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IH0pLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdmb3JtJywge1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICcvYWRtaW4vbG9nb3V0JyxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2dvdXRGb3JtID0gZjtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsgZGlzcGxheTogJ2hpZGRlbicgfSB9KVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG5fcmVhY3REb20yLmRlZmF1bHQucmVuZGVyKF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgIF9yZWFjdFJvdXRlckRvbS5IYXNoUm91dGVyLFxuICAgIG51bGwsXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQWRtaW5CYWNrb2ZmaWNlLCBudWxsKVxuKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKSk7XG5cbi8qKiovIH0pLFxuLyogMzAwICovLFxuLyogMzAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX011aVRoZW1lUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTtcblxudmFyIF9NdWlUaGVtZVByb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX011aVRoZW1lUHJvdmlkZXIpO1xuXG52YXIgX1JhaXNlZEJ1dHRvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpO1xuXG52YXIgX1JhaXNlZEJ1dHRvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9SYWlzZWRCdXR0b24pO1xuXG52YXIgX1RleHRGaWVsZCA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXG52YXIgX1RleHRGaWVsZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9UZXh0RmllbGQpO1xuXG52YXIgX0NhcmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KTtcblxudmFyIF9DaGVja2JveCA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpO1xuXG52YXIgX0NoZWNrYm94MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NoZWNrYm94KTtcblxudmFyIF9GbGF0QnV0dG9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cbnZhciBfRmxhdEJ1dHRvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9GbGF0QnV0dG9uKTtcblxudmFyIF9EaWFsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblxudmFyIF9EaWFsb2cyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGlhbG9nKTtcblxudmFyIF9TbmFja2JhciA9IF9fd2VicGFja19yZXF1aXJlX18oODApO1xuXG52YXIgX1NuYWNrYmFyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1NuYWNrYmFyKTtcblxudmFyIF9BY3Rpb25IZWFkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5OCk7XG5cbnZhciBfQWN0aW9uSGVhZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0FjdGlvbkhlYWRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIFNob3BNZW51KHByb3BzKSB7XG4gICAgdmFyIG1lbnUgPSBwcm9wcy5tZW51O1xuXG4gICAgdmFyIG1lbnVDYXJkcyA9IG1lbnUubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHZhciBkaXNoID0gaXRlbS5kaXNoO1xuICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBfQ2FyZC5DYXJkLFxuICAgICAgICAgICAgeyBzdHlsZTogeyBiYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSgyNTUsMjU1LDI1NSwwLjcpXCIgfSB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0NhcmQuQ2FyZEhlYWRlciwge1xuICAgICAgICAgICAgICAgIHRpdGxlOiAnUGxhdG8gJyArIGRpc2guaWQsXG4gICAgICAgICAgICAgICAgc3VidGl0bGU6IGRpc2gubmFtZSB9KSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIF9DYXJkLkNhcmRUZXh0LFxuICAgICAgICAgICAgICAgIHsgZXhwYW5kYWJsZTogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdzdHJvbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdEZXNjcmlwY2lvbjonXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICcgJyxcbiAgICAgICAgICAgICAgICAgICAgZGlzaC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICAgICAgJyAnXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdzdHJvbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdDb3N0bzonXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICcgJyxcbiAgICAgICAgICAgICAgICAgICAgZGlzaC5jb3N0LFxuICAgICAgICAgICAgICAgICAgICAnICdcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICBudWxsLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfQWN0aW9uSGVhZGVyMi5kZWZhdWx0LCB7IG9uQ2xpY2s6IHByb3BzLmdvQmFjayB9KSxcbiAgICAgICAgbWVudUNhcmRzXG4gICAgKTtcbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gU2hvcE1lbnU7XG5cbi8qKiovIH0pXG5dLFsyOTldKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYWRtaW5iYWNrb2ZmaWNlLmJ1bmRsZS5qcyIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFVzZSBpbnZhcmlhbnQoKSB0byBhc3NlcnQgc3RhdGUgd2hpY2ggeW91ciBwcm9ncmFtIGFzc3VtZXMgdG8gYmUgdHJ1ZS5cbiAqXG4gKiBQcm92aWRlIHNwcmludGYtc3R5bGUgZm9ybWF0IChvbmx5ICVzIGlzIHN1cHBvcnRlZCkgYW5kIGFyZ3VtZW50c1xuICogdG8gcHJvdmlkZSBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGJyb2tlIGFuZCB3aGF0IHlvdSB3ZXJlXG4gKiBleHBlY3RpbmcuXG4gKlxuICogVGhlIGludmFyaWFudCBtZXNzYWdlIHdpbGwgYmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiwgYnV0IHRoZSBpbnZhcmlhbnRcbiAqIHdpbGwgcmVtYWluIHRvIGVuc3VyZSBsb2dpYyBkb2VzIG5vdCBkaWZmZXIgaW4gcHJvZHVjdGlvbi5cbiAqL1xuXG52YXIgaW52YXJpYW50ID0gZnVuY3Rpb24oY29uZGl0aW9uLCBmb3JtYXQsIGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaW52YXJpYW50IHJlcXVpcmVzIGFuIGVycm9yIG1lc3NhZ2UgYXJndW1lbnQnKTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWNvbmRpdGlvbikge1xuICAgIHZhciBlcnJvcjtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgICAnTWluaWZpZWQgZXhjZXB0aW9uIG9jY3VycmVkOyB1c2UgdGhlIG5vbi1taW5pZmllZCBkZXYgZW52aXJvbm1lbnQgJyArXG4gICAgICAgICdmb3IgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZSBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLidcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhcmdzID0gW2EsIGIsIGMsIGQsIGUsIGZdO1xuICAgICAgdmFyIGFyZ0luZGV4ID0gMDtcbiAgICAgIGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgICBmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24oKSB7IHJldHVybiBhcmdzW2FyZ0luZGV4KytdOyB9KVxuICAgICAgKTtcbiAgICAgIGVycm9yLm5hbWUgPSAnSW52YXJpYW50IFZpb2xhdGlvbic7XG4gICAgfVxuXG4gICAgZXJyb3IuZnJhbWVzVG9Qb3AgPSAxOyAvLyB3ZSBkb24ndCBjYXJlIGFib3V0IGludmFyaWFudCdzIG93biBmcmFtZVxuICAgIHRocm93IGVycm9yO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGludmFyaWFudDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9pbnZhcmlhbnQvYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG52YXIgYWRkTGVhZGluZ1NsYXNoID0gZXhwb3J0cy5hZGRMZWFkaW5nU2xhc2ggPSBmdW5jdGlvbiBhZGRMZWFkaW5nU2xhc2gocGF0aCkge1xuICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJyA/IHBhdGggOiAnLycgKyBwYXRoO1xufTtcblxudmFyIHN0cmlwTGVhZGluZ1NsYXNoID0gZXhwb3J0cy5zdHJpcExlYWRpbmdTbGFzaCA9IGZ1bmN0aW9uIHN0cmlwTGVhZGluZ1NsYXNoKHBhdGgpIHtcbiAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLycgPyBwYXRoLnN1YnN0cigxKSA6IHBhdGg7XG59O1xuXG52YXIgaGFzQmFzZW5hbWUgPSBleHBvcnRzLmhhc0Jhc2VuYW1lID0gZnVuY3Rpb24gaGFzQmFzZW5hbWUocGF0aCwgcHJlZml4KSB7XG4gIHJldHVybiBuZXcgUmVnRXhwKCdeJyArIHByZWZpeCArICcoXFxcXC98XFxcXD98I3wkKScsICdpJykudGVzdChwYXRoKTtcbn07XG5cbnZhciBzdHJpcEJhc2VuYW1lID0gZXhwb3J0cy5zdHJpcEJhc2VuYW1lID0gZnVuY3Rpb24gc3RyaXBCYXNlbmFtZShwYXRoLCBwcmVmaXgpIHtcbiAgcmV0dXJuIGhhc0Jhc2VuYW1lKHBhdGgsIHByZWZpeCkgPyBwYXRoLnN1YnN0cihwcmVmaXgubGVuZ3RoKSA6IHBhdGg7XG59O1xuXG52YXIgc3RyaXBUcmFpbGluZ1NsYXNoID0gZXhwb3J0cy5zdHJpcFRyYWlsaW5nU2xhc2ggPSBmdW5jdGlvbiBzdHJpcFRyYWlsaW5nU2xhc2gocGF0aCkge1xuICByZXR1cm4gcGF0aC5jaGFyQXQocGF0aC5sZW5ndGggLSAxKSA9PT0gJy8nID8gcGF0aC5zbGljZSgwLCAtMSkgOiBwYXRoO1xufTtcblxudmFyIHBhcnNlUGF0aCA9IGV4cG9ydHMucGFyc2VQYXRoID0gZnVuY3Rpb24gcGFyc2VQYXRoKHBhdGgpIHtcbiAgdmFyIHBhdGhuYW1lID0gcGF0aCB8fCAnLyc7XG4gIHZhciBzZWFyY2ggPSAnJztcbiAgdmFyIGhhc2ggPSAnJztcblxuICB2YXIgaGFzaEluZGV4ID0gcGF0aG5hbWUuaW5kZXhPZignIycpO1xuICBpZiAoaGFzaEluZGV4ICE9PSAtMSkge1xuICAgIGhhc2ggPSBwYXRobmFtZS5zdWJzdHIoaGFzaEluZGV4KTtcbiAgICBwYXRobmFtZSA9IHBhdGhuYW1lLnN1YnN0cigwLCBoYXNoSW5kZXgpO1xuICB9XG5cbiAgdmFyIHNlYXJjaEluZGV4ID0gcGF0aG5hbWUuaW5kZXhPZignPycpO1xuICBpZiAoc2VhcmNoSW5kZXggIT09IC0xKSB7XG4gICAgc2VhcmNoID0gcGF0aG5hbWUuc3Vic3RyKHNlYXJjaEluZGV4KTtcbiAgICBwYXRobmFtZSA9IHBhdGhuYW1lLnN1YnN0cigwLCBzZWFyY2hJbmRleCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHBhdGhuYW1lOiBwYXRobmFtZSxcbiAgICBzZWFyY2g6IHNlYXJjaCA9PT0gJz8nID8gJycgOiBzZWFyY2gsXG4gICAgaGFzaDogaGFzaCA9PT0gJyMnID8gJycgOiBoYXNoXG4gIH07XG59O1xuXG52YXIgY3JlYXRlUGF0aCA9IGV4cG9ydHMuY3JlYXRlUGF0aCA9IGZ1bmN0aW9uIGNyZWF0ZVBhdGgobG9jYXRpb24pIHtcbiAgdmFyIHBhdGhuYW1lID0gbG9jYXRpb24ucGF0aG5hbWUsXG4gICAgICBzZWFyY2ggPSBsb2NhdGlvbi5zZWFyY2gsXG4gICAgICBoYXNoID0gbG9jYXRpb24uaGFzaDtcblxuXG4gIHZhciBwYXRoID0gcGF0aG5hbWUgfHwgJy8nO1xuXG4gIGlmIChzZWFyY2ggJiYgc2VhcmNoICE9PSAnPycpIHBhdGggKz0gc2VhcmNoLmNoYXJBdCgwKSA9PT0gJz8nID8gc2VhcmNoIDogJz8nICsgc2VhcmNoO1xuXG4gIGlmIChoYXNoICYmIGhhc2ggIT09ICcjJykgcGF0aCArPSBoYXNoLmNoYXJBdCgwKSA9PT0gJyMnID8gaGFzaCA6ICcjJyArIGhhc2g7XG5cbiAgcmV0dXJuIHBhdGg7XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9oaXN0b3J5L1BhdGhVdGlscy5qc1xuLy8gbW9kdWxlIGlkID0gMzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJleHBvcnQgdmFyIGFkZExlYWRpbmdTbGFzaCA9IGZ1bmN0aW9uIGFkZExlYWRpbmdTbGFzaChwYXRoKSB7XG4gIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nID8gcGF0aCA6ICcvJyArIHBhdGg7XG59O1xuXG5leHBvcnQgdmFyIHN0cmlwTGVhZGluZ1NsYXNoID0gZnVuY3Rpb24gc3RyaXBMZWFkaW5nU2xhc2gocGF0aCkge1xuICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJyA/IHBhdGguc3Vic3RyKDEpIDogcGF0aDtcbn07XG5cbmV4cG9ydCB2YXIgaGFzQmFzZW5hbWUgPSBmdW5jdGlvbiBoYXNCYXNlbmFtZShwYXRoLCBwcmVmaXgpIHtcbiAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgcHJlZml4ICsgJyhcXFxcL3xcXFxcP3wjfCQpJywgJ2knKS50ZXN0KHBhdGgpO1xufTtcblxuZXhwb3J0IHZhciBzdHJpcEJhc2VuYW1lID0gZnVuY3Rpb24gc3RyaXBCYXNlbmFtZShwYXRoLCBwcmVmaXgpIHtcbiAgcmV0dXJuIGhhc0Jhc2VuYW1lKHBhdGgsIHByZWZpeCkgPyBwYXRoLnN1YnN0cihwcmVmaXgubGVuZ3RoKSA6IHBhdGg7XG59O1xuXG5leHBvcnQgdmFyIHN0cmlwVHJhaWxpbmdTbGFzaCA9IGZ1bmN0aW9uIHN0cmlwVHJhaWxpbmdTbGFzaChwYXRoKSB7XG4gIHJldHVybiBwYXRoLmNoYXJBdChwYXRoLmxlbmd0aCAtIDEpID09PSAnLycgPyBwYXRoLnNsaWNlKDAsIC0xKSA6IHBhdGg7XG59O1xuXG5leHBvcnQgdmFyIHBhcnNlUGF0aCA9IGZ1bmN0aW9uIHBhcnNlUGF0aChwYXRoKSB7XG4gIHZhciBwYXRobmFtZSA9IHBhdGggfHwgJy8nO1xuICB2YXIgc2VhcmNoID0gJyc7XG4gIHZhciBoYXNoID0gJyc7XG5cbiAgdmFyIGhhc2hJbmRleCA9IHBhdGhuYW1lLmluZGV4T2YoJyMnKTtcbiAgaWYgKGhhc2hJbmRleCAhPT0gLTEpIHtcbiAgICBoYXNoID0gcGF0aG5hbWUuc3Vic3RyKGhhc2hJbmRleCk7XG4gICAgcGF0aG5hbWUgPSBwYXRobmFtZS5zdWJzdHIoMCwgaGFzaEluZGV4KTtcbiAgfVxuXG4gIHZhciBzZWFyY2hJbmRleCA9IHBhdGhuYW1lLmluZGV4T2YoJz8nKTtcbiAgaWYgKHNlYXJjaEluZGV4ICE9PSAtMSkge1xuICAgIHNlYXJjaCA9IHBhdGhuYW1lLnN1YnN0cihzZWFyY2hJbmRleCk7XG4gICAgcGF0aG5hbWUgPSBwYXRobmFtZS5zdWJzdHIoMCwgc2VhcmNoSW5kZXgpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwYXRobmFtZTogcGF0aG5hbWUsXG4gICAgc2VhcmNoOiBzZWFyY2ggPT09ICc/JyA/ICcnIDogc2VhcmNoLFxuICAgIGhhc2g6IGhhc2ggPT09ICcjJyA/ICcnIDogaGFzaFxuICB9O1xufTtcblxuZXhwb3J0IHZhciBjcmVhdGVQYXRoID0gZnVuY3Rpb24gY3JlYXRlUGF0aChsb2NhdGlvbikge1xuICB2YXIgcGF0aG5hbWUgPSBsb2NhdGlvbi5wYXRobmFtZSxcbiAgICAgIHNlYXJjaCA9IGxvY2F0aW9uLnNlYXJjaCxcbiAgICAgIGhhc2ggPSBsb2NhdGlvbi5oYXNoO1xuXG5cbiAgdmFyIHBhdGggPSBwYXRobmFtZSB8fCAnLyc7XG5cbiAgaWYgKHNlYXJjaCAmJiBzZWFyY2ggIT09ICc/JykgcGF0aCArPSBzZWFyY2guY2hhckF0KDApID09PSAnPycgPyBzZWFyY2ggOiAnPycgKyBzZWFyY2g7XG5cbiAgaWYgKGhhc2ggJiYgaGFzaCAhPT0gJyMnKSBwYXRoICs9IGhhc2guY2hhckF0KDApID09PSAnIycgPyBoYXNoIDogJyMnICsgaGFzaDtcblxuICByZXR1cm4gcGF0aDtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2hpc3RvcnkvZXMvUGF0aFV0aWxzLmpzXG4vLyBtb2R1bGUgaWQgPSAzMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsInZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmltcG9ydCByZXNvbHZlUGF0aG5hbWUgZnJvbSAncmVzb2x2ZS1wYXRobmFtZSc7XG5pbXBvcnQgdmFsdWVFcXVhbCBmcm9tICd2YWx1ZS1lcXVhbCc7XG5pbXBvcnQgeyBwYXJzZVBhdGggfSBmcm9tICcuL1BhdGhVdGlscyc7XG5cbmV4cG9ydCB2YXIgY3JlYXRlTG9jYXRpb24gPSBmdW5jdGlvbiBjcmVhdGVMb2NhdGlvbihwYXRoLCBzdGF0ZSwga2V5LCBjdXJyZW50TG9jYXRpb24pIHtcbiAgdmFyIGxvY2F0aW9uID0gdm9pZCAwO1xuICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG4gICAgLy8gVHdvLWFyZyBmb3JtOiBwdXNoKHBhdGgsIHN0YXRlKVxuICAgIGxvY2F0aW9uID0gcGFyc2VQYXRoKHBhdGgpO1xuICAgIGxvY2F0aW9uLnN0YXRlID0gc3RhdGU7XG4gIH0gZWxzZSB7XG4gICAgLy8gT25lLWFyZyBmb3JtOiBwdXNoKGxvY2F0aW9uKVxuICAgIGxvY2F0aW9uID0gX2V4dGVuZHMoe30sIHBhdGgpO1xuXG4gICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lID09PSB1bmRlZmluZWQpIGxvY2F0aW9uLnBhdGhuYW1lID0gJyc7XG5cbiAgICBpZiAobG9jYXRpb24uc2VhcmNoKSB7XG4gICAgICBpZiAobG9jYXRpb24uc2VhcmNoLmNoYXJBdCgwKSAhPT0gJz8nKSBsb2NhdGlvbi5zZWFyY2ggPSAnPycgKyBsb2NhdGlvbi5zZWFyY2g7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uLnNlYXJjaCA9ICcnO1xuICAgIH1cblxuICAgIGlmIChsb2NhdGlvbi5oYXNoKSB7XG4gICAgICBpZiAobG9jYXRpb24uaGFzaC5jaGFyQXQoMCkgIT09ICcjJykgbG9jYXRpb24uaGFzaCA9ICcjJyArIGxvY2F0aW9uLmhhc2g7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uLmhhc2ggPSAnJztcbiAgICB9XG5cbiAgICBpZiAoc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBsb2NhdGlvbi5zdGF0ZSA9PT0gdW5kZWZpbmVkKSBsb2NhdGlvbi5zdGF0ZSA9IHN0YXRlO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBsb2NhdGlvbi5wYXRobmFtZSA9IGRlY29kZVVSSShsb2NhdGlvbi5wYXRobmFtZSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIFVSSUVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgVVJJRXJyb3IoJ1BhdGhuYW1lIFwiJyArIGxvY2F0aW9uLnBhdGhuYW1lICsgJ1wiIGNvdWxkIG5vdCBiZSBkZWNvZGVkLiAnICsgJ1RoaXMgaXMgbGlrZWx5IGNhdXNlZCBieSBhbiBpbnZhbGlkIHBlcmNlbnQtZW5jb2RpbmcuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG5cbiAgaWYgKGtleSkgbG9jYXRpb24ua2V5ID0ga2V5O1xuXG4gIGlmIChjdXJyZW50TG9jYXRpb24pIHtcbiAgICAvLyBSZXNvbHZlIGluY29tcGxldGUvcmVsYXRpdmUgcGF0aG5hbWUgcmVsYXRpdmUgdG8gY3VycmVudCBsb2NhdGlvbi5cbiAgICBpZiAoIWxvY2F0aW9uLnBhdGhuYW1lKSB7XG4gICAgICBsb2NhdGlvbi5wYXRobmFtZSA9IGN1cnJlbnRMb2NhdGlvbi5wYXRobmFtZTtcbiAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLnBhdGhuYW1lLmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICBsb2NhdGlvbi5wYXRobmFtZSA9IHJlc29sdmVQYXRobmFtZShsb2NhdGlvbi5wYXRobmFtZSwgY3VycmVudExvY2F0aW9uLnBhdGhuYW1lKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gV2hlbiB0aGVyZSBpcyBubyBwcmlvciBsb2NhdGlvbiBhbmQgcGF0aG5hbWUgaXMgZW1wdHksIHNldCBpdCB0byAvXG4gICAgaWYgKCFsb2NhdGlvbi5wYXRobmFtZSkge1xuICAgICAgbG9jYXRpb24ucGF0aG5hbWUgPSAnLyc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGxvY2F0aW9uO1xufTtcblxuZXhwb3J0IHZhciBsb2NhdGlvbnNBcmVFcXVhbCA9IGZ1bmN0aW9uIGxvY2F0aW9uc0FyZUVxdWFsKGEsIGIpIHtcbiAgcmV0dXJuIGEucGF0aG5hbWUgPT09IGIucGF0aG5hbWUgJiYgYS5zZWFyY2ggPT09IGIuc2VhcmNoICYmIGEuaGFzaCA9PT0gYi5oYXNoICYmIGEua2V5ID09PSBiLmtleSAmJiB2YWx1ZUVxdWFsKGEuc3RhdGUsIGIuc3RhdGUpO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vaGlzdG9yeS9lcy9Mb2NhdGlvblV0aWxzLmpzXG4vLyBtb2R1bGUgaWQgPSAzN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHVuZGVmaW5lZDtcblxudmFyIF9EaWFsb2cgPSByZXF1aXJlKCcuL0RpYWxvZycpO1xuXG52YXIgX0RpYWxvZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EaWFsb2cpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5leHBvcnRzLmRlZmF1bHQgPSBfRGlhbG9nMi5kZWZhdWx0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9EaWFsb2cvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDQ1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAyIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5sb2NhdGlvbnNBcmVFcXVhbCA9IGV4cG9ydHMuY3JlYXRlTG9jYXRpb24gPSB1bmRlZmluZWQ7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfcmVzb2x2ZVBhdGhuYW1lID0gcmVxdWlyZSgncmVzb2x2ZS1wYXRobmFtZScpO1xuXG52YXIgX3Jlc29sdmVQYXRobmFtZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZXNvbHZlUGF0aG5hbWUpO1xuXG52YXIgX3ZhbHVlRXF1YWwgPSByZXF1aXJlKCd2YWx1ZS1lcXVhbCcpO1xuXG52YXIgX3ZhbHVlRXF1YWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsdWVFcXVhbCk7XG5cbnZhciBfUGF0aFV0aWxzID0gcmVxdWlyZSgnLi9QYXRoVXRpbHMnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGNyZWF0ZUxvY2F0aW9uID0gZXhwb3J0cy5jcmVhdGVMb2NhdGlvbiA9IGZ1bmN0aW9uIGNyZWF0ZUxvY2F0aW9uKHBhdGgsIHN0YXRlLCBrZXksIGN1cnJlbnRMb2NhdGlvbikge1xuICB2YXIgbG9jYXRpb24gPSB2b2lkIDA7XG4gIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcbiAgICAvLyBUd28tYXJnIGZvcm06IHB1c2gocGF0aCwgc3RhdGUpXG4gICAgbG9jYXRpb24gPSAoMCwgX1BhdGhVdGlscy5wYXJzZVBhdGgpKHBhdGgpO1xuICAgIGxvY2F0aW9uLnN0YXRlID0gc3RhdGU7XG4gIH0gZWxzZSB7XG4gICAgLy8gT25lLWFyZyBmb3JtOiBwdXNoKGxvY2F0aW9uKVxuICAgIGxvY2F0aW9uID0gX2V4dGVuZHMoe30sIHBhdGgpO1xuXG4gICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lID09PSB1bmRlZmluZWQpIGxvY2F0aW9uLnBhdGhuYW1lID0gJyc7XG5cbiAgICBpZiAobG9jYXRpb24uc2VhcmNoKSB7XG4gICAgICBpZiAobG9jYXRpb24uc2VhcmNoLmNoYXJBdCgwKSAhPT0gJz8nKSBsb2NhdGlvbi5zZWFyY2ggPSAnPycgKyBsb2NhdGlvbi5zZWFyY2g7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uLnNlYXJjaCA9ICcnO1xuICAgIH1cblxuICAgIGlmIChsb2NhdGlvbi5oYXNoKSB7XG4gICAgICBpZiAobG9jYXRpb24uaGFzaC5jaGFyQXQoMCkgIT09ICcjJykgbG9jYXRpb24uaGFzaCA9ICcjJyArIGxvY2F0aW9uLmhhc2g7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uLmhhc2ggPSAnJztcbiAgICB9XG5cbiAgICBpZiAoc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBsb2NhdGlvbi5zdGF0ZSA9PT0gdW5kZWZpbmVkKSBsb2NhdGlvbi5zdGF0ZSA9IHN0YXRlO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBsb2NhdGlvbi5wYXRobmFtZSA9IGRlY29kZVVSSShsb2NhdGlvbi5wYXRobmFtZSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIFVSSUVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgVVJJRXJyb3IoJ1BhdGhuYW1lIFwiJyArIGxvY2F0aW9uLnBhdGhuYW1lICsgJ1wiIGNvdWxkIG5vdCBiZSBkZWNvZGVkLiAnICsgJ1RoaXMgaXMgbGlrZWx5IGNhdXNlZCBieSBhbiBpbnZhbGlkIHBlcmNlbnQtZW5jb2RpbmcuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG5cbiAgaWYgKGtleSkgbG9jYXRpb24ua2V5ID0ga2V5O1xuXG4gIGlmIChjdXJyZW50TG9jYXRpb24pIHtcbiAgICAvLyBSZXNvbHZlIGluY29tcGxldGUvcmVsYXRpdmUgcGF0aG5hbWUgcmVsYXRpdmUgdG8gY3VycmVudCBsb2NhdGlvbi5cbiAgICBpZiAoIWxvY2F0aW9uLnBhdGhuYW1lKSB7XG4gICAgICBsb2NhdGlvbi5wYXRobmFtZSA9IGN1cnJlbnRMb2NhdGlvbi5wYXRobmFtZTtcbiAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLnBhdGhuYW1lLmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICBsb2NhdGlvbi5wYXRobmFtZSA9ICgwLCBfcmVzb2x2ZVBhdGhuYW1lMi5kZWZhdWx0KShsb2NhdGlvbi5wYXRobmFtZSwgY3VycmVudExvY2F0aW9uLnBhdGhuYW1lKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gV2hlbiB0aGVyZSBpcyBubyBwcmlvciBsb2NhdGlvbiBhbmQgcGF0aG5hbWUgaXMgZW1wdHksIHNldCBpdCB0byAvXG4gICAgaWYgKCFsb2NhdGlvbi5wYXRobmFtZSkge1xuICAgICAgbG9jYXRpb24ucGF0aG5hbWUgPSAnLyc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGxvY2F0aW9uO1xufTtcblxudmFyIGxvY2F0aW9uc0FyZUVxdWFsID0gZXhwb3J0cy5sb2NhdGlvbnNBcmVFcXVhbCA9IGZ1bmN0aW9uIGxvY2F0aW9uc0FyZUVxdWFsKGEsIGIpIHtcbiAgcmV0dXJuIGEucGF0aG5hbWUgPT09IGIucGF0aG5hbWUgJiYgYS5zZWFyY2ggPT09IGIuc2VhcmNoICYmIGEuaGFzaCA9PT0gYi5oYXNoICYmIGEua2V5ID09PSBiLmtleSAmJiAoMCwgX3ZhbHVlRXF1YWwyLmRlZmF1bHQpKGEuc3RhdGUsIGIuc3RhdGUpO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vaGlzdG9yeS9Mb2NhdGlvblV0aWxzLmpzXG4vLyBtb2R1bGUgaWQgPSA0OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF93YXJuaW5nID0gcmVxdWlyZSgnd2FybmluZycpO1xuXG52YXIgX3dhcm5pbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2FybmluZyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBjcmVhdGVUcmFuc2l0aW9uTWFuYWdlciA9IGZ1bmN0aW9uIGNyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyKCkge1xuICB2YXIgcHJvbXB0ID0gbnVsbDtcblxuICB2YXIgc2V0UHJvbXB0ID0gZnVuY3Rpb24gc2V0UHJvbXB0KG5leHRQcm9tcHQpIHtcbiAgICAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKHByb21wdCA9PSBudWxsLCAnQSBoaXN0b3J5IHN1cHBvcnRzIG9ubHkgb25lIHByb21wdCBhdCBhIHRpbWUnKTtcblxuICAgIHByb21wdCA9IG5leHRQcm9tcHQ7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHByb21wdCA9PT0gbmV4dFByb21wdCkgcHJvbXB0ID0gbnVsbDtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBjb25maXJtVHJhbnNpdGlvblRvID0gZnVuY3Rpb24gY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBjYWxsYmFjaykge1xuICAgIC8vIFRPRE86IElmIGFub3RoZXIgdHJhbnNpdGlvbiBzdGFydHMgd2hpbGUgd2UncmUgc3RpbGwgY29uZmlybWluZ1xuICAgIC8vIHRoZSBwcmV2aW91cyBvbmUsIHdlIG1heSBlbmQgdXAgaW4gYSB3ZWlyZCBzdGF0ZS4gRmlndXJlIG91dCB0aGVcbiAgICAvLyBiZXN0IHdheSB0byBoYW5kbGUgdGhpcy5cbiAgICBpZiAocHJvbXB0ICE9IG51bGwpIHtcbiAgICAgIHZhciByZXN1bHQgPSB0eXBlb2YgcHJvbXB0ID09PSAnZnVuY3Rpb24nID8gcHJvbXB0KGxvY2F0aW9uLCBhY3Rpb24pIDogcHJvbXB0O1xuXG4gICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBnZXRVc2VyQ29uZmlybWF0aW9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgZ2V0VXNlckNvbmZpcm1hdGlvbihyZXN1bHQsIGNhbGxiYWNrKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKGZhbHNlLCAnQSBoaXN0b3J5IG5lZWRzIGEgZ2V0VXNlckNvbmZpcm1hdGlvbiBmdW5jdGlvbiBpbiBvcmRlciB0byB1c2UgYSBwcm9tcHQgbWVzc2FnZScpO1xuXG4gICAgICAgICAgY2FsbGJhY2sodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJldHVybiBmYWxzZSBmcm9tIGEgdHJhbnNpdGlvbiBob29rIHRvIGNhbmNlbCB0aGUgdHJhbnNpdGlvbi5cbiAgICAgICAgY2FsbGJhY2socmVzdWx0ICE9PSBmYWxzZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxiYWNrKHRydWUpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgbGlzdGVuZXJzID0gW107XG5cbiAgdmFyIGFwcGVuZExpc3RlbmVyID0gZnVuY3Rpb24gYXBwZW5kTGlzdGVuZXIoZm4pIHtcbiAgICB2YXIgaXNBY3RpdmUgPSB0cnVlO1xuXG4gICAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24gbGlzdGVuZXIoKSB7XG4gICAgICBpZiAoaXNBY3RpdmUpIGZuLmFwcGx5KHVuZGVmaW5lZCwgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlzQWN0aXZlID0gZmFsc2U7XG4gICAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiBpdGVtICE9PSBsaXN0ZW5lcjtcbiAgICAgIH0pO1xuICAgIH07XG4gIH07XG5cbiAgdmFyIG5vdGlmeUxpc3RlbmVycyA9IGZ1bmN0aW9uIG5vdGlmeUxpc3RlbmVycygpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICBsaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBsaXN0ZW5lci5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgc2V0UHJvbXB0OiBzZXRQcm9tcHQsXG4gICAgY29uZmlybVRyYW5zaXRpb25UbzogY29uZmlybVRyYW5zaXRpb25UbyxcbiAgICBhcHBlbmRMaXN0ZW5lcjogYXBwZW5kTGlzdGVuZXIsXG4gICAgbm90aWZ5TGlzdGVuZXJzOiBub3RpZnlMaXN0ZW5lcnNcbiAgfTtcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGNyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9oaXN0b3J5L2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA1MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsImltcG9ydCB3YXJuaW5nIGZyb20gJ3dhcm5pbmcnO1xuXG52YXIgY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIgPSBmdW5jdGlvbiBjcmVhdGVUcmFuc2l0aW9uTWFuYWdlcigpIHtcbiAgdmFyIHByb21wdCA9IG51bGw7XG5cbiAgdmFyIHNldFByb21wdCA9IGZ1bmN0aW9uIHNldFByb21wdChuZXh0UHJvbXB0KSB7XG4gICAgd2FybmluZyhwcm9tcHQgPT0gbnVsbCwgJ0EgaGlzdG9yeSBzdXBwb3J0cyBvbmx5IG9uZSBwcm9tcHQgYXQgYSB0aW1lJyk7XG5cbiAgICBwcm9tcHQgPSBuZXh0UHJvbXB0O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChwcm9tcHQgPT09IG5leHRQcm9tcHQpIHByb21wdCA9IG51bGw7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgY29uZmlybVRyYW5zaXRpb25UbyA9IGZ1bmN0aW9uIGNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgY2FsbGJhY2spIHtcbiAgICAvLyBUT0RPOiBJZiBhbm90aGVyIHRyYW5zaXRpb24gc3RhcnRzIHdoaWxlIHdlJ3JlIHN0aWxsIGNvbmZpcm1pbmdcbiAgICAvLyB0aGUgcHJldmlvdXMgb25lLCB3ZSBtYXkgZW5kIHVwIGluIGEgd2VpcmQgc3RhdGUuIEZpZ3VyZSBvdXQgdGhlXG4gICAgLy8gYmVzdCB3YXkgdG8gaGFuZGxlIHRoaXMuXG4gICAgaWYgKHByb21wdCAhPSBudWxsKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHlwZW9mIHByb21wdCA9PT0gJ2Z1bmN0aW9uJyA/IHByb21wdChsb2NhdGlvbiwgYWN0aW9uKSA6IHByb21wdDtcblxuICAgICAgaWYgKHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZ2V0VXNlckNvbmZpcm1hdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGdldFVzZXJDb25maXJtYXRpb24ocmVzdWx0LCBjYWxsYmFjayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd2FybmluZyhmYWxzZSwgJ0EgaGlzdG9yeSBuZWVkcyBhIGdldFVzZXJDb25maXJtYXRpb24gZnVuY3Rpb24gaW4gb3JkZXIgdG8gdXNlIGEgcHJvbXB0IG1lc3NhZ2UnKTtcblxuICAgICAgICAgIGNhbGxiYWNrKHRydWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZXR1cm4gZmFsc2UgZnJvbSBhIHRyYW5zaXRpb24gaG9vayB0byBjYW5jZWwgdGhlIHRyYW5zaXRpb24uXG4gICAgICAgIGNhbGxiYWNrKHJlc3VsdCAhPT0gZmFsc2UpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayh0cnVlKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGxpc3RlbmVycyA9IFtdO1xuXG4gIHZhciBhcHBlbmRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFwcGVuZExpc3RlbmVyKGZuKSB7XG4gICAgdmFyIGlzQWN0aXZlID0gdHJ1ZTtcblxuICAgIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uIGxpc3RlbmVyKCkge1xuICAgICAgaWYgKGlzQWN0aXZlKSBmbi5hcHBseSh1bmRlZmluZWQsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIGxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBpc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgbGlzdGVuZXJzID0gbGlzdGVuZXJzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbSAhPT0gbGlzdGVuZXI7XG4gICAgICB9KTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBub3RpZnlMaXN0ZW5lcnMgPSBmdW5jdGlvbiBub3RpZnlMaXN0ZW5lcnMoKSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgbGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gbGlzdGVuZXIuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHNldFByb21wdDogc2V0UHJvbXB0LFxuICAgIGNvbmZpcm1UcmFuc2l0aW9uVG86IGNvbmZpcm1UcmFuc2l0aW9uVG8sXG4gICAgYXBwZW5kTGlzdGVuZXI6IGFwcGVuZExpc3RlbmVyLFxuICAgIG5vdGlmeUxpc3RlbmVyczogbm90aWZ5TGlzdGVuZXJzXG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVUcmFuc2l0aW9uTWFuYWdlcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vaGlzdG9yeS9lcy9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlci5qc1xuLy8gbW9kdWxlIGlkID0gNTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIvLyBXcml0dGVuIGluIHRoaXMgcm91bmQgYWJvdXQgd2F5IGZvciBiYWJlbC10cmFuc2Zvcm0taW1wb3J0c1xuaW1wb3J0IFJvdXRlciBmcm9tICdyZWFjdC1yb3V0ZXIvZXMvUm91dGVyJztcblxuZXhwb3J0IGRlZmF1bHQgUm91dGVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXItZG9tL2VzL1JvdXRlci5qc1xuLy8gbW9kdWxlIGlkID0gNTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJ2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmltcG9ydCB3YXJuaW5nIGZyb20gJ3dhcm5pbmcnO1xuaW1wb3J0IGludmFyaWFudCBmcm9tICdpbnZhcmlhbnQnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5cbi8qKlxuICogVGhlIHB1YmxpYyBBUEkgZm9yIHB1dHRpbmcgaGlzdG9yeSBvbiBjb250ZXh0LlxuICovXG5cbnZhciBSb3V0ZXIgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoUm91dGVyLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBSb3V0ZXIoKSB7XG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSb3V0ZXIpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfUmVhY3QkQ29tcG9uZW50LmNhbGwuYXBwbHkoX1JlYWN0JENvbXBvbmVudCwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLnN0YXRlID0ge1xuICAgICAgbWF0Y2g6IF90aGlzLmNvbXB1dGVNYXRjaChfdGhpcy5wcm9wcy5oaXN0b3J5LmxvY2F0aW9uLnBhdGhuYW1lKVxuICAgIH0sIF90ZW1wKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgUm91dGVyLnByb3RvdHlwZS5nZXRDaGlsZENvbnRleHQgPSBmdW5jdGlvbiBnZXRDaGlsZENvbnRleHQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJvdXRlcjogX2V4dGVuZHMoe30sIHRoaXMuY29udGV4dC5yb3V0ZXIsIHtcbiAgICAgICAgaGlzdG9yeTogdGhpcy5wcm9wcy5oaXN0b3J5LFxuICAgICAgICByb3V0ZToge1xuICAgICAgICAgIGxvY2F0aW9uOiB0aGlzLnByb3BzLmhpc3RvcnkubG9jYXRpb24sXG4gICAgICAgICAgbWF0Y2g6IHRoaXMuc3RhdGUubWF0Y2hcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9O1xuICB9O1xuXG4gIFJvdXRlci5wcm90b3R5cGUuY29tcHV0ZU1hdGNoID0gZnVuY3Rpb24gY29tcHV0ZU1hdGNoKHBhdGhuYW1lKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBhdGg6ICcvJyxcbiAgICAgIHVybDogJy8nLFxuICAgICAgcGFyYW1zOiB7fSxcbiAgICAgIGlzRXhhY3Q6IHBhdGhuYW1lID09PSAnLydcbiAgICB9O1xuICB9O1xuXG4gIFJvdXRlci5wcm90b3R5cGUuY29tcG9uZW50V2lsbE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgIGNoaWxkcmVuID0gX3Byb3BzLmNoaWxkcmVuLFxuICAgICAgICBoaXN0b3J5ID0gX3Byb3BzLmhpc3Rvcnk7XG5cblxuICAgIGludmFyaWFudChjaGlsZHJlbiA9PSBudWxsIHx8IFJlYWN0LkNoaWxkcmVuLmNvdW50KGNoaWxkcmVuKSA9PT0gMSwgJ0EgPFJvdXRlcj4gbWF5IGhhdmUgb25seSBvbmUgY2hpbGQgZWxlbWVudCcpO1xuXG4gICAgLy8gRG8gdGhpcyBoZXJlIHNvIHdlIGNhbiBzZXRTdGF0ZSB3aGVuIGEgPFJlZGlyZWN0PiBjaGFuZ2VzIHRoZVxuICAgIC8vIGxvY2F0aW9uIGluIGNvbXBvbmVudFdpbGxNb3VudC4gVGhpcyBoYXBwZW5zIGUuZy4gd2hlbiBkb2luZ1xuICAgIC8vIHNlcnZlciByZW5kZXJpbmcgdXNpbmcgYSA8U3RhdGljUm91dGVyPi5cbiAgICB0aGlzLnVubGlzdGVuID0gaGlzdG9yeS5saXN0ZW4oZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMyLnNldFN0YXRlKHtcbiAgICAgICAgbWF0Y2g6IF90aGlzMi5jb21wdXRlTWF0Y2goaGlzdG9yeS5sb2NhdGlvbi5wYXRobmFtZSlcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIFJvdXRlci5wcm90b3R5cGUuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgd2FybmluZyh0aGlzLnByb3BzLmhpc3RvcnkgPT09IG5leHRQcm9wcy5oaXN0b3J5LCAnWW91IGNhbm5vdCBjaGFuZ2UgPFJvdXRlciBoaXN0b3J5PicpO1xuICB9O1xuXG4gIFJvdXRlci5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICB0aGlzLnVubGlzdGVuKCk7XG4gIH07XG5cbiAgUm91dGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIGNoaWxkcmVuID0gdGhpcy5wcm9wcy5jaGlsZHJlbjtcblxuICAgIHJldHVybiBjaGlsZHJlbiA/IFJlYWN0LkNoaWxkcmVuLm9ubHkoY2hpbGRyZW4pIDogbnVsbDtcbiAgfTtcblxuICByZXR1cm4gUm91dGVyO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5Sb3V0ZXIucHJvcFR5cGVzID0ge1xuICBoaXN0b3J5OiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZVxufTtcblJvdXRlci5jb250ZXh0VHlwZXMgPSB7XG4gIHJvdXRlcjogUHJvcFR5cGVzLm9iamVjdFxufTtcblJvdXRlci5jaGlsZENvbnRleHRUeXBlcyA9IHtcbiAgcm91dGVyOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5cblxuZXhwb3J0IGRlZmF1bHQgUm91dGVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXIvZXMvUm91dGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA1NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsImltcG9ydCBwYXRoVG9SZWdleHAgZnJvbSAncGF0aC10by1yZWdleHAnO1xuXG52YXIgcGF0dGVybkNhY2hlID0ge307XG52YXIgY2FjaGVMaW1pdCA9IDEwMDAwO1xudmFyIGNhY2hlQ291bnQgPSAwO1xuXG52YXIgY29tcGlsZVBhdGggPSBmdW5jdGlvbiBjb21waWxlUGF0aChwYXR0ZXJuLCBvcHRpb25zKSB7XG4gIHZhciBjYWNoZUtleSA9ICcnICsgb3B0aW9ucy5lbmQgKyBvcHRpb25zLnN0cmljdCArIG9wdGlvbnMuc2Vuc2l0aXZlO1xuICB2YXIgY2FjaGUgPSBwYXR0ZXJuQ2FjaGVbY2FjaGVLZXldIHx8IChwYXR0ZXJuQ2FjaGVbY2FjaGVLZXldID0ge30pO1xuXG4gIGlmIChjYWNoZVtwYXR0ZXJuXSkgcmV0dXJuIGNhY2hlW3BhdHRlcm5dO1xuXG4gIHZhciBrZXlzID0gW107XG4gIHZhciByZSA9IHBhdGhUb1JlZ2V4cChwYXR0ZXJuLCBrZXlzLCBvcHRpb25zKTtcbiAgdmFyIGNvbXBpbGVkUGF0dGVybiA9IHsgcmU6IHJlLCBrZXlzOiBrZXlzIH07XG5cbiAgaWYgKGNhY2hlQ291bnQgPCBjYWNoZUxpbWl0KSB7XG4gICAgY2FjaGVbcGF0dGVybl0gPSBjb21waWxlZFBhdHRlcm47XG4gICAgY2FjaGVDb3VudCsrO1xuICB9XG5cbiAgcmV0dXJuIGNvbXBpbGVkUGF0dGVybjtcbn07XG5cbi8qKlxuICogUHVibGljIEFQSSBmb3IgbWF0Y2hpbmcgYSBVUkwgcGF0aG5hbWUgdG8gYSBwYXRoIHBhdHRlcm4uXG4gKi9cbnZhciBtYXRjaFBhdGggPSBmdW5jdGlvbiBtYXRjaFBhdGgocGF0aG5hbWUpIHtcbiAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpIG9wdGlvbnMgPSB7IHBhdGg6IG9wdGlvbnMgfTtcblxuICB2YXIgX29wdGlvbnMgPSBvcHRpb25zLFxuICAgICAgX29wdGlvbnMkcGF0aCA9IF9vcHRpb25zLnBhdGgsXG4gICAgICBwYXRoID0gX29wdGlvbnMkcGF0aCA9PT0gdW5kZWZpbmVkID8gJy8nIDogX29wdGlvbnMkcGF0aCxcbiAgICAgIF9vcHRpb25zJGV4YWN0ID0gX29wdGlvbnMuZXhhY3QsXG4gICAgICBleGFjdCA9IF9vcHRpb25zJGV4YWN0ID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9vcHRpb25zJGV4YWN0LFxuICAgICAgX29wdGlvbnMkc3RyaWN0ID0gX29wdGlvbnMuc3RyaWN0LFxuICAgICAgc3RyaWN0ID0gX29wdGlvbnMkc3RyaWN0ID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9vcHRpb25zJHN0cmljdCxcbiAgICAgIF9vcHRpb25zJHNlbnNpdGl2ZSA9IF9vcHRpb25zLnNlbnNpdGl2ZSxcbiAgICAgIHNlbnNpdGl2ZSA9IF9vcHRpb25zJHNlbnNpdGl2ZSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfb3B0aW9ucyRzZW5zaXRpdmU7XG5cbiAgdmFyIF9jb21waWxlUGF0aCA9IGNvbXBpbGVQYXRoKHBhdGgsIHsgZW5kOiBleGFjdCwgc3RyaWN0OiBzdHJpY3QsIHNlbnNpdGl2ZTogc2Vuc2l0aXZlIH0pLFxuICAgICAgcmUgPSBfY29tcGlsZVBhdGgucmUsXG4gICAgICBrZXlzID0gX2NvbXBpbGVQYXRoLmtleXM7XG5cbiAgdmFyIG1hdGNoID0gcmUuZXhlYyhwYXRobmFtZSk7XG5cbiAgaWYgKCFtYXRjaCkgcmV0dXJuIG51bGw7XG5cbiAgdmFyIHVybCA9IG1hdGNoWzBdLFxuICAgICAgdmFsdWVzID0gbWF0Y2guc2xpY2UoMSk7XG5cbiAgdmFyIGlzRXhhY3QgPSBwYXRobmFtZSA9PT0gdXJsO1xuXG4gIGlmIChleGFjdCAmJiAhaXNFeGFjdCkgcmV0dXJuIG51bGw7XG5cbiAgcmV0dXJuIHtcbiAgICBwYXRoOiBwYXRoLCAvLyB0aGUgcGF0aCBwYXR0ZXJuIHVzZWQgdG8gbWF0Y2hcbiAgICB1cmw6IHBhdGggPT09ICcvJyAmJiB1cmwgPT09ICcnID8gJy8nIDogdXJsLCAvLyB0aGUgbWF0Y2hlZCBwb3J0aW9uIG9mIHRoZSBVUkxcbiAgICBpc0V4YWN0OiBpc0V4YWN0LCAvLyB3aGV0aGVyIG9yIG5vdCB3ZSBtYXRjaGVkIGV4YWN0bHlcbiAgICBwYXJhbXM6IGtleXMucmVkdWNlKGZ1bmN0aW9uIChtZW1vLCBrZXksIGluZGV4KSB7XG4gICAgICBtZW1vW2tleS5uYW1lXSA9IHZhbHVlc1tpbmRleF07XG4gICAgICByZXR1cm4gbWVtbztcbiAgICB9LCB7fSlcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IG1hdGNoUGF0aDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtcm91dGVyL2VzL21hdGNoUGF0aC5qc1xuLy8gbW9kdWxlIGlkID0gNTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB1bmRlZmluZWQ7XG5cbnZhciBfQ2hlY2tib3ggPSByZXF1aXJlKCcuL0NoZWNrYm94Jyk7XG5cbnZhciBfQ2hlY2tib3gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ2hlY2tib3gpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5leHBvcnRzLmRlZmF1bHQgPSBfQ2hlY2tib3gyLmRlZmF1bHQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L21hdGVyaWFsLXVpL0NoZWNrYm94L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA3OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHVuZGVmaW5lZDtcblxudmFyIF9TbmFja2JhciA9IHJlcXVpcmUoJy4vU25hY2tiYXInKTtcblxudmFyIF9TbmFja2JhcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TbmFja2Jhcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuZGVmYXVsdCA9IF9TbmFja2JhcjIuZGVmYXVsdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWF0ZXJpYWwtdWkvU25hY2tiYXIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDgwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAyIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xudmFyIGNhblVzZURPTSA9IGV4cG9ydHMuY2FuVXNlRE9NID0gISEodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmRvY3VtZW50ICYmIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcblxudmFyIGFkZEV2ZW50TGlzdGVuZXIgPSBleHBvcnRzLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKG5vZGUsIGV2ZW50LCBsaXN0ZW5lcikge1xuICByZXR1cm4gbm9kZS5hZGRFdmVudExpc3RlbmVyID8gbm9kZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpIDogbm9kZS5hdHRhY2hFdmVudCgnb24nICsgZXZlbnQsIGxpc3RlbmVyKTtcbn07XG5cbnZhciByZW1vdmVFdmVudExpc3RlbmVyID0gZXhwb3J0cy5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcihub2RlLCBldmVudCwgbGlzdGVuZXIpIHtcbiAgcmV0dXJuIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA/IG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIsIGZhbHNlKSA6IG5vZGUuZGV0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBsaXN0ZW5lcik7XG59O1xuXG52YXIgZ2V0Q29uZmlybWF0aW9uID0gZXhwb3J0cy5nZXRDb25maXJtYXRpb24gPSBmdW5jdGlvbiBnZXRDb25maXJtYXRpb24obWVzc2FnZSwgY2FsbGJhY2spIHtcbiAgcmV0dXJuIGNhbGxiYWNrKHdpbmRvdy5jb25maXJtKG1lc3NhZ2UpKTtcbn07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tYWxlcnRcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIEhUTUw1IGhpc3RvcnkgQVBJIGlzIHN1cHBvcnRlZC4gVGFrZW4gZnJvbSBNb2Rlcm5penIuXG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvYmxvYi9tYXN0ZXIvTElDRU5TRVxuICogaHR0cHM6Ly9naXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvYmxvYi9tYXN0ZXIvZmVhdHVyZS1kZXRlY3RzL2hpc3RvcnkuanNcbiAqIGNoYW5nZWQgdG8gYXZvaWQgZmFsc2UgbmVnYXRpdmVzIGZvciBXaW5kb3dzIFBob25lczogaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0anMvcmVhY3Qtcm91dGVyL2lzc3Vlcy81ODZcbiAqL1xudmFyIHN1cHBvcnRzSGlzdG9yeSA9IGV4cG9ydHMuc3VwcG9ydHNIaXN0b3J5ID0gZnVuY3Rpb24gc3VwcG9ydHNIaXN0b3J5KCkge1xuICB2YXIgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDtcblxuICBpZiAoKHVhLmluZGV4T2YoJ0FuZHJvaWQgMi4nKSAhPT0gLTEgfHwgdWEuaW5kZXhPZignQW5kcm9pZCA0LjAnKSAhPT0gLTEpICYmIHVhLmluZGV4T2YoJ01vYmlsZSBTYWZhcmknKSAhPT0gLTEgJiYgdWEuaW5kZXhPZignQ2hyb21lJykgPT09IC0xICYmIHVhLmluZGV4T2YoJ1dpbmRvd3MgUGhvbmUnKSA9PT0gLTEpIHJldHVybiBmYWxzZTtcblxuICByZXR1cm4gd2luZG93Lmhpc3RvcnkgJiYgJ3B1c2hTdGF0ZScgaW4gd2luZG93Lmhpc3Rvcnk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBicm93c2VyIGZpcmVzIHBvcHN0YXRlIG9uIGhhc2ggY2hhbmdlLlxuICogSUUxMCBhbmQgSUUxMSBkbyBub3QuXG4gKi9cbnZhciBzdXBwb3J0c1BvcFN0YXRlT25IYXNoQ2hhbmdlID0gZXhwb3J0cy5zdXBwb3J0c1BvcFN0YXRlT25IYXNoQ2hhbmdlID0gZnVuY3Rpb24gc3VwcG9ydHNQb3BTdGF0ZU9uSGFzaENoYW5nZSgpIHtcbiAgcmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ1RyaWRlbnQnKSA9PT0gLTE7XG59O1xuXG4vKipcbiAqIFJldHVybnMgZmFsc2UgaWYgdXNpbmcgZ28obikgd2l0aCBoYXNoIGhpc3RvcnkgY2F1c2VzIGEgZnVsbCBwYWdlIHJlbG9hZC5cbiAqL1xudmFyIHN1cHBvcnRzR29XaXRob3V0UmVsb2FkVXNpbmdIYXNoID0gZXhwb3J0cy5zdXBwb3J0c0dvV2l0aG91dFJlbG9hZFVzaW5nSGFzaCA9IGZ1bmN0aW9uIHN1cHBvcnRzR29XaXRob3V0UmVsb2FkVXNpbmdIYXNoKCkge1xuICByZXR1cm4gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRmlyZWZveCcpID09PSAtMTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGEgZ2l2ZW4gcG9wc3RhdGUgZXZlbnQgaXMgYW4gZXh0cmFuZW91cyBXZWJLaXQgZXZlbnQuXG4gKiBBY2NvdW50cyBmb3IgdGhlIGZhY3QgdGhhdCBDaHJvbWUgb24gaU9TIGZpcmVzIHJlYWwgcG9wc3RhdGUgZXZlbnRzXG4gKiBjb250YWluaW5nIHVuZGVmaW5lZCBzdGF0ZSB3aGVuIHByZXNzaW5nIHRoZSBiYWNrIGJ1dHRvbi5cbiAqL1xudmFyIGlzRXh0cmFuZW91c1BvcHN0YXRlRXZlbnQgPSBleHBvcnRzLmlzRXh0cmFuZW91c1BvcHN0YXRlRXZlbnQgPSBmdW5jdGlvbiBpc0V4dHJhbmVvdXNQb3BzdGF0ZUV2ZW50KGV2ZW50KSB7XG4gIHJldHVybiBldmVudC5zdGF0ZSA9PT0gdW5kZWZpbmVkICYmIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQ3JpT1MnKSA9PT0gLTE7XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9oaXN0b3J5L0RPTVV0aWxzLmpzXG4vLyBtb2R1bGUgaWQgPSA4NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsImV4cG9ydCB2YXIgY2FuVXNlRE9NID0gISEodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmRvY3VtZW50ICYmIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcblxuZXhwb3J0IHZhciBhZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihub2RlLCBldmVudCwgbGlzdGVuZXIpIHtcbiAgcmV0dXJuIG5vZGUuYWRkRXZlbnRMaXN0ZW5lciA/IG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIsIGZhbHNlKSA6IG5vZGUuYXR0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBsaXN0ZW5lcik7XG59O1xuXG5leHBvcnQgdmFyIHJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKG5vZGUsIGV2ZW50LCBsaXN0ZW5lcikge1xuICByZXR1cm4gbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyID8gbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpIDogbm9kZS5kZXRhY2hFdmVudCgnb24nICsgZXZlbnQsIGxpc3RlbmVyKTtcbn07XG5cbmV4cG9ydCB2YXIgZ2V0Q29uZmlybWF0aW9uID0gZnVuY3Rpb24gZ2V0Q29uZmlybWF0aW9uKG1lc3NhZ2UsIGNhbGxiYWNrKSB7XG4gIHJldHVybiBjYWxsYmFjayh3aW5kb3cuY29uZmlybShtZXNzYWdlKSk7XG59OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWFsZXJ0XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBIVE1MNSBoaXN0b3J5IEFQSSBpcyBzdXBwb3J0ZWQuIFRha2VuIGZyb20gTW9kZXJuaXpyLlxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9Nb2Rlcm5penIvTW9kZXJuaXpyL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9Nb2Rlcm5penIvTW9kZXJuaXpyL2Jsb2IvbWFzdGVyL2ZlYXR1cmUtZGV0ZWN0cy9oaXN0b3J5LmpzXG4gKiBjaGFuZ2VkIHRvIGF2b2lkIGZhbHNlIG5lZ2F0aXZlcyBmb3IgV2luZG93cyBQaG9uZXM6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdGpzL3JlYWN0LXJvdXRlci9pc3N1ZXMvNTg2XG4gKi9cbmV4cG9ydCB2YXIgc3VwcG9ydHNIaXN0b3J5ID0gZnVuY3Rpb24gc3VwcG9ydHNIaXN0b3J5KCkge1xuICB2YXIgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDtcblxuICBpZiAoKHVhLmluZGV4T2YoJ0FuZHJvaWQgMi4nKSAhPT0gLTEgfHwgdWEuaW5kZXhPZignQW5kcm9pZCA0LjAnKSAhPT0gLTEpICYmIHVhLmluZGV4T2YoJ01vYmlsZSBTYWZhcmknKSAhPT0gLTEgJiYgdWEuaW5kZXhPZignQ2hyb21lJykgPT09IC0xICYmIHVhLmluZGV4T2YoJ1dpbmRvd3MgUGhvbmUnKSA9PT0gLTEpIHJldHVybiBmYWxzZTtcblxuICByZXR1cm4gd2luZG93Lmhpc3RvcnkgJiYgJ3B1c2hTdGF0ZScgaW4gd2luZG93Lmhpc3Rvcnk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBicm93c2VyIGZpcmVzIHBvcHN0YXRlIG9uIGhhc2ggY2hhbmdlLlxuICogSUUxMCBhbmQgSUUxMSBkbyBub3QuXG4gKi9cbmV4cG9ydCB2YXIgc3VwcG9ydHNQb3BTdGF0ZU9uSGFzaENoYW5nZSA9IGZ1bmN0aW9uIHN1cHBvcnRzUG9wU3RhdGVPbkhhc2hDaGFuZ2UoKSB7XG4gIHJldHVybiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdUcmlkZW50JykgPT09IC0xO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGZhbHNlIGlmIHVzaW5nIGdvKG4pIHdpdGggaGFzaCBoaXN0b3J5IGNhdXNlcyBhIGZ1bGwgcGFnZSByZWxvYWQuXG4gKi9cbmV4cG9ydCB2YXIgc3VwcG9ydHNHb1dpdGhvdXRSZWxvYWRVc2luZ0hhc2ggPSBmdW5jdGlvbiBzdXBwb3J0c0dvV2l0aG91dFJlbG9hZFVzaW5nSGFzaCgpIHtcbiAgcmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gnKSA9PT0gLTE7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIGdpdmVuIHBvcHN0YXRlIGV2ZW50IGlzIGFuIGV4dHJhbmVvdXMgV2ViS2l0IGV2ZW50LlxuICogQWNjb3VudHMgZm9yIHRoZSBmYWN0IHRoYXQgQ2hyb21lIG9uIGlPUyBmaXJlcyByZWFsIHBvcHN0YXRlIGV2ZW50c1xuICogY29udGFpbmluZyB1bmRlZmluZWQgc3RhdGUgd2hlbiBwcmVzc2luZyB0aGUgYmFjayBidXR0b24uXG4gKi9cbmV4cG9ydCB2YXIgaXNFeHRyYW5lb3VzUG9wc3RhdGVFdmVudCA9IGZ1bmN0aW9uIGlzRXh0cmFuZW91c1BvcHN0YXRlRXZlbnQoZXZlbnQpIHtcbiAgcmV0dXJuIGV2ZW50LnN0YXRlID09PSB1bmRlZmluZWQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdDcmlPUycpID09PSAtMTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2hpc3RvcnkvZXMvRE9NVXRpbHMuanNcbi8vIG1vZHVsZSBpZCA9IDg3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwidmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKG9iaiwga2V5cykgeyB2YXIgdGFyZ2V0ID0ge307IGZvciAodmFyIGkgaW4gb2JqKSB7IGlmIChrZXlzLmluZGV4T2YoaSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgaSkpIGNvbnRpbnVlOyB0YXJnZXRbaV0gPSBvYmpbaV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IGludmFyaWFudCBmcm9tICdpbnZhcmlhbnQnO1xuXG52YXIgaXNNb2RpZmllZEV2ZW50ID0gZnVuY3Rpb24gaXNNb2RpZmllZEV2ZW50KGV2ZW50KSB7XG4gIHJldHVybiAhIShldmVudC5tZXRhS2V5IHx8IGV2ZW50LmFsdEtleSB8fCBldmVudC5jdHJsS2V5IHx8IGV2ZW50LnNoaWZ0S2V5KTtcbn07XG5cbi8qKlxuICogVGhlIHB1YmxpYyBBUEkgZm9yIHJlbmRlcmluZyBhIGhpc3RvcnktYXdhcmUgPGE+LlxuICovXG5cbnZhciBMaW5rID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKExpbmssIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIExpbmsoKSB7XG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMaW5rKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX1JlYWN0JENvbXBvbmVudC5jYWxsLmFwcGx5KF9SZWFjdCRDb21wb25lbnQsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKF90aGlzLnByb3BzLm9uQ2xpY2spIF90aGlzLnByb3BzLm9uQ2xpY2soZXZlbnQpO1xuXG4gICAgICBpZiAoIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgJiYgLy8gb25DbGljayBwcmV2ZW50ZWQgZGVmYXVsdFxuICAgICAgZXZlbnQuYnV0dG9uID09PSAwICYmIC8vIGlnbm9yZSByaWdodCBjbGlja3NcbiAgICAgICFfdGhpcy5wcm9wcy50YXJnZXQgJiYgLy8gbGV0IGJyb3dzZXIgaGFuZGxlIFwidGFyZ2V0PV9ibGFua1wiIGV0Yy5cbiAgICAgICFpc01vZGlmaWVkRXZlbnQoZXZlbnQpIC8vIGlnbm9yZSBjbGlja3Mgd2l0aCBtb2RpZmllciBrZXlzXG4gICAgICApIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgdmFyIGhpc3RvcnkgPSBfdGhpcy5jb250ZXh0LnJvdXRlci5oaXN0b3J5O1xuICAgICAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLFxuICAgICAgICAgICAgICByZXBsYWNlID0gX3RoaXMkcHJvcHMucmVwbGFjZSxcbiAgICAgICAgICAgICAgdG8gPSBfdGhpcyRwcm9wcy50bztcblxuXG4gICAgICAgICAgaWYgKHJlcGxhY2UpIHtcbiAgICAgICAgICAgIGhpc3RvcnkucmVwbGFjZSh0byk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhpc3RvcnkucHVzaCh0byk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwgX3RlbXApLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7XG4gIH1cblxuICBMaW5rLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgIHJlcGxhY2UgPSBfcHJvcHMucmVwbGFjZSxcbiAgICAgICAgdG8gPSBfcHJvcHMudG8sXG4gICAgICAgIGlubmVyUmVmID0gX3Byb3BzLmlubmVyUmVmLFxuICAgICAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcHJvcHMsIFsncmVwbGFjZScsICd0bycsICdpbm5lclJlZiddKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuXG4gICAgaW52YXJpYW50KHRoaXMuY29udGV4dC5yb3V0ZXIsICdZb3Ugc2hvdWxkIG5vdCB1c2UgPExpbms+IG91dHNpZGUgYSA8Um91dGVyPicpO1xuXG4gICAgdmFyIGhyZWYgPSB0aGlzLmNvbnRleHQucm91dGVyLmhpc3RvcnkuY3JlYXRlSHJlZih0eXBlb2YgdG8gPT09ICdzdHJpbmcnID8geyBwYXRobmFtZTogdG8gfSA6IHRvKTtcblxuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCdhJywgX2V4dGVuZHMoe30sIHByb3BzLCB7IG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2xpY2ssIGhyZWY6IGhyZWYsIHJlZjogaW5uZXJSZWYgfSkpO1xuICB9O1xuXG4gIHJldHVybiBMaW5rO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5MaW5rLnByb3BUeXBlcyA9IHtcbiAgb25DbGljazogUHJvcFR5cGVzLmZ1bmMsXG4gIHRhcmdldDogUHJvcFR5cGVzLnN0cmluZyxcbiAgcmVwbGFjZTogUHJvcFR5cGVzLmJvb2wsXG4gIHRvOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMub2JqZWN0XSkuaXNSZXF1aXJlZCxcbiAgaW5uZXJSZWY6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5mdW5jXSlcbn07XG5MaW5rLmRlZmF1bHRQcm9wcyA9IHtcbiAgcmVwbGFjZTogZmFsc2Vcbn07XG5MaW5rLmNvbnRleHRUeXBlcyA9IHtcbiAgcm91dGVyOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgIGhpc3Rvcnk6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICBwdXNoOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgICAgcmVwbGFjZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICAgIGNyZWF0ZUhyZWY6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRcbiAgICB9KS5pc1JlcXVpcmVkXG4gIH0pLmlzUmVxdWlyZWRcbn07XG5cblxuZXhwb3J0IGRlZmF1bHQgTGluaztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtcm91dGVyLWRvbS9lcy9MaW5rLmpzXG4vLyBtb2R1bGUgaWQgPSA5NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIi8vIFdyaXR0ZW4gaW4gdGhpcyByb3VuZCBhYm91dCB3YXkgZm9yIGJhYmVsLXRyYW5zZm9ybS1pbXBvcnRzXG5pbXBvcnQgUm91dGUgZnJvbSAncmVhY3Qtcm91dGVyL2VzL1JvdXRlJztcblxuZXhwb3J0IGRlZmF1bHQgUm91dGU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvUm91dGUuanNcbi8vIG1vZHVsZSBpZCA9IDk1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwidmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5pbXBvcnQgd2FybmluZyBmcm9tICd3YXJuaW5nJztcbmltcG9ydCBpbnZhcmlhbnQgZnJvbSAnaW52YXJpYW50JztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IG1hdGNoUGF0aCBmcm9tICcuL21hdGNoUGF0aCc7XG5cbnZhciBpc0VtcHR5Q2hpbGRyZW4gPSBmdW5jdGlvbiBpc0VtcHR5Q2hpbGRyZW4oY2hpbGRyZW4pIHtcbiAgcmV0dXJuIFJlYWN0LkNoaWxkcmVuLmNvdW50KGNoaWxkcmVuKSA9PT0gMDtcbn07XG5cbi8qKlxuICogVGhlIHB1YmxpYyBBUEkgZm9yIG1hdGNoaW5nIGEgc2luZ2xlIHBhdGggYW5kIHJlbmRlcmluZy5cbiAqL1xuXG52YXIgUm91dGUgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoUm91dGUsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFJvdXRlKCkge1xuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUm91dGUpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfUmVhY3QkQ29tcG9uZW50LmNhbGwuYXBwbHkoX1JlYWN0JENvbXBvbmVudCwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLnN0YXRlID0ge1xuICAgICAgbWF0Y2g6IF90aGlzLmNvbXB1dGVNYXRjaChfdGhpcy5wcm9wcywgX3RoaXMuY29udGV4dC5yb3V0ZXIpXG4gICAgfSwgX3RlbXApLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7XG4gIH1cblxuICBSb3V0ZS5wcm90b3R5cGUuZ2V0Q2hpbGRDb250ZXh0ID0gZnVuY3Rpb24gZ2V0Q2hpbGRDb250ZXh0KCkge1xuICAgIHJldHVybiB7XG4gICAgICByb3V0ZXI6IF9leHRlbmRzKHt9LCB0aGlzLmNvbnRleHQucm91dGVyLCB7XG4gICAgICAgIHJvdXRlOiB7XG4gICAgICAgICAgbG9jYXRpb246IHRoaXMucHJvcHMubG9jYXRpb24gfHwgdGhpcy5jb250ZXh0LnJvdXRlci5yb3V0ZS5sb2NhdGlvbixcbiAgICAgICAgICBtYXRjaDogdGhpcy5zdGF0ZS5tYXRjaFxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH07XG4gIH07XG5cbiAgUm91dGUucHJvdG90eXBlLmNvbXB1dGVNYXRjaCA9IGZ1bmN0aW9uIGNvbXB1dGVNYXRjaChfcmVmLCByb3V0ZXIpIHtcbiAgICB2YXIgY29tcHV0ZWRNYXRjaCA9IF9yZWYuY29tcHV0ZWRNYXRjaCxcbiAgICAgICAgbG9jYXRpb24gPSBfcmVmLmxvY2F0aW9uLFxuICAgICAgICBwYXRoID0gX3JlZi5wYXRoLFxuICAgICAgICBzdHJpY3QgPSBfcmVmLnN0cmljdCxcbiAgICAgICAgZXhhY3QgPSBfcmVmLmV4YWN0LFxuICAgICAgICBzZW5zaXRpdmUgPSBfcmVmLnNlbnNpdGl2ZTtcblxuICAgIGlmIChjb21wdXRlZE1hdGNoKSByZXR1cm4gY29tcHV0ZWRNYXRjaDsgLy8gPFN3aXRjaD4gYWxyZWFkeSBjb21wdXRlZCB0aGUgbWF0Y2ggZm9yIHVzXG5cbiAgICBpbnZhcmlhbnQocm91dGVyLCAnWW91IHNob3VsZCBub3QgdXNlIDxSb3V0ZT4gb3Igd2l0aFJvdXRlcigpIG91dHNpZGUgYSA8Um91dGVyPicpO1xuXG4gICAgdmFyIHJvdXRlID0gcm91dGVyLnJvdXRlO1xuXG4gICAgdmFyIHBhdGhuYW1lID0gKGxvY2F0aW9uIHx8IHJvdXRlLmxvY2F0aW9uKS5wYXRobmFtZTtcblxuICAgIHJldHVybiBwYXRoID8gbWF0Y2hQYXRoKHBhdGhuYW1lLCB7IHBhdGg6IHBhdGgsIHN0cmljdDogc3RyaWN0LCBleGFjdDogZXhhY3QsIHNlbnNpdGl2ZTogc2Vuc2l0aXZlIH0pIDogcm91dGUubWF0Y2g7XG4gIH07XG5cbiAgUm91dGUucHJvdG90eXBlLmNvbXBvbmVudFdpbGxNb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICB3YXJuaW5nKCEodGhpcy5wcm9wcy5jb21wb25lbnQgJiYgdGhpcy5wcm9wcy5yZW5kZXIpLCAnWW91IHNob3VsZCBub3QgdXNlIDxSb3V0ZSBjb21wb25lbnQ+IGFuZCA8Um91dGUgcmVuZGVyPiBpbiB0aGUgc2FtZSByb3V0ZTsgPFJvdXRlIHJlbmRlcj4gd2lsbCBiZSBpZ25vcmVkJyk7XG5cbiAgICB3YXJuaW5nKCEodGhpcy5wcm9wcy5jb21wb25lbnQgJiYgdGhpcy5wcm9wcy5jaGlsZHJlbiAmJiAhaXNFbXB0eUNoaWxkcmVuKHRoaXMucHJvcHMuY2hpbGRyZW4pKSwgJ1lvdSBzaG91bGQgbm90IHVzZSA8Um91dGUgY29tcG9uZW50PiBhbmQgPFJvdXRlIGNoaWxkcmVuPiBpbiB0aGUgc2FtZSByb3V0ZTsgPFJvdXRlIGNoaWxkcmVuPiB3aWxsIGJlIGlnbm9yZWQnKTtcblxuICAgIHdhcm5pbmcoISh0aGlzLnByb3BzLnJlbmRlciAmJiB0aGlzLnByb3BzLmNoaWxkcmVuICYmICFpc0VtcHR5Q2hpbGRyZW4odGhpcy5wcm9wcy5jaGlsZHJlbikpLCAnWW91IHNob3VsZCBub3QgdXNlIDxSb3V0ZSByZW5kZXI+IGFuZCA8Um91dGUgY2hpbGRyZW4+IGluIHRoZSBzYW1lIHJvdXRlOyA8Um91dGUgY2hpbGRyZW4+IHdpbGwgYmUgaWdub3JlZCcpO1xuICB9O1xuXG4gIFJvdXRlLnByb3RvdHlwZS5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMsIG5leHRDb250ZXh0KSB7XG4gICAgd2FybmluZyghKG5leHRQcm9wcy5sb2NhdGlvbiAmJiAhdGhpcy5wcm9wcy5sb2NhdGlvbiksICc8Um91dGU+IGVsZW1lbnRzIHNob3VsZCBub3QgY2hhbmdlIGZyb20gdW5jb250cm9sbGVkIHRvIGNvbnRyb2xsZWQgKG9yIHZpY2UgdmVyc2EpLiBZb3UgaW5pdGlhbGx5IHVzZWQgbm8gXCJsb2NhdGlvblwiIHByb3AgYW5kIHRoZW4gcHJvdmlkZWQgb25lIG9uIGEgc3Vic2VxdWVudCByZW5kZXIuJyk7XG5cbiAgICB3YXJuaW5nKCEoIW5leHRQcm9wcy5sb2NhdGlvbiAmJiB0aGlzLnByb3BzLmxvY2F0aW9uKSwgJzxSb3V0ZT4gZWxlbWVudHMgc2hvdWxkIG5vdCBjaGFuZ2UgZnJvbSBjb250cm9sbGVkIHRvIHVuY29udHJvbGxlZCAob3IgdmljZSB2ZXJzYSkuIFlvdSBwcm92aWRlZCBhIFwibG9jYXRpb25cIiBwcm9wIGluaXRpYWxseSBidXQgb21pdHRlZCBpdCBvbiBhIHN1YnNlcXVlbnQgcmVuZGVyLicpO1xuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBtYXRjaDogdGhpcy5jb21wdXRlTWF0Y2gobmV4dFByb3BzLCBuZXh0Q29udGV4dC5yb3V0ZXIpXG4gICAgfSk7XG4gIH07XG5cbiAgUm91dGUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgbWF0Y2ggPSB0aGlzLnN0YXRlLm1hdGNoO1xuICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICBjaGlsZHJlbiA9IF9wcm9wcy5jaGlsZHJlbixcbiAgICAgICAgY29tcG9uZW50ID0gX3Byb3BzLmNvbXBvbmVudCxcbiAgICAgICAgcmVuZGVyID0gX3Byb3BzLnJlbmRlcjtcbiAgICB2YXIgX2NvbnRleHQkcm91dGVyID0gdGhpcy5jb250ZXh0LnJvdXRlcixcbiAgICAgICAgaGlzdG9yeSA9IF9jb250ZXh0JHJvdXRlci5oaXN0b3J5LFxuICAgICAgICByb3V0ZSA9IF9jb250ZXh0JHJvdXRlci5yb3V0ZSxcbiAgICAgICAgc3RhdGljQ29udGV4dCA9IF9jb250ZXh0JHJvdXRlci5zdGF0aWNDb250ZXh0O1xuXG4gICAgdmFyIGxvY2F0aW9uID0gdGhpcy5wcm9wcy5sb2NhdGlvbiB8fCByb3V0ZS5sb2NhdGlvbjtcbiAgICB2YXIgcHJvcHMgPSB7IG1hdGNoOiBtYXRjaCwgbG9jYXRpb246IGxvY2F0aW9uLCBoaXN0b3J5OiBoaXN0b3J5LCBzdGF0aWNDb250ZXh0OiBzdGF0aWNDb250ZXh0IH07XG5cbiAgICByZXR1cm4gY29tcG9uZW50ID8gLy8gY29tcG9uZW50IHByb3AgZ2V0cyBmaXJzdCBwcmlvcml0eSwgb25seSBjYWxsZWQgaWYgdGhlcmUncyBhIG1hdGNoXG4gICAgbWF0Y2ggPyBSZWFjdC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudCwgcHJvcHMpIDogbnVsbCA6IHJlbmRlciA/IC8vIHJlbmRlciBwcm9wIGlzIG5leHQsIG9ubHkgY2FsbGVkIGlmIHRoZXJlJ3MgYSBtYXRjaFxuICAgIG1hdGNoID8gcmVuZGVyKHByb3BzKSA6IG51bGwgOiBjaGlsZHJlbiA/IC8vIGNoaWxkcmVuIGNvbWUgbGFzdCwgYWx3YXlzIGNhbGxlZFxuICAgIHR5cGVvZiBjaGlsZHJlbiA9PT0gJ2Z1bmN0aW9uJyA/IGNoaWxkcmVuKHByb3BzKSA6ICFpc0VtcHR5Q2hpbGRyZW4oY2hpbGRyZW4pID8gUmVhY3QuQ2hpbGRyZW4ub25seShjaGlsZHJlbikgOiBudWxsIDogbnVsbDtcbiAgfTtcblxuICByZXR1cm4gUm91dGU7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cblJvdXRlLnByb3BUeXBlcyA9IHtcbiAgY29tcHV0ZWRNYXRjaDogUHJvcFR5cGVzLm9iamVjdCwgLy8gcHJpdmF0ZSwgZnJvbSA8U3dpdGNoPlxuICBwYXRoOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBleGFjdDogUHJvcFR5cGVzLmJvb2wsXG4gIHN0cmljdDogUHJvcFR5cGVzLmJvb2wsXG4gIHNlbnNpdGl2ZTogUHJvcFR5cGVzLmJvb2wsXG4gIGNvbXBvbmVudDogUHJvcFR5cGVzLmZ1bmMsXG4gIHJlbmRlcjogUHJvcFR5cGVzLmZ1bmMsXG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuZnVuYywgUHJvcFR5cGVzLm5vZGVdKSxcbiAgbG9jYXRpb246IFByb3BUeXBlcy5vYmplY3Rcbn07XG5Sb3V0ZS5jb250ZXh0VHlwZXMgPSB7XG4gIHJvdXRlcjogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICBoaXN0b3J5OiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgcm91dGU6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICBzdGF0aWNDb250ZXh0OiBQcm9wVHlwZXMub2JqZWN0XG4gIH0pXG59O1xuUm91dGUuY2hpbGRDb250ZXh0VHlwZXMgPSB7XG4gIHJvdXRlcjogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkXG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IFJvdXRlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXIvZXMvUm91dGUuanNcbi8vIG1vZHVsZSBpZCA9IDk2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiZnVuY3Rpb24gaXNBYnNvbHV0ZShwYXRobmFtZSkge1xuICByZXR1cm4gcGF0aG5hbWUuY2hhckF0KDApID09PSAnLyc7XG59XG5cbi8vIEFib3V0IDEuNXggZmFzdGVyIHRoYW4gdGhlIHR3by1hcmcgdmVyc2lvbiBvZiBBcnJheSNzcGxpY2UoKVxuZnVuY3Rpb24gc3BsaWNlT25lKGxpc3QsIGluZGV4KSB7XG4gIGZvciAodmFyIGkgPSBpbmRleCwgayA9IGkgKyAxLCBuID0gbGlzdC5sZW5ndGg7IGsgPCBuOyBpICs9IDEsIGsgKz0gMSkge1xuICAgIGxpc3RbaV0gPSBsaXN0W2tdO1xuICB9XG5cbiAgbGlzdC5wb3AoKTtcbn1cblxuLy8gVGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBiYXNlZCBoZWF2aWx5IG9uIG5vZGUncyB1cmwucGFyc2VcbmZ1bmN0aW9uIHJlc29sdmVQYXRobmFtZSh0bykge1xuICB2YXIgZnJvbSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyc7XG5cbiAgdmFyIHRvUGFydHMgPSB0byAmJiB0by5zcGxpdCgnLycpIHx8IFtdO1xuICB2YXIgZnJvbVBhcnRzID0gZnJvbSAmJiBmcm9tLnNwbGl0KCcvJykgfHwgW107XG5cbiAgdmFyIGlzVG9BYnMgPSB0byAmJiBpc0Fic29sdXRlKHRvKTtcbiAgdmFyIGlzRnJvbUFicyA9IGZyb20gJiYgaXNBYnNvbHV0ZShmcm9tKTtcbiAgdmFyIG11c3RFbmRBYnMgPSBpc1RvQWJzIHx8IGlzRnJvbUFicztcblxuICBpZiAodG8gJiYgaXNBYnNvbHV0ZSh0bykpIHtcbiAgICAvLyB0byBpcyBhYnNvbHV0ZVxuICAgIGZyb21QYXJ0cyA9IHRvUGFydHM7XG4gIH0gZWxzZSBpZiAodG9QYXJ0cy5sZW5ndGgpIHtcbiAgICAvLyB0byBpcyByZWxhdGl2ZSwgZHJvcCB0aGUgZmlsZW5hbWVcbiAgICBmcm9tUGFydHMucG9wKCk7XG4gICAgZnJvbVBhcnRzID0gZnJvbVBhcnRzLmNvbmNhdCh0b1BhcnRzKTtcbiAgfVxuXG4gIGlmICghZnJvbVBhcnRzLmxlbmd0aCkgcmV0dXJuICcvJztcblxuICB2YXIgaGFzVHJhaWxpbmdTbGFzaCA9IHZvaWQgMDtcbiAgaWYgKGZyb21QYXJ0cy5sZW5ndGgpIHtcbiAgICB2YXIgbGFzdCA9IGZyb21QYXJ0c1tmcm9tUGFydHMubGVuZ3RoIC0gMV07XG4gICAgaGFzVHJhaWxpbmdTbGFzaCA9IGxhc3QgPT09ICcuJyB8fCBsYXN0ID09PSAnLi4nIHx8IGxhc3QgPT09ICcnO1xuICB9IGVsc2Uge1xuICAgIGhhc1RyYWlsaW5nU2xhc2ggPSBmYWxzZTtcbiAgfVxuXG4gIHZhciB1cCA9IDA7XG4gIGZvciAodmFyIGkgPSBmcm9tUGFydHMubGVuZ3RoOyBpID49IDA7IGktLSkge1xuICAgIHZhciBwYXJ0ID0gZnJvbVBhcnRzW2ldO1xuXG4gICAgaWYgKHBhcnQgPT09ICcuJykge1xuICAgICAgc3BsaWNlT25lKGZyb21QYXJ0cywgaSk7XG4gICAgfSBlbHNlIGlmIChwYXJ0ID09PSAnLi4nKSB7XG4gICAgICBzcGxpY2VPbmUoZnJvbVBhcnRzLCBpKTtcbiAgICAgIHVwKys7XG4gICAgfSBlbHNlIGlmICh1cCkge1xuICAgICAgc3BsaWNlT25lKGZyb21QYXJ0cywgaSk7XG4gICAgICB1cC0tO1xuICAgIH1cbiAgfVxuXG4gIGlmICghbXVzdEVuZEFicykgZm9yICg7IHVwLS07IHVwKSB7XG4gICAgZnJvbVBhcnRzLnVuc2hpZnQoJy4uJyk7XG4gIH1pZiAobXVzdEVuZEFicyAmJiBmcm9tUGFydHNbMF0gIT09ICcnICYmICghZnJvbVBhcnRzWzBdIHx8ICFpc0Fic29sdXRlKGZyb21QYXJ0c1swXSkpKSBmcm9tUGFydHMudW5zaGlmdCgnJyk7XG5cbiAgdmFyIHJlc3VsdCA9IGZyb21QYXJ0cy5qb2luKCcvJyk7XG5cbiAgaWYgKGhhc1RyYWlsaW5nU2xhc2ggJiYgcmVzdWx0LnN1YnN0cigtMSkgIT09ICcvJykgcmVzdWx0ICs9ICcvJztcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZGVmYXVsdCByZXNvbHZlUGF0aG5hbWU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3Jlc29sdmUtcGF0aG5hbWUvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDk5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwidmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG5mdW5jdGlvbiB2YWx1ZUVxdWFsKGEsIGIpIHtcbiAgaWYgKGEgPT09IGIpIHJldHVybiB0cnVlO1xuXG4gIGlmIChhID09IG51bGwgfHwgYiA9PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkoYSkpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShiKSAmJiBhLmxlbmd0aCA9PT0gYi5sZW5ndGggJiYgYS5ldmVyeShmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgIHJldHVybiB2YWx1ZUVxdWFsKGl0ZW0sIGJbaW5kZXhdKTtcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBhVHlwZSA9IHR5cGVvZiBhID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihhKTtcbiAgdmFyIGJUeXBlID0gdHlwZW9mIGIgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGIpO1xuXG4gIGlmIChhVHlwZSAhPT0gYlR5cGUpIHJldHVybiBmYWxzZTtcblxuICBpZiAoYVR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgdmFyIGFWYWx1ZSA9IGEudmFsdWVPZigpO1xuICAgIHZhciBiVmFsdWUgPSBiLnZhbHVlT2YoKTtcblxuICAgIGlmIChhVmFsdWUgIT09IGEgfHwgYlZhbHVlICE9PSBiKSByZXR1cm4gdmFsdWVFcXVhbChhVmFsdWUsIGJWYWx1ZSk7XG5cbiAgICB2YXIgYUtleXMgPSBPYmplY3Qua2V5cyhhKTtcbiAgICB2YXIgYktleXMgPSBPYmplY3Qua2V5cyhiKTtcblxuICAgIGlmIChhS2V5cy5sZW5ndGggIT09IGJLZXlzLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgcmV0dXJuIGFLZXlzLmV2ZXJ5KGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiB2YWx1ZUVxdWFsKGFba2V5XSwgYltrZXldKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdmFsdWVFcXVhbDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vdmFsdWUtZXF1YWwvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDEwMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9nZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZicpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcycpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybicpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpO1xuXG52YXIgX2luaGVyaXRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cycpO1xuXG52YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cbnZhciBfc2ltcGxlQXNzaWduID0gcmVxdWlyZSgnc2ltcGxlLWFzc2lnbicpO1xuXG52YXIgX3NpbXBsZUFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaW1wbGVBc3NpZ24pO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX1BhcGVyID0gcmVxdWlyZSgnLi4vUGFwZXInKTtcblxudmFyIF9QYXBlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9QYXBlcik7XG5cbnZhciBfdHJhbnNpdGlvbnMgPSByZXF1aXJlKCcuLi9zdHlsZXMvdHJhbnNpdGlvbnMnKTtcblxudmFyIF90cmFuc2l0aW9uczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90cmFuc2l0aW9ucyk7XG5cbnZhciBfcHJvcFR5cGVzMyA9IHJlcXVpcmUoJy4uL3V0aWxzL3Byb3BUeXBlcycpO1xuXG52YXIgX3Byb3BUeXBlczQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gZ2V0U3R5bGVzKHByb3BzLCBjb250ZXh0LCBzdGF0ZSkge1xuICB2YXIgdGFyZ2V0T3JpZ2luID0gcHJvcHMudGFyZ2V0T3JpZ2luO1xuICB2YXIgb3BlbiA9IHN0YXRlLm9wZW47XG4gIHZhciBtdWlUaGVtZSA9IGNvbnRleHQubXVpVGhlbWU7XG5cbiAgdmFyIGhvcml6b250YWwgPSB0YXJnZXRPcmlnaW4uaG9yaXpvbnRhbC5yZXBsYWNlKCdtaWRkbGUnLCAndmVydGljYWwnKTtcblxuICByZXR1cm4ge1xuICAgIHJvb3Q6IHtcbiAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICAgekluZGV4OiBtdWlUaGVtZS56SW5kZXgucG9wb3ZlcixcbiAgICAgIG9wYWNpdHk6IG9wZW4gPyAxIDogMCxcbiAgICAgIHRyYW5zZm9ybTogb3BlbiA/ICdzY2FsZVkoMSknIDogJ3NjYWxlWSgwKScsXG4gICAgICB0cmFuc2Zvcm1PcmlnaW46IGhvcml6b250YWwgKyAnICcgKyB0YXJnZXRPcmlnaW4udmVydGljYWwsXG4gICAgICB0cmFuc2l0aW9uOiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnNDUwbXMnLCBbJ3RyYW5zZm9ybScsICdvcGFjaXR5J10pLFxuICAgICAgbWF4SGVpZ2h0OiAnMTAwJSdcbiAgICB9XG4gIH07XG59XG5cbnZhciBQb3BvdmVyQW5pbWF0aW9uVmVydGljYWwgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShQb3BvdmVyQW5pbWF0aW9uVmVydGljYWwsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFBvcG92ZXJBbmltYXRpb25WZXJ0aWNhbCgpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBQb3BvdmVyQW5pbWF0aW9uVmVydGljYWwpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChfcmVmID0gUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShQb3BvdmVyQW5pbWF0aW9uVmVydGljYWwpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG9wZW46IGZhbHNlXG4gICAgfSwgX3RlbXApLCAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKFBvcG92ZXJBbmltYXRpb25WZXJ0aWNhbCwgW3tcbiAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IG9wZW46IHRydWUgfSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcmVhY3Qvbm8tZGlkLW1vdW50LXNldC1zdGF0ZVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIG9wZW46IG5leHRQcm9wcy5vcGVuXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBjbGFzc05hbWUgPSBfcHJvcHMuY2xhc3NOYW1lLFxuICAgICAgICAgIHN0eWxlID0gX3Byb3BzLnN0eWxlLFxuICAgICAgICAgIHpEZXB0aCA9IF9wcm9wcy56RGVwdGg7XG5cblxuICAgICAgdmFyIHN0eWxlcyA9IGdldFN0eWxlcyh0aGlzLnByb3BzLCB0aGlzLmNvbnRleHQsIHRoaXMuc3RhdGUpO1xuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgIF9QYXBlcjIuZGVmYXVsdCxcbiAgICAgICAge1xuICAgICAgICAgIHN0eWxlOiAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLnJvb3QsIHN0eWxlKSxcbiAgICAgICAgICB6RGVwdGg6IHpEZXB0aCxcbiAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZVxuICAgICAgICB9LFxuICAgICAgICB0aGlzLnByb3BzLmNoaWxkcmVuXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsO1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsLmRlZmF1bHRQcm9wcyA9IHtcbiAgc3R5bGU6IHt9LFxuICB6RGVwdGg6IDFcbn07XG5Qb3BvdmVyQW5pbWF0aW9uVmVydGljYWwuY29udGV4dFR5cGVzID0ge1xuICBtdWlUaGVtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QuaXNSZXF1aXJlZFxufTtcblBvcG92ZXJBbmltYXRpb25WZXJ0aWNhbC5wcm9wVHlwZXMgPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB7XG4gIGNoaWxkcmVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIGNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIG9wZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbC5pc1JlcXVpcmVkLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIHN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgdGFyZ2V0T3JpZ2luOiBfcHJvcFR5cGVzNC5kZWZhdWx0Lm9yaWdpbi5pc1JlcXVpcmVkLFxuICB6RGVwdGg6IF9wcm9wVHlwZXM0LmRlZmF1bHQuekRlcHRoXG59IDoge307XG5leHBvcnRzLmRlZmF1bHQgPSBQb3BvdmVyQW5pbWF0aW9uVmVydGljYWw7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L21hdGVyaWFsLXVpL1BvcG92ZXIvUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDIiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBleHBvcnRzLk1lbnVJdGVtID0gZXhwb3J0cy5Ecm9wRG93bk1lbnUgPSB1bmRlZmluZWQ7XG5cbnZhciBfRHJvcERvd25NZW51MiA9IHJlcXVpcmUoJy4vRHJvcERvd25NZW51Jyk7XG5cbnZhciBfRHJvcERvd25NZW51MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0Ryb3BEb3duTWVudTIpO1xuXG52YXIgX01lbnVJdGVtMiA9IHJlcXVpcmUoJy4uL01lbnVJdGVtL01lbnVJdGVtJyk7XG5cbnZhciBfTWVudUl0ZW0zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTWVudUl0ZW0yKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZXhwb3J0cy5Ecm9wRG93bk1lbnUgPSBfRHJvcERvd25NZW51My5kZWZhdWx0O1xuZXhwb3J0cy5NZW51SXRlbSA9IF9NZW51SXRlbTMuZGVmYXVsdDtcbmV4cG9ydHMuZGVmYXVsdCA9IF9Ecm9wRG93bk1lbnUzLmRlZmF1bHQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L21hdGVyaWFsLXVpL0Ryb3BEb3duTWVudS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAyIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfd2FybmluZyA9IHJlcXVpcmUoJ3dhcm5pbmcnKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG52YXIgX2ludmFyaWFudCA9IHJlcXVpcmUoJ2ludmFyaWFudCcpO1xuXG52YXIgX2ludmFyaWFudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbnZhcmlhbnQpO1xuXG52YXIgX0xvY2F0aW9uVXRpbHMgPSByZXF1aXJlKCcuL0xvY2F0aW9uVXRpbHMnKTtcblxudmFyIF9QYXRoVXRpbHMgPSByZXF1aXJlKCcuL1BhdGhVdGlscycpO1xuXG52YXIgX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyID0gcmVxdWlyZSgnLi9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcicpO1xuXG52YXIgX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyKTtcblxudmFyIF9ET01VdGlscyA9IHJlcXVpcmUoJy4vRE9NVXRpbHMnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIFBvcFN0YXRlRXZlbnQgPSAncG9wc3RhdGUnO1xudmFyIEhhc2hDaGFuZ2VFdmVudCA9ICdoYXNoY2hhbmdlJztcblxudmFyIGdldEhpc3RvcnlTdGF0ZSA9IGZ1bmN0aW9uIGdldEhpc3RvcnlTdGF0ZSgpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gd2luZG93Lmhpc3Rvcnkuc3RhdGUgfHwge307XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBJRSAxMSBzb21ldGltZXMgdGhyb3dzIHdoZW4gYWNjZXNzaW5nIHdpbmRvdy5oaXN0b3J5LnN0YXRlXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9SZWFjdFRyYWluaW5nL2hpc3RvcnkvcHVsbC8yODlcbiAgICByZXR1cm4ge307XG4gIH1cbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIGhpc3Rvcnkgb2JqZWN0IHRoYXQgdXNlcyB0aGUgSFRNTDUgaGlzdG9yeSBBUEkgaW5jbHVkaW5nXG4gKiBwdXNoU3RhdGUsIHJlcGxhY2VTdGF0ZSwgYW5kIHRoZSBwb3BzdGF0ZSBldmVudC5cbiAqL1xudmFyIGNyZWF0ZUJyb3dzZXJIaXN0b3J5ID0gZnVuY3Rpb24gY3JlYXRlQnJvd3Nlckhpc3RvcnkoKSB7XG4gIHZhciBwcm9wcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgKDAsIF9pbnZhcmlhbnQyLmRlZmF1bHQpKF9ET01VdGlscy5jYW5Vc2VET00sICdCcm93c2VyIGhpc3RvcnkgbmVlZHMgYSBET00nKTtcblxuICB2YXIgZ2xvYmFsSGlzdG9yeSA9IHdpbmRvdy5oaXN0b3J5O1xuICB2YXIgY2FuVXNlSGlzdG9yeSA9ICgwLCBfRE9NVXRpbHMuc3VwcG9ydHNIaXN0b3J5KSgpO1xuICB2YXIgbmVlZHNIYXNoQ2hhbmdlTGlzdGVuZXIgPSAhKDAsIF9ET01VdGlscy5zdXBwb3J0c1BvcFN0YXRlT25IYXNoQ2hhbmdlKSgpO1xuXG4gIHZhciBfcHJvcHMkZm9yY2VSZWZyZXNoID0gcHJvcHMuZm9yY2VSZWZyZXNoLFxuICAgICAgZm9yY2VSZWZyZXNoID0gX3Byb3BzJGZvcmNlUmVmcmVzaCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcHJvcHMkZm9yY2VSZWZyZXNoLFxuICAgICAgX3Byb3BzJGdldFVzZXJDb25maXJtID0gcHJvcHMuZ2V0VXNlckNvbmZpcm1hdGlvbixcbiAgICAgIGdldFVzZXJDb25maXJtYXRpb24gPSBfcHJvcHMkZ2V0VXNlckNvbmZpcm0gPT09IHVuZGVmaW5lZCA/IF9ET01VdGlscy5nZXRDb25maXJtYXRpb24gOiBfcHJvcHMkZ2V0VXNlckNvbmZpcm0sXG4gICAgICBfcHJvcHMka2V5TGVuZ3RoID0gcHJvcHMua2V5TGVuZ3RoLFxuICAgICAga2V5TGVuZ3RoID0gX3Byb3BzJGtleUxlbmd0aCA9PT0gdW5kZWZpbmVkID8gNiA6IF9wcm9wcyRrZXlMZW5ndGg7XG5cbiAgdmFyIGJhc2VuYW1lID0gcHJvcHMuYmFzZW5hbWUgPyAoMCwgX1BhdGhVdGlscy5zdHJpcFRyYWlsaW5nU2xhc2gpKCgwLCBfUGF0aFV0aWxzLmFkZExlYWRpbmdTbGFzaCkocHJvcHMuYmFzZW5hbWUpKSA6ICcnO1xuXG4gIHZhciBnZXRET01Mb2NhdGlvbiA9IGZ1bmN0aW9uIGdldERPTUxvY2F0aW9uKGhpc3RvcnlTdGF0ZSkge1xuICAgIHZhciBfcmVmID0gaGlzdG9yeVN0YXRlIHx8IHt9LFxuICAgICAgICBrZXkgPSBfcmVmLmtleSxcbiAgICAgICAgc3RhdGUgPSBfcmVmLnN0YXRlO1xuXG4gICAgdmFyIF93aW5kb3ckbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24sXG4gICAgICAgIHBhdGhuYW1lID0gX3dpbmRvdyRsb2NhdGlvbi5wYXRobmFtZSxcbiAgICAgICAgc2VhcmNoID0gX3dpbmRvdyRsb2NhdGlvbi5zZWFyY2gsXG4gICAgICAgIGhhc2ggPSBfd2luZG93JGxvY2F0aW9uLmhhc2g7XG5cblxuICAgIHZhciBwYXRoID0gcGF0aG5hbWUgKyBzZWFyY2ggKyBoYXNoO1xuXG4gICAgKDAsIF93YXJuaW5nMi5kZWZhdWx0KSghYmFzZW5hbWUgfHwgKDAsIF9QYXRoVXRpbHMuaGFzQmFzZW5hbWUpKHBhdGgsIGJhc2VuYW1lKSwgJ1lvdSBhcmUgYXR0ZW1wdGluZyB0byB1c2UgYSBiYXNlbmFtZSBvbiBhIHBhZ2Ugd2hvc2UgVVJMIHBhdGggZG9lcyBub3QgYmVnaW4gJyArICd3aXRoIHRoZSBiYXNlbmFtZS4gRXhwZWN0ZWQgcGF0aCBcIicgKyBwYXRoICsgJ1wiIHRvIGJlZ2luIHdpdGggXCInICsgYmFzZW5hbWUgKyAnXCIuJyk7XG5cbiAgICBpZiAoYmFzZW5hbWUpIHBhdGggPSAoMCwgX1BhdGhVdGlscy5zdHJpcEJhc2VuYW1lKShwYXRoLCBiYXNlbmFtZSk7XG5cbiAgICByZXR1cm4gKDAsIF9Mb2NhdGlvblV0aWxzLmNyZWF0ZUxvY2F0aW9uKShwYXRoLCBzdGF0ZSwga2V5KTtcbiAgfTtcblxuICB2YXIgY3JlYXRlS2V5ID0gZnVuY3Rpb24gY3JlYXRlS2V5KCkge1xuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwga2V5TGVuZ3RoKTtcbiAgfTtcblxuICB2YXIgdHJhbnNpdGlvbk1hbmFnZXIgPSAoMCwgX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyMi5kZWZhdWx0KSgpO1xuXG4gIHZhciBzZXRTdGF0ZSA9IGZ1bmN0aW9uIHNldFN0YXRlKG5leHRTdGF0ZSkge1xuICAgIF9leHRlbmRzKGhpc3RvcnksIG5leHRTdGF0ZSk7XG5cbiAgICBoaXN0b3J5Lmxlbmd0aCA9IGdsb2JhbEhpc3RvcnkubGVuZ3RoO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIubm90aWZ5TGlzdGVuZXJzKGhpc3RvcnkubG9jYXRpb24sIGhpc3RvcnkuYWN0aW9uKTtcbiAgfTtcblxuICB2YXIgaGFuZGxlUG9wU3RhdGUgPSBmdW5jdGlvbiBoYW5kbGVQb3BTdGF0ZShldmVudCkge1xuICAgIC8vIElnbm9yZSBleHRyYW5lb3VzIHBvcHN0YXRlIGV2ZW50cyBpbiBXZWJLaXQuXG4gICAgaWYgKCgwLCBfRE9NVXRpbHMuaXNFeHRyYW5lb3VzUG9wc3RhdGVFdmVudCkoZXZlbnQpKSByZXR1cm47XG5cbiAgICBoYW5kbGVQb3AoZ2V0RE9NTG9jYXRpb24oZXZlbnQuc3RhdGUpKTtcbiAgfTtcblxuICB2YXIgaGFuZGxlSGFzaENoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZUhhc2hDaGFuZ2UoKSB7XG4gICAgaGFuZGxlUG9wKGdldERPTUxvY2F0aW9uKGdldEhpc3RvcnlTdGF0ZSgpKSk7XG4gIH07XG5cbiAgdmFyIGZvcmNlTmV4dFBvcCA9IGZhbHNlO1xuXG4gIHZhciBoYW5kbGVQb3AgPSBmdW5jdGlvbiBoYW5kbGVQb3AobG9jYXRpb24pIHtcbiAgICBpZiAoZm9yY2VOZXh0UG9wKSB7XG4gICAgICBmb3JjZU5leHRQb3AgPSBmYWxzZTtcbiAgICAgIHNldFN0YXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhY3Rpb24gPSAnUE9QJztcblxuICAgICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgICAgaWYgKG9rKSB7XG4gICAgICAgICAgc2V0U3RhdGUoeyBhY3Rpb246IGFjdGlvbiwgbG9jYXRpb246IGxvY2F0aW9uIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldmVydFBvcChsb2NhdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICB2YXIgcmV2ZXJ0UG9wID0gZnVuY3Rpb24gcmV2ZXJ0UG9wKGZyb21Mb2NhdGlvbikge1xuICAgIHZhciB0b0xvY2F0aW9uID0gaGlzdG9yeS5sb2NhdGlvbjtcblxuICAgIC8vIFRPRE86IFdlIGNvdWxkIHByb2JhYmx5IG1ha2UgdGhpcyBtb3JlIHJlbGlhYmxlIGJ5XG4gICAgLy8ga2VlcGluZyBhIGxpc3Qgb2Yga2V5cyB3ZSd2ZSBzZWVuIGluIHNlc3Npb25TdG9yYWdlLlxuICAgIC8vIEluc3RlYWQsIHdlIGp1c3QgZGVmYXVsdCB0byAwIGZvciBrZXlzIHdlIGRvbid0IGtub3cuXG5cbiAgICB2YXIgdG9JbmRleCA9IGFsbEtleXMuaW5kZXhPZih0b0xvY2F0aW9uLmtleSk7XG5cbiAgICBpZiAodG9JbmRleCA9PT0gLTEpIHRvSW5kZXggPSAwO1xuXG4gICAgdmFyIGZyb21JbmRleCA9IGFsbEtleXMuaW5kZXhPZihmcm9tTG9jYXRpb24ua2V5KTtcblxuICAgIGlmIChmcm9tSW5kZXggPT09IC0xKSBmcm9tSW5kZXggPSAwO1xuXG4gICAgdmFyIGRlbHRhID0gdG9JbmRleCAtIGZyb21JbmRleDtcblxuICAgIGlmIChkZWx0YSkge1xuICAgICAgZm9yY2VOZXh0UG9wID0gdHJ1ZTtcbiAgICAgIGdvKGRlbHRhKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGluaXRpYWxMb2NhdGlvbiA9IGdldERPTUxvY2F0aW9uKGdldEhpc3RvcnlTdGF0ZSgpKTtcbiAgdmFyIGFsbEtleXMgPSBbaW5pdGlhbExvY2F0aW9uLmtleV07XG5cbiAgLy8gUHVibGljIGludGVyZmFjZVxuXG4gIHZhciBjcmVhdGVIcmVmID0gZnVuY3Rpb24gY3JlYXRlSHJlZihsb2NhdGlvbikge1xuICAgIHJldHVybiBiYXNlbmFtZSArICgwLCBfUGF0aFV0aWxzLmNyZWF0ZVBhdGgpKGxvY2F0aW9uKTtcbiAgfTtcblxuICB2YXIgcHVzaCA9IGZ1bmN0aW9uIHB1c2gocGF0aCwgc3RhdGUpIHtcbiAgICAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKCEoKHR5cGVvZiBwYXRoID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihwYXRoKSkgPT09ICdvYmplY3QnICYmIHBhdGguc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBzdGF0ZSAhPT0gdW5kZWZpbmVkKSwgJ1lvdSBzaG91bGQgYXZvaWQgcHJvdmlkaW5nIGEgMm5kIHN0YXRlIGFyZ3VtZW50IHRvIHB1c2ggd2hlbiB0aGUgMXN0ICcgKyAnYXJndW1lbnQgaXMgYSBsb2NhdGlvbi1saWtlIG9iamVjdCB0aGF0IGFscmVhZHkgaGFzIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7XG5cbiAgICB2YXIgYWN0aW9uID0gJ1BVU0gnO1xuICAgIHZhciBsb2NhdGlvbiA9ICgwLCBfTG9jYXRpb25VdGlscy5jcmVhdGVMb2NhdGlvbikocGF0aCwgc3RhdGUsIGNyZWF0ZUtleSgpLCBoaXN0b3J5LmxvY2F0aW9uKTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG5cbiAgICAgIHZhciBocmVmID0gY3JlYXRlSHJlZihsb2NhdGlvbik7XG4gICAgICB2YXIga2V5ID0gbG9jYXRpb24ua2V5LFxuICAgICAgICAgIHN0YXRlID0gbG9jYXRpb24uc3RhdGU7XG5cblxuICAgICAgaWYgKGNhblVzZUhpc3RvcnkpIHtcbiAgICAgICAgZ2xvYmFsSGlzdG9yeS5wdXNoU3RhdGUoeyBrZXk6IGtleSwgc3RhdGU6IHN0YXRlIH0sIG51bGwsIGhyZWYpO1xuXG4gICAgICAgIGlmIChmb3JjZVJlZnJlc2gpIHtcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhyZWY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHByZXZJbmRleCA9IGFsbEtleXMuaW5kZXhPZihoaXN0b3J5LmxvY2F0aW9uLmtleSk7XG4gICAgICAgICAgdmFyIG5leHRLZXlzID0gYWxsS2V5cy5zbGljZSgwLCBwcmV2SW5kZXggPT09IC0xID8gMCA6IHByZXZJbmRleCArIDEpO1xuXG4gICAgICAgICAgbmV4dEtleXMucHVzaChsb2NhdGlvbi5rZXkpO1xuICAgICAgICAgIGFsbEtleXMgPSBuZXh0S2V5cztcblxuICAgICAgICAgIHNldFN0YXRlKHsgYWN0aW9uOiBhY3Rpb24sIGxvY2F0aW9uOiBsb2NhdGlvbiB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKDAsIF93YXJuaW5nMi5kZWZhdWx0KShzdGF0ZSA9PT0gdW5kZWZpbmVkLCAnQnJvd3NlciBoaXN0b3J5IGNhbm5vdCBwdXNoIHN0YXRlIGluIGJyb3dzZXJzIHRoYXQgZG8gbm90IHN1cHBvcnQgSFRNTDUgaGlzdG9yeScpO1xuXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICB2YXIgcmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UocGF0aCwgc3RhdGUpIHtcbiAgICAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKCEoKHR5cGVvZiBwYXRoID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihwYXRoKSkgPT09ICdvYmplY3QnICYmIHBhdGguc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBzdGF0ZSAhPT0gdW5kZWZpbmVkKSwgJ1lvdSBzaG91bGQgYXZvaWQgcHJvdmlkaW5nIGEgMm5kIHN0YXRlIGFyZ3VtZW50IHRvIHJlcGxhY2Ugd2hlbiB0aGUgMXN0ICcgKyAnYXJndW1lbnQgaXMgYSBsb2NhdGlvbi1saWtlIG9iamVjdCB0aGF0IGFscmVhZHkgaGFzIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7XG5cbiAgICB2YXIgYWN0aW9uID0gJ1JFUExBQ0UnO1xuICAgIHZhciBsb2NhdGlvbiA9ICgwLCBfTG9jYXRpb25VdGlscy5jcmVhdGVMb2NhdGlvbikocGF0aCwgc3RhdGUsIGNyZWF0ZUtleSgpLCBoaXN0b3J5LmxvY2F0aW9uKTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG5cbiAgICAgIHZhciBocmVmID0gY3JlYXRlSHJlZihsb2NhdGlvbik7XG4gICAgICB2YXIga2V5ID0gbG9jYXRpb24ua2V5LFxuICAgICAgICAgIHN0YXRlID0gbG9jYXRpb24uc3RhdGU7XG5cblxuICAgICAgaWYgKGNhblVzZUhpc3RvcnkpIHtcbiAgICAgICAgZ2xvYmFsSGlzdG9yeS5yZXBsYWNlU3RhdGUoeyBrZXk6IGtleSwgc3RhdGU6IHN0YXRlIH0sIG51bGwsIGhyZWYpO1xuXG4gICAgICAgIGlmIChmb3JjZVJlZnJlc2gpIHtcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShocmVmKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgcHJldkluZGV4ID0gYWxsS2V5cy5pbmRleE9mKGhpc3RvcnkubG9jYXRpb24ua2V5KTtcblxuICAgICAgICAgIGlmIChwcmV2SW5kZXggIT09IC0xKSBhbGxLZXlzW3ByZXZJbmRleF0gPSBsb2NhdGlvbi5rZXk7XG5cbiAgICAgICAgICBzZXRTdGF0ZSh7IGFjdGlvbjogYWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24gfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkoc3RhdGUgPT09IHVuZGVmaW5lZCwgJ0Jyb3dzZXIgaGlzdG9yeSBjYW5ub3QgcmVwbGFjZSBzdGF0ZSBpbiBicm93c2VycyB0aGF0IGRvIG5vdCBzdXBwb3J0IEhUTUw1IGhpc3RvcnknKTtcblxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShocmVmKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICB2YXIgZ28gPSBmdW5jdGlvbiBnbyhuKSB7XG4gICAgZ2xvYmFsSGlzdG9yeS5nbyhuKTtcbiAgfTtcblxuICB2YXIgZ29CYWNrID0gZnVuY3Rpb24gZ29CYWNrKCkge1xuICAgIHJldHVybiBnbygtMSk7XG4gIH07XG5cbiAgdmFyIGdvRm9yd2FyZCA9IGZ1bmN0aW9uIGdvRm9yd2FyZCgpIHtcbiAgICByZXR1cm4gZ28oMSk7XG4gIH07XG5cbiAgdmFyIGxpc3RlbmVyQ291bnQgPSAwO1xuXG4gIHZhciBjaGVja0RPTUxpc3RlbmVycyA9IGZ1bmN0aW9uIGNoZWNrRE9NTGlzdGVuZXJzKGRlbHRhKSB7XG4gICAgbGlzdGVuZXJDb3VudCArPSBkZWx0YTtcblxuICAgIGlmIChsaXN0ZW5lckNvdW50ID09PSAxKSB7XG4gICAgICAoMCwgX0RPTVV0aWxzLmFkZEV2ZW50TGlzdGVuZXIpKHdpbmRvdywgUG9wU3RhdGVFdmVudCwgaGFuZGxlUG9wU3RhdGUpO1xuXG4gICAgICBpZiAobmVlZHNIYXNoQ2hhbmdlTGlzdGVuZXIpICgwLCBfRE9NVXRpbHMuYWRkRXZlbnRMaXN0ZW5lcikod2luZG93LCBIYXNoQ2hhbmdlRXZlbnQsIGhhbmRsZUhhc2hDaGFuZ2UpO1xuICAgIH0gZWxzZSBpZiAobGlzdGVuZXJDb3VudCA9PT0gMCkge1xuICAgICAgKDAsIF9ET01VdGlscy5yZW1vdmVFdmVudExpc3RlbmVyKSh3aW5kb3csIFBvcFN0YXRlRXZlbnQsIGhhbmRsZVBvcFN0YXRlKTtcblxuICAgICAgaWYgKG5lZWRzSGFzaENoYW5nZUxpc3RlbmVyKSAoMCwgX0RPTVV0aWxzLnJlbW92ZUV2ZW50TGlzdGVuZXIpKHdpbmRvdywgSGFzaENoYW5nZUV2ZW50LCBoYW5kbGVIYXNoQ2hhbmdlKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGlzQmxvY2tlZCA9IGZhbHNlO1xuXG4gIHZhciBibG9jayA9IGZ1bmN0aW9uIGJsb2NrKCkge1xuICAgIHZhciBwcm9tcHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlO1xuXG4gICAgdmFyIHVuYmxvY2sgPSB0cmFuc2l0aW9uTWFuYWdlci5zZXRQcm9tcHQocHJvbXB0KTtcblxuICAgIGlmICghaXNCbG9ja2VkKSB7XG4gICAgICBjaGVja0RPTUxpc3RlbmVycygxKTtcbiAgICAgIGlzQmxvY2tlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChpc0Jsb2NrZWQpIHtcbiAgICAgICAgaXNCbG9ja2VkID0gZmFsc2U7XG4gICAgICAgIGNoZWNrRE9NTGlzdGVuZXJzKC0xKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHVuYmxvY2soKTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBsaXN0ZW4gPSBmdW5jdGlvbiBsaXN0ZW4obGlzdGVuZXIpIHtcbiAgICB2YXIgdW5saXN0ZW4gPSB0cmFuc2l0aW9uTWFuYWdlci5hcHBlbmRMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgY2hlY2tET01MaXN0ZW5lcnMoMSk7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgY2hlY2tET01MaXN0ZW5lcnMoLTEpO1xuICAgICAgdW5saXN0ZW4oKTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBoaXN0b3J5ID0ge1xuICAgIGxlbmd0aDogZ2xvYmFsSGlzdG9yeS5sZW5ndGgsXG4gICAgYWN0aW9uOiAnUE9QJyxcbiAgICBsb2NhdGlvbjogaW5pdGlhbExvY2F0aW9uLFxuICAgIGNyZWF0ZUhyZWY6IGNyZWF0ZUhyZWYsXG4gICAgcHVzaDogcHVzaCxcbiAgICByZXBsYWNlOiByZXBsYWNlLFxuICAgIGdvOiBnbyxcbiAgICBnb0JhY2s6IGdvQmFjayxcbiAgICBnb0ZvcndhcmQ6IGdvRm9yd2FyZCxcbiAgICBibG9jazogYmxvY2ssXG4gICAgbGlzdGVuOiBsaXN0ZW5cbiAgfTtcblxuICByZXR1cm4gaGlzdG9yeTtcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGNyZWF0ZUJyb3dzZXJIaXN0b3J5O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9oaXN0b3J5L2NyZWF0ZUJyb3dzZXJIaXN0b3J5LmpzXG4vLyBtb2R1bGUgaWQgPSAxMzVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfd2FybmluZyA9IHJlcXVpcmUoJ3dhcm5pbmcnKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG52YXIgX2ludmFyaWFudCA9IHJlcXVpcmUoJ2ludmFyaWFudCcpO1xuXG52YXIgX2ludmFyaWFudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbnZhcmlhbnQpO1xuXG52YXIgX0xvY2F0aW9uVXRpbHMgPSByZXF1aXJlKCcuL0xvY2F0aW9uVXRpbHMnKTtcblxudmFyIF9QYXRoVXRpbHMgPSByZXF1aXJlKCcuL1BhdGhVdGlscycpO1xuXG52YXIgX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyID0gcmVxdWlyZSgnLi9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcicpO1xuXG52YXIgX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyKTtcblxudmFyIF9ET01VdGlscyA9IHJlcXVpcmUoJy4vRE9NVXRpbHMnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIEhhc2hDaGFuZ2VFdmVudCA9ICdoYXNoY2hhbmdlJztcblxudmFyIEhhc2hQYXRoQ29kZXJzID0ge1xuICBoYXNoYmFuZzoge1xuICAgIGVuY29kZVBhdGg6IGZ1bmN0aW9uIGVuY29kZVBhdGgocGF0aCkge1xuICAgICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnIScgPyBwYXRoIDogJyEvJyArICgwLCBfUGF0aFV0aWxzLnN0cmlwTGVhZGluZ1NsYXNoKShwYXRoKTtcbiAgICB9LFxuICAgIGRlY29kZVBhdGg6IGZ1bmN0aW9uIGRlY29kZVBhdGgocGF0aCkge1xuICAgICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnIScgPyBwYXRoLnN1YnN0cigxKSA6IHBhdGg7XG4gICAgfVxuICB9LFxuICBub3NsYXNoOiB7XG4gICAgZW5jb2RlUGF0aDogX1BhdGhVdGlscy5zdHJpcExlYWRpbmdTbGFzaCxcbiAgICBkZWNvZGVQYXRoOiBfUGF0aFV0aWxzLmFkZExlYWRpbmdTbGFzaFxuICB9LFxuICBzbGFzaDoge1xuICAgIGVuY29kZVBhdGg6IF9QYXRoVXRpbHMuYWRkTGVhZGluZ1NsYXNoLFxuICAgIGRlY29kZVBhdGg6IF9QYXRoVXRpbHMuYWRkTGVhZGluZ1NsYXNoXG4gIH1cbn07XG5cbnZhciBnZXRIYXNoUGF0aCA9IGZ1bmN0aW9uIGdldEhhc2hQYXRoKCkge1xuICAvLyBXZSBjYW4ndCB1c2Ugd2luZG93LmxvY2F0aW9uLmhhc2ggaGVyZSBiZWNhdXNlIGl0J3Mgbm90XG4gIC8vIGNvbnNpc3RlbnQgYWNyb3NzIGJyb3dzZXJzIC0gRmlyZWZveCB3aWxsIHByZS1kZWNvZGUgaXQhXG4gIHZhciBocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIHZhciBoYXNoSW5kZXggPSBocmVmLmluZGV4T2YoJyMnKTtcbiAgcmV0dXJuIGhhc2hJbmRleCA9PT0gLTEgPyAnJyA6IGhyZWYuc3Vic3RyaW5nKGhhc2hJbmRleCArIDEpO1xufTtcblxudmFyIHB1c2hIYXNoUGF0aCA9IGZ1bmN0aW9uIHB1c2hIYXNoUGF0aChwYXRoKSB7XG4gIHJldHVybiB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHBhdGg7XG59O1xuXG52YXIgcmVwbGFjZUhhc2hQYXRoID0gZnVuY3Rpb24gcmVwbGFjZUhhc2hQYXRoKHBhdGgpIHtcbiAgdmFyIGhhc2hJbmRleCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoJyMnKTtcblxuICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSh3aW5kb3cubG9jYXRpb24uaHJlZi5zbGljZSgwLCBoYXNoSW5kZXggPj0gMCA/IGhhc2hJbmRleCA6IDApICsgJyMnICsgcGF0aCk7XG59O1xuXG52YXIgY3JlYXRlSGFzaEhpc3RvcnkgPSBmdW5jdGlvbiBjcmVhdGVIYXNoSGlzdG9yeSgpIHtcbiAgdmFyIHByb3BzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICAoMCwgX2ludmFyaWFudDIuZGVmYXVsdCkoX0RPTVV0aWxzLmNhblVzZURPTSwgJ0hhc2ggaGlzdG9yeSBuZWVkcyBhIERPTScpO1xuXG4gIHZhciBnbG9iYWxIaXN0b3J5ID0gd2luZG93Lmhpc3Rvcnk7XG4gIHZhciBjYW5Hb1dpdGhvdXRSZWxvYWQgPSAoMCwgX0RPTVV0aWxzLnN1cHBvcnRzR29XaXRob3V0UmVsb2FkVXNpbmdIYXNoKSgpO1xuXG4gIHZhciBfcHJvcHMkZ2V0VXNlckNvbmZpcm0gPSBwcm9wcy5nZXRVc2VyQ29uZmlybWF0aW9uLFxuICAgICAgZ2V0VXNlckNvbmZpcm1hdGlvbiA9IF9wcm9wcyRnZXRVc2VyQ29uZmlybSA9PT0gdW5kZWZpbmVkID8gX0RPTVV0aWxzLmdldENvbmZpcm1hdGlvbiA6IF9wcm9wcyRnZXRVc2VyQ29uZmlybSxcbiAgICAgIF9wcm9wcyRoYXNoVHlwZSA9IHByb3BzLmhhc2hUeXBlLFxuICAgICAgaGFzaFR5cGUgPSBfcHJvcHMkaGFzaFR5cGUgPT09IHVuZGVmaW5lZCA/ICdzbGFzaCcgOiBfcHJvcHMkaGFzaFR5cGU7XG5cbiAgdmFyIGJhc2VuYW1lID0gcHJvcHMuYmFzZW5hbWUgPyAoMCwgX1BhdGhVdGlscy5zdHJpcFRyYWlsaW5nU2xhc2gpKCgwLCBfUGF0aFV0aWxzLmFkZExlYWRpbmdTbGFzaCkocHJvcHMuYmFzZW5hbWUpKSA6ICcnO1xuXG4gIHZhciBfSGFzaFBhdGhDb2RlcnMkaGFzaFQgPSBIYXNoUGF0aENvZGVyc1toYXNoVHlwZV0sXG4gICAgICBlbmNvZGVQYXRoID0gX0hhc2hQYXRoQ29kZXJzJGhhc2hULmVuY29kZVBhdGgsXG4gICAgICBkZWNvZGVQYXRoID0gX0hhc2hQYXRoQ29kZXJzJGhhc2hULmRlY29kZVBhdGg7XG5cblxuICB2YXIgZ2V0RE9NTG9jYXRpb24gPSBmdW5jdGlvbiBnZXRET01Mb2NhdGlvbigpIHtcbiAgICB2YXIgcGF0aCA9IGRlY29kZVBhdGgoZ2V0SGFzaFBhdGgoKSk7XG5cbiAgICAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKCFiYXNlbmFtZSB8fCAoMCwgX1BhdGhVdGlscy5oYXNCYXNlbmFtZSkocGF0aCwgYmFzZW5hbWUpLCAnWW91IGFyZSBhdHRlbXB0aW5nIHRvIHVzZSBhIGJhc2VuYW1lIG9uIGEgcGFnZSB3aG9zZSBVUkwgcGF0aCBkb2VzIG5vdCBiZWdpbiAnICsgJ3dpdGggdGhlIGJhc2VuYW1lLiBFeHBlY3RlZCBwYXRoIFwiJyArIHBhdGggKyAnXCIgdG8gYmVnaW4gd2l0aCBcIicgKyBiYXNlbmFtZSArICdcIi4nKTtcblxuICAgIGlmIChiYXNlbmFtZSkgcGF0aCA9ICgwLCBfUGF0aFV0aWxzLnN0cmlwQmFzZW5hbWUpKHBhdGgsIGJhc2VuYW1lKTtcblxuICAgIHJldHVybiAoMCwgX0xvY2F0aW9uVXRpbHMuY3JlYXRlTG9jYXRpb24pKHBhdGgpO1xuICB9O1xuXG4gIHZhciB0cmFuc2l0aW9uTWFuYWdlciA9ICgwLCBfY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIyLmRlZmF1bHQpKCk7XG5cbiAgdmFyIHNldFN0YXRlID0gZnVuY3Rpb24gc2V0U3RhdGUobmV4dFN0YXRlKSB7XG4gICAgX2V4dGVuZHMoaGlzdG9yeSwgbmV4dFN0YXRlKTtcblxuICAgIGhpc3RvcnkubGVuZ3RoID0gZ2xvYmFsSGlzdG9yeS5sZW5ndGg7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5ub3RpZnlMaXN0ZW5lcnMoaGlzdG9yeS5sb2NhdGlvbiwgaGlzdG9yeS5hY3Rpb24pO1xuICB9O1xuXG4gIHZhciBmb3JjZU5leHRQb3AgPSBmYWxzZTtcbiAgdmFyIGlnbm9yZVBhdGggPSBudWxsO1xuXG4gIHZhciBoYW5kbGVIYXNoQ2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlSGFzaENoYW5nZSgpIHtcbiAgICB2YXIgcGF0aCA9IGdldEhhc2hQYXRoKCk7XG4gICAgdmFyIGVuY29kZWRQYXRoID0gZW5jb2RlUGF0aChwYXRoKTtcblxuICAgIGlmIChwYXRoICE9PSBlbmNvZGVkUGF0aCkge1xuICAgICAgLy8gRW5zdXJlIHdlIGFsd2F5cyBoYXZlIGEgcHJvcGVybHktZW5jb2RlZCBoYXNoLlxuICAgICAgcmVwbGFjZUhhc2hQYXRoKGVuY29kZWRQYXRoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGxvY2F0aW9uID0gZ2V0RE9NTG9jYXRpb24oKTtcbiAgICAgIHZhciBwcmV2TG9jYXRpb24gPSBoaXN0b3J5LmxvY2F0aW9uO1xuXG4gICAgICBpZiAoIWZvcmNlTmV4dFBvcCAmJiAoMCwgX0xvY2F0aW9uVXRpbHMubG9jYXRpb25zQXJlRXF1YWwpKHByZXZMb2NhdGlvbiwgbG9jYXRpb24pKSByZXR1cm47IC8vIEEgaGFzaGNoYW5nZSBkb2Vzbid0IGFsd2F5cyA9PSBsb2NhdGlvbiBjaGFuZ2UuXG5cbiAgICAgIGlmIChpZ25vcmVQYXRoID09PSAoMCwgX1BhdGhVdGlscy5jcmVhdGVQYXRoKShsb2NhdGlvbikpIHJldHVybjsgLy8gSWdub3JlIHRoaXMgY2hhbmdlOyB3ZSBhbHJlYWR5IHNldFN0YXRlIGluIHB1c2gvcmVwbGFjZS5cblxuICAgICAgaWdub3JlUGF0aCA9IG51bGw7XG5cbiAgICAgIGhhbmRsZVBvcChsb2NhdGlvbik7XG4gICAgfVxuICB9O1xuXG4gIHZhciBoYW5kbGVQb3AgPSBmdW5jdGlvbiBoYW5kbGVQb3AobG9jYXRpb24pIHtcbiAgICBpZiAoZm9yY2VOZXh0UG9wKSB7XG4gICAgICBmb3JjZU5leHRQb3AgPSBmYWxzZTtcbiAgICAgIHNldFN0YXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhY3Rpb24gPSAnUE9QJztcblxuICAgICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgICAgaWYgKG9rKSB7XG4gICAgICAgICAgc2V0U3RhdGUoeyBhY3Rpb246IGFjdGlvbiwgbG9jYXRpb246IGxvY2F0aW9uIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldmVydFBvcChsb2NhdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICB2YXIgcmV2ZXJ0UG9wID0gZnVuY3Rpb24gcmV2ZXJ0UG9wKGZyb21Mb2NhdGlvbikge1xuICAgIHZhciB0b0xvY2F0aW9uID0gaGlzdG9yeS5sb2NhdGlvbjtcblxuICAgIC8vIFRPRE86IFdlIGNvdWxkIHByb2JhYmx5IG1ha2UgdGhpcyBtb3JlIHJlbGlhYmxlIGJ5XG4gICAgLy8ga2VlcGluZyBhIGxpc3Qgb2YgcGF0aHMgd2UndmUgc2VlbiBpbiBzZXNzaW9uU3RvcmFnZS5cbiAgICAvLyBJbnN0ZWFkLCB3ZSBqdXN0IGRlZmF1bHQgdG8gMCBmb3IgcGF0aHMgd2UgZG9uJ3Qga25vdy5cblxuICAgIHZhciB0b0luZGV4ID0gYWxsUGF0aHMubGFzdEluZGV4T2YoKDAsIF9QYXRoVXRpbHMuY3JlYXRlUGF0aCkodG9Mb2NhdGlvbikpO1xuXG4gICAgaWYgKHRvSW5kZXggPT09IC0xKSB0b0luZGV4ID0gMDtcblxuICAgIHZhciBmcm9tSW5kZXggPSBhbGxQYXRocy5sYXN0SW5kZXhPZigoMCwgX1BhdGhVdGlscy5jcmVhdGVQYXRoKShmcm9tTG9jYXRpb24pKTtcblxuICAgIGlmIChmcm9tSW5kZXggPT09IC0xKSBmcm9tSW5kZXggPSAwO1xuXG4gICAgdmFyIGRlbHRhID0gdG9JbmRleCAtIGZyb21JbmRleDtcblxuICAgIGlmIChkZWx0YSkge1xuICAgICAgZm9yY2VOZXh0UG9wID0gdHJ1ZTtcbiAgICAgIGdvKGRlbHRhKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gRW5zdXJlIHRoZSBoYXNoIGlzIGVuY29kZWQgcHJvcGVybHkgYmVmb3JlIGRvaW5nIGFueXRoaW5nIGVsc2UuXG4gIHZhciBwYXRoID0gZ2V0SGFzaFBhdGgoKTtcbiAgdmFyIGVuY29kZWRQYXRoID0gZW5jb2RlUGF0aChwYXRoKTtcblxuICBpZiAocGF0aCAhPT0gZW5jb2RlZFBhdGgpIHJlcGxhY2VIYXNoUGF0aChlbmNvZGVkUGF0aCk7XG5cbiAgdmFyIGluaXRpYWxMb2NhdGlvbiA9IGdldERPTUxvY2F0aW9uKCk7XG4gIHZhciBhbGxQYXRocyA9IFsoMCwgX1BhdGhVdGlscy5jcmVhdGVQYXRoKShpbml0aWFsTG9jYXRpb24pXTtcblxuICAvLyBQdWJsaWMgaW50ZXJmYWNlXG5cbiAgdmFyIGNyZWF0ZUhyZWYgPSBmdW5jdGlvbiBjcmVhdGVIcmVmKGxvY2F0aW9uKSB7XG4gICAgcmV0dXJuICcjJyArIGVuY29kZVBhdGgoYmFzZW5hbWUgKyAoMCwgX1BhdGhVdGlscy5jcmVhdGVQYXRoKShsb2NhdGlvbikpO1xuICB9O1xuXG4gIHZhciBwdXNoID0gZnVuY3Rpb24gcHVzaChwYXRoLCBzdGF0ZSkge1xuICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkoc3RhdGUgPT09IHVuZGVmaW5lZCwgJ0hhc2ggaGlzdG9yeSBjYW5ub3QgcHVzaCBzdGF0ZTsgaXQgaXMgaWdub3JlZCcpO1xuXG4gICAgdmFyIGFjdGlvbiA9ICdQVVNIJztcbiAgICB2YXIgbG9jYXRpb24gPSAoMCwgX0xvY2F0aW9uVXRpbHMuY3JlYXRlTG9jYXRpb24pKHBhdGgsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBoaXN0b3J5LmxvY2F0aW9uKTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG5cbiAgICAgIHZhciBwYXRoID0gKDAsIF9QYXRoVXRpbHMuY3JlYXRlUGF0aCkobG9jYXRpb24pO1xuICAgICAgdmFyIGVuY29kZWRQYXRoID0gZW5jb2RlUGF0aChiYXNlbmFtZSArIHBhdGgpO1xuICAgICAgdmFyIGhhc2hDaGFuZ2VkID0gZ2V0SGFzaFBhdGgoKSAhPT0gZW5jb2RlZFBhdGg7XG5cbiAgICAgIGlmIChoYXNoQ2hhbmdlZCkge1xuICAgICAgICAvLyBXZSBjYW5ub3QgdGVsbCBpZiBhIGhhc2hjaGFuZ2Ugd2FzIGNhdXNlZCBieSBhIFBVU0gsIHNvIHdlJ2RcbiAgICAgICAgLy8gcmF0aGVyIHNldFN0YXRlIGhlcmUgYW5kIGlnbm9yZSB0aGUgaGFzaGNoYW5nZS4gVGhlIGNhdmVhdCBoZXJlXG4gICAgICAgIC8vIGlzIHRoYXQgb3RoZXIgaGFzaCBoaXN0b3JpZXMgaW4gdGhlIHBhZ2Ugd2lsbCBjb25zaWRlciBpdCBhIFBPUC5cbiAgICAgICAgaWdub3JlUGF0aCA9IHBhdGg7XG4gICAgICAgIHB1c2hIYXNoUGF0aChlbmNvZGVkUGF0aCk7XG5cbiAgICAgICAgdmFyIHByZXZJbmRleCA9IGFsbFBhdGhzLmxhc3RJbmRleE9mKCgwLCBfUGF0aFV0aWxzLmNyZWF0ZVBhdGgpKGhpc3RvcnkubG9jYXRpb24pKTtcbiAgICAgICAgdmFyIG5leHRQYXRocyA9IGFsbFBhdGhzLnNsaWNlKDAsIHByZXZJbmRleCA9PT0gLTEgPyAwIDogcHJldkluZGV4ICsgMSk7XG5cbiAgICAgICAgbmV4dFBhdGhzLnB1c2gocGF0aCk7XG4gICAgICAgIGFsbFBhdGhzID0gbmV4dFBhdGhzO1xuXG4gICAgICAgIHNldFN0YXRlKHsgYWN0aW9uOiBhY3Rpb24sIGxvY2F0aW9uOiBsb2NhdGlvbiB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkoZmFsc2UsICdIYXNoIGhpc3RvcnkgY2Fubm90IFBVU0ggdGhlIHNhbWUgcGF0aDsgYSBuZXcgZW50cnkgd2lsbCBub3QgYmUgYWRkZWQgdG8gdGhlIGhpc3Rvcnkgc3RhY2snKTtcblxuICAgICAgICBzZXRTdGF0ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHZhciByZXBsYWNlID0gZnVuY3Rpb24gcmVwbGFjZShwYXRoLCBzdGF0ZSkge1xuICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkoc3RhdGUgPT09IHVuZGVmaW5lZCwgJ0hhc2ggaGlzdG9yeSBjYW5ub3QgcmVwbGFjZSBzdGF0ZTsgaXQgaXMgaWdub3JlZCcpO1xuXG4gICAgdmFyIGFjdGlvbiA9ICdSRVBMQUNFJztcbiAgICB2YXIgbG9jYXRpb24gPSAoMCwgX0xvY2F0aW9uVXRpbHMuY3JlYXRlTG9jYXRpb24pKHBhdGgsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBoaXN0b3J5LmxvY2F0aW9uKTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG5cbiAgICAgIHZhciBwYXRoID0gKDAsIF9QYXRoVXRpbHMuY3JlYXRlUGF0aCkobG9jYXRpb24pO1xuICAgICAgdmFyIGVuY29kZWRQYXRoID0gZW5jb2RlUGF0aChiYXNlbmFtZSArIHBhdGgpO1xuICAgICAgdmFyIGhhc2hDaGFuZ2VkID0gZ2V0SGFzaFBhdGgoKSAhPT0gZW5jb2RlZFBhdGg7XG5cbiAgICAgIGlmIChoYXNoQ2hhbmdlZCkge1xuICAgICAgICAvLyBXZSBjYW5ub3QgdGVsbCBpZiBhIGhhc2hjaGFuZ2Ugd2FzIGNhdXNlZCBieSBhIFJFUExBQ0UsIHNvIHdlJ2RcbiAgICAgICAgLy8gcmF0aGVyIHNldFN0YXRlIGhlcmUgYW5kIGlnbm9yZSB0aGUgaGFzaGNoYW5nZS4gVGhlIGNhdmVhdCBoZXJlXG4gICAgICAgIC8vIGlzIHRoYXQgb3RoZXIgaGFzaCBoaXN0b3JpZXMgaW4gdGhlIHBhZ2Ugd2lsbCBjb25zaWRlciBpdCBhIFBPUC5cbiAgICAgICAgaWdub3JlUGF0aCA9IHBhdGg7XG4gICAgICAgIHJlcGxhY2VIYXNoUGF0aChlbmNvZGVkUGF0aCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBwcmV2SW5kZXggPSBhbGxQYXRocy5pbmRleE9mKCgwLCBfUGF0aFV0aWxzLmNyZWF0ZVBhdGgpKGhpc3RvcnkubG9jYXRpb24pKTtcblxuICAgICAgaWYgKHByZXZJbmRleCAhPT0gLTEpIGFsbFBhdGhzW3ByZXZJbmRleF0gPSBwYXRoO1xuXG4gICAgICBzZXRTdGF0ZSh7IGFjdGlvbjogYWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24gfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdvID0gZnVuY3Rpb24gZ28obikge1xuICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkoY2FuR29XaXRob3V0UmVsb2FkLCAnSGFzaCBoaXN0b3J5IGdvKG4pIGNhdXNlcyBhIGZ1bGwgcGFnZSByZWxvYWQgaW4gdGhpcyBicm93c2VyJyk7XG5cbiAgICBnbG9iYWxIaXN0b3J5LmdvKG4pO1xuICB9O1xuXG4gIHZhciBnb0JhY2sgPSBmdW5jdGlvbiBnb0JhY2soKSB7XG4gICAgcmV0dXJuIGdvKC0xKTtcbiAgfTtcblxuICB2YXIgZ29Gb3J3YXJkID0gZnVuY3Rpb24gZ29Gb3J3YXJkKCkge1xuICAgIHJldHVybiBnbygxKTtcbiAgfTtcblxuICB2YXIgbGlzdGVuZXJDb3VudCA9IDA7XG5cbiAgdmFyIGNoZWNrRE9NTGlzdGVuZXJzID0gZnVuY3Rpb24gY2hlY2tET01MaXN0ZW5lcnMoZGVsdGEpIHtcbiAgICBsaXN0ZW5lckNvdW50ICs9IGRlbHRhO1xuXG4gICAgaWYgKGxpc3RlbmVyQ291bnQgPT09IDEpIHtcbiAgICAgICgwLCBfRE9NVXRpbHMuYWRkRXZlbnRMaXN0ZW5lcikod2luZG93LCBIYXNoQ2hhbmdlRXZlbnQsIGhhbmRsZUhhc2hDaGFuZ2UpO1xuICAgIH0gZWxzZSBpZiAobGlzdGVuZXJDb3VudCA9PT0gMCkge1xuICAgICAgKDAsIF9ET01VdGlscy5yZW1vdmVFdmVudExpc3RlbmVyKSh3aW5kb3csIEhhc2hDaGFuZ2VFdmVudCwgaGFuZGxlSGFzaENoYW5nZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBpc0Jsb2NrZWQgPSBmYWxzZTtcblxuICB2YXIgYmxvY2sgPSBmdW5jdGlvbiBibG9jaygpIHtcbiAgICB2YXIgcHJvbXB0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmYWxzZTtcblxuICAgIHZhciB1bmJsb2NrID0gdHJhbnNpdGlvbk1hbmFnZXIuc2V0UHJvbXB0KHByb21wdCk7XG5cbiAgICBpZiAoIWlzQmxvY2tlZCkge1xuICAgICAgY2hlY2tET01MaXN0ZW5lcnMoMSk7XG4gICAgICBpc0Jsb2NrZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaXNCbG9ja2VkKSB7XG4gICAgICAgIGlzQmxvY2tlZCA9IGZhbHNlO1xuICAgICAgICBjaGVja0RPTUxpc3RlbmVycygtMSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bmJsb2NrKCk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgbGlzdGVuID0gZnVuY3Rpb24gbGlzdGVuKGxpc3RlbmVyKSB7XG4gICAgdmFyIHVubGlzdGVuID0gdHJhbnNpdGlvbk1hbmFnZXIuYXBwZW5kTGlzdGVuZXIobGlzdGVuZXIpO1xuICAgIGNoZWNrRE9NTGlzdGVuZXJzKDEpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrRE9NTGlzdGVuZXJzKC0xKTtcbiAgICAgIHVubGlzdGVuKCk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgaGlzdG9yeSA9IHtcbiAgICBsZW5ndGg6IGdsb2JhbEhpc3RvcnkubGVuZ3RoLFxuICAgIGFjdGlvbjogJ1BPUCcsXG4gICAgbG9jYXRpb246IGluaXRpYWxMb2NhdGlvbixcbiAgICBjcmVhdGVIcmVmOiBjcmVhdGVIcmVmLFxuICAgIHB1c2g6IHB1c2gsXG4gICAgcmVwbGFjZTogcmVwbGFjZSxcbiAgICBnbzogZ28sXG4gICAgZ29CYWNrOiBnb0JhY2ssXG4gICAgZ29Gb3J3YXJkOiBnb0ZvcndhcmQsXG4gICAgYmxvY2s6IGJsb2NrLFxuICAgIGxpc3RlbjogbGlzdGVuXG4gIH07XG5cbiAgcmV0dXJuIGhpc3Rvcnk7XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBjcmVhdGVIYXNoSGlzdG9yeTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vaGlzdG9yeS9jcmVhdGVIYXNoSGlzdG9yeS5qc1xuLy8gbW9kdWxlIGlkID0gMTM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfd2FybmluZyA9IHJlcXVpcmUoJ3dhcm5pbmcnKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG52YXIgX1BhdGhVdGlscyA9IHJlcXVpcmUoJy4vUGF0aFV0aWxzJyk7XG5cbnZhciBfTG9jYXRpb25VdGlscyA9IHJlcXVpcmUoJy4vTG9jYXRpb25VdGlscycpO1xuXG52YXIgX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyID0gcmVxdWlyZSgnLi9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcicpO1xuXG52YXIgX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGNsYW1wID0gZnVuY3Rpb24gY2xhbXAobiwgbG93ZXJCb3VuZCwgdXBwZXJCb3VuZCkge1xuICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgobiwgbG93ZXJCb3VuZCksIHVwcGVyQm91bmQpO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgaGlzdG9yeSBvYmplY3QgdGhhdCBzdG9yZXMgbG9jYXRpb25zIGluIG1lbW9yeS5cbiAqL1xudmFyIGNyZWF0ZU1lbW9yeUhpc3RvcnkgPSBmdW5jdGlvbiBjcmVhdGVNZW1vcnlIaXN0b3J5KCkge1xuICB2YXIgcHJvcHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICB2YXIgZ2V0VXNlckNvbmZpcm1hdGlvbiA9IHByb3BzLmdldFVzZXJDb25maXJtYXRpb24sXG4gICAgICBfcHJvcHMkaW5pdGlhbEVudHJpZXMgPSBwcm9wcy5pbml0aWFsRW50cmllcyxcbiAgICAgIGluaXRpYWxFbnRyaWVzID0gX3Byb3BzJGluaXRpYWxFbnRyaWVzID09PSB1bmRlZmluZWQgPyBbJy8nXSA6IF9wcm9wcyRpbml0aWFsRW50cmllcyxcbiAgICAgIF9wcm9wcyRpbml0aWFsSW5kZXggPSBwcm9wcy5pbml0aWFsSW5kZXgsXG4gICAgICBpbml0aWFsSW5kZXggPSBfcHJvcHMkaW5pdGlhbEluZGV4ID09PSB1bmRlZmluZWQgPyAwIDogX3Byb3BzJGluaXRpYWxJbmRleCxcbiAgICAgIF9wcm9wcyRrZXlMZW5ndGggPSBwcm9wcy5rZXlMZW5ndGgsXG4gICAgICBrZXlMZW5ndGggPSBfcHJvcHMka2V5TGVuZ3RoID09PSB1bmRlZmluZWQgPyA2IDogX3Byb3BzJGtleUxlbmd0aDtcblxuXG4gIHZhciB0cmFuc2l0aW9uTWFuYWdlciA9ICgwLCBfY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIyLmRlZmF1bHQpKCk7XG5cbiAgdmFyIHNldFN0YXRlID0gZnVuY3Rpb24gc2V0U3RhdGUobmV4dFN0YXRlKSB7XG4gICAgX2V4dGVuZHMoaGlzdG9yeSwgbmV4dFN0YXRlKTtcblxuICAgIGhpc3RvcnkubGVuZ3RoID0gaGlzdG9yeS5lbnRyaWVzLmxlbmd0aDtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLm5vdGlmeUxpc3RlbmVycyhoaXN0b3J5LmxvY2F0aW9uLCBoaXN0b3J5LmFjdGlvbik7XG4gIH07XG5cbiAgdmFyIGNyZWF0ZUtleSA9IGZ1bmN0aW9uIGNyZWF0ZUtleSgpIHtcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIGtleUxlbmd0aCk7XG4gIH07XG5cbiAgdmFyIGluZGV4ID0gY2xhbXAoaW5pdGlhbEluZGV4LCAwLCBpbml0aWFsRW50cmllcy5sZW5ndGggLSAxKTtcbiAgdmFyIGVudHJpZXMgPSBpbml0aWFsRW50cmllcy5tYXAoZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgcmV0dXJuIHR5cGVvZiBlbnRyeSA9PT0gJ3N0cmluZycgPyAoMCwgX0xvY2F0aW9uVXRpbHMuY3JlYXRlTG9jYXRpb24pKGVudHJ5LCB1bmRlZmluZWQsIGNyZWF0ZUtleSgpKSA6ICgwLCBfTG9jYXRpb25VdGlscy5jcmVhdGVMb2NhdGlvbikoZW50cnksIHVuZGVmaW5lZCwgZW50cnkua2V5IHx8IGNyZWF0ZUtleSgpKTtcbiAgfSk7XG5cbiAgLy8gUHVibGljIGludGVyZmFjZVxuXG4gIHZhciBjcmVhdGVIcmVmID0gX1BhdGhVdGlscy5jcmVhdGVQYXRoO1xuXG4gIHZhciBwdXNoID0gZnVuY3Rpb24gcHVzaChwYXRoLCBzdGF0ZSkge1xuICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkoISgodHlwZW9mIHBhdGggPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHBhdGgpKSA9PT0gJ29iamVjdCcgJiYgcGF0aC5zdGF0ZSAhPT0gdW5kZWZpbmVkICYmIHN0YXRlICE9PSB1bmRlZmluZWQpLCAnWW91IHNob3VsZCBhdm9pZCBwcm92aWRpbmcgYSAybmQgc3RhdGUgYXJndW1lbnQgdG8gcHVzaCB3aGVuIHRoZSAxc3QgJyArICdhcmd1bWVudCBpcyBhIGxvY2F0aW9uLWxpa2Ugb2JqZWN0IHRoYXQgYWxyZWFkeSBoYXMgc3RhdGU7IGl0IGlzIGlnbm9yZWQnKTtcblxuICAgIHZhciBhY3Rpb24gPSAnUFVTSCc7XG4gICAgdmFyIGxvY2F0aW9uID0gKDAsIF9Mb2NhdGlvblV0aWxzLmNyZWF0ZUxvY2F0aW9uKShwYXRoLCBzdGF0ZSwgY3JlYXRlS2V5KCksIGhpc3RvcnkubG9jYXRpb24pO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmICghb2spIHJldHVybjtcblxuICAgICAgdmFyIHByZXZJbmRleCA9IGhpc3RvcnkuaW5kZXg7XG4gICAgICB2YXIgbmV4dEluZGV4ID0gcHJldkluZGV4ICsgMTtcblxuICAgICAgdmFyIG5leHRFbnRyaWVzID0gaGlzdG9yeS5lbnRyaWVzLnNsaWNlKDApO1xuICAgICAgaWYgKG5leHRFbnRyaWVzLmxlbmd0aCA+IG5leHRJbmRleCkge1xuICAgICAgICBuZXh0RW50cmllcy5zcGxpY2UobmV4dEluZGV4LCBuZXh0RW50cmllcy5sZW5ndGggLSBuZXh0SW5kZXgsIGxvY2F0aW9uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHRFbnRyaWVzLnB1c2gobG9jYXRpb24pO1xuICAgICAgfVxuXG4gICAgICBzZXRTdGF0ZSh7XG4gICAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sXG4gICAgICAgIGluZGV4OiBuZXh0SW5kZXgsXG4gICAgICAgIGVudHJpZXM6IG5leHRFbnRyaWVzXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgcmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UocGF0aCwgc3RhdGUpIHtcbiAgICAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKCEoKHR5cGVvZiBwYXRoID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihwYXRoKSkgPT09ICdvYmplY3QnICYmIHBhdGguc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBzdGF0ZSAhPT0gdW5kZWZpbmVkKSwgJ1lvdSBzaG91bGQgYXZvaWQgcHJvdmlkaW5nIGEgMm5kIHN0YXRlIGFyZ3VtZW50IHRvIHJlcGxhY2Ugd2hlbiB0aGUgMXN0ICcgKyAnYXJndW1lbnQgaXMgYSBsb2NhdGlvbi1saWtlIG9iamVjdCB0aGF0IGFscmVhZHkgaGFzIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7XG5cbiAgICB2YXIgYWN0aW9uID0gJ1JFUExBQ0UnO1xuICAgIHZhciBsb2NhdGlvbiA9ICgwLCBfTG9jYXRpb25VdGlscy5jcmVhdGVMb2NhdGlvbikocGF0aCwgc3RhdGUsIGNyZWF0ZUtleSgpLCBoaXN0b3J5LmxvY2F0aW9uKTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG5cbiAgICAgIGhpc3RvcnkuZW50cmllc1toaXN0b3J5LmluZGV4XSA9IGxvY2F0aW9uO1xuXG4gICAgICBzZXRTdGF0ZSh7IGFjdGlvbjogYWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24gfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdvID0gZnVuY3Rpb24gZ28obikge1xuICAgIHZhciBuZXh0SW5kZXggPSBjbGFtcChoaXN0b3J5LmluZGV4ICsgbiwgMCwgaGlzdG9yeS5lbnRyaWVzLmxlbmd0aCAtIDEpO1xuXG4gICAgdmFyIGFjdGlvbiA9ICdQT1AnO1xuICAgIHZhciBsb2NhdGlvbiA9IGhpc3RvcnkuZW50cmllc1tuZXh0SW5kZXhdO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmIChvaykge1xuICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uLFxuICAgICAgICAgIGluZGV4OiBuZXh0SW5kZXhcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBNaW1pYyB0aGUgYmVoYXZpb3Igb2YgRE9NIGhpc3RvcmllcyBieVxuICAgICAgICAvLyBjYXVzaW5nIGEgcmVuZGVyIGFmdGVyIGEgY2FuY2VsbGVkIFBPUC5cbiAgICAgICAgc2V0U3RhdGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICB2YXIgZ29CYWNrID0gZnVuY3Rpb24gZ29CYWNrKCkge1xuICAgIHJldHVybiBnbygtMSk7XG4gIH07XG5cbiAgdmFyIGdvRm9yd2FyZCA9IGZ1bmN0aW9uIGdvRm9yd2FyZCgpIHtcbiAgICByZXR1cm4gZ28oMSk7XG4gIH07XG5cbiAgdmFyIGNhbkdvID0gZnVuY3Rpb24gY2FuR28obikge1xuICAgIHZhciBuZXh0SW5kZXggPSBoaXN0b3J5LmluZGV4ICsgbjtcbiAgICByZXR1cm4gbmV4dEluZGV4ID49IDAgJiYgbmV4dEluZGV4IDwgaGlzdG9yeS5lbnRyaWVzLmxlbmd0aDtcbiAgfTtcblxuICB2YXIgYmxvY2sgPSBmdW5jdGlvbiBibG9jaygpIHtcbiAgICB2YXIgcHJvbXB0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmYWxzZTtcbiAgICByZXR1cm4gdHJhbnNpdGlvbk1hbmFnZXIuc2V0UHJvbXB0KHByb21wdCk7XG4gIH07XG5cbiAgdmFyIGxpc3RlbiA9IGZ1bmN0aW9uIGxpc3RlbihsaXN0ZW5lcikge1xuICAgIHJldHVybiB0cmFuc2l0aW9uTWFuYWdlci5hcHBlbmRMaXN0ZW5lcihsaXN0ZW5lcik7XG4gIH07XG5cbiAgdmFyIGhpc3RvcnkgPSB7XG4gICAgbGVuZ3RoOiBlbnRyaWVzLmxlbmd0aCxcbiAgICBhY3Rpb246ICdQT1AnLFxuICAgIGxvY2F0aW9uOiBlbnRyaWVzW2luZGV4XSxcbiAgICBpbmRleDogaW5kZXgsXG4gICAgZW50cmllczogZW50cmllcyxcbiAgICBjcmVhdGVIcmVmOiBjcmVhdGVIcmVmLFxuICAgIHB1c2g6IHB1c2gsXG4gICAgcmVwbGFjZTogcmVwbGFjZSxcbiAgICBnbzogZ28sXG4gICAgZ29CYWNrOiBnb0JhY2ssXG4gICAgZ29Gb3J3YXJkOiBnb0ZvcndhcmQsXG4gICAgY2FuR286IGNhbkdvLFxuICAgIGJsb2NrOiBibG9jayxcbiAgICBsaXN0ZW46IGxpc3RlblxuICB9O1xuXG4gIHJldHVybiBoaXN0b3J5O1xufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gY3JlYXRlTWVtb3J5SGlzdG9yeTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vaGlzdG9yeS9jcmVhdGVNZW1vcnlIaXN0b3J5LmpzXG4vLyBtb2R1bGUgaWQgPSAxMzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJ2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmltcG9ydCB3YXJuaW5nIGZyb20gJ3dhcm5pbmcnO1xuaW1wb3J0IGludmFyaWFudCBmcm9tICdpbnZhcmlhbnQnO1xuaW1wb3J0IHsgY3JlYXRlTG9jYXRpb24gfSBmcm9tICcuL0xvY2F0aW9uVXRpbHMnO1xuaW1wb3J0IHsgYWRkTGVhZGluZ1NsYXNoLCBzdHJpcFRyYWlsaW5nU2xhc2gsIGhhc0Jhc2VuYW1lLCBzdHJpcEJhc2VuYW1lLCBjcmVhdGVQYXRoIH0gZnJvbSAnLi9QYXRoVXRpbHMnO1xuaW1wb3J0IGNyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyIGZyb20gJy4vY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXInO1xuaW1wb3J0IHsgY2FuVXNlRE9NLCBhZGRFdmVudExpc3RlbmVyLCByZW1vdmVFdmVudExpc3RlbmVyLCBnZXRDb25maXJtYXRpb24sIHN1cHBvcnRzSGlzdG9yeSwgc3VwcG9ydHNQb3BTdGF0ZU9uSGFzaENoYW5nZSwgaXNFeHRyYW5lb3VzUG9wc3RhdGVFdmVudCB9IGZyb20gJy4vRE9NVXRpbHMnO1xuXG52YXIgUG9wU3RhdGVFdmVudCA9ICdwb3BzdGF0ZSc7XG52YXIgSGFzaENoYW5nZUV2ZW50ID0gJ2hhc2hjaGFuZ2UnO1xuXG52YXIgZ2V0SGlzdG9yeVN0YXRlID0gZnVuY3Rpb24gZ2V0SGlzdG9yeVN0YXRlKCkge1xuICB0cnkge1xuICAgIHJldHVybiB3aW5kb3cuaGlzdG9yeS5zdGF0ZSB8fCB7fTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIElFIDExIHNvbWV0aW1lcyB0aHJvd3Mgd2hlbiBhY2Nlc3Npbmcgd2luZG93Lmhpc3Rvcnkuc3RhdGVcbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL1JlYWN0VHJhaW5pbmcvaGlzdG9yeS9wdWxsLzI4OVxuICAgIHJldHVybiB7fTtcbiAgfVxufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgaGlzdG9yeSBvYmplY3QgdGhhdCB1c2VzIHRoZSBIVE1MNSBoaXN0b3J5IEFQSSBpbmNsdWRpbmdcbiAqIHB1c2hTdGF0ZSwgcmVwbGFjZVN0YXRlLCBhbmQgdGhlIHBvcHN0YXRlIGV2ZW50LlxuICovXG52YXIgY3JlYXRlQnJvd3Nlckhpc3RvcnkgPSBmdW5jdGlvbiBjcmVhdGVCcm93c2VySGlzdG9yeSgpIHtcbiAgdmFyIHByb3BzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICBpbnZhcmlhbnQoY2FuVXNlRE9NLCAnQnJvd3NlciBoaXN0b3J5IG5lZWRzIGEgRE9NJyk7XG5cbiAgdmFyIGdsb2JhbEhpc3RvcnkgPSB3aW5kb3cuaGlzdG9yeTtcbiAgdmFyIGNhblVzZUhpc3RvcnkgPSBzdXBwb3J0c0hpc3RvcnkoKTtcbiAgdmFyIG5lZWRzSGFzaENoYW5nZUxpc3RlbmVyID0gIXN1cHBvcnRzUG9wU3RhdGVPbkhhc2hDaGFuZ2UoKTtcblxuICB2YXIgX3Byb3BzJGZvcmNlUmVmcmVzaCA9IHByb3BzLmZvcmNlUmVmcmVzaCxcbiAgICAgIGZvcmNlUmVmcmVzaCA9IF9wcm9wcyRmb3JjZVJlZnJlc2ggPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3Byb3BzJGZvcmNlUmVmcmVzaCxcbiAgICAgIF9wcm9wcyRnZXRVc2VyQ29uZmlybSA9IHByb3BzLmdldFVzZXJDb25maXJtYXRpb24sXG4gICAgICBnZXRVc2VyQ29uZmlybWF0aW9uID0gX3Byb3BzJGdldFVzZXJDb25maXJtID09PSB1bmRlZmluZWQgPyBnZXRDb25maXJtYXRpb24gOiBfcHJvcHMkZ2V0VXNlckNvbmZpcm0sXG4gICAgICBfcHJvcHMka2V5TGVuZ3RoID0gcHJvcHMua2V5TGVuZ3RoLFxuICAgICAga2V5TGVuZ3RoID0gX3Byb3BzJGtleUxlbmd0aCA9PT0gdW5kZWZpbmVkID8gNiA6IF9wcm9wcyRrZXlMZW5ndGg7XG5cbiAgdmFyIGJhc2VuYW1lID0gcHJvcHMuYmFzZW5hbWUgPyBzdHJpcFRyYWlsaW5nU2xhc2goYWRkTGVhZGluZ1NsYXNoKHByb3BzLmJhc2VuYW1lKSkgOiAnJztcblxuICB2YXIgZ2V0RE9NTG9jYXRpb24gPSBmdW5jdGlvbiBnZXRET01Mb2NhdGlvbihoaXN0b3J5U3RhdGUpIHtcbiAgICB2YXIgX3JlZiA9IGhpc3RvcnlTdGF0ZSB8fCB7fSxcbiAgICAgICAga2V5ID0gX3JlZi5rZXksXG4gICAgICAgIHN0YXRlID0gX3JlZi5zdGF0ZTtcblxuICAgIHZhciBfd2luZG93JGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLFxuICAgICAgICBwYXRobmFtZSA9IF93aW5kb3ckbG9jYXRpb24ucGF0aG5hbWUsXG4gICAgICAgIHNlYXJjaCA9IF93aW5kb3ckbG9jYXRpb24uc2VhcmNoLFxuICAgICAgICBoYXNoID0gX3dpbmRvdyRsb2NhdGlvbi5oYXNoO1xuXG5cbiAgICB2YXIgcGF0aCA9IHBhdGhuYW1lICsgc2VhcmNoICsgaGFzaDtcblxuICAgIHdhcm5pbmcoIWJhc2VuYW1lIHx8IGhhc0Jhc2VuYW1lKHBhdGgsIGJhc2VuYW1lKSwgJ1lvdSBhcmUgYXR0ZW1wdGluZyB0byB1c2UgYSBiYXNlbmFtZSBvbiBhIHBhZ2Ugd2hvc2UgVVJMIHBhdGggZG9lcyBub3QgYmVnaW4gJyArICd3aXRoIHRoZSBiYXNlbmFtZS4gRXhwZWN0ZWQgcGF0aCBcIicgKyBwYXRoICsgJ1wiIHRvIGJlZ2luIHdpdGggXCInICsgYmFzZW5hbWUgKyAnXCIuJyk7XG5cbiAgICBpZiAoYmFzZW5hbWUpIHBhdGggPSBzdHJpcEJhc2VuYW1lKHBhdGgsIGJhc2VuYW1lKTtcblxuICAgIHJldHVybiBjcmVhdGVMb2NhdGlvbihwYXRoLCBzdGF0ZSwga2V5KTtcbiAgfTtcblxuICB2YXIgY3JlYXRlS2V5ID0gZnVuY3Rpb24gY3JlYXRlS2V5KCkge1xuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwga2V5TGVuZ3RoKTtcbiAgfTtcblxuICB2YXIgdHJhbnNpdGlvbk1hbmFnZXIgPSBjcmVhdGVUcmFuc2l0aW9uTWFuYWdlcigpO1xuXG4gIHZhciBzZXRTdGF0ZSA9IGZ1bmN0aW9uIHNldFN0YXRlKG5leHRTdGF0ZSkge1xuICAgIF9leHRlbmRzKGhpc3RvcnksIG5leHRTdGF0ZSk7XG5cbiAgICBoaXN0b3J5Lmxlbmd0aCA9IGdsb2JhbEhpc3RvcnkubGVuZ3RoO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIubm90aWZ5TGlzdGVuZXJzKGhpc3RvcnkubG9jYXRpb24sIGhpc3RvcnkuYWN0aW9uKTtcbiAgfTtcblxuICB2YXIgaGFuZGxlUG9wU3RhdGUgPSBmdW5jdGlvbiBoYW5kbGVQb3BTdGF0ZShldmVudCkge1xuICAgIC8vIElnbm9yZSBleHRyYW5lb3VzIHBvcHN0YXRlIGV2ZW50cyBpbiBXZWJLaXQuXG4gICAgaWYgKGlzRXh0cmFuZW91c1BvcHN0YXRlRXZlbnQoZXZlbnQpKSByZXR1cm47XG5cbiAgICBoYW5kbGVQb3AoZ2V0RE9NTG9jYXRpb24oZXZlbnQuc3RhdGUpKTtcbiAgfTtcblxuICB2YXIgaGFuZGxlSGFzaENoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZUhhc2hDaGFuZ2UoKSB7XG4gICAgaGFuZGxlUG9wKGdldERPTUxvY2F0aW9uKGdldEhpc3RvcnlTdGF0ZSgpKSk7XG4gIH07XG5cbiAgdmFyIGZvcmNlTmV4dFBvcCA9IGZhbHNlO1xuXG4gIHZhciBoYW5kbGVQb3AgPSBmdW5jdGlvbiBoYW5kbGVQb3AobG9jYXRpb24pIHtcbiAgICBpZiAoZm9yY2VOZXh0UG9wKSB7XG4gICAgICBmb3JjZU5leHRQb3AgPSBmYWxzZTtcbiAgICAgIHNldFN0YXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhY3Rpb24gPSAnUE9QJztcblxuICAgICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgICAgaWYgKG9rKSB7XG4gICAgICAgICAgc2V0U3RhdGUoeyBhY3Rpb246IGFjdGlvbiwgbG9jYXRpb246IGxvY2F0aW9uIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldmVydFBvcChsb2NhdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICB2YXIgcmV2ZXJ0UG9wID0gZnVuY3Rpb24gcmV2ZXJ0UG9wKGZyb21Mb2NhdGlvbikge1xuICAgIHZhciB0b0xvY2F0aW9uID0gaGlzdG9yeS5sb2NhdGlvbjtcblxuICAgIC8vIFRPRE86IFdlIGNvdWxkIHByb2JhYmx5IG1ha2UgdGhpcyBtb3JlIHJlbGlhYmxlIGJ5XG4gICAgLy8ga2VlcGluZyBhIGxpc3Qgb2Yga2V5cyB3ZSd2ZSBzZWVuIGluIHNlc3Npb25TdG9yYWdlLlxuICAgIC8vIEluc3RlYWQsIHdlIGp1c3QgZGVmYXVsdCB0byAwIGZvciBrZXlzIHdlIGRvbid0IGtub3cuXG5cbiAgICB2YXIgdG9JbmRleCA9IGFsbEtleXMuaW5kZXhPZih0b0xvY2F0aW9uLmtleSk7XG5cbiAgICBpZiAodG9JbmRleCA9PT0gLTEpIHRvSW5kZXggPSAwO1xuXG4gICAgdmFyIGZyb21JbmRleCA9IGFsbEtleXMuaW5kZXhPZihmcm9tTG9jYXRpb24ua2V5KTtcblxuICAgIGlmIChmcm9tSW5kZXggPT09IC0xKSBmcm9tSW5kZXggPSAwO1xuXG4gICAgdmFyIGRlbHRhID0gdG9JbmRleCAtIGZyb21JbmRleDtcblxuICAgIGlmIChkZWx0YSkge1xuICAgICAgZm9yY2VOZXh0UG9wID0gdHJ1ZTtcbiAgICAgIGdvKGRlbHRhKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGluaXRpYWxMb2NhdGlvbiA9IGdldERPTUxvY2F0aW9uKGdldEhpc3RvcnlTdGF0ZSgpKTtcbiAgdmFyIGFsbEtleXMgPSBbaW5pdGlhbExvY2F0aW9uLmtleV07XG5cbiAgLy8gUHVibGljIGludGVyZmFjZVxuXG4gIHZhciBjcmVhdGVIcmVmID0gZnVuY3Rpb24gY3JlYXRlSHJlZihsb2NhdGlvbikge1xuICAgIHJldHVybiBiYXNlbmFtZSArIGNyZWF0ZVBhdGgobG9jYXRpb24pO1xuICB9O1xuXG4gIHZhciBwdXNoID0gZnVuY3Rpb24gcHVzaChwYXRoLCBzdGF0ZSkge1xuICAgIHdhcm5pbmcoISgodHlwZW9mIHBhdGggPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHBhdGgpKSA9PT0gJ29iamVjdCcgJiYgcGF0aC5zdGF0ZSAhPT0gdW5kZWZpbmVkICYmIHN0YXRlICE9PSB1bmRlZmluZWQpLCAnWW91IHNob3VsZCBhdm9pZCBwcm92aWRpbmcgYSAybmQgc3RhdGUgYXJndW1lbnQgdG8gcHVzaCB3aGVuIHRoZSAxc3QgJyArICdhcmd1bWVudCBpcyBhIGxvY2F0aW9uLWxpa2Ugb2JqZWN0IHRoYXQgYWxyZWFkeSBoYXMgc3RhdGU7IGl0IGlzIGlnbm9yZWQnKTtcblxuICAgIHZhciBhY3Rpb24gPSAnUFVTSCc7XG4gICAgdmFyIGxvY2F0aW9uID0gY3JlYXRlTG9jYXRpb24ocGF0aCwgc3RhdGUsIGNyZWF0ZUtleSgpLCBoaXN0b3J5LmxvY2F0aW9uKTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG5cbiAgICAgIHZhciBocmVmID0gY3JlYXRlSHJlZihsb2NhdGlvbik7XG4gICAgICB2YXIga2V5ID0gbG9jYXRpb24ua2V5LFxuICAgICAgICAgIHN0YXRlID0gbG9jYXRpb24uc3RhdGU7XG5cblxuICAgICAgaWYgKGNhblVzZUhpc3RvcnkpIHtcbiAgICAgICAgZ2xvYmFsSGlzdG9yeS5wdXNoU3RhdGUoeyBrZXk6IGtleSwgc3RhdGU6IHN0YXRlIH0sIG51bGwsIGhyZWYpO1xuXG4gICAgICAgIGlmIChmb3JjZVJlZnJlc2gpIHtcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhyZWY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHByZXZJbmRleCA9IGFsbEtleXMuaW5kZXhPZihoaXN0b3J5LmxvY2F0aW9uLmtleSk7XG4gICAgICAgICAgdmFyIG5leHRLZXlzID0gYWxsS2V5cy5zbGljZSgwLCBwcmV2SW5kZXggPT09IC0xID8gMCA6IHByZXZJbmRleCArIDEpO1xuXG4gICAgICAgICAgbmV4dEtleXMucHVzaChsb2NhdGlvbi5rZXkpO1xuICAgICAgICAgIGFsbEtleXMgPSBuZXh0S2V5cztcblxuICAgICAgICAgIHNldFN0YXRlKHsgYWN0aW9uOiBhY3Rpb24sIGxvY2F0aW9uOiBsb2NhdGlvbiB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2FybmluZyhzdGF0ZSA9PT0gdW5kZWZpbmVkLCAnQnJvd3NlciBoaXN0b3J5IGNhbm5vdCBwdXNoIHN0YXRlIGluIGJyb3dzZXJzIHRoYXQgZG8gbm90IHN1cHBvcnQgSFRNTDUgaGlzdG9yeScpO1xuXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICB2YXIgcmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UocGF0aCwgc3RhdGUpIHtcbiAgICB3YXJuaW5nKCEoKHR5cGVvZiBwYXRoID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihwYXRoKSkgPT09ICdvYmplY3QnICYmIHBhdGguc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBzdGF0ZSAhPT0gdW5kZWZpbmVkKSwgJ1lvdSBzaG91bGQgYXZvaWQgcHJvdmlkaW5nIGEgMm5kIHN0YXRlIGFyZ3VtZW50IHRvIHJlcGxhY2Ugd2hlbiB0aGUgMXN0ICcgKyAnYXJndW1lbnQgaXMgYSBsb2NhdGlvbi1saWtlIG9iamVjdCB0aGF0IGFscmVhZHkgaGFzIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7XG5cbiAgICB2YXIgYWN0aW9uID0gJ1JFUExBQ0UnO1xuICAgIHZhciBsb2NhdGlvbiA9IGNyZWF0ZUxvY2F0aW9uKHBhdGgsIHN0YXRlLCBjcmVhdGVLZXkoKSwgaGlzdG9yeS5sb2NhdGlvbik7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKCFvaykgcmV0dXJuO1xuXG4gICAgICB2YXIgaHJlZiA9IGNyZWF0ZUhyZWYobG9jYXRpb24pO1xuICAgICAgdmFyIGtleSA9IGxvY2F0aW9uLmtleSxcbiAgICAgICAgICBzdGF0ZSA9IGxvY2F0aW9uLnN0YXRlO1xuXG5cbiAgICAgIGlmIChjYW5Vc2VIaXN0b3J5KSB7XG4gICAgICAgIGdsb2JhbEhpc3RvcnkucmVwbGFjZVN0YXRlKHsga2V5OiBrZXksIHN0YXRlOiBzdGF0ZSB9LCBudWxsLCBocmVmKTtcblxuICAgICAgICBpZiAoZm9yY2VSZWZyZXNoKSB7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoaHJlZik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHByZXZJbmRleCA9IGFsbEtleXMuaW5kZXhPZihoaXN0b3J5LmxvY2F0aW9uLmtleSk7XG5cbiAgICAgICAgICBpZiAocHJldkluZGV4ICE9PSAtMSkgYWxsS2V5c1twcmV2SW5kZXhdID0gbG9jYXRpb24ua2V5O1xuXG4gICAgICAgICAgc2V0U3RhdGUoeyBhY3Rpb246IGFjdGlvbiwgbG9jYXRpb246IGxvY2F0aW9uIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3YXJuaW5nKHN0YXRlID09PSB1bmRlZmluZWQsICdCcm93c2VyIGhpc3RvcnkgY2Fubm90IHJlcGxhY2Ugc3RhdGUgaW4gYnJvd3NlcnMgdGhhdCBkbyBub3Qgc3VwcG9ydCBIVE1MNSBoaXN0b3J5Jyk7XG5cbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoaHJlZik7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdvID0gZnVuY3Rpb24gZ28obikge1xuICAgIGdsb2JhbEhpc3RvcnkuZ28obik7XG4gIH07XG5cbiAgdmFyIGdvQmFjayA9IGZ1bmN0aW9uIGdvQmFjaygpIHtcbiAgICByZXR1cm4gZ28oLTEpO1xuICB9O1xuXG4gIHZhciBnb0ZvcndhcmQgPSBmdW5jdGlvbiBnb0ZvcndhcmQoKSB7XG4gICAgcmV0dXJuIGdvKDEpO1xuICB9O1xuXG4gIHZhciBsaXN0ZW5lckNvdW50ID0gMDtcblxuICB2YXIgY2hlY2tET01MaXN0ZW5lcnMgPSBmdW5jdGlvbiBjaGVja0RPTUxpc3RlbmVycyhkZWx0YSkge1xuICAgIGxpc3RlbmVyQ291bnQgKz0gZGVsdGE7XG5cbiAgICBpZiAobGlzdGVuZXJDb3VudCA9PT0gMSkge1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcih3aW5kb3csIFBvcFN0YXRlRXZlbnQsIGhhbmRsZVBvcFN0YXRlKTtcblxuICAgICAgaWYgKG5lZWRzSGFzaENoYW5nZUxpc3RlbmVyKSBhZGRFdmVudExpc3RlbmVyKHdpbmRvdywgSGFzaENoYW5nZUV2ZW50LCBoYW5kbGVIYXNoQ2hhbmdlKTtcbiAgICB9IGVsc2UgaWYgKGxpc3RlbmVyQ291bnQgPT09IDApIHtcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIod2luZG93LCBQb3BTdGF0ZUV2ZW50LCBoYW5kbGVQb3BTdGF0ZSk7XG5cbiAgICAgIGlmIChuZWVkc0hhc2hDaGFuZ2VMaXN0ZW5lcikgcmVtb3ZlRXZlbnRMaXN0ZW5lcih3aW5kb3csIEhhc2hDaGFuZ2VFdmVudCwgaGFuZGxlSGFzaENoYW5nZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBpc0Jsb2NrZWQgPSBmYWxzZTtcblxuICB2YXIgYmxvY2sgPSBmdW5jdGlvbiBibG9jaygpIHtcbiAgICB2YXIgcHJvbXB0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmYWxzZTtcblxuICAgIHZhciB1bmJsb2NrID0gdHJhbnNpdGlvbk1hbmFnZXIuc2V0UHJvbXB0KHByb21wdCk7XG5cbiAgICBpZiAoIWlzQmxvY2tlZCkge1xuICAgICAgY2hlY2tET01MaXN0ZW5lcnMoMSk7XG4gICAgICBpc0Jsb2NrZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaXNCbG9ja2VkKSB7XG4gICAgICAgIGlzQmxvY2tlZCA9IGZhbHNlO1xuICAgICAgICBjaGVja0RPTUxpc3RlbmVycygtMSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bmJsb2NrKCk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgbGlzdGVuID0gZnVuY3Rpb24gbGlzdGVuKGxpc3RlbmVyKSB7XG4gICAgdmFyIHVubGlzdGVuID0gdHJhbnNpdGlvbk1hbmFnZXIuYXBwZW5kTGlzdGVuZXIobGlzdGVuZXIpO1xuICAgIGNoZWNrRE9NTGlzdGVuZXJzKDEpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrRE9NTGlzdGVuZXJzKC0xKTtcbiAgICAgIHVubGlzdGVuKCk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgaGlzdG9yeSA9IHtcbiAgICBsZW5ndGg6IGdsb2JhbEhpc3RvcnkubGVuZ3RoLFxuICAgIGFjdGlvbjogJ1BPUCcsXG4gICAgbG9jYXRpb246IGluaXRpYWxMb2NhdGlvbixcbiAgICBjcmVhdGVIcmVmOiBjcmVhdGVIcmVmLFxuICAgIHB1c2g6IHB1c2gsXG4gICAgcmVwbGFjZTogcmVwbGFjZSxcbiAgICBnbzogZ28sXG4gICAgZ29CYWNrOiBnb0JhY2ssXG4gICAgZ29Gb3J3YXJkOiBnb0ZvcndhcmQsXG4gICAgYmxvY2s6IGJsb2NrLFxuICAgIGxpc3RlbjogbGlzdGVuXG4gIH07XG5cbiAgcmV0dXJuIGhpc3Rvcnk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVCcm93c2VySGlzdG9yeTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vaGlzdG9yeS9lcy9jcmVhdGVCcm93c2VySGlzdG9yeS5qc1xuLy8gbW9kdWxlIGlkID0gMTM4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwidmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuaW1wb3J0IHdhcm5pbmcgZnJvbSAnd2FybmluZyc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5pbXBvcnQgeyBjcmVhdGVMb2NhdGlvbiwgbG9jYXRpb25zQXJlRXF1YWwgfSBmcm9tICcuL0xvY2F0aW9uVXRpbHMnO1xuaW1wb3J0IHsgYWRkTGVhZGluZ1NsYXNoLCBzdHJpcExlYWRpbmdTbGFzaCwgc3RyaXBUcmFpbGluZ1NsYXNoLCBoYXNCYXNlbmFtZSwgc3RyaXBCYXNlbmFtZSwgY3JlYXRlUGF0aCB9IGZyb20gJy4vUGF0aFV0aWxzJztcbmltcG9ydCBjcmVhdGVUcmFuc2l0aW9uTWFuYWdlciBmcm9tICcuL2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyJztcbmltcG9ydCB7IGNhblVzZURPTSwgYWRkRXZlbnRMaXN0ZW5lciwgcmVtb3ZlRXZlbnRMaXN0ZW5lciwgZ2V0Q29uZmlybWF0aW9uLCBzdXBwb3J0c0dvV2l0aG91dFJlbG9hZFVzaW5nSGFzaCB9IGZyb20gJy4vRE9NVXRpbHMnO1xuXG52YXIgSGFzaENoYW5nZUV2ZW50ID0gJ2hhc2hjaGFuZ2UnO1xuXG52YXIgSGFzaFBhdGhDb2RlcnMgPSB7XG4gIGhhc2hiYW5nOiB7XG4gICAgZW5jb2RlUGF0aDogZnVuY3Rpb24gZW5jb2RlUGF0aChwYXRoKSB7XG4gICAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICchJyA/IHBhdGggOiAnIS8nICsgc3RyaXBMZWFkaW5nU2xhc2gocGF0aCk7XG4gICAgfSxcbiAgICBkZWNvZGVQYXRoOiBmdW5jdGlvbiBkZWNvZGVQYXRoKHBhdGgpIHtcbiAgICAgIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJyEnID8gcGF0aC5zdWJzdHIoMSkgOiBwYXRoO1xuICAgIH1cbiAgfSxcbiAgbm9zbGFzaDoge1xuICAgIGVuY29kZVBhdGg6IHN0cmlwTGVhZGluZ1NsYXNoLFxuICAgIGRlY29kZVBhdGg6IGFkZExlYWRpbmdTbGFzaFxuICB9LFxuICBzbGFzaDoge1xuICAgIGVuY29kZVBhdGg6IGFkZExlYWRpbmdTbGFzaCxcbiAgICBkZWNvZGVQYXRoOiBhZGRMZWFkaW5nU2xhc2hcbiAgfVxufTtcblxudmFyIGdldEhhc2hQYXRoID0gZnVuY3Rpb24gZ2V0SGFzaFBhdGgoKSB7XG4gIC8vIFdlIGNhbid0IHVzZSB3aW5kb3cubG9jYXRpb24uaGFzaCBoZXJlIGJlY2F1c2UgaXQncyBub3RcbiAgLy8gY29uc2lzdGVudCBhY3Jvc3MgYnJvd3NlcnMgLSBGaXJlZm94IHdpbGwgcHJlLWRlY29kZSBpdCFcbiAgdmFyIGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgdmFyIGhhc2hJbmRleCA9IGhyZWYuaW5kZXhPZignIycpO1xuICByZXR1cm4gaGFzaEluZGV4ID09PSAtMSA/ICcnIDogaHJlZi5zdWJzdHJpbmcoaGFzaEluZGV4ICsgMSk7XG59O1xuXG52YXIgcHVzaEhhc2hQYXRoID0gZnVuY3Rpb24gcHVzaEhhc2hQYXRoKHBhdGgpIHtcbiAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gcGF0aDtcbn07XG5cbnZhciByZXBsYWNlSGFzaFBhdGggPSBmdW5jdGlvbiByZXBsYWNlSGFzaFBhdGgocGF0aCkge1xuICB2YXIgaGFzaEluZGV4ID0gd2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZignIycpO1xuXG4gIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNsaWNlKDAsIGhhc2hJbmRleCA+PSAwID8gaGFzaEluZGV4IDogMCkgKyAnIycgKyBwYXRoKTtcbn07XG5cbnZhciBjcmVhdGVIYXNoSGlzdG9yeSA9IGZ1bmN0aW9uIGNyZWF0ZUhhc2hIaXN0b3J5KCkge1xuICB2YXIgcHJvcHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gIGludmFyaWFudChjYW5Vc2VET00sICdIYXNoIGhpc3RvcnkgbmVlZHMgYSBET00nKTtcblxuICB2YXIgZ2xvYmFsSGlzdG9yeSA9IHdpbmRvdy5oaXN0b3J5O1xuICB2YXIgY2FuR29XaXRob3V0UmVsb2FkID0gc3VwcG9ydHNHb1dpdGhvdXRSZWxvYWRVc2luZ0hhc2goKTtcblxuICB2YXIgX3Byb3BzJGdldFVzZXJDb25maXJtID0gcHJvcHMuZ2V0VXNlckNvbmZpcm1hdGlvbixcbiAgICAgIGdldFVzZXJDb25maXJtYXRpb24gPSBfcHJvcHMkZ2V0VXNlckNvbmZpcm0gPT09IHVuZGVmaW5lZCA/IGdldENvbmZpcm1hdGlvbiA6IF9wcm9wcyRnZXRVc2VyQ29uZmlybSxcbiAgICAgIF9wcm9wcyRoYXNoVHlwZSA9IHByb3BzLmhhc2hUeXBlLFxuICAgICAgaGFzaFR5cGUgPSBfcHJvcHMkaGFzaFR5cGUgPT09IHVuZGVmaW5lZCA/ICdzbGFzaCcgOiBfcHJvcHMkaGFzaFR5cGU7XG5cbiAgdmFyIGJhc2VuYW1lID0gcHJvcHMuYmFzZW5hbWUgPyBzdHJpcFRyYWlsaW5nU2xhc2goYWRkTGVhZGluZ1NsYXNoKHByb3BzLmJhc2VuYW1lKSkgOiAnJztcblxuICB2YXIgX0hhc2hQYXRoQ29kZXJzJGhhc2hUID0gSGFzaFBhdGhDb2RlcnNbaGFzaFR5cGVdLFxuICAgICAgZW5jb2RlUGF0aCA9IF9IYXNoUGF0aENvZGVycyRoYXNoVC5lbmNvZGVQYXRoLFxuICAgICAgZGVjb2RlUGF0aCA9IF9IYXNoUGF0aENvZGVycyRoYXNoVC5kZWNvZGVQYXRoO1xuXG5cbiAgdmFyIGdldERPTUxvY2F0aW9uID0gZnVuY3Rpb24gZ2V0RE9NTG9jYXRpb24oKSB7XG4gICAgdmFyIHBhdGggPSBkZWNvZGVQYXRoKGdldEhhc2hQYXRoKCkpO1xuXG4gICAgd2FybmluZyghYmFzZW5hbWUgfHwgaGFzQmFzZW5hbWUocGF0aCwgYmFzZW5hbWUpLCAnWW91IGFyZSBhdHRlbXB0aW5nIHRvIHVzZSBhIGJhc2VuYW1lIG9uIGEgcGFnZSB3aG9zZSBVUkwgcGF0aCBkb2VzIG5vdCBiZWdpbiAnICsgJ3dpdGggdGhlIGJhc2VuYW1lLiBFeHBlY3RlZCBwYXRoIFwiJyArIHBhdGggKyAnXCIgdG8gYmVnaW4gd2l0aCBcIicgKyBiYXNlbmFtZSArICdcIi4nKTtcblxuICAgIGlmIChiYXNlbmFtZSkgcGF0aCA9IHN0cmlwQmFzZW5hbWUocGF0aCwgYmFzZW5hbWUpO1xuXG4gICAgcmV0dXJuIGNyZWF0ZUxvY2F0aW9uKHBhdGgpO1xuICB9O1xuXG4gIHZhciB0cmFuc2l0aW9uTWFuYWdlciA9IGNyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyKCk7XG5cbiAgdmFyIHNldFN0YXRlID0gZnVuY3Rpb24gc2V0U3RhdGUobmV4dFN0YXRlKSB7XG4gICAgX2V4dGVuZHMoaGlzdG9yeSwgbmV4dFN0YXRlKTtcblxuICAgIGhpc3RvcnkubGVuZ3RoID0gZ2xvYmFsSGlzdG9yeS5sZW5ndGg7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5ub3RpZnlMaXN0ZW5lcnMoaGlzdG9yeS5sb2NhdGlvbiwgaGlzdG9yeS5hY3Rpb24pO1xuICB9O1xuXG4gIHZhciBmb3JjZU5leHRQb3AgPSBmYWxzZTtcbiAgdmFyIGlnbm9yZVBhdGggPSBudWxsO1xuXG4gIHZhciBoYW5kbGVIYXNoQ2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlSGFzaENoYW5nZSgpIHtcbiAgICB2YXIgcGF0aCA9IGdldEhhc2hQYXRoKCk7XG4gICAgdmFyIGVuY29kZWRQYXRoID0gZW5jb2RlUGF0aChwYXRoKTtcblxuICAgIGlmIChwYXRoICE9PSBlbmNvZGVkUGF0aCkge1xuICAgICAgLy8gRW5zdXJlIHdlIGFsd2F5cyBoYXZlIGEgcHJvcGVybHktZW5jb2RlZCBoYXNoLlxuICAgICAgcmVwbGFjZUhhc2hQYXRoKGVuY29kZWRQYXRoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGxvY2F0aW9uID0gZ2V0RE9NTG9jYXRpb24oKTtcbiAgICAgIHZhciBwcmV2TG9jYXRpb24gPSBoaXN0b3J5LmxvY2F0aW9uO1xuXG4gICAgICBpZiAoIWZvcmNlTmV4dFBvcCAmJiBsb2NhdGlvbnNBcmVFcXVhbChwcmV2TG9jYXRpb24sIGxvY2F0aW9uKSkgcmV0dXJuOyAvLyBBIGhhc2hjaGFuZ2UgZG9lc24ndCBhbHdheXMgPT0gbG9jYXRpb24gY2hhbmdlLlxuXG4gICAgICBpZiAoaWdub3JlUGF0aCA9PT0gY3JlYXRlUGF0aChsb2NhdGlvbikpIHJldHVybjsgLy8gSWdub3JlIHRoaXMgY2hhbmdlOyB3ZSBhbHJlYWR5IHNldFN0YXRlIGluIHB1c2gvcmVwbGFjZS5cblxuICAgICAgaWdub3JlUGF0aCA9IG51bGw7XG5cbiAgICAgIGhhbmRsZVBvcChsb2NhdGlvbik7XG4gICAgfVxuICB9O1xuXG4gIHZhciBoYW5kbGVQb3AgPSBmdW5jdGlvbiBoYW5kbGVQb3AobG9jYXRpb24pIHtcbiAgICBpZiAoZm9yY2VOZXh0UG9wKSB7XG4gICAgICBmb3JjZU5leHRQb3AgPSBmYWxzZTtcbiAgICAgIHNldFN0YXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhY3Rpb24gPSAnUE9QJztcblxuICAgICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgICAgaWYgKG9rKSB7XG4gICAgICAgICAgc2V0U3RhdGUoeyBhY3Rpb246IGFjdGlvbiwgbG9jYXRpb246IGxvY2F0aW9uIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldmVydFBvcChsb2NhdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICB2YXIgcmV2ZXJ0UG9wID0gZnVuY3Rpb24gcmV2ZXJ0UG9wKGZyb21Mb2NhdGlvbikge1xuICAgIHZhciB0b0xvY2F0aW9uID0gaGlzdG9yeS5sb2NhdGlvbjtcblxuICAgIC8vIFRPRE86IFdlIGNvdWxkIHByb2JhYmx5IG1ha2UgdGhpcyBtb3JlIHJlbGlhYmxlIGJ5XG4gICAgLy8ga2VlcGluZyBhIGxpc3Qgb2YgcGF0aHMgd2UndmUgc2VlbiBpbiBzZXNzaW9uU3RvcmFnZS5cbiAgICAvLyBJbnN0ZWFkLCB3ZSBqdXN0IGRlZmF1bHQgdG8gMCBmb3IgcGF0aHMgd2UgZG9uJ3Qga25vdy5cblxuICAgIHZhciB0b0luZGV4ID0gYWxsUGF0aHMubGFzdEluZGV4T2YoY3JlYXRlUGF0aCh0b0xvY2F0aW9uKSk7XG5cbiAgICBpZiAodG9JbmRleCA9PT0gLTEpIHRvSW5kZXggPSAwO1xuXG4gICAgdmFyIGZyb21JbmRleCA9IGFsbFBhdGhzLmxhc3RJbmRleE9mKGNyZWF0ZVBhdGgoZnJvbUxvY2F0aW9uKSk7XG5cbiAgICBpZiAoZnJvbUluZGV4ID09PSAtMSkgZnJvbUluZGV4ID0gMDtcblxuICAgIHZhciBkZWx0YSA9IHRvSW5kZXggLSBmcm9tSW5kZXg7XG5cbiAgICBpZiAoZGVsdGEpIHtcbiAgICAgIGZvcmNlTmV4dFBvcCA9IHRydWU7XG4gICAgICBnbyhkZWx0YSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEVuc3VyZSB0aGUgaGFzaCBpcyBlbmNvZGVkIHByb3Blcmx5IGJlZm9yZSBkb2luZyBhbnl0aGluZyBlbHNlLlxuICB2YXIgcGF0aCA9IGdldEhhc2hQYXRoKCk7XG4gIHZhciBlbmNvZGVkUGF0aCA9IGVuY29kZVBhdGgocGF0aCk7XG5cbiAgaWYgKHBhdGggIT09IGVuY29kZWRQYXRoKSByZXBsYWNlSGFzaFBhdGgoZW5jb2RlZFBhdGgpO1xuXG4gIHZhciBpbml0aWFsTG9jYXRpb24gPSBnZXRET01Mb2NhdGlvbigpO1xuICB2YXIgYWxsUGF0aHMgPSBbY3JlYXRlUGF0aChpbml0aWFsTG9jYXRpb24pXTtcblxuICAvLyBQdWJsaWMgaW50ZXJmYWNlXG5cbiAgdmFyIGNyZWF0ZUhyZWYgPSBmdW5jdGlvbiBjcmVhdGVIcmVmKGxvY2F0aW9uKSB7XG4gICAgcmV0dXJuICcjJyArIGVuY29kZVBhdGgoYmFzZW5hbWUgKyBjcmVhdGVQYXRoKGxvY2F0aW9uKSk7XG4gIH07XG5cbiAgdmFyIHB1c2ggPSBmdW5jdGlvbiBwdXNoKHBhdGgsIHN0YXRlKSB7XG4gICAgd2FybmluZyhzdGF0ZSA9PT0gdW5kZWZpbmVkLCAnSGFzaCBoaXN0b3J5IGNhbm5vdCBwdXNoIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7XG5cbiAgICB2YXIgYWN0aW9uID0gJ1BVU0gnO1xuICAgIHZhciBsb2NhdGlvbiA9IGNyZWF0ZUxvY2F0aW9uKHBhdGgsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBoaXN0b3J5LmxvY2F0aW9uKTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG5cbiAgICAgIHZhciBwYXRoID0gY3JlYXRlUGF0aChsb2NhdGlvbik7XG4gICAgICB2YXIgZW5jb2RlZFBhdGggPSBlbmNvZGVQYXRoKGJhc2VuYW1lICsgcGF0aCk7XG4gICAgICB2YXIgaGFzaENoYW5nZWQgPSBnZXRIYXNoUGF0aCgpICE9PSBlbmNvZGVkUGF0aDtcblxuICAgICAgaWYgKGhhc2hDaGFuZ2VkKSB7XG4gICAgICAgIC8vIFdlIGNhbm5vdCB0ZWxsIGlmIGEgaGFzaGNoYW5nZSB3YXMgY2F1c2VkIGJ5IGEgUFVTSCwgc28gd2UnZFxuICAgICAgICAvLyByYXRoZXIgc2V0U3RhdGUgaGVyZSBhbmQgaWdub3JlIHRoZSBoYXNoY2hhbmdlLiBUaGUgY2F2ZWF0IGhlcmVcbiAgICAgICAgLy8gaXMgdGhhdCBvdGhlciBoYXNoIGhpc3RvcmllcyBpbiB0aGUgcGFnZSB3aWxsIGNvbnNpZGVyIGl0IGEgUE9QLlxuICAgICAgICBpZ25vcmVQYXRoID0gcGF0aDtcbiAgICAgICAgcHVzaEhhc2hQYXRoKGVuY29kZWRQYXRoKTtcblxuICAgICAgICB2YXIgcHJldkluZGV4ID0gYWxsUGF0aHMubGFzdEluZGV4T2YoY3JlYXRlUGF0aChoaXN0b3J5LmxvY2F0aW9uKSk7XG4gICAgICAgIHZhciBuZXh0UGF0aHMgPSBhbGxQYXRocy5zbGljZSgwLCBwcmV2SW5kZXggPT09IC0xID8gMCA6IHByZXZJbmRleCArIDEpO1xuXG4gICAgICAgIG5leHRQYXRocy5wdXNoKHBhdGgpO1xuICAgICAgICBhbGxQYXRocyA9IG5leHRQYXRocztcblxuICAgICAgICBzZXRTdGF0ZSh7IGFjdGlvbjogYWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24gfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3YXJuaW5nKGZhbHNlLCAnSGFzaCBoaXN0b3J5IGNhbm5vdCBQVVNIIHRoZSBzYW1lIHBhdGg7IGEgbmV3IGVudHJ5IHdpbGwgbm90IGJlIGFkZGVkIHRvIHRoZSBoaXN0b3J5IHN0YWNrJyk7XG5cbiAgICAgICAgc2V0U3RhdGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICB2YXIgcmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UocGF0aCwgc3RhdGUpIHtcbiAgICB3YXJuaW5nKHN0YXRlID09PSB1bmRlZmluZWQsICdIYXNoIGhpc3RvcnkgY2Fubm90IHJlcGxhY2Ugc3RhdGU7IGl0IGlzIGlnbm9yZWQnKTtcblxuICAgIHZhciBhY3Rpb24gPSAnUkVQTEFDRSc7XG4gICAgdmFyIGxvY2F0aW9uID0gY3JlYXRlTG9jYXRpb24ocGF0aCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGhpc3RvcnkubG9jYXRpb24pO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmICghb2spIHJldHVybjtcblxuICAgICAgdmFyIHBhdGggPSBjcmVhdGVQYXRoKGxvY2F0aW9uKTtcbiAgICAgIHZhciBlbmNvZGVkUGF0aCA9IGVuY29kZVBhdGgoYmFzZW5hbWUgKyBwYXRoKTtcbiAgICAgIHZhciBoYXNoQ2hhbmdlZCA9IGdldEhhc2hQYXRoKCkgIT09IGVuY29kZWRQYXRoO1xuXG4gICAgICBpZiAoaGFzaENoYW5nZWQpIHtcbiAgICAgICAgLy8gV2UgY2Fubm90IHRlbGwgaWYgYSBoYXNoY2hhbmdlIHdhcyBjYXVzZWQgYnkgYSBSRVBMQUNFLCBzbyB3ZSdkXG4gICAgICAgIC8vIHJhdGhlciBzZXRTdGF0ZSBoZXJlIGFuZCBpZ25vcmUgdGhlIGhhc2hjaGFuZ2UuIFRoZSBjYXZlYXQgaGVyZVxuICAgICAgICAvLyBpcyB0aGF0IG90aGVyIGhhc2ggaGlzdG9yaWVzIGluIHRoZSBwYWdlIHdpbGwgY29uc2lkZXIgaXQgYSBQT1AuXG4gICAgICAgIGlnbm9yZVBhdGggPSBwYXRoO1xuICAgICAgICByZXBsYWNlSGFzaFBhdGgoZW5jb2RlZFBhdGgpO1xuICAgICAgfVxuXG4gICAgICB2YXIgcHJldkluZGV4ID0gYWxsUGF0aHMuaW5kZXhPZihjcmVhdGVQYXRoKGhpc3RvcnkubG9jYXRpb24pKTtcblxuICAgICAgaWYgKHByZXZJbmRleCAhPT0gLTEpIGFsbFBhdGhzW3ByZXZJbmRleF0gPSBwYXRoO1xuXG4gICAgICBzZXRTdGF0ZSh7IGFjdGlvbjogYWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24gfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdvID0gZnVuY3Rpb24gZ28obikge1xuICAgIHdhcm5pbmcoY2FuR29XaXRob3V0UmVsb2FkLCAnSGFzaCBoaXN0b3J5IGdvKG4pIGNhdXNlcyBhIGZ1bGwgcGFnZSByZWxvYWQgaW4gdGhpcyBicm93c2VyJyk7XG5cbiAgICBnbG9iYWxIaXN0b3J5LmdvKG4pO1xuICB9O1xuXG4gIHZhciBnb0JhY2sgPSBmdW5jdGlvbiBnb0JhY2soKSB7XG4gICAgcmV0dXJuIGdvKC0xKTtcbiAgfTtcblxuICB2YXIgZ29Gb3J3YXJkID0gZnVuY3Rpb24gZ29Gb3J3YXJkKCkge1xuICAgIHJldHVybiBnbygxKTtcbiAgfTtcblxuICB2YXIgbGlzdGVuZXJDb3VudCA9IDA7XG5cbiAgdmFyIGNoZWNrRE9NTGlzdGVuZXJzID0gZnVuY3Rpb24gY2hlY2tET01MaXN0ZW5lcnMoZGVsdGEpIHtcbiAgICBsaXN0ZW5lckNvdW50ICs9IGRlbHRhO1xuXG4gICAgaWYgKGxpc3RlbmVyQ291bnQgPT09IDEpIHtcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIod2luZG93LCBIYXNoQ2hhbmdlRXZlbnQsIGhhbmRsZUhhc2hDaGFuZ2UpO1xuICAgIH0gZWxzZSBpZiAobGlzdGVuZXJDb3VudCA9PT0gMCkge1xuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih3aW5kb3csIEhhc2hDaGFuZ2VFdmVudCwgaGFuZGxlSGFzaENoYW5nZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBpc0Jsb2NrZWQgPSBmYWxzZTtcblxuICB2YXIgYmxvY2sgPSBmdW5jdGlvbiBibG9jaygpIHtcbiAgICB2YXIgcHJvbXB0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmYWxzZTtcblxuICAgIHZhciB1bmJsb2NrID0gdHJhbnNpdGlvbk1hbmFnZXIuc2V0UHJvbXB0KHByb21wdCk7XG5cbiAgICBpZiAoIWlzQmxvY2tlZCkge1xuICAgICAgY2hlY2tET01MaXN0ZW5lcnMoMSk7XG4gICAgICBpc0Jsb2NrZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaXNCbG9ja2VkKSB7XG4gICAgICAgIGlzQmxvY2tlZCA9IGZhbHNlO1xuICAgICAgICBjaGVja0RPTUxpc3RlbmVycygtMSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bmJsb2NrKCk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgbGlzdGVuID0gZnVuY3Rpb24gbGlzdGVuKGxpc3RlbmVyKSB7XG4gICAgdmFyIHVubGlzdGVuID0gdHJhbnNpdGlvbk1hbmFnZXIuYXBwZW5kTGlzdGVuZXIobGlzdGVuZXIpO1xuICAgIGNoZWNrRE9NTGlzdGVuZXJzKDEpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrRE9NTGlzdGVuZXJzKC0xKTtcbiAgICAgIHVubGlzdGVuKCk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgaGlzdG9yeSA9IHtcbiAgICBsZW5ndGg6IGdsb2JhbEhpc3RvcnkubGVuZ3RoLFxuICAgIGFjdGlvbjogJ1BPUCcsXG4gICAgbG9jYXRpb246IGluaXRpYWxMb2NhdGlvbixcbiAgICBjcmVhdGVIcmVmOiBjcmVhdGVIcmVmLFxuICAgIHB1c2g6IHB1c2gsXG4gICAgcmVwbGFjZTogcmVwbGFjZSxcbiAgICBnbzogZ28sXG4gICAgZ29CYWNrOiBnb0JhY2ssXG4gICAgZ29Gb3J3YXJkOiBnb0ZvcndhcmQsXG4gICAgYmxvY2s6IGJsb2NrLFxuICAgIGxpc3RlbjogbGlzdGVuXG4gIH07XG5cbiAgcmV0dXJuIGhpc3Rvcnk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVIYXNoSGlzdG9yeTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vaGlzdG9yeS9lcy9jcmVhdGVIYXNoSGlzdG9yeS5qc1xuLy8gbW9kdWxlIGlkID0gMTM5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwidmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5pbXBvcnQgd2FybmluZyBmcm9tICd3YXJuaW5nJztcbmltcG9ydCB7IGNyZWF0ZVBhdGggfSBmcm9tICcuL1BhdGhVdGlscyc7XG5pbXBvcnQgeyBjcmVhdGVMb2NhdGlvbiB9IGZyb20gJy4vTG9jYXRpb25VdGlscyc7XG5pbXBvcnQgY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIgZnJvbSAnLi9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcic7XG5cbnZhciBjbGFtcCA9IGZ1bmN0aW9uIGNsYW1wKG4sIGxvd2VyQm91bmQsIHVwcGVyQm91bmQpIHtcbiAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KG4sIGxvd2VyQm91bmQpLCB1cHBlckJvdW5kKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIGhpc3Rvcnkgb2JqZWN0IHRoYXQgc3RvcmVzIGxvY2F0aW9ucyBpbiBtZW1vcnkuXG4gKi9cbnZhciBjcmVhdGVNZW1vcnlIaXN0b3J5ID0gZnVuY3Rpb24gY3JlYXRlTWVtb3J5SGlzdG9yeSgpIHtcbiAgdmFyIHByb3BzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgdmFyIGdldFVzZXJDb25maXJtYXRpb24gPSBwcm9wcy5nZXRVc2VyQ29uZmlybWF0aW9uLFxuICAgICAgX3Byb3BzJGluaXRpYWxFbnRyaWVzID0gcHJvcHMuaW5pdGlhbEVudHJpZXMsXG4gICAgICBpbml0aWFsRW50cmllcyA9IF9wcm9wcyRpbml0aWFsRW50cmllcyA9PT0gdW5kZWZpbmVkID8gWycvJ10gOiBfcHJvcHMkaW5pdGlhbEVudHJpZXMsXG4gICAgICBfcHJvcHMkaW5pdGlhbEluZGV4ID0gcHJvcHMuaW5pdGlhbEluZGV4LFxuICAgICAgaW5pdGlhbEluZGV4ID0gX3Byb3BzJGluaXRpYWxJbmRleCA9PT0gdW5kZWZpbmVkID8gMCA6IF9wcm9wcyRpbml0aWFsSW5kZXgsXG4gICAgICBfcHJvcHMka2V5TGVuZ3RoID0gcHJvcHMua2V5TGVuZ3RoLFxuICAgICAga2V5TGVuZ3RoID0gX3Byb3BzJGtleUxlbmd0aCA9PT0gdW5kZWZpbmVkID8gNiA6IF9wcm9wcyRrZXlMZW5ndGg7XG5cblxuICB2YXIgdHJhbnNpdGlvbk1hbmFnZXIgPSBjcmVhdGVUcmFuc2l0aW9uTWFuYWdlcigpO1xuXG4gIHZhciBzZXRTdGF0ZSA9IGZ1bmN0aW9uIHNldFN0YXRlKG5leHRTdGF0ZSkge1xuICAgIF9leHRlbmRzKGhpc3RvcnksIG5leHRTdGF0ZSk7XG5cbiAgICBoaXN0b3J5Lmxlbmd0aCA9IGhpc3RvcnkuZW50cmllcy5sZW5ndGg7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5ub3RpZnlMaXN0ZW5lcnMoaGlzdG9yeS5sb2NhdGlvbiwgaGlzdG9yeS5hY3Rpb24pO1xuICB9O1xuXG4gIHZhciBjcmVhdGVLZXkgPSBmdW5jdGlvbiBjcmVhdGVLZXkoKSB7XG4gICAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCBrZXlMZW5ndGgpO1xuICB9O1xuXG4gIHZhciBpbmRleCA9IGNsYW1wKGluaXRpYWxJbmRleCwgMCwgaW5pdGlhbEVudHJpZXMubGVuZ3RoIC0gMSk7XG4gIHZhciBlbnRyaWVzID0gaW5pdGlhbEVudHJpZXMubWFwKGZ1bmN0aW9uIChlbnRyeSkge1xuICAgIHJldHVybiB0eXBlb2YgZW50cnkgPT09ICdzdHJpbmcnID8gY3JlYXRlTG9jYXRpb24oZW50cnksIHVuZGVmaW5lZCwgY3JlYXRlS2V5KCkpIDogY3JlYXRlTG9jYXRpb24oZW50cnksIHVuZGVmaW5lZCwgZW50cnkua2V5IHx8IGNyZWF0ZUtleSgpKTtcbiAgfSk7XG5cbiAgLy8gUHVibGljIGludGVyZmFjZVxuXG4gIHZhciBjcmVhdGVIcmVmID0gY3JlYXRlUGF0aDtcblxuICB2YXIgcHVzaCA9IGZ1bmN0aW9uIHB1c2gocGF0aCwgc3RhdGUpIHtcbiAgICB3YXJuaW5nKCEoKHR5cGVvZiBwYXRoID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihwYXRoKSkgPT09ICdvYmplY3QnICYmIHBhdGguc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBzdGF0ZSAhPT0gdW5kZWZpbmVkKSwgJ1lvdSBzaG91bGQgYXZvaWQgcHJvdmlkaW5nIGEgMm5kIHN0YXRlIGFyZ3VtZW50IHRvIHB1c2ggd2hlbiB0aGUgMXN0ICcgKyAnYXJndW1lbnQgaXMgYSBsb2NhdGlvbi1saWtlIG9iamVjdCB0aGF0IGFscmVhZHkgaGFzIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7XG5cbiAgICB2YXIgYWN0aW9uID0gJ1BVU0gnO1xuICAgIHZhciBsb2NhdGlvbiA9IGNyZWF0ZUxvY2F0aW9uKHBhdGgsIHN0YXRlLCBjcmVhdGVLZXkoKSwgaGlzdG9yeS5sb2NhdGlvbik7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKCFvaykgcmV0dXJuO1xuXG4gICAgICB2YXIgcHJldkluZGV4ID0gaGlzdG9yeS5pbmRleDtcbiAgICAgIHZhciBuZXh0SW5kZXggPSBwcmV2SW5kZXggKyAxO1xuXG4gICAgICB2YXIgbmV4dEVudHJpZXMgPSBoaXN0b3J5LmVudHJpZXMuc2xpY2UoMCk7XG4gICAgICBpZiAobmV4dEVudHJpZXMubGVuZ3RoID4gbmV4dEluZGV4KSB7XG4gICAgICAgIG5leHRFbnRyaWVzLnNwbGljZShuZXh0SW5kZXgsIG5leHRFbnRyaWVzLmxlbmd0aCAtIG5leHRJbmRleCwgbG9jYXRpb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV4dEVudHJpZXMucHVzaChsb2NhdGlvbik7XG4gICAgICB9XG5cbiAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgIGxvY2F0aW9uOiBsb2NhdGlvbixcbiAgICAgICAgaW5kZXg6IG5leHRJbmRleCxcbiAgICAgICAgZW50cmllczogbmV4dEVudHJpZXNcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciByZXBsYWNlID0gZnVuY3Rpb24gcmVwbGFjZShwYXRoLCBzdGF0ZSkge1xuICAgIHdhcm5pbmcoISgodHlwZW9mIHBhdGggPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHBhdGgpKSA9PT0gJ29iamVjdCcgJiYgcGF0aC5zdGF0ZSAhPT0gdW5kZWZpbmVkICYmIHN0YXRlICE9PSB1bmRlZmluZWQpLCAnWW91IHNob3VsZCBhdm9pZCBwcm92aWRpbmcgYSAybmQgc3RhdGUgYXJndW1lbnQgdG8gcmVwbGFjZSB3aGVuIHRoZSAxc3QgJyArICdhcmd1bWVudCBpcyBhIGxvY2F0aW9uLWxpa2Ugb2JqZWN0IHRoYXQgYWxyZWFkeSBoYXMgc3RhdGU7IGl0IGlzIGlnbm9yZWQnKTtcblxuICAgIHZhciBhY3Rpb24gPSAnUkVQTEFDRSc7XG4gICAgdmFyIGxvY2F0aW9uID0gY3JlYXRlTG9jYXRpb24ocGF0aCwgc3RhdGUsIGNyZWF0ZUtleSgpLCBoaXN0b3J5LmxvY2F0aW9uKTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG5cbiAgICAgIGhpc3RvcnkuZW50cmllc1toaXN0b3J5LmluZGV4XSA9IGxvY2F0aW9uO1xuXG4gICAgICBzZXRTdGF0ZSh7IGFjdGlvbjogYWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24gfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdvID0gZnVuY3Rpb24gZ28obikge1xuICAgIHZhciBuZXh0SW5kZXggPSBjbGFtcChoaXN0b3J5LmluZGV4ICsgbiwgMCwgaGlzdG9yeS5lbnRyaWVzLmxlbmd0aCAtIDEpO1xuXG4gICAgdmFyIGFjdGlvbiA9ICdQT1AnO1xuICAgIHZhciBsb2NhdGlvbiA9IGhpc3RvcnkuZW50cmllc1tuZXh0SW5kZXhdO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmIChvaykge1xuICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uLFxuICAgICAgICAgIGluZGV4OiBuZXh0SW5kZXhcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBNaW1pYyB0aGUgYmVoYXZpb3Igb2YgRE9NIGhpc3RvcmllcyBieVxuICAgICAgICAvLyBjYXVzaW5nIGEgcmVuZGVyIGFmdGVyIGEgY2FuY2VsbGVkIFBPUC5cbiAgICAgICAgc2V0U3RhdGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICB2YXIgZ29CYWNrID0gZnVuY3Rpb24gZ29CYWNrKCkge1xuICAgIHJldHVybiBnbygtMSk7XG4gIH07XG5cbiAgdmFyIGdvRm9yd2FyZCA9IGZ1bmN0aW9uIGdvRm9yd2FyZCgpIHtcbiAgICByZXR1cm4gZ28oMSk7XG4gIH07XG5cbiAgdmFyIGNhbkdvID0gZnVuY3Rpb24gY2FuR28obikge1xuICAgIHZhciBuZXh0SW5kZXggPSBoaXN0b3J5LmluZGV4ICsgbjtcbiAgICByZXR1cm4gbmV4dEluZGV4ID49IDAgJiYgbmV4dEluZGV4IDwgaGlzdG9yeS5lbnRyaWVzLmxlbmd0aDtcbiAgfTtcblxuICB2YXIgYmxvY2sgPSBmdW5jdGlvbiBibG9jaygpIHtcbiAgICB2YXIgcHJvbXB0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmYWxzZTtcbiAgICByZXR1cm4gdHJhbnNpdGlvbk1hbmFnZXIuc2V0UHJvbXB0KHByb21wdCk7XG4gIH07XG5cbiAgdmFyIGxpc3RlbiA9IGZ1bmN0aW9uIGxpc3RlbihsaXN0ZW5lcikge1xuICAgIHJldHVybiB0cmFuc2l0aW9uTWFuYWdlci5hcHBlbmRMaXN0ZW5lcihsaXN0ZW5lcik7XG4gIH07XG5cbiAgdmFyIGhpc3RvcnkgPSB7XG4gICAgbGVuZ3RoOiBlbnRyaWVzLmxlbmd0aCxcbiAgICBhY3Rpb246ICdQT1AnLFxuICAgIGxvY2F0aW9uOiBlbnRyaWVzW2luZGV4XSxcbiAgICBpbmRleDogaW5kZXgsXG4gICAgZW50cmllczogZW50cmllcyxcbiAgICBjcmVhdGVIcmVmOiBjcmVhdGVIcmVmLFxuICAgIHB1c2g6IHB1c2gsXG4gICAgcmVwbGFjZTogcmVwbGFjZSxcbiAgICBnbzogZ28sXG4gICAgZ29CYWNrOiBnb0JhY2ssXG4gICAgZ29Gb3J3YXJkOiBnb0ZvcndhcmQsXG4gICAgY2FuR286IGNhbkdvLFxuICAgIGJsb2NrOiBibG9jayxcbiAgICBsaXN0ZW46IGxpc3RlblxuICB9O1xuXG4gIHJldHVybiBoaXN0b3J5O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlTWVtb3J5SGlzdG9yeTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vaGlzdG9yeS9lcy9jcmVhdGVNZW1vcnlIaXN0b3J5LmpzXG4vLyBtb2R1bGUgaWQgPSAxNDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvZXh0ZW5kcycpO1xuXG52YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXG52YXIgX2tleXMgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMnKTtcblxudmFyIF9rZXlzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2tleXMpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllcycpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMik7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YnKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2syID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrJyk7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTtcblxudmFyIF9jcmVhdGVDbGFzczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MnKTtcblxudmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4nKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblxudmFyIF9pbmhlcml0czIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMnKTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG5leHBvcnRzLmdldFN0eWxlcyA9IGdldFN0eWxlcztcblxudmFyIF9zaW1wbGVBc3NpZ24gPSByZXF1aXJlKCdzaW1wbGUtYXNzaWduJyk7XG5cbnZhciBfc2ltcGxlQXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NpbXBsZUFzc2lnbik7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbnZhciBfSWNvbkJ1dHRvbiA9IHJlcXVpcmUoJy4uL0ljb25CdXR0b24nKTtcblxudmFyIF9JY29uQnV0dG9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ljb25CdXR0b24pO1xuXG52YXIgX21lbnUgPSByZXF1aXJlKCcuLi9zdmctaWNvbnMvbmF2aWdhdGlvbi9tZW51Jyk7XG5cbnZhciBfbWVudTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tZW51KTtcblxudmFyIF9QYXBlciA9IHJlcXVpcmUoJy4uL1BhcGVyJyk7XG5cbnZhciBfUGFwZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUGFwZXIpO1xuXG52YXIgX3Byb3BUeXBlczMgPSByZXF1aXJlKCcuLi91dGlscy9wcm9wVHlwZXMnKTtcblxudmFyIF9wcm9wVHlwZXM0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzMyk7XG5cbnZhciBfd2FybmluZyA9IHJlcXVpcmUoJ3dhcm5pbmcnKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBnZXRTdHlsZXMocHJvcHMsIGNvbnRleHQpIHtcbiAgdmFyIF9jb250ZXh0JG11aVRoZW1lID0gY29udGV4dC5tdWlUaGVtZSxcbiAgICAgIGFwcEJhciA9IF9jb250ZXh0JG11aVRoZW1lLmFwcEJhcixcbiAgICAgIGljb25CdXR0b25TaXplID0gX2NvbnRleHQkbXVpVGhlbWUuYnV0dG9uLmljb25CdXR0b25TaXplLFxuICAgICAgekluZGV4ID0gX2NvbnRleHQkbXVpVGhlbWUuekluZGV4O1xuXG5cbiAgdmFyIGZsYXRCdXR0b25TaXplID0gMzY7XG5cbiAgdmFyIHN0eWxlcyA9IHtcbiAgICByb290OiB7XG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgIHpJbmRleDogekluZGV4LmFwcEJhcixcbiAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IGFwcEJhci5jb2xvcixcbiAgICAgIHBhZGRpbmdMZWZ0OiBhcHBCYXIucGFkZGluZyxcbiAgICAgIHBhZGRpbmdSaWdodDogYXBwQmFyLnBhZGRpbmdcbiAgICB9LFxuICAgIHRpdGxlOiB7XG4gICAgICB3aGl0ZVNwYWNlOiAnbm93cmFwJyxcbiAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICAgIHRleHRPdmVyZmxvdzogJ2VsbGlwc2lzJyxcbiAgICAgIG1hcmdpbjogMCxcbiAgICAgIHBhZGRpbmdUb3A6IDAsXG4gICAgICBsZXR0ZXJTcGFjaW5nOiAwLFxuICAgICAgZm9udFNpemU6IDI0LFxuICAgICAgZm9udFdlaWdodDogYXBwQmFyLnRpdGxlRm9udFdlaWdodCxcbiAgICAgIGNvbG9yOiBhcHBCYXIudGV4dENvbG9yLFxuICAgICAgaGVpZ2h0OiBhcHBCYXIuaGVpZ2h0LFxuICAgICAgbGluZUhlaWdodDogYXBwQmFyLmhlaWdodCArICdweCdcbiAgICB9LFxuICAgIG1haW5FbGVtZW50OiB7XG4gICAgICBib3hGbGV4OiAxLFxuICAgICAgZmxleDogJzEnXG4gICAgfSxcbiAgICBpY29uQnV0dG9uU3R5bGU6IHtcbiAgICAgIG1hcmdpblRvcDogKGFwcEJhci5oZWlnaHQgLSBpY29uQnV0dG9uU2l6ZSkgLyAyLFxuICAgICAgbWFyZ2luUmlnaHQ6IDgsXG4gICAgICBtYXJnaW5MZWZ0OiAtMTZcbiAgICB9LFxuICAgIGljb25CdXR0b25JY29uU3R5bGU6IHtcbiAgICAgIGZpbGw6IGFwcEJhci50ZXh0Q29sb3IsXG4gICAgICBjb2xvcjogYXBwQmFyLnRleHRDb2xvclxuICAgIH0sXG4gICAgZmxhdEJ1dHRvbjoge1xuICAgICAgY29sb3I6IGFwcEJhci50ZXh0Q29sb3IsXG4gICAgICBtYXJnaW5Ub3A6IChpY29uQnV0dG9uU2l6ZSAtIGZsYXRCdXR0b25TaXplKSAvIDIgKyAxXG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBzdHlsZXM7XG59XG5cbnZhciBBcHBCYXIgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShBcHBCYXIsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEFwcEJhcigpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBBcHBCYXIpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChfcmVmID0gQXBwQmFyLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShBcHBCYXIpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5oYW5kbGVUb3VjaFRhcExlZnRJY29uQnV0dG9uID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoX3RoaXMucHJvcHMub25MZWZ0SWNvbkJ1dHRvblRvdWNoVGFwKSB7XG4gICAgICAgIF90aGlzLnByb3BzLm9uTGVmdEljb25CdXR0b25Ub3VjaFRhcChldmVudCk7XG4gICAgICB9XG4gICAgfSwgX3RoaXMuaGFuZGxlVG91Y2hUYXBSaWdodEljb25CdXR0b24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmIChfdGhpcy5wcm9wcy5vblJpZ2h0SWNvbkJ1dHRvblRvdWNoVGFwKSB7XG4gICAgICAgIF90aGlzLnByb3BzLm9uUmlnaHRJY29uQnV0dG9uVG91Y2hUYXAoZXZlbnQpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmhhbmRsZVRpdGxlVG91Y2hUYXAgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmIChfdGhpcy5wcm9wcy5vblRpdGxlVG91Y2hUYXApIHtcbiAgICAgICAgX3RoaXMucHJvcHMub25UaXRsZVRvdWNoVGFwKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9LCBfdGVtcCksICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkoX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoQXBwQmFyLCBbe1xuICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKCF0aGlzLnByb3BzLmljb25FbGVtZW50TGVmdCB8fCAhdGhpcy5wcm9wcy5pY29uQ2xhc3NOYW1lTGVmdCwgJ01hdGVyaWFsLVVJOiBQcm9wZXJ0aWVzIGljb25FbGVtZW50TGVmdFxcbiAgICAgIGFuZCBpY29uQ2xhc3NOYW1lTGVmdCBjYW5ub3QgYmUgc2ltdWx0YW5lb3VzbHkgZGVmaW5lZC4gUGxlYXNlIHVzZSBvbmUgb3IgdGhlIG90aGVyLicpIDogdm9pZCAwO1xuXG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKCF0aGlzLnByb3BzLmljb25FbGVtZW50UmlnaHQgfHwgIXRoaXMucHJvcHMuaWNvbkNsYXNzTmFtZVJpZ2h0LCAnTWF0ZXJpYWwtVUk6IFByb3BlcnRpZXMgaWNvbkVsZW1lbnRSaWdodFxcbiAgICAgIGFuZCBpY29uQ2xhc3NOYW1lUmlnaHQgY2Fubm90IGJlIHNpbXVsdGFuZW91c2x5IGRlZmluZWQuIFBsZWFzZSB1c2Ugb25lIG9yIHRoZSBvdGhlci4nKSA6IHZvaWQgMDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICB0aXRsZSA9IF9wcm9wcy50aXRsZSxcbiAgICAgICAgICB0aXRsZVN0eWxlID0gX3Byb3BzLnRpdGxlU3R5bGUsXG4gICAgICAgICAgaWNvblN0eWxlTGVmdCA9IF9wcm9wcy5pY29uU3R5bGVMZWZ0LFxuICAgICAgICAgIGljb25TdHlsZVJpZ2h0ID0gX3Byb3BzLmljb25TdHlsZVJpZ2h0LFxuICAgICAgICAgIG9uVGl0bGVUb3VjaFRhcCA9IF9wcm9wcy5vblRpdGxlVG91Y2hUYXAsXG4gICAgICAgICAgc2hvd01lbnVJY29uQnV0dG9uID0gX3Byb3BzLnNob3dNZW51SWNvbkJ1dHRvbixcbiAgICAgICAgICBpY29uRWxlbWVudExlZnQgPSBfcHJvcHMuaWNvbkVsZW1lbnRMZWZ0LFxuICAgICAgICAgIGljb25FbGVtZW50UmlnaHQgPSBfcHJvcHMuaWNvbkVsZW1lbnRSaWdodCxcbiAgICAgICAgICBpY29uQ2xhc3NOYW1lTGVmdCA9IF9wcm9wcy5pY29uQ2xhc3NOYW1lTGVmdCxcbiAgICAgICAgICBpY29uQ2xhc3NOYW1lUmlnaHQgPSBfcHJvcHMuaWNvbkNsYXNzTmFtZVJpZ2h0LFxuICAgICAgICAgIG9uTGVmdEljb25CdXR0b25Ub3VjaFRhcCA9IF9wcm9wcy5vbkxlZnRJY29uQnV0dG9uVG91Y2hUYXAsXG4gICAgICAgICAgb25SaWdodEljb25CdXR0b25Ub3VjaFRhcCA9IF9wcm9wcy5vblJpZ2h0SWNvbkJ1dHRvblRvdWNoVGFwLFxuICAgICAgICAgIGNsYXNzTmFtZSA9IF9wcm9wcy5jbGFzc05hbWUsXG4gICAgICAgICAgc3R5bGUgPSBfcHJvcHMuc3R5bGUsXG4gICAgICAgICAgekRlcHRoID0gX3Byb3BzLnpEZXB0aCxcbiAgICAgICAgICBjaGlsZHJlbiA9IF9wcm9wcy5jaGlsZHJlbixcbiAgICAgICAgICBvdGhlciA9ICgwLCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzLmRlZmF1bHQpKF9wcm9wcywgWyd0aXRsZScsICd0aXRsZVN0eWxlJywgJ2ljb25TdHlsZUxlZnQnLCAnaWNvblN0eWxlUmlnaHQnLCAnb25UaXRsZVRvdWNoVGFwJywgJ3Nob3dNZW51SWNvbkJ1dHRvbicsICdpY29uRWxlbWVudExlZnQnLCAnaWNvbkVsZW1lbnRSaWdodCcsICdpY29uQ2xhc3NOYW1lTGVmdCcsICdpY29uQ2xhc3NOYW1lUmlnaHQnLCAnb25MZWZ0SWNvbkJ1dHRvblRvdWNoVGFwJywgJ29uUmlnaHRJY29uQnV0dG9uVG91Y2hUYXAnLCAnY2xhc3NOYW1lJywgJ3N0eWxlJywgJ3pEZXB0aCcsICdjaGlsZHJlbiddKTtcbiAgICAgIHZhciBwcmVwYXJlU3R5bGVzID0gdGhpcy5jb250ZXh0Lm11aVRoZW1lLnByZXBhcmVTdHlsZXM7XG5cbiAgICAgIHZhciBzdHlsZXMgPSBnZXRTdHlsZXModGhpcy5wcm9wcywgdGhpcy5jb250ZXh0KTtcblxuICAgICAgdmFyIG1lbnVFbGVtZW50TGVmdCA9IHZvaWQgMDtcbiAgICAgIHZhciBtZW51RWxlbWVudFJpZ2h0ID0gdm9pZCAwO1xuXG4gICAgICAvLyBJZiB0aGUgdGl0bGUgaXMgYSBzdHJpbmcsIHdyYXAgaW4gYW4gaDEgdGFnLlxuICAgICAgLy8gSWYgbm90LCB3cmFwIGluIGEgZGl2IHRhZy5cbiAgICAgIHZhciB0aXRsZUNvbXBvbmVudCA9IHR5cGVvZiB0aXRsZSA9PT0gJ3N0cmluZycgfHwgdGl0bGUgaW5zdGFuY2VvZiBTdHJpbmcgPyAnaDEnIDogJ2Rpdic7XG5cbiAgICAgIHZhciB0aXRsZUVsZW1lbnQgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCh0aXRsZUNvbXBvbmVudCwge1xuICAgICAgICBvblRvdWNoVGFwOiB0aGlzLmhhbmRsZVRpdGxlVG91Y2hUYXAsXG4gICAgICAgIHN0eWxlOiBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMudGl0bGUsIHN0eWxlcy5tYWluRWxlbWVudCwgdGl0bGVTdHlsZSkpXG4gICAgICB9LCB0aXRsZSk7XG5cbiAgICAgIHZhciBpY29uTGVmdFN0eWxlID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBzdHlsZXMuaWNvbkJ1dHRvblN0eWxlLCBpY29uU3R5bGVMZWZ0KTtcblxuICAgICAgaWYgKHNob3dNZW51SWNvbkJ1dHRvbikge1xuICAgICAgICBpZiAoaWNvbkVsZW1lbnRMZWZ0KSB7XG4gICAgICAgICAgdmFyIGljb25FbGVtZW50TGVmdFByb3BzID0ge307XG5cbiAgICAgICAgICBpZiAoaWNvbkVsZW1lbnRMZWZ0LnR5cGUubXVpTmFtZSA9PT0gJ0ljb25CdXR0b24nKSB7XG4gICAgICAgICAgICB2YXIgaWNvbkVsZW1MZWZ0Q2hpbGRyZW4gPSBpY29uRWxlbWVudExlZnQucHJvcHMuY2hpbGRyZW47XG4gICAgICAgICAgICB2YXIgaWNvbkJ1dHRvbkljb25TdHlsZSA9ICEoaWNvbkVsZW1MZWZ0Q2hpbGRyZW4gJiYgaWNvbkVsZW1MZWZ0Q2hpbGRyZW4ucHJvcHMgJiYgaWNvbkVsZW1MZWZ0Q2hpbGRyZW4ucHJvcHMuY29sb3IpID8gc3R5bGVzLmljb25CdXR0b25JY29uU3R5bGUgOiBudWxsO1xuXG4gICAgICAgICAgICBpY29uRWxlbWVudExlZnRQcm9wcy5pY29uU3R5bGUgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe30sIGljb25CdXR0b25JY29uU3R5bGUsIGljb25FbGVtZW50TGVmdC5wcm9wcy5pY29uU3R5bGUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghaWNvbkVsZW1lbnRMZWZ0LnByb3BzLm9uVG91Y2hUYXAgJiYgdGhpcy5wcm9wcy5vbkxlZnRJY29uQnV0dG9uVG91Y2hUYXApIHtcbiAgICAgICAgICAgIGljb25FbGVtZW50TGVmdFByb3BzLm9uVG91Y2hUYXAgPSB0aGlzLmhhbmRsZVRvdWNoVGFwTGVmdEljb25CdXR0b247XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbWVudUVsZW1lbnRMZWZ0ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgc3R5bGU6IHByZXBhcmVTdHlsZXMoaWNvbkxlZnRTdHlsZSkgfSxcbiAgICAgICAgICAgICgwLCBfa2V5czIuZGVmYXVsdCkoaWNvbkVsZW1lbnRMZWZ0UHJvcHMpLmxlbmd0aCA+IDAgPyAoMCwgX3JlYWN0LmNsb25lRWxlbWVudCkoaWNvbkVsZW1lbnRMZWZ0LCBpY29uRWxlbWVudExlZnRQcm9wcykgOiBpY29uRWxlbWVudExlZnRcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1lbnVFbGVtZW50TGVmdCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgX0ljb25CdXR0b24yLmRlZmF1bHQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHN0eWxlOiBpY29uTGVmdFN0eWxlLFxuICAgICAgICAgICAgICBpY29uU3R5bGU6IHN0eWxlcy5pY29uQnV0dG9uSWNvblN0eWxlLFxuICAgICAgICAgICAgICBpY29uQ2xhc3NOYW1lOiBpY29uQ2xhc3NOYW1lTGVmdCxcbiAgICAgICAgICAgICAgb25Ub3VjaFRhcDogdGhpcy5oYW5kbGVUb3VjaFRhcExlZnRJY29uQnV0dG9uXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaWNvbkNsYXNzTmFtZUxlZnQgPyAnJyA6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9tZW51Mi5kZWZhdWx0LCB7IHN0eWxlOiAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe30sIHN0eWxlcy5pY29uQnV0dG9uSWNvblN0eWxlKSB9KVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGljb25SaWdodFN0eWxlID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBzdHlsZXMuaWNvbkJ1dHRvblN0eWxlLCB7XG4gICAgICAgIG1hcmdpblJpZ2h0OiAtMTYsXG4gICAgICAgIG1hcmdpbkxlZnQ6ICdhdXRvJ1xuICAgICAgfSwgaWNvblN0eWxlUmlnaHQpO1xuXG4gICAgICBpZiAoaWNvbkVsZW1lbnRSaWdodCkge1xuICAgICAgICB2YXIgaWNvbkVsZW1lbnRSaWdodFByb3BzID0ge307XG5cbiAgICAgICAgc3dpdGNoIChpY29uRWxlbWVudFJpZ2h0LnR5cGUubXVpTmFtZSkge1xuICAgICAgICAgIGNhc2UgJ0ljb25NZW51JzpcbiAgICAgICAgICBjYXNlICdJY29uQnV0dG9uJzpcbiAgICAgICAgICAgIHZhciBpY29uRWxlbVJpZ2h0Q2hpbGRyZW4gPSBpY29uRWxlbWVudFJpZ2h0LnByb3BzLmNoaWxkcmVuO1xuICAgICAgICAgICAgdmFyIF9pY29uQnV0dG9uSWNvblN0eWxlID0gIShpY29uRWxlbVJpZ2h0Q2hpbGRyZW4gJiYgaWNvbkVsZW1SaWdodENoaWxkcmVuLnByb3BzICYmIGljb25FbGVtUmlnaHRDaGlsZHJlbi5wcm9wcy5jb2xvcikgPyBzdHlsZXMuaWNvbkJ1dHRvbkljb25TdHlsZSA6IG51bGw7XG5cbiAgICAgICAgICAgIGljb25FbGVtZW50UmlnaHRQcm9wcy5pY29uU3R5bGUgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe30sIF9pY29uQnV0dG9uSWNvblN0eWxlLCBpY29uRWxlbWVudFJpZ2h0LnByb3BzLmljb25TdHlsZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ0ZsYXRCdXR0b24nOlxuICAgICAgICAgICAgaWNvbkVsZW1lbnRSaWdodFByb3BzLnN0eWxlID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBzdHlsZXMuZmxhdEJ1dHRvbiwgaWNvbkVsZW1lbnRSaWdodC5wcm9wcy5zdHlsZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWljb25FbGVtZW50UmlnaHQucHJvcHMub25Ub3VjaFRhcCAmJiB0aGlzLnByb3BzLm9uUmlnaHRJY29uQnV0dG9uVG91Y2hUYXApIHtcbiAgICAgICAgICBpY29uRWxlbWVudFJpZ2h0UHJvcHMub25Ub3VjaFRhcCA9IHRoaXMuaGFuZGxlVG91Y2hUYXBSaWdodEljb25CdXR0b247XG4gICAgICAgIH1cblxuICAgICAgICBtZW51RWxlbWVudFJpZ2h0ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgeyBzdHlsZTogcHJlcGFyZVN0eWxlcyhpY29uUmlnaHRTdHlsZSkgfSxcbiAgICAgICAgICAoMCwgX2tleXMyLmRlZmF1bHQpKGljb25FbGVtZW50UmlnaHRQcm9wcykubGVuZ3RoID4gMCA/ICgwLCBfcmVhY3QuY2xvbmVFbGVtZW50KShpY29uRWxlbWVudFJpZ2h0LCBpY29uRWxlbWVudFJpZ2h0UHJvcHMpIDogaWNvbkVsZW1lbnRSaWdodFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChpY29uQ2xhc3NOYW1lUmlnaHQpIHtcbiAgICAgICAgbWVudUVsZW1lbnRSaWdodCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9JY29uQnV0dG9uMi5kZWZhdWx0LCB7XG4gICAgICAgICAgc3R5bGU6IGljb25SaWdodFN0eWxlLFxuICAgICAgICAgIGljb25TdHlsZTogc3R5bGVzLmljb25CdXR0b25JY29uU3R5bGUsXG4gICAgICAgICAgaWNvbkNsYXNzTmFtZTogaWNvbkNsYXNzTmFtZVJpZ2h0LFxuICAgICAgICAgIG9uVG91Y2hUYXA6IHRoaXMuaGFuZGxlVG91Y2hUYXBSaWdodEljb25CdXR0b25cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgX1BhcGVyMi5kZWZhdWx0LFxuICAgICAgICAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBvdGhlciwge1xuICAgICAgICAgIHJvdW5kZWQ6IGZhbHNlLFxuICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICAgIHN0eWxlOiAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe30sIHN0eWxlcy5yb290LCBzdHlsZSksXG4gICAgICAgICAgekRlcHRoOiB6RGVwdGhcbiAgICAgICAgfSksXG4gICAgICAgIG1lbnVFbGVtZW50TGVmdCxcbiAgICAgICAgdGl0bGVFbGVtZW50LFxuICAgICAgICBtZW51RWxlbWVudFJpZ2h0LFxuICAgICAgICBjaGlsZHJlblxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIEFwcEJhcjtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbkFwcEJhci5tdWlOYW1lID0gJ0FwcEJhcic7XG5BcHBCYXIuZGVmYXVsdFByb3BzID0ge1xuICBzaG93TWVudUljb25CdXR0b246IHRydWUsXG4gIHRpdGxlOiAnJyxcbiAgekRlcHRoOiAxXG59O1xuQXBwQmFyLmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5BcHBCYXIucHJvcFR5cGVzID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8ge1xuICAvKipcbiAgICogQ2FuIGJlIHVzZWQgdG8gcmVuZGVyIGEgdGFiIGluc2lkZSBhbiBhcHAgYmFyIGZvciBpbnN0YW5jZS5cbiAgICovXG4gIGNoaWxkcmVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIC8qKlxuICAgKiBBcHBsaWVkIHRvIHRoZSBhcHAgYmFyJ3Mgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgY2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIFRoZSBjbGFzc25hbWUgb2YgdGhlIGljb24gb24gdGhlIGxlZnQgb2YgdGhlIGFwcCBiYXIuXG4gICAqIElmIHlvdSBhcmUgdXNpbmcgYSBzdHlsZXNoZWV0IGZvciB5b3VyIGljb25zLCBlbnRlciB0aGUgY2xhc3MgbmFtZSBmb3IgdGhlIGljb24gdG8gYmUgdXNlZCBoZXJlLlxuICAgKi9cbiAgaWNvbkNsYXNzTmFtZUxlZnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogU2ltaWxpYXIgdG8gdGhlIGljb25DbGFzc05hbWVMZWZ0IHByb3AgZXhjZXB0IHRoYXRcbiAgICogaXQgYXBwbGllcyB0byB0aGUgaWNvbiBkaXNwbGF5ZWQgb24gdGhlIHJpZ2h0IG9mIHRoZSBhcHAgYmFyLlxuICAgKi9cbiAgaWNvbkNsYXNzTmFtZVJpZ2h0OiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIFRoZSBjdXN0b20gZWxlbWVudCB0byBiZSBkaXNwbGF5ZWQgb24gdGhlIGxlZnQgc2lkZSBvZiB0aGVcbiAgICogYXBwIGJhciBzdWNoIGFzIGFuIFN2Z0ljb24uXG4gICAqL1xuICBpY29uRWxlbWVudExlZnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZWxlbWVudCxcbiAgLyoqXG4gICAqIFNpbWlsaWFyIHRvIHRoZSBpY29uRWxlbWVudExlZnQgcHJvcCBleGNlcHQgdGhhdCB0aGlzIGVsZW1lbnQgaXMgZGlzcGxheWVkIG9uIHRoZSByaWdodCBvZiB0aGUgYXBwIGJhci5cbiAgICovXG4gIGljb25FbGVtZW50UmlnaHQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZWxlbWVudCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBlbGVtZW50IGRpc3BsYXllZCBvbiB0aGUgbGVmdCBzaWRlIG9mIHRoZSBhcHAgYmFyLlxuICAgKi9cbiAgaWNvblN0eWxlTGVmdDogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgZWxlbWVudCBkaXNwbGF5ZWQgb24gdGhlIHJpZ2h0IHNpZGUgb2YgdGhlIGFwcCBiYXIuXG4gICAqL1xuICBpY29uU3R5bGVSaWdodDogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmdW5jdGlvbiBmb3Igd2hlbiB0aGUgbGVmdCBpY29uIGlzIHNlbGVjdGVkIHZpYSBhIHRvdWNoIHRhcC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IFRvdWNoVGFwIGV2ZW50IHRhcmdldGluZyB0aGUgbGVmdCBgSWNvbkJ1dHRvbmAuXG4gICAqL1xuICBvbkxlZnRJY29uQnV0dG9uVG91Y2hUYXA6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZvciB3aGVuIHRoZSByaWdodCBpY29uIGlzIHNlbGVjdGVkIHZpYSBhIHRvdWNoIHRhcC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IFRvdWNoVGFwIGV2ZW50IHRhcmdldGluZyB0aGUgcmlnaHQgYEljb25CdXR0b25gLlxuICAgKi9cbiAgb25SaWdodEljb25CdXR0b25Ub3VjaFRhcDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gZm9yIHdoZW4gdGhlIHRpdGxlIHRleHQgaXMgc2VsZWN0ZWQgdmlhIGEgdG91Y2ggdGFwLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgVG91Y2hUYXAgZXZlbnQgdGFyZ2V0aW5nIHRoZSBgdGl0bGVgIG5vZGUuXG4gICAqL1xuICBvblRpdGxlVG91Y2hUYXA6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hldGhlciBvciBub3QgdG8gZGlzcGxheSB0aGUgTWVudSBpY29uIG5leHQgdG8gdGhlIHRpdGxlLlxuICAgKiBTZXR0aW5nIHRoaXMgcHJvcCB0byBmYWxzZSB3aWxsIGhpZGUgdGhlIGljb24uXG4gICAqL1xuICBzaG93TWVudUljb25CdXR0b246IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBUaGUgdGl0bGUgdG8gZGlzcGxheSBvbiB0aGUgYXBwIGJhci5cbiAgICovXG4gIHRpdGxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgYXBwIGJhcidzIHRpdGxlIGVsZW1lbnQuXG4gICAqL1xuICB0aXRsZVN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIFRoZSB6RGVwdGggb2YgdGhlIGNvbXBvbmVudC5cbiAgICogVGhlIHNoYWRvdyBvZiB0aGUgYXBwIGJhciBpcyBhbHNvIGRlcGVuZGVudCBvbiB0aGlzIHByb3BlcnR5LlxuICAgKi9cbiAgekRlcHRoOiBfcHJvcFR5cGVzNC5kZWZhdWx0LnpEZXB0aFxufSA6IHt9O1xuZXhwb3J0cy5kZWZhdWx0ID0gQXBwQmFyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9BcHBCYXIvQXBwQmFyLmpzXG4vLyBtb2R1bGUgaWQgPSAxNDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB1bmRlZmluZWQ7XG5cbnZhciBfQXBwQmFyID0gcmVxdWlyZSgnLi9BcHBCYXInKTtcblxudmFyIF9BcHBCYXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQXBwQmFyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZXhwb3J0cy5kZWZhdWx0ID0gX0FwcEJhcjIuZGVmYXVsdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWF0ZXJpYWwtdWkvQXBwQmFyL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxNDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvZXh0ZW5kcycpO1xuXG52YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllcycpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMik7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YnKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2syID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrJyk7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTtcblxudmFyIF9jcmVhdGVDbGFzczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MnKTtcblxudmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4nKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblxudmFyIF9pbmhlcml0czIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMnKTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG52YXIgX3NpbXBsZUFzc2lnbiA9IHJlcXVpcmUoJ3NpbXBsZS1hc3NpZ24nKTtcblxudmFyIF9zaW1wbGVBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2ltcGxlQXNzaWduKTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxudmFyIF9FbmhhbmNlZFN3aXRjaCA9IHJlcXVpcmUoJy4uL2ludGVybmFsL0VuaGFuY2VkU3dpdGNoJyk7XG5cbnZhciBfRW5oYW5jZWRTd2l0Y2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRW5oYW5jZWRTd2l0Y2gpO1xuXG52YXIgX3RyYW5zaXRpb25zID0gcmVxdWlyZSgnLi4vc3R5bGVzL3RyYW5zaXRpb25zJyk7XG5cbnZhciBfdHJhbnNpdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHJhbnNpdGlvbnMpO1xuXG52YXIgX2NoZWNrQm94T3V0bGluZUJsYW5rID0gcmVxdWlyZSgnLi4vc3ZnLWljb25zL3RvZ2dsZS9jaGVjay1ib3gtb3V0bGluZS1ibGFuaycpO1xuXG52YXIgX2NoZWNrQm94T3V0bGluZUJsYW5rMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NoZWNrQm94T3V0bGluZUJsYW5rKTtcblxudmFyIF9jaGVja0JveCA9IHJlcXVpcmUoJy4uL3N2Zy1pY29ucy90b2dnbGUvY2hlY2stYm94Jyk7XG5cbnZhciBfY2hlY2tCb3gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hlY2tCb3gpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBnZXRTdHlsZXMocHJvcHMsIGNvbnRleHQpIHtcbiAgdmFyIGNoZWNrYm94ID0gY29udGV4dC5tdWlUaGVtZS5jaGVja2JveDtcblxuICB2YXIgY2hlY2tib3hTaXplID0gMjQ7XG5cbiAgcmV0dXJuIHtcbiAgICBpY29uOiB7XG4gICAgICBoZWlnaHQ6IGNoZWNrYm94U2l6ZSxcbiAgICAgIHdpZHRoOiBjaGVja2JveFNpemVcbiAgICB9LFxuICAgIGNoZWNrOiB7XG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIG9wYWNpdHk6IDAsXG4gICAgICB0cmFuc2Zvcm06ICdzY2FsZSgwKScsXG4gICAgICB0cmFuc2l0aW9uT3JpZ2luOiAnNTAlIDUwJScsXG4gICAgICB0cmFuc2l0aW9uOiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnNDUwbXMnLCAnb3BhY2l0eScsICcwbXMnKSArICcsICcgKyBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnMG1zJywgJ3RyYW5zZm9ybScsICc0NTBtcycpLFxuICAgICAgZmlsbDogY2hlY2tib3guY2hlY2tlZENvbG9yXG4gICAgfSxcbiAgICBjaGVja1doZW5Td2l0Y2hlZDoge1xuICAgICAgb3BhY2l0eTogMSxcbiAgICAgIHRyYW5zZm9ybTogJ3NjYWxlKDEpJyxcbiAgICAgIHRyYW5zaXRpb246IF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KCcwbXMnLCAnb3BhY2l0eScsICcwbXMnKSArICcsICcgKyBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnODAwbXMnLCAndHJhbnNmb3JtJywgJzBtcycpXG4gICAgfSxcbiAgICBjaGVja1doZW5EaXNhYmxlZDoge1xuICAgICAgZmlsbDogY2hlY2tib3guZGlzYWJsZWRDb2xvclxuICAgIH0sXG4gICAgYm94OiB7XG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIG9wYWNpdHk6IDEsXG4gICAgICBmaWxsOiBjaGVja2JveC5ib3hDb2xvcixcbiAgICAgIHRyYW5zaXRpb246IF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KCcxMDAwbXMnLCAnb3BhY2l0eScsICcyMDBtcycpXG4gICAgfSxcbiAgICBib3hXaGVuU3dpdGNoZWQ6IHtcbiAgICAgIG9wYWNpdHk6IDAsXG4gICAgICB0cmFuc2l0aW9uOiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnNjUwbXMnLCAnb3BhY2l0eScsICcxNTBtcycpLFxuICAgICAgZmlsbDogY2hlY2tib3guY2hlY2tlZENvbG9yXG4gICAgfSxcbiAgICBib3hXaGVuRGlzYWJsZWQ6IHtcbiAgICAgIGZpbGw6IHByb3BzLmNoZWNrZWQgPyAndHJhbnNwYXJlbnQnIDogY2hlY2tib3guZGlzYWJsZWRDb2xvclxuICAgIH0sXG4gICAgbGFiZWw6IHtcbiAgICAgIGNvbG9yOiBwcm9wcy5kaXNhYmxlZCA/IGNoZWNrYm94LmxhYmVsRGlzYWJsZWRDb2xvciA6IGNoZWNrYm94LmxhYmVsQ29sb3JcbiAgICB9XG4gIH07XG59XG5cbnZhciBDaGVja2JveCA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKENoZWNrYm94LCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBDaGVja2JveCgpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBDaGVja2JveCk7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKF9yZWYgPSBDaGVja2JveC5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoQ2hlY2tib3gpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHN3aXRjaGVkOiBmYWxzZVxuICAgIH0sIF90aGlzLmhhbmRsZVN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKG5ld1N3aXRjaGVkKSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHN3aXRjaGVkOiBuZXdTd2l0Y2hlZFxuICAgICAgfSk7XG4gICAgfSwgX3RoaXMuaGFuZGxlQ2hlY2sgPSBmdW5jdGlvbiAoZXZlbnQsIGlzSW5wdXRDaGVja2VkKSB7XG4gICAgICBpZiAoX3RoaXMucHJvcHMub25DaGVjaykge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbkNoZWNrKGV2ZW50LCBpc0lucHV0Q2hlY2tlZCk7XG4gICAgICB9XG4gICAgfSwgX3RlbXApLCAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKENoZWNrYm94LCBbe1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGNoZWNrZWQgPSBfcHJvcHMuY2hlY2tlZCxcbiAgICAgICAgICBkZWZhdWx0Q2hlY2tlZCA9IF9wcm9wcy5kZWZhdWx0Q2hlY2tlZCxcbiAgICAgICAgICB2YWx1ZUxpbmsgPSBfcHJvcHMudmFsdWVMaW5rO1xuXG5cbiAgICAgIGlmIChjaGVja2VkIHx8IGRlZmF1bHRDaGVja2VkIHx8IHZhbHVlTGluayAmJiB2YWx1ZUxpbmsudmFsdWUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgc3dpdGNoZWQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5jaGVja2VkICE9PSBuZXh0UHJvcHMuY2hlY2tlZCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBzd2l0Y2hlZDogbmV4dFByb3BzLmNoZWNrZWRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnaXNDaGVja2VkJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNDaGVja2VkKCkge1xuICAgICAgcmV0dXJuIHRoaXMucmVmcy5lbmhhbmNlZFN3aXRjaC5pc1N3aXRjaGVkKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2V0Q2hlY2tlZCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldENoZWNrZWQobmV3Q2hlY2tlZFZhbHVlKSB7XG4gICAgICB0aGlzLnJlZnMuZW5oYW5jZWRTd2l0Y2guc2V0U3dpdGNoZWQobmV3Q2hlY2tlZFZhbHVlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3Byb3BzMiA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgaWNvblN0eWxlID0gX3Byb3BzMi5pY29uU3R5bGUsXG4gICAgICAgICAgb25DaGVjayA9IF9wcm9wczIub25DaGVjayxcbiAgICAgICAgICBjaGVja2VkSWNvbiA9IF9wcm9wczIuY2hlY2tlZEljb24sXG4gICAgICAgICAgdW5jaGVja2VkSWNvbiA9IF9wcm9wczIudW5jaGVja2VkSWNvbixcbiAgICAgICAgICBvdGhlciA9ICgwLCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzLmRlZmF1bHQpKF9wcm9wczIsIFsnaWNvblN0eWxlJywgJ29uQ2hlY2snLCAnY2hlY2tlZEljb24nLCAndW5jaGVja2VkSWNvbiddKTtcblxuICAgICAgdmFyIHN0eWxlcyA9IGdldFN0eWxlcyh0aGlzLnByb3BzLCB0aGlzLmNvbnRleHQpO1xuICAgICAgdmFyIGJveFN0eWxlcyA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMuYm94LCB0aGlzLnN0YXRlLnN3aXRjaGVkICYmIHN0eWxlcy5ib3hXaGVuU3dpdGNoZWQsIGljb25TdHlsZSwgdGhpcy5wcm9wcy5kaXNhYmxlZCAmJiBzdHlsZXMuYm94V2hlbkRpc2FibGVkKTtcbiAgICAgIHZhciBjaGVja1N0eWxlcyA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMuY2hlY2ssIHRoaXMuc3RhdGUuc3dpdGNoZWQgJiYgc3R5bGVzLmNoZWNrV2hlblN3aXRjaGVkLCBpY29uU3R5bGUsIHRoaXMucHJvcHMuZGlzYWJsZWQgJiYgc3R5bGVzLmNoZWNrV2hlbkRpc2FibGVkKTtcblxuICAgICAgdmFyIGNoZWNrZWRFbGVtZW50ID0gY2hlY2tlZEljb24gPyBfcmVhY3QyLmRlZmF1bHQuY2xvbmVFbGVtZW50KGNoZWNrZWRJY29uLCB7XG4gICAgICAgIHN0eWxlOiAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoY2hlY2tTdHlsZXMsIGNoZWNrZWRJY29uLnByb3BzLnN0eWxlKVxuICAgICAgfSkgOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY2hlY2tCb3gyLmRlZmF1bHQsIHtcbiAgICAgICAgc3R5bGU6IGNoZWNrU3R5bGVzXG4gICAgICB9KTtcblxuICAgICAgdmFyIHVuQ2hlY2tlZEVsZW1lbnQgPSB1bmNoZWNrZWRJY29uID8gX3JlYWN0Mi5kZWZhdWx0LmNsb25lRWxlbWVudCh1bmNoZWNrZWRJY29uLCB7XG4gICAgICAgIHN0eWxlOiAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoYm94U3R5bGVzLCB1bmNoZWNrZWRJY29uLnByb3BzLnN0eWxlKVxuICAgICAgfSkgOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY2hlY2tCb3hPdXRsaW5lQmxhbmsyLmRlZmF1bHQsIHtcbiAgICAgICAgc3R5bGU6IGJveFN0eWxlc1xuICAgICAgfSk7XG5cbiAgICAgIHZhciBjaGVja2JveEVsZW1lbnQgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIG51bGwsXG4gICAgICAgIHVuQ2hlY2tlZEVsZW1lbnQsXG4gICAgICAgIGNoZWNrZWRFbGVtZW50XG4gICAgICApO1xuXG4gICAgICB2YXIgcmlwcGxlQ29sb3IgPSB0aGlzLnN0YXRlLnN3aXRjaGVkID8gY2hlY2tTdHlsZXMuZmlsbCA6IGJveFN0eWxlcy5maWxsO1xuICAgICAgdmFyIG1lcmdlZEljb25TdHlsZSA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMuaWNvbiwgaWNvblN0eWxlKTtcblxuICAgICAgdmFyIGxhYmVsU3R5bGUgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLmxhYmVsLCB0aGlzLnByb3BzLmxhYmVsU3R5bGUpO1xuXG4gICAgICB2YXIgZW5oYW5jZWRTd2l0Y2hQcm9wcyA9IHtcbiAgICAgICAgcmVmOiAnZW5oYW5jZWRTd2l0Y2gnLFxuICAgICAgICBpbnB1dFR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgIHN3aXRjaGVkOiB0aGlzLnN0YXRlLnN3aXRjaGVkLFxuICAgICAgICBzd2l0Y2hFbGVtZW50OiBjaGVja2JveEVsZW1lbnQsXG4gICAgICAgIHJpcHBsZUNvbG9yOiByaXBwbGVDb2xvcixcbiAgICAgICAgaWNvblN0eWxlOiBtZXJnZWRJY29uU3R5bGUsXG4gICAgICAgIG9uU3dpdGNoOiB0aGlzLmhhbmRsZUNoZWNrLFxuICAgICAgICBsYWJlbFN0eWxlOiBsYWJlbFN0eWxlLFxuICAgICAgICBvblBhcmVudFNob3VsZFVwZGF0ZTogdGhpcy5oYW5kbGVTdGF0ZUNoYW5nZSxcbiAgICAgICAgbGFiZWxQb3NpdGlvbjogdGhpcy5wcm9wcy5sYWJlbFBvc2l0aW9uXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0VuaGFuY2VkU3dpdGNoMi5kZWZhdWx0LCAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBvdGhlciwgZW5oYW5jZWRTd2l0Y2hQcm9wcykpO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gQ2hlY2tib3g7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5DaGVja2JveC5kZWZhdWx0UHJvcHMgPSB7XG4gIGxhYmVsUG9zaXRpb246ICdyaWdodCcsXG4gIGRpc2FibGVkOiBmYWxzZVxufTtcbkNoZWNrYm94LmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5DaGVja2JveC5wcm9wVHlwZXMgPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB7XG4gIC8qKlxuICAgKiBDaGVja2JveCBpcyBjaGVja2VkIGlmIHRydWUuXG4gICAqL1xuICBjaGVja2VkOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBUaGUgU3ZnSWNvbiB0byB1c2UgZm9yIHRoZSBjaGVja2VkIHN0YXRlLlxuICAgKiBUaGlzIGlzIHVzZWZ1bCB0byBjcmVhdGUgaWNvbiB0b2dnbGVzLlxuICAgKi9cbiAgY2hlY2tlZEljb246IF9wcm9wVHlwZXMyLmRlZmF1bHQuZWxlbWVudCxcbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IHN0YXRlIG9mIG91ciBjaGVja2JveCBjb21wb25lbnQuXG4gICAqICoqV2FybmluZzoqKiBUaGlzIGNhbm5vdCBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggYGNoZWNrZWRgLlxuICAgKiBEZWNpZGUgYmV0d2VlbiB1c2luZyBhIGNvbnRyb2xsZWQgb3IgdW5jb250cm9sbGVkIGlucHV0IGVsZW1lbnQgYW5kIHJlbW92ZSBvbmUgb2YgdGhlc2UgcHJvcHMuXG4gICAqIE1vcmUgaW5mbzogaHR0cHM6Ly9mYi5tZS9yZWFjdC1jb250cm9sbGVkLWNvbXBvbmVudHNcbiAgICovXG4gIGRlZmF1bHRDaGVja2VkOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBEaXNhYmxlZCBpZiB0cnVlLlxuICAgKi9cbiAgZGlzYWJsZWQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlcyB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgaWNvbiBlbGVtZW50LlxuICAgKi9cbiAgaWNvblN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlcyB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICovXG4gIGlucHV0U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogV2hlcmUgdGhlIGxhYmVsIHdpbGwgYmUgcGxhY2VkIG5leHQgdG8gdGhlIGNoZWNrYm94LlxuICAgKi9cbiAgbGFiZWxQb3NpdGlvbjogX3Byb3BUeXBlczIuZGVmYXVsdC5vbmVPZihbJ2xlZnQnLCAncmlnaHQnXSksXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIENoZWNrYm94IGVsZW1lbnQgbGFiZWwuXG4gICAqL1xuICBsYWJlbFN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgaXMgZmlyZWQgd2hlbiB0aGUgY2hlY2tib3ggaXMgY2hlY2tlZC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IGBjaGFuZ2VgIGV2ZW50IHRhcmdldGluZyB0aGUgdW5kZXJseWluZyBjaGVja2JveCBgaW5wdXRgLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzSW5wdXRDaGVja2VkIFRoZSBgY2hlY2tlZGAgdmFsdWUgb2YgdGhlIHVuZGVybHlpbmcgY2hlY2tib3ggYGlucHV0YC5cbiAgICovXG4gIG9uQ2hlY2s6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBUaGUgU3ZnSWNvbiB0byB1c2UgZm9yIHRoZSB1bmNoZWNrZWQgc3RhdGUuXG4gICAqIFRoaXMgaXMgdXNlZnVsIHRvIGNyZWF0ZSBpY29uIHRvZ2dsZXMuXG4gICAqL1xuICB1bmNoZWNrZWRJY29uOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmVsZW1lbnQsXG4gIC8qKlxuICAgKiBWYWx1ZUxpbmsgZm9yIHdoZW4gdXNpbmcgY29udHJvbGxlZCBjaGVja2JveC5cbiAgICovXG4gIHZhbHVlTGluazogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3Rcbn0gOiB7fTtcbmV4cG9ydHMuZGVmYXVsdCA9IENoZWNrYm94O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9DaGVja2JveC9DaGVja2JveC5qc1xuLy8gbW9kdWxlIGlkID0gMTQ1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAyIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2V4dGVuZHMnKTtcblxudmFyIF9leHRlbmRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4dGVuZHMyKTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvb2JqZWN0V2l0aG91dFByb3BlcnRpZXMnKTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RXaXRob3V0UHJvcGVydGllczIpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mJyk7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjaycpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7XG5cbnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzJyk7XG5cbnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuJyk7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7XG5cbnZhciBfaW5oZXJpdHMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzJyk7XG5cbnZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTtcblxudmFyIF9zaW1wbGVBc3NpZ24gPSByZXF1aXJlKCdzaW1wbGUtYXNzaWduJyk7XG5cbnZhciBfc2ltcGxlQXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NpbXBsZUFzc2lnbik7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbnZhciBfcmVhY3REb20gPSByZXF1aXJlKCdyZWFjdC1kb20nKTtcblxudmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cbnZhciBfcmVhY3RFdmVudExpc3RlbmVyID0gcmVxdWlyZSgncmVhY3QtZXZlbnQtbGlzdGVuZXInKTtcblxudmFyIF9yZWFjdEV2ZW50TGlzdGVuZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3RFdmVudExpc3RlbmVyKTtcblxudmFyIF9rZXljb2RlID0gcmVxdWlyZSgna2V5Y29kZScpO1xuXG52YXIgX2tleWNvZGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5Y29kZSk7XG5cbnZhciBfdHJhbnNpdGlvbnMgPSByZXF1aXJlKCcuLi9zdHlsZXMvdHJhbnNpdGlvbnMnKTtcblxudmFyIF90cmFuc2l0aW9uczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90cmFuc2l0aW9ucyk7XG5cbnZhciBfT3ZlcmxheSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL092ZXJsYXknKTtcblxudmFyIF9PdmVybGF5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX092ZXJsYXkpO1xuXG52YXIgX1JlbmRlclRvTGF5ZXIgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9SZW5kZXJUb0xheWVyJyk7XG5cbnZhciBfUmVuZGVyVG9MYXllcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9SZW5kZXJUb0xheWVyKTtcblxudmFyIF9QYXBlciA9IHJlcXVpcmUoJy4uL1BhcGVyJyk7XG5cbnZhciBfUGFwZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUGFwZXIpO1xuXG52YXIgX1RyYW5zaXRpb25Hcm91cCA9IHJlcXVpcmUoJ3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvVHJhbnNpdGlvbkdyb3VwJyk7XG5cbnZhciBfVHJhbnNpdGlvbkdyb3VwMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1RyYW5zaXRpb25Hcm91cCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBUcmFuc2l0aW9uSXRlbSA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKFRyYW5zaXRpb25JdGVtLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBUcmFuc2l0aW9uSXRlbSgpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBUcmFuc2l0aW9uSXRlbSk7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKF9yZWYgPSBUcmFuc2l0aW9uSXRlbS5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoVHJhbnNpdGlvbkl0ZW0pKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHN0eWxlOiB7fVxuICAgIH0sIF90ZW1wKSwgKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KShfdGhpcywgX3JldCk7XG4gIH1cblxuICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShUcmFuc2l0aW9uSXRlbSwgW3tcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsVW5tb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZW50ZXJUaW1lb3V0KTtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmxlYXZlVGltZW91dCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbEVudGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbEVudGVyKGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLmNvbXBvbmVudFdpbGxBcHBlYXIoY2FsbGJhY2spO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxBcHBlYXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsQXBwZWFyKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgc3BhY2luZyA9IHRoaXMuY29udGV4dC5tdWlUaGVtZS5iYXNlVGhlbWUuc3BhY2luZztcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoMCwgJyArIHNwYWNpbmcuZGVza3RvcEtleWxpbmVJbmNyZW1lbnQgKyAncHgpJ1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5lbnRlclRpbWVvdXQgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCA0NTApOyAvLyBtYXRjaGVzIHRyYW5zaXRpb24gZHVyYXRpb25cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsTGVhdmUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTGVhdmUoY2FsbGJhY2spIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBzdHlsZToge1xuICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlKDAsIDApJ1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5sZWF2ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCA0NTApOyAvLyBtYXRjaGVzIHRyYW5zaXRpb24gZHVyYXRpb25cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBzdHlsZSA9IF9wcm9wcy5zdHlsZSxcbiAgICAgICAgICBjaGlsZHJlbiA9IF9wcm9wcy5jaGlsZHJlbixcbiAgICAgICAgICBvdGhlciA9ICgwLCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzLmRlZmF1bHQpKF9wcm9wcywgWydzdHlsZScsICdjaGlsZHJlbiddKTtcbiAgICAgIHZhciBwcmVwYXJlU3R5bGVzID0gdGhpcy5jb250ZXh0Lm11aVRoZW1lLnByZXBhcmVTdHlsZXM7XG5cblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgKDAsIF9leHRlbmRzMy5kZWZhdWx0KSh7fSwgb3RoZXIsIHsgc3R5bGU6IHByZXBhcmVTdHlsZXMoKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCB0aGlzLnN0YXRlLnN0eWxlLCBzdHlsZSkpIH0pLFxuICAgICAgICBjaGlsZHJlblxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIFRyYW5zaXRpb25JdGVtO1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuVHJhbnNpdGlvbkl0ZW0uY29udGV4dFR5cGVzID0ge1xuICBtdWlUaGVtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QuaXNSZXF1aXJlZFxufTtcblRyYW5zaXRpb25JdGVtLnByb3BUeXBlcyA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHtcbiAgY2hpbGRyZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0XG59IDoge307XG5cblxuZnVuY3Rpb24gZ2V0U3R5bGVzKHByb3BzLCBjb250ZXh0KSB7XG4gIHZhciBhdXRvU2Nyb2xsQm9keUNvbnRlbnQgPSBwcm9wcy5hdXRvU2Nyb2xsQm9keUNvbnRlbnQsXG4gICAgICBvcGVuID0gcHJvcHMub3BlbjtcbiAgdmFyIF9jb250ZXh0JG11aVRoZW1lID0gY29udGV4dC5tdWlUaGVtZSxcbiAgICAgIF9jb250ZXh0JG11aVRoZW1lJGJhcyA9IF9jb250ZXh0JG11aVRoZW1lLmJhc2VUaGVtZSxcbiAgICAgIHNwYWNpbmcgPSBfY29udGV4dCRtdWlUaGVtZSRiYXMuc3BhY2luZyxcbiAgICAgIHBhbGV0dGUgPSBfY29udGV4dCRtdWlUaGVtZSRiYXMucGFsZXR0ZSxcbiAgICAgIGRpYWxvZyA9IF9jb250ZXh0JG11aVRoZW1lLmRpYWxvZyxcbiAgICAgIHpJbmRleCA9IF9jb250ZXh0JG11aVRoZW1lLnpJbmRleDtcblxuXG4gIHZhciBndXR0ZXIgPSBzcGFjaW5nLmRlc2t0b3BHdXR0ZXI7XG4gIHZhciBib3JkZXJTY3JvbGwgPSAnMXB4IHNvbGlkICcgKyBwYWxldHRlLmJvcmRlckNvbG9yO1xuXG4gIHJldHVybiB7XG4gICAgcm9vdDoge1xuICAgICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgICBib3hTaXppbmc6ICdib3JkZXItYm94JyxcbiAgICAgIFdlYmtpdFRhcEhpZ2hsaWdodENvbG9yOiAncmdiYSgwLDAsMCwwKScsIC8vIFJlbW92ZSBtb2JpbGUgY29sb3IgZmxhc2hpbmcgKGRlcHJlY2F0ZWQpXG4gICAgICB6SW5kZXg6IHpJbmRleC5kaWFsb2csXG4gICAgICB0b3A6IDAsXG4gICAgICBsZWZ0OiBvcGVuID8gMCA6IC0xMDAwMCxcbiAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgIHRyYW5zaXRpb246IG9wZW4gPyBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnMG1zJywgJ2xlZnQnLCAnMG1zJykgOiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnMG1zJywgJ2xlZnQnLCAnNDUwbXMnKVxuICAgIH0sXG4gICAgY29udGVudDoge1xuICAgICAgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsXG4gICAgICBXZWJraXRUYXBIaWdobGlnaHRDb2xvcjogJ3JnYmEoMCwwLDAsMCknLCAvLyBSZW1vdmUgbW9iaWxlIGNvbG9yIGZsYXNoaW5nIChkZXByZWNhdGVkKVxuICAgICAgdHJhbnNpdGlvbjogX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoKSxcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgd2lkdGg6ICc3NSUnLFxuICAgICAgbWF4V2lkdGg6IHNwYWNpbmcuZGVza3RvcEtleWxpbmVJbmNyZW1lbnQgKiAxMixcbiAgICAgIG1hcmdpbjogJzAgYXV0bycsXG4gICAgICB6SW5kZXg6IHpJbmRleC5kaWFsb2dcbiAgICB9LFxuICAgIGFjdGlvbnNDb250YWluZXI6IHtcbiAgICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnLFxuICAgICAgV2Via2l0VGFwSGlnaGxpZ2h0Q29sb3I6ICdyZ2JhKDAsMCwwLDApJywgLy8gUmVtb3ZlIG1vYmlsZSBjb2xvciBmbGFzaGluZyAoZGVwcmVjYXRlZClcbiAgICAgIHBhZGRpbmc6IDgsXG4gICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgdGV4dEFsaWduOiAncmlnaHQnLFxuICAgICAgbWFyZ2luVG9wOiBhdXRvU2Nyb2xsQm9keUNvbnRlbnQgPyAtMSA6IDBcbiAgICB9LFxuICAgIG92ZXJsYXk6IHtcbiAgICAgIHpJbmRleDogekluZGV4LmRpYWxvZ092ZXJsYXlcbiAgICB9LFxuICAgIHRpdGxlOiB7XG4gICAgICBtYXJnaW46IDAsXG4gICAgICBwYWRkaW5nOiBndXR0ZXIgKyAncHggJyArIGd1dHRlciArICdweCAyMHB4ICcgKyBndXR0ZXIgKyAncHgnLFxuICAgICAgY29sb3I6IHBhbGV0dGUudGV4dENvbG9yLFxuICAgICAgZm9udFNpemU6IGRpYWxvZy50aXRsZUZvbnRTaXplLFxuICAgICAgbGluZUhlaWdodDogJzMycHgnLFxuICAgICAgZm9udFdlaWdodDogNDAwLFxuICAgICAgbWFyZ2luQm90dG9tOiBhdXRvU2Nyb2xsQm9keUNvbnRlbnQgPyAtMSA6IDBcbiAgICB9LFxuICAgIGJvZHk6IHtcbiAgICAgIGZvbnRTaXplOiBkaWFsb2cuYm9keUZvbnRTaXplLFxuICAgICAgY29sb3I6IGRpYWxvZy5ib2R5Q29sb3IsXG4gICAgICBwYWRkaW5nOiAocHJvcHMudGl0bGUgPyAwIDogZ3V0dGVyKSArICdweCAnICsgZ3V0dGVyICsgJ3B4ICcgKyBndXR0ZXIgKyAncHgnLFxuICAgICAgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsXG4gICAgICBvdmVyZmxvd1k6IGF1dG9TY3JvbGxCb2R5Q29udGVudCA/ICdhdXRvJyA6ICdoaWRkZW4nLFxuICAgICAgYm9yZGVyVG9wOiBhdXRvU2Nyb2xsQm9keUNvbnRlbnQgPyBib3JkZXJTY3JvbGwgOiAnbm9uZScsXG4gICAgICBib3JkZXJCb3R0b206IGF1dG9TY3JvbGxCb2R5Q29udGVudCA/IGJvcmRlclNjcm9sbCA6ICdub25lJ1xuICAgIH1cbiAgfTtcbn1cblxudmFyIERpYWxvZ0lubGluZSA9IGZ1bmN0aW9uIChfQ29tcG9uZW50Mikge1xuICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShEaWFsb2dJbmxpbmUsIF9Db21wb25lbnQyKTtcblxuICBmdW5jdGlvbiBEaWFsb2dJbmxpbmUoKSB7XG4gICAgdmFyIF9yZWYyO1xuXG4gICAgdmFyIF90ZW1wMiwgX3RoaXMyLCBfcmV0MjtcblxuICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERpYWxvZ0lubGluZSk7XG5cbiAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgYXJnc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0MiA9IChfdGVtcDIgPSAoX3RoaXMyID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoX3JlZjIgPSBEaWFsb2dJbmxpbmUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERpYWxvZ0lubGluZSkpLmNhbGwuYXBwbHkoX3JlZjIsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMyKSwgX3RoaXMyLmhhbmRsZVRvdWNoVGFwT3ZlcmxheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzMi5yZXF1ZXN0Q2xvc2UoZmFsc2UpO1xuICAgIH0sIF90aGlzMi5oYW5kbGVLZXlVcCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKCgwLCBfa2V5Y29kZTIuZGVmYXVsdCkoZXZlbnQpID09PSAnZXNjJykge1xuICAgICAgICBfdGhpczIucmVxdWVzdENsb3NlKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9LCBfdGhpczIuaGFuZGxlUmVzaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMyLnBvc2l0aW9uRGlhbG9nKCk7XG4gICAgfSwgX3RlbXAyKSwgKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KShfdGhpczIsIF9yZXQyKTtcbiAgfVxuXG4gICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKERpYWxvZ0lubGluZSwgW3tcbiAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdGhpcy5wb3NpdGlvbkRpYWxvZygpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudERpZFVwZGF0ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgIHRoaXMucG9zaXRpb25EaWFsb2coKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwb3NpdGlvbkRpYWxvZycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBvc2l0aW9uRGlhbG9nKCkge1xuICAgICAgdmFyIF9wcm9wczIgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGFjdGlvbnMgPSBfcHJvcHMyLmFjdGlvbnMsXG4gICAgICAgICAgYXV0b0RldGVjdFdpbmRvd0hlaWdodCA9IF9wcm9wczIuYXV0b0RldGVjdFdpbmRvd0hlaWdodCxcbiAgICAgICAgICBhdXRvU2Nyb2xsQm9keUNvbnRlbnQgPSBfcHJvcHMyLmF1dG9TY3JvbGxCb2R5Q29udGVudCxcbiAgICAgICAgICBib2R5U3R5bGUgPSBfcHJvcHMyLmJvZHlTdHlsZSxcbiAgICAgICAgICBvcGVuID0gX3Byb3BzMi5vcGVuLFxuICAgICAgICAgIHJlcG9zaXRpb25PblVwZGF0ZSA9IF9wcm9wczIucmVwb3NpdGlvbk9uVXBkYXRlLFxuICAgICAgICAgIHRpdGxlID0gX3Byb3BzMi50aXRsZTtcblxuXG4gICAgICBpZiAoIW9wZW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2xpZW50SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgfHwgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQ7XG4gICAgICB2YXIgY29udGFpbmVyID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpO1xuICAgICAgdmFyIGRpYWxvZ1dpbmRvdyA9IF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzLnJlZnMuZGlhbG9nV2luZG93KTtcbiAgICAgIHZhciBkaWFsb2dDb250ZW50ID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMucmVmcy5kaWFsb2dDb250ZW50KTtcbiAgICAgIHZhciBtaW5QYWRkaW5nVG9wID0gMTY7XG5cbiAgICAgIC8vIFJlc2V0IHRoZSBoZWlnaHQgaW4gY2FzZSB0aGUgd2luZG93IHdhcyByZXNpemVkLlxuICAgICAgZGlhbG9nV2luZG93LnN0eWxlLmhlaWdodCA9ICcnO1xuICAgICAgZGlhbG9nQ29udGVudC5zdHlsZS5oZWlnaHQgPSAnJztcblxuICAgICAgdmFyIGRpYWxvZ1dpbmRvd0hlaWdodCA9IGRpYWxvZ1dpbmRvdy5vZmZzZXRIZWlnaHQ7XG4gICAgICB2YXIgcGFkZGluZ1RvcCA9IChjbGllbnRIZWlnaHQgLSBkaWFsb2dXaW5kb3dIZWlnaHQpIC8gMiAtIDY0O1xuICAgICAgaWYgKHBhZGRpbmdUb3AgPCBtaW5QYWRkaW5nVG9wKSBwYWRkaW5nVG9wID0gbWluUGFkZGluZ1RvcDtcblxuICAgICAgLy8gVmVydGljYWxseSBjZW50ZXIgdGhlIGRpYWxvZyB3aW5kb3csIGJ1dCBtYWtlIHN1cmUgaXQgZG9lc24ndFxuICAgICAgLy8gdHJhbnNpdGlvbiB0byB0aGF0IHBvc2l0aW9uLlxuICAgICAgaWYgKHJlcG9zaXRpb25PblVwZGF0ZSB8fCAhY29udGFpbmVyLnN0eWxlLnBhZGRpbmdUb3ApIHtcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnBhZGRpbmdUb3AgPSBwYWRkaW5nVG9wICsgJ3B4JztcbiAgICAgIH1cblxuICAgICAgLy8gRm9yY2UgYSBoZWlnaHQgaWYgdGhlIGRpYWxvZyBpcyB0YWxsZXIgdGhhbiBjbGllbnRIZWlnaHRcbiAgICAgIGlmIChhdXRvRGV0ZWN0V2luZG93SGVpZ2h0IHx8IGF1dG9TY3JvbGxCb2R5Q29udGVudCkge1xuICAgICAgICB2YXIgc3R5bGVzID0gZ2V0U3R5bGVzKHRoaXMucHJvcHMsIHRoaXMuY29udGV4dCk7XG4gICAgICAgIHN0eWxlcy5ib2R5ID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5ib2R5LCBib2R5U3R5bGUpO1xuICAgICAgICB2YXIgbWF4RGlhbG9nQ29udGVudEhlaWdodCA9IGNsaWVudEhlaWdodCAtIDIgKiA2NDtcblxuICAgICAgICBpZiAodGl0bGUpIG1heERpYWxvZ0NvbnRlbnRIZWlnaHQgLT0gZGlhbG9nQ29udGVudC5wcmV2aW91c1NpYmxpbmcub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgIGlmIChfcmVhY3QyLmRlZmF1bHQuQ2hpbGRyZW4uY291bnQoYWN0aW9ucykpIHtcbiAgICAgICAgICBtYXhEaWFsb2dDb250ZW50SGVpZ2h0IC09IGRpYWxvZ0NvbnRlbnQubmV4dFNpYmxpbmcub2Zmc2V0SGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgZGlhbG9nQ29udGVudC5zdHlsZS5tYXhIZWlnaHQgPSBtYXhEaWFsb2dDb250ZW50SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgaWYgKG1heERpYWxvZ0NvbnRlbnRIZWlnaHQgPiBkaWFsb2dXaW5kb3dIZWlnaHQpIHtcbiAgICAgICAgICBkaWFsb2dDb250ZW50LnN0eWxlLmJvcmRlckJvdHRvbSA9ICdub25lJztcbiAgICAgICAgICBkaWFsb2dDb250ZW50LnN0eWxlLmJvcmRlclRvcCA9ICdub25lJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlcXVlc3RDbG9zZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlcXVlc3RDbG9zZShidXR0b25DbGlja2VkKSB7XG4gICAgICBpZiAoIWJ1dHRvbkNsaWNrZWQgJiYgdGhpcy5wcm9wcy5tb2RhbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLm9uUmVxdWVzdENsb3NlKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25SZXF1ZXN0Q2xvc2UoISFidXR0b25DbGlja2VkKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3Byb3BzMyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgYWN0aW9ucyA9IF9wcm9wczMuYWN0aW9ucyxcbiAgICAgICAgICBhY3Rpb25zQ29udGFpbmVyQ2xhc3NOYW1lID0gX3Byb3BzMy5hY3Rpb25zQ29udGFpbmVyQ2xhc3NOYW1lLFxuICAgICAgICAgIGFjdGlvbnNDb250YWluZXJTdHlsZSA9IF9wcm9wczMuYWN0aW9uc0NvbnRhaW5lclN0eWxlLFxuICAgICAgICAgIGJvZHlDbGFzc05hbWUgPSBfcHJvcHMzLmJvZHlDbGFzc05hbWUsXG4gICAgICAgICAgYm9keVN0eWxlID0gX3Byb3BzMy5ib2R5U3R5bGUsXG4gICAgICAgICAgY2hpbGRyZW4gPSBfcHJvcHMzLmNoaWxkcmVuLFxuICAgICAgICAgIGNsYXNzTmFtZSA9IF9wcm9wczMuY2xhc3NOYW1lLFxuICAgICAgICAgIGNvbnRlbnRDbGFzc05hbWUgPSBfcHJvcHMzLmNvbnRlbnRDbGFzc05hbWUsXG4gICAgICAgICAgY29udGVudFN0eWxlID0gX3Byb3BzMy5jb250ZW50U3R5bGUsXG4gICAgICAgICAgb3ZlcmxheUNsYXNzTmFtZSA9IF9wcm9wczMub3ZlcmxheUNsYXNzTmFtZSxcbiAgICAgICAgICBvdmVybGF5U3R5bGUgPSBfcHJvcHMzLm92ZXJsYXlTdHlsZSxcbiAgICAgICAgICBvcGVuID0gX3Byb3BzMy5vcGVuLFxuICAgICAgICAgIHBhcGVyQ2xhc3NOYW1lID0gX3Byb3BzMy5wYXBlckNsYXNzTmFtZSxcbiAgICAgICAgICBwYXBlclByb3BzID0gX3Byb3BzMy5wYXBlclByb3BzLFxuICAgICAgICAgIHN0eWxlID0gX3Byb3BzMy5zdHlsZSxcbiAgICAgICAgICB0aXRsZUNsYXNzTmFtZSA9IF9wcm9wczMudGl0bGVDbGFzc05hbWUsXG4gICAgICAgICAgdGl0bGVTdHlsZSA9IF9wcm9wczMudGl0bGVTdHlsZSxcbiAgICAgICAgICB0aXRsZSA9IF9wcm9wczMudGl0bGU7XG4gICAgICB2YXIgcHJlcGFyZVN0eWxlcyA9IHRoaXMuY29udGV4dC5tdWlUaGVtZS5wcmVwYXJlU3R5bGVzO1xuXG4gICAgICB2YXIgc3R5bGVzID0gZ2V0U3R5bGVzKHRoaXMucHJvcHMsIHRoaXMuY29udGV4dCk7XG5cbiAgICAgIHN0eWxlcy5yb290ID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5yb290LCBzdHlsZSk7XG4gICAgICBzdHlsZXMuY29udGVudCA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMuY29udGVudCwgY29udGVudFN0eWxlKTtcbiAgICAgIHN0eWxlcy5ib2R5ID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5ib2R5LCBib2R5U3R5bGUpO1xuICAgICAgc3R5bGVzLmFjdGlvbnNDb250YWluZXIgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLmFjdGlvbnNDb250YWluZXIsIGFjdGlvbnNDb250YWluZXJTdHlsZSk7XG4gICAgICBzdHlsZXMub3ZlcmxheSA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMub3ZlcmxheSwgb3ZlcmxheVN0eWxlKTtcbiAgICAgIHN0eWxlcy50aXRsZSA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMudGl0bGUsIHRpdGxlU3R5bGUpO1xuXG4gICAgICB2YXIgYWN0aW9uc0NvbnRhaW5lciA9IF9yZWFjdDIuZGVmYXVsdC5DaGlsZHJlbi5jb3VudChhY3Rpb25zKSA+IDAgJiYgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IGNsYXNzTmFtZTogYWN0aW9uc0NvbnRhaW5lckNsYXNzTmFtZSwgc3R5bGU6IHByZXBhcmVTdHlsZXMoc3R5bGVzLmFjdGlvbnNDb250YWluZXIpIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5DaGlsZHJlbi50b0FycmF5KGFjdGlvbnMpXG4gICAgICApO1xuXG4gICAgICB2YXIgdGl0bGVFbGVtZW50ID0gdGl0bGU7XG4gICAgICBpZiAoX3JlYWN0Mi5kZWZhdWx0LmlzVmFsaWRFbGVtZW50KHRpdGxlKSkge1xuICAgICAgICB0aXRsZUVsZW1lbnQgPSBfcmVhY3QyLmRlZmF1bHQuY2xvbmVFbGVtZW50KHRpdGxlLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiB0aXRsZS5wcm9wcy5jbGFzc05hbWUgfHwgdGl0bGVDbGFzc05hbWUsXG4gICAgICAgICAgc3R5bGU6IHByZXBhcmVTdHlsZXMoKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy50aXRsZSwgdGl0bGUucHJvcHMuc3R5bGUpKVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRpdGxlID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aXRsZUVsZW1lbnQgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnaDMnLFxuICAgICAgICAgIHsgY2xhc3NOYW1lOiB0aXRsZUNsYXNzTmFtZSwgc3R5bGU6IHByZXBhcmVTdHlsZXMoc3R5bGVzLnRpdGxlKSB9LFxuICAgICAgICAgIHRpdGxlXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgY2xhc3NOYW1lOiBjbGFzc05hbWUsIHN0eWxlOiBwcmVwYXJlU3R5bGVzKHN0eWxlcy5yb290KSB9LFxuICAgICAgICBvcGVuICYmIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdEV2ZW50TGlzdGVuZXIyLmRlZmF1bHQsIHtcbiAgICAgICAgICB0YXJnZXQ6ICd3aW5kb3cnLFxuICAgICAgICAgIG9uS2V5VXA6IHRoaXMuaGFuZGxlS2V5VXAsXG4gICAgICAgICAgb25SZXNpemU6IHRoaXMuaGFuZGxlUmVzaXplXG4gICAgICAgIH0pLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICBfVHJhbnNpdGlvbkdyb3VwMi5kZWZhdWx0LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbXBvbmVudDogJ2RpdicsXG4gICAgICAgICAgICByZWY6ICdkaWFsb2dXaW5kb3cnLFxuICAgICAgICAgICAgdHJhbnNpdGlvbkFwcGVhcjogdHJ1ZSxcbiAgICAgICAgICAgIHRyYW5zaXRpb25BcHBlYXJUaW1lb3V0OiA0NTAsXG4gICAgICAgICAgICB0cmFuc2l0aW9uRW50ZXI6IHRydWUsXG4gICAgICAgICAgICB0cmFuc2l0aW9uRW50ZXJUaW1lb3V0OiA0NTBcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9wZW4gJiYgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBUcmFuc2l0aW9uSXRlbSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjb250ZW50Q2xhc3NOYW1lLFxuICAgICAgICAgICAgICBzdHlsZTogc3R5bGVzLmNvbnRlbnRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgX1BhcGVyMi5kZWZhdWx0LFxuICAgICAgICAgICAgICAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHsgY2xhc3NOYW1lOiBwYXBlckNsYXNzTmFtZSwgekRlcHRoOiA0IH0sIHBhcGVyUHJvcHMpLFxuICAgICAgICAgICAgICB0aXRsZUVsZW1lbnQsXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHJlZjogJ2RpYWxvZ0NvbnRlbnQnLFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBib2R5Q2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICAgc3R5bGU6IHByZXBhcmVTdHlsZXMoc3R5bGVzLmJvZHkpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlblxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBhY3Rpb25zQ29udGFpbmVyXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfT3ZlcmxheTIuZGVmYXVsdCwge1xuICAgICAgICAgIHNob3c6IG9wZW4sXG4gICAgICAgICAgY2xhc3NOYW1lOiBvdmVybGF5Q2xhc3NOYW1lLFxuICAgICAgICAgIHN0eWxlOiBzdHlsZXMub3ZlcmxheSxcbiAgICAgICAgICBvblRvdWNoVGFwOiB0aGlzLmhhbmRsZVRvdWNoVGFwT3ZlcmxheVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIERpYWxvZ0lubGluZTtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbkRpYWxvZ0lubGluZS5jb250ZXh0VHlwZXMgPSB7XG4gIG11aVRoZW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkXG59O1xuRGlhbG9nSW5saW5lLnByb3BUeXBlcyA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHtcbiAgYWN0aW9uczogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICBhY3Rpb25zQ29udGFpbmVyQ2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgYWN0aW9uc0NvbnRhaW5lclN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgYXV0b0RldGVjdFdpbmRvd0hlaWdodDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBhdXRvU2Nyb2xsQm9keUNvbnRlbnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgYm9keUNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGJvZHlTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGNoaWxkcmVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIGNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGNvbnRlbnRDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBjb250ZW50U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBtb2RhbDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBvblJlcXVlc3RDbG9zZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBvcGVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wuaXNSZXF1aXJlZCxcbiAgb3ZlcmxheUNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIG92ZXJsYXlTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIHBhcGVyQ2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgcGFwZXJQcm9wczogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIHJlcG9zaXRpb25PblVwZGF0ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIHRpdGxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIHRpdGxlQ2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgdGl0bGVTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3Rcbn0gOiB7fTtcblxudmFyIERpYWxvZyA9IGZ1bmN0aW9uIChfQ29tcG9uZW50Mykge1xuICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShEaWFsb2csIF9Db21wb25lbnQzKTtcblxuICBmdW5jdGlvbiBEaWFsb2coKSB7XG4gICAgdmFyIF9yZWYzO1xuXG4gICAgdmFyIF90ZW1wMywgX3RoaXMzLCBfcmV0MztcblxuICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERpYWxvZyk7XG5cbiAgICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMyksIF9rZXkzID0gMDsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykge1xuICAgICAgYXJnc1tfa2V5M10gPSBhcmd1bWVudHNbX2tleTNdO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0MyA9IChfdGVtcDMgPSAoX3RoaXMzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoX3JlZjMgPSBEaWFsb2cuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERpYWxvZykpLmNhbGwuYXBwbHkoX3JlZjMsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMzKSwgX3RoaXMzLnJlbmRlckxheWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KERpYWxvZ0lubGluZSwgX3RoaXMzLnByb3BzKTtcbiAgICB9LCBfdGVtcDMpLCAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKF90aGlzMywgX3JldDMpO1xuICB9XG5cbiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRGlhbG9nLCBbe1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfUmVuZGVyVG9MYXllcjIuZGVmYXVsdCwgeyByZW5kZXI6IHRoaXMucmVuZGVyTGF5ZXIsIG9wZW46IHRydWUsIHVzZUxheWVyRm9yQ2xpY2tBd2F5OiBmYWxzZSB9KTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIERpYWxvZztcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbkRpYWxvZy5jb250ZXh0VHlwZXMgPSB7XG4gIG11aVRoZW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkXG59O1xuRGlhbG9nLmRlZmF1bHRQcm9wcyA9IHtcbiAgYXV0b0RldGVjdFdpbmRvd0hlaWdodDogdHJ1ZSxcbiAgYXV0b1Njcm9sbEJvZHlDb250ZW50OiBmYWxzZSxcbiAgbW9kYWw6IGZhbHNlLFxuICByZXBvc2l0aW9uT25VcGRhdGU6IHRydWVcbn07XG5EaWFsb2cucHJvcFR5cGVzID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8ge1xuICAvKipcbiAgICogQWN0aW9uIGJ1dHRvbnMgdG8gZGlzcGxheSBiZWxvdyB0aGUgRGlhbG9nIGNvbnRlbnQgKGBjaGlsZHJlbmApLlxuICAgKiBUaGlzIHByb3BlcnR5IGFjY2VwdHMgZWl0aGVyIGEgUmVhY3QgZWxlbWVudCwgb3IgYW4gYXJyYXkgb2YgUmVhY3QgZWxlbWVudHMuXG4gICAqL1xuICBhY3Rpb25zOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIC8qKlxuICAgKiBUaGUgYGNsYXNzTmFtZWAgdG8gYWRkIHRvIHRoZSBhY3Rpb25zIGNvbnRhaW5lcidzIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIGFjdGlvbnNDb250YWluZXJDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogT3ZlcnJpZGVzIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBhY3Rpb25zIGNvbnRhaW5lcidzIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIGFjdGlvbnNDb250YWluZXJTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBJZiBzZXQgdG8gdHJ1ZSwgdGhlIGhlaWdodCBvZiB0aGUgYERpYWxvZ2Agd2lsbCBiZSBhdXRvIGRldGVjdGVkLiBBIG1heCBoZWlnaHRcbiAgICogd2lsbCBiZSBlbmZvcmNlZCBzbyB0aGF0IHRoZSBjb250ZW50IGRvZXMgbm90IGV4dGVuZCBiZXlvbmQgdGhlIHZpZXdwb3J0LlxuICAgKi9cbiAgYXV0b0RldGVjdFdpbmRvd0hlaWdodDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogSWYgc2V0IHRvIHRydWUsIHRoZSBib2R5IGNvbnRlbnQgb2YgdGhlIGBEaWFsb2dgIHdpbGwgYmUgc2Nyb2xsYWJsZS5cbiAgICovXG4gIGF1dG9TY3JvbGxCb2R5Q29udGVudDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogVGhlIGBjbGFzc05hbWVgIHRvIGFkZCB0byB0aGUgY29udGVudCdzIHJvb3QgZWxlbWVudCB1bmRlciB0aGUgdGl0bGUuXG4gICAqL1xuICBib2R5Q2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIE92ZXJyaWRlcyB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgY29udGVudCdzIHJvb3QgZWxlbWVudCB1bmRlciB0aGUgdGl0bGUuXG4gICAqL1xuICBib2R5U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhlIGNvbnRlbnRzIG9mIHRoZSBgRGlhbG9nYC5cbiAgICovXG4gIGNoaWxkcmVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBjbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogVGhlIGBjbGFzc05hbWVgIHRvIGFkZCB0byB0aGUgY29udGVudCBjb250YWluZXIuXG4gICAqL1xuICBjb250ZW50Q2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIE92ZXJyaWRlcyB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgY29udGVudCBjb250YWluZXIuXG4gICAqL1xuICBjb250ZW50U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogRm9yY2UgdGhlIHVzZXIgdG8gdXNlIG9uZSBvZiB0aGUgYWN0aW9ucyBpbiB0aGUgYERpYWxvZ2AuXG4gICAqIENsaWNraW5nIG91dHNpZGUgdGhlIGBEaWFsb2dgIHdpbGwgbm90IHRyaWdnZXIgdGhlIGBvblJlcXVlc3RDbG9zZWAuXG4gICAqL1xuICBtb2RhbDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogRmlyZWQgd2hlbiB0aGUgYERpYWxvZ2AgaXMgcmVxdWVzdGVkIHRvIGJlIGNsb3NlZCBieSBhIGNsaWNrIG91dHNpZGUgdGhlIGBEaWFsb2dgIG9yIG9uIHRoZSBidXR0b25zLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2x9IGJ1dHRvbkNsaWNrZWQgRGV0ZXJtaW5lcyB3aGV0aGVyIGEgYnV0dG9uIGNsaWNrIHRyaWdnZXJlZCB0aGlzIHJlcXVlc3QuXG4gICAqL1xuICBvblJlcXVlc3RDbG9zZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogQ29udHJvbHMgd2hldGhlciB0aGUgRGlhbG9nIGlzIG9wZW5lZCBvciBub3QuXG4gICAqL1xuICBvcGVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wuaXNSZXF1aXJlZCxcbiAgLyoqXG4gICAqIFRoZSBgY2xhc3NOYW1lYCB0byBhZGQgdG8gdGhlIGBPdmVybGF5YCBjb21wb25lbnQgdGhhdCBpcyByZW5kZXJlZCBiZWhpbmQgdGhlIGBEaWFsb2dgLlxuICAgKi9cbiAgb3ZlcmxheUNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIGBPdmVybGF5YCBjb21wb25lbnQgdGhhdCBpcyByZW5kZXJlZCBiZWhpbmQgdGhlIGBEaWFsb2dgLlxuICAgKi9cbiAgb3ZlcmxheVN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIFRoZSBDU1MgY2xhc3MgbmFtZSBvZiB0aGUgYFBhcGVyYCBlbGVtZW50LlxuICAgKi9cbiAgcGFwZXJDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogUHJvcGVydGllcyBhcHBsaWVkIHRvIHRoZSBgUGFwZXJgIGVsZW1lbnQuXG4gICAqL1xuICBwYXBlclByb3BzOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hldGhlciB0aGUgYERpYWxvZ2Agc2hvdWxkIGJlIHJlcG9zaXRpb25lZCB3aGVuIGl0J3MgY29udGVudHMgYXJlIHVwZGF0ZWQuXG4gICAqL1xuICByZXBvc2l0aW9uT25VcGRhdGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBUaGUgdGl0bGUgdG8gZGlzcGxheSBvbiB0aGUgYERpYWxvZ2AuIENvdWxkIGJlIG51bWJlciwgc3RyaW5nLCBlbGVtZW50IG9yIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlc2UgdHlwZXMuXG4gICAqL1xuICB0aXRsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICAvKipcbiAgICogVGhlIGBjbGFzc05hbWVgIHRvIGFkZCB0byB0aGUgdGl0bGUncyByb290IGNvbnRhaW5lciBlbGVtZW50LlxuICAgKi9cbiAgdGl0bGVDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogT3ZlcnJpZGVzIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSB0aXRsZSdzIHJvb3QgY29udGFpbmVyIGVsZW1lbnQuXG4gICAqL1xuICB0aXRsZVN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdFxufSA6IHt9O1xuZXhwb3J0cy5kZWZhdWx0ID0gRGlhbG9nO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9EaWFsb2cvRGlhbG9nLmpzXG4vLyBtb2R1bGUgaWQgPSAxNDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDIiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YnKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2syID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrJyk7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTtcblxudmFyIF9jcmVhdGVDbGFzczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MnKTtcblxudmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4nKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblxudmFyIF9pbmhlcml0czIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMnKTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG52YXIgX3NpbXBsZUFzc2lnbiA9IHJlcXVpcmUoJ3NpbXBsZS1hc3NpZ24nKTtcblxudmFyIF9zaW1wbGVBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2ltcGxlQXNzaWduKTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxudmFyIF9yZWFjdERvbSA9IHJlcXVpcmUoJ3JlYWN0LWRvbScpO1xuXG52YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblxudmFyIF9yZWFjdEV2ZW50TGlzdGVuZXIgPSByZXF1aXJlKCdyZWFjdC1ldmVudC1saXN0ZW5lcicpO1xuXG52YXIgX3JlYWN0RXZlbnRMaXN0ZW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdEV2ZW50TGlzdGVuZXIpO1xuXG52YXIgX2tleWNvZGUgPSByZXF1aXJlKCdrZXljb2RlJyk7XG5cbnZhciBfa2V5Y29kZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9rZXljb2RlKTtcblxudmFyIF9hdXRvUHJlZml4ID0gcmVxdWlyZSgnLi4vdXRpbHMvYXV0b1ByZWZpeCcpO1xuXG52YXIgX2F1dG9QcmVmaXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXV0b1ByZWZpeCk7XG5cbnZhciBfdHJhbnNpdGlvbnMgPSByZXF1aXJlKCcuLi9zdHlsZXMvdHJhbnNpdGlvbnMnKTtcblxudmFyIF90cmFuc2l0aW9uczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90cmFuc2l0aW9ucyk7XG5cbnZhciBfT3ZlcmxheSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL092ZXJsYXknKTtcblxudmFyIF9PdmVybGF5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX092ZXJsYXkpO1xuXG52YXIgX1BhcGVyID0gcmVxdWlyZSgnLi4vUGFwZXInKTtcblxudmFyIF9QYXBlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9QYXBlcik7XG5cbnZhciBfcHJvcFR5cGVzMyA9IHJlcXVpcmUoJy4uL3V0aWxzL3Byb3BUeXBlcycpO1xuXG52YXIgX3Byb3BUeXBlczQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIG9wZW5OYXZFdmVudEhhbmRsZXIgPSBudWxsO1xuXG52YXIgRHJhd2VyID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoRHJhd2VyLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBEcmF3ZXIoKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRHJhd2VyKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoX3JlZiA9IERyYXdlci5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRHJhd2VyKSkuY2FsbC5hcHBseShfcmVmLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuaGFuZGxlVG91Y2hUYXBPdmVybGF5ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgX3RoaXMuY2xvc2UoJ2NsaWNrYXdheScpO1xuICAgIH0sIF90aGlzLmhhbmRsZUtleVVwID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoX3RoaXMuc3RhdGUub3BlbiAmJiAhX3RoaXMucHJvcHMuZG9ja2VkICYmICgwLCBfa2V5Y29kZTIuZGVmYXVsdCkoZXZlbnQpID09PSAnZXNjJykge1xuICAgICAgICBfdGhpcy5jbG9zZSgnZXNjYXBlJyk7XG4gICAgICB9XG4gICAgfSwgX3RoaXMub25Cb2R5VG91Y2hTdGFydCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyIHN3aXBlQXJlYVdpZHRoID0gX3RoaXMucHJvcHMuc3dpcGVBcmVhV2lkdGg7XG5cbiAgICAgIHZhciB0b3VjaFN0YXJ0WCA9IF90aGlzLmNvbnRleHQubXVpVGhlbWUuaXNSdGwgPyBkb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoIC0gZXZlbnQudG91Y2hlc1swXS5wYWdlWCA6IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVg7XG4gICAgICB2YXIgdG91Y2hTdGFydFkgPSBldmVudC50b3VjaGVzWzBdLnBhZ2VZO1xuXG4gICAgICAvLyBPcGVuIG9ubHkgaWYgc3dpcGluZyBmcm9tIGZhciBsZWZ0IChvciByaWdodCkgd2hpbGUgY2xvc2VkXG4gICAgICBpZiAoc3dpcGVBcmVhV2lkdGggIT09IG51bGwgJiYgIV90aGlzLnN0YXRlLm9wZW4pIHtcbiAgICAgICAgaWYgKF90aGlzLnByb3BzLm9wZW5TZWNvbmRhcnkpIHtcbiAgICAgICAgICAvLyBJZiBvcGVuU2Vjb25kYXJ5IGlzIHRydWUgY2FsY3VsYXRlIGZyb20gdGhlIGZhciByaWdodFxuICAgICAgICAgIGlmICh0b3VjaFN0YXJ0WCA8IGRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGggLSBzd2lwZUFyZWFXaWR0aCkgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIElmIG9wZW5TZWNvbmRhcnkgaXMgZmFsc2UgY2FsY3VsYXRlIGZyb20gdGhlIGZhciBsZWZ0XG4gICAgICAgICAgaWYgKHRvdWNoU3RhcnRYID4gc3dpcGVBcmVhV2lkdGgpIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIV90aGlzLnN0YXRlLm9wZW4gJiYgKG9wZW5OYXZFdmVudEhhbmRsZXIgIT09IF90aGlzLm9uQm9keVRvdWNoU3RhcnQgfHwgX3RoaXMucHJvcHMuZGlzYWJsZVN3aXBlVG9PcGVuKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIF90aGlzLm1heWJlU3dpcGluZyA9IHRydWU7XG4gICAgICBfdGhpcy50b3VjaFN0YXJ0WCA9IHRvdWNoU3RhcnRYO1xuICAgICAgX3RoaXMudG91Y2hTdGFydFkgPSB0b3VjaFN0YXJ0WTtcblxuICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBfdGhpcy5vbkJvZHlUb3VjaE1vdmUpO1xuICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIF90aGlzLm9uQm9keVRvdWNoRW5kKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBfdGhpcy5vbkJvZHlUb3VjaEVuZCk7XG4gICAgfSwgX3RoaXMub25Cb2R5VG91Y2hNb3ZlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB2YXIgY3VycmVudFggPSBfdGhpcy5jb250ZXh0Lm11aVRoZW1lLmlzUnRsID8gZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aCAtIGV2ZW50LnRvdWNoZXNbMF0ucGFnZVggOiBldmVudC50b3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgdmFyIGN1cnJlbnRZID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWTtcblxuICAgICAgaWYgKF90aGlzLnN0YXRlLnN3aXBpbmcpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgX3RoaXMuc2V0UG9zaXRpb24oX3RoaXMuZ2V0VHJhbnNsYXRlWChjdXJyZW50WCkpO1xuICAgICAgfSBlbHNlIGlmIChfdGhpcy5tYXliZVN3aXBpbmcpIHtcbiAgICAgICAgdmFyIGRYQWJzID0gTWF0aC5hYnMoY3VycmVudFggLSBfdGhpcy50b3VjaFN0YXJ0WCk7XG4gICAgICAgIHZhciBkWUFicyA9IE1hdGguYWJzKGN1cnJlbnRZIC0gX3RoaXMudG91Y2hTdGFydFkpO1xuICAgICAgICAvLyBJZiB0aGUgdXNlciBoYXMgbW92ZWQgaGlzIHRodW1iIHRlbiBwaXhlbHMgaW4gZWl0aGVyIGRpcmVjdGlvbixcbiAgICAgICAgLy8gd2UgY2FuIHNhZmVseSBtYWtlIGFuIGFzc3VtcHRpb24gYWJvdXQgd2hldGhlciBoZSB3YXMgaW50ZW5kaW5nXG4gICAgICAgIC8vIHRvIHN3aXBlIG9yIHNjcm9sbC5cbiAgICAgICAgdmFyIHRocmVzaG9sZCA9IDEwO1xuXG4gICAgICAgIGlmIChkWEFicyA+IHRocmVzaG9sZCAmJiBkWUFicyA8PSB0aHJlc2hvbGQpIHtcbiAgICAgICAgICBfdGhpcy5zd2lwZVN0YXJ0WCA9IGN1cnJlbnRYO1xuICAgICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHN3aXBpbmc6IF90aGlzLnN0YXRlLm9wZW4gPyAnY2xvc2luZycgOiAnb3BlbmluZydcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBfdGhpcy5zZXRQb3NpdGlvbihfdGhpcy5nZXRUcmFuc2xhdGVYKGN1cnJlbnRYKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZFhBYnMgPD0gdGhyZXNob2xkICYmIGRZQWJzID4gdGhyZXNob2xkKSB7XG4gICAgICAgICAgX3RoaXMub25Cb2R5VG91Y2hFbmQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIF90aGlzLm9uQm9keVRvdWNoRW5kID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoX3RoaXMuc3RhdGUuc3dpcGluZykge1xuICAgICAgICB2YXIgY3VycmVudFggPSBfdGhpcy5jb250ZXh0Lm11aVRoZW1lLmlzUnRsID8gZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aCAtIGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYIDogZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVg7XG4gICAgICAgIHZhciB0cmFuc2xhdGVSYXRpbyA9IF90aGlzLmdldFRyYW5zbGF0ZVgoY3VycmVudFgpIC8gX3RoaXMuZ2V0TWF4VHJhbnNsYXRlWCgpO1xuXG4gICAgICAgIF90aGlzLm1heWJlU3dpcGluZyA9IGZhbHNlO1xuICAgICAgICB2YXIgc3dpcGluZyA9IF90aGlzLnN0YXRlLnN3aXBpbmc7XG4gICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBzd2lwaW5nOiBudWxsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFdlIGhhdmUgdG8gb3BlbiBvciBjbG9zZSBhZnRlciBzZXR0aW5nIHN3aXBpbmcgdG8gbnVsbCxcbiAgICAgICAgLy8gYmVjYXVzZSBvbmx5IHRoZW4gQ1NTIHRyYW5zaXRpb24gaXMgZW5hYmxlZC5cbiAgICAgICAgaWYgKHRyYW5zbGF0ZVJhdGlvID4gMC41KSB7XG4gICAgICAgICAgaWYgKHN3aXBpbmcgPT09ICdvcGVuaW5nJykge1xuICAgICAgICAgICAgX3RoaXMuc2V0UG9zaXRpb24oX3RoaXMuZ2V0TWF4VHJhbnNsYXRlWCgpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMuY2xvc2UoJ3N3aXBlJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzd2lwaW5nID09PSAnb3BlbmluZycpIHtcbiAgICAgICAgICAgIF90aGlzLm9wZW4oJ3N3aXBlJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLnNldFBvc2l0aW9uKDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3RoaXMubWF5YmVTd2lwaW5nID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIF90aGlzLnJlbW92ZUJvZHlUb3VjaExpc3RlbmVycygpO1xuICAgIH0sIF90ZW1wKSwgKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KShfdGhpcywgX3JldCk7XG4gIH1cblxuICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShEcmF3ZXIsIFt7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbE1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgdGhpcy5tYXliZVN3aXBpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMudG91Y2hTdGFydFggPSBudWxsO1xuICAgICAgdGhpcy50b3VjaFN0YXJ0WSA9IG51bGw7XG4gICAgICB0aGlzLnN3aXBlU3RhcnRYID0gbnVsbDtcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIG9wZW46IHRoaXMucHJvcHMub3BlbiAhPT0gbnVsbCA/IHRoaXMucHJvcHMub3BlbiA6IHRoaXMucHJvcHMuZG9ja2VkLFxuICAgICAgICBzd2lwaW5nOiBudWxsXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdGhpcy5lbmFibGVTd2lwZUhhbmRsaW5nKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgICAvLyBJZiBjb250cm9sbGVkIHRoZW4gdGhlIG9wZW4gcHJvcCB0YWtlcyBwcmVjZWRlbmNlLlxuICAgICAgaWYgKG5leHRQcm9wcy5vcGVuICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIG9wZW46IG5leHRQcm9wcy5vcGVuXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBPdGhlcndpc2UsIGlmIGRvY2tlZCBpcyBjaGFuZ2VkLCBjaGFuZ2UgdGhlIG9wZW4gc3RhdGUgZm9yIHdoZW4gdW5jb250cm9sbGVkLlxuICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmRvY2tlZCAhPT0gbmV4dFByb3BzLmRvY2tlZCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBvcGVuOiBuZXh0UHJvcHMuZG9ja2VkXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudERpZFVwZGF0ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgIHRoaXMuZW5hYmxlU3dpcGVIYW5kbGluZygpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxVbm1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB0aGlzLmRpc2FibGVTd2lwZUhhbmRsaW5nKCk7XG4gICAgICB0aGlzLnJlbW92ZUJvZHlUb3VjaExpc3RlbmVycygpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2dldFN0eWxlcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFN0eWxlcygpIHtcbiAgICAgIHZhciBtdWlUaGVtZSA9IHRoaXMuY29udGV4dC5tdWlUaGVtZTtcbiAgICAgIHZhciB0aGVtZSA9IG11aVRoZW1lLmRyYXdlcjtcblxuICAgICAgdmFyIHggPSB0aGlzLmdldFRyYW5zbGF0ZU11bHRpcGxpZXIoKSAqICh0aGlzLnN0YXRlLm9wZW4gPyAwIDogdGhpcy5nZXRNYXhUcmFuc2xhdGVYKCkpO1xuXG4gICAgICB2YXIgc3R5bGVzID0ge1xuICAgICAgICByb290OiB7XG4gICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICAgICAgd2lkdGg6IHRoaXMuZ2V0VHJhbnNsYXRlZFdpZHRoKCkgfHwgdGhlbWUud2lkdGgsXG4gICAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgICAgICAgekluZGV4OiBtdWlUaGVtZS56SW5kZXguZHJhd2VyLFxuICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgnICsgeCArICdweCwgMCknLFxuICAgICAgICAgIHRyYW5zaXRpb246ICF0aGlzLnN0YXRlLnN3aXBpbmcgJiYgX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQobnVsbCwgJ3RyYW5zZm9ybScsIG51bGwpLFxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogdGhlbWUuY29sb3IsXG4gICAgICAgICAgb3ZlcmZsb3c6ICdhdXRvJyxcbiAgICAgICAgICBXZWJraXRPdmVyZmxvd1Njcm9sbGluZzogJ3RvdWNoJyAvLyBpT1MgbW9tZW50dW0gc2Nyb2xsaW5nXG4gICAgICAgIH0sXG4gICAgICAgIG92ZXJsYXk6IHtcbiAgICAgICAgICB6SW5kZXg6IG11aVRoZW1lLnpJbmRleC5kcmF3ZXJPdmVybGF5LFxuICAgICAgICAgIHBvaW50ZXJFdmVudHM6IHRoaXMuc3RhdGUub3BlbiA/ICdhdXRvJyA6ICdub25lJyAvLyBCeXBhc3MgbW91c2UgZXZlbnRzIHdoZW4gbGVmdCBuYXYgaXMgY2xvc2luZy5cbiAgICAgICAgfSxcbiAgICAgICAgcm9vdFdoZW5PcGVuUmlnaHQ6IHtcbiAgICAgICAgICBsZWZ0OiAnYXV0bycsXG4gICAgICAgICAgcmlnaHQ6IDBcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHN0eWxlcztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzaG91bGRTaG93JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvdWxkU2hvdygpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0YXRlLm9wZW4gfHwgISF0aGlzLnN0YXRlLnN3aXBpbmc7IC8vIGNvbXBvbmVudCBpcyBzd2lwaW5nXG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY2xvc2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZShyZWFzb24pIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLm9wZW4gPT09IG51bGwpIHRoaXMuc2V0U3RhdGUoeyBvcGVuOiBmYWxzZSB9KTtcbiAgICAgIGlmICh0aGlzLnByb3BzLm9uUmVxdWVzdENoYW5nZSkgdGhpcy5wcm9wcy5vblJlcXVlc3RDaGFuZ2UoZmFsc2UsIHJlYXNvbik7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvcGVuJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb3BlbihyZWFzb24pIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLm9wZW4gPT09IG51bGwpIHRoaXMuc2V0U3RhdGUoeyBvcGVuOiB0cnVlIH0pO1xuICAgICAgaWYgKHRoaXMucHJvcHMub25SZXF1ZXN0Q2hhbmdlKSB0aGlzLnByb3BzLm9uUmVxdWVzdENoYW5nZSh0cnVlLCByZWFzb24pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZ2V0VHJhbnNsYXRlZFdpZHRoJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VHJhbnNsYXRlZFdpZHRoKCkge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLnByb3BzLndpZHRoID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAoIS9eXFxkKyhcXC5cXGQrKT8lJC8udGVzdCh0aGlzLnByb3BzLndpZHRoKSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGEgdmFsaWQgcGVyY2VudGFnZSBmb3JtYXQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdpZHRoID0gcGFyc2VGbG9hdCh0aGlzLnByb3BzLndpZHRoKSAvIDEwMC4wO1xuICAgICAgICAvLyBXZSBhcmUgZG9pbmcgb3VyIGJlc3Qgb24gdGhlIFNlcnZlciB0byByZW5kZXIgYSBjb25zaXN0ZW50IFVJLCBoZW5jZSB0aGVcbiAgICAgICAgLy8gZGVmYXVsdCB2YWx1ZSBvZiAxMDAwMFxuICAgICAgICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aWR0aCAqIHdpbmRvdy5pbm5lcldpZHRoIDogMTAwMDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy53aWR0aDtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdnZXRNYXhUcmFuc2xhdGVYJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TWF4VHJhbnNsYXRlWCgpIHtcbiAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0VHJhbnNsYXRlZFdpZHRoKCkgfHwgdGhpcy5jb250ZXh0Lm11aVRoZW1lLmRyYXdlci53aWR0aDtcbiAgICAgIHJldHVybiB3aWR0aCArIDEwO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2dldFRyYW5zbGF0ZU11bHRpcGxpZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUcmFuc2xhdGVNdWx0aXBsaWVyKCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMub3BlblNlY29uZGFyeSA/IDEgOiAtMTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdlbmFibGVTd2lwZUhhbmRsaW5nJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5hYmxlU3dpcGVIYW5kbGluZygpIHtcbiAgICAgIGlmICghdGhpcy5wcm9wcy5kb2NrZWQpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5vbkJvZHlUb3VjaFN0YXJ0KTtcbiAgICAgICAgaWYgKCFvcGVuTmF2RXZlbnRIYW5kbGVyKSB7XG4gICAgICAgICAgb3Blbk5hdkV2ZW50SGFuZGxlciA9IHRoaXMub25Cb2R5VG91Y2hTdGFydDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlU3dpcGVIYW5kbGluZygpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2Rpc2FibGVTd2lwZUhhbmRsaW5nJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzYWJsZVN3aXBlSGFuZGxpbmcoKSB7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLm9uQm9keVRvdWNoU3RhcnQpO1xuICAgICAgaWYgKG9wZW5OYXZFdmVudEhhbmRsZXIgPT09IHRoaXMub25Cb2R5VG91Y2hTdGFydCkge1xuICAgICAgICBvcGVuTmF2RXZlbnRIYW5kbGVyID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW1vdmVCb2R5VG91Y2hMaXN0ZW5lcnMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVCb2R5VG91Y2hMaXN0ZW5lcnMoKSB7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMub25Cb2R5VG91Y2hNb3ZlKTtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLm9uQm9keVRvdWNoRW5kKTtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCB0aGlzLm9uQm9keVRvdWNoRW5kKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzZXRQb3NpdGlvbicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldFBvc2l0aW9uKHRyYW5zbGF0ZVgpIHtcbiAgICAgIHZhciBydGxUcmFuc2xhdGVNdWx0aXBsaWVyID0gdGhpcy5jb250ZXh0Lm11aVRoZW1lLmlzUnRsID8gLTEgOiAxO1xuICAgICAgdmFyIGRyYXdlciA9IF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzLnJlZnMuY2xpY2tBd2F5YWJsZUVsZW1lbnQpO1xuICAgICAgdmFyIHRyYW5zZm9ybUNTUyA9ICd0cmFuc2xhdGUoJyArIHRoaXMuZ2V0VHJhbnNsYXRlTXVsdGlwbGllcigpICogcnRsVHJhbnNsYXRlTXVsdGlwbGllciAqIHRyYW5zbGF0ZVggKyAncHgsIDApJztcbiAgICAgIHRoaXMucmVmcy5vdmVybGF5LnNldE9wYWNpdHkoMSAtIHRyYW5zbGF0ZVggLyB0aGlzLmdldE1heFRyYW5zbGF0ZVgoKSk7XG4gICAgICBfYXV0b1ByZWZpeDIuZGVmYXVsdC5zZXQoZHJhd2VyLnN0eWxlLCAndHJhbnNmb3JtJywgdHJhbnNmb3JtQ1NTKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdnZXRUcmFuc2xhdGVYJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VHJhbnNsYXRlWChjdXJyZW50WCkge1xuICAgICAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHRoaXMuc3RhdGUuc3dpcGluZyA9PT0gJ2Nsb3NpbmcnID8gdGhpcy5nZXRUcmFuc2xhdGVNdWx0aXBsaWVyKCkgKiAoY3VycmVudFggLSB0aGlzLnN3aXBlU3RhcnRYKSA6IHRoaXMuZ2V0TWF4VHJhbnNsYXRlWCgpIC0gdGhpcy5nZXRUcmFuc2xhdGVNdWx0aXBsaWVyKCkgKiAodGhpcy5zd2lwZVN0YXJ0WCAtIGN1cnJlbnRYKSwgMCksIHRoaXMuZ2V0TWF4VHJhbnNsYXRlWCgpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBjaGlsZHJlbiA9IF9wcm9wcy5jaGlsZHJlbixcbiAgICAgICAgICBjbGFzc05hbWUgPSBfcHJvcHMuY2xhc3NOYW1lLFxuICAgICAgICAgIGNvbnRhaW5lckNsYXNzTmFtZSA9IF9wcm9wcy5jb250YWluZXJDbGFzc05hbWUsXG4gICAgICAgICAgY29udGFpbmVyU3R5bGUgPSBfcHJvcHMuY29udGFpbmVyU3R5bGUsXG4gICAgICAgICAgZG9ja2VkID0gX3Byb3BzLmRvY2tlZCxcbiAgICAgICAgICBvcGVuU2Vjb25kYXJ5ID0gX3Byb3BzLm9wZW5TZWNvbmRhcnksXG4gICAgICAgICAgb3ZlcmxheUNsYXNzTmFtZSA9IF9wcm9wcy5vdmVybGF5Q2xhc3NOYW1lLFxuICAgICAgICAgIG92ZXJsYXlTdHlsZSA9IF9wcm9wcy5vdmVybGF5U3R5bGUsXG4gICAgICAgICAgc3R5bGUgPSBfcHJvcHMuc3R5bGUsXG4gICAgICAgICAgekRlcHRoID0gX3Byb3BzLnpEZXB0aDtcblxuXG4gICAgICB2YXIgc3R5bGVzID0gdGhpcy5nZXRTdHlsZXMoKTtcblxuICAgICAgdmFyIG92ZXJsYXkgPSB2b2lkIDA7XG4gICAgICBpZiAoIWRvY2tlZCkge1xuICAgICAgICBvdmVybGF5ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX092ZXJsYXkyLmRlZmF1bHQsIHtcbiAgICAgICAgICByZWY6ICdvdmVybGF5JyxcbiAgICAgICAgICBzaG93OiB0aGlzLnNob3VsZFNob3coKSxcbiAgICAgICAgICBjbGFzc05hbWU6IG92ZXJsYXlDbGFzc05hbWUsXG4gICAgICAgICAgc3R5bGU6ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMub3ZlcmxheSwgb3ZlcmxheVN0eWxlKSxcbiAgICAgICAgICB0cmFuc2l0aW9uRW5hYmxlZDogIXRoaXMuc3RhdGUuc3dpcGluZyxcbiAgICAgICAgICBvblRvdWNoVGFwOiB0aGlzLmhhbmRsZVRvdWNoVGFwT3ZlcmxheVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAge1xuICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICAgIHN0eWxlOiBzdHlsZVxuICAgICAgICB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RFdmVudExpc3RlbmVyMi5kZWZhdWx0LCB7IHRhcmdldDogJ3dpbmRvdycsIG9uS2V5VXA6IHRoaXMuaGFuZGxlS2V5VXAgfSksXG4gICAgICAgIG92ZXJsYXksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIF9QYXBlcjIuZGVmYXVsdCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICByZWY6ICdjbGlja0F3YXlhYmxlRWxlbWVudCcsXG4gICAgICAgICAgICB6RGVwdGg6IHpEZXB0aCxcbiAgICAgICAgICAgIHJvdW5kZWQ6IGZhbHNlLFxuICAgICAgICAgICAgdHJhbnNpdGlvbkVuYWJsZWQ6ICF0aGlzLnN0YXRlLnN3aXBpbmcsXG4gICAgICAgICAgICBjbGFzc05hbWU6IGNvbnRhaW5lckNsYXNzTmFtZSxcbiAgICAgICAgICAgIHN0eWxlOiAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLnJvb3QsIG9wZW5TZWNvbmRhcnkgJiYgc3R5bGVzLnJvb3RXaGVuT3BlblJpZ2h0LCBjb250YWluZXJTdHlsZSlcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNoaWxkcmVuXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBEcmF3ZXI7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5EcmF3ZXIuZGVmYXVsdFByb3BzID0ge1xuICBkaXNhYmxlU3dpcGVUb09wZW46IGZhbHNlLFxuICBkb2NrZWQ6IHRydWUsXG4gIG9wZW46IG51bGwsXG4gIG9wZW5TZWNvbmRhcnk6IGZhbHNlLFxuICBzd2lwZUFyZWFXaWR0aDogMzAsXG4gIHdpZHRoOiBudWxsLFxuICB6RGVwdGg6IDJcbn07XG5EcmF3ZXIuY29udGV4dFR5cGVzID0ge1xuICBtdWlUaGVtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QuaXNSZXF1aXJlZFxufTtcbkRyYXdlci5wcm9wVHlwZXMgPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB7XG4gIC8qKlxuICAgKiBUaGUgY29udGVudHMgb2YgdGhlIGBEcmF3ZXJgXG4gICAqL1xuICBjaGlsZHJlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICAvKipcbiAgICogVGhlIENTUyBjbGFzcyBuYW1lIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBjbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogVGhlIENTUyBjbGFzcyBuYW1lIG9mIHRoZSBjb250YWluZXIgZWxlbWVudC5cbiAgICovXG4gIGNvbnRhaW5lckNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgY29udGFpbmVyIGVsZW1lbnQuXG4gICAqL1xuICBjb250YWluZXJTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBJZiB0cnVlLCBzd2lwaW5nIHNpZGV3YXlzIHdoZW4gdGhlIGBEcmF3ZXJgIGlzIGNsb3NlZCB3aWxsIG5vdCBvcGVuIGl0LlxuICAgKi9cbiAgZGlzYWJsZVN3aXBlVG9PcGVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBJZiB0cnVlLCB0aGUgYERyYXdlcmAgd2lsbCBiZSBkb2NrZWQuIEluIHRoaXMgc3RhdGUsIHRoZSBvdmVybGF5IHdvbid0IHNob3cgYW5kXG4gICAqIGNsaWNraW5nIG9uIGEgbWVudSBpdGVtIHdpbGwgbm90IGNsb3NlIHRoZSBgRHJhd2VyYC5cbiAgICovXG4gIGRvY2tlZDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gZmlyZWQgd2hlbiB0aGUgYG9wZW5gIHN0YXRlIG9mIHRoZSBgRHJhd2VyYCBpcyByZXF1ZXN0ZWQgdG8gYmUgY2hhbmdlZC5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBvcGVuIElmIHRydWUsIHRoZSBgRHJhd2VyYCB3YXMgcmVxdWVzdGVkIHRvIGJlIG9wZW5lZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlYXNvbiBUaGUgcmVhc29uIGZvciB0aGUgb3BlbiBvciBjbG9zZSByZXF1ZXN0LiBQb3NzaWJsZSB2YWx1ZXMgYXJlXG4gICAqICdzd2lwZScgZm9yIG9wZW4gcmVxdWVzdHM7ICdjbGlja2F3YXknIChvbiBvdmVybGF5IGNsaWNrcyksXG4gICAqICdlc2NhcGUnIChvbiBlc2NhcGUga2V5IHByZXNzKSwgYW5kICdzd2lwZScgZm9yIGNsb3NlIHJlcXVlc3RzLlxuICAgKi9cbiAgb25SZXF1ZXN0Q2hhbmdlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBJZiB0cnVlLCB0aGUgYERyYXdlcmAgaXMgb3BlbmVkLiAgUHJvdmlkaW5nIGEgdmFsdWUgd2lsbCB0dXJuIHRoZSBgRHJhd2VyYFxuICAgKiBpbnRvIGEgY29udHJvbGxlZCBjb21wb25lbnQuXG4gICAqL1xuICBvcGVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBJZiB0cnVlLCB0aGUgYERyYXdlcmAgaXMgcG9zaXRpb25lZCB0byBvcGVuIGZyb20gdGhlIG9wcG9zaXRlIHNpZGUuXG4gICAqL1xuICBvcGVuU2Vjb25kYXJ5OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBUaGUgQ1NTIGNsYXNzIG5hbWUgdG8gYWRkIHRvIHRoZSBgT3ZlcmxheWAgY29tcG9uZW50IHRoYXQgaXMgcmVuZGVyZWQgYmVoaW5kIHRoZSBgRHJhd2VyYC5cbiAgICovXG4gIG92ZXJsYXlDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIGBPdmVybGF5YCBjb21wb25lbnQgdGhhdCBpcyByZW5kZXJlZCBiZWhpbmQgdGhlIGBEcmF3ZXJgLlxuICAgKi9cbiAgb3ZlcmxheVN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBUaGUgd2lkdGggb2YgdGhlIGxlZnQgbW9zdCAob3IgcmlnaHQgbW9zdCkgYXJlYSBpbiBwaXhlbHMgd2hlcmUgdGhlIGBEcmF3ZXJgIGNhbiBiZVxuICAgKiBzd2lwZWQgb3BlbiBmcm9tLiBTZXR0aW5nIHRoaXMgdG8gYG51bGxgIHNwYW5zIHRoYXQgYXJlYSB0byB0aGUgZW50aXJlIHBhZ2VcbiAgICogKCoqQ0FVVElPTiEqKiBTZXR0aW5nIHRoaXMgcHJvcGVydHkgdG8gYG51bGxgIG1pZ2h0IGNhdXNlIGlzc3VlcyB3aXRoIHNsaWRlcnMgYW5kXG4gICAqIHN3aXBlYWJsZSBgVGFic2A6IHVzZSBhdCB5b3VyIG93biByaXNrKS5cbiAgICovXG4gIHN3aXBlQXJlYVdpZHRoOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm51bWJlcixcbiAgLyoqXG4gICAqIFRoZSB3aWR0aCBvZiB0aGUgYERyYXdlcmAgaW4gcGl4ZWxzIG9yIHBlcmNlbnRhZ2UgaW4gc3RyaW5nIGZvcm1hdCBleC4gYDUwJWAgdG8gZmlsbFxuICAgKiBoYWxmIG9mIHRoZSB3aW5kb3cgb3IgYDEwMCVgIGFuZCBzbyBvbi4gRGVmYXVsdHMgdG8gdXNpbmcgdGhlIHZhbHVlcyBmcm9tIHRoZW1lLlxuICAgKi9cbiAgd2lkdGg6IF9wcm9wVHlwZXMyLmRlZmF1bHQub25lT2ZUeXBlKFtfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZywgX3Byb3BUeXBlczIuZGVmYXVsdC5udW1iZXJdKSxcbiAgLyoqXG4gICAqIFRoZSB6RGVwdGggb2YgdGhlIGBEcmF3ZXJgLlxuICAgKi9cbiAgekRlcHRoOiBfcHJvcFR5cGVzNC5kZWZhdWx0LnpEZXB0aFxuXG59IDoge307XG5leHBvcnRzLmRlZmF1bHQgPSBEcmF3ZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L21hdGVyaWFsLXVpL0RyYXdlci9EcmF3ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE0N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHVuZGVmaW5lZDtcblxudmFyIF9EcmF3ZXIgPSByZXF1aXJlKCcuL0RyYXdlcicpO1xuXG52YXIgX0RyYXdlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EcmF3ZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5leHBvcnRzLmRlZmF1bHQgPSBfRHJhd2VyMi5kZWZhdWx0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9EcmF3ZXIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE0OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9leHRlbmRzJyk7XG5cbnZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzJyk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZicpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcycpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybicpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpO1xuXG52YXIgX2luaGVyaXRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cycpO1xuXG52YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cbnZhciBfc2ltcGxlQXNzaWduID0gcmVxdWlyZSgnc2ltcGxlLWFzc2lnbicpO1xuXG52YXIgX3NpbXBsZUFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaW1wbGVBc3NpZ24pO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX3JlYWN0RG9tID0gcmVxdWlyZSgncmVhY3QtZG9tJyk7XG5cbnZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXG52YXIgX3RyYW5zaXRpb25zID0gcmVxdWlyZSgnLi4vc3R5bGVzL3RyYW5zaXRpb25zJyk7XG5cbnZhciBfdHJhbnNpdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHJhbnNpdGlvbnMpO1xuXG52YXIgX2Fycm93RHJvcERvd24gPSByZXF1aXJlKCcuLi9zdmctaWNvbnMvbmF2aWdhdGlvbi9hcnJvdy1kcm9wLWRvd24nKTtcblxudmFyIF9hcnJvd0Ryb3BEb3duMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Fycm93RHJvcERvd24pO1xuXG52YXIgX01lbnUgPSByZXF1aXJlKCcuLi9NZW51L01lbnUnKTtcblxudmFyIF9NZW51MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX01lbnUpO1xuXG52YXIgX0NsZWFyRml4ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvQ2xlYXJGaXgnKTtcblxudmFyIF9DbGVhckZpeDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9DbGVhckZpeCk7XG5cbnZhciBfUG9wb3ZlciA9IHJlcXVpcmUoJy4uL1BvcG92ZXIvUG9wb3ZlcicpO1xuXG52YXIgX1BvcG92ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUG9wb3Zlcik7XG5cbnZhciBfUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsID0gcmVxdWlyZSgnLi4vUG9wb3Zlci9Qb3BvdmVyQW5pbWF0aW9uVmVydGljYWwnKTtcblxudmFyIF9Qb3BvdmVyQW5pbWF0aW9uVmVydGljYWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsKTtcblxudmFyIF9rZXljb2RlID0gcmVxdWlyZSgna2V5Y29kZScpO1xuXG52YXIgX2tleWNvZGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5Y29kZSk7XG5cbnZhciBfZXZlbnRzID0gcmVxdWlyZSgnLi4vdXRpbHMvZXZlbnRzJyk7XG5cbnZhciBfZXZlbnRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V2ZW50cyk7XG5cbnZhciBfSWNvbkJ1dHRvbiA9IHJlcXVpcmUoJy4uL0ljb25CdXR0b24nKTtcblxudmFyIF9JY29uQnV0dG9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ljb25CdXR0b24pO1xuXG52YXIgX3Byb3BUeXBlczMgPSByZXF1aXJlKCcuLi91dGlscy9wcm9wVHlwZXMnKTtcblxudmFyIF9wcm9wVHlwZXM0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzMyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGdldFN0eWxlcyhwcm9wcywgY29udGV4dCkge1xuICB2YXIgZGlzYWJsZWQgPSBwcm9wcy5kaXNhYmxlZDtcblxuICB2YXIgc3BhY2luZyA9IGNvbnRleHQubXVpVGhlbWUuYmFzZVRoZW1lLnNwYWNpbmc7XG4gIHZhciBwYWxldHRlID0gY29udGV4dC5tdWlUaGVtZS5iYXNlVGhlbWUucGFsZXR0ZTtcbiAgdmFyIGFjY2VudENvbG9yID0gY29udGV4dC5tdWlUaGVtZS5kcm9wRG93bk1lbnUuYWNjZW50Q29sb3I7XG4gIHJldHVybiB7XG4gICAgY29udHJvbDoge1xuICAgICAgY3Vyc29yOiBkaXNhYmxlZCA/ICdub3QtYWxsb3dlZCcgOiAncG9pbnRlcicsXG4gICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgd2lkdGg6ICcxMDAlJ1xuICAgIH0sXG4gICAgaWNvbjoge1xuICAgICAgZmlsbDogYWNjZW50Q29sb3IsXG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIHJpZ2h0OiBzcGFjaW5nLmRlc2t0b3BHdXR0ZXJMZXNzLFxuICAgICAgdG9wOiAoc3BhY2luZy5pY29uU2l6ZSAtIDI0KSAvIDIgKyBzcGFjaW5nLmRlc2t0b3BHdXR0ZXJNaW5pIC8gMlxuICAgIH0sXG4gICAgaWNvbkNoaWxkcmVuOiB7XG4gICAgICBmaWxsOiAnaW5oZXJpdCdcbiAgICB9LFxuICAgIGxhYmVsOiB7XG4gICAgICBjb2xvcjogZGlzYWJsZWQgPyBwYWxldHRlLmRpc2FibGVkQ29sb3IgOiBwYWxldHRlLnRleHRDb2xvcixcbiAgICAgIGhlaWdodDogc3BhY2luZy5kZXNrdG9wVG9vbGJhckhlaWdodCArICdweCcsXG4gICAgICBsaW5lSGVpZ2h0OiBzcGFjaW5nLmRlc2t0b3BUb29sYmFySGVpZ2h0ICsgJ3B4JyxcbiAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICAgIG9wYWNpdHk6IDEsXG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgIHBhZGRpbmdMZWZ0OiBzcGFjaW5nLmRlc2t0b3BHdXR0ZXIsXG4gICAgICBwYWRkaW5nUmlnaHQ6IHNwYWNpbmcuaWNvblNpemUgKiAyICsgc3BhY2luZy5kZXNrdG9wR3V0dGVyTWluaSxcbiAgICAgIHRleHRPdmVyZmxvdzogJ2VsbGlwc2lzJyxcbiAgICAgIHRvcDogMCxcbiAgICAgIHdoaXRlU3BhY2U6ICdub3dyYXAnXG4gICAgfSxcbiAgICBsYWJlbFdoZW5PcGVuOiB7XG4gICAgICBvcGFjaXR5OiAwLFxuICAgICAgdG9wOiBzcGFjaW5nLmRlc2t0b3BUb29sYmFySGVpZ2h0IC8gOFxuICAgIH0sXG4gICAgcm9vdDoge1xuICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICBmb250U2l6ZTogc3BhY2luZy5kZXNrdG9wRHJvcERvd25NZW51Rm9udFNpemUsXG4gICAgICBoZWlnaHQ6IHNwYWNpbmcuZGVza3RvcFN1YmhlYWRlckhlaWdodCxcbiAgICAgIGZvbnRGYW1pbHk6IGNvbnRleHQubXVpVGhlbWUuYmFzZVRoZW1lLmZvbnRGYW1pbHksXG4gICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgIHRyYW5zaXRpb246IF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KClcbiAgICB9LFxuICAgIHJvb3RXaGVuT3Blbjoge1xuICAgICAgb3BhY2l0eTogMVxuICAgIH0sXG4gICAgdW5kZXJsaW5lOiB7XG4gICAgICBib3JkZXJUb3A6ICdzb2xpZCAxcHggJyArIGFjY2VudENvbG9yLFxuICAgICAgYm90dG9tOiAxLFxuICAgICAgbGVmdDogMCxcbiAgICAgIG1hcmdpbjogJy0xcHggJyArIHNwYWNpbmcuZGVza3RvcEd1dHRlciArICdweCcsXG4gICAgICByaWdodDogMCxcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnXG4gICAgfVxuICB9O1xufVxuXG52YXIgRHJvcERvd25NZW51ID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoRHJvcERvd25NZW51LCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBEcm9wRG93bk1lbnUoKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRHJvcERvd25NZW51KTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoX3JlZiA9IERyb3BEb3duTWVudS5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRHJvcERvd25NZW51KSkuY2FsbC5hcHBseShfcmVmLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBvcGVuOiBmYWxzZVxuICAgIH0sIF90aGlzLnJvb3ROb2RlID0gdW5kZWZpbmVkLCBfdGhpcy5hcnJvd05vZGUgPSB1bmRlZmluZWQsIF90aGlzLmhhbmRsZVRvdWNoVGFwQ29udHJvbCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmICghX3RoaXMucHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIG9wZW46ICFfdGhpcy5zdGF0ZS5vcGVuLFxuICAgICAgICAgIGFuY2hvckVsOiBfdGhpcy5yb290Tm9kZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCBfdGhpcy5oYW5kbGVSZXF1ZXN0Q2xvc2VNZW51ID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuY2xvc2UoZmFsc2UpO1xuICAgIH0sIF90aGlzLmhhbmRsZUVzY0tleURvd25NZW51ID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuY2xvc2UodHJ1ZSk7XG4gICAgfSwgX3RoaXMuaGFuZGxlS2V5RG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgc3dpdGNoICgoMCwgX2tleWNvZGUyLmRlZmF1bHQpKGV2ZW50KSkge1xuICAgICAgICBjYXNlICd1cCc6XG4gICAgICAgIGNhc2UgJ2Rvd24nOlxuICAgICAgICBjYXNlICdzcGFjZSc6XG4gICAgICAgIGNhc2UgJ2VudGVyJzpcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIG9wZW46IHRydWUsXG4gICAgICAgICAgICBhbmNob3JFbDogX3RoaXMucm9vdE5vZGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9LCBfdGhpcy5oYW5kbGVJdGVtVG91Y2hUYXAgPSBmdW5jdGlvbiAoZXZlbnQsIGNoaWxkLCBpbmRleCkge1xuICAgICAgaWYgKF90aGlzLnByb3BzLm11bHRpcGxlKSB7XG4gICAgICAgIGlmICghX3RoaXMuc3RhdGUub3Blbikge1xuICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgb3BlbjogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXZlbnQucGVyc2lzdCgpO1xuICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgb3BlbjogZmFsc2VcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChfdGhpcy5wcm9wcy5vbkNoYW5nZSkge1xuICAgICAgICAgICAgX3RoaXMucHJvcHMub25DaGFuZ2UoZXZlbnQsIGluZGV4LCBjaGlsZC5wcm9wcy52YWx1ZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX3RoaXMuY2xvc2UoX2V2ZW50czIuZGVmYXVsdC5pc0tleWJvYXJkKGV2ZW50KSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmhhbmRsZUNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCwgdmFsdWUpIHtcbiAgICAgIGlmIChfdGhpcy5wcm9wcy5tdWx0aXBsZSAmJiBfdGhpcy5wcm9wcy5vbkNoYW5nZSkge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbkNoYW5nZShldmVudCwgdW5kZWZpbmVkLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSwgX3RoaXMuY2xvc2UgPSBmdW5jdGlvbiAoaXNLZXlib2FyZCkge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBvcGVuOiBmYWxzZVxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoX3RoaXMucHJvcHMub25DbG9zZSkge1xuICAgICAgICAgIF90aGlzLnByb3BzLm9uQ2xvc2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0tleWJvYXJkKSB7XG4gICAgICAgICAgdmFyIGRyb3BBcnJvdyA9IF90aGlzLmFycm93Tm9kZTtcbiAgICAgICAgICB2YXIgZHJvcE5vZGUgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUoZHJvcEFycm93KTtcbiAgICAgICAgICBkcm9wTm9kZS5mb2N1cygpO1xuICAgICAgICAgIGRyb3BBcnJvdy5zZXRLZXlib2FyZEZvY3VzKHRydWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LCBfdGVtcCksICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkoX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgLy8gVGhlIG5lc3RlZCBzdHlsZXMgZm9yIGRyb3AtZG93bi1tZW51IGFyZSBtb2RpZmllZCBieSB0b29sYmFyIGFuZCBwb3NzaWJseVxuICAvLyBvdGhlciB1c2VyIGNvbXBvbmVudHMsIHNvIGl0IHdpbGwgZ2l2ZSBmdWxsIGFjY2VzcyB0byBpdHMganMgc3R5bGVzIHJhdGhlclxuICAvLyB0aGFuIGp1c3QgdGhlIHBhcmVudC5cblxuXG4gICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKERyb3BEb3duTWVudSwgW3tcbiAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmF1dG9XaWR0aCkge1xuICAgICAgICB0aGlzLnNldFdpZHRoKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5wcm9wcy5vcGVuSW1tZWRpYXRlbHkpIHtcbiAgICAgICAgLy8gVE9ETzogVGVtcG9yYXJ5IGZpeCB0byBtYWtlIG9wZW5JbW1lZGlhdGVseSB3b3JrIHdpdGggcG9wb3Zlci5cbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgcmVhY3Qvbm8tZGlkLW1vdW50LXNldC1zdGF0ZSAqL1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMyLnNldFN0YXRlKHtcbiAgICAgICAgICAgIG9wZW46IHRydWUsXG4gICAgICAgICAgICBhbmNob3JFbDogX3RoaXMyLnJvb3ROb2RlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIDApO1xuICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIHJlYWN0L25vLWRpZC1tb3VudC1zZXQtc3RhdGUgKi9cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcygpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmF1dG9XaWR0aCkge1xuICAgICAgICB0aGlzLnNldFdpZHRoKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZ2V0SW5wdXROb2RlJyxcblxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgZGVwcmVjYXRlZCBidXQgc3RpbGwgaGVyZSBiZWNhdXNlIHRoZSBUZXh0RmllbGRcbiAgICAgKiBuZWVkIGl0IGluIG9yZGVyIHRvIHdvcmsuIFRPRE86IFRoYXQgd2lsbCBiZSBhZGRyZXNzZWQgbGF0ZXIuXG4gICAgICovXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldElucHV0Tm9kZSgpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICB2YXIgcm9vdE5vZGUgPSB0aGlzLnJvb3ROb2RlO1xuXG4gICAgICByb290Tm9kZS5mb2N1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFfdGhpczMucHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgICAgICBfdGhpczMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgb3BlbjogIV90aGlzMy5zdGF0ZS5vcGVuLFxuICAgICAgICAgICAgYW5jaG9yRWw6IF90aGlzMy5yb290Tm9kZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gcm9vdE5vZGU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2V0V2lkdGgnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRXaWR0aCgpIHtcbiAgICAgIHZhciBlbCA9IHRoaXMucm9vdE5vZGU7XG4gICAgICBpZiAoIXRoaXMucHJvcHMuc3R5bGUgfHwgIXRoaXMucHJvcHMuc3R5bGUuaGFzT3duUHJvcGVydHkoJ3dpZHRoJykpIHtcbiAgICAgICAgZWwuc3R5bGUud2lkdGggPSAnYXV0byc7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGFuaW1hdGVkID0gX3Byb3BzLmFuaW1hdGVkLFxuICAgICAgICAgIGFuaW1hdGlvbiA9IF9wcm9wcy5hbmltYXRpb24sXG4gICAgICAgICAgYXV0b1dpZHRoID0gX3Byb3BzLmF1dG9XaWR0aCxcbiAgICAgICAgICBtdWx0aXBsZSA9IF9wcm9wcy5tdWx0aXBsZSxcbiAgICAgICAgICBjaGlsZHJlbiA9IF9wcm9wcy5jaGlsZHJlbixcbiAgICAgICAgICBjbGFzc05hbWUgPSBfcHJvcHMuY2xhc3NOYW1lLFxuICAgICAgICAgIGRpc2FibGVkID0gX3Byb3BzLmRpc2FibGVkLFxuICAgICAgICAgIGljb25TdHlsZSA9IF9wcm9wcy5pY29uU3R5bGUsXG4gICAgICAgICAgbGFiZWxTdHlsZSA9IF9wcm9wcy5sYWJlbFN0eWxlLFxuICAgICAgICAgIGxpc3RTdHlsZSA9IF9wcm9wcy5saXN0U3R5bGUsXG4gICAgICAgICAgbWF4SGVpZ2h0ID0gX3Byb3BzLm1heEhlaWdodCxcbiAgICAgICAgICBtZW51U3R5bGVQcm9wID0gX3Byb3BzLm1lbnVTdHlsZSxcbiAgICAgICAgICBzZWxlY3Rpb25SZW5kZXJlciA9IF9wcm9wcy5zZWxlY3Rpb25SZW5kZXJlcixcbiAgICAgICAgICBvbkNsb3NlID0gX3Byb3BzLm9uQ2xvc2UsXG4gICAgICAgICAgb3BlbkltbWVkaWF0ZWx5ID0gX3Byb3BzLm9wZW5JbW1lZGlhdGVseSxcbiAgICAgICAgICBtZW51SXRlbVN0eWxlID0gX3Byb3BzLm1lbnVJdGVtU3R5bGUsXG4gICAgICAgICAgc2VsZWN0ZWRNZW51SXRlbVN0eWxlID0gX3Byb3BzLnNlbGVjdGVkTWVudUl0ZW1TdHlsZSxcbiAgICAgICAgICBzdHlsZSA9IF9wcm9wcy5zdHlsZSxcbiAgICAgICAgICB1bmRlcmxpbmVTdHlsZSA9IF9wcm9wcy51bmRlcmxpbmVTdHlsZSxcbiAgICAgICAgICB2YWx1ZSA9IF9wcm9wcy52YWx1ZSxcbiAgICAgICAgICBpY29uQnV0dG9uID0gX3Byb3BzLmljb25CdXR0b24sXG4gICAgICAgICAgYW5jaG9yT3JpZ2luID0gX3Byb3BzLmFuY2hvck9yaWdpbixcbiAgICAgICAgICB0YXJnZXRPcmlnaW4gPSBfcHJvcHMudGFyZ2V0T3JpZ2luLFxuICAgICAgICAgIG90aGVyID0gKDAsIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMuZGVmYXVsdCkoX3Byb3BzLCBbJ2FuaW1hdGVkJywgJ2FuaW1hdGlvbicsICdhdXRvV2lkdGgnLCAnbXVsdGlwbGUnLCAnY2hpbGRyZW4nLCAnY2xhc3NOYW1lJywgJ2Rpc2FibGVkJywgJ2ljb25TdHlsZScsICdsYWJlbFN0eWxlJywgJ2xpc3RTdHlsZScsICdtYXhIZWlnaHQnLCAnbWVudVN0eWxlJywgJ3NlbGVjdGlvblJlbmRlcmVyJywgJ29uQ2xvc2UnLCAnb3BlbkltbWVkaWF0ZWx5JywgJ21lbnVJdGVtU3R5bGUnLCAnc2VsZWN0ZWRNZW51SXRlbVN0eWxlJywgJ3N0eWxlJywgJ3VuZGVybGluZVN0eWxlJywgJ3ZhbHVlJywgJ2ljb25CdXR0b24nLCAnYW5jaG9yT3JpZ2luJywgJ3RhcmdldE9yaWdpbiddKTtcbiAgICAgIHZhciBfc3RhdGUgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgIGFuY2hvckVsID0gX3N0YXRlLmFuY2hvckVsLFxuICAgICAgICAgIG9wZW4gPSBfc3RhdGUub3BlbjtcbiAgICAgIHZhciBwcmVwYXJlU3R5bGVzID0gdGhpcy5jb250ZXh0Lm11aVRoZW1lLnByZXBhcmVTdHlsZXM7XG5cbiAgICAgIHZhciBzdHlsZXMgPSBnZXRTdHlsZXModGhpcy5wcm9wcywgdGhpcy5jb250ZXh0KTtcblxuICAgICAgdmFyIGRpc3BsYXlWYWx1ZSA9ICcnO1xuICAgICAgaWYgKCFtdWx0aXBsZSkge1xuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuQ2hpbGRyZW4uZm9yRWFjaChjaGlsZHJlbiwgZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgaWYgKGNoaWxkICYmIHZhbHVlID09PSBjaGlsZC5wcm9wcy52YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHNlbGVjdGlvblJlbmRlcmVyKSB7XG4gICAgICAgICAgICAgIGRpc3BsYXlWYWx1ZSA9IHNlbGVjdGlvblJlbmRlcmVyKHZhbHVlLCBjaGlsZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBUaGlzIHdpbGwgbmVlZCB0byBiZSBpbXByb3ZlZCAoaW4gY2FzZSBwcmltYXJ5VGV4dCBpcyBhIG5vZGUpXG4gICAgICAgICAgICAgIGRpc3BsYXlWYWx1ZSA9IGNoaWxkLnByb3BzLmxhYmVsIHx8IGNoaWxkLnByb3BzLnByaW1hcnlUZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdmFsdWVzID0gW107XG4gICAgICAgIHZhciBzZWxlY3Rpb25SZW5kZXJlckNoaWxkcmVuID0gW107XG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5DaGlsZHJlbi5mb3JFYWNoKGNoaWxkcmVuLCBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgICBpZiAoY2hpbGQgJiYgdmFsdWUgJiYgdmFsdWUuaW5kZXhPZihjaGlsZC5wcm9wcy52YWx1ZSkgPiAtMSkge1xuICAgICAgICAgICAgaWYgKHNlbGVjdGlvblJlbmRlcmVyKSB7XG4gICAgICAgICAgICAgIHZhbHVlcy5wdXNoKGNoaWxkLnByb3BzLnZhbHVlKTtcbiAgICAgICAgICAgICAgc2VsZWN0aW9uUmVuZGVyZXJDaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhbHVlcy5wdXNoKGNoaWxkLnByb3BzLmxhYmVsIHx8IGNoaWxkLnByb3BzLnByaW1hcnlUZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRpc3BsYXlWYWx1ZSA9IFtdO1xuICAgICAgICBpZiAoc2VsZWN0aW9uUmVuZGVyZXIpIHtcbiAgICAgICAgICBkaXNwbGF5VmFsdWUgPSBzZWxlY3Rpb25SZW5kZXJlcih2YWx1ZXMsIHNlbGVjdGlvblJlbmRlcmVyQ2hpbGRyZW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRpc3BsYXlWYWx1ZSA9IHZhbHVlcy5qb2luKCcsICcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBtZW51U3R5bGUgPSB2b2lkIDA7XG4gICAgICBpZiAoYW5jaG9yRWwgJiYgIWF1dG9XaWR0aCkge1xuICAgICAgICBtZW51U3R5bGUgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe1xuICAgICAgICAgIHdpZHRoOiBhbmNob3JFbC5jbGllbnRXaWR0aFxuICAgICAgICB9LCBtZW51U3R5bGVQcm9wKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1lbnVTdHlsZSA9IG1lbnVTdHlsZVByb3A7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgICgwLCBfZXh0ZW5kczMuZGVmYXVsdCkoe30sIG90aGVyLCB7XG4gICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYobm9kZSkge1xuICAgICAgICAgICAgX3RoaXM0LnJvb3ROb2RlID0gbm9kZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICAgIHN0eWxlOiBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgc3R5bGVzLnJvb3QsIG9wZW4gJiYgc3R5bGVzLnJvb3RXaGVuT3Blbiwgc3R5bGUpKVxuICAgICAgICB9KSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgX0NsZWFyRml4Mi5kZWZhdWx0LFxuICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5jb250cm9sLCBvblRvdWNoVGFwOiB0aGlzLmhhbmRsZVRvdWNoVGFwQ29udHJvbCB9LFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7IHN0eWxlOiBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgc3R5bGVzLmxhYmVsLCBvcGVuICYmIHN0eWxlcy5sYWJlbFdoZW5PcGVuLCBsYWJlbFN0eWxlKSkgfSxcbiAgICAgICAgICAgIGRpc3BsYXlWYWx1ZVxuICAgICAgICAgICksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBfSWNvbkJ1dHRvbjIuZGVmYXVsdCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLFxuICAgICAgICAgICAgICBvbktleURvd246IHRoaXMuaGFuZGxlS2V5RG93bixcbiAgICAgICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYobm9kZSkge1xuICAgICAgICAgICAgICAgIF90aGlzNC5hcnJvd05vZGUgPSBub2RlO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBzdHlsZTogKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBzdHlsZXMuaWNvbiwgaWNvblN0eWxlKSxcbiAgICAgICAgICAgICAgaWNvblN0eWxlOiBzdHlsZXMuaWNvbkNoaWxkcmVuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaWNvbkJ1dHRvblxuICAgICAgICAgICksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgc3R5bGU6IHByZXBhcmVTdHlsZXMoKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBzdHlsZXMudW5kZXJsaW5lLCB1bmRlcmxpbmVTdHlsZSkpIH0pXG4gICAgICAgICksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIF9Qb3BvdmVyMi5kZWZhdWx0LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGFuY2hvck9yaWdpbjogYW5jaG9yT3JpZ2luLFxuICAgICAgICAgICAgdGFyZ2V0T3JpZ2luOiB0YXJnZXRPcmlnaW4sXG4gICAgICAgICAgICBhbmNob3JFbDogYW5jaG9yRWwsXG4gICAgICAgICAgICBhbmltYXRpb246IGFuaW1hdGlvbiB8fCBfUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsMi5kZWZhdWx0LFxuICAgICAgICAgICAgb3Blbjogb3BlbixcbiAgICAgICAgICAgIGFuaW1hdGVkOiBhbmltYXRlZCxcbiAgICAgICAgICAgIG9uUmVxdWVzdENsb3NlOiB0aGlzLmhhbmRsZVJlcXVlc3RDbG9zZU1lbnVcbiAgICAgICAgICB9LFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgX01lbnUyLmRlZmF1bHQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIG11bHRpcGxlOiBtdWx0aXBsZSxcbiAgICAgICAgICAgICAgbWF4SGVpZ2h0OiBtYXhIZWlnaHQsXG4gICAgICAgICAgICAgIGRlc2t0b3A6IHRydWUsXG4gICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgb25Fc2NLZXlEb3duOiB0aGlzLmhhbmRsZUVzY0tleURvd25NZW51LFxuICAgICAgICAgICAgICBzdHlsZTogbWVudVN0eWxlLFxuICAgICAgICAgICAgICBsaXN0U3R5bGU6IGxpc3RTdHlsZSxcbiAgICAgICAgICAgICAgb25JdGVtVG91Y2hUYXA6IHRoaXMuaGFuZGxlSXRlbVRvdWNoVGFwLFxuICAgICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5oYW5kbGVDaGFuZ2UsXG4gICAgICAgICAgICAgIG1lbnVJdGVtU3R5bGU6IG1lbnVJdGVtU3R5bGUsXG4gICAgICAgICAgICAgIHNlbGVjdGVkTWVudUl0ZW1TdHlsZTogc2VsZWN0ZWRNZW51SXRlbVN0eWxlLFxuICAgICAgICAgICAgICBhdXRvV2lkdGg6IGF1dG9XaWR0aCxcbiAgICAgICAgICAgICAgd2lkdGg6ICFhdXRvV2lkdGggJiYgbWVudVN0eWxlID8gbWVudVN0eWxlLndpZHRoIDogbnVsbFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNoaWxkcmVuXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gRHJvcERvd25NZW51O1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuRHJvcERvd25NZW51Lm11aU5hbWUgPSAnRHJvcERvd25NZW51JztcbkRyb3BEb3duTWVudS5kZWZhdWx0UHJvcHMgPSB7XG4gIGFuaW1hdGVkOiB0cnVlLFxuICBhdXRvV2lkdGg6IHRydWUsXG4gIGRpc2FibGVkOiBmYWxzZSxcbiAgaWNvbkJ1dHRvbjogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2Fycm93RHJvcERvd24yLmRlZmF1bHQsIG51bGwpLFxuICBvcGVuSW1tZWRpYXRlbHk6IGZhbHNlLFxuICBtYXhIZWlnaHQ6IDUwMCxcbiAgbXVsdGlwbGU6IGZhbHNlLFxuICBhbmNob3JPcmlnaW46IHtcbiAgICB2ZXJ0aWNhbDogJ3RvcCcsXG4gICAgaG9yaXpvbnRhbDogJ2xlZnQnXG4gIH1cbn07XG5Ecm9wRG93bk1lbnUuY29udGV4dFR5cGVzID0ge1xuICBtdWlUaGVtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QuaXNSZXF1aXJlZFxufTtcbkRyb3BEb3duTWVudS5wcm9wVHlwZXMgPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB7XG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSBwb2ludCBvbiB0aGUgYW5jaG9yIHRoYXQgdGhlIHBvcG92ZXInc1xuICAgKiBgdGFyZ2V0T3JpZ2luYCB3aWxsIGF0dGFjaCB0by5cbiAgICogT3B0aW9uczpcbiAgICogdmVydGljYWw6IFt0b3AsIGNlbnRlciwgYm90dG9tXVxuICAgKiBob3Jpem9udGFsOiBbbGVmdCwgbWlkZGxlLCByaWdodF0uXG4gICAqL1xuICBhbmNob3JPcmlnaW46IF9wcm9wVHlwZXM0LmRlZmF1bHQub3JpZ2luLFxuICAvKipcbiAgICogSWYgdHJ1ZSwgdGhlIHBvcG92ZXIgd2lsbCBhcHBseSB0cmFuc2l0aW9ucyB3aGVuXG4gICAqIGl0IGdldHMgYWRkZWQgdG8gdGhlIERPTS5cbiAgICovXG4gIGFuaW1hdGVkOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgZGVmYXVsdCBhbmltYXRpb24gY29tcG9uZW50IHVzZWQuXG4gICAqL1xuICBhbmltYXRpb246IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIFRoZSB3aWR0aCB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgc2V0IGFjY29yZGluZyB0byB0aGUgaXRlbXMgaW5zaWRlIHRoZSBtZW51LlxuICAgKiBUbyBjb250cm9sIHRoaXMgd2lkdGggaW4gY3NzIGluc3RlYWQsIHNldCB0aGlzIHByb3AgdG8gYGZhbHNlYC5cbiAgICovXG4gIGF1dG9XaWR0aDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogVGhlIGBNZW51SXRlbWBzIHRvIHBvcHVsYXRlIHRoZSBgTWVudWAgd2l0aC4gSWYgdGhlIGBNZW51SXRlbXNgIGhhdmUgdGhlXG4gICAqIHByb3AgYGxhYmVsYCB0aGF0IHZhbHVlIHdpbGwgYmUgdXNlZCB0byByZW5kZXIgdGhlIHJlcHJlc2VudGF0aW9uIG9mIHRoYXRcbiAgICogaXRlbSB3aXRoaW4gdGhlIGZpZWxkLlxuICAgKi9cbiAgY2hpbGRyZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgLyoqXG4gICAqIFRoZSBjc3MgY2xhc3MgbmFtZSBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgY2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIERpc2FibGVzIHRoZSBtZW51LlxuICAgKi9cbiAgZGlzYWJsZWQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlcyBkZWZhdWx0IGBTdmdJY29uYCBkcm9wZG93biBhcnJvdyBjb21wb25lbnQuXG4gICAqL1xuICBpY29uQnV0dG9uOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgdGhlIHN0eWxlcyBvZiBpY29uIGVsZW1lbnQuXG4gICAqL1xuICBpY29uU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogT3ZlcnJpZGVzIHRoZSBzdHlsZXMgb2YgbGFiZWwgd2hlbiB0aGUgYERyb3BEb3duTWVudWAgaXMgaW5hY3RpdmUuXG4gICAqL1xuICBsYWJlbFN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIFRoZSBzdHlsZSBvYmplY3QgdG8gdXNlIHRvIG92ZXJyaWRlIHVuZGVybHlpbmcgbGlzdCBzdHlsZS5cbiAgICovXG4gIGxpc3RTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBoZWlnaHQgb2YgdGhlIGBNZW51YCB3aGVuIGl0IGlzIGRpc3BsYXllZC5cbiAgICovXG4gIG1heEhlaWdodDogX3Byb3BUeXBlczIuZGVmYXVsdC5udW1iZXIsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiBtZW51IGl0ZW1zLlxuICAgKi9cbiAgbWVudUl0ZW1TdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgdGhlIHN0eWxlcyBvZiBgTWVudWAgd2hlbiB0aGUgYERyb3BEb3duTWVudWAgaXMgZGlzcGxheWVkLlxuICAgKi9cbiAgbWVudVN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIElmIHRydWUsIGB2YWx1ZWAgbXVzdCBiZSBhbiBhcnJheSBhbmQgdGhlIG1lbnUgd2lsbCBzdXBwb3J0XG4gICAqIG11bHRpcGxlIHNlbGVjdGlvbnMuXG4gICAqL1xuICBtdWx0aXBsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gZmlyZWQgd2hlbiBhIG1lbnUgaXRlbSBpcyBjbGlja2VkLCBvdGhlciB0aGFuIHRoZSBvbmUgY3VycmVudGx5IHNlbGVjdGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgVG91Y2hUYXAgZXZlbnQgdGFyZ2V0aW5nIHRoZSBtZW51IGl0ZW0gdGhhdCB3YXMgY2xpY2tlZC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGtleSBUaGUgaW5kZXggb2YgdGhlIGNsaWNrZWQgbWVudSBpdGVtIGluIHRoZSBgY2hpbGRyZW5gIGNvbGxlY3Rpb24uXG4gICAqIEBwYXJhbSB7YW55fSB2YWx1ZSBJZiBgbXVsdGlwbGVgIGlzIHRydWUsIHRoZSBtZW51J3MgYHZhbHVlYFxuICAgKiBhcnJheSB3aXRoIGVpdGhlciB0aGUgbWVudSBpdGVtJ3MgYHZhbHVlYCBhZGRlZCAoaWZcbiAgICogaXQgd2Fzbid0IGFscmVhZHkgc2VsZWN0ZWQpIG9yIG9taXR0ZWQgKGlmIGl0IHdhcyBhbHJlYWR5IHNlbGVjdGVkKS5cbiAgICogT3RoZXJ3aXNlLCB0aGUgYHZhbHVlYCBvZiB0aGUgbWVudSBpdGVtLlxuICAgKi9cbiAgb25DaGFuZ2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZpcmVkIHdoZW4gdGhlIG1lbnUgaXMgY2xvc2VkLlxuICAgKi9cbiAgb25DbG9zZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogU2V0IHRvIHRydWUgdG8gaGF2ZSB0aGUgYERyb3BEb3duTWVudWAgYXV0b21hdGljYWxseSBvcGVuIG9uIG1vdW50LlxuICAgKi9cbiAgb3BlbkltbWVkaWF0ZWx5OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiBzZWxlY3RlZCBtZW51IGl0ZW1zLlxuICAgKi9cbiAgc2VsZWN0ZWRNZW51SXRlbVN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZpcmVkIHdoZW4gYSBtZW51IGl0ZW0gaXMgY2xpY2tlZCwgb3RoZXIgdGhhbiB0aGUgb25lIGN1cnJlbnRseSBzZWxlY3RlZC5cbiAgICpcbiAgICogQHBhcmFtIHthbnl9IHZhbHVlIElmIGBtdWx0aXBsZWAgaXMgdHJ1ZSwgdGhlIG1lbnUncyBgdmFsdWVgXG4gICAqIGFycmF5IHdpdGggZWl0aGVyIHRoZSBtZW51IGl0ZW0ncyBgdmFsdWVgIGFkZGVkIChpZlxuICAgKiBpdCB3YXNuJ3QgYWxyZWFkeSBzZWxlY3RlZCkgb3Igb21pdHRlZCAoaWYgaXQgd2FzIGFscmVhZHkgc2VsZWN0ZWQpLlxuICAgKiBPdGhlcndpc2UsIHRoZSBgdmFsdWVgIG9mIHRoZSBtZW51IGl0ZW0uXG4gICAqIEBwYXJhbSB7YW55fSBtZW51SXRlbSBUaGUgc2VsZWN0ZWQgYE1lbnVJdGVtYC5cbiAgICogSWYgYG11bHRpcGxlYCBpcyB0cnVlLCB0aGlzIHdpbGwgYmUgYW4gYXJyYXkgd2l0aCB0aGUgYE1lbnVJdGVtYHMgbWF0Y2hpbmcgdGhlIGB2YWx1ZWBzIHBhcmFtZXRlci5cbiAgICovXG4gIHNlbGVjdGlvblJlbmRlcmVyOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhpcyBpcyB0aGUgcG9pbnQgb24gdGhlIHBvcG92ZXIgd2hpY2ggd2lsbCBhdHRhY2ggdG9cbiAgICogdGhlIGFuY2hvcidzIG9yaWdpbi5cbiAgICogT3B0aW9uczpcbiAgICogdmVydGljYWw6IFt0b3AsIGNlbnRlciwgYm90dG9tXVxuICAgKiBob3Jpem9udGFsOiBbbGVmdCwgbWlkZGxlLCByaWdodF0uXG4gICAqL1xuICB0YXJnZXRPcmlnaW46IF9wcm9wVHlwZXM0LmRlZmF1bHQub3JpZ2luLFxuICAvKipcbiAgICogT3ZlcnJpZGVzIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSB1bmRlcmxpbmUuXG4gICAqL1xuICB1bmRlcmxpbmVTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBJZiBgbXVsdGlwbGVgIGlzIHRydWUsIGFuIGFycmF5IG9mIHRoZSBgdmFsdWVgcyBvZiB0aGUgc2VsZWN0ZWRcbiAgICogbWVudSBpdGVtcy4gT3RoZXJ3aXNlLCB0aGUgYHZhbHVlYCBvZiB0aGUgc2VsZWN0ZWQgbWVudSBpdGVtLlxuICAgKiBJZiBwcm92aWRlZCwgdGhlIG1lbnUgd2lsbCBiZSBhIGNvbnRyb2xsZWQgY29tcG9uZW50LlxuICAgKi9cbiAgdmFsdWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYW55XG59IDoge307XG5leHBvcnRzLmRlZmF1bHQgPSBEcm9wRG93bk1lbnU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L21hdGVyaWFsLXVpL0Ryb3BEb3duTWVudS9Ecm9wRG93bk1lbnUuanNcbi8vIG1vZHVsZSBpZCA9IDE0OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9leHRlbmRzJyk7XG5cbnZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzJyk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZicpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcycpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybicpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpO1xuXG52YXIgX2luaGVyaXRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cycpO1xuXG52YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cbnZhciBfc2ltcGxlQXNzaWduID0gcmVxdWlyZSgnc2ltcGxlLWFzc2lnbicpO1xuXG52YXIgX3NpbXBsZUFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaW1wbGVBc3NpZ24pO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX3JlYWN0RG9tID0gcmVxdWlyZSgncmVhY3QtZG9tJyk7XG5cbnZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXG52YXIgX2V2ZW50cyA9IHJlcXVpcmUoJy4uL3V0aWxzL2V2ZW50cycpO1xuXG52YXIgX2V2ZW50czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ldmVudHMpO1xuXG52YXIgX3Byb3BUeXBlczMgPSByZXF1aXJlKCcuLi91dGlscy9wcm9wVHlwZXMnKTtcblxudmFyIF9wcm9wVHlwZXM0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzMyk7XG5cbnZhciBfTWVudSA9IHJlcXVpcmUoJy4uL01lbnUvTWVudScpO1xuXG52YXIgX01lbnUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTWVudSk7XG5cbnZhciBfUG9wb3ZlciA9IHJlcXVpcmUoJy4uL1BvcG92ZXIvUG9wb3ZlcicpO1xuXG52YXIgX1BvcG92ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUG9wb3Zlcik7XG5cbnZhciBfd2FybmluZyA9IHJlcXVpcmUoJ3dhcm5pbmcnKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgSWNvbk1lbnUgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShJY29uTWVudSwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gSWNvbk1lbnUoKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgSWNvbk1lbnUpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChfcmVmID0gSWNvbk1lbnUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKEljb25NZW51KSkuY2FsbC5hcHBseShfcmVmLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBtZW51SW5pdGlhbGx5S2V5Ym9hcmRGb2N1c2VkOiBmYWxzZSxcbiAgICAgIG9wZW46IGZhbHNlXG4gICAgfSwgX3RoaXMuaGFuZGxlSXRlbVRvdWNoVGFwID0gZnVuY3Rpb24gKGV2ZW50LCBjaGlsZCkge1xuICAgICAgaWYgKF90aGlzLnByb3BzLnRvdWNoVGFwQ2xvc2VEZWxheSAhPT0gMCAmJiAhY2hpbGQucHJvcHMuaGFzT3duUHJvcGVydHkoJ21lbnVJdGVtcycpKSB7XG4gICAgICAgIHZhciBpc0tleWJvYXJkID0gX2V2ZW50czIuZGVmYXVsdC5pc0tleWJvYXJkKGV2ZW50KTtcbiAgICAgICAgX3RoaXMudGltZXJDbG9zZUlkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMuY2xvc2UoaXNLZXlib2FyZCA/ICdlbnRlcicgOiAnaXRlbVRhcCcsIGlzS2V5Ym9hcmQpO1xuICAgICAgICB9LCBfdGhpcy5wcm9wcy50b3VjaFRhcENsb3NlRGVsYXkpO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5wcm9wcy5vbkl0ZW1Ub3VjaFRhcChldmVudCwgY2hpbGQpO1xuICAgIH0sIF90aGlzLmhhbmRsZVJlcXVlc3RDbG9zZSA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIF90aGlzLmNsb3NlKHJlYXNvbik7XG4gICAgfSwgX3RoaXMuaGFuZGxlRXNjS2V5RG93bk1lbnUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIF90aGlzLmNsb3NlKCdlc2NhcGUnLCBldmVudCk7XG4gICAgfSwgX3RlbXApLCAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKEljb25NZW51LCBbe1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgaWYgKG5leHRQcm9wcy5vcGVuICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgb3BlbjogbmV4dFByb3BzLm9wZW4sXG4gICAgICAgICAgYW5jaG9yRWw6IHRoaXMucmVmcy5pY29uTWVudUNvbnRhaW5lclxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsVW5tb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJDbG9zZUlkKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdpc09wZW4nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc09wZW4oKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdGF0ZS5vcGVuO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2Nsb3NlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2UocmVhc29uLCBpc0tleWJvYXJkKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgaWYgKCF0aGlzLnN0YXRlLm9wZW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wcm9wcy5vcGVuICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25SZXF1ZXN0Q2hhbmdlKGZhbHNlLCByZWFzb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IG9wZW46IGZhbHNlIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAvLyBTZXQgZm9jdXMgb24gdGhlIGljb24gYnV0dG9uIHdoZW4gdGhlIG1lbnUgY2xvc2VcbiAgICAgICAgICBpZiAoaXNLZXlib2FyZCkge1xuICAgICAgICAgICAgdmFyIGljb25CdXR0b24gPSBfdGhpczIucmVmcy5pY29uQnV0dG9uO1xuICAgICAgICAgICAgX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKGljb25CdXR0b24pLmZvY3VzKCk7XG4gICAgICAgICAgICBpY29uQnV0dG9uLnNldEtleWJvYXJkRm9jdXMoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29wZW4nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuKHJlYXNvbiwgZXZlbnQpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLm9wZW4gIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vblJlcXVlc3RDaGFuZ2UodHJ1ZSwgcmVhc29uKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgbWVudUluaXRpYWxseUtleWJvYXJkRm9jdXNlZDogX2V2ZW50czIuZGVmYXVsdC5pc0tleWJvYXJkKGV2ZW50KSxcbiAgICAgICAgICBhbmNob3JFbDogZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIG9wZW46IHRydWUsXG4gICAgICAgIG1lbnVJbml0aWFsbHlLZXlib2FyZEZvY3VzZWQ6IF9ldmVudHMyLmRlZmF1bHQuaXNLZXlib2FyZChldmVudCksXG4gICAgICAgIGFuY2hvckVsOiBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICB9KTtcblxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgYW5jaG9yT3JpZ2luID0gX3Byb3BzLmFuY2hvck9yaWdpbixcbiAgICAgICAgICBjbGFzc05hbWUgPSBfcHJvcHMuY2xhc3NOYW1lLFxuICAgICAgICAgIGFuaW1hdGVkID0gX3Byb3BzLmFuaW1hdGVkLFxuICAgICAgICAgIGFuaW1hdGlvbiA9IF9wcm9wcy5hbmltYXRpb24sXG4gICAgICAgICAgaWNvbkJ1dHRvbkVsZW1lbnQgPSBfcHJvcHMuaWNvbkJ1dHRvbkVsZW1lbnQsXG4gICAgICAgICAgaWNvblN0eWxlID0gX3Byb3BzLmljb25TdHlsZSxcbiAgICAgICAgICBvbkl0ZW1Ub3VjaFRhcCA9IF9wcm9wcy5vbkl0ZW1Ub3VjaFRhcCxcbiAgICAgICAgICBvbktleWJvYXJkRm9jdXMgPSBfcHJvcHMub25LZXlib2FyZEZvY3VzLFxuICAgICAgICAgIG9uTW91c2VEb3duID0gX3Byb3BzLm9uTW91c2VEb3duLFxuICAgICAgICAgIG9uTW91c2VMZWF2ZSA9IF9wcm9wcy5vbk1vdXNlTGVhdmUsXG4gICAgICAgICAgb25Nb3VzZUVudGVyID0gX3Byb3BzLm9uTW91c2VFbnRlcixcbiAgICAgICAgICBvbk1vdXNlVXAgPSBfcHJvcHMub25Nb3VzZVVwLFxuICAgICAgICAgIG9uUmVxdWVzdENoYW5nZSA9IF9wcm9wcy5vblJlcXVlc3RDaGFuZ2UsXG4gICAgICAgICAgb25Ub3VjaFRhcCA9IF9wcm9wcy5vblRvdWNoVGFwLFxuICAgICAgICAgIGxpc3RTdHlsZSA9IF9wcm9wcy5saXN0U3R5bGUsXG4gICAgICAgICAgbWVudVN0eWxlID0gX3Byb3BzLm1lbnVTdHlsZSxcbiAgICAgICAgICBzdHlsZSA9IF9wcm9wcy5zdHlsZSxcbiAgICAgICAgICB0YXJnZXRPcmlnaW4gPSBfcHJvcHMudGFyZ2V0T3JpZ2luLFxuICAgICAgICAgIHRvdWNoVGFwQ2xvc2VEZWxheSA9IF9wcm9wcy50b3VjaFRhcENsb3NlRGVsYXksXG4gICAgICAgICAgdXNlTGF5ZXJGb3JDbGlja0F3YXkgPSBfcHJvcHMudXNlTGF5ZXJGb3JDbGlja0F3YXksXG4gICAgICAgICAgb3RoZXIgPSAoMCwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMy5kZWZhdWx0KShfcHJvcHMsIFsnYW5jaG9yT3JpZ2luJywgJ2NsYXNzTmFtZScsICdhbmltYXRlZCcsICdhbmltYXRpb24nLCAnaWNvbkJ1dHRvbkVsZW1lbnQnLCAnaWNvblN0eWxlJywgJ29uSXRlbVRvdWNoVGFwJywgJ29uS2V5Ym9hcmRGb2N1cycsICdvbk1vdXNlRG93bicsICdvbk1vdXNlTGVhdmUnLCAnb25Nb3VzZUVudGVyJywgJ29uTW91c2VVcCcsICdvblJlcXVlc3RDaGFuZ2UnLCAnb25Ub3VjaFRhcCcsICdsaXN0U3R5bGUnLCAnbWVudVN0eWxlJywgJ3N0eWxlJywgJ3RhcmdldE9yaWdpbicsICd0b3VjaFRhcENsb3NlRGVsYXknLCAndXNlTGF5ZXJGb3JDbGlja0F3YXknXSk7XG4gICAgICB2YXIgcHJlcGFyZVN0eWxlcyA9IHRoaXMuY29udGV4dC5tdWlUaGVtZS5wcmVwYXJlU3R5bGVzO1xuICAgICAgdmFyIF9zdGF0ZSA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgb3BlbiA9IF9zdGF0ZS5vcGVuLFxuICAgICAgICAgIGFuY2hvckVsID0gX3N0YXRlLmFuY2hvckVsO1xuXG5cbiAgICAgIHZhciBzdHlsZXMgPSB7XG4gICAgICAgIHJvb3Q6IHtcbiAgICAgICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJ1xuICAgICAgICB9LFxuICAgICAgICBtZW51OiB7XG4gICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZSdcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdmFyIG1lcmdlZFJvb3RTdHlsZXMgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLnJvb3QsIHN0eWxlKTtcbiAgICAgIHZhciBtZXJnZWRNZW51U3R5bGVzID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5tZW51LCBtZW51U3R5bGUpO1xuXG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKGljb25CdXR0b25FbGVtZW50LnR5cGUubXVpTmFtZSAhPT0gJ1N2Z0ljb24nLCAnTWF0ZXJpYWwtVUk6IFlvdSBzaG91ZCBub3QgcHJvdmlkZSBhbiA8U3ZnSWNvbiAvPiB0byB0aGUgXFwnaWNvbkJ1dHRvbkVsZW1lbnRcXCcgcHJvcGVydHkgb2YgPEljb25NZW51IC8+LlxcbllvdSBzaG91bGQgd3JhcHBlZCBpdCB3aXRoIGFuIDxJY29uQnV0dG9uIC8+LicpIDogdm9pZCAwO1xuXG4gICAgICB2YXIgaWNvbkJ1dHRvblByb3BzID0ge1xuICAgICAgICBvbktleWJvYXJkRm9jdXM6IG9uS2V5Ym9hcmRGb2N1cyxcbiAgICAgICAgb25Ub3VjaFRhcDogZnVuY3Rpb24gb25Ub3VjaFRhcChldmVudCkge1xuICAgICAgICAgIF90aGlzMy5vcGVuKF9ldmVudHMyLmRlZmF1bHQuaXNLZXlib2FyZChldmVudCkgPyAna2V5Ym9hcmQnIDogJ2ljb25UYXAnLCBldmVudCk7XG4gICAgICAgICAgaWYgKGljb25CdXR0b25FbGVtZW50LnByb3BzLm9uVG91Y2hUYXApIHtcbiAgICAgICAgICAgIGljb25CdXR0b25FbGVtZW50LnByb3BzLm9uVG91Y2hUYXAoZXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVmOiAnaWNvbkJ1dHRvbidcbiAgICAgIH07XG4gICAgICBpZiAoaWNvblN0eWxlIHx8IGljb25CdXR0b25FbGVtZW50LnByb3BzLmljb25TdHlsZSkge1xuICAgICAgICBpY29uQnV0dG9uUHJvcHMuaWNvblN0eWxlID0gaWNvblN0eWxlID8gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBpY29uU3R5bGUsIGljb25CdXR0b25FbGVtZW50LnByb3BzLmljb25TdHlsZSkgOiBpY29uQnV0dG9uRWxlbWVudC5wcm9wcy5pY29uU3R5bGU7XG4gICAgICB9XG4gICAgICB2YXIgaWNvbkJ1dHRvbiA9IF9yZWFjdDIuZGVmYXVsdC5jbG9uZUVsZW1lbnQoaWNvbkJ1dHRvbkVsZW1lbnQsIGljb25CdXR0b25Qcm9wcyk7XG5cbiAgICAgIHZhciBtZW51ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgIF9NZW51Mi5kZWZhdWx0LFxuICAgICAgICAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBvdGhlciwge1xuICAgICAgICAgIGluaXRpYWxseUtleWJvYXJkRm9jdXNlZDogdGhpcy5zdGF0ZS5tZW51SW5pdGlhbGx5S2V5Ym9hcmRGb2N1c2VkLFxuICAgICAgICAgIG9uRXNjS2V5RG93bjogdGhpcy5oYW5kbGVFc2NLZXlEb3duTWVudSxcbiAgICAgICAgICBvbkl0ZW1Ub3VjaFRhcDogdGhpcy5oYW5kbGVJdGVtVG91Y2hUYXAsXG4gICAgICAgICAgc3R5bGU6IG1lcmdlZE1lbnVTdHlsZXMsXG4gICAgICAgICAgbGlzdFN0eWxlOiBsaXN0U3R5bGVcbiAgICAgICAgfSksXG4gICAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW5cbiAgICAgICk7XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHtcbiAgICAgICAgICByZWY6ICdpY29uTWVudUNvbnRhaW5lcicsXG4gICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgICAgb25Nb3VzZURvd246IG9uTW91c2VEb3duLFxuICAgICAgICAgIG9uTW91c2VMZWF2ZTogb25Nb3VzZUxlYXZlLFxuICAgICAgICAgIG9uTW91c2VFbnRlcjogb25Nb3VzZUVudGVyLFxuICAgICAgICAgIG9uTW91c2VVcDogb25Nb3VzZVVwLFxuICAgICAgICAgIG9uVG91Y2hUYXA6IG9uVG91Y2hUYXAsXG4gICAgICAgICAgc3R5bGU6IHByZXBhcmVTdHlsZXMobWVyZ2VkUm9vdFN0eWxlcylcbiAgICAgICAgfSxcbiAgICAgICAgaWNvbkJ1dHRvbixcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgX1BvcG92ZXIyLmRlZmF1bHQsXG4gICAgICAgICAge1xuICAgICAgICAgICAgYW5jaG9yT3JpZ2luOiBhbmNob3JPcmlnaW4sXG4gICAgICAgICAgICB0YXJnZXRPcmlnaW46IHRhcmdldE9yaWdpbixcbiAgICAgICAgICAgIG9wZW46IG9wZW4sXG4gICAgICAgICAgICBhbmNob3JFbDogYW5jaG9yRWwsXG4gICAgICAgICAgICBjaGlsZENvbnRleHRUeXBlczogdGhpcy5jb25zdHJ1Y3Rvci5jaGlsZENvbnRleHRUeXBlcyxcbiAgICAgICAgICAgIHVzZUxheWVyRm9yQ2xpY2tBd2F5OiB1c2VMYXllckZvckNsaWNrQXdheSxcbiAgICAgICAgICAgIG9uUmVxdWVzdENsb3NlOiB0aGlzLmhhbmRsZVJlcXVlc3RDbG9zZSxcbiAgICAgICAgICAgIGFuaW1hdGVkOiBhbmltYXRlZCxcbiAgICAgICAgICAgIGFuaW1hdGlvbjogYW5pbWF0aW9uLFxuICAgICAgICAgICAgY29udGV4dDogdGhpcy5jb250ZXh0XG4gICAgICAgICAgfSxcbiAgICAgICAgICBtZW51XG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBJY29uTWVudTtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbkljb25NZW51Lm11aU5hbWUgPSAnSWNvbk1lbnUnO1xuSWNvbk1lbnUuZGVmYXVsdFByb3BzID0ge1xuICBhbmNob3JPcmlnaW46IHtcbiAgICB2ZXJ0aWNhbDogJ3RvcCcsXG4gICAgaG9yaXpvbnRhbDogJ2xlZnQnXG4gIH0sXG4gIGFuaW1hdGVkOiB0cnVlLFxuICBtdWx0aXBsZTogZmFsc2UsXG4gIG9wZW46IG51bGwsXG4gIG9uSXRlbVRvdWNoVGFwOiBmdW5jdGlvbiBvbkl0ZW1Ub3VjaFRhcCgpIHt9LFxuICBvbktleWJvYXJkRm9jdXM6IGZ1bmN0aW9uIG9uS2V5Ym9hcmRGb2N1cygpIHt9LFxuICBvbk1vdXNlRG93bjogZnVuY3Rpb24gb25Nb3VzZURvd24oKSB7fSxcbiAgb25Nb3VzZUxlYXZlOiBmdW5jdGlvbiBvbk1vdXNlTGVhdmUoKSB7fSxcbiAgb25Nb3VzZUVudGVyOiBmdW5jdGlvbiBvbk1vdXNlRW50ZXIoKSB7fSxcbiAgb25Nb3VzZVVwOiBmdW5jdGlvbiBvbk1vdXNlVXAoKSB7fSxcbiAgb25SZXF1ZXN0Q2hhbmdlOiBmdW5jdGlvbiBvblJlcXVlc3RDaGFuZ2UoKSB7fSxcbiAgb25Ub3VjaFRhcDogZnVuY3Rpb24gb25Ub3VjaFRhcCgpIHt9LFxuICB0YXJnZXRPcmlnaW46IHtcbiAgICB2ZXJ0aWNhbDogJ3RvcCcsXG4gICAgaG9yaXpvbnRhbDogJ2xlZnQnXG4gIH0sXG4gIHRvdWNoVGFwQ2xvc2VEZWxheTogMjAwLFxuICB1c2VMYXllckZvckNsaWNrQXdheTogZmFsc2Vcbn07XG5JY29uTWVudS5jb250ZXh0VHlwZXMgPSB7XG4gIG11aVRoZW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkXG59O1xuSWNvbk1lbnUucHJvcFR5cGVzID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8ge1xuICAvKipcbiAgICogVGhpcyBpcyB0aGUgcG9pbnQgb24gdGhlIGljb24gd2hlcmUgdGhlIG1lbnVcbiAgICogYHRhcmdldE9yaWdpbmAgd2lsbCBhdHRhY2guXG4gICAqIE9wdGlvbnM6XG4gICAqIHZlcnRpY2FsOiBbdG9wLCBjZW50ZXIsIGJvdHRvbV1cbiAgICogaG9yaXpvbnRhbDogW2xlZnQsIG1pZGRsZSwgcmlnaHRdLlxuICAgKi9cbiAgYW5jaG9yT3JpZ2luOiBfcHJvcFR5cGVzNC5kZWZhdWx0Lm9yaWdpbixcbiAgLyoqXG4gICAqIElmIHRydWUsIHRoZSBwb3BvdmVyIHdpbGwgYXBwbHkgdHJhbnNpdGlvbnMgd2hlblxuICAgKiBpdCBnZXRzIGFkZGVkIHRvIHRoZSBET00uXG4gICAqL1xuICBhbmltYXRlZDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGRlZmF1bHQgYW5pbWF0aW9uIGNvbXBvbmVudCB1c2VkLlxuICAgKi9cbiAgYW5pbWF0aW9uOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBTaG91bGQgYmUgdXNlZCB0byBwYXNzIGBNZW51SXRlbWAgY29tcG9uZW50cy5cbiAgICovXG4gIGNoaWxkcmVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIC8qKlxuICAgKiBUaGUgQ1NTIGNsYXNzIG5hbWUgb2YgdGhlIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIGNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSBgSWNvbkJ1dHRvbmAgdG8gcmVuZGVyLiBUaGlzIGJ1dHRvbiB3aWxsIG9wZW4gdGhlIG1lbnUuXG4gICAqL1xuICBpY29uQnV0dG9uRWxlbWVudDogX3Byb3BUeXBlczIuZGVmYXVsdC5lbGVtZW50LmlzUmVxdWlyZWQsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgdW5kZXJseWluZyBpY29uIGVsZW1lbnQuXG4gICAqL1xuICBpY29uU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIHVuZGVybHlpbmcgYExpc3RgIGVsZW1lbnQuXG4gICAqL1xuICBsaXN0U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIG1lbnUgZWxlbWVudC5cbiAgICovXG4gIG1lbnVTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBJZiB0cnVlLCB0aGUgdmFsdWUgY2FuIGFuIGJlIGFycmF5IGFuZCBhbGxvdyB0aGUgbWVudSB0byBiZSBhIG11bHRpLXNlbGVjdC5cbiAgICovXG4gIG11bHRpcGxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmdW5jdGlvbiBmaXJlZCB3aGVuIGEgbWVudSBpdGVtIGlzIHNlbGVjdGVkIHdpdGggYSB0b3VjaC10YXAuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBUb3VjaFRhcCBldmVudCB0YXJnZXRpbmcgdGhlIHNlbGVjdGVkIG1lbnUgaXRlbSBlbGVtZW50LlxuICAgKiBAcGFyYW0ge29iamVjdH0gY2hpbGQgVGhlIHNlbGVjdGVkIGVsZW1lbnQuXG4gICAqL1xuICBvbkl0ZW1Ub3VjaFRhcDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gZmlyZWQgd2hlbiB0aGUgYEljb25CdXR0b25gIGVsZW1lbnQgaXMgZm9jdXNlZCBvciBibHVycmVkIGJ5IHRoZSBrZXlib2FyZC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IGBmb2N1c2Agb3IgYGJsdXJgIGV2ZW50IHRhcmdldGluZyB0aGUgYEljb25CdXR0b25gIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0ga2V5Ym9hcmRGb2N1c2VkIElmIHRydWUsIHRoZSBgSWNvbkJ1dHRvbmAgZWxlbWVudCBpcyBmb2N1c2VkLlxuICAgKi9cbiAgb25LZXlib2FyZEZvY3VzOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKiBAaWdub3JlICovXG4gIG9uTW91c2VEb3duOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKiBAaWdub3JlICovXG4gIG9uTW91c2VFbnRlcjogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKiogQGlnbm9yZSAqL1xuICBvbk1vdXNlTGVhdmU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqIEBpZ25vcmUgKi9cbiAgb25Nb3VzZVVwOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmdW5jdGlvbiBmaXJlZCB3aGVuIHRoZSBgb3BlbmAgc3RhdGUgb2YgdGhlIG1lbnUgaXMgcmVxdWVzdGVkIHRvIGJlIGNoYW5nZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3BlbiBJZiB0cnVlLCB0aGUgbWVudSB3YXMgcmVxdWVzdGVkIHRvIGJlIG9wZW5lZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlYXNvbiBUaGUgcmVhc29uIGZvciB0aGUgb3BlbiBvciBjbG9zZSByZXF1ZXN0LiBQb3NzaWJsZSB2YWx1ZXMgYXJlXG4gICAqICdrZXlib2FyZCcgYW5kICdpY29uVGFwJyBmb3Igb3BlbiByZXF1ZXN0czsgJ2VudGVyJywgJ2VzY2FwZScsICdpdGVtVGFwJywgYW5kICdjbGlja0F3YXknXG4gICAqIGZvciBjbG9zZSByZXF1ZXN0cy5cbiAgICovXG4gIG9uUmVxdWVzdENoYW5nZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gZmlyZWQgd2hlbiB0aGUgYEljb25CdXR0b25gIGVsZW1lbnQgaXMgdG91Y2gtdGFwcGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgVG91Y2hUYXAgZXZlbnQgdGFyZ2V0aW5nIHRoZSBgSWNvbkJ1dHRvbmAgZWxlbWVudC5cbiAgICovXG4gIG9uVG91Y2hUYXA6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIElmIHRydWUsIHRoZSBgSWNvbk1lbnVgIGlzIG9wZW5lZC5cbiAgICovXG4gIG9wZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSBwb2ludCBvbiB0aGUgbWVudSB3aGljaCB3aWxsIHN0aWNrIHRvIHRoZSBtZW51XG4gICAqIG9yaWdpbi5cbiAgICogT3B0aW9uczpcbiAgICogdmVydGljYWw6IFt0b3AsIGNlbnRlciwgYm90dG9tXVxuICAgKiBob3Jpem9udGFsOiBbbGVmdCwgbWlkZGxlLCByaWdodF0uXG4gICAqL1xuICB0YXJnZXRPcmlnaW46IF9wcm9wVHlwZXM0LmRlZmF1bHQub3JpZ2luLFxuICAvKipcbiAgICogU2V0cyB0aGUgZGVsYXkgaW4gbWlsbGlzZWNvbmRzIGJlZm9yZSBjbG9zaW5nIHRoZVxuICAgKiBtZW51IHdoZW4gYW4gaXRlbSBpcyBjbGlja2VkLlxuICAgKiBJZiBzZXQgdG8gMCB0aGVuIHRoZSBhdXRvIGNsb3NlIGZ1bmN0aW9uYWxpdHlcbiAgICogd2lsbCBiZSBkaXNhYmxlZC5cbiAgICovXG4gIHRvdWNoVGFwQ2xvc2VEZWxheTogX3Byb3BUeXBlczIuZGVmYXVsdC5udW1iZXIsXG4gIC8qKlxuICAgKiBJZiB0cnVlLCB0aGUgcG9wb3ZlciB3aWxsIHJlbmRlciBvbiB0b3Agb2YgYW4gaW52aXNpYmxlXG4gICAqIGxheWVyLCB3aGljaCB3aWxsIHByZXZlbnQgY2xpY2tzIHRvIHRoZSB1bmRlcmx5aW5nIGVsZW1lbnRzLlxuICAgKi9cbiAgdXNlTGF5ZXJGb3JDbGlja0F3YXk6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbFxufSA6IHt9O1xuZXhwb3J0cy5kZWZhdWx0ID0gSWNvbk1lbnU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L21hdGVyaWFsLXVpL0ljb25NZW51L0ljb25NZW51LmpzXG4vLyBtb2R1bGUgaWQgPSAxNTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBleHBvcnRzLk1lbnVJdGVtID0gZXhwb3J0cy5JY29uTWVudSA9IHVuZGVmaW5lZDtcblxudmFyIF9JY29uTWVudTIgPSByZXF1aXJlKCcuL0ljb25NZW51Jyk7XG5cbnZhciBfSWNvbk1lbnUzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSWNvbk1lbnUyKTtcblxudmFyIF9NZW51SXRlbTIgPSByZXF1aXJlKCcuLi9NZW51SXRlbS9NZW51SXRlbScpO1xuXG52YXIgX01lbnVJdGVtMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX01lbnVJdGVtMik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuSWNvbk1lbnUgPSBfSWNvbk1lbnUzLmRlZmF1bHQ7XG5leHBvcnRzLk1lbnVJdGVtID0gX01lbnVJdGVtMy5kZWZhdWx0O1xuZXhwb3J0cy5kZWZhdWx0ID0gX0ljb25NZW51My5kZWZhdWx0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9JY29uTWVudS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTUxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2V4dGVuZHMnKTtcblxudmFyIF9leHRlbmRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4dGVuZHMyKTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvb2JqZWN0V2l0aG91dFByb3BlcnRpZXMnKTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RXaXRob3V0UHJvcGVydGllczIpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mJyk7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjaycpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7XG5cbnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzJyk7XG5cbnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuJyk7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7XG5cbnZhciBfaW5oZXJpdHMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzJyk7XG5cbnZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTtcblxudmFyIF9zaW1wbGVBc3NpZ24gPSByZXF1aXJlKCdzaW1wbGUtYXNzaWduJyk7XG5cbnZhciBfc2ltcGxlQXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NpbXBsZUFzc2lnbik7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbnZhciBfdHJhbnNpdGlvbnMgPSByZXF1aXJlKCcuLi9zdHlsZXMvdHJhbnNpdGlvbnMnKTtcblxudmFyIF90cmFuc2l0aW9uczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90cmFuc2l0aW9ucyk7XG5cbnZhciBfQ2xpY2tBd2F5TGlzdGVuZXIgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9DbGlja0F3YXlMaXN0ZW5lcicpO1xuXG52YXIgX0NsaWNrQXdheUxpc3RlbmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NsaWNrQXdheUxpc3RlbmVyKTtcblxudmFyIF9TbmFja2JhckJvZHkgPSByZXF1aXJlKCcuL1NuYWNrYmFyQm9keScpO1xuXG52YXIgX1NuYWNrYmFyQm9keTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TbmFja2JhckJvZHkpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBnZXRTdHlsZXMocHJvcHMsIGNvbnRleHQsIHN0YXRlKSB7XG4gIHZhciBfY29udGV4dCRtdWlUaGVtZSA9IGNvbnRleHQubXVpVGhlbWUsXG4gICAgICBkZXNrdG9wU3ViaGVhZGVySGVpZ2h0ID0gX2NvbnRleHQkbXVpVGhlbWUuYmFzZVRoZW1lLnNwYWNpbmcuZGVza3RvcFN1YmhlYWRlckhlaWdodCxcbiAgICAgIHpJbmRleCA9IF9jb250ZXh0JG11aVRoZW1lLnpJbmRleDtcbiAgdmFyIG9wZW4gPSBzdGF0ZS5vcGVuO1xuXG5cbiAgdmFyIHN0eWxlcyA9IHtcbiAgICByb290OiB7XG4gICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAgIGxlZnQ6ICc1MCUnLFxuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgYm90dG9tOiAwLFxuICAgICAgekluZGV4OiB6SW5kZXguc25hY2tiYXIsXG4gICAgICB2aXNpYmlsaXR5OiBvcGVuID8gJ3Zpc2libGUnIDogJ2hpZGRlbicsXG4gICAgICB0cmFuc2Zvcm06IG9wZW4gPyAndHJhbnNsYXRlKC01MCUsIDApJyA6ICd0cmFuc2xhdGUoLTUwJSwgJyArIGRlc2t0b3BTdWJoZWFkZXJIZWlnaHQgKyAncHgpJyxcbiAgICAgIHRyYW5zaXRpb246IF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KCc0MDBtcycsICd0cmFuc2Zvcm0nKSArICcsICcgKyBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnNDAwbXMnLCAndmlzaWJpbGl0eScpXG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBzdHlsZXM7XG59XG5cbnZhciBTbmFja2JhciA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKFNuYWNrYmFyLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBTbmFja2JhcigpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBTbmFja2Jhcik7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKF9yZWYgPSBTbmFja2Jhci5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoU25hY2tiYXIpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5jb21wb25lbnRDbGlja0F3YXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoX3RoaXMudGltZXJUcmFuc2l0aW9uSWQpIHtcbiAgICAgICAgLy8gSWYgdHJhbnNpdGlvbmluZywgZG9uJ3QgY2xvc2UgdGhlIHNuYWNrYmFyLlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChfdGhpcy5wcm9wcy5vcGVuICE9PSBudWxsICYmIF90aGlzLnByb3BzLm9uUmVxdWVzdENsb3NlKSB7XG4gICAgICAgIF90aGlzLnByb3BzLm9uUmVxdWVzdENsb3NlKCdjbGlja2F3YXknKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF90aGlzLnNldFN0YXRlKHsgb3BlbjogZmFsc2UgfSk7XG4gICAgICB9XG4gICAgfSwgX3RlbXApLCAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKFNuYWNrYmFyLCBbe1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBvcGVuOiB0aGlzLnByb3BzLm9wZW4sXG4gICAgICAgIG1lc3NhZ2U6IHRoaXMucHJvcHMubWVzc2FnZSxcbiAgICAgICAgYWN0aW9uOiB0aGlzLnByb3BzLmFjdGlvblxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIGlmICh0aGlzLnN0YXRlLm9wZW4pIHtcbiAgICAgICAgdGhpcy5zZXRBdXRvSGlkZVRpbWVyKCk7XG4gICAgICAgIHRoaXMuc2V0VHJhbnNpdGlvblRpbWVyKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMucHJvcHMub3BlbiAmJiBuZXh0UHJvcHMub3BlbiAmJiAobmV4dFByb3BzLm1lc3NhZ2UgIT09IHRoaXMucHJvcHMubWVzc2FnZSB8fCBuZXh0UHJvcHMuYWN0aW9uICE9PSB0aGlzLnByb3BzLmFjdGlvbikpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgb3BlbjogZmFsc2VcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJPbmVBdFRoZVRpbWVJZCk7XG4gICAgICAgIHRoaXMudGltZXJPbmVBdFRoZVRpbWVJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBuZXh0UHJvcHMubWVzc2FnZSxcbiAgICAgICAgICAgIGFjdGlvbjogbmV4dFByb3BzLmFjdGlvbixcbiAgICAgICAgICAgIG9wZW46IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgNDAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBvcGVuID0gbmV4dFByb3BzLm9wZW47XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgb3Blbjogb3BlbiAhPT0gbnVsbCA/IG9wZW4gOiB0aGlzLnN0YXRlLm9wZW4sXG4gICAgICAgICAgbWVzc2FnZTogbmV4dFByb3BzLm1lc3NhZ2UsXG4gICAgICAgICAgYWN0aW9uOiBuZXh0UHJvcHMuYWN0aW9uXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudERpZFVwZGF0ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgaWYgKHByZXZTdGF0ZS5vcGVuICE9PSB0aGlzLnN0YXRlLm9wZW4pIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUub3Blbikge1xuICAgICAgICAgIHRoaXMuc2V0QXV0b0hpZGVUaW1lcigpO1xuICAgICAgICAgIHRoaXMuc2V0VHJhbnNpdGlvblRpbWVyKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJBdXRvSGlkZUlkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxVbm1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lckF1dG9IaWRlSWQpO1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJUcmFuc2l0aW9uSWQpO1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJPbmVBdFRoZVRpbWVJZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2V0QXV0b0hpZGVUaW1lcicsXG5cblxuICAgIC8vIFRpbWVyIHRoYXQgY29udHJvbHMgZGVsYXkgYmVmb3JlIHNuYWNrYmFyIGF1dG8gaGlkZXNcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0QXV0b0hpZGVUaW1lcigpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICB2YXIgYXV0b0hpZGVEdXJhdGlvbiA9IHRoaXMucHJvcHMuYXV0b0hpZGVEdXJhdGlvbjtcblxuICAgICAgaWYgKGF1dG9IaWRlRHVyYXRpb24gPiAwKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyQXV0b0hpZGVJZCk7XG4gICAgICAgIHRoaXMudGltZXJBdXRvSGlkZUlkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKF90aGlzMy5wcm9wcy5vcGVuICE9PSBudWxsICYmIF90aGlzMy5wcm9wcy5vblJlcXVlc3RDbG9zZSkge1xuICAgICAgICAgICAgX3RoaXMzLnByb3BzLm9uUmVxdWVzdENsb3NlKCd0aW1lb3V0Jyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzMy5zZXRTdGF0ZSh7IG9wZW46IGZhbHNlIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgYXV0b0hpZGVEdXJhdGlvbik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVGltZXIgdGhhdCBjb250cm9scyBkZWxheSBiZWZvcmUgY2xpY2stYXdheSBldmVudHMgYXJlIGNhcHR1cmVkIChiYXNlZCBvbiB3aGVuIGFuaW1hdGlvbiBjb21wbGV0ZXMpXG5cbiAgfSwge1xuICAgIGtleTogJ3NldFRyYW5zaXRpb25UaW1lcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldFRyYW5zaXRpb25UaW1lcigpIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICB0aGlzLnRpbWVyVHJhbnNpdGlvbklkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzNC50aW1lclRyYW5zaXRpb25JZCA9IHVuZGVmaW5lZDtcbiAgICAgIH0sIDQwMCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgYXV0b0hpZGVEdXJhdGlvbiA9IF9wcm9wcy5hdXRvSGlkZUR1cmF0aW9uLFxuICAgICAgICAgIGNvbnRlbnRTdHlsZSA9IF9wcm9wcy5jb250ZW50U3R5bGUsXG4gICAgICAgICAgYm9keVN0eWxlID0gX3Byb3BzLmJvZHlTdHlsZSxcbiAgICAgICAgICBtZXNzYWdlUHJvcCA9IF9wcm9wcy5tZXNzYWdlLFxuICAgICAgICAgIG9uUmVxdWVzdENsb3NlID0gX3Byb3BzLm9uUmVxdWVzdENsb3NlLFxuICAgICAgICAgIG9uQWN0aW9uVG91Y2hUYXAgPSBfcHJvcHMub25BY3Rpb25Ub3VjaFRhcCxcbiAgICAgICAgICBzdHlsZSA9IF9wcm9wcy5zdHlsZSxcbiAgICAgICAgICBvdGhlciA9ICgwLCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzLmRlZmF1bHQpKF9wcm9wcywgWydhdXRvSGlkZUR1cmF0aW9uJywgJ2NvbnRlbnRTdHlsZScsICdib2R5U3R5bGUnLCAnbWVzc2FnZScsICdvblJlcXVlc3RDbG9zZScsICdvbkFjdGlvblRvdWNoVGFwJywgJ3N0eWxlJ10pO1xuICAgICAgdmFyIF9zdGF0ZSA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgYWN0aW9uID0gX3N0YXRlLmFjdGlvbixcbiAgICAgICAgICBtZXNzYWdlID0gX3N0YXRlLm1lc3NhZ2UsXG4gICAgICAgICAgb3BlbiA9IF9zdGF0ZS5vcGVuO1xuICAgICAgdmFyIHByZXBhcmVTdHlsZXMgPSB0aGlzLmNvbnRleHQubXVpVGhlbWUucHJlcGFyZVN0eWxlcztcblxuICAgICAgdmFyIHN0eWxlcyA9IGdldFN0eWxlcyh0aGlzLnByb3BzLCB0aGlzLmNvbnRleHQsIHRoaXMuc3RhdGUpO1xuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgIF9DbGlja0F3YXlMaXN0ZW5lcjIuZGVmYXVsdCxcbiAgICAgICAgeyBvbkNsaWNrQXdheTogb3BlbiA/IHRoaXMuY29tcG9uZW50Q2xpY2tBd2F5IDogbnVsbCB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBvdGhlciwgeyBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLnJvb3QsIHN0eWxlKSkgfSksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1NuYWNrYmFyQm9keTIuZGVmYXVsdCwge1xuICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgICAgICBjb250ZW50U3R5bGU6IGNvbnRlbnRTdHlsZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICBvcGVuOiBvcGVuLFxuICAgICAgICAgICAgb25BY3Rpb25Ub3VjaFRhcDogb25BY3Rpb25Ub3VjaFRhcCxcbiAgICAgICAgICAgIHN0eWxlOiBib2R5U3R5bGVcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gU25hY2tiYXI7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5TbmFja2Jhci5jb250ZXh0VHlwZXMgPSB7XG4gIG11aVRoZW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkXG59O1xuU25hY2tiYXIucHJvcFR5cGVzID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8ge1xuICAvKipcbiAgICogVGhlIGxhYmVsIGZvciB0aGUgYWN0aW9uIG9uIHRoZSBzbmFja2Jhci5cbiAgICovXG4gIGFjdGlvbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gd2FpdCBiZWZvcmUgYXV0b21hdGljYWxseSBkaXNtaXNzaW5nLlxuICAgKiBJZiBubyB2YWx1ZSBpcyBzcGVjaWZpZWQgdGhlIHNuYWNrYmFyIHdpbGwgZGlzbWlzcyBub3JtYWxseS5cbiAgICogSWYgYSB2YWx1ZSBpcyBwcm92aWRlZCB0aGUgc25hY2tiYXIgY2FuIHN0aWxsIGJlIGRpc21pc3NlZCBub3JtYWxseS5cbiAgICogSWYgYSBzbmFja2JhciBpcyBkaXNtaXNzZWQgYmVmb3JlIHRoZSB0aW1lciBleHBpcmVzLCB0aGUgdGltZXIgd2lsbCBiZSBjbGVhcmVkLlxuICAgKi9cbiAgYXV0b0hpZGVEdXJhdGlvbjogX3Byb3BUeXBlczIuZGVmYXVsdC5udW1iZXIsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgYm9keSBlbGVtZW50LlxuICAgKi9cbiAgYm9keVN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIFRoZSBjc3MgY2xhc3MgbmFtZSBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgY2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBjb250ZW50IGVsZW1lbnQuXG4gICAqL1xuICBjb250ZW50U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhlIG1lc3NhZ2UgdG8gYmUgZGlzcGxheWVkLlxuICAgKlxuICAgKiAoTm90ZTogSWYgdGhlIG1lc3NhZ2UgaXMgYW4gZWxlbWVudCBvciBhcnJheSwgYW5kIHRoZSBgU25hY2tiYXJgIG1heSByZS1yZW5kZXIgd2hpbGUgaXQgaXMgc3RpbGwgb3BlbixcbiAgICogZW5zdXJlIHRoYXQgdGhlIHNhbWUgb2JqZWN0IHJlbWFpbnMgYXMgdGhlIGBtZXNzYWdlYCBwcm9wZXJ0eSBpZiB5b3Ugd2FudCB0byBhdm9pZCB0aGUgYFNuYWNrYmFyYCBoaWRpbmcgYW5kXG4gICAqIHNob3dpbmcgYWdhaW4pXG4gICAqL1xuICBtZXNzYWdlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUuaXNSZXF1aXJlZCxcbiAgLyoqXG4gICAqIEZpcmVkIHdoZW4gdGhlIGFjdGlvbiBidXR0b24gaXMgdG91Y2h0YXBwZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBBY3Rpb24gYnV0dG9uIGV2ZW50LlxuICAgKi9cbiAgb25BY3Rpb25Ub3VjaFRhcDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogRmlyZWQgd2hlbiB0aGUgYFNuYWNrYmFyYCBpcyByZXF1ZXN0ZWQgdG8gYmUgY2xvc2VkIGJ5IGEgY2xpY2sgb3V0c2lkZSB0aGUgYFNuYWNrYmFyYCwgb3IgYWZ0ZXIgdGhlXG4gICAqIGBhdXRvSGlkZUR1cmF0aW9uYCB0aW1lciBleHBpcmVzLlxuICAgKlxuICAgKiBUeXBpY2FsbHkgYG9uUmVxdWVzdENsb3NlYCBpcyB1c2VkIHRvIHNldCBzdGF0ZSBpbiB0aGUgcGFyZW50IGNvbXBvbmVudCwgd2hpY2ggaXMgdXNlZCB0byBjb250cm9sIHRoZSBgU25hY2tiYXJgXG4gICAqIGBvcGVuYCBwcm9wLlxuICAgKlxuICAgKiBUaGUgYHJlYXNvbmAgcGFyYW1ldGVyIGNhbiBvcHRpb25hbGx5IGJlIHVzZWQgdG8gY29udHJvbCB0aGUgcmVzcG9uc2UgdG8gYG9uUmVxdWVzdENsb3NlYCxcbiAgICogZm9yIGV4YW1wbGUgaWdub3JpbmcgYGNsaWNrYXdheWAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gQ2FuIGJlOmBcInRpbWVvdXRcImAgKGBhdXRvSGlkZUR1cmF0aW9uYCBleHBpcmVkKSBvcjogYFwiY2xpY2thd2F5XCJgXG4gICAqL1xuICBvblJlcXVlc3RDbG9zZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogQ29udHJvbHMgd2hldGhlciB0aGUgYFNuYWNrYmFyYCBpcyBvcGVuZWQgb3Igbm90LlxuICAgKi9cbiAgb3BlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLmlzUmVxdWlyZWQsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0XG59IDoge307XG5leHBvcnRzLmRlZmF1bHQgPSBTbmFja2JhcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWF0ZXJpYWwtdWkvU25hY2tiYXIvU25hY2tiYXIuanNcbi8vIG1vZHVsZSBpZCA9IDE1MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuU25hY2tiYXJCb2R5ID0gdW5kZWZpbmVkO1xuXG52YXIgX2V4dGVuZHMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2V4dGVuZHMnKTtcblxudmFyIF9leHRlbmRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4dGVuZHMyKTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvb2JqZWN0V2l0aG91dFByb3BlcnRpZXMnKTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RXaXRob3V0UHJvcGVydGllczIpO1xuXG52YXIgX3NpbXBsZUFzc2lnbiA9IHJlcXVpcmUoJ3NpbXBsZS1hc3NpZ24nKTtcblxudmFyIF9zaW1wbGVBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2ltcGxlQXNzaWduKTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxudmFyIF90cmFuc2l0aW9ucyA9IHJlcXVpcmUoJy4uL3N0eWxlcy90cmFuc2l0aW9ucycpO1xuXG52YXIgX3RyYW5zaXRpb25zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RyYW5zaXRpb25zKTtcblxudmFyIF93aXRoV2lkdGggPSByZXF1aXJlKCcuLi91dGlscy93aXRoV2lkdGgnKTtcblxudmFyIF93aXRoV2lkdGgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2l0aFdpZHRoKTtcblxudmFyIF9GbGF0QnV0dG9uID0gcmVxdWlyZSgnLi4vRmxhdEJ1dHRvbicpO1xuXG52YXIgX0ZsYXRCdXR0b24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRmxhdEJ1dHRvbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGdldFN0eWxlcyhwcm9wcywgY29udGV4dCkge1xuICB2YXIgb3BlbiA9IHByb3BzLm9wZW4sXG4gICAgICB3aWR0aCA9IHByb3BzLndpZHRoO1xuICB2YXIgX2NvbnRleHQkbXVpVGhlbWUgPSBjb250ZXh0Lm11aVRoZW1lLFxuICAgICAgX2NvbnRleHQkbXVpVGhlbWUkYmFzID0gX2NvbnRleHQkbXVpVGhlbWUuYmFzZVRoZW1lLFxuICAgICAgX2NvbnRleHQkbXVpVGhlbWUkYmFzMiA9IF9jb250ZXh0JG11aVRoZW1lJGJhcy5zcGFjaW5nLFxuICAgICAgZGVza3RvcEd1dHRlciA9IF9jb250ZXh0JG11aVRoZW1lJGJhczIuZGVza3RvcEd1dHRlcixcbiAgICAgIGRlc2t0b3BTdWJoZWFkZXJIZWlnaHQgPSBfY29udGV4dCRtdWlUaGVtZSRiYXMyLmRlc2t0b3BTdWJoZWFkZXJIZWlnaHQsXG4gICAgICBmb250RmFtaWx5ID0gX2NvbnRleHQkbXVpVGhlbWUkYmFzLmZvbnRGYW1pbHksXG4gICAgICBfY29udGV4dCRtdWlUaGVtZSRzbmEgPSBfY29udGV4dCRtdWlUaGVtZS5zbmFja2JhcixcbiAgICAgIGJhY2tncm91bmRDb2xvciA9IF9jb250ZXh0JG11aVRoZW1lJHNuYS5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICB0ZXh0Q29sb3IgPSBfY29udGV4dCRtdWlUaGVtZSRzbmEudGV4dENvbG9yLFxuICAgICAgYWN0aW9uQ29sb3IgPSBfY29udGV4dCRtdWlUaGVtZSRzbmEuYWN0aW9uQ29sb3IsXG4gICAgICBib3JkZXJSYWRpdXMgPSBfY29udGV4dCRtdWlUaGVtZS5ib3JkZXJSYWRpdXM7XG5cblxuICB2YXIgaXNTbWFsbCA9IHdpZHRoID09PSBfd2l0aFdpZHRoLlNNQUxMO1xuXG4gIHZhciBzdHlsZXMgPSB7XG4gICAgcm9vdDoge1xuICAgICAgZm9udEZhbWlseTogZm9udEZhbWlseSxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogYmFja2dyb3VuZENvbG9yLFxuICAgICAgcGFkZGluZzogJzAgJyArIGRlc2t0b3BHdXR0ZXIgKyAncHgnLFxuICAgICAgaGVpZ2h0OiBkZXNrdG9wU3ViaGVhZGVySGVpZ2h0LFxuICAgICAgbGluZUhlaWdodDogZGVza3RvcFN1YmhlYWRlckhlaWdodCArICdweCcsXG4gICAgICBib3JkZXJSYWRpdXM6IGlzU21hbGwgPyAwIDogYm9yZGVyUmFkaXVzLFxuICAgICAgbWF4V2lkdGg6IGlzU21hbGwgPyAnaW5oZXJpdCcgOiA1NjgsXG4gICAgICBtaW5XaWR0aDogaXNTbWFsbCA/ICdpbmhlcml0JyA6IDI4OCxcbiAgICAgIHdpZHRoOiBpc1NtYWxsID8gJ2NhbGMoMTAwdncgLSAnICsgZGVza3RvcEd1dHRlciAqIDIgKyAncHgpJyA6ICdhdXRvJyxcbiAgICAgIGZsZXhHcm93OiBpc1NtYWxsID8gMSA6IDBcbiAgICB9LFxuICAgIGNvbnRlbnQ6IHtcbiAgICAgIGZvbnRTaXplOiAxNCxcbiAgICAgIGNvbG9yOiB0ZXh0Q29sb3IsXG4gICAgICBvcGFjaXR5OiBvcGVuID8gMSA6IDAsXG4gICAgICB0cmFuc2l0aW9uOiBvcGVuID8gX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoJzUwMG1zJywgJ29wYWNpdHknLCAnMTAwbXMnKSA6IF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KCc0MDBtcycsICdvcGFjaXR5JylcbiAgICB9LFxuICAgIGFjdGlvbjoge1xuICAgICAgY29sb3I6IGFjdGlvbkNvbG9yLFxuICAgICAgZmxvYXQ6ICdyaWdodCcsXG4gICAgICBtYXJnaW5Ub3A6IDYsXG4gICAgICBtYXJnaW5SaWdodDogLTE2LFxuICAgICAgbWFyZ2luTGVmdDogZGVza3RvcEd1dHRlcixcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50J1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gc3R5bGVzO1xufVxuXG52YXIgU25hY2tiYXJCb2R5ID0gZnVuY3Rpb24gU25hY2tiYXJCb2R5KHByb3BzLCBjb250ZXh0KSB7XG4gIHZhciBhY3Rpb24gPSBwcm9wcy5hY3Rpb24sXG4gICAgICBjb250ZW50U3R5bGUgPSBwcm9wcy5jb250ZW50U3R5bGUsXG4gICAgICBtZXNzYWdlID0gcHJvcHMubWVzc2FnZSxcbiAgICAgIG9wZW4gPSBwcm9wcy5vcGVuLFxuICAgICAgb25BY3Rpb25Ub3VjaFRhcCA9IHByb3BzLm9uQWN0aW9uVG91Y2hUYXAsXG4gICAgICBzdHlsZSA9IHByb3BzLnN0eWxlLFxuICAgICAgb3RoZXIgPSAoMCwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMy5kZWZhdWx0KShwcm9wcywgWydhY3Rpb24nLCAnY29udGVudFN0eWxlJywgJ21lc3NhZ2UnLCAnb3BlbicsICdvbkFjdGlvblRvdWNoVGFwJywgJ3N0eWxlJ10pO1xuICB2YXIgcHJlcGFyZVN0eWxlcyA9IGNvbnRleHQubXVpVGhlbWUucHJlcGFyZVN0eWxlcztcblxuICB2YXIgc3R5bGVzID0gZ2V0U3R5bGVzKHByb3BzLCBjb250ZXh0KTtcblxuICB2YXIgYWN0aW9uQnV0dG9uID0gYWN0aW9uICYmIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9GbGF0QnV0dG9uMi5kZWZhdWx0LCB7XG4gICAgc3R5bGU6IHN0eWxlcy5hY3Rpb24sXG4gICAgbGFiZWw6IGFjdGlvbixcbiAgICBvblRvdWNoVGFwOiBvbkFjdGlvblRvdWNoVGFwXG4gIH0pO1xuXG4gIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAnZGl2JyxcbiAgICAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBvdGhlciwgeyBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLnJvb3QsIHN0eWxlKSkgfSksXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAnZGl2JyxcbiAgICAgIHsgc3R5bGU6IHByZXBhcmVTdHlsZXMoKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5jb250ZW50LCBjb250ZW50U3R5bGUpKSB9LFxuICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdzcGFuJyxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgbWVzc2FnZVxuICAgICAgKSxcbiAgICAgIGFjdGlvbkJ1dHRvblxuICAgIClcbiAgKTtcbn07XG5cbmV4cG9ydHMuU25hY2tiYXJCb2R5ID0gU25hY2tiYXJCb2R5O1xuU25hY2tiYXJCb2R5LnByb3BUeXBlcyA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHtcbiAgLyoqXG4gICAqIFRoZSBsYWJlbCBmb3IgdGhlIGFjdGlvbiBvbiB0aGUgc25hY2tiYXIuXG4gICAqL1xuICBhY3Rpb246IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBjb250ZW50IGVsZW1lbnQuXG4gICAqL1xuICBjb250ZW50U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhlIG1lc3NhZ2UgdG8gYmUgZGlzcGxheWVkLlxuICAgKlxuICAgKiAoTm90ZTogSWYgdGhlIG1lc3NhZ2UgaXMgYW4gZWxlbWVudCBvciBhcnJheSwgYW5kIHRoZSBgU25hY2tiYXJgIG1heSByZS1yZW5kZXIgd2hpbGUgaXQgaXMgc3RpbGwgb3BlbixcbiAgICogZW5zdXJlIHRoYXQgdGhlIHNhbWUgb2JqZWN0IHJlbWFpbnMgYXMgdGhlIGBtZXNzYWdlYCBwcm9wZXJ0eSBpZiB5b3Ugd2FudCB0byBhdm9pZCB0aGUgYFNuYWNrYmFyYCBoaWRpbmcgYW5kXG4gICAqIHNob3dpbmcgYWdhaW4pXG4gICAqL1xuICBtZXNzYWdlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUuaXNSZXF1aXJlZCxcbiAgLyoqXG4gICAqIEZpcmVkIHdoZW4gdGhlIGFjdGlvbiBidXR0b24gaXMgdG91Y2h0YXBwZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBBY3Rpb24gYnV0dG9uIGV2ZW50LlxuICAgKi9cbiAgb25BY3Rpb25Ub3VjaFRhcDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKiBDb250cm9scyB3aGV0aGVyIHRoZSBgU25hY2tiYXJgIGlzIG9wZW5lZCBvciBub3QuXG4gICAqL1xuICBvcGVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wuaXNSZXF1aXJlZCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqIFdpZHRoIG9mIHRoZSBzY3JlZW4uXG4gICAqL1xuICB3aWR0aDogX3Byb3BUeXBlczIuZGVmYXVsdC5udW1iZXIuaXNSZXF1aXJlZFxufSA6IHt9O1xuXG5TbmFja2JhckJvZHkuY29udGV4dFR5cGVzID0ge1xuICBtdWlUaGVtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QuaXNSZXF1aXJlZFxufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gKDAsIF93aXRoV2lkdGgyLmRlZmF1bHQpKCkoU25hY2tiYXJCb2R5KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWF0ZXJpYWwtdWkvU25hY2tiYXIvU25hY2tiYXJCb2R5LmpzXG4vLyBtb2R1bGUgaWQgPSAxNTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDIiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzJyk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZicpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcycpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybicpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpO1xuXG52YXIgX2luaGVyaXRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cycpO1xuXG52YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cbnZhciBfc2ltcGxlQXNzaWduID0gcmVxdWlyZSgnc2ltcGxlLWFzc2lnbicpO1xuXG52YXIgX3NpbXBsZUFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaW1wbGVBc3NpZ24pO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqICBCZWZvcmVBZnRlcldyYXBwZXJcbiAqICAgIEFuIGFsdGVybmF0aXZlIGZvciB0aGUgOjpiZWZvcmUgYW5kIDo6YWZ0ZXIgY3NzIHBzZXVkby1lbGVtZW50cyBmb3JcbiAqICAgIGNvbXBvbmVudHMgd2hvc2Ugc3R5bGVzIGFyZSBkZWZpbmVkIGluIGphdmFzY3JpcHQgaW5zdGVhZCBvZiBjc3MuXG4gKlxuICogIFVzYWdlOiBGb3IgdGhlIGVsZW1lbnQgdGhhdCB3ZSB3YW50IHRvIGFwcGx5IGJlZm9yZSBhbmQgYWZ0ZXIgZWxlbWVudHMgdG8sXG4gKiAgICB3cmFwIGl0cyBjaGlsZHJlbiB3aXRoIEJlZm9yZUFmdGVyV3JhcHBlci4gRm9yIGV4YW1wbGU6XG4gKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQYXBlcj5cbiAqICA8UGFwZXI+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+IC8vIFNlZSBub3RpY2VcbiAqICAgIDxCZWZvcmVBZnRlcldyYXBwZXI+ICAgICAgICByZW5kZXJzICAgICAgICAgPGRpdi8+IC8vIGJlZm9yZSBlbGVtZW50XG4gKiAgICAgIFtjaGlsZHJlbiBvZiBwYXBlcl0gICAgICAgLS0tLS0tPiAgICAgICAgIFtjaGlsZHJlbiBvZiBwYXBlcl1cbiAqICAgIDwvQmVmb3JlQWZ0ZXJXcmFwcGVyPiAgICAgICAgICAgICAgICAgICAgICAgPGRpdi8+IC8vIGFmdGVyIGVsZW1lbnRcbiAqICA8L1BhcGVyPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvUGFwZXI+XG4gKlxuICogIE5vdGljZTogTm90aWNlIHRoYXQgdGhpcyBkaXYgYnVuZGxlcyB0b2dldGhlciBvdXIgZWxlbWVudHMuIElmIHRoZSBlbGVtZW50XG4gKiAgICB0aGF0IHdlIHdhbnQgdG8gYXBwbHkgYmVmb3JlIGFuZCBhZnRlciBlbGVtZW50cyBpcyBhIEhUTUwgdGFnIChpLmUuIGFcbiAqICAgIGRpdiwgcCwgb3IgYnV0dG9uIHRhZyksIHdlIGNhbiBhdm9pZCB0aGlzIGV4dHJhIG5lc3RpbmcgYnkgcGFzc2luZyB1c2luZ1xuICogICAgdGhlIEJlZm9yZUFmdGVyV3JhcHBlciBpbiBwbGFjZSBvZiBzYWlkIHRhZyBsaWtlIHNvOlxuICpcbiAqICA8cD5cbiAqICAgIDxCZWZvcmVBZnRlcldyYXBwZXI+ICAgZG8gdGhpcyBpbnN0ZWFkICAgPEJlZm9yZUFmdGVyV3JhcHBlciBlbGVtZW50VHlwZT0ncCc+XG4gKiAgICAgIFtjaGlsZHJlbiBvZiBwXSAgICAgICAgICAtLS0tLS0+ICAgICAgICAgW2NoaWxkcmVuIG9mIHBdXG4gKiAgICA8L0JlZm9yZUFmdGVyV3JhcHBlcj4gICAgICAgICAgICAgICAgICAgIDwvQmVmb3JlQWZ0ZXJXcmFwcGVyPlxuICogIDwvcD5cbiAqXG4gKiAgQmVmb3JlQWZ0ZXJXcmFwcGVyIGZlYXR1cmVzIHNwcmVhZCBmdW5jdGlvbmFsaXR5LiBUaGlzIG1lYW5zIHRoYXQgd2UgY2FuXG4gKiAgcGFzcyBIVE1MIHRhZyBwcm9wZXJ0aWVzIGRpcmVjdGx5IGludG8gdGhlIEJlZm9yZUFmdGVyV3JhcHBlciB0YWcuXG4gKlxuICogIFdoZW4gdXNpbmcgQmVmb3JlQWZ0ZXJXcmFwcGVyLCBlbnN1cmUgdGhhdCB0aGUgcGFyZW50IG9mIHRoZSBiZWZvcmVFbGVtZW50XG4gKiAgYW5kIGFmdGVyRWxlbWVudCBoYXZlIGEgZGVmaW5lZCBzdHlsZSBwb3NpdGlvbi5cbiAqL1xuXG52YXIgc3R5bGVzID0ge1xuICBib3g6IHtcbiAgICBib3hTaXppbmc6ICdib3JkZXItYm94J1xuICB9XG59O1xuXG52YXIgQmVmb3JlQWZ0ZXJXcmFwcGVyID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoQmVmb3JlQWZ0ZXJXcmFwcGVyLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBCZWZvcmVBZnRlcldyYXBwZXIoKSB7XG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgQmVmb3JlQWZ0ZXJXcmFwcGVyKTtcbiAgICByZXR1cm4gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoQmVmb3JlQWZ0ZXJXcmFwcGVyLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShCZWZvcmVBZnRlcldyYXBwZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKEJlZm9yZUFmdGVyV3JhcHBlciwgW3tcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBiZWZvcmVTdHlsZSA9IF9wcm9wcy5iZWZvcmVTdHlsZSxcbiAgICAgICAgICBhZnRlclN0eWxlID0gX3Byb3BzLmFmdGVyU3R5bGUsXG4gICAgICAgICAgYmVmb3JlRWxlbWVudFR5cGUgPSBfcHJvcHMuYmVmb3JlRWxlbWVudFR5cGUsXG4gICAgICAgICAgYWZ0ZXJFbGVtZW50VHlwZSA9IF9wcm9wcy5hZnRlckVsZW1lbnRUeXBlLFxuICAgICAgICAgIGVsZW1lbnRUeXBlID0gX3Byb3BzLmVsZW1lbnRUeXBlLFxuICAgICAgICAgIG90aGVyID0gKDAsIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMuZGVmYXVsdCkoX3Byb3BzLCBbJ2JlZm9yZVN0eWxlJywgJ2FmdGVyU3R5bGUnLCAnYmVmb3JlRWxlbWVudFR5cGUnLCAnYWZ0ZXJFbGVtZW50VHlwZScsICdlbGVtZW50VHlwZSddKTtcbiAgICAgIHZhciBwcmVwYXJlU3R5bGVzID0gdGhpcy5jb250ZXh0Lm11aVRoZW1lLnByZXBhcmVTdHlsZXM7XG5cblxuICAgICAgdmFyIGJlZm9yZUVsZW1lbnQgPSB2b2lkIDA7XG4gICAgICB2YXIgYWZ0ZXJFbGVtZW50ID0gdm9pZCAwO1xuXG4gICAgICBpZiAoYmVmb3JlU3R5bGUpIHtcbiAgICAgICAgYmVmb3JlRWxlbWVudCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KHRoaXMucHJvcHMuYmVmb3JlRWxlbWVudFR5cGUsIHtcbiAgICAgICAgICBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe30sIHN0eWxlcy5ib3gsIGJlZm9yZVN0eWxlKSksXG4gICAgICAgICAga2V5OiAnOjpiZWZvcmUnXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoYWZ0ZXJTdHlsZSkge1xuICAgICAgICBhZnRlckVsZW1lbnQgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCh0aGlzLnByb3BzLmFmdGVyRWxlbWVudFR5cGUsIHtcbiAgICAgICAgICBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe30sIHN0eWxlcy5ib3gsIGFmdGVyU3R5bGUpKSxcbiAgICAgICAgICBrZXk6ICc6OmFmdGVyJ1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdmFyIGNoaWxkcmVuID0gW2JlZm9yZUVsZW1lbnQsIHRoaXMucHJvcHMuY2hpbGRyZW4sIGFmdGVyRWxlbWVudF07XG5cbiAgICAgIHZhciBwcm9wcyA9IG90aGVyO1xuICAgICAgcHJvcHMuc3R5bGUgPSBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgdGhpcy5wcm9wcy5zdHlsZSkpO1xuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQodGhpcy5wcm9wcy5lbGVtZW50VHlwZSwgcHJvcHMsIGNoaWxkcmVuKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIEJlZm9yZUFmdGVyV3JhcHBlcjtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbkJlZm9yZUFmdGVyV3JhcHBlci5kZWZhdWx0UHJvcHMgPSB7XG4gIGJlZm9yZUVsZW1lbnRUeXBlOiAnZGl2JyxcbiAgYWZ0ZXJFbGVtZW50VHlwZTogJ2RpdicsXG4gIGVsZW1lbnRUeXBlOiAnZGl2J1xufTtcbkJlZm9yZUFmdGVyV3JhcHBlci5jb250ZXh0VHlwZXMgPSB7XG4gIG11aVRoZW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkXG59O1xuQmVmb3JlQWZ0ZXJXcmFwcGVyLnByb3BUeXBlcyA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHtcbiAgYWZ0ZXJFbGVtZW50VHlwZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGFmdGVyU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBiZWZvcmVFbGVtZW50VHlwZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGJlZm9yZVN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgY2hpbGRyZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgZWxlbWVudFR5cGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIHN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdFxufSA6IHt9O1xuZXhwb3J0cy5kZWZhdWx0ID0gQmVmb3JlQWZ0ZXJXcmFwcGVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9pbnRlcm5hbC9CZWZvcmVBZnRlcldyYXBwZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE1NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9leHRlbmRzJyk7XG5cbnZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzJyk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyKTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxudmFyIF9CZWZvcmVBZnRlcldyYXBwZXIgPSByZXF1aXJlKCcuL0JlZm9yZUFmdGVyV3JhcHBlcicpO1xuXG52YXIgX0JlZm9yZUFmdGVyV3JhcHBlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9CZWZvcmVBZnRlcldyYXBwZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgc3R5bGVzID0ge1xuICBiZWZvcmU6IHtcbiAgICBjb250ZW50OiBcIicgJ1wiLFxuICAgIGRpc3BsYXk6ICd0YWJsZSdcbiAgfSxcbiAgYWZ0ZXI6IHtcbiAgICBjb250ZW50OiBcIicgJ1wiLFxuICAgIGNsZWFyOiAnYm90aCcsXG4gICAgZGlzcGxheTogJ3RhYmxlJ1xuICB9XG59O1xuXG52YXIgQ2xlYXJGaXggPSBmdW5jdGlvbiBDbGVhckZpeChfcmVmKSB7XG4gIHZhciBzdHlsZSA9IF9yZWYuc3R5bGUsXG4gICAgICBjaGlsZHJlbiA9IF9yZWYuY2hpbGRyZW4sXG4gICAgICBvdGhlciA9ICgwLCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzLmRlZmF1bHQpKF9yZWYsIFsnc3R5bGUnLCAnY2hpbGRyZW4nXSk7XG4gIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICBfQmVmb3JlQWZ0ZXJXcmFwcGVyMi5kZWZhdWx0LFxuICAgICgwLCBfZXh0ZW5kczMuZGVmYXVsdCkoe30sIG90aGVyLCB7XG4gICAgICBiZWZvcmVTdHlsZTogc3R5bGVzLmJlZm9yZSxcbiAgICAgIGFmdGVyU3R5bGU6IHN0eWxlcy5hZnRlcixcbiAgICAgIHN0eWxlOiBzdHlsZVxuICAgIH0pLFxuICAgIGNoaWxkcmVuXG4gICk7XG59O1xuXG5DbGVhckZpeC5tdWlOYW1lID0gJ0NsZWFyRml4JztcblxuQ2xlYXJGaXgucHJvcFR5cGVzID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8ge1xuICBjaGlsZHJlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIHN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdFxufSA6IHt9O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBDbGVhckZpeDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWF0ZXJpYWwtdWkvaW50ZXJuYWwvQ2xlYXJGaXguanNcbi8vIG1vZHVsZSBpZCA9IDE1NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9leHRlbmRzJyk7XG5cbnZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzJyk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZicpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcycpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybicpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpO1xuXG52YXIgX2luaGVyaXRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cycpO1xuXG52YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cbnZhciBfc2ltcGxlQXNzaWduID0gcmVxdWlyZSgnc2ltcGxlLWFzc2lnbicpO1xuXG52YXIgX3NpbXBsZUFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaW1wbGVBc3NpZ24pO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX3JlYWN0RXZlbnRMaXN0ZW5lciA9IHJlcXVpcmUoJ3JlYWN0LWV2ZW50LWxpc3RlbmVyJyk7XG5cbnZhciBfcmVhY3RFdmVudExpc3RlbmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RXZlbnRMaXN0ZW5lcik7XG5cbnZhciBfa2V5Y29kZSA9IHJlcXVpcmUoJ2tleWNvZGUnKTtcblxudmFyIF9rZXljb2RlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2tleWNvZGUpO1xuXG52YXIgX3RyYW5zaXRpb25zID0gcmVxdWlyZSgnLi4vc3R5bGVzL3RyYW5zaXRpb25zJyk7XG5cbnZhciBfdHJhbnNpdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHJhbnNpdGlvbnMpO1xuXG52YXIgX0ZvY3VzUmlwcGxlID0gcmVxdWlyZSgnLi9Gb2N1c1JpcHBsZScpO1xuXG52YXIgX0ZvY3VzUmlwcGxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ZvY3VzUmlwcGxlKTtcblxudmFyIF9Ub3VjaFJpcHBsZSA9IHJlcXVpcmUoJy4vVG91Y2hSaXBwbGUnKTtcblxudmFyIF9Ub3VjaFJpcHBsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Ub3VjaFJpcHBsZSk7XG5cbnZhciBfUGFwZXIgPSByZXF1aXJlKCcuLy4uL1BhcGVyJyk7XG5cbnZhciBfUGFwZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUGFwZXIpO1xuXG52YXIgX3dhcm5pbmcgPSByZXF1aXJlKCd3YXJuaW5nJyk7XG5cbnZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gZ2V0U3R5bGVzKHByb3BzLCBjb250ZXh0KSB7XG4gIHZhciBiYXNlVGhlbWUgPSBjb250ZXh0Lm11aVRoZW1lLmJhc2VUaGVtZTtcblxuXG4gIHJldHVybiB7XG4gICAgcm9vdDoge1xuICAgICAgY3Vyc29yOiBwcm9wcy5kaXNhYmxlZCA/ICdub3QtYWxsb3dlZCcgOiAncG9pbnRlcicsXG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgIG92ZXJmbG93OiAndmlzaWJsZScsXG4gICAgICBkaXNwbGF5OiAndGFibGUnLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICB3aWR0aDogJzEwMCUnXG4gICAgfSxcbiAgICBpbnB1dDoge1xuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICBjdXJzb3I6ICdpbmhlcml0JyxcbiAgICAgIHBvaW50ZXJFdmVudHM6ICdhbGwnLFxuICAgICAgb3BhY2l0eTogMCxcbiAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgIHpJbmRleDogMixcbiAgICAgIGxlZnQ6IDAsXG4gICAgICBib3hTaXppbmc6ICdib3JkZXItYm94JyxcbiAgICAgIHBhZGRpbmc6IDAsXG4gICAgICBtYXJnaW46IDBcbiAgICB9LFxuICAgIGNvbnRyb2xzOiB7XG4gICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgaGVpZ2h0OiAnMTAwJSdcbiAgICB9LFxuICAgIGxhYmVsOiB7XG4gICAgICBmbG9hdDogJ2xlZnQnLFxuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgd2lkdGg6ICdjYWxjKDEwMCUgLSA2MHB4KScsXG4gICAgICBsaW5lSGVpZ2h0OiAnMjRweCcsXG4gICAgICBjb2xvcjogYmFzZVRoZW1lLnBhbGV0dGUudGV4dENvbG9yLFxuICAgICAgZm9udEZhbWlseTogYmFzZVRoZW1lLmZvbnRGYW1pbHlcbiAgICB9LFxuICAgIHdyYXA6IHtcbiAgICAgIHRyYW5zaXRpb246IF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KCksXG4gICAgICBmbG9hdDogJ2xlZnQnLFxuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgZmxleFNocmluazogMCxcbiAgICAgIHdpZHRoOiA2MCAtIGJhc2VUaGVtZS5zcGFjaW5nLmRlc2t0b3BHdXR0ZXJMZXNzLFxuICAgICAgbWFyZ2luUmlnaHQ6IHByb3BzLmxhYmVsUG9zaXRpb24gPT09ICdyaWdodCcgPyBiYXNlVGhlbWUuc3BhY2luZy5kZXNrdG9wR3V0dGVyTGVzcyA6IDAsXG4gICAgICBtYXJnaW5MZWZ0OiBwcm9wcy5sYWJlbFBvc2l0aW9uID09PSAnbGVmdCcgPyBiYXNlVGhlbWUuc3BhY2luZy5kZXNrdG9wR3V0dGVyTGVzcyA6IDBcbiAgICB9LFxuICAgIHJpcHBsZToge1xuICAgICAgY29sb3I6IHByb3BzLnJpcHBsZUNvbG9yIHx8IGJhc2VUaGVtZS5wYWxldHRlLnByaW1hcnkxQ29sb3IsXG4gICAgICBoZWlnaHQ6ICcyMDAlJyxcbiAgICAgIHdpZHRoOiAnMjAwJScsXG4gICAgICB0b3A6IC0xMixcbiAgICAgIGxlZnQ6IC0xMlxuICAgIH1cbiAgfTtcbn1cblxudmFyIEVuaGFuY2VkU3dpdGNoID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoRW5oYW5jZWRTd2l0Y2gsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEVuaGFuY2VkU3dpdGNoKCkge1xuICAgIHZhciBfcmVmO1xuXG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIEVuaGFuY2VkU3dpdGNoKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoX3JlZiA9IEVuaGFuY2VkU3dpdGNoLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShFbmhhbmNlZFN3aXRjaCkpLmNhbGwuYXBwbHkoX3JlZiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLnN0YXRlID0ge1xuICAgICAgaXNLZXlib2FyZEZvY3VzZWQ6IGZhbHNlXG4gICAgfSwgX3RoaXMuaGFuZGxlQ2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBfdGhpcy50YWJQcmVzc2VkID0gZmFsc2U7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGlzS2V5Ym9hcmRGb2N1c2VkOiBmYWxzZVxuICAgICAgfSk7XG5cbiAgICAgIHZhciBpc0lucHV0Q2hlY2tlZCA9IF90aGlzLnJlZnMuY2hlY2tib3guY2hlY2tlZDtcblxuICAgICAgaWYgKCFfdGhpcy5wcm9wcy5oYXNPd25Qcm9wZXJ0eSgnY2hlY2tlZCcpICYmIF90aGlzLnByb3BzLm9uUGFyZW50U2hvdWxkVXBkYXRlKSB7XG4gICAgICAgIF90aGlzLnByb3BzLm9uUGFyZW50U2hvdWxkVXBkYXRlKGlzSW5wdXRDaGVja2VkKTtcbiAgICAgIH1cblxuICAgICAgaWYgKF90aGlzLnByb3BzLm9uU3dpdGNoKSB7XG4gICAgICAgIF90aGlzLnByb3BzLm9uU3dpdGNoKGV2ZW50LCBpc0lucHV0Q2hlY2tlZCk7XG4gICAgICB9XG4gICAgfSwgX3RoaXMuaGFuZGxlS2V5RG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyIGNvZGUgPSAoMCwgX2tleWNvZGUyLmRlZmF1bHQpKGV2ZW50KTtcblxuICAgICAgaWYgKGNvZGUgPT09ICd0YWInKSB7XG4gICAgICAgIF90aGlzLnRhYlByZXNzZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKF90aGlzLnN0YXRlLmlzS2V5Ym9hcmRGb2N1c2VkICYmIGNvZGUgPT09ICdzcGFjZScpIHtcbiAgICAgICAgX3RoaXMuaGFuZGxlQ2hhbmdlKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9LCBfdGhpcy5oYW5kbGVLZXlVcCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKF90aGlzLnN0YXRlLmlzS2V5Ym9hcmRGb2N1c2VkICYmICgwLCBfa2V5Y29kZTIuZGVmYXVsdCkoZXZlbnQpID09PSAnc3BhY2UnKSB7XG4gICAgICAgIF90aGlzLmhhbmRsZUNoYW5nZShldmVudCk7XG4gICAgICB9XG4gICAgfSwgX3RoaXMuaGFuZGxlTW91c2VEb3duID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAvLyBvbmx5IGxpc3RlbiB0byBsZWZ0IGNsaWNrc1xuICAgICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMCkge1xuICAgICAgICBfdGhpcy5yZWZzLnRvdWNoUmlwcGxlLnN0YXJ0KGV2ZW50KTtcbiAgICAgIH1cbiAgICB9LCBfdGhpcy5oYW5kbGVNb3VzZVVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMucmVmcy50b3VjaFJpcHBsZS5lbmQoKTtcbiAgICB9LCBfdGhpcy5oYW5kbGVNb3VzZUxlYXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMucmVmcy50b3VjaFJpcHBsZS5lbmQoKTtcbiAgICB9LCBfdGhpcy5oYW5kbGVUb3VjaFN0YXJ0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBfdGhpcy5yZWZzLnRvdWNoUmlwcGxlLnN0YXJ0KGV2ZW50KTtcbiAgICB9LCBfdGhpcy5oYW5kbGVUb3VjaEVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnJlZnMudG91Y2hSaXBwbGUuZW5kKCk7XG4gICAgfSwgX3RoaXMuaGFuZGxlQmx1ciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBpc0tleWJvYXJkRm9jdXNlZDogZmFsc2VcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoX3RoaXMucHJvcHMub25CbHVyKSB7XG4gICAgICAgIF90aGlzLnByb3BzLm9uQmx1cihldmVudCk7XG4gICAgICB9XG4gICAgfSwgX3RoaXMuaGFuZGxlRm9jdXMgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIC8vIHNldFRpbWVvdXQgaXMgbmVlZGVkIGJlY3Vhc2UgdGhlIGZvY3VzIGV2ZW50IGZpcmVzIGZpcnN0XG4gICAgICAvLyBXYWl0IHNvIHRoYXQgd2UgY2FuIGNhcHR1cmUgaWYgdGhpcyB3YXMgYSBrZXlib2FyZCBmb2N1c1xuICAgICAgLy8gb3IgdG91Y2ggZm9jdXNcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoX3RoaXMudGFiUHJlc3NlZCkge1xuICAgICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzS2V5Ym9hcmRGb2N1c2VkOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sIDE1MCk7XG5cbiAgICAgIGlmIChfdGhpcy5wcm9wcy5vbkZvY3VzKSB7XG4gICAgICAgIF90aGlzLnByb3BzLm9uRm9jdXMoZXZlbnQpO1xuICAgICAgfVxuICAgIH0sIF90ZW1wKSwgKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KShfdGhpcywgX3JldCk7XG4gIH1cblxuICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShFbmhhbmNlZFN3aXRjaCwgW3tcbiAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdmFyIGlucHV0Tm9kZSA9IHRoaXMucmVmcy5jaGVja2JveDtcbiAgICAgIGlmICgoIXRoaXMucHJvcHMuc3dpdGNoZWQgfHwgaW5wdXROb2RlLmNoZWNrZWQgIT09IHRoaXMucHJvcHMuc3dpdGNoZWQpICYmIHRoaXMucHJvcHMub25QYXJlbnRTaG91bGRVcGRhdGUpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vblBhcmVudFNob3VsZFVwZGF0ZShpbnB1dE5vZGUuY2hlY2tlZCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgICB2YXIgaGFzQ2hlY2tlZFByb3AgPSBuZXh0UHJvcHMuaGFzT3duUHJvcGVydHkoJ2NoZWNrZWQnKTtcbiAgICAgIHZhciBoYXNOZXdEZWZhdWx0UHJvcCA9IG5leHRQcm9wcy5oYXNPd25Qcm9wZXJ0eSgnZGVmYXVsdENoZWNrZWQnKSAmJiBuZXh0UHJvcHMuZGVmYXVsdENoZWNrZWQgIT09IHRoaXMucHJvcHMuZGVmYXVsdENoZWNrZWQ7XG5cbiAgICAgIGlmIChoYXNDaGVja2VkUHJvcCB8fCBoYXNOZXdEZWZhdWx0UHJvcCkge1xuICAgICAgICB2YXIgc3dpdGNoZWQgPSBuZXh0UHJvcHMuY2hlY2tlZCB8fCBuZXh0UHJvcHMuZGVmYXVsdENoZWNrZWQgfHwgZmFsc2U7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgc3dpdGNoZWQ6IHN3aXRjaGVkXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm9uUGFyZW50U2hvdWxkVXBkYXRlICYmIHN3aXRjaGVkICE9PSB0aGlzLnByb3BzLnN3aXRjaGVkKSB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5vblBhcmVudFNob3VsZFVwZGF0ZShzd2l0Y2hlZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdpc1N3aXRjaGVkJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNTd2l0Y2hlZCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlZnMuY2hlY2tib3guY2hlY2tlZDtcbiAgICB9XG5cbiAgICAvLyBubyBjYWxsYmFjayBoZXJlIGJlY2F1c2UgdGhlcmUgaXMgbm8gZXZlbnRcblxuICB9LCB7XG4gICAga2V5OiAnc2V0U3dpdGNoZWQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRTd2l0Y2hlZChuZXdTd2l0Y2hlZFZhbHVlKSB7XG4gICAgICBpZiAoIXRoaXMucHJvcHMuaGFzT3duUHJvcGVydHkoJ2NoZWNrZWQnKSB8fCB0aGlzLnByb3BzLmNoZWNrZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLm9uUGFyZW50U2hvdWxkVXBkYXRlKSB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5vblBhcmVudFNob3VsZFVwZGF0ZShuZXdTd2l0Y2hlZFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlZnMuY2hlY2tib3guY2hlY2tlZCA9IG5ld1N3aXRjaGVkVmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKGZhbHNlLCAnTWF0ZXJpYWwtVUk6IENhbm5vdCBjYWxsIHNldCBtZXRob2Qgd2hpbGUgY2hlY2tlZCBpcyBkZWZpbmVkIGFzIGEgcHJvcGVydHkuJykgOiB2b2lkIDA7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZ2V0VmFsdWUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlZnMuY2hlY2tib3gudmFsdWU7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2tib3ggaW5wdXRzIG9ubHkgdXNlIFNQQUNFIHRvIGNoYW5nZSB0aGVpciBzdGF0ZS4gVXNpbmcgRU5URVIgd2lsbFxuICAgIC8vIHVwZGF0ZSB0aGUgdWkgYnV0IG5vdCB0aGUgaW5wdXQuXG5cblxuICAgIC8qKlxuICAgICAqIEJlY2F1c2UgYm90aCB0aGUgcmlwcGxlcyBhbmQgdGhlIGNoZWNrYm94IGlucHV0IGNhbm5vdCBzaGFyZSBwb2ludGVyXG4gICAgICogZXZlbnRzLCB0aGUgY2hlY2tib3ggaW5wdXQgdGFrZXMgY29udHJvbCBvZiBwb2ludGVyIGV2ZW50cyBhbmQgY2FsbHNcbiAgICAgKiByaXBwbGUgYW5pbWF0aW9ucyBtYW51YWxseS5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgbmFtZSA9IF9wcm9wcy5uYW1lLFxuICAgICAgICAgIHZhbHVlID0gX3Byb3BzLnZhbHVlLFxuICAgICAgICAgIGljb25TdHlsZSA9IF9wcm9wcy5pY29uU3R5bGUsXG4gICAgICAgICAgaW5wdXRTdHlsZSA9IF9wcm9wcy5pbnB1dFN0eWxlLFxuICAgICAgICAgIGlucHV0VHlwZSA9IF9wcm9wcy5pbnB1dFR5cGUsXG4gICAgICAgICAgbGFiZWwgPSBfcHJvcHMubGFiZWwsXG4gICAgICAgICAgbGFiZWxTdHlsZSA9IF9wcm9wcy5sYWJlbFN0eWxlLFxuICAgICAgICAgIGxhYmVsUG9zaXRpb24gPSBfcHJvcHMubGFiZWxQb3NpdGlvbixcbiAgICAgICAgICBvblN3aXRjaCA9IF9wcm9wcy5vblN3aXRjaCxcbiAgICAgICAgICBvbkJsdXIgPSBfcHJvcHMub25CbHVyLFxuICAgICAgICAgIG9uRm9jdXMgPSBfcHJvcHMub25Gb2N1cyxcbiAgICAgICAgICBvbk1vdXNlVXAgPSBfcHJvcHMub25Nb3VzZVVwLFxuICAgICAgICAgIG9uTW91c2VEb3duID0gX3Byb3BzLm9uTW91c2VEb3duLFxuICAgICAgICAgIG9uTW91c2VMZWF2ZSA9IF9wcm9wcy5vbk1vdXNlTGVhdmUsXG4gICAgICAgICAgb25Ub3VjaFN0YXJ0ID0gX3Byb3BzLm9uVG91Y2hTdGFydCxcbiAgICAgICAgICBvblRvdWNoRW5kID0gX3Byb3BzLm9uVG91Y2hFbmQsXG4gICAgICAgICAgb25QYXJlbnRTaG91bGRVcGRhdGUgPSBfcHJvcHMub25QYXJlbnRTaG91bGRVcGRhdGUsXG4gICAgICAgICAgZGlzYWJsZWQgPSBfcHJvcHMuZGlzYWJsZWQsXG4gICAgICAgICAgZGlzYWJsZVRvdWNoUmlwcGxlID0gX3Byb3BzLmRpc2FibGVUb3VjaFJpcHBsZSxcbiAgICAgICAgICBkaXNhYmxlRm9jdXNSaXBwbGUgPSBfcHJvcHMuZGlzYWJsZUZvY3VzUmlwcGxlLFxuICAgICAgICAgIGNsYXNzTmFtZSA9IF9wcm9wcy5jbGFzc05hbWUsXG4gICAgICAgICAgcmlwcGxlQ29sb3IgPSBfcHJvcHMucmlwcGxlQ29sb3IsXG4gICAgICAgICAgcmlwcGxlU3R5bGUgPSBfcHJvcHMucmlwcGxlU3R5bGUsXG4gICAgICAgICAgc3R5bGUgPSBfcHJvcHMuc3R5bGUsXG4gICAgICAgICAgc3dpdGNoZWQgPSBfcHJvcHMuc3dpdGNoZWQsXG4gICAgICAgICAgc3dpdGNoRWxlbWVudCA9IF9wcm9wcy5zd2l0Y2hFbGVtZW50LFxuICAgICAgICAgIHRodW1iU3R5bGUgPSBfcHJvcHMudGh1bWJTdHlsZSxcbiAgICAgICAgICB0cmFja1N0eWxlID0gX3Byb3BzLnRyYWNrU3R5bGUsXG4gICAgICAgICAgb3RoZXIgPSAoMCwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMy5kZWZhdWx0KShfcHJvcHMsIFsnbmFtZScsICd2YWx1ZScsICdpY29uU3R5bGUnLCAnaW5wdXRTdHlsZScsICdpbnB1dFR5cGUnLCAnbGFiZWwnLCAnbGFiZWxTdHlsZScsICdsYWJlbFBvc2l0aW9uJywgJ29uU3dpdGNoJywgJ29uQmx1cicsICdvbkZvY3VzJywgJ29uTW91c2VVcCcsICdvbk1vdXNlRG93bicsICdvbk1vdXNlTGVhdmUnLCAnb25Ub3VjaFN0YXJ0JywgJ29uVG91Y2hFbmQnLCAnb25QYXJlbnRTaG91bGRVcGRhdGUnLCAnZGlzYWJsZWQnLCAnZGlzYWJsZVRvdWNoUmlwcGxlJywgJ2Rpc2FibGVGb2N1c1JpcHBsZScsICdjbGFzc05hbWUnLCAncmlwcGxlQ29sb3InLCAncmlwcGxlU3R5bGUnLCAnc3R5bGUnLCAnc3dpdGNoZWQnLCAnc3dpdGNoRWxlbWVudCcsICd0aHVtYlN0eWxlJywgJ3RyYWNrU3R5bGUnXSk7XG4gICAgICB2YXIgcHJlcGFyZVN0eWxlcyA9IHRoaXMuY29udGV4dC5tdWlUaGVtZS5wcmVwYXJlU3R5bGVzO1xuXG4gICAgICB2YXIgc3R5bGVzID0gZ2V0U3R5bGVzKHRoaXMucHJvcHMsIHRoaXMuY29udGV4dCk7XG4gICAgICB2YXIgd3JhcFN0eWxlcyA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMud3JhcCwgaWNvblN0eWxlKTtcbiAgICAgIHZhciBtZXJnZWRSaXBwbGVTdHlsZSA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMucmlwcGxlLCByaXBwbGVTdHlsZSk7XG5cbiAgICAgIGlmICh0aHVtYlN0eWxlKSB7XG4gICAgICAgIHdyYXBTdHlsZXMubWFyZ2luTGVmdCAvPSAyO1xuICAgICAgICB3cmFwU3R5bGVzLm1hcmdpblJpZ2h0IC89IDI7XG4gICAgICB9XG5cbiAgICAgIHZhciBsYWJlbEVsZW1lbnQgPSBsYWJlbCAmJiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2xhYmVsJyxcbiAgICAgICAgeyBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLmxhYmVsLCBsYWJlbFN0eWxlKSkgfSxcbiAgICAgICAgbGFiZWxcbiAgICAgICk7XG5cbiAgICAgIHZhciBzaG93VG91Y2hSaXBwbGUgPSAhZGlzYWJsZWQgJiYgIWRpc2FibGVUb3VjaFJpcHBsZTtcbiAgICAgIHZhciBzaG93Rm9jdXNSaXBwbGUgPSAhZGlzYWJsZWQgJiYgIWRpc2FibGVGb2N1c1JpcHBsZTtcblxuICAgICAgdmFyIHRvdWNoUmlwcGxlID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1RvdWNoUmlwcGxlMi5kZWZhdWx0LCB7XG4gICAgICAgIHJlZjogJ3RvdWNoUmlwcGxlJyxcbiAgICAgICAga2V5OiAndG91Y2hSaXBwbGUnLFxuICAgICAgICBzdHlsZTogbWVyZ2VkUmlwcGxlU3R5bGUsXG4gICAgICAgIGNvbG9yOiBtZXJnZWRSaXBwbGVTdHlsZS5jb2xvcixcbiAgICAgICAgbXVpVGhlbWU6IHRoaXMuY29udGV4dC5tdWlUaGVtZSxcbiAgICAgICAgY2VudGVyUmlwcGxlOiB0cnVlXG4gICAgICB9KTtcblxuICAgICAgdmFyIGZvY3VzUmlwcGxlID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0ZvY3VzUmlwcGxlMi5kZWZhdWx0LCB7XG4gICAgICAgIGtleTogJ2ZvY3VzUmlwcGxlJyxcbiAgICAgICAgaW5uZXJTdHlsZTogbWVyZ2VkUmlwcGxlU3R5bGUsXG4gICAgICAgIGNvbG9yOiBtZXJnZWRSaXBwbGVTdHlsZS5jb2xvcixcbiAgICAgICAgbXVpVGhlbWU6IHRoaXMuY29udGV4dC5tdWlUaGVtZSxcbiAgICAgICAgc2hvdzogdGhpcy5zdGF0ZS5pc0tleWJvYXJkRm9jdXNlZFxuICAgICAgfSk7XG5cbiAgICAgIHZhciByaXBwbGVzID0gW3Nob3dUb3VjaFJpcHBsZSA/IHRvdWNoUmlwcGxlIDogbnVsbCwgc2hvd0ZvY3VzUmlwcGxlID8gZm9jdXNSaXBwbGUgOiBudWxsXTtcblxuICAgICAgdmFyIGlucHV0RWxlbWVudCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsICgwLCBfZXh0ZW5kczMuZGVmYXVsdCkoe30sIG90aGVyLCB7XG4gICAgICAgIHJlZjogJ2NoZWNrYm94JyxcbiAgICAgICAgdHlwZTogaW5wdXRUeXBlLFxuICAgICAgICBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLmlucHV0LCBpbnB1dFN0eWxlKSksXG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLFxuICAgICAgICBvbkJsdXI6IHRoaXMuaGFuZGxlQmx1cixcbiAgICAgICAgb25Gb2N1czogdGhpcy5oYW5kbGVGb2N1cyxcbiAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlQ2hhbmdlLFxuICAgICAgICBvbk1vdXNlVXA6IHNob3dUb3VjaFJpcHBsZSAmJiB0aGlzLmhhbmRsZU1vdXNlVXAsXG4gICAgICAgIG9uTW91c2VEb3duOiBzaG93VG91Y2hSaXBwbGUgJiYgdGhpcy5oYW5kbGVNb3VzZURvd24sXG4gICAgICAgIG9uTW91c2VMZWF2ZTogc2hvd1RvdWNoUmlwcGxlICYmIHRoaXMuaGFuZGxlTW91c2VMZWF2ZSxcbiAgICAgICAgb25Ub3VjaFN0YXJ0OiBzaG93VG91Y2hSaXBwbGUgJiYgdGhpcy5oYW5kbGVUb3VjaFN0YXJ0LFxuICAgICAgICBvblRvdWNoRW5kOiBzaG93VG91Y2hSaXBwbGUgJiYgdGhpcy5oYW5kbGVUb3VjaEVuZFxuICAgICAgfSkpO1xuXG4gICAgICAvLyBJZiB0b2dnbGUgY29tcG9uZW50IChpbmRpY2F0ZWQgYnkgd2hldGhlciB0aGUgc3R5bGUgaW5jbHVkZXMgdGh1bWIpIG1hbnVhbGx5IGxheSBvdXRcbiAgICAgIC8vIGVsZW1lbnRzIGluIG9yZGVyIHRvIG5lc3QgcmlwcGxlIGVsZW1lbnRzXG4gICAgICB2YXIgc3dpdGNoT3JUaHVtYkVsZW1lbnQgPSAhdGh1bWJTdHlsZSA/IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyBzdHlsZTogcHJlcGFyZVN0eWxlcyh3cmFwU3R5bGVzKSB9LFxuICAgICAgICBzd2l0Y2hFbGVtZW50LFxuICAgICAgICByaXBwbGVzXG4gICAgICApIDogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IHN0eWxlOiBwcmVwYXJlU3R5bGVzKHdyYXBTdHlsZXMpIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IHN0eWxlOiBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgdHJhY2tTdHlsZSkpIH0pLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICBfUGFwZXIyLmRlZmF1bHQsXG4gICAgICAgICAgeyBzdHlsZTogdGh1bWJTdHlsZSwgekRlcHRoOiAxLCBjaXJjbGU6IHRydWUgfSxcbiAgICAgICAgICAnICcsXG4gICAgICAgICAgcmlwcGxlcyxcbiAgICAgICAgICAnICdcbiAgICAgICAgKVxuICAgICAgKTtcblxuICAgICAgdmFyIGVsZW1lbnRzSW5PcmRlciA9IGxhYmVsUG9zaXRpb24gPT09ICdyaWdodCcgPyBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgc3R5bGU6IHN0eWxlcy5jb250cm9scyB9LFxuICAgICAgICBzd2l0Y2hPclRodW1iRWxlbWVudCxcbiAgICAgICAgbGFiZWxFbGVtZW50XG4gICAgICApIDogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IHN0eWxlOiBzdHlsZXMuY29udHJvbHMgfSxcbiAgICAgICAgbGFiZWxFbGVtZW50LFxuICAgICAgICBzd2l0Y2hPclRodW1iRWxlbWVudFxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyByZWY6ICdyb290JywgY2xhc3NOYW1lOiBjbGFzc05hbWUsIHN0eWxlOiBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMucm9vdCwgc3R5bGUpKSB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RFdmVudExpc3RlbmVyMi5kZWZhdWx0LCB7XG4gICAgICAgICAgdGFyZ2V0OiAnd2luZG93JyxcbiAgICAgICAgICBvbktleURvd246IHRoaXMuaGFuZGxlS2V5RG93bixcbiAgICAgICAgICBvbktleVVwOiB0aGlzLmhhbmRsZUtleVVwXG4gICAgICAgIH0pLFxuICAgICAgICBpbnB1dEVsZW1lbnQsXG4gICAgICAgIGVsZW1lbnRzSW5PcmRlclxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIEVuaGFuY2VkU3dpdGNoO1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuRW5oYW5jZWRTd2l0Y2guY29udGV4dFR5cGVzID0ge1xuICBtdWlUaGVtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QuaXNSZXF1aXJlZFxufTtcbkVuaGFuY2VkU3dpdGNoLnByb3BUeXBlcyA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHtcbiAgY2hlY2tlZDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBjbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBkZWZhdWx0Q2hlY2tlZDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBkaXNhYmxlRm9jdXNSaXBwbGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgZGlzYWJsZVRvdWNoUmlwcGxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIGRpc2FibGVkOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIGljb25TdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGlucHV0U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBpbnB1dFR5cGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLmlzUmVxdWlyZWQsXG4gIGxhYmVsOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIGxhYmVsUG9zaXRpb246IF9wcm9wVHlwZXMyLmRlZmF1bHQub25lT2YoWydsZWZ0JywgJ3JpZ2h0J10pLFxuICBsYWJlbFN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgbmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIG9uQmx1cjogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBvbkZvY3VzOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIG9uTW91c2VEb3duOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIG9uTW91c2VMZWF2ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBvbk1vdXNlVXA6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgb25QYXJlbnRTaG91bGRVcGRhdGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgb25Td2l0Y2g6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgb25Ub3VjaEVuZDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBvblRvdWNoU3RhcnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgcmlwcGxlQ29sb3I6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICByaXBwbGVTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIHN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgc3dpdGNoRWxlbWVudDogX3Byb3BUeXBlczIuZGVmYXVsdC5lbGVtZW50LmlzUmVxdWlyZWQsXG4gIHN3aXRjaGVkOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wuaXNSZXF1aXJlZCxcbiAgdGh1bWJTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIHRyYWNrU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICB2YWx1ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5hbnlcbn0gOiB7fTtcbmV4cG9ydHMuZGVmYXVsdCA9IEVuaGFuY2VkU3dpdGNoO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9pbnRlcm5hbC9FbmhhbmNlZFN3aXRjaC5qc1xuLy8gbW9kdWxlIGlkID0gMTU3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAyIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHVyZSA9IHJlcXVpcmUoJ3JlY29tcG9zZS9wdXJlJyk7XG5cbnZhciBfcHVyZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wdXJlKTtcblxudmFyIF9TdmdJY29uID0gcmVxdWlyZSgnLi4vU3ZnSWNvbicpO1xuXG52YXIgX1N2Z0ljb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3ZnSWNvbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBOYXZpZ2F0aW9uQXJyb3dEcm9wUmlnaHQgPSBmdW5jdGlvbiBOYXZpZ2F0aW9uQXJyb3dEcm9wUmlnaHQocHJvcHMpIHtcbiAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgIF9TdmdJY29uMi5kZWZhdWx0LFxuICAgIHByb3BzLFxuICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdwYXRoJywgeyBkOiAnTTkuNSw3bDUsNWwtNSw1Vjd6JyB9KVxuICApO1xufTtcblxuTmF2aWdhdGlvbkFycm93RHJvcFJpZ2h0ID0gKDAsIF9wdXJlMi5kZWZhdWx0KShOYXZpZ2F0aW9uQXJyb3dEcm9wUmlnaHQpO1xuTmF2aWdhdGlvbkFycm93RHJvcFJpZ2h0LmRpc3BsYXlOYW1lID0gJ05hdmlnYXRpb25BcnJvd0Ryb3BSaWdodCc7XG5OYXZpZ2F0aW9uQXJyb3dEcm9wUmlnaHQubXVpTmFtZSA9ICdTdmdJY29uJztcblxuZXhwb3J0cy5kZWZhdWx0ID0gTmF2aWdhdGlvbkFycm93RHJvcFJpZ2h0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9zdmctaWNvbnMvbmF2aWdhdGlvbi1hcnJvdy1kcm9wLXJpZ2h0LmpzXG4vLyBtb2R1bGUgaWQgPSAxNjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wdXJlID0gcmVxdWlyZSgncmVjb21wb3NlL3B1cmUnKTtcblxudmFyIF9wdXJlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3B1cmUpO1xuXG52YXIgX1N2Z0ljb24gPSByZXF1aXJlKCcuLi8uLi9TdmdJY29uJyk7XG5cbnZhciBfU3ZnSWNvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TdmdJY29uKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIE5hdmlnYXRpb25BcnJvd0Ryb3BEb3duID0gZnVuY3Rpb24gTmF2aWdhdGlvbkFycm93RHJvcERvd24ocHJvcHMpIHtcbiAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgIF9TdmdJY29uMi5kZWZhdWx0LFxuICAgIHByb3BzLFxuICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdwYXRoJywgeyBkOiAnTTcgMTBsNSA1IDUtNXonIH0pXG4gICk7XG59O1xuTmF2aWdhdGlvbkFycm93RHJvcERvd24gPSAoMCwgX3B1cmUyLmRlZmF1bHQpKE5hdmlnYXRpb25BcnJvd0Ryb3BEb3duKTtcbk5hdmlnYXRpb25BcnJvd0Ryb3BEb3duLmRpc3BsYXlOYW1lID0gJ05hdmlnYXRpb25BcnJvd0Ryb3BEb3duJztcbk5hdmlnYXRpb25BcnJvd0Ryb3BEb3duLm11aU5hbWUgPSAnU3ZnSWNvbic7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IE5hdmlnYXRpb25BcnJvd0Ryb3BEb3duO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9zdmctaWNvbnMvbmF2aWdhdGlvbi9hcnJvdy1kcm9wLWRvd24uanNcbi8vIG1vZHVsZSBpZCA9IDE2NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3B1cmUgPSByZXF1aXJlKCdyZWNvbXBvc2UvcHVyZScpO1xuXG52YXIgX3B1cmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHVyZSk7XG5cbnZhciBfU3ZnSWNvbiA9IHJlcXVpcmUoJy4uLy4uL1N2Z0ljb24nKTtcblxudmFyIF9TdmdJY29uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N2Z0ljb24pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgTmF2aWdhdGlvbk1lbnUgPSBmdW5jdGlvbiBOYXZpZ2F0aW9uTWVudShwcm9wcykge1xuICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgX1N2Z0ljb24yLmRlZmF1bHQsXG4gICAgcHJvcHMsXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3BhdGgnLCB7IGQ6ICdNMyAxOGgxOHYtMkgzdjJ6bTAtNWgxOHYtMkgzdjJ6bTAtN3YyaDE4VjZIM3onIH0pXG4gICk7XG59O1xuTmF2aWdhdGlvbk1lbnUgPSAoMCwgX3B1cmUyLmRlZmF1bHQpKE5hdmlnYXRpb25NZW51KTtcbk5hdmlnYXRpb25NZW51LmRpc3BsYXlOYW1lID0gJ05hdmlnYXRpb25NZW51Jztcbk5hdmlnYXRpb25NZW51Lm11aU5hbWUgPSAnU3ZnSWNvbic7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IE5hdmlnYXRpb25NZW51O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9zdmctaWNvbnMvbmF2aWdhdGlvbi9tZW51LmpzXG4vLyBtb2R1bGUgaWQgPSAxNjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wdXJlID0gcmVxdWlyZSgncmVjb21wb3NlL3B1cmUnKTtcblxudmFyIF9wdXJlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3B1cmUpO1xuXG52YXIgX1N2Z0ljb24gPSByZXF1aXJlKCcuLi8uLi9TdmdJY29uJyk7XG5cbnZhciBfU3ZnSWNvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TdmdJY29uKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIE5hdmlnYXRpb25Nb3JlVmVydCA9IGZ1bmN0aW9uIE5hdmlnYXRpb25Nb3JlVmVydChwcm9wcykge1xuICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgX1N2Z0ljb24yLmRlZmF1bHQsXG4gICAgcHJvcHMsXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3BhdGgnLCB7IGQ6ICdNMTIgOGMxLjEgMCAyLS45IDItMnMtLjktMi0yLTItMiAuOS0yIDIgLjkgMiAyIDJ6bTAgMmMtMS4xIDAtMiAuOS0yIDJzLjkgMiAyIDIgMi0uOSAyLTItLjktMi0yLTJ6bTAgNmMtMS4xIDAtMiAuOS0yIDJzLjkgMiAyIDIgMi0uOSAyLTItLjktMi0yLTJ6JyB9KVxuICApO1xufTtcbk5hdmlnYXRpb25Nb3JlVmVydCA9ICgwLCBfcHVyZTIuZGVmYXVsdCkoTmF2aWdhdGlvbk1vcmVWZXJ0KTtcbk5hdmlnYXRpb25Nb3JlVmVydC5kaXNwbGF5TmFtZSA9ICdOYXZpZ2F0aW9uTW9yZVZlcnQnO1xuTmF2aWdhdGlvbk1vcmVWZXJ0Lm11aU5hbWUgPSAnU3ZnSWNvbic7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IE5hdmlnYXRpb25Nb3JlVmVydDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWF0ZXJpYWwtdWkvc3ZnLWljb25zL25hdmlnYXRpb24vbW9yZS12ZXJ0LmpzXG4vLyBtb2R1bGUgaWQgPSAxNjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wdXJlID0gcmVxdWlyZSgncmVjb21wb3NlL3B1cmUnKTtcblxudmFyIF9wdXJlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3B1cmUpO1xuXG52YXIgX1N2Z0ljb24gPSByZXF1aXJlKCcuLi8uLi9TdmdJY29uJyk7XG5cbnZhciBfU3ZnSWNvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TdmdJY29uKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIFRvZ2dsZUNoZWNrQm94T3V0bGluZUJsYW5rID0gZnVuY3Rpb24gVG9nZ2xlQ2hlY2tCb3hPdXRsaW5lQmxhbmsocHJvcHMpIHtcbiAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgIF9TdmdJY29uMi5kZWZhdWx0LFxuICAgIHByb3BzLFxuICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdwYXRoJywgeyBkOiAnTTE5IDV2MTRINVY1aDE0bTAtMkg1Yy0xLjEgMC0yIC45LTIgMnYxNGMwIDEuMS45IDIgMiAyaDE0YzEuMSAwIDItLjkgMi0yVjVjMC0xLjEtLjktMi0yLTJ6JyB9KVxuICApO1xufTtcblRvZ2dsZUNoZWNrQm94T3V0bGluZUJsYW5rID0gKDAsIF9wdXJlMi5kZWZhdWx0KShUb2dnbGVDaGVja0JveE91dGxpbmVCbGFuayk7XG5Ub2dnbGVDaGVja0JveE91dGxpbmVCbGFuay5kaXNwbGF5TmFtZSA9ICdUb2dnbGVDaGVja0JveE91dGxpbmVCbGFuayc7XG5Ub2dnbGVDaGVja0JveE91dGxpbmVCbGFuay5tdWlOYW1lID0gJ1N2Z0ljb24nO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBUb2dnbGVDaGVja0JveE91dGxpbmVCbGFuaztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWF0ZXJpYWwtdWkvc3ZnLWljb25zL3RvZ2dsZS9jaGVjay1ib3gtb3V0bGluZS1ibGFuay5qc1xuLy8gbW9kdWxlIGlkID0gMTY3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAyIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHVyZSA9IHJlcXVpcmUoJ3JlY29tcG9zZS9wdXJlJyk7XG5cbnZhciBfcHVyZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wdXJlKTtcblxudmFyIF9TdmdJY29uID0gcmVxdWlyZSgnLi4vLi4vU3ZnSWNvbicpO1xuXG52YXIgX1N2Z0ljb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3ZnSWNvbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBUb2dnbGVDaGVja0JveCA9IGZ1bmN0aW9uIFRvZ2dsZUNoZWNrQm94KHByb3BzKSB7XG4gIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICBfU3ZnSWNvbjIuZGVmYXVsdCxcbiAgICBwcm9wcyxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgncGF0aCcsIHsgZDogJ00xOSAzSDVjLTEuMTEgMC0yIC45LTIgMnYxNGMwIDEuMS44OSAyIDIgMmgxNGMxLjExIDAgMi0uOSAyLTJWNWMwLTEuMS0uODktMi0yLTJ6bS05IDE0bC01LTUgMS40MS0xLjQxTDEwIDE0LjE3bDcuNTktNy41OUwxOSA4bC05IDl6JyB9KVxuICApO1xufTtcblRvZ2dsZUNoZWNrQm94ID0gKDAsIF9wdXJlMi5kZWZhdWx0KShUb2dnbGVDaGVja0JveCk7XG5Ub2dnbGVDaGVja0JveC5kaXNwbGF5TmFtZSA9ICdUb2dnbGVDaGVja0JveCc7XG5Ub2dnbGVDaGVja0JveC5tdWlOYW1lID0gJ1N2Z0ljb24nO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBUb2dnbGVDaGVja0JveDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWF0ZXJpYWwtdWkvc3ZnLWljb25zL3RvZ2dsZS9jaGVjay1ib3guanNcbi8vIG1vZHVsZSBpZCA9IDE2OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuTEFSR0UgPSBleHBvcnRzLk1FRElVTSA9IGV4cG9ydHMuU01BTEwgPSB1bmRlZmluZWQ7XG5cbnZhciBfZXh0ZW5kczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvZXh0ZW5kcycpO1xuXG52YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mJyk7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjaycpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7XG5cbnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzJyk7XG5cbnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuJyk7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7XG5cbnZhciBfaW5oZXJpdHMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzJyk7XG5cbnZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gd2l0aFdpZHRoO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3RFdmVudExpc3RlbmVyID0gcmVxdWlyZSgncmVhY3QtZXZlbnQtbGlzdGVuZXInKTtcblxudmFyIF9yZWFjdEV2ZW50TGlzdGVuZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3RFdmVudExpc3RlbmVyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIFNNQUxMID0gZXhwb3J0cy5TTUFMTCA9IDE7XG52YXIgTUVESVVNID0gZXhwb3J0cy5NRURJVU0gPSAyO1xudmFyIExBUkdFID0gZXhwb3J0cy5MQVJHRSA9IDM7XG5cbmZ1bmN0aW9uIHdpdGhXaWR0aCgpIHtcbiAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICB2YXIgX29wdGlvbnMkbGFyZ2VXaWR0aCA9IG9wdGlvbnMubGFyZ2VXaWR0aCxcbiAgICAgIGxhcmdlV2lkdGggPSBfb3B0aW9ucyRsYXJnZVdpZHRoID09PSB1bmRlZmluZWQgPyA5OTIgOiBfb3B0aW9ucyRsYXJnZVdpZHRoLFxuICAgICAgX29wdGlvbnMkbWVkaXVtV2lkdGggPSBvcHRpb25zLm1lZGl1bVdpZHRoLFxuICAgICAgbWVkaXVtV2lkdGggPSBfb3B0aW9ucyRtZWRpdW1XaWR0aCA9PT0gdW5kZWZpbmVkID8gNzY4IDogX29wdGlvbnMkbWVkaXVtV2lkdGgsXG4gICAgICBfb3B0aW9ucyRyZXNpemVJbnRlcnYgPSBvcHRpb25zLnJlc2l6ZUludGVydmFsLFxuICAgICAgcmVzaXplSW50ZXJ2YWwgPSBfb3B0aW9ucyRyZXNpemVJbnRlcnYgPT09IHVuZGVmaW5lZCA/IDE2NiA6IF9vcHRpb25zJHJlc2l6ZUludGVydjtcblxuXG4gIHJldHVybiBmdW5jdGlvbiAoTXlDb21wb25lbnQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgICAgICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKFdpdGhXaWR0aCwgX0NvbXBvbmVudCk7XG5cbiAgICAgIGZ1bmN0aW9uIFdpdGhXaWR0aCgpIHtcbiAgICAgICAgdmFyIF9yZWY7XG5cbiAgICAgICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgICAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBXaXRoV2lkdGgpO1xuXG4gICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoX3JlZiA9IFdpdGhXaWR0aC5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoV2l0aFdpZHRoKSkuY2FsbC5hcHBseShfcmVmLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgd2lkdGg6IG51bGxcbiAgICAgICAgfSwgX3RoaXMuaGFuZGxlUmVzaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dChfdGhpcy5kZWZlclRpbWVyKTtcbiAgICAgICAgICBfdGhpcy5kZWZlclRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy51cGRhdGVXaWR0aCgpO1xuICAgICAgICAgIH0sIHJlc2l6ZUludGVydmFsKTtcbiAgICAgICAgfSwgX3RlbXApLCAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKF90aGlzLCBfcmV0KTtcbiAgICAgIH1cblxuICAgICAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoV2l0aFdpZHRoLCBbe1xuICAgICAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgICB0aGlzLnVwZGF0ZVdpZHRoKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIHtcbiAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbFVubW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGVmZXJUaW1lcik7XG4gICAgICAgIH1cbiAgICAgIH0sIHtcbiAgICAgICAga2V5OiAndXBkYXRlV2lkdGgnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlV2lkdGgoKSB7XG4gICAgICAgICAgdmFyIGlubmVyV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgICB2YXIgd2lkdGggPSB2b2lkIDA7XG5cbiAgICAgICAgICBpZiAoaW5uZXJXaWR0aCA+PSBsYXJnZVdpZHRoKSB7XG4gICAgICAgICAgICB3aWR0aCA9IExBUkdFO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaW5uZXJXaWR0aCA+PSBtZWRpdW1XaWR0aCkge1xuICAgICAgICAgICAgd2lkdGggPSBNRURJVU07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGlubmVyV2lkdGggPCA3NjhcbiAgICAgICAgICAgIHdpZHRoID0gU01BTEw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHdpZHRoICE9PSB0aGlzLnN0YXRlLndpZHRoKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICB2YXIgd2lkdGggPSB0aGlzLnN0YXRlLndpZHRoO1xuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogV2hlbiByZW5kZXJpbmcgdGhlIGNvbXBvbmVudCBvbiB0aGUgc2VydmVyLFxuICAgICAgICAgICAqIHdlIGhhdmUgbm8gaWRlYSBhYm91dCB0aGUgc2NyZWVuIHdpZHRoLlxuICAgICAgICAgICAqIEluIG9yZGVyIHRvIHByZXZlbnQgYmxpbmtzIGFuZCBoZWxwIHRoZSByZWNvbmNpbGlhdGlvblxuICAgICAgICAgICAqIHdlIGFyZSBub3QgcmVuZGVyaW5nIHRoZSBjb21wb25lbnQuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBBIGJldHRlciBhbHRlcm5hdGl2ZSB3b3VsZCBiZSB0byBzZW5kIGNsaWVudCBoaW50cy5cbiAgICAgICAgICAgKiBCdXQgdGhlIGJyb3dzZXIgc3VwcG9ydCBvZiB0aGlzIEFQSSBpcyBsb3c6XG4gICAgICAgICAgICogaHR0cDovL2Nhbml1c2UuY29tLyNzZWFyY2g9Y2xpZW50JTIwaGludFxuICAgICAgICAgICAqL1xuICAgICAgICAgIGlmICh3aWR0aCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgX3JlYWN0RXZlbnRMaXN0ZW5lcjIuZGVmYXVsdCxcbiAgICAgICAgICAgIHsgdGFyZ2V0OiAnd2luZG93Jywgb25SZXNpemU6IHRoaXMuaGFuZGxlUmVzaXplIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChNeUNvbXBvbmVudCwgKDAsIF9leHRlbmRzMy5kZWZhdWx0KSh7XG4gICAgICAgICAgICAgIHdpZHRoOiB3aWR0aFxuICAgICAgICAgICAgfSwgdGhpcy5wcm9wcykpXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfV0pO1xuICAgICAgcmV0dXJuIFdpdGhXaWR0aDtcbiAgICB9KF9yZWFjdC5Db21wb25lbnQpO1xuICB9O1xufVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS91dGlscy93aXRoV2lkdGguanNcbi8vIG1vZHVsZSBpZCA9IDE2OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMiIsInZhciBpc2FycmF5ID0gcmVxdWlyZSgnaXNhcnJheScpXG5cbi8qKlxuICogRXhwb3NlIGBwYXRoVG9SZWdleHBgLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IHBhdGhUb1JlZ2V4cFxubW9kdWxlLmV4cG9ydHMucGFyc2UgPSBwYXJzZVxubW9kdWxlLmV4cG9ydHMuY29tcGlsZSA9IGNvbXBpbGVcbm1vZHVsZS5leHBvcnRzLnRva2Vuc1RvRnVuY3Rpb24gPSB0b2tlbnNUb0Z1bmN0aW9uXG5tb2R1bGUuZXhwb3J0cy50b2tlbnNUb1JlZ0V4cCA9IHRva2Vuc1RvUmVnRXhwXG5cbi8qKlxuICogVGhlIG1haW4gcGF0aCBtYXRjaGluZyByZWdleHAgdXRpbGl0eS5cbiAqXG4gKiBAdHlwZSB7UmVnRXhwfVxuICovXG52YXIgUEFUSF9SRUdFWFAgPSBuZXcgUmVnRXhwKFtcbiAgLy8gTWF0Y2ggZXNjYXBlZCBjaGFyYWN0ZXJzIHRoYXQgd291bGQgb3RoZXJ3aXNlIGFwcGVhciBpbiBmdXR1cmUgbWF0Y2hlcy5cbiAgLy8gVGhpcyBhbGxvd3MgdGhlIHVzZXIgdG8gZXNjYXBlIHNwZWNpYWwgY2hhcmFjdGVycyB0aGF0IHdvbid0IHRyYW5zZm9ybS5cbiAgJyhcXFxcXFxcXC4pJyxcbiAgLy8gTWF0Y2ggRXhwcmVzcy1zdHlsZSBwYXJhbWV0ZXJzIGFuZCB1bi1uYW1lZCBwYXJhbWV0ZXJzIHdpdGggYSBwcmVmaXhcbiAgLy8gYW5kIG9wdGlvbmFsIHN1ZmZpeGVzLiBNYXRjaGVzIGFwcGVhciBhczpcbiAgLy9cbiAgLy8gXCIvOnRlc3QoXFxcXGQrKT9cIiA9PiBbXCIvXCIsIFwidGVzdFwiLCBcIlxcZCtcIiwgdW5kZWZpbmVkLCBcIj9cIiwgdW5kZWZpbmVkXVxuICAvLyBcIi9yb3V0ZShcXFxcZCspXCIgID0+IFt1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBcIlxcZCtcIiwgdW5kZWZpbmVkLCB1bmRlZmluZWRdXG4gIC8vIFwiLypcIiAgICAgICAgICAgID0+IFtcIi9cIiwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBcIipcIl1cbiAgJyhbXFxcXC8uXSk/KD86KD86XFxcXDooXFxcXHcrKSg/OlxcXFwoKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKCldKSspXFxcXCkpP3xcXFxcKCgoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpXSkrKVxcXFwpKShbKyo/XSk/fChcXFxcKikpJ1xuXS5qb2luKCd8JyksICdnJylcblxuLyoqXG4gKiBQYXJzZSBhIHN0cmluZyBmb3IgdGhlIHJhdyB0b2tlbnMuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSAgc3RyXG4gKiBAcGFyYW0gIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAcmV0dXJuIHshQXJyYXl9XG4gKi9cbmZ1bmN0aW9uIHBhcnNlIChzdHIsIG9wdGlvbnMpIHtcbiAgdmFyIHRva2VucyA9IFtdXG4gIHZhciBrZXkgPSAwXG4gIHZhciBpbmRleCA9IDBcbiAgdmFyIHBhdGggPSAnJ1xuICB2YXIgZGVmYXVsdERlbGltaXRlciA9IG9wdGlvbnMgJiYgb3B0aW9ucy5kZWxpbWl0ZXIgfHwgJy8nXG4gIHZhciByZXNcblxuICB3aGlsZSAoKHJlcyA9IFBBVEhfUkVHRVhQLmV4ZWMoc3RyKSkgIT0gbnVsbCkge1xuICAgIHZhciBtID0gcmVzWzBdXG4gICAgdmFyIGVzY2FwZWQgPSByZXNbMV1cbiAgICB2YXIgb2Zmc2V0ID0gcmVzLmluZGV4XG4gICAgcGF0aCArPSBzdHIuc2xpY2UoaW5kZXgsIG9mZnNldClcbiAgICBpbmRleCA9IG9mZnNldCArIG0ubGVuZ3RoXG5cbiAgICAvLyBJZ25vcmUgYWxyZWFkeSBlc2NhcGVkIHNlcXVlbmNlcy5cbiAgICBpZiAoZXNjYXBlZCkge1xuICAgICAgcGF0aCArPSBlc2NhcGVkWzFdXG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIHZhciBuZXh0ID0gc3RyW2luZGV4XVxuICAgIHZhciBwcmVmaXggPSByZXNbMl1cbiAgICB2YXIgbmFtZSA9IHJlc1szXVxuICAgIHZhciBjYXB0dXJlID0gcmVzWzRdXG4gICAgdmFyIGdyb3VwID0gcmVzWzVdXG4gICAgdmFyIG1vZGlmaWVyID0gcmVzWzZdXG4gICAgdmFyIGFzdGVyaXNrID0gcmVzWzddXG5cbiAgICAvLyBQdXNoIHRoZSBjdXJyZW50IHBhdGggb250byB0aGUgdG9rZW5zLlxuICAgIGlmIChwYXRoKSB7XG4gICAgICB0b2tlbnMucHVzaChwYXRoKVxuICAgICAgcGF0aCA9ICcnXG4gICAgfVxuXG4gICAgdmFyIHBhcnRpYWwgPSBwcmVmaXggIT0gbnVsbCAmJiBuZXh0ICE9IG51bGwgJiYgbmV4dCAhPT0gcHJlZml4XG4gICAgdmFyIHJlcGVhdCA9IG1vZGlmaWVyID09PSAnKycgfHwgbW9kaWZpZXIgPT09ICcqJ1xuICAgIHZhciBvcHRpb25hbCA9IG1vZGlmaWVyID09PSAnPycgfHwgbW9kaWZpZXIgPT09ICcqJ1xuICAgIHZhciBkZWxpbWl0ZXIgPSByZXNbMl0gfHwgZGVmYXVsdERlbGltaXRlclxuICAgIHZhciBwYXR0ZXJuID0gY2FwdHVyZSB8fCBncm91cFxuXG4gICAgdG9rZW5zLnB1c2goe1xuICAgICAgbmFtZTogbmFtZSB8fCBrZXkrKyxcbiAgICAgIHByZWZpeDogcHJlZml4IHx8ICcnLFxuICAgICAgZGVsaW1pdGVyOiBkZWxpbWl0ZXIsXG4gICAgICBvcHRpb25hbDogb3B0aW9uYWwsXG4gICAgICByZXBlYXQ6IHJlcGVhdCxcbiAgICAgIHBhcnRpYWw6IHBhcnRpYWwsXG4gICAgICBhc3RlcmlzazogISFhc3RlcmlzayxcbiAgICAgIHBhdHRlcm46IHBhdHRlcm4gPyBlc2NhcGVHcm91cChwYXR0ZXJuKSA6IChhc3RlcmlzayA/ICcuKicgOiAnW14nICsgZXNjYXBlU3RyaW5nKGRlbGltaXRlcikgKyAnXSs/JylcbiAgICB9KVxuICB9XG5cbiAgLy8gTWF0Y2ggYW55IGNoYXJhY3RlcnMgc3RpbGwgcmVtYWluaW5nLlxuICBpZiAoaW5kZXggPCBzdHIubGVuZ3RoKSB7XG4gICAgcGF0aCArPSBzdHIuc3Vic3RyKGluZGV4KVxuICB9XG5cbiAgLy8gSWYgdGhlIHBhdGggZXhpc3RzLCBwdXNoIGl0IG9udG8gdGhlIGVuZC5cbiAgaWYgKHBhdGgpIHtcbiAgICB0b2tlbnMucHVzaChwYXRoKVxuICB9XG5cbiAgcmV0dXJuIHRva2Vuc1xufVxuXG4vKipcbiAqIENvbXBpbGUgYSBzdHJpbmcgdG8gYSB0ZW1wbGF0ZSBmdW5jdGlvbiBmb3IgdGhlIHBhdGguXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSAgICAgICAgICAgICBzdHJcbiAqIEBwYXJhbSAge09iamVjdD19ICAgICAgICAgICAgb3B0aW9uc1xuICogQHJldHVybiB7IWZ1bmN0aW9uKE9iamVjdD0sIE9iamVjdD0pfVxuICovXG5mdW5jdGlvbiBjb21waWxlIChzdHIsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIHRva2Vuc1RvRnVuY3Rpb24ocGFyc2Uoc3RyLCBvcHRpb25zKSlcbn1cblxuLyoqXG4gKiBQcmV0dGllciBlbmNvZGluZyBvZiBVUkkgcGF0aCBzZWdtZW50cy5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGVuY29kZVVSSUNvbXBvbmVudFByZXR0eSAoc3RyKSB7XG4gIHJldHVybiBlbmNvZGVVUkkoc3RyKS5yZXBsYWNlKC9bXFwvPyNdL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgcmV0dXJuICclJyArIGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKVxuICB9KVxufVxuXG4vKipcbiAqIEVuY29kZSB0aGUgYXN0ZXJpc2sgcGFyYW1ldGVyLiBTaW1pbGFyIHRvIGBwcmV0dHlgLCBidXQgYWxsb3dzIHNsYXNoZXMuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBlbmNvZGVBc3RlcmlzayAoc3RyKSB7XG4gIHJldHVybiBlbmNvZGVVUkkoc3RyKS5yZXBsYWNlKC9bPyNdL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgcmV0dXJuICclJyArIGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKVxuICB9KVxufVxuXG4vKipcbiAqIEV4cG9zZSBhIG1ldGhvZCBmb3IgdHJhbnNmb3JtaW5nIHRva2VucyBpbnRvIHRoZSBwYXRoIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiB0b2tlbnNUb0Z1bmN0aW9uICh0b2tlbnMpIHtcbiAgLy8gQ29tcGlsZSBhbGwgdGhlIHRva2VucyBpbnRvIHJlZ2V4cHMuXG4gIHZhciBtYXRjaGVzID0gbmV3IEFycmF5KHRva2Vucy5sZW5ndGgpXG5cbiAgLy8gQ29tcGlsZSBhbGwgdGhlIHBhdHRlcm5zIGJlZm9yZSBjb21waWxhdGlvbi5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAodHlwZW9mIHRva2Vuc1tpXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIG1hdGNoZXNbaV0gPSBuZXcgUmVnRXhwKCdeKD86JyArIHRva2Vuc1tpXS5wYXR0ZXJuICsgJykkJylcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKG9iaiwgb3B0cykge1xuICAgIHZhciBwYXRoID0gJydcbiAgICB2YXIgZGF0YSA9IG9iaiB8fCB7fVxuICAgIHZhciBvcHRpb25zID0gb3B0cyB8fCB7fVxuICAgIHZhciBlbmNvZGUgPSBvcHRpb25zLnByZXR0eSA/IGVuY29kZVVSSUNvbXBvbmVudFByZXR0eSA6IGVuY29kZVVSSUNvbXBvbmVudFxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB0b2tlbiA9IHRva2Vuc1tpXVxuXG4gICAgICBpZiAodHlwZW9mIHRva2VuID09PSAnc3RyaW5nJykge1xuICAgICAgICBwYXRoICs9IHRva2VuXG5cbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgdmFyIHZhbHVlID0gZGF0YVt0b2tlbi5uYW1lXVxuICAgICAgdmFyIHNlZ21lbnRcblxuICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgaWYgKHRva2VuLm9wdGlvbmFsKSB7XG4gICAgICAgICAgLy8gUHJlcGVuZCBwYXJ0aWFsIHNlZ21lbnQgcHJlZml4ZXMuXG4gICAgICAgICAgaWYgKHRva2VuLnBhcnRpYWwpIHtcbiAgICAgICAgICAgIHBhdGggKz0gdG9rZW4ucHJlZml4XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBcIicgKyB0b2tlbi5uYW1lICsgJ1wiIHRvIGJlIGRlZmluZWQnKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChpc2FycmF5KHZhbHVlKSkge1xuICAgICAgICBpZiAoIXRva2VuLnJlcGVhdCkge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIFwiJyArIHRva2VuLm5hbWUgKyAnXCIgdG8gbm90IHJlcGVhdCwgYnV0IHJlY2VpdmVkIGAnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpICsgJ2AnKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGlmICh0b2tlbi5vcHRpb25hbCkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgXCInICsgdG9rZW4ubmFtZSArICdcIiB0byBub3QgYmUgZW1wdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmFsdWUubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBzZWdtZW50ID0gZW5jb2RlKHZhbHVlW2pdKVxuXG4gICAgICAgICAgaWYgKCFtYXRjaGVzW2ldLnRlc3Qoc2VnbWVudCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGFsbCBcIicgKyB0b2tlbi5uYW1lICsgJ1wiIHRvIG1hdGNoIFwiJyArIHRva2VuLnBhdHRlcm4gKyAnXCIsIGJ1dCByZWNlaXZlZCBgJyArIEpTT04uc3RyaW5naWZ5KHNlZ21lbnQpICsgJ2AnKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHBhdGggKz0gKGogPT09IDAgPyB0b2tlbi5wcmVmaXggOiB0b2tlbi5kZWxpbWl0ZXIpICsgc2VnbWVudFxuICAgICAgICB9XG5cbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgc2VnbWVudCA9IHRva2VuLmFzdGVyaXNrID8gZW5jb2RlQXN0ZXJpc2sodmFsdWUpIDogZW5jb2RlKHZhbHVlKVxuXG4gICAgICBpZiAoIW1hdGNoZXNbaV0udGVzdChzZWdtZW50KSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBcIicgKyB0b2tlbi5uYW1lICsgJ1wiIHRvIG1hdGNoIFwiJyArIHRva2VuLnBhdHRlcm4gKyAnXCIsIGJ1dCByZWNlaXZlZCBcIicgKyBzZWdtZW50ICsgJ1wiJylcbiAgICAgIH1cblxuICAgICAgcGF0aCArPSB0b2tlbi5wcmVmaXggKyBzZWdtZW50XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhdGhcbiAgfVxufVxuXG4vKipcbiAqIEVzY2FwZSBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBzdHJpbmcuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZXNjYXBlU3RyaW5nIChzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oWy4rKj89XiE6JHt9KClbXFxdfFxcL1xcXFxdKS9nLCAnXFxcXCQxJylcbn1cblxuLyoqXG4gKiBFc2NhcGUgdGhlIGNhcHR1cmluZyBncm91cCBieSBlc2NhcGluZyBzcGVjaWFsIGNoYXJhY3RlcnMgYW5kIG1lYW5pbmcuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSBncm91cFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBlc2NhcGVHcm91cCAoZ3JvdXApIHtcbiAgcmV0dXJuIGdyb3VwLnJlcGxhY2UoLyhbPSE6JFxcLygpXSkvZywgJ1xcXFwkMScpXG59XG5cbi8qKlxuICogQXR0YWNoIHRoZSBrZXlzIGFzIGEgcHJvcGVydHkgb2YgdGhlIHJlZ2V4cC5cbiAqXG4gKiBAcGFyYW0gIHshUmVnRXhwfSByZVxuICogQHBhcmFtICB7QXJyYXl9ICAga2V5c1xuICogQHJldHVybiB7IVJlZ0V4cH1cbiAqL1xuZnVuY3Rpb24gYXR0YWNoS2V5cyAocmUsIGtleXMpIHtcbiAgcmUua2V5cyA9IGtleXNcbiAgcmV0dXJuIHJlXG59XG5cbi8qKlxuICogR2V0IHRoZSBmbGFncyBmb3IgYSByZWdleHAgZnJvbSB0aGUgb3B0aW9ucy5cbiAqXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZmxhZ3MgKG9wdGlvbnMpIHtcbiAgcmV0dXJuIG9wdGlvbnMuc2Vuc2l0aXZlID8gJycgOiAnaSdcbn1cblxuLyoqXG4gKiBQdWxsIG91dCBrZXlzIGZyb20gYSByZWdleHAuXG4gKlxuICogQHBhcmFtICB7IVJlZ0V4cH0gcGF0aFxuICogQHBhcmFtICB7IUFycmF5fSAga2V5c1xuICogQHJldHVybiB7IVJlZ0V4cH1cbiAqL1xuZnVuY3Rpb24gcmVnZXhwVG9SZWdleHAgKHBhdGgsIGtleXMpIHtcbiAgLy8gVXNlIGEgbmVnYXRpdmUgbG9va2FoZWFkIHRvIG1hdGNoIG9ubHkgY2FwdHVyaW5nIGdyb3Vwcy5cbiAgdmFyIGdyb3VwcyA9IHBhdGguc291cmNlLm1hdGNoKC9cXCgoPyFcXD8pL2cpXG5cbiAgaWYgKGdyb3Vwcykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JvdXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBrZXlzLnB1c2goe1xuICAgICAgICBuYW1lOiBpLFxuICAgICAgICBwcmVmaXg6IG51bGwsXG4gICAgICAgIGRlbGltaXRlcjogbnVsbCxcbiAgICAgICAgb3B0aW9uYWw6IGZhbHNlLFxuICAgICAgICByZXBlYXQ6IGZhbHNlLFxuICAgICAgICBwYXJ0aWFsOiBmYWxzZSxcbiAgICAgICAgYXN0ZXJpc2s6IGZhbHNlLFxuICAgICAgICBwYXR0ZXJuOiBudWxsXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhdHRhY2hLZXlzKHBhdGgsIGtleXMpXG59XG5cbi8qKlxuICogVHJhbnNmb3JtIGFuIGFycmF5IGludG8gYSByZWdleHAuXG4gKlxuICogQHBhcmFtICB7IUFycmF5fSAgcGF0aFxuICogQHBhcmFtICB7QXJyYXl9ICAga2V5c1xuICogQHBhcmFtICB7IU9iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7IVJlZ0V4cH1cbiAqL1xuZnVuY3Rpb24gYXJyYXlUb1JlZ2V4cCAocGF0aCwga2V5cywgb3B0aW9ucykge1xuICB2YXIgcGFydHMgPSBbXVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xuICAgIHBhcnRzLnB1c2gocGF0aFRvUmVnZXhwKHBhdGhbaV0sIGtleXMsIG9wdGlvbnMpLnNvdXJjZSlcbiAgfVxuXG4gIHZhciByZWdleHAgPSBuZXcgUmVnRXhwKCcoPzonICsgcGFydHMuam9pbignfCcpICsgJyknLCBmbGFncyhvcHRpb25zKSlcblxuICByZXR1cm4gYXR0YWNoS2V5cyhyZWdleHAsIGtleXMpXG59XG5cbi8qKlxuICogQ3JlYXRlIGEgcGF0aCByZWdleHAgZnJvbSBzdHJpbmcgaW5wdXQuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSAgcGF0aFxuICogQHBhcmFtICB7IUFycmF5fSAga2V5c1xuICogQHBhcmFtICB7IU9iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7IVJlZ0V4cH1cbiAqL1xuZnVuY3Rpb24gc3RyaW5nVG9SZWdleHAgKHBhdGgsIGtleXMsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIHRva2Vuc1RvUmVnRXhwKHBhcnNlKHBhdGgsIG9wdGlvbnMpLCBrZXlzLCBvcHRpb25zKVxufVxuXG4vKipcbiAqIEV4cG9zZSBhIGZ1bmN0aW9uIGZvciB0YWtpbmcgdG9rZW5zIGFuZCByZXR1cm5pbmcgYSBSZWdFeHAuXG4gKlxuICogQHBhcmFtICB7IUFycmF5fSAgICAgICAgICB0b2tlbnNcbiAqIEBwYXJhbSAgeyhBcnJheXxPYmplY3QpPX0ga2V5c1xuICogQHBhcmFtICB7T2JqZWN0PX0gICAgICAgICBvcHRpb25zXG4gKiBAcmV0dXJuIHshUmVnRXhwfVxuICovXG5mdW5jdGlvbiB0b2tlbnNUb1JlZ0V4cCAodG9rZW5zLCBrZXlzLCBvcHRpb25zKSB7XG4gIGlmICghaXNhcnJheShrZXlzKSkge1xuICAgIG9wdGlvbnMgPSAvKiogQHR5cGUgeyFPYmplY3R9ICovIChrZXlzIHx8IG9wdGlvbnMpXG4gICAga2V5cyA9IFtdXG4gIH1cblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuXG4gIHZhciBzdHJpY3QgPSBvcHRpb25zLnN0cmljdFxuICB2YXIgZW5kID0gb3B0aW9ucy5lbmQgIT09IGZhbHNlXG4gIHZhciByb3V0ZSA9ICcnXG5cbiAgLy8gSXRlcmF0ZSBvdmVyIHRoZSB0b2tlbnMgYW5kIGNyZWF0ZSBvdXIgcmVnZXhwIHN0cmluZy5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgdG9rZW4gPSB0b2tlbnNbaV1cblxuICAgIGlmICh0eXBlb2YgdG9rZW4gPT09ICdzdHJpbmcnKSB7XG4gICAgICByb3V0ZSArPSBlc2NhcGVTdHJpbmcodG9rZW4pXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBwcmVmaXggPSBlc2NhcGVTdHJpbmcodG9rZW4ucHJlZml4KVxuICAgICAgdmFyIGNhcHR1cmUgPSAnKD86JyArIHRva2VuLnBhdHRlcm4gKyAnKSdcblxuICAgICAga2V5cy5wdXNoKHRva2VuKVxuXG4gICAgICBpZiAodG9rZW4ucmVwZWF0KSB7XG4gICAgICAgIGNhcHR1cmUgKz0gJyg/OicgKyBwcmVmaXggKyBjYXB0dXJlICsgJykqJ1xuICAgICAgfVxuXG4gICAgICBpZiAodG9rZW4ub3B0aW9uYWwpIHtcbiAgICAgICAgaWYgKCF0b2tlbi5wYXJ0aWFsKSB7XG4gICAgICAgICAgY2FwdHVyZSA9ICcoPzonICsgcHJlZml4ICsgJygnICsgY2FwdHVyZSArICcpKT8nXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FwdHVyZSA9IHByZWZpeCArICcoJyArIGNhcHR1cmUgKyAnKT8nXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhcHR1cmUgPSBwcmVmaXggKyAnKCcgKyBjYXB0dXJlICsgJyknXG4gICAgICB9XG5cbiAgICAgIHJvdXRlICs9IGNhcHR1cmVcbiAgICB9XG4gIH1cblxuICB2YXIgZGVsaW1pdGVyID0gZXNjYXBlU3RyaW5nKG9wdGlvbnMuZGVsaW1pdGVyIHx8ICcvJylcbiAgdmFyIGVuZHNXaXRoRGVsaW1pdGVyID0gcm91dGUuc2xpY2UoLWRlbGltaXRlci5sZW5ndGgpID09PSBkZWxpbWl0ZXJcblxuICAvLyBJbiBub24tc3RyaWN0IG1vZGUgd2UgYWxsb3cgYSBzbGFzaCBhdCB0aGUgZW5kIG9mIG1hdGNoLiBJZiB0aGUgcGF0aCB0b1xuICAvLyBtYXRjaCBhbHJlYWR5IGVuZHMgd2l0aCBhIHNsYXNoLCB3ZSByZW1vdmUgaXQgZm9yIGNvbnNpc3RlbmN5LiBUaGUgc2xhc2hcbiAgLy8gaXMgdmFsaWQgYXQgdGhlIGVuZCBvZiBhIHBhdGggbWF0Y2gsIG5vdCBpbiB0aGUgbWlkZGxlLiBUaGlzIGlzIGltcG9ydGFudFxuICAvLyBpbiBub24tZW5kaW5nIG1vZGUsIHdoZXJlIFwiL3Rlc3QvXCIgc2hvdWxkbid0IG1hdGNoIFwiL3Rlc3QvL3JvdXRlXCIuXG4gIGlmICghc3RyaWN0KSB7XG4gICAgcm91dGUgPSAoZW5kc1dpdGhEZWxpbWl0ZXIgPyByb3V0ZS5zbGljZSgwLCAtZGVsaW1pdGVyLmxlbmd0aCkgOiByb3V0ZSkgKyAnKD86JyArIGRlbGltaXRlciArICcoPz0kKSk/J1xuICB9XG5cbiAgaWYgKGVuZCkge1xuICAgIHJvdXRlICs9ICckJ1xuICB9IGVsc2Uge1xuICAgIC8vIEluIG5vbi1lbmRpbmcgbW9kZSwgd2UgbmVlZCB0aGUgY2FwdHVyaW5nIGdyb3VwcyB0byBtYXRjaCBhcyBtdWNoIGFzXG4gICAgLy8gcG9zc2libGUgYnkgdXNpbmcgYSBwb3NpdGl2ZSBsb29rYWhlYWQgdG8gdGhlIGVuZCBvciBuZXh0IHBhdGggc2VnbWVudC5cbiAgICByb3V0ZSArPSBzdHJpY3QgJiYgZW5kc1dpdGhEZWxpbWl0ZXIgPyAnJyA6ICcoPz0nICsgZGVsaW1pdGVyICsgJ3wkKSdcbiAgfVxuXG4gIHJldHVybiBhdHRhY2hLZXlzKG5ldyBSZWdFeHAoJ14nICsgcm91dGUsIGZsYWdzKG9wdGlvbnMpKSwga2V5cylcbn1cblxuLyoqXG4gKiBOb3JtYWxpemUgdGhlIGdpdmVuIHBhdGggc3RyaW5nLCByZXR1cm5pbmcgYSByZWd1bGFyIGV4cHJlc3Npb24uXG4gKlxuICogQW4gZW1wdHkgYXJyYXkgY2FuIGJlIHBhc3NlZCBpbiBmb3IgdGhlIGtleXMsIHdoaWNoIHdpbGwgaG9sZCB0aGVcbiAqIHBsYWNlaG9sZGVyIGtleSBkZXNjcmlwdGlvbnMuIEZvciBleGFtcGxlLCB1c2luZyBgL3VzZXIvOmlkYCwgYGtleXNgIHdpbGxcbiAqIGNvbnRhaW4gYFt7IG5hbWU6ICdpZCcsIGRlbGltaXRlcjogJy8nLCBvcHRpb25hbDogZmFsc2UsIHJlcGVhdDogZmFsc2UgfV1gLlxuICpcbiAqIEBwYXJhbSAgeyhzdHJpbmd8UmVnRXhwfEFycmF5KX0gcGF0aFxuICogQHBhcmFtICB7KEFycmF5fE9iamVjdCk9fSAgICAgICBrZXlzXG4gKiBAcGFyYW0gIHtPYmplY3Q9fSAgICAgICAgICAgICAgIG9wdGlvbnNcbiAqIEByZXR1cm4geyFSZWdFeHB9XG4gKi9cbmZ1bmN0aW9uIHBhdGhUb1JlZ2V4cCAocGF0aCwga2V5cywgb3B0aW9ucykge1xuICBpZiAoIWlzYXJyYXkoa2V5cykpIHtcbiAgICBvcHRpb25zID0gLyoqIEB0eXBlIHshT2JqZWN0fSAqLyAoa2V5cyB8fCBvcHRpb25zKVxuICAgIGtleXMgPSBbXVxuICB9XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cblxuICBpZiAocGF0aCBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgIHJldHVybiByZWdleHBUb1JlZ2V4cChwYXRoLCAvKiogQHR5cGUgeyFBcnJheX0gKi8gKGtleXMpKVxuICB9XG5cbiAgaWYgKGlzYXJyYXkocGF0aCkpIHtcbiAgICByZXR1cm4gYXJyYXlUb1JlZ2V4cCgvKiogQHR5cGUgeyFBcnJheX0gKi8gKHBhdGgpLCAvKiogQHR5cGUgeyFBcnJheX0gKi8gKGtleXMpLCBvcHRpb25zKVxuICB9XG5cbiAgcmV0dXJuIHN0cmluZ1RvUmVnZXhwKC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAocGF0aCksIC8qKiBAdHlwZSB7IUFycmF5fSAqLyAoa2V5cyksIG9wdGlvbnMpXG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcGF0aC10by1yZWdleHAvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE3MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJyKSA9PSAnW29iamVjdCBBcnJheV0nO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9wYXRoLXRvLXJlZ2V4cC9+L2lzYXJyYXkvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE3MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuaW1wb3J0IHdhcm5pbmcgZnJvbSAnd2FybmluZyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBjcmVhdGVIaXN0b3J5IGZyb20gJ2hpc3RvcnkvY3JlYXRlQnJvd3Nlckhpc3RvcnknO1xuaW1wb3J0IFJvdXRlciBmcm9tICcuL1JvdXRlcic7XG5cbi8qKlxuICogVGhlIHB1YmxpYyBBUEkgZm9yIGEgPFJvdXRlcj4gdGhhdCB1c2VzIEhUTUw1IGhpc3RvcnkuXG4gKi9cblxudmFyIEJyb3dzZXJSb3V0ZXIgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoQnJvd3NlclJvdXRlciwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQnJvd3NlclJvdXRlcigpIHtcbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJyb3dzZXJSb3V0ZXIpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfUmVhY3QkQ29tcG9uZW50LmNhbGwuYXBwbHkoX1JlYWN0JENvbXBvbmVudCwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLmhpc3RvcnkgPSBjcmVhdGVIaXN0b3J5KF90aGlzLnByb3BzKSwgX3RlbXApLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7XG4gIH1cblxuICBCcm93c2VyUm91dGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgd2FybmluZyghdGhpcy5wcm9wcy5oaXN0b3J5LCAnPEJyb3dzZXJSb3V0ZXI+IGlnbm9yZXMgdGhlIGhpc3RvcnkgcHJvcC4gVG8gdXNlIGEgY3VzdG9tIGhpc3RvcnksICcgKyAndXNlIGBpbXBvcnQgeyBSb3V0ZXIgfWAgaW5zdGVhZCBvZiBgaW1wb3J0IHsgQnJvd3NlclJvdXRlciBhcyBSb3V0ZXIgfWAuJyk7XG4gIH07XG5cbiAgQnJvd3NlclJvdXRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFJvdXRlciwgeyBoaXN0b3J5OiB0aGlzLmhpc3RvcnksIGNoaWxkcmVuOiB0aGlzLnByb3BzLmNoaWxkcmVuIH0pO1xuICB9O1xuXG4gIHJldHVybiBCcm93c2VyUm91dGVyO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5Ccm93c2VyUm91dGVyLnByb3BUeXBlcyA9IHtcbiAgYmFzZW5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGZvcmNlUmVmcmVzaDogUHJvcFR5cGVzLmJvb2wsXG4gIGdldFVzZXJDb25maXJtYXRpb246IFByb3BUeXBlcy5mdW5jLFxuICBrZXlMZW5ndGg6IFByb3BUeXBlcy5udW1iZXIsXG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZVxufTtcblxuXG5leHBvcnQgZGVmYXVsdCBCcm93c2VyUm91dGVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXItZG9tL2VzL0Jyb3dzZXJSb3V0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE4OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuaW1wb3J0IHdhcm5pbmcgZnJvbSAnd2FybmluZyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBjcmVhdGVIaXN0b3J5IGZyb20gJ2hpc3RvcnkvY3JlYXRlSGFzaEhpc3RvcnknO1xuaW1wb3J0IFJvdXRlciBmcm9tICcuL1JvdXRlcic7XG5cbi8qKlxuICogVGhlIHB1YmxpYyBBUEkgZm9yIGEgPFJvdXRlcj4gdGhhdCB1c2VzIHdpbmRvdy5sb2NhdGlvbi5oYXNoLlxuICovXG5cbnZhciBIYXNoUm91dGVyID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKEhhc2hSb3V0ZXIsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEhhc2hSb3V0ZXIoKSB7XG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBIYXNoUm91dGVyKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX1JlYWN0JENvbXBvbmVudC5jYWxsLmFwcGx5KF9SZWFjdCRDb21wb25lbnQsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5oaXN0b3J5ID0gY3JlYXRlSGlzdG9yeShfdGhpcy5wcm9wcyksIF90ZW1wKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgSGFzaFJvdXRlci5wcm90b3R5cGUuY29tcG9uZW50V2lsbE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIHdhcm5pbmcoIXRoaXMucHJvcHMuaGlzdG9yeSwgJzxIYXNoUm91dGVyPiBpZ25vcmVzIHRoZSBoaXN0b3J5IHByb3AuIFRvIHVzZSBhIGN1c3RvbSBoaXN0b3J5LCAnICsgJ3VzZSBgaW1wb3J0IHsgUm91dGVyIH1gIGluc3RlYWQgb2YgYGltcG9ydCB7IEhhc2hSb3V0ZXIgYXMgUm91dGVyIH1gLicpO1xuICB9O1xuXG4gIEhhc2hSb3V0ZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSb3V0ZXIsIHsgaGlzdG9yeTogdGhpcy5oaXN0b3J5LCBjaGlsZHJlbjogdGhpcy5wcm9wcy5jaGlsZHJlbiB9KTtcbiAgfTtcblxuICByZXR1cm4gSGFzaFJvdXRlcjtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxuSGFzaFJvdXRlci5wcm9wVHlwZXMgPSB7XG4gIGJhc2VuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBnZXRVc2VyQ29uZmlybWF0aW9uOiBQcm9wVHlwZXMuZnVuYyxcbiAgaGFzaFR5cGU6IFByb3BUeXBlcy5vbmVPZihbJ2hhc2hiYW5nJywgJ25vc2xhc2gnLCAnc2xhc2gnXSksXG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZVxufTtcblxuXG5leHBvcnQgZGVmYXVsdCBIYXNoUm91dGVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXItZG9tL2VzL0hhc2hSb3V0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE5MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIi8vIFdyaXR0ZW4gaW4gdGhpcyByb3VuZCBhYm91dCB3YXkgZm9yIGJhYmVsLXRyYW5zZm9ybS1pbXBvcnRzXG5pbXBvcnQgTWVtb3J5Um91dGVyIGZyb20gJ3JlYWN0LXJvdXRlci9lcy9NZW1vcnlSb3V0ZXInO1xuXG5leHBvcnQgZGVmYXVsdCBNZW1vcnlSb3V0ZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvTWVtb3J5Um91dGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxOTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJ2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhvYmosIGtleXMpIHsgdmFyIHRhcmdldCA9IHt9OyBmb3IgKHZhciBpIGluIG9iaikgeyBpZiAoa2V5cy5pbmRleE9mKGkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGkpKSBjb250aW51ZTsgdGFyZ2V0W2ldID0gb2JqW2ldOyB9IHJldHVybiB0YXJnZXQ7IH1cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUm91dGUgZnJvbSAnLi9Sb3V0ZSc7XG5pbXBvcnQgTGluayBmcm9tICcuL0xpbmsnO1xuXG4vKipcbiAqIEEgPExpbms+IHdyYXBwZXIgdGhhdCBrbm93cyBpZiBpdCdzIFwiYWN0aXZlXCIgb3Igbm90LlxuICovXG52YXIgTmF2TGluayA9IGZ1bmN0aW9uIE5hdkxpbmsoX3JlZikge1xuICB2YXIgdG8gPSBfcmVmLnRvLFxuICAgICAgZXhhY3QgPSBfcmVmLmV4YWN0LFxuICAgICAgc3RyaWN0ID0gX3JlZi5zdHJpY3QsXG4gICAgICBsb2NhdGlvbiA9IF9yZWYubG9jYXRpb24sXG4gICAgICBhY3RpdmVDbGFzc05hbWUgPSBfcmVmLmFjdGl2ZUNsYXNzTmFtZSxcbiAgICAgIGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLFxuICAgICAgYWN0aXZlU3R5bGUgPSBfcmVmLmFjdGl2ZVN0eWxlLFxuICAgICAgc3R5bGUgPSBfcmVmLnN0eWxlLFxuICAgICAgZ2V0SXNBY3RpdmUgPSBfcmVmLmlzQWN0aXZlLFxuICAgICAgYXJpYUN1cnJlbnQgPSBfcmVmLmFyaWFDdXJyZW50LFxuICAgICAgcmVzdCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBbJ3RvJywgJ2V4YWN0JywgJ3N0cmljdCcsICdsb2NhdGlvbicsICdhY3RpdmVDbGFzc05hbWUnLCAnY2xhc3NOYW1lJywgJ2FjdGl2ZVN0eWxlJywgJ3N0eWxlJywgJ2lzQWN0aXZlJywgJ2FyaWFDdXJyZW50J10pO1xuXG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFJvdXRlLCB7XG4gICAgcGF0aDogKHR5cGVvZiB0byA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodG8pKSA9PT0gJ29iamVjdCcgPyB0by5wYXRobmFtZSA6IHRvLFxuICAgIGV4YWN0OiBleGFjdCxcbiAgICBzdHJpY3Q6IHN0cmljdCxcbiAgICBsb2NhdGlvbjogbG9jYXRpb24sXG4gICAgY2hpbGRyZW46IGZ1bmN0aW9uIGNoaWxkcmVuKF9yZWYyKSB7XG4gICAgICB2YXIgbG9jYXRpb24gPSBfcmVmMi5sb2NhdGlvbixcbiAgICAgICAgICBtYXRjaCA9IF9yZWYyLm1hdGNoO1xuXG4gICAgICB2YXIgaXNBY3RpdmUgPSAhIShnZXRJc0FjdGl2ZSA/IGdldElzQWN0aXZlKG1hdGNoLCBsb2NhdGlvbikgOiBtYXRjaCk7XG5cbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KExpbmssIF9leHRlbmRzKHtcbiAgICAgICAgdG86IHRvLFxuICAgICAgICBjbGFzc05hbWU6IGlzQWN0aXZlID8gW2NsYXNzTmFtZSwgYWN0aXZlQ2xhc3NOYW1lXS5maWx0ZXIoZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfSkuam9pbignICcpIDogY2xhc3NOYW1lLFxuICAgICAgICBzdHlsZTogaXNBY3RpdmUgPyBfZXh0ZW5kcyh7fSwgc3R5bGUsIGFjdGl2ZVN0eWxlKSA6IHN0eWxlLFxuICAgICAgICAnYXJpYS1jdXJyZW50JzogaXNBY3RpdmUgJiYgYXJpYUN1cnJlbnRcbiAgICAgIH0sIHJlc3QpKTtcbiAgICB9XG4gIH0pO1xufTtcblxuTmF2TGluay5wcm9wVHlwZXMgPSB7XG4gIHRvOiBMaW5rLnByb3BUeXBlcy50byxcbiAgZXhhY3Q6IFByb3BUeXBlcy5ib29sLFxuICBzdHJpY3Q6IFByb3BUeXBlcy5ib29sLFxuICBsb2NhdGlvbjogUHJvcFR5cGVzLm9iamVjdCxcbiAgYWN0aXZlQ2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGFjdGl2ZVN0eWxlOiBQcm9wVHlwZXMub2JqZWN0LFxuICBzdHlsZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgaXNBY3RpdmU6IFByb3BUeXBlcy5mdW5jLFxuICBhcmlhQ3VycmVudDogUHJvcFR5cGVzLm9uZU9mKFsncGFnZScsICdzdGVwJywgJ2xvY2F0aW9uJywgJ3RydWUnXSlcbn07XG5cbk5hdkxpbmsuZGVmYXVsdFByb3BzID0ge1xuICBhY3RpdmVDbGFzc05hbWU6ICdhY3RpdmUnLFxuICBhcmlhQ3VycmVudDogJ3RydWUnXG59O1xuXG5leHBvcnQgZGVmYXVsdCBOYXZMaW5rO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXItZG9tL2VzL05hdkxpbmsuanNcbi8vIG1vZHVsZSBpZCA9IDE5MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIi8vIFdyaXR0ZW4gaW4gdGhpcyByb3VuZCBhYm91dCB3YXkgZm9yIGJhYmVsLXRyYW5zZm9ybS1pbXBvcnRzXG5pbXBvcnQgUHJvbXB0IGZyb20gJ3JlYWN0LXJvdXRlci9lcy9Qcm9tcHQnO1xuXG5leHBvcnQgZGVmYXVsdCBQcm9tcHQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvUHJvbXB0LmpzXG4vLyBtb2R1bGUgaWQgPSAxOTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIvLyBXcml0dGVuIGluIHRoaXMgcm91bmQgYWJvdXQgd2F5IGZvciBiYWJlbC10cmFuc2Zvcm0taW1wb3J0c1xuaW1wb3J0IFJlZGlyZWN0IGZyb20gJ3JlYWN0LXJvdXRlci9lcy9SZWRpcmVjdCc7XG5cbmV4cG9ydCBkZWZhdWx0IFJlZGlyZWN0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXItZG9tL2VzL1JlZGlyZWN0LmpzXG4vLyBtb2R1bGUgaWQgPSAxOTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIvLyBXcml0dGVuIGluIHRoaXMgcm91bmQgYWJvdXQgd2F5IGZvciBiYWJlbC10cmFuc2Zvcm0taW1wb3J0c1xuaW1wb3J0IFN0YXRpY1JvdXRlciBmcm9tICdyZWFjdC1yb3V0ZXIvZXMvU3RhdGljUm91dGVyJztcblxuZXhwb3J0IGRlZmF1bHQgU3RhdGljUm91dGVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXItZG9tL2VzL1N0YXRpY1JvdXRlci5qc1xuLy8gbW9kdWxlIGlkID0gMTk1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiLy8gV3JpdHRlbiBpbiB0aGlzIHJvdW5kIGFib3V0IHdheSBmb3IgYmFiZWwtdHJhbnNmb3JtLWltcG9ydHNcbmltcG9ydCBTd2l0Y2ggZnJvbSAncmVhY3Qtcm91dGVyL2VzL1N3aXRjaCc7XG5cbmV4cG9ydCBkZWZhdWx0IFN3aXRjaDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtcm91dGVyLWRvbS9lcy9Td2l0Y2guanNcbi8vIG1vZHVsZSBpZCA9IDE5NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIi8vIFdyaXR0ZW4gaW4gdGhpcyByb3VuZCBhYm91dCB3YXkgZm9yIGJhYmVsLXRyYW5zZm9ybS1pbXBvcnRzXG5pbXBvcnQgbWF0Y2hQYXRoIGZyb20gJ3JlYWN0LXJvdXRlci9lcy9tYXRjaFBhdGgnO1xuXG5leHBvcnQgZGVmYXVsdCBtYXRjaFBhdGg7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvbWF0Y2hQYXRoLmpzXG4vLyBtb2R1bGUgaWQgPSAxOTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIvLyBXcml0dGVuIGluIHRoaXMgcm91bmQgYWJvdXQgd2F5IGZvciBiYWJlbC10cmFuc2Zvcm0taW1wb3J0c1xuaW1wb3J0IHdpdGhSb3V0ZXIgZnJvbSAncmVhY3Qtcm91dGVyL2VzL3dpdGhSb3V0ZXInO1xuXG5leHBvcnQgZGVmYXVsdCB3aXRoUm91dGVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXItZG9tL2VzL3dpdGhSb3V0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE5OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuaW1wb3J0IHdhcm5pbmcgZnJvbSAnd2FybmluZyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBjcmVhdGVIaXN0b3J5IGZyb20gJ2hpc3RvcnkvY3JlYXRlTWVtb3J5SGlzdG9yeSc7XG5pbXBvcnQgUm91dGVyIGZyb20gJy4vUm91dGVyJztcblxuLyoqXG4gKiBUaGUgcHVibGljIEFQSSBmb3IgYSA8Um91dGVyPiB0aGF0IHN0b3JlcyBsb2NhdGlvbiBpbiBtZW1vcnkuXG4gKi9cblxudmFyIE1lbW9yeVJvdXRlciA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhNZW1vcnlSb3V0ZXIsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIE1lbW9yeVJvdXRlcigpIHtcbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1lbW9yeVJvdXRlcik7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9SZWFjdCRDb21wb25lbnQuY2FsbC5hcHBseShfUmVhY3QkQ29tcG9uZW50LCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuaGlzdG9yeSA9IGNyZWF0ZUhpc3RvcnkoX3RoaXMucHJvcHMpLCBfdGVtcCksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gIE1lbW9yeVJvdXRlci5wcm90b3R5cGUuY29tcG9uZW50V2lsbE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIHdhcm5pbmcoIXRoaXMucHJvcHMuaGlzdG9yeSwgJzxNZW1vcnlSb3V0ZXI+IGlnbm9yZXMgdGhlIGhpc3RvcnkgcHJvcC4gVG8gdXNlIGEgY3VzdG9tIGhpc3RvcnksICcgKyAndXNlIGBpbXBvcnQgeyBSb3V0ZXIgfWAgaW5zdGVhZCBvZiBgaW1wb3J0IHsgTWVtb3J5Um91dGVyIGFzIFJvdXRlciB9YC4nKTtcbiAgfTtcblxuICBNZW1vcnlSb3V0ZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSb3V0ZXIsIHsgaGlzdG9yeTogdGhpcy5oaXN0b3J5LCBjaGlsZHJlbjogdGhpcy5wcm9wcy5jaGlsZHJlbiB9KTtcbiAgfTtcblxuICByZXR1cm4gTWVtb3J5Um91dGVyO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5NZW1vcnlSb3V0ZXIucHJvcFR5cGVzID0ge1xuICBpbml0aWFsRW50cmllczogUHJvcFR5cGVzLmFycmF5LFxuICBpbml0aWFsSW5kZXg6IFByb3BUeXBlcy5udW1iZXIsXG4gIGdldFVzZXJDb25maXJtYXRpb246IFByb3BUeXBlcy5mdW5jLFxuICBrZXlMZW5ndGg6IFByb3BUeXBlcy5udW1iZXIsXG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZVxufTtcblxuXG5leHBvcnQgZGVmYXVsdCBNZW1vcnlSb3V0ZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci9lcy9NZW1vcnlSb3V0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE5OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5cbi8qKlxuICogVGhlIHB1YmxpYyBBUEkgZm9yIHByb21wdGluZyB0aGUgdXNlciBiZWZvcmUgbmF2aWdhdGluZyBhd2F5XG4gKiBmcm9tIGEgc2NyZWVuIHdpdGggYSBjb21wb25lbnQuXG4gKi9cblxudmFyIFByb21wdCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhQcm9tcHQsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFByb21wdCgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvbXB0KTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfUmVhY3QkQ29tcG9uZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgUHJvbXB0LnByb3RvdHlwZS5lbmFibGUgPSBmdW5jdGlvbiBlbmFibGUobWVzc2FnZSkge1xuICAgIGlmICh0aGlzLnVuYmxvY2spIHRoaXMudW5ibG9jaygpO1xuXG4gICAgdGhpcy51bmJsb2NrID0gdGhpcy5jb250ZXh0LnJvdXRlci5oaXN0b3J5LmJsb2NrKG1lc3NhZ2UpO1xuICB9O1xuXG4gIFByb21wdC5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgaWYgKHRoaXMudW5ibG9jaykge1xuICAgICAgdGhpcy51bmJsb2NrKCk7XG4gICAgICB0aGlzLnVuYmxvY2sgPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICBQcm9tcHQucHJvdG90eXBlLmNvbXBvbmVudFdpbGxNb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICBpbnZhcmlhbnQodGhpcy5jb250ZXh0LnJvdXRlciwgJ1lvdSBzaG91bGQgbm90IHVzZSA8UHJvbXB0PiBvdXRzaWRlIGEgPFJvdXRlcj4nKTtcblxuICAgIGlmICh0aGlzLnByb3BzLndoZW4pIHRoaXMuZW5hYmxlKHRoaXMucHJvcHMubWVzc2FnZSk7XG4gIH07XG5cbiAgUHJvbXB0LnByb3RvdHlwZS5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICBpZiAobmV4dFByb3BzLndoZW4pIHtcbiAgICAgIGlmICghdGhpcy5wcm9wcy53aGVuIHx8IHRoaXMucHJvcHMubWVzc2FnZSAhPT0gbmV4dFByb3BzLm1lc3NhZ2UpIHRoaXMuZW5hYmxlKG5leHRQcm9wcy5tZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXNhYmxlKCk7XG4gICAgfVxuICB9O1xuXG4gIFByb21wdC5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICB0aGlzLmRpc2FibGUoKTtcbiAgfTtcblxuICBQcm9tcHQucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICByZXR1cm4gUHJvbXB0O1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5Qcm9tcHQucHJvcFR5cGVzID0ge1xuICB3aGVuOiBQcm9wVHlwZXMuYm9vbCxcbiAgbWVzc2FnZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmZ1bmMsIFByb3BUeXBlcy5zdHJpbmddKS5pc1JlcXVpcmVkXG59O1xuUHJvbXB0LmRlZmF1bHRQcm9wcyA9IHtcbiAgd2hlbjogdHJ1ZVxufTtcblByb21wdC5jb250ZXh0VHlwZXMgPSB7XG4gIHJvdXRlcjogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICBoaXN0b3J5OiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgYmxvY2s6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRcbiAgICB9KS5pc1JlcXVpcmVkXG4gIH0pLmlzUmVxdWlyZWRcbn07XG5cblxuZXhwb3J0IGRlZmF1bHQgUHJvbXB0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXIvZXMvUHJvbXB0LmpzXG4vLyBtb2R1bGUgaWQgPSAyMDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHdhcm5pbmcgZnJvbSAnd2FybmluZyc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5pbXBvcnQgeyBjcmVhdGVMb2NhdGlvbiwgbG9jYXRpb25zQXJlRXF1YWwgfSBmcm9tICdoaXN0b3J5JztcblxuLyoqXG4gKiBUaGUgcHVibGljIEFQSSBmb3IgdXBkYXRpbmcgdGhlIGxvY2F0aW9uIHByb2dyYW1tYXRpY2FsbHlcbiAqIHdpdGggYSBjb21wb25lbnQuXG4gKi9cblxudmFyIFJlZGlyZWN0ID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFJlZGlyZWN0LCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBSZWRpcmVjdCgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVkaXJlY3QpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9SZWFjdCRDb21wb25lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBSZWRpcmVjdC5wcm90b3R5cGUuaXNTdGF0aWMgPSBmdW5jdGlvbiBpc1N0YXRpYygpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0LnJvdXRlciAmJiB0aGlzLmNvbnRleHQucm91dGVyLnN0YXRpY0NvbnRleHQ7XG4gIH07XG5cbiAgUmVkaXJlY3QucHJvdG90eXBlLmNvbXBvbmVudFdpbGxNb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICBpbnZhcmlhbnQodGhpcy5jb250ZXh0LnJvdXRlciwgJ1lvdSBzaG91bGQgbm90IHVzZSA8UmVkaXJlY3Q+IG91dHNpZGUgYSA8Um91dGVyPicpO1xuXG4gICAgaWYgKHRoaXMuaXNTdGF0aWMoKSkgdGhpcy5wZXJmb3JtKCk7XG4gIH07XG5cbiAgUmVkaXJlY3QucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgaWYgKCF0aGlzLmlzU3RhdGljKCkpIHRoaXMucGVyZm9ybSgpO1xuICB9O1xuXG4gIFJlZGlyZWN0LnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG4gICAgdmFyIHByZXZUbyA9IGNyZWF0ZUxvY2F0aW9uKHByZXZQcm9wcy50byk7XG4gICAgdmFyIG5leHRUbyA9IGNyZWF0ZUxvY2F0aW9uKHRoaXMucHJvcHMudG8pO1xuXG4gICAgaWYgKGxvY2F0aW9uc0FyZUVxdWFsKHByZXZUbywgbmV4dFRvKSkge1xuICAgICAgd2FybmluZyhmYWxzZSwgJ1lvdSB0cmllZCB0byByZWRpcmVjdCB0byB0aGUgc2FtZSByb3V0ZSB5b3VcXCdyZSBjdXJyZW50bHkgb246ICcgKyAoJ1wiJyArIG5leHRUby5wYXRobmFtZSArIG5leHRUby5zZWFyY2ggKyAnXCInKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5wZXJmb3JtKCk7XG4gIH07XG5cbiAgUmVkaXJlY3QucHJvdG90eXBlLnBlcmZvcm0gPSBmdW5jdGlvbiBwZXJmb3JtKCkge1xuICAgIHZhciBoaXN0b3J5ID0gdGhpcy5jb250ZXh0LnJvdXRlci5oaXN0b3J5O1xuICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICBwdXNoID0gX3Byb3BzLnB1c2gsXG4gICAgICAgIHRvID0gX3Byb3BzLnRvO1xuXG5cbiAgICBpZiAocHVzaCkge1xuICAgICAgaGlzdG9yeS5wdXNoKHRvKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGlzdG9yeS5yZXBsYWNlKHRvKTtcbiAgICB9XG4gIH07XG5cbiAgUmVkaXJlY3QucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICByZXR1cm4gUmVkaXJlY3Q7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cblJlZGlyZWN0LnByb3BUeXBlcyA9IHtcbiAgcHVzaDogUHJvcFR5cGVzLmJvb2wsXG4gIGZyb206IFByb3BUeXBlcy5zdHJpbmcsXG4gIHRvOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMub2JqZWN0XSkuaXNSZXF1aXJlZFxufTtcblJlZGlyZWN0LmRlZmF1bHRQcm9wcyA9IHtcbiAgcHVzaDogZmFsc2Vcbn07XG5SZWRpcmVjdC5jb250ZXh0VHlwZXMgPSB7XG4gIHJvdXRlcjogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICBoaXN0b3J5OiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgcHVzaDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICAgIHJlcGxhY2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRcbiAgICB9KS5pc1JlcXVpcmVkLFxuICAgIHN0YXRpY0NvbnRleHQ6IFByb3BUeXBlcy5vYmplY3RcbiAgfSkuaXNSZXF1aXJlZFxufTtcblxuXG5leHBvcnQgZGVmYXVsdCBSZWRpcmVjdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtcm91dGVyL2VzL1JlZGlyZWN0LmpzXG4vLyBtb2R1bGUgaWQgPSAyMDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJ2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMob2JqLCBrZXlzKSB7IHZhciB0YXJnZXQgPSB7fTsgZm9yICh2YXIgaSBpbiBvYmopIHsgaWYgKGtleXMuaW5kZXhPZihpKSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBpKSkgY29udGludWU7IHRhcmdldFtpXSA9IG9ialtpXTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuaW1wb3J0IHdhcm5pbmcgZnJvbSAnd2FybmluZyc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7IGFkZExlYWRpbmdTbGFzaCwgY3JlYXRlUGF0aCwgcGFyc2VQYXRoIH0gZnJvbSAnaGlzdG9yeS9QYXRoVXRpbHMnO1xuaW1wb3J0IFJvdXRlciBmcm9tICcuL1JvdXRlcic7XG5cbnZhciBub3JtYWxpemVMb2NhdGlvbiA9IGZ1bmN0aW9uIG5vcm1hbGl6ZUxvY2F0aW9uKG9iamVjdCkge1xuICB2YXIgX29iamVjdCRwYXRobmFtZSA9IG9iamVjdC5wYXRobmFtZSxcbiAgICAgIHBhdGhuYW1lID0gX29iamVjdCRwYXRobmFtZSA9PT0gdW5kZWZpbmVkID8gJy8nIDogX29iamVjdCRwYXRobmFtZSxcbiAgICAgIF9vYmplY3Qkc2VhcmNoID0gb2JqZWN0LnNlYXJjaCxcbiAgICAgIHNlYXJjaCA9IF9vYmplY3Qkc2VhcmNoID09PSB1bmRlZmluZWQgPyAnJyA6IF9vYmplY3Qkc2VhcmNoLFxuICAgICAgX29iamVjdCRoYXNoID0gb2JqZWN0Lmhhc2gsXG4gICAgICBoYXNoID0gX29iamVjdCRoYXNoID09PSB1bmRlZmluZWQgPyAnJyA6IF9vYmplY3QkaGFzaDtcblxuXG4gIHJldHVybiB7XG4gICAgcGF0aG5hbWU6IHBhdGhuYW1lLFxuICAgIHNlYXJjaDogc2VhcmNoID09PSAnPycgPyAnJyA6IHNlYXJjaCxcbiAgICBoYXNoOiBoYXNoID09PSAnIycgPyAnJyA6IGhhc2hcbiAgfTtcbn07XG5cbnZhciBhZGRCYXNlbmFtZSA9IGZ1bmN0aW9uIGFkZEJhc2VuYW1lKGJhc2VuYW1lLCBsb2NhdGlvbikge1xuICBpZiAoIWJhc2VuYW1lKSByZXR1cm4gbG9jYXRpb247XG5cbiAgcmV0dXJuIF9leHRlbmRzKHt9LCBsb2NhdGlvbiwge1xuICAgIHBhdGhuYW1lOiBhZGRMZWFkaW5nU2xhc2goYmFzZW5hbWUpICsgbG9jYXRpb24ucGF0aG5hbWVcbiAgfSk7XG59O1xuXG52YXIgc3RyaXBCYXNlbmFtZSA9IGZ1bmN0aW9uIHN0cmlwQmFzZW5hbWUoYmFzZW5hbWUsIGxvY2F0aW9uKSB7XG4gIGlmICghYmFzZW5hbWUpIHJldHVybiBsb2NhdGlvbjtcblxuICB2YXIgYmFzZSA9IGFkZExlYWRpbmdTbGFzaChiYXNlbmFtZSk7XG5cbiAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoYmFzZSkgIT09IDApIHJldHVybiBsb2NhdGlvbjtcblxuICByZXR1cm4gX2V4dGVuZHMoe30sIGxvY2F0aW9uLCB7XG4gICAgcGF0aG5hbWU6IGxvY2F0aW9uLnBhdGhuYW1lLnN1YnN0cihiYXNlLmxlbmd0aClcbiAgfSk7XG59O1xuXG52YXIgY3JlYXRlTG9jYXRpb24gPSBmdW5jdGlvbiBjcmVhdGVMb2NhdGlvbihsb2NhdGlvbikge1xuICByZXR1cm4gdHlwZW9mIGxvY2F0aW9uID09PSAnc3RyaW5nJyA/IHBhcnNlUGF0aChsb2NhdGlvbikgOiBub3JtYWxpemVMb2NhdGlvbihsb2NhdGlvbik7XG59O1xuXG52YXIgY3JlYXRlVVJMID0gZnVuY3Rpb24gY3JlYXRlVVJMKGxvY2F0aW9uKSB7XG4gIHJldHVybiB0eXBlb2YgbG9jYXRpb24gPT09ICdzdHJpbmcnID8gbG9jYXRpb24gOiBjcmVhdGVQYXRoKGxvY2F0aW9uKTtcbn07XG5cbnZhciBzdGF0aWNIYW5kbGVyID0gZnVuY3Rpb24gc3RhdGljSGFuZGxlcihtZXRob2ROYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaW52YXJpYW50KGZhbHNlLCAnWW91IGNhbm5vdCAlcyB3aXRoIDxTdGF0aWNSb3V0ZXI+JywgbWV0aG9kTmFtZSk7XG4gIH07XG59O1xuXG52YXIgbm9vcCA9IGZ1bmN0aW9uIG5vb3AoKSB7fTtcblxuLyoqXG4gKiBUaGUgcHVibGljIHRvcC1sZXZlbCBBUEkgZm9yIGEgXCJzdGF0aWNcIiA8Um91dGVyPiwgc28tY2FsbGVkIGJlY2F1c2UgaXRcbiAqIGNhbid0IGFjdHVhbGx5IGNoYW5nZSB0aGUgY3VycmVudCBsb2NhdGlvbi4gSW5zdGVhZCwgaXQganVzdCByZWNvcmRzXG4gKiBsb2NhdGlvbiBjaGFuZ2VzIGluIGEgY29udGV4dCBvYmplY3QuIFVzZWZ1bCBtYWlubHkgaW4gdGVzdGluZyBhbmRcbiAqIHNlcnZlci1yZW5kZXJpbmcgc2NlbmFyaW9zLlxuICovXG5cbnZhciBTdGF0aWNSb3V0ZXIgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoU3RhdGljUm91dGVyLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBTdGF0aWNSb3V0ZXIoKSB7XG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGF0aWNSb3V0ZXIpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfUmVhY3QkQ29tcG9uZW50LmNhbGwuYXBwbHkoX1JlYWN0JENvbXBvbmVudCwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLmNyZWF0ZUhyZWYgPSBmdW5jdGlvbiAocGF0aCkge1xuICAgICAgcmV0dXJuIGFkZExlYWRpbmdTbGFzaChfdGhpcy5wcm9wcy5iYXNlbmFtZSArIGNyZWF0ZVVSTChwYXRoKSk7XG4gICAgfSwgX3RoaXMuaGFuZGxlUHVzaCA9IGZ1bmN0aW9uIChsb2NhdGlvbikge1xuICAgICAgdmFyIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgYmFzZW5hbWUgPSBfdGhpcyRwcm9wcy5iYXNlbmFtZSxcbiAgICAgICAgICBjb250ZXh0ID0gX3RoaXMkcHJvcHMuY29udGV4dDtcblxuICAgICAgY29udGV4dC5hY3Rpb24gPSAnUFVTSCc7XG4gICAgICBjb250ZXh0LmxvY2F0aW9uID0gYWRkQmFzZW5hbWUoYmFzZW5hbWUsIGNyZWF0ZUxvY2F0aW9uKGxvY2F0aW9uKSk7XG4gICAgICBjb250ZXh0LnVybCA9IGNyZWF0ZVVSTChjb250ZXh0LmxvY2F0aW9uKTtcbiAgICB9LCBfdGhpcy5oYW5kbGVSZXBsYWNlID0gZnVuY3Rpb24gKGxvY2F0aW9uKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHMyID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgYmFzZW5hbWUgPSBfdGhpcyRwcm9wczIuYmFzZW5hbWUsXG4gICAgICAgICAgY29udGV4dCA9IF90aGlzJHByb3BzMi5jb250ZXh0O1xuXG4gICAgICBjb250ZXh0LmFjdGlvbiA9ICdSRVBMQUNFJztcbiAgICAgIGNvbnRleHQubG9jYXRpb24gPSBhZGRCYXNlbmFtZShiYXNlbmFtZSwgY3JlYXRlTG9jYXRpb24obG9jYXRpb24pKTtcbiAgICAgIGNvbnRleHQudXJsID0gY3JlYXRlVVJMKGNvbnRleHQubG9jYXRpb24pO1xuICAgIH0sIF90aGlzLmhhbmRsZUxpc3RlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBub29wO1xuICAgIH0sIF90aGlzLmhhbmRsZUJsb2NrID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIG5vb3A7XG4gICAgfSwgX3RlbXApLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7XG4gIH1cblxuICBTdGF0aWNSb3V0ZXIucHJvdG90eXBlLmdldENoaWxkQ29udGV4dCA9IGZ1bmN0aW9uIGdldENoaWxkQ29udGV4dCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcm91dGVyOiB7XG4gICAgICAgIHN0YXRpY0NvbnRleHQ6IHRoaXMucHJvcHMuY29udGV4dFxuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgU3RhdGljUm91dGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgd2FybmluZyghdGhpcy5wcm9wcy5oaXN0b3J5LCAnPFN0YXRpY1JvdXRlcj4gaWdub3JlcyB0aGUgaGlzdG9yeSBwcm9wLiBUbyB1c2UgYSBjdXN0b20gaGlzdG9yeSwgJyArICd1c2UgYGltcG9ydCB7IFJvdXRlciB9YCBpbnN0ZWFkIG9mIGBpbXBvcnQgeyBTdGF0aWNSb3V0ZXIgYXMgUm91dGVyIH1gLicpO1xuICB9O1xuXG4gIFN0YXRpY1JvdXRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICBiYXNlbmFtZSA9IF9wcm9wcy5iYXNlbmFtZSxcbiAgICAgICAgY29udGV4dCA9IF9wcm9wcy5jb250ZXh0LFxuICAgICAgICBsb2NhdGlvbiA9IF9wcm9wcy5sb2NhdGlvbixcbiAgICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3Byb3BzLCBbJ2Jhc2VuYW1lJywgJ2NvbnRleHQnLCAnbG9jYXRpb24nXSk7XG5cbiAgICB2YXIgaGlzdG9yeSA9IHtcbiAgICAgIGNyZWF0ZUhyZWY6IHRoaXMuY3JlYXRlSHJlZixcbiAgICAgIGFjdGlvbjogJ1BPUCcsXG4gICAgICBsb2NhdGlvbjogc3RyaXBCYXNlbmFtZShiYXNlbmFtZSwgY3JlYXRlTG9jYXRpb24obG9jYXRpb24pKSxcbiAgICAgIHB1c2g6IHRoaXMuaGFuZGxlUHVzaCxcbiAgICAgIHJlcGxhY2U6IHRoaXMuaGFuZGxlUmVwbGFjZSxcbiAgICAgIGdvOiBzdGF0aWNIYW5kbGVyKCdnbycpLFxuICAgICAgZ29CYWNrOiBzdGF0aWNIYW5kbGVyKCdnb0JhY2snKSxcbiAgICAgIGdvRm9yd2FyZDogc3RhdGljSGFuZGxlcignZ29Gb3J3YXJkJyksXG4gICAgICBsaXN0ZW46IHRoaXMuaGFuZGxlTGlzdGVuLFxuICAgICAgYmxvY2s6IHRoaXMuaGFuZGxlQmxvY2tcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm91dGVyLCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHsgaGlzdG9yeTogaGlzdG9yeSB9KSk7XG4gIH07XG5cbiAgcmV0dXJuIFN0YXRpY1JvdXRlcjtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxuU3RhdGljUm91dGVyLnByb3BUeXBlcyA9IHtcbiAgYmFzZW5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGNvbnRleHQ6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgbG9jYXRpb246IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5vYmplY3RdKVxufTtcblN0YXRpY1JvdXRlci5kZWZhdWx0UHJvcHMgPSB7XG4gIGJhc2VuYW1lOiAnJyxcbiAgbG9jYXRpb246ICcvJ1xufTtcblN0YXRpY1JvdXRlci5jaGlsZENvbnRleHRUeXBlcyA9IHtcbiAgcm91dGVyOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5cblxuZXhwb3J0IGRlZmF1bHQgU3RhdGljUm91dGVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXIvZXMvU3RhdGljUm91dGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyMDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHdhcm5pbmcgZnJvbSAnd2FybmluZyc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5pbXBvcnQgbWF0Y2hQYXRoIGZyb20gJy4vbWF0Y2hQYXRoJztcblxuLyoqXG4gKiBUaGUgcHVibGljIEFQSSBmb3IgcmVuZGVyaW5nIHRoZSBmaXJzdCA8Um91dGU+IHRoYXQgbWF0Y2hlcy5cbiAqL1xuXG52YXIgU3dpdGNoID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFN3aXRjaCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gU3dpdGNoKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTd2l0Y2gpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9SZWFjdCRDb21wb25lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBTd2l0Y2gucHJvdG90eXBlLmNvbXBvbmVudFdpbGxNb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICBpbnZhcmlhbnQodGhpcy5jb250ZXh0LnJvdXRlciwgJ1lvdSBzaG91bGQgbm90IHVzZSA8U3dpdGNoPiBvdXRzaWRlIGEgPFJvdXRlcj4nKTtcbiAgfTtcblxuICBTd2l0Y2gucHJvdG90eXBlLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgIHdhcm5pbmcoIShuZXh0UHJvcHMubG9jYXRpb24gJiYgIXRoaXMucHJvcHMubG9jYXRpb24pLCAnPFN3aXRjaD4gZWxlbWVudHMgc2hvdWxkIG5vdCBjaGFuZ2UgZnJvbSB1bmNvbnRyb2xsZWQgdG8gY29udHJvbGxlZCAob3IgdmljZSB2ZXJzYSkuIFlvdSBpbml0aWFsbHkgdXNlZCBubyBcImxvY2F0aW9uXCIgcHJvcCBhbmQgdGhlbiBwcm92aWRlZCBvbmUgb24gYSBzdWJzZXF1ZW50IHJlbmRlci4nKTtcblxuICAgIHdhcm5pbmcoISghbmV4dFByb3BzLmxvY2F0aW9uICYmIHRoaXMucHJvcHMubG9jYXRpb24pLCAnPFN3aXRjaD4gZWxlbWVudHMgc2hvdWxkIG5vdCBjaGFuZ2UgZnJvbSBjb250cm9sbGVkIHRvIHVuY29udHJvbGxlZCAob3IgdmljZSB2ZXJzYSkuIFlvdSBwcm92aWRlZCBhIFwibG9jYXRpb25cIiBwcm9wIGluaXRpYWxseSBidXQgb21pdHRlZCBpdCBvbiBhIHN1YnNlcXVlbnQgcmVuZGVyLicpO1xuICB9O1xuXG4gIFN3aXRjaC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciByb3V0ZSA9IHRoaXMuY29udGV4dC5yb3V0ZXIucm91dGU7XG4gICAgdmFyIGNoaWxkcmVuID0gdGhpcy5wcm9wcy5jaGlsZHJlbjtcblxuICAgIHZhciBsb2NhdGlvbiA9IHRoaXMucHJvcHMubG9jYXRpb24gfHwgcm91dGUubG9jYXRpb247XG5cbiAgICB2YXIgbWF0Y2ggPSB2b2lkIDAsXG4gICAgICAgIGNoaWxkID0gdm9pZCAwO1xuICAgIFJlYWN0LkNoaWxkcmVuLmZvckVhY2goY2hpbGRyZW4sIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICBpZiAoIVJlYWN0LmlzVmFsaWRFbGVtZW50KGVsZW1lbnQpKSByZXR1cm47XG5cbiAgICAgIHZhciBfZWxlbWVudCRwcm9wcyA9IGVsZW1lbnQucHJvcHMsXG4gICAgICAgICAgcGF0aFByb3AgPSBfZWxlbWVudCRwcm9wcy5wYXRoLFxuICAgICAgICAgIGV4YWN0ID0gX2VsZW1lbnQkcHJvcHMuZXhhY3QsXG4gICAgICAgICAgc3RyaWN0ID0gX2VsZW1lbnQkcHJvcHMuc3RyaWN0LFxuICAgICAgICAgIHNlbnNpdGl2ZSA9IF9lbGVtZW50JHByb3BzLnNlbnNpdGl2ZSxcbiAgICAgICAgICBmcm9tID0gX2VsZW1lbnQkcHJvcHMuZnJvbTtcblxuICAgICAgdmFyIHBhdGggPSBwYXRoUHJvcCB8fCBmcm9tO1xuXG4gICAgICBpZiAobWF0Y2ggPT0gbnVsbCkge1xuICAgICAgICBjaGlsZCA9IGVsZW1lbnQ7XG4gICAgICAgIG1hdGNoID0gcGF0aCA/IG1hdGNoUGF0aChsb2NhdGlvbi5wYXRobmFtZSwgeyBwYXRoOiBwYXRoLCBleGFjdDogZXhhY3QsIHN0cmljdDogc3RyaWN0LCBzZW5zaXRpdmU6IHNlbnNpdGl2ZSB9KSA6IHJvdXRlLm1hdGNoO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG1hdGNoID8gUmVhY3QuY2xvbmVFbGVtZW50KGNoaWxkLCB7IGxvY2F0aW9uOiBsb2NhdGlvbiwgY29tcHV0ZWRNYXRjaDogbWF0Y2ggfSkgOiBudWxsO1xuICB9O1xuXG4gIHJldHVybiBTd2l0Y2g7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cblN3aXRjaC5jb250ZXh0VHlwZXMgPSB7XG4gIHJvdXRlcjogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICByb3V0ZTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkXG4gIH0pLmlzUmVxdWlyZWRcbn07XG5Td2l0Y2gucHJvcFR5cGVzID0ge1xuICBjaGlsZHJlbjogUHJvcFR5cGVzLm5vZGUsXG4gIGxvY2F0aW9uOiBQcm9wVHlwZXMub2JqZWN0XG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IFN3aXRjaDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtcm91dGVyL2VzL1N3aXRjaC5qc1xuLy8gbW9kdWxlIGlkID0gMjAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwidmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKG9iaiwga2V5cykgeyB2YXIgdGFyZ2V0ID0ge307IGZvciAodmFyIGkgaW4gb2JqKSB7IGlmIChrZXlzLmluZGV4T2YoaSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgaSkpIGNvbnRpbnVlOyB0YXJnZXRbaV0gPSBvYmpbaV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBob2lzdFN0YXRpY3MgZnJvbSAnaG9pc3Qtbm9uLXJlYWN0LXN0YXRpY3MnO1xuaW1wb3J0IFJvdXRlIGZyb20gJy4vUm91dGUnO1xuXG4vKipcbiAqIEEgcHVibGljIGhpZ2hlci1vcmRlciBjb21wb25lbnQgdG8gYWNjZXNzIHRoZSBpbXBlcmF0aXZlIEFQSVxuICovXG52YXIgd2l0aFJvdXRlciA9IGZ1bmN0aW9uIHdpdGhSb3V0ZXIoQ29tcG9uZW50KSB7XG4gIHZhciBDID0gZnVuY3Rpb24gQyhwcm9wcykge1xuICAgIHZhciB3cmFwcGVkQ29tcG9uZW50UmVmID0gcHJvcHMud3JhcHBlZENvbXBvbmVudFJlZixcbiAgICAgICAgcmVtYWluaW5nUHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMocHJvcHMsIFsnd3JhcHBlZENvbXBvbmVudFJlZiddKTtcblxuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFJvdXRlLCB7IHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKHJvdXRlQ29tcG9uZW50UHJvcHMpIHtcbiAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50LCBfZXh0ZW5kcyh7fSwgcmVtYWluaW5nUHJvcHMsIHJvdXRlQ29tcG9uZW50UHJvcHMsIHsgcmVmOiB3cmFwcGVkQ29tcG9uZW50UmVmIH0pKTtcbiAgICAgIH0gfSk7XG4gIH07XG5cbiAgQy5kaXNwbGF5TmFtZSA9ICd3aXRoUm91dGVyKCcgKyAoQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IENvbXBvbmVudC5uYW1lKSArICcpJztcbiAgQy5XcmFwcGVkQ29tcG9uZW50ID0gQ29tcG9uZW50O1xuICBDLnByb3BUeXBlcyA9IHtcbiAgICB3cmFwcGVkQ29tcG9uZW50UmVmOiBQcm9wVHlwZXMuZnVuY1xuICB9O1xuXG4gIHJldHVybiBob2lzdFN0YXRpY3MoQywgQ29tcG9uZW50KTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhSb3V0ZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci9lcy93aXRoUm91dGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyMDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIvKipcbiAqIENvcHlyaWdodCAyMDE1LCBZYWhvbyEgSW5jLlxuICogQ29weXJpZ2h0cyBsaWNlbnNlZCB1bmRlciB0aGUgTmV3IEJTRCBMaWNlbnNlLiBTZWUgdGhlIGFjY29tcGFueWluZyBMSUNFTlNFIGZpbGUgZm9yIHRlcm1zLlxuICovXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICAgIChnbG9iYWwuaG9pc3ROb25SZWFjdFN0YXRpY3MgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBcbiAgICB2YXIgUkVBQ1RfU1RBVElDUyA9IHtcbiAgICAgICAgY2hpbGRDb250ZXh0VHlwZXM6IHRydWUsXG4gICAgICAgIGNvbnRleHRUeXBlczogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdFByb3BzOiB0cnVlLFxuICAgICAgICBkaXNwbGF5TmFtZTogdHJ1ZSxcbiAgICAgICAgZ2V0RGVmYXVsdFByb3BzOiB0cnVlLFxuICAgICAgICBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHM6IHRydWUsXG4gICAgICAgIG1peGluczogdHJ1ZSxcbiAgICAgICAgcHJvcFR5cGVzOiB0cnVlLFxuICAgICAgICB0eXBlOiB0cnVlXG4gICAgfTtcbiAgICBcbiAgICB2YXIgS05PV05fU1RBVElDUyA9IHtcbiAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgbGVuZ3RoOiB0cnVlLFxuICAgICAgICBwcm90b3R5cGU6IHRydWUsXG4gICAgICAgIGNhbGxlcjogdHJ1ZSxcbiAgICAgICAgY2FsbGVlOiB0cnVlLFxuICAgICAgICBhcmd1bWVudHM6IHRydWUsXG4gICAgICAgIGFyaXR5OiB0cnVlXG4gICAgfTtcbiAgICBcbiAgICB2YXIgZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG4gICAgdmFyIGdldE93blByb3BlcnR5TmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbiAgICB2YXIgZ2V0T3duUHJvcGVydHlTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcbiAgICB2YXIgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbiAgICB2YXIgZ2V0UHJvdG90eXBlT2YgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG4gICAgdmFyIG9iamVjdFByb3RvdHlwZSA9IGdldFByb3RvdHlwZU9mICYmIGdldFByb3RvdHlwZU9mKE9iamVjdCk7XG4gICAgXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGhvaXN0Tm9uUmVhY3RTdGF0aWNzKHRhcmdldENvbXBvbmVudCwgc291cmNlQ29tcG9uZW50LCBibGFja2xpc3QpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzb3VyY2VDb21wb25lbnQgIT09ICdzdHJpbmcnKSB7IC8vIGRvbid0IGhvaXN0IG92ZXIgc3RyaW5nIChodG1sKSBjb21wb25lbnRzXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChvYmplY3RQcm90b3R5cGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5oZXJpdGVkQ29tcG9uZW50ID0gZ2V0UHJvdG90eXBlT2Yoc291cmNlQ29tcG9uZW50KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5oZXJpdGVkQ29tcG9uZW50ICYmIGluaGVyaXRlZENvbXBvbmVudCAhPT0gb2JqZWN0UHJvdG90eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvaXN0Tm9uUmVhY3RTdGF0aWNzKHRhcmdldENvbXBvbmVudCwgaW5oZXJpdGVkQ29tcG9uZW50LCBibGFja2xpc3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGtleXMgPSBnZXRPd25Qcm9wZXJ0eU5hbWVzKHNvdXJjZUNvbXBvbmVudCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChnZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgICAgICAgICAgICAgICBrZXlzID0ga2V5cy5jb25jYXQoZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZUNvbXBvbmVudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoIVJFQUNUX1NUQVRJQ1Nba2V5XSAmJiAhS05PV05fU1RBVElDU1trZXldICYmICghYmxhY2tsaXN0IHx8ICFibGFja2xpc3Rba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlQ29tcG9uZW50LCBrZXkpO1xuICAgICAgICAgICAgICAgICAgICB0cnkgeyAvLyBBdm9pZCBmYWlsdXJlcyBmcm9tIHJlYWQtb25seSBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVQcm9wZXJ0eSh0YXJnZXRDb21wb25lbnQsIGtleSwgZGVzY3JpcHRvcik7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0Q29tcG9uZW50O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGFyZ2V0Q29tcG9uZW50O1xuICAgIH07XG59KSkpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci9+L2hvaXN0LW5vbi1yZWFjdC1zdGF0aWNzL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAyMDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcblxyXG5pbXBvcnQgQXBwQmFyIGZyb20gJ21hdGVyaWFsLXVpL0FwcEJhcic7XHJcbmltcG9ydCBEcmF3ZXIgZnJvbSAnbWF0ZXJpYWwtdWkvRHJhd2VyJztcclxuaW1wb3J0IE1lbnVJdGVtIGZyb20gJ21hdGVyaWFsLXVpL01lbnVJdGVtJztcclxuaW1wb3J0IEFycm93RHJvcFJpZ2h0IGZyb20gJ21hdGVyaWFsLXVpL3N2Zy1pY29ucy9uYXZpZ2F0aW9uLWFycm93LWRyb3AtcmlnaHQnO1xyXG5cclxuaW1wb3J0IEljb25NZW51IGZyb20gJ21hdGVyaWFsLXVpL0ljb25NZW51JztcclxuaW1wb3J0IEljb25CdXR0b24gZnJvbSAnbWF0ZXJpYWwtdWkvSWNvbkJ1dHRvbic7XHJcbmltcG9ydCBNb3JlVmVydEljb24gZnJvbSAnbWF0ZXJpYWwtdWkvc3ZnLWljb25zL25hdmlnYXRpb24vbW9yZS12ZXJ0JztcclxuXHJcblxyXG5mdW5jdGlvbiBTdWJNZW51KHByb3BzKSB7XHJcbiAgICByZXR1cm4gPEljb25NZW51XHJcbiAgICAgICAgaWNvbkJ1dHRvbkVsZW1lbnQ9e1xyXG4gICAgICAgICAgICA8SWNvbkJ1dHRvbiA+PE1vcmVWZXJ0SWNvblxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdzdWJtZW51LXN2ZydcclxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiAnd2hpdGUnLCBmaWxsOiAnd2hpdGUnIH19IC8+XHJcbiAgICAgICAgICAgIDwvSWNvbkJ1dHRvbj5cclxuICAgICAgICB9XHJcbiAgICAgICAgdGFyZ2V0T3JpZ2luPXt7IGhvcml6b250YWw6ICdyaWdodCcsIHZlcnRpY2FsOiAndG9wJyB9fVxyXG4gICAgICAgIGFuY2hvck9yaWdpbj17eyBob3Jpem9udGFsOiAncmlnaHQnLCB2ZXJ0aWNhbDogJ3RvcCcgfX0+XHJcblxyXG4gICAgICAgIDxNZW51SXRlbSBwcmltYXJ5VGV4dD1cIkNlcnJhciBzZXNpb25cIiBvbkNsaWNrPXtwcm9wcy5vbkxvZ291dH0gLz5cclxuICAgIDwvSWNvbk1lbnU+O1xyXG59XHJcblxyXG5TdWJNZW51Lm11aU5hbWUgPSAnSWNvbk1lbnUnO1xyXG5cclxuY29uc3QgQWRtaW5CYWNrb2ZmaWNlQmFyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xyXG4gICAgZ2V0SW5pdGlhbFN0YXRlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGRyYXdlck9wZW46IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0RGVmYXVsdFByb3BzKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG9uTG9nb3V0OiAoKSA9PiB7IH1cclxuICAgICAgICB9O1xyXG4gICAgfSxcclxuXHJcbiAgICBjbG9zZURyYXdlcigpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgZHJhd2VyT3BlbjogZmFsc2UgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHRvZ2dsZURyYXdlcigpIHtcclxuICAgICAgICBjb25zdCBkcmF3ZXJPcGVuID0gIXRoaXMuc3RhdGUuZHJhd2VyT3BlbjtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgZHJhd2VyT3BlbiB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgPlxyXG4gICAgICAgICAgICAgICAgPEFwcEJhclxyXG4gICAgICAgICAgICAgICAgICAgIG9uTGVmdEljb25CdXR0b25Ub3VjaFRhcD17dGhpcy50b2dnbGVEcmF3ZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbkVsZW1lbnRSaWdodD17PFN1Yk1lbnUgb25Mb2dvdXQ9e3RoaXMucHJvcHMub25Mb2dvdXR9IC8+fVxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiQWRtaW5pc3RyYWNpb24gSE9ZIENPTU9cIiAvPlxyXG5cclxuICAgICAgICAgICAgICAgIDxEcmF3ZXIgb3Blbj17dGhpcy5zdGF0ZS5kcmF3ZXJPcGVufSBkb2NrZWQ9e2ZhbHNlfSBvblJlcXVlc3RDaGFuZ2U9e29wZW4gPT4gdGhpcy5zZXRTdGF0ZSh7IGRyYXdlck9wZW46IG9wZW4gfSl9ID5cclxuICAgICAgICAgICAgICAgICAgICA8TGluayB0bz1cIi9pbmRleFwiIG9uQ2xpY2s9e3RoaXMuY2xvc2VEcmF3ZXJ9PjxNZW51SXRlbSA+UHJpbmNpcGFsPC9NZW51SXRlbT48L0xpbms+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxNZW51SXRlbSBwcmltYXJ5VGV4dD0nQ29tZXJjaW9zJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodEljb249ezxBcnJvd0Ryb3BSaWdodCAvPn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW1zPXtbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGluayB0bz1cIi9zaG9wcy9jcmVhdGVcIiBvbkNsaWNrPXt0aGlzLmNsb3NlRHJhd2VyfT48TWVudUl0ZW0gPkNyZWFyPC9NZW51SXRlbT48L0xpbms+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmsgdG89XCIvc2hvcHMvbGlzdFwiIG9uQ2xpY2s9e3RoaXMuY2xvc2VEcmF3ZXJ9PjxNZW51SXRlbSA+VmVyPC9NZW51SXRlbT48L0xpbms+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF19IC8+XHJcbiAgICAgICAgICAgICAgICA8L0RyYXdlcj5cclxuICAgICAgICAgICAgPC9kaXYgPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQWRtaW5CYWNrb2ZmaWNlQmFyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NvbXBvbmVudHMvQWRtaW5CYWNrb2ZmaWNlQmFyLmpzIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuXHJcbi8qKiBDb21wb25lbnRlIGluZGljZSBkZSBhZG1pbmlzdHJhY2lvbiBkZSBIT1kgQ09NTyAqL1xyXG5jb25zdCBBZG1pbkluZGV4ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xyXG4gICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3aXRoLW1hcmdpbiBpbmRleFwiPlxyXG4gICAgICAgICAgICAgICAgPGgxPkFkbWluaXN0cmFjaW9uIGRlIEhPWSBDT01PPC9oMT5cclxuICAgICAgICAgICAgICAgIDxoMj5Db25maWd1cmFjaW9uIHkgZXN0YWRpc3RpY2FzPC9oMj5cclxuICAgICAgICAgICAgICAgIDxwPkRlc2RlIGFxdWkgZXMgcG9zaWJsZSBtb25pdG9yZWFyIGEgbG9zIHVzdWFyaW9zIHJlZ2lzdHJhZG9zIHkgY29tZXJjaW9zIFxyXG4gICAgICAgICAgICAgICAgICAgIGFzb2NpYWRvcyBhIGxhIGFwbGljYWNpb24uXHJcbiAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQWRtaW5JbmRleDtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9jb21wb25lbnRzL0FkbWluSW5kZXguanMiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuaW1wb3J0IE11aVRoZW1lUHJvdmlkZXIgZnJvbSAnbWF0ZXJpYWwtdWkvc3R5bGVzL011aVRoZW1lUHJvdmlkZXInO1xyXG5pbXBvcnQgUmFpc2VkQnV0dG9uIGZyb20gJ21hdGVyaWFsLXVpL1JhaXNlZEJ1dHRvbic7XHJcbmltcG9ydCBUZXh0RmllbGQgZnJvbSAnbWF0ZXJpYWwtdWkvVGV4dEZpZWxkJztcclxuaW1wb3J0IHsgQ2FyZCwgQ2FyZEFjdGlvbnMsIENhcmRIZWFkZXIsIENhcmRUZXh0IH0gZnJvbSAnbWF0ZXJpYWwtdWkvQ2FyZCc7XHJcbmltcG9ydCBGbGF0QnV0dG9uIGZyb20gJ21hdGVyaWFsLXVpL0ZsYXRCdXR0b24nO1xyXG5cclxuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcclxuXHJcbmltcG9ydCBIZWFkZXIgZnJvbSAnLi9IZWFkZXInO1xyXG4vL2ltcG9ydCBtYWluQ29uZmlnIGZyb20gJy4uL2NvbmZpZy9tYWluLWNvbmZpZyc7XHJcblxyXG4vKiBGSU4gREUgSU1QT1JUUyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuY29uc3QgRU1QVFlfQ0FMTEJBQ0sgPSAoKSA9PiB7IH07XHJcblxyXG5jb25zdCBBZG1pbkxvZ2luID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xyXG4gICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdXNlcm5hbWU6ICcnLFxyXG4gICAgICAgICAgICBwYXNzd29yZDogJycsXHJcbiAgICAgICAgICAgIGVyck1zZzogbnVsbCxcclxuICAgICAgICB9O1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4geyBvblN1Ym1pdDogRU1QVFlfQ0FMTEJBQ0sgfTtcclxuICAgIH0sXHJcblxyXG4gICAgc3VibWl0Rm9ybTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnN0IHVzZXJuYW1lID0gdGhpcy5zdGF0ZS51c2VybmFtZTtcclxuICAgICAgICBjb25zdCBwYXNzd29yZCA9IHRoaXMuc3RhdGUucGFzc3dvcmQ7XHJcblxyXG4gICAgICAgIC8vaGFnbyBlbmNvZGluZyBiYXNlNjQgcGFyYSBwYXNhciBsYXMgY3JlZGVuY2lhbGVzXHJcbiAgICAgICAgY29uc3QgZW5jb2RlZCA9IGJ0b2EodXNlcm5hbWUgKyAnOicgKyBwYXNzd29yZCk7XHJcblxyXG4gICAgICAgIGF4aW9zKHtcclxuICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsIC8veW91IGNhbiBzZXQgd2hhdCByZXF1ZXN0IHlvdSB3YW50IHRvIGJlXHJcbiAgICAgICAgICAgIHVybDogJy9hcGkvdjEvYWRtaW4vbG9naW4nLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246ICdCYXNpYyAnICsgZW5jb2RlZCB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oY29udGVudHMgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvbnRlbmlkbzonKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvbnRlbnRzLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vblN1Ym1pdChjb250ZW50cy5kYXRhLnRva2VuKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGNhdXNlID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZXJyTXNnOiAnQ3JlZGVuY2lhbGVzIGludmFsaWRhcycgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBoYW5kbGVLZXlQcmVzczogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LmtleSA9PSAnRW50ZXInKSB0aGlzLnN1Ym1pdEZvcm0oKTtcclxuICAgIH0sXHJcblxyXG4gICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IG1zZ0VsZW0gPSB0aGlzLnN0YXRlLmVyck1zZyA/IDxwIHN0eWxlPXt7IGNvbG9yOiAncmVkJyB9fSA+e3RoaXMuc3RhdGUuZXJyTXNnfTwvcD4gOiA8ZGl2IC8+O1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IG9uS2V5UHJlc3M9e3RoaXMuaGFuZGxlS2V5UHJlc3N9PlxyXG4gICAgICAgICAgICAgICAgPEhlYWRlciB0aXRsZT1cIkFkbWluIEhPWSBDT01PXCIgLz5cclxuICAgICAgICAgICAgICAgIHttc2dFbGVtfVxyXG4gICAgICAgICAgICAgICAgPE11aVRoZW1lUHJvdmlkZXI+XHJcbiAgICAgICAgICAgICAgICAgICAgPENhcmQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxDYXJkSGVhZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkluaWNpYXIgc2VzaW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlPSdJbmdyZXNlIGNyZWRlbmNpYWxlcycgLz47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Q2FyZFRleHQgZXhwYW5kYWJsZT17ZmFsc2V9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRleHRGaWVsZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJ1c2VybmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGludD1cInVzZXJuYW1lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9hdGluZ0xhYmVsVGV4dD1cInVzZXJuYW1lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS51c2VybmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiB0aGlzLnNldFN0YXRlKHsgdXNlcm5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pfSAvPjxiciAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0RmllbGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwicGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpbnRUZXh0PVwiUGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0aW5nTGFiZWxUZXh0PVwiUGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwYXNzd29yZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUucGFzc3dvcmR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gdGhpcy5zZXRTdGF0ZSh7IHBhc3N3b3JkOiBlLnRhcmdldC52YWx1ZSB9KX0gLz48YnIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9DYXJkVGV4dD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxDYXJkQWN0aW9ucz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGbGF0QnV0dG9uIGxhYmVsPVwiSW5pY2lhciBzZXNpb25cIiBvbkNsaWNrPXt0aGlzLnN1Ym1pdEZvcm19IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQ2FyZEFjdGlvbnM+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9DYXJkPlxyXG5cclxuICAgICAgICAgICAgICAgIDwvTXVpVGhlbWVQcm92aWRlciA+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQWRtaW5Mb2dpbjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9jb21wb25lbnRzL0FkbWluTG9naW4uanMiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuaW1wb3J0IE11aVRoZW1lUHJvdmlkZXIgZnJvbSAnbWF0ZXJpYWwtdWkvc3R5bGVzL011aVRoZW1lUHJvdmlkZXInO1xyXG5pbXBvcnQgUmFpc2VkQnV0dG9uIGZyb20gJ21hdGVyaWFsLXVpL1JhaXNlZEJ1dHRvbic7XHJcbmltcG9ydCBUZXh0RmllbGQgZnJvbSAnbWF0ZXJpYWwtdWkvVGV4dEZpZWxkJztcclxuaW1wb3J0IHsgQ2FyZCwgQ2FyZEFjdGlvbnMsIENhcmRIZWFkZXIsIENhcmRUZXh0IH0gZnJvbSAnbWF0ZXJpYWwtdWkvQ2FyZCc7XHJcbmltcG9ydCBDaGVja2JveCBmcm9tICdtYXRlcmlhbC11aS9DaGVja2JveCc7XHJcbmltcG9ydCBGbGF0QnV0dG9uIGZyb20gJ21hdGVyaWFsLXVpL0ZsYXRCdXR0b24nO1xyXG5pbXBvcnQgRGlhbG9nIGZyb20gJ21hdGVyaWFsLXVpL0RpYWxvZyc7XHJcbmltcG9ydCBTbmFja2JhciBmcm9tICdtYXRlcmlhbC11aS9TbmFja2Jhcic7XHJcblxyXG5pbXBvcnQgRHJvcERvd25NZW51IGZyb20gJ21hdGVyaWFsLXVpL0Ryb3BEb3duTWVudSc7XHJcbmltcG9ydCBNZW51SXRlbSBmcm9tICdtYXRlcmlhbC11aS9NZW51SXRlbSc7XHJcblxyXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5cclxuaW1wb3J0IEhlYWRlciBmcm9tICcuL0hlYWRlcic7XHJcblxyXG4vKiBGSU4gREUgSU1QT1JUUyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuY29uc3QgU2hvcEZvcm0gPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcbiAgICBnZXREZWZhdWx0UHJvcHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgdG9rZW46ICcnIH07XHJcbiAgICB9LFxyXG5cclxuICAgIGdldEluaXRpYWxTdGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtc2dTbmFja2Jhck9wZW46IGZhbHNlLFxyXG4gICAgICAgICAgICBuYW1lOiAnJyxcclxuICAgICAgICAgICAgYWRkcmVzczogJycsXHJcbiAgICAgICAgICAgIHBob25lOiAnJyxcclxuICAgICAgICAgICAgem9uZTogMSxcclxuICAgICAgICAgICAgZGlzdHJpY3RzOiBudWxsLFxyXG4gICAgICAgICAgICBhZG1pbkVtYWlsOiAnJyxcclxuICAgICAgICAgICAgYWRtaW5OYW1lOiAnJyxcclxuICAgICAgICAgICAgbGF0OiAnJyxcclxuICAgICAgICAgICAgbG9uZzogJydcclxuICAgICAgICB9O1xyXG4gICAgfSxcclxuXHJcbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygndG9rZW46ICcgKyB0aGlzLnByb3BzLnRva2VuKTtcclxuICAgICAgICBheGlvcy5nZXQoJy9hcGkvdjEvZGlzdHJpY3RzJylcclxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gdGhpcy5zZXRTdGF0ZSh7IGRpc3RyaWN0czogcmVzcG9uc2UuZGF0YS5kaXN0cmljdHMgfSkpO1xyXG4gICAgfSxcclxuXHJcbiAgICBvcGVuU25hY2tiYXIobXNnKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0FicmllbmRvIHNuYWNrIGJhcicpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBtc2dTbmFja2Jhck9wZW46IHRydWUsIHNuYWNrYmFyTWVzc2FnZTogbXNnIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBoYW5kbGVTbmFja2JhclJlcXVlc3RDbG9zZSgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgbXNnU25hY2tiYXJPcGVuOiBmYWxzZSB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgaGFuZGxlU2hvcENyZWF0ZVN1Y2Nlc3MoZGF0YSkge1xyXG4gICAgICAgIGNvbnN0IHNob3BJZCA9IGRhdGEuc2hvcC5pZDtcclxuICAgICAgICB0aGlzLm9wZW5TbmFja2JhcihgQ29tZXJjaW8gJHtzaG9wSWR9IGNyZWFkb2ApO1xyXG4gICAgfSxcclxuXHJcbiAgICBoYW5kbGVTaG9wQ3JlYXRlRXJyb3IoY2F1c2UpIHtcclxuICAgICAgICB0aGlzLm9wZW5TbmFja2JhcihjYXVzZS5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpO1xyXG4gICAgfSxcclxuXHJcbiAgICBjaGVja0ZpZWxkcygpIHtcclxuICAgICAgICBjb25zdCB7IG5hbWUsIGFkZHJlc3MsIHBob25lLCB6b25lLCBhZG1pbkVtYWlsLCBhZG1pbk5hbWUsIGxhdCwgbG9uZyB9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICBpZiAoIW5hbWUgfHwgIWFkZHJlc3MgfHwgIXBob25lIHx8ICF6b25lIHx8ICFhZG1pbkVtYWlsIHx8ICFhZG1pbk5hbWUgfHwgIWxhdCB8fCAhbG9uZykge1xyXG4gICAgICAgICAgICByZXR1cm4geyBvazogZmFsc2UsIG1zZzogJ1BhcmFtZXRyb3MgaW5jb21wbGV0b3MnIH07XHJcbiAgICAgICAgfSBlbHNlIHJldHVybiB7IG9rOiB0cnVlIH07XHJcbiAgICB9LFxyXG5cclxuICAgIGNyZWF0ZVNob3AoKSB7XHJcbiAgICAgICAgY29uc3QgZmllbGRzQ2hlY2sgPSB0aGlzLmNoZWNrRmllbGRzKCk7XHJcbiAgICAgICAgaWYgKCFmaWVsZHNDaGVjay5vaykgcmV0dXJuIHRoaXMub3BlblNuYWNrYmFyKGZpZWxkc0NoZWNrLm1zZyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHsgbmFtZSwgYWRkcmVzcywgcGhvbmUsIHpvbmUsIGFkbWluRW1haWwsIGFkbWluTmFtZSwgbGF0LCBsb25nIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGNvbnN0IHpvbmVPYmogPSB0aGlzLnN0YXRlLmRpc3RyaWN0cy5maW5kKGQgPT4gZC5pZCA9PSB6b25lKTtcclxuICAgICAgICAvKiBUT0RPIDogUE9SIEFIT1JBIFNFIEdVQVJEQSBMQSBaT05BIENPTU8gVU4gVkFSQ0hBUi4gTEEgTUlTTUEgREVCRVJJQSBHVUFSREFSU0UgQ09NTyBVTiBJRCBERSBESVNUUklUTyAqL1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSB7IG5hbWUsIGFkZHJlc3MsIHBob25lLCB6b25lOiB6b25lT2JqLm5hbWUsIGFkbWluRW1haWwsIGFkbWluTmFtZSwgbGF0LCBsb25nIH07XHJcbiAgICAgICAgY29uc3QgY29uZmlnID0geyBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMucHJvcHMudG9rZW59YCB9IH07XHJcbiAgICAgICAgYXhpb3MucG9zdCgnL2FwaS92MS9zaG9wcycsIGJvZHksIGNvbmZpZylcclxuICAgICAgICAgICAgLnRoZW4oY29udGVudHMgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coY29udGVudHMuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVNob3BDcmVhdGVTdWNjZXNzKGNvbnRlbnRzLmRhdGEpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChjYXVzZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGNhdXNlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlU2hvcENyZWF0ZUVycm9yKGNhdXNlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGhhbmRsZVpvbmVDaGFuZ2UoZXZlbnQsIGluZGV4LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyB6b25lOiB2YWx1ZSB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIC8vIHNpIGxvcyBkaXN0cml0b3Mgbm8gZnVlcm9uIGNhcmdhZG9zLCBlbnRvbmNlcyBzZSBpbmRpY2EgYWwgdXN1YXJpbyBxdWUgZGViZSBlc3BlcmFyXHJcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmRpc3RyaWN0cykgcmV0dXJuIDxzcGFuPkVzcGVyZS4uLjwvc3Bhbj47XHJcblxyXG4gICAgICAgIGNvbnN0IGRpc3RyaWN0TWVudUl0ZW1zID0gW107XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5kaXN0cmljdHMuZm9yRWFjaChkaXN0cmljdCA9PiBkaXN0cmljdE1lbnVJdGVtcy5wdXNoKFxyXG4gICAgICAgICAgICA8TWVudUl0ZW0gdmFsdWU9e2Rpc3RyaWN0LmlkfSBwcmltYXJ5VGV4dD17ZGlzdHJpY3QubmFtZX0gLz5cclxuICAgICAgICApKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBwYWRkaW5nQm90dG9tOiAxMCwgYmFja2dyb3VuZENvbG9yOiAncmdiYSgyNTUsMjU1LDI1NSwwLjcpJyB9fT5cclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luOiAyMCB9fT5cclxuICAgICAgICAgICAgICAgICAgICA8aDE+TnVldm8gY29tZXJjaW88L2gxPlxyXG4gICAgICAgICAgICAgICAgICAgIDxociAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8aDI+RGF0b3MgZGVsIGNvbWVyY2lvPC9oMj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPFRleHRGaWVsZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiTm9tYnJlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGludD1cIk5vbWJyZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0aW5nTGFiZWxUZXh0PVwiTm9tYnJlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUubmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gdGhpcy5zZXRTdGF0ZSh7IG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pfSAvPjxiciAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8VGV4dEZpZWxkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJEaXJlY2Npb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaW50PVwiRGlyZWNjaW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRpbmdMYWJlbFRleHQ9XCJEaXJlY2Npb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5hZGRyZXNzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiB0aGlzLnNldFN0YXRlKHsgYWRkcmVzczogZS50YXJnZXQudmFsdWUgfSl9IC8+PGJyIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxUZXh0RmllbGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIkxhdGl0dWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaW50PVwiTGF0aXR1ZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0aW5nTGFiZWxUZXh0PVwiTGF0aXR1ZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmxhdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gdGhpcy5zZXRTdGF0ZSh7IGxhdDogZS50YXJnZXQudmFsdWUgfSl9IC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxUZXh0RmllbGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIkxvbmdpdHVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGludD1cIkxvbmdpdHVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRpbmdMYWJlbFRleHQ9XCJMb25naXR1ZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmxvbmd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHRoaXMuc2V0U3RhdGUoeyBsb25nOiBlLnRhcmdldC52YWx1ZSB9KX0gLz48YnIgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPERyb3BEb3duTWVudVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS56b25lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVab25lQ2hhbmdlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuSW1tZWRpYXRlbHk9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogMjAwLCBwYWRkaW5nOiAwIH19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZGlzdHJpY3RNZW51SXRlbXN9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Ecm9wRG93bk1lbnU+IDxiciAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8VGV4dEZpZWxkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJUZWxlZm9ub1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpbnQ9XCJUZWxlZm9ubyBzaW4gZ3Vpb24gbmkgZXNwYWNpb3NcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdGluZ0xhYmVsVGV4dD1cIlRlbGVmb25vXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUucGhvbmV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHRoaXMuc2V0U3RhdGUoeyBwaG9uZTogZS50YXJnZXQudmFsdWUgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J251bWJlcicgLz48YnIgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPGhyIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxoMj5EYXRvcyBkZWwgYWRtaW5pc3RyYWRvciBkZWwgY29tZXJjaW88L2gyPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8VGV4dEZpZWxkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJOb21icmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaW50PVwiTm9tYnJlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRpbmdMYWJlbFRleHQ9XCJOb21icmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5hZG1pbk5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHRoaXMuc2V0U3RhdGUoeyBhZG1pbk5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pfSAvPjxiciAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8VGV4dEZpZWxkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJFbWFpbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpbnQ9XCJFbWFpbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0aW5nTGFiZWxUZXh0PVwiRW1haWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5hZG1pbkVtYWlsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiB0aGlzLnNldFN0YXRlKHsgYWRtaW5FbWFpbDogZS50YXJnZXQudmFsdWUgfSl9IC8+PGJyIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxSYWlzZWRCdXR0b24gc3R5bGU9e3sgbWFyZ2luVG9wOiAyMCB9fSBsYWJlbD1cIkNyZWFyIGNvbWVyY2lvXCIgb25DbGljaz17dGhpcy5jcmVhdGVTaG9wfSBzZWNvbmRhcnk9e3RydWV9IC8+XHJcblxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgPFNuYWNrYmFyXHJcbiAgICAgICAgICAgICAgICAgICAgb3Blbj17dGhpcy5zdGF0ZS5tc2dTbmFja2Jhck9wZW59XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZT17dGhpcy5zdGF0ZS5zbmFja2Jhck1lc3NhZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0b0hpZGVEdXJhdGlvbj17MzAwMH1cclxuICAgICAgICAgICAgICAgICAgICBvblJlcXVlc3RDbG9zZT17dGhpcy5oYW5kbGVTbmFja2JhclJlcXVlc3RDbG9zZX0gLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTaG9wRm9ybTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9jb21wb25lbnRzL1Nob3BGb3JtLmpzIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuXHJcbmltcG9ydCBNdWlUaGVtZVByb3ZpZGVyIGZyb20gJ21hdGVyaWFsLXVpL3N0eWxlcy9NdWlUaGVtZVByb3ZpZGVyJztcclxuaW1wb3J0IFJhaXNlZEJ1dHRvbiBmcm9tICdtYXRlcmlhbC11aS9SYWlzZWRCdXR0b24nO1xyXG5pbXBvcnQgVGV4dEZpZWxkIGZyb20gJ21hdGVyaWFsLXVpL1RleHRGaWVsZCc7XHJcbmltcG9ydCB7IENhcmQsIENhcmRBY3Rpb25zLCBDYXJkSGVhZGVyLCBDYXJkVGV4dCB9IGZyb20gJ21hdGVyaWFsLXVpL0NhcmQnO1xyXG5pbXBvcnQgQ2hlY2tib3ggZnJvbSAnbWF0ZXJpYWwtdWkvQ2hlY2tib3gnO1xyXG5pbXBvcnQgRmxhdEJ1dHRvbiBmcm9tICdtYXRlcmlhbC11aS9GbGF0QnV0dG9uJztcclxuaW1wb3J0IERpYWxvZyBmcm9tICdtYXRlcmlhbC11aS9EaWFsb2cnO1xyXG5pbXBvcnQgU25hY2tiYXIgZnJvbSAnbWF0ZXJpYWwtdWkvU25hY2tiYXInO1xyXG5cclxuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcclxuXHJcbmltcG9ydCBIZWFkZXIgZnJvbSAnLi9IZWFkZXInO1xyXG5pbXBvcnQgU2hvcE1lbnUgZnJvbSAnLi9TaG9wTWVudSc7XHJcblxyXG4vKiBGSU4gREUgSU1QT1JUUyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuY29uc3QgRU1QVFlfQ0FMTEJBQ0sgPSAoKSA9PiB7IH07XHJcblxyXG5mdW5jdGlvbiBCYW5TaG9wRGlhbG9nKHByb3BzKSB7XHJcbiAgICBmdW5jdGlvbiBiYW5TaG9wKCkge1xyXG4gICAgICAgIGNvbnN0IHNob3BJZCA9IHByb3BzLnNob3AuaWQ7XHJcbiAgICAgICAgcHJvcHMuc2hvcC5lbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgYXhpb3Moe1xyXG4gICAgICAgICAgICB1cmw6IGAvYXBpL3YxL3Nob3BzLyR7c2hvcElkfWAsXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7cHJvcHMudG9rZW59YCB9LFxyXG4gICAgICAgICAgICBkYXRhOiBwcm9wcy5zaG9wXHJcbiAgICAgICAgfSkudGhlbihjb250ZW50cyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvbnRlbnRzLmRhdGEpO1xyXG4gICAgICAgICAgICBwcm9wcy5vblN1Y2Nlc3MoKTtcclxuICAgICAgICB9KS5jYXRjaChjYXVzZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoY2F1c2UpO1xyXG4gICAgICAgICAgICBwcm9wcy5vbkVycm9yKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYWN0aW9ucyA9IFtcclxuICAgICAgICA8RmxhdEJ1dHRvblxyXG4gICAgICAgICAgICBsYWJlbD1cIkNhbmNlbGFyXCJcclxuICAgICAgICAgICAgcHJpbWFyeT17dHJ1ZX1cclxuICAgICAgICAgICAgb25DbGljaz17cHJvcHMub25DbG9zZX1cclxuICAgICAgICAvPixcclxuICAgICAgICA8RmxhdEJ1dHRvblxyXG4gICAgICAgICAgICBsYWJlbD1cIlByb2hpYmlyXCJcclxuICAgICAgICAgICAgcHJpbWFyeT17dHJ1ZX1cclxuICAgICAgICAgICAgb25DbGljaz17YmFuU2hvcH1cclxuICAgICAgICAvPixcclxuICAgIF07XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8RGlhbG9nXHJcbiAgICAgICAgICAgIHRpdGxlPXtgUHJvaGliaXIgY29tZXJjaW8gJHtwcm9wcy5zaG9wLmlkfWB9XHJcbiAgICAgICAgICAgIGFjdGlvbnM9e2FjdGlvbnN9XHJcbiAgICAgICAgICAgIG1vZGFsPXt0cnVlfVxyXG4gICAgICAgICAgICBvcGVuPXtwcm9wcy5vcGVufT5cclxuICAgICAgICAgICAgwr9EZXNlYSBQcm9oaWJpciBlbCBjb21lcmNpbz9cclxuICAgICAgICA8L0RpYWxvZz5cclxuICAgICk7XHJcbn1cclxuXHJcbmNvbnN0IFNob3BMaXN0ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xyXG4gICAgZ2V0RGVmYXVsdFByb3BzKCkge1xyXG4gICAgICAgIHJldHVybiB7IHRva2VuOiAnJyB9O1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRJbml0aWFsU3RhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2hvcHM6IFtdLFxyXG4gICAgICAgICAgICBlcnJTbmFja2Jhck9wZW46IGZhbHNlLFxyXG4gICAgICAgICAgICBiYW5TaG9wOiBudWxsLFxyXG4gICAgICAgICAgICBzaG9wTWVudTogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIGxvYWRTaG9wcygpIHtcclxuICAgICAgICBheGlvcy5nZXQoYC9hcGkvdjEvc2hvcHM/dG9rZW49JHt0aGlzLnByb3BzLnRva2VufWApXHJcbiAgICAgICAgICAgIC50aGVuKGNvbnRlbnRzID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNob3BzID0gY29udGVudHMuZGF0YS5zaG9wcztcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2FkU2hvcHMgc2hvcHM6ICcgKyBzaG9wcyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2hvcHM6Jyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzaG9wcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2hvcHMgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChjYXVzZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGNhdXNlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub3BlbkVyclNuYWNrYmFyKCdFcnJvciBhbCBvYnRlbmVyIGxvcyBjb21lcmNpb3MnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCd0b2tlbjogJyArIHRoaXMucHJvcHMudG9rZW4pO1xyXG4gICAgICAgIHRoaXMubG9hZFNob3BzKCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1Nob3BMaXN0IERJRCBNT1VOVCcpO1xyXG4gICAgfSxcclxuXHJcbiAgICBvcGVuRXJyU25hY2tiYXIobXNnKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0FicmllbmRvIHNuYWNrIGJhcicpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBlcnJTbmFja2Jhck9wZW46IHRydWUsIGVyclNuYWNrYmFyTWVzc2FnZTogbXNnIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBoYW5kbGVFcnJTbmFja2JhclJlcXVlc3RDbG9zZSgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgZXJyU25hY2tiYXJPcGVuOiBmYWxzZSB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgY2xvc2VCYW5EaWFsb2coc2hvcCkge1xyXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuc2V0U3RhdGUoeyBiYW5TaG9wOiBudWxsIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIG9wZW5CYW5EaWFsb2coc2hvcCkge1xyXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNob3BJZCA9IHNob3AuaWQgfHwgc2hvcDtcclxuICAgICAgICAgICAgc2VsZi5zZXRTdGF0ZSh7IGJhblNob3A6IHNob3BJZCB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfSxcclxuXHJcbiAgICBoYW5kbGVTaG9wQmFuU3VjY2VzcyhzaG9wKSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5jbG9zZUJhbkRpYWxvZyhzaG9wKSgpO1xyXG4gICAgICAgICAgICBzZWxmLmxvYWRTaG9wcygpO1xyXG4gICAgICAgICAgICBzZWxmLm9wZW5FcnJTbmFja2JhcignQ29tZXJjaW8gYmFuZWFkbycpO1xyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIGVuYWJsZVNob3Aoc2hvcCkge1xyXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHNob3AuZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgYXhpb3Moe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBgL2FwaS92MS9zaG9wcy8ke3Nob3AuaWR9YCxcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3NlbGYucHJvcHMudG9rZW59YCB9LFxyXG4gICAgICAgICAgICAgICAgZGF0YTogc2hvcFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oc2VsZi5sb2FkU2hvcHMpXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goY2F1c2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoY2F1c2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYub3BlbkVyclNuYWNrYmFyKCdFcnJvciBhbCBoYWJpbGl0YXIgY29tZXJjaW8nKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIHNob3dNZW51KHNob3ApIHtcclxuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBheGlvcyh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IGAvYXBpL3YxL3Nob3BzLyR7c2hvcC5pZH0vbWVudWAsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtzZWxmLnByb3BzLnRva2VufWAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzaG93TWVudSBheGlvcyByZXNwb25zZTogJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRTdGF0ZSh7IHNob3BNZW51OiByZXNwb25zZS5kYXRhLm1lbnUgfSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGNhdXNlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGNhdXNlKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLm9wZW5FcnJTbmFja2JhcignRXJyb3IgYWwgb2J0ZW5lciBtZW51IGRlIGNvbWVyY2lvJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfSxcclxuXHJcbiAgICBoYW5kbGVNZW51Q2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNob3BNZW51OiBudWxsIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJ0aGlzLnN0YXRlLnNob3BzOiBcIiArIHRoaXMuc3RhdGUuc2hvcHMpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zaG9wcy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gPGRpdj5ObyBoYXkgY29tZXJjaW9zLi4uPC9kaXY+O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGJhblNob3BEaWFsb2cgPSBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmJhblNob3ApIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NyZWFuZG8gZGlhbG9nbyBkZSBiYW5lbycpO1xyXG4gICAgICAgICAgICBjb25zdCBzaG9wID0gdGhpcy5zdGF0ZS5zaG9wcy5maW5kKHMgPT4gcy5pZCA9PSB0aGlzLnN0YXRlLmJhblNob3ApO1xyXG4gICAgICAgICAgICBiYW5TaG9wRGlhbG9nID0gPEJhblNob3BEaWFsb2dcclxuICAgICAgICAgICAgICAgIHNob3A9e3Nob3B9XHJcbiAgICAgICAgICAgICAgICB0b2tlbj17dGhpcy5wcm9wcy50b2tlbn1cclxuICAgICAgICAgICAgICAgIG9wZW49e3RydWV9XHJcbiAgICAgICAgICAgICAgICBvblN1Y2Nlc3M9e3RoaXMuaGFuZGxlU2hvcEJhblN1Y2Nlc3Moc2hvcCl9XHJcbiAgICAgICAgICAgICAgICBvbkNsb3NlPXt0aGlzLmNsb3NlQmFuRGlhbG9nKHNob3ApfVxyXG4gICAgICAgICAgICAgICAgb25FcnJvcj17KCkgPT4gdGhpcy5vcGVuRXJyU25hY2tiYXIoYEVycm9yIGFsIFByb2hpYmlyIGVsIGNvbWVyY2lvICR7c2hvcC5pZH1gKX0gLz47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc2hvcE1lbnVFbGVtID0gbnVsbDtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zaG9wTWVudSkge1xyXG4gICAgICAgICAgICBzaG9wTWVudUVsZW0gPSA8U2hvcE1lbnUgbWVudT17dGhpcy5zdGF0ZS5zaG9wTWVudX0gZ29CYWNrPXt0aGlzLmhhbmRsZU1lbnVDbG9zZX0gLz47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzaG9wQ2FyZHMgPSB0aGlzLnN0YXRlLnNob3BzLm1hcChzaG9wID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYmFja0NvbG9ycyA9IFsnIzFBOTM4NicsICdyZ2IoMjEsIDExNCwgMTA1KScsICcjMTM0RTQ4J107XHJcbiAgICAgICAgICAgIGxldCBjb2xJZHggPSAwO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuICg8Q2FyZCBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSgyNTUsMjU1LDI1NSwwLjgpXCIsIG1hcmdpbjogMTAgfX0gPlxyXG4gICAgICAgICAgICAgICAgPENhcmRIZWFkZXJcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17YENvbWVyY2lvICR7c2hvcC5pZH1gfVxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlPXtzaG9wLm5hbWV9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPENhcmRUZXh0IGV4cGFuZGFibGU9e2ZhbHNlfT5cclxuICAgICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPk5vbWJyZTwvc3Ryb25nPjoge3Nob3AubmFtZX0gPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+RGlyZWNjaW9uPC9zdHJvbmc+OiB7c2hvcC5hZGRyZXNzfSA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5CYXJyaW88L3N0cm9uZz46IHtzaG9wLnpvbmV9IDwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPlRlbGVmb25vPC9zdHJvbmc+OiB7c2hvcC5waG9uZX0gPC9wPlxyXG4gICAgICAgICAgICAgICAgPC9DYXJkVGV4dD5cclxuICAgICAgICAgICAgICAgIDxDYXJkQWN0aW9ucz5cclxuICAgICAgICAgICAgICAgICAgICA8RmxhdEJ1dHRvbiBsYWJlbD1cIlByb2hpYmlyXCIgc2Vjb25kYXJ5PXt0cnVlfSBkaXNhYmxlZD17IXNob3AuZW5hYmxlZH0gb25DbGljaz17dGhpcy5vcGVuQmFuRGlhbG9nKHNob3ApfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxGbGF0QnV0dG9uIGxhYmVsPVwiSGFiaWxpdGFyXCIgZGlzYWJsZWQ9e3Nob3AuZW5hYmxlZH0gb25DbGljaz17dGhpcy5lbmFibGVTaG9wKHNob3ApfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxGbGF0QnV0dG9uIGxhYmVsPVwiTWVudVwiIG9uQ2xpY2s9e3RoaXMuc2hvd01lbnUoc2hvcCl9IC8+XHJcbiAgICAgICAgICAgICAgICA8L0NhcmRBY3Rpb25zPlxyXG4gICAgICAgICAgICA8L0NhcmQ+KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgbWFpbkVsZW0gPSBiYW5TaG9wRGlhbG9nIHx8IHNob3BNZW51RWxlbSB8fCBzaG9wQ2FyZHM7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgPlxyXG4gICAgICAgICAgICAgICAge21haW5FbGVtfVxyXG4gICAgICAgICAgICAgICAgPFNuYWNrYmFyXHJcbiAgICAgICAgICAgICAgICAgICAgb3Blbj17dGhpcy5zdGF0ZS5lcnJTbmFja2Jhck9wZW59XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZT17dGhpcy5zdGF0ZS5lcnJTbmFja2Jhck1lc3NhZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0b0hpZGVEdXJhdGlvbj17MzAwMH1cclxuICAgICAgICAgICAgICAgICAgICBvblJlcXVlc3RDbG9zZT17dGhpcy5oYW5kbGVFcnJTbmFja2JhclJlcXVlc3RDbG9zZX1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDwvZGl2ID5cclxuICAgICAgICApO1xyXG4gICAgfSxcclxuXHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2hvcExpc3Q7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vY29tcG9uZW50cy9TaG9wTGlzdC5qcyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBGbGF0QnV0dG9uIGZyb20gJ21hdGVyaWFsLXVpL0ZsYXRCdXR0b24nO1xyXG5cclxuXHJcbmNvbnN0IEFjdGlvbkhlYWRlciA9IGZ1bmN0aW9uIChwcm9wcykge1xyXG4gICAgbGV0IHRpdGxlID0gcHJvcHMudGl0bGUgfHwgJ1NoYXJlZCBzZXJ2ZXInO1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8ZGl2IHN0eWxlPXt7IGNvbG9yOiAnd2hpdGUnLCBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2IoMCwgMTg4LCAyMTIpJywgdHJhbnNpdGlvbjogJ2FsbCA0NTBtcyBjdWJpYy1iZXppZXIoMC4yMywgMSwgMC4zMiwgMSkgMG1zJywgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsIGZvbnRGYW1pbHk6ICdSb2JvdG8sIHNhbnMtc2VyaWYnLCBib3JkZXJSYWRpdXM6ICcwcHgnLCBwb3NpdGlvbjogJ3JlbGF0aXZlJywgekluZGV4OiAxMTAwLCB3aWR0aDogJzEwMCUnLCBkaXNwbGF5OiAnZmxleCcsIHBhZGRpbmdMZWZ0OiAnMjRweCcsIHBhZGRpbmdSaWdodDogJzI0cHgnLCB9fT5cclxuICAgICAgICAgICAgPEZsYXRCdXR0b24gc3R5bGU9e3sgY29sb3I6ICd3aGl0ZScgfX0gbGFiZWw9XCJWb2x2ZXJcIiBvbkNsaWNrPXtwcm9wcy5vbkNsaWNrfSAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFjdGlvbkhlYWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9jb21wb25lbnRzL0FjdGlvbkhlYWRlci5qcyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBSZWFjdERvbSBmcm9tICdyZWFjdC1kb20nO1xyXG5pbXBvcnQgeyBIYXNoUm91dGVyIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcbmltcG9ydCB7IFJvdXRlIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcblxyXG5pbXBvcnQgTXVpVGhlbWVQcm92aWRlciBmcm9tICdtYXRlcmlhbC11aS9zdHlsZXMvTXVpVGhlbWVQcm92aWRlcic7XHJcblxyXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5cclxuaW1wb3J0IEFkbWluQmFja29mZmljZUJhciBmcm9tICcuL0FkbWluQmFja29mZmljZUJhcic7XHJcbmltcG9ydCBBZG1pbkluZGV4IGZyb20gJy4vQWRtaW5JbmRleCc7XHJcbmltcG9ydCBBZG1pbkxvZ2luIGZyb20gJy4vQWRtaW5Mb2dpbic7XHJcbmltcG9ydCBTaG9wTGlzdCBmcm9tICcuL1Nob3BMaXN0JztcclxuaW1wb3J0IFNob3BGb3JtIGZyb20gJy4vU2hvcEZvcm0nO1xyXG5cclxuLyogRVNURSBGUkFHTUVOVE8gREUgQ09ESUdPIEVTIFJFUVVFUklETyBQQVJBIExPUyBFVkVOVE9TIERFIFRJUE8gVE9VQ0ggTyBDTElDSyBFTiBDT01QT05FTlRFUyBNQVRFUklBTC1VSSAqL1xyXG5pbXBvcnQgaW5qZWN0VGFwRXZlbnRQbHVnaW4gZnJvbSAncmVhY3QtdGFwLWV2ZW50LXBsdWdpbic7XHJcbmluamVjdFRhcEV2ZW50UGx1Z2luKCk7XHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5jb25zb2xlLmxvZygnUGFyc2VhbmRvIGNvb2tpZSAnICsgZG9jdW1lbnQuY29va2llKTtcclxuY29uc3QgY29va2llID0gZG9jdW1lbnQuY29va2llIHx8ICcnO1xyXG5jb25zdCBjb29raWVUb2tlblN0ciA9IGNvb2tpZS5zcGxpdCgnOyAnKS5maW5kKHMgPT4gcy5zdGFydHNXaXRoKCd0b2tlbj0nKSk7XHJcbmNvbnN0IGNvb2tpZVRva2VuID0gY29va2llVG9rZW5TdHIgPyBjb29raWVUb2tlblN0ci5yZXBsYWNlKCd0b2tlbj0nLCAnJykgOiBudWxsO1xyXG5cclxuY29uc3QgQWRtaW5CYWNrb2ZmaWNlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xyXG4gICAgZ2V0SW5pdGlhbFN0YXRlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRva2VuOiBudWxsLFxyXG4gICAgICAgICAgICB1c2VyOiBudWxsLFxyXG4gICAgICAgICAgICByZW5kZXJSZWFkeTogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfSxcclxuXHJcbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICAvKiBTRSBDQVJHQU4gTEFTIENBTkNJT05FUyBERVNQVUVTIFFVRSBFTCBDT01QT05FTlRFIEhBWUEgU0lETyBNT05UQURPICovXHJcbiAgICAgICAgY29uc29sZS5sb2coJ0FkbWluQmFja29mZmljZSBNT05UQURBIScpO1xyXG4gICAgICAgIC8qIFNpIHNlIGVuY3VlbnRyYSB1biB0b2tlbiBlbiBsYXMgY29va2llcyBlbnRvbmNlcyBzZSBzZXRlYSBlbCBtaXNtbyB5IHNlIG9idGllbmUgZWwgdXN1YXJpb1xyXG4gICAgICAgIENhc28gY29udHJhcmlvLCBzZSBtYXJjYSBhbCBjb21wb25lbnRlIGNvbW8gbGlzdG8gcGFyYSByZW5kZXJpemFyICovXHJcbiAgICAgICAgaWYgKGNvb2tpZVRva2VuKSB0aGlzLnNldFRva2VuKGNvb2tpZVRva2VuKTtcclxuICAgICAgICBlbHNlIHRoaXMuc2V0U3RhdGUoeyByZW5kZXJSZWFkeTogdHJ1ZSB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0VG9rZW4odG9rZW4pIHtcclxuICAgICAgICB0b2tlbiA9IHRva2VuLnRva2VuIHx8IHRva2VuO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTZXRlYW5kbyB0b2tlbjogJyArIHRva2VuKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgdG9rZW4sICByZW5kZXJSZWFkeTogdHJ1ZSB9KTtcclxuICAgICAgICBcclxuICAgIH0sXHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdSRU5ERVJJTkcgQWRtaW5CYWNrb2ZmaWNlIScpO1xyXG5cclxuICAgICAgICAvL2lmICghdGhpcy5zdGF0ZS5yZW5kZXJSZWFkeSkgcmV0dXJuICg8c3Bhbj5Fc3BlcmUuLi48L3NwYW4+KTtcclxuXHJcbiAgICAgICAgY29uc3QgdG9rZW4gPSB0aGlzLnN0YXRlLnRva2VuO1xyXG4gICAgICAgIGlmICghdG9rZW4pIHJldHVybiA8QWRtaW5Mb2dpbiBvblN1Ym1pdD17dGhpcy5zZXRUb2tlbn0gLz47XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCd3aW5kb3cubG9jYXRpb24uaGFzaDogJyArIHdpbmRvdy5sb2NhdGlvbi5oYXNoKTtcclxuICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhhc2ggPT0gJyMvJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUkVQTEFDSU5HIExPQ0FUSU9OJyk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKCcvYWRtaW4jL2luZGV4Jyk7XHJcbiAgICAgICAgICAgIC8vcmV0dXJuIDxzcGFuPlJlZGlyZWNjaW9uYW5kby4uLjwvc3Bhbj47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBTaSB1biB1c3VhcmlvIGluaWNpbyBzZXNpb24sIHJlbmRlcml6byBsYSBhcHAgbm9ybWFsICovXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPE11aVRoZW1lUHJvdmlkZXI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxBZG1pbkJhY2tvZmZpY2VCYXIgb25Mb2dvdXQ9eygpID0+IHRoaXMubG9nb3V0Rm9ybS5zdWJtaXQoKX0gLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPFJvdXRlIHBhdGg9XCIvaW5kZXhcIiBjb21wb25lbnQ9e0FkbWluSW5kZXh9IC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxSb3V0ZSBwYXRoPVwiL3Nob3BzL2xpc3RcIiBjb21wb25lbnQ9eygpID0+IDxTaG9wTGlzdCB0b2tlbj17dG9rZW59IC8+fSAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxSb3V0ZSBwYXRoPVwiL3Nob3BzL2NyZWF0ZVwiIGNvbXBvbmVudD17KCkgPT4gPFNob3BGb3JtIHRva2VuPXt0b2tlbn0gLz59IC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxmb3JtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbj0nL2FkbWluL2xvZ291dCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kPSdQT1NUJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9e2YgPT4gdGhpcy5sb2dvdXRGb3JtID0gZn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogJ2hpZGRlbicgfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvTXVpVGhlbWVQcm92aWRlcj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59KTtcclxuXHJcblJlYWN0RG9tLnJlbmRlcihcclxuICAgIDxIYXNoUm91dGVyPlxyXG4gICAgICAgIDxBZG1pbkJhY2tvZmZpY2UgLz5cclxuICAgIDwvSGFzaFJvdXRlcj4sXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpXHJcbik7XHJcblxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9jb21wb25lbnRzL0FkbWluQmFja29mZmljZS5qcyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5pbXBvcnQgTXVpVGhlbWVQcm92aWRlciBmcm9tICdtYXRlcmlhbC11aS9zdHlsZXMvTXVpVGhlbWVQcm92aWRlcic7XHJcbmltcG9ydCBSYWlzZWRCdXR0b24gZnJvbSAnbWF0ZXJpYWwtdWkvUmFpc2VkQnV0dG9uJztcclxuaW1wb3J0IFRleHRGaWVsZCBmcm9tICdtYXRlcmlhbC11aS9UZXh0RmllbGQnO1xyXG5pbXBvcnQgeyBDYXJkLCBDYXJkQWN0aW9ucywgQ2FyZEhlYWRlciwgQ2FyZFRleHQgfSBmcm9tICdtYXRlcmlhbC11aS9DYXJkJztcclxuaW1wb3J0IENoZWNrYm94IGZyb20gJ21hdGVyaWFsLXVpL0NoZWNrYm94JztcclxuaW1wb3J0IEZsYXRCdXR0b24gZnJvbSAnbWF0ZXJpYWwtdWkvRmxhdEJ1dHRvbic7XHJcbmltcG9ydCBEaWFsb2cgZnJvbSAnbWF0ZXJpYWwtdWkvRGlhbG9nJztcclxuaW1wb3J0IFNuYWNrYmFyIGZyb20gJ21hdGVyaWFsLXVpL1NuYWNrYmFyJztcclxuXHJcbmltcG9ydCBBY3Rpb25IZWFkZXIgZnJvbSAnLi9BY3Rpb25IZWFkZXInO1xyXG5cclxuZnVuY3Rpb24gU2hvcE1lbnUocHJvcHMpIHtcclxuICAgIGNvbnN0IG1lbnUgPSBwcm9wcy5tZW51O1xyXG5cclxuICAgIGNvbnN0IG1lbnVDYXJkcyA9IG1lbnUubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgIGNvbnN0IGRpc2ggPSBpdGVtLmRpc2g7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPENhcmQgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiBcInJnYmEoMjU1LDI1NSwyNTUsMC43KVwiIH19ID5cclxuICAgICAgICAgICAgICAgIDxDYXJkSGVhZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2BQbGF0byAke2Rpc2guaWR9YH1cclxuICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZT17ZGlzaC5uYW1lfSAvPlxyXG4gICAgICAgICAgICAgICAgPENhcmRUZXh0IGV4cGFuZGFibGU9e2ZhbHNlfT5cclxuICAgICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPkRlc2NyaXBjaW9uOjwvc3Ryb25nPiB7ZGlzaC5kZXNjcmlwdGlvbn0gPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+Q29zdG86PC9zdHJvbmc+IHtkaXNoLmNvc3R9IDwvcD5cclxuICAgICAgICAgICAgICAgIDwvQ2FyZFRleHQ+XHJcbiAgICAgICAgICAgIDwvQ2FyZD5cclxuICAgICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIDxkaXY+XHJcbiAgICAgICAgPEFjdGlvbkhlYWRlciBvbkNsaWNrPXtwcm9wcy5nb0JhY2t9IC8+XHJcbiAgICAgICAge21lbnVDYXJkc31cclxuICAgIDwvZGl2PjtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2hvcE1lbnU7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vY29tcG9uZW50cy9TaG9wTWVudS5qcyJdLCJzb3VyY2VSb290IjoiIn0=