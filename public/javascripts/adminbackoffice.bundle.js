webpackJsonp([0],{100:function(e,t,n){"use strict";function o(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(e,n){return o(e,t[n])});var n=void 0===e?"undefined":a(e);if(n!==(void 0===t?"undefined":a(t)))return!1;if("object"===n){var r=e.valueOf(),i=t.valueOf();if(r!==e||i!==t)return o(r,i);var l=Object.keys(e),s=Object.keys(t);return l.length===s.length&&l.every(function(n){return o(e[n],t[n])})}return!1}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=o},107:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var o=e.targetOrigin,a=n.open,r=t.muiTheme,i=o.horizontal.replace("middle","vertical");return{root:{position:"fixed",zIndex:r.zIndex.popover,opacity:a?1:0,transform:a?"scaleY(1)":"scaleY(0)",transformOrigin:i+" "+o.vertical,transition:k.default.easeOut("450ms",["transform","opacity"]),maxHeight:"100%"}}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=o(r),l=n(2),s=o(l),u=n(3),c=o(u),d=n(6),p=o(d),f=n(5),h=o(f),m=n(7),y=o(m),v=n(0),g=o(v),b=n(1),T=o(b),w=n(22),S=o(w),E=n(12),k=o(E),x=n(21),C=(o(x),function(e){function t(){var e,n,o,a;(0,s.default)(this,t);for(var r=arguments.length,l=Array(r),u=0;u<r;u++)l[u]=arguments[u];return n=o=(0,p.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={open:!1},a=n,(0,p.default)(o,a)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.setState({open:!0})}},{key:"componentWillReceiveProps",value:function(e){this.setState({open:e.open})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.style,o=e.zDepth,r=a(this.props,this.context,this.state);return g.default.createElement(S.default,{style:(0,y.default)(r.root,n),zDepth:o,className:t},this.props.children)}}]),t}(v.Component));C.defaultProps={style:{},zDepth:1},C.contextTypes={muiTheme:T.default.object.isRequired},C.propTypes={},t.default=C},115:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MenuItem=t.DropDownMenu=void 0;var a=n(149),r=o(a),i=n(90),l=o(i);t.DropDownMenu=r.default,t.MenuItem=l.default,t.default=r.default},135:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n(10),l=o(i),s=n(16),u=o(s),c=n(50),d=n(31),p=n(51),f=o(p),h=n(87),m=function(){try{return window.history.state||{}}catch(e){return{}}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)(h.canUseDOM,"Browser history needs a DOM");var t=window.history,n=(0,h.supportsHistory)(),o=!(0,h.supportsPopStateOnHashChange)(),i=e.forceRefresh,s=void 0!==i&&i,p=e.getUserConfirmation,y=void 0===p?h.getConfirmation:p,v=e.keyLength,g=void 0===v?6:v,b=e.basename?(0,d.stripTrailingSlash)((0,d.addLeadingSlash)(e.basename)):"",T=function(e){var t=e||{},n=t.key,o=t.state,a=window.location,r=a.pathname,i=a.search,s=a.hash,u=r+i+s;return(0,l.default)(!b||(0,d.hasBasename)(u,b),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+u+'" to begin with "'+b+'".'),b&&(u=(0,d.stripBasename)(u,b)),(0,c.createLocation)(u,o,n)},w=function(){return Math.random().toString(36).substr(2,g)},S=(0,f.default)(),E=function(e){r(U,e),U.length=t.length,S.notifyListeners(U.location,U.action)},k=function(e){(0,h.isExtraneousPopstateEvent)(e)||O(T(e.state))},x=function(){O(T(m()))},C=!1,O=function(e){if(C)C=!1,E();else{S.confirmTransitionTo(e,"POP",y,function(t){t?E({action:"POP",location:e}):M(e)})}},M=function(e){var t=U.location,n=R.indexOf(t.key);-1===n&&(n=0);var o=R.indexOf(e.key);-1===o&&(o=0);var a=n-o;a&&(C=!0,D(a))},_=T(m()),R=[_.key],P=function(e){return b+(0,d.createPath)(e)},L=function(e,o){(0,l.default)(!("object"===(void 0===e?"undefined":a(e))&&void 0!==e.state&&void 0!==o),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var r=(0,c.createLocation)(e,o,w(),U.location);S.confirmTransitionTo(r,"PUSH",y,function(e){if(e){var o=P(r),a=r.key,i=r.state;if(n)if(t.pushState({key:a,state:i},null,o),s)window.location.href=o;else{var u=R.indexOf(U.location.key),c=R.slice(0,-1===u?0:u+1);c.push(r.key),R=c,E({action:"PUSH",location:r})}else(0,l.default)(void 0===i,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=o}})},j=function(e,o){(0,l.default)(!("object"===(void 0===e?"undefined":a(e))&&void 0!==e.state&&void 0!==o),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var r=(0,c.createLocation)(e,o,w(),U.location);S.confirmTransitionTo(r,"REPLACE",y,function(e){if(e){var o=P(r),a=r.key,i=r.state;if(n)if(t.replaceState({key:a,state:i},null,o),s)window.location.replace(o);else{var u=R.indexOf(U.location.key);-1!==u&&(R[u]=r.key),E({action:"REPLACE",location:r})}else(0,l.default)(void 0===i,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(o)}})},D=function(e){t.go(e)},A=function(){return D(-1)},I=function(){return D(1)},N=0,B=function(e){N+=e,1===N?((0,h.addEventListener)(window,"popstate",k),o&&(0,h.addEventListener)(window,"hashchange",x)):0===N&&((0,h.removeEventListener)(window,"popstate",k),o&&(0,h.removeEventListener)(window,"hashchange",x))},z=!1,W=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=S.setPrompt(e);return z||(B(1),z=!0),function(){return z&&(z=!1,B(-1)),t()}},H=function(e){var t=S.appendListener(e);return B(1),function(){B(-1),t()}},U={length:t.length,action:"POP",location:_,createHref:P,push:L,replace:j,go:D,goBack:A,goForward:I,block:W,listen:H};return U};t.default=y},136:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=n(10),i=o(r),l=n(16),s=o(l),u=n(50),c=n(31),d=n(51),p=o(d),f=n(87),h={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+(0,c.stripLeadingSlash)(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:c.stripLeadingSlash,decodePath:c.addLeadingSlash},slash:{encodePath:c.addLeadingSlash,decodePath:c.addLeadingSlash}},m=function(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)},y=function(e){return window.location.hash=e},v=function(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(f.canUseDOM,"Hash history needs a DOM");var t=window.history,n=(0,f.supportsGoWithoutReloadUsingHash)(),o=e.getUserConfirmation,r=void 0===o?f.getConfirmation:o,l=e.hashType,d=void 0===l?"slash":l,g=e.basename?(0,c.stripTrailingSlash)((0,c.addLeadingSlash)(e.basename)):"",b=h[d],T=b.encodePath,w=b.decodePath,S=function(){var e=w(m());return(0,i.default)(!g||(0,c.hasBasename)(e,g),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+e+'" to begin with "'+g+'".'),g&&(e=(0,c.stripBasename)(e,g)),(0,u.createLocation)(e)},E=(0,p.default)(),k=function(e){a(K,e),K.length=t.length,E.notifyListeners(K.location,K.action)},x=!1,C=null,O=function(){var e=m(),t=T(e);if(e!==t)v(t);else{var n=S(),o=K.location;if(!x&&(0,u.locationsAreEqual)(o,n))return;if(C===(0,c.createPath)(n))return;C=null,M(n)}},M=function(e){if(x)x=!1,k();else{E.confirmTransitionTo(e,"POP",r,function(t){t?k({action:"POP",location:e}):_(e)})}},_=function(e){var t=K.location,n=j.lastIndexOf((0,c.createPath)(t));-1===n&&(n=0);var o=j.lastIndexOf((0,c.createPath)(e));-1===o&&(o=0);var a=n-o;a&&(x=!0,N(a))},R=m(),P=T(R);R!==P&&v(P);var L=S(),j=[(0,c.createPath)(L)],D=function(e){return"#"+T(g+(0,c.createPath)(e))},A=function(e,t){(0,i.default)(void 0===t,"Hash history cannot push state; it is ignored");var n=(0,u.createLocation)(e,void 0,void 0,K.location);E.confirmTransitionTo(n,"PUSH",r,function(e){if(e){var t=(0,c.createPath)(n),o=T(g+t);if(m()!==o){C=t,y(o);var a=j.lastIndexOf((0,c.createPath)(K.location)),r=j.slice(0,-1===a?0:a+1);r.push(t),j=r,k({action:"PUSH",location:n})}else(0,i.default)(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),k()}})},I=function(e,t){(0,i.default)(void 0===t,"Hash history cannot replace state; it is ignored");var n=(0,u.createLocation)(e,void 0,void 0,K.location);E.confirmTransitionTo(n,"REPLACE",r,function(e){if(e){var t=(0,c.createPath)(n),o=T(g+t);m()!==o&&(C=t,v(o));var a=j.indexOf((0,c.createPath)(K.location));-1!==a&&(j[a]=t),k({action:"REPLACE",location:n})}})},N=function(e){(0,i.default)(n,"Hash history go(n) causes a full page reload in this browser"),t.go(e)},B=function(){return N(-1)},z=function(){return N(1)},W=0,H=function(e){W+=e,1===W?(0,f.addEventListener)(window,"hashchange",O):0===W&&(0,f.removeEventListener)(window,"hashchange",O)},U=!1,q=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=E.setPrompt(e);return U||(H(1),U=!0),function(){return U&&(U=!1,H(-1)),t()}},F=function(e){var t=E.appendListener(e);return H(1),function(){H(-1),t()}},K={length:t.length,action:"POP",location:L,createHref:D,push:A,replace:I,go:N,goBack:B,goForward:z,block:q,listen:F};return K};t.default=g},137:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n(10),l=o(i),s=n(31),u=n(50),c=n(51),d=o(c),p=function(e,t,n){return Math.min(Math.max(e,t),n)},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getUserConfirmation,n=e.initialEntries,o=void 0===n?["/"]:n,i=e.initialIndex,c=void 0===i?0:i,f=e.keyLength,h=void 0===f?6:f,m=(0,d.default)(),y=function(e){r(_,e),_.length=_.entries.length,m.notifyListeners(_.location,_.action)},v=function(){return Math.random().toString(36).substr(2,h)},g=p(c,0,o.length-1),b=o.map(function(e){return"string"==typeof e?(0,u.createLocation)(e,void 0,v()):(0,u.createLocation)(e,void 0,e.key||v())}),T=s.createPath,w=function(e,n){(0,l.default)(!("object"===(void 0===e?"undefined":a(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var o=(0,u.createLocation)(e,n,v(),_.location);m.confirmTransitionTo(o,"PUSH",t,function(e){if(e){var t=_.index,n=t+1,a=_.entries.slice(0);a.length>n?a.splice(n,a.length-n,o):a.push(o),y({action:"PUSH",location:o,index:n,entries:a})}})},S=function(e,n){(0,l.default)(!("object"===(void 0===e?"undefined":a(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var o=(0,u.createLocation)(e,n,v(),_.location);m.confirmTransitionTo(o,"REPLACE",t,function(e){e&&(_.entries[_.index]=o,y({action:"REPLACE",location:o}))})},E=function(e){var n=p(_.index+e,0,_.entries.length-1),o=_.entries[n];m.confirmTransitionTo(o,"POP",t,function(e){e?y({action:"POP",location:o,index:n}):y()})},k=function(){return E(-1)},x=function(){return E(1)},C=function(e){var t=_.index+e;return t>=0&&t<_.entries.length},O=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m.setPrompt(e)},M=function(e){return m.appendListener(e)},_={length:b.length,action:"POP",location:b[g],index:g,entries:b,createHref:T,push:w,replace:S,go:E,goBack:k,goForward:x,canGo:C,block:O,listen:M};return _};t.default=f},138:function(e,t,n){"use strict";var o=n(10),a=(n.n(o),n(16));n.n(a),n(37),n(32),n(52),n(88),"function"==typeof Symbol&&Symbol.iterator,Object.assign},139:function(e,t,n){"use strict";var o=n(10),a=(n.n(o),n(16)),r=(n.n(a),n(37),n(32));n(52),n(88),Object.assign,r.c,r.d,r.d,r.d},140:function(e,t,n){"use strict";var o=n(10);n.n(o),n(32),n(37),n(52),"function"==typeof Symbol&&Symbol.iterator,Object.assign},141:function(e,t,n){"use strict";var o=(n(138),n(139),n(140),n(37));n.d(t,"a",function(){return o.a}),n.d(t,"b",function(){return o.b});n(32)},143:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=t.muiTheme,o=n.appBar,a=n.button.iconButtonSize;return{root:{position:"relative",zIndex:n.zIndex.appBar,width:"100%",display:"flex",backgroundColor:o.color,paddingLeft:o.padding,paddingRight:o.padding},title:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",margin:0,paddingTop:0,letterSpacing:0,fontSize:24,fontWeight:o.titleFontWeight,color:o.textColor,height:o.height,lineHeight:o.height+"px"},mainElement:{boxFlex:1,flex:"1"},iconButtonStyle:{marginTop:(o.height-a)/2,marginRight:8,marginLeft:-16},iconButtonIconStyle:{fill:o.textColor,color:o.textColor},flatButton:{color:o.textColor,marginTop:(a-36)/2+1}}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=o(r),l=n(102),s=o(l),u=n(9),c=o(u),d=n(4),p=o(d),f=n(2),h=o(f),m=n(3),y=o(m),v=n(6),g=o(v),b=n(5),T=o(b);t.getStyles=a;var w=n(7),S=o(w),E=n(0),k=o(E),x=n(1),C=o(x),O=n(38),M=o(O),_=n(165),R=o(_),P=n(22),L=o(P),j=n(21),D=(o(j),n(10)),A=(o(D),function(e){function t(){var e,n,o,a;(0,h.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=o=(0,g.default)(this,(e=t.__proto__||(0,p.default)(t)).call.apply(e,[this].concat(i))),o.handleTouchTapLeftIconButton=function(e){o.props.onLeftIconButtonTouchTap&&o.props.onLeftIconButtonTouchTap(e)},o.handleTouchTapRightIconButton=function(e){o.props.onRightIconButtonTouchTap&&o.props.onRightIconButtonTouchTap(e)},o.handleTitleTouchTap=function(e){o.props.onTitleTouchTap&&o.props.onTitleTouchTap(e)},a=n,(0,g.default)(o,a)}return(0,T.default)(t,e),(0,y.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.titleStyle,o=e.iconStyleLeft,r=e.iconStyleRight,l=(e.onTitleTouchTap,e.showMenuIconButton),u=e.iconElementLeft,d=e.iconElementRight,p=e.iconClassNameLeft,f=e.iconClassNameRight,h=(e.onLeftIconButtonTouchTap,e.onRightIconButtonTouchTap,e.className),m=e.style,y=e.zDepth,v=e.children,g=(0,c.default)(e,["title","titleStyle","iconStyleLeft","iconStyleRight","onTitleTouchTap","showMenuIconButton","iconElementLeft","iconElementRight","iconClassNameLeft","iconClassNameRight","onLeftIconButtonTouchTap","onRightIconButtonTouchTap","className","style","zDepth","children"]),b=this.context.muiTheme.prepareStyles,T=a(this.props,this.context),w=void 0,x=void 0,C="string"==typeof t||t instanceof String?"h1":"div",O=k.default.createElement(C,{onTouchTap:this.handleTitleTouchTap,style:b((0,S.default)(T.title,T.mainElement,n))},t),_=(0,S.default)({},T.iconButtonStyle,o);if(l)if(u){var P={};if("IconButton"===u.type.muiName){var j=u.props.children,D=j&&j.props&&j.props.color?null:T.iconButtonIconStyle;P.iconStyle=(0,S.default)({},D,u.props.iconStyle)}!u.props.onTouchTap&&this.props.onLeftIconButtonTouchTap&&(P.onTouchTap=this.handleTouchTapLeftIconButton),w=k.default.createElement("div",{style:b(_)},(0,s.default)(P).length>0?(0,E.cloneElement)(u,P):u)}else w=k.default.createElement(M.default,{style:_,iconStyle:T.iconButtonIconStyle,iconClassName:p,onTouchTap:this.handleTouchTapLeftIconButton},p?"":k.default.createElement(R.default,{style:(0,S.default)({},T.iconButtonIconStyle)}));var A=(0,S.default)({},T.iconButtonStyle,{marginRight:-16,marginLeft:"auto"},r);if(d){var I={};switch(d.type.muiName){case"IconMenu":case"IconButton":var N=d.props.children,B=N&&N.props&&N.props.color?null:T.iconButtonIconStyle;I.iconStyle=(0,S.default)({},B,d.props.iconStyle);break;case"FlatButton":I.style=(0,S.default)({},T.flatButton,d.props.style)}!d.props.onTouchTap&&this.props.onRightIconButtonTouchTap&&(I.onTouchTap=this.handleTouchTapRightIconButton),x=k.default.createElement("div",{style:b(A)},(0,s.default)(I).length>0?(0,E.cloneElement)(d,I):d)}else f&&(x=k.default.createElement(M.default,{style:A,iconStyle:T.iconButtonIconStyle,iconClassName:f,onTouchTap:this.handleTouchTapRightIconButton}));return k.default.createElement(L.default,(0,i.default)({},g,{rounded:!1,className:h,style:(0,S.default)({},T.root,m),zDepth:y}),w,O,x,v)}}]),t}(E.Component));A.muiName="AppBar",A.defaultProps={showMenuIconButton:!0,title:"",zDepth:1},A.contextTypes={muiTheme:C.default.object.isRequired},A.propTypes={},t.default=A},144:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(143),a=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=a.default},145:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=t.muiTheme.checkbox;return{icon:{height:24,width:24},check:{position:"absolute",opacity:0,transform:"scale(0)",transitionOrigin:"50% 50%",transition:M.default.easeOut("450ms","opacity","0ms")+", "+M.default.easeOut("0ms","transform","450ms"),fill:n.checkedColor},checkWhenSwitched:{opacity:1,transform:"scale(1)",transition:M.default.easeOut("0ms","opacity","0ms")+", "+M.default.easeOut("800ms","transform","0ms")},checkWhenDisabled:{fill:n.disabledColor},box:{position:"absolute",opacity:1,fill:n.boxColor,transition:M.default.easeOut("1000ms","opacity","200ms")},boxWhenSwitched:{opacity:0,transition:M.default.easeOut("650ms","opacity","150ms"),fill:n.checkedColor},boxWhenDisabled:{fill:e.checked?"transparent":n.disabledColor},label:{color:e.disabled?n.labelDisabledColor:n.labelColor}}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=o(r),l=n(9),s=o(l),u=n(4),c=o(u),d=n(2),p=o(d),f=n(3),h=o(f),m=n(6),y=o(m),v=n(5),g=o(v),b=n(7),T=o(b),w=n(0),S=o(w),E=n(1),k=o(E),x=n(157),C=o(x),O=n(12),M=o(O),_=n(167),R=o(_),P=n(168),L=o(P),j=function(e){function t(){var e,n,o,a;(0,p.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=o=(0,y.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(i))),o.state={switched:!1},o.handleStateChange=function(e){o.setState({switched:e})},o.handleCheck=function(e,t){o.props.onCheck&&o.props.onCheck(e,t)},a=n,(0,y.default)(o,a)}return(0,g.default)(t,e),(0,h.default)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.checked,n=e.defaultChecked,o=e.valueLink;(t||n||o&&o.value)&&this.setState({switched:!0})}},{key:"componentWillReceiveProps",value:function(e){this.props.checked!==e.checked&&this.setState({switched:e.checked})}},{key:"isChecked",value:function(){return this.refs.enhancedSwitch.isSwitched()}},{key:"setChecked",value:function(e){this.refs.enhancedSwitch.setSwitched(e)}},{key:"render",value:function(){var e=this.props,t=e.iconStyle,n=(e.onCheck,e.checkedIcon),o=e.uncheckedIcon,r=(0,s.default)(e,["iconStyle","onCheck","checkedIcon","uncheckedIcon"]),l=a(this.props,this.context),u=(0,T.default)(l.box,this.state.switched&&l.boxWhenSwitched,t,this.props.disabled&&l.boxWhenDisabled),c=(0,T.default)(l.check,this.state.switched&&l.checkWhenSwitched,t,this.props.disabled&&l.checkWhenDisabled),d=n?S.default.cloneElement(n,{style:(0,T.default)(c,n.props.style)}):S.default.createElement(L.default,{style:c}),p=o?S.default.cloneElement(o,{style:(0,T.default)(u,o.props.style)}):S.default.createElement(R.default,{style:u}),f=S.default.createElement("div",null,p,d),h=this.state.switched?c.fill:u.fill,m=(0,T.default)(l.icon,t),y=(0,T.default)(l.label,this.props.labelStyle),v={ref:"enhancedSwitch",inputType:"checkbox",switched:this.state.switched,switchElement:f,rippleColor:h,iconStyle:m,onSwitch:this.handleCheck,labelStyle:y,onParentShouldUpdate:this.handleStateChange,labelPosition:this.props.labelPosition};return S.default.createElement(C.default,(0,i.default)({},r,v))}}]),t}(w.Component);j.defaultProps={labelPosition:"right",disabled:!1},j.contextTypes={muiTheme:k.default.object.isRequired},j.propTypes={},t.default=j},146:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=e.autoScrollBodyContent,o=e.open,a=t.muiTheme,r=a.baseTheme,i=r.spacing,l=r.palette,s=a.dialog,u=a.zIndex,c=i.desktopGutter,d="1px solid "+l.borderColor;return{root:{position:"fixed",boxSizing:"border-box",WebkitTapHighlightColor:"rgba(0,0,0,0)",zIndex:u.dialog,top:0,left:o?0:-1e4,width:"100%",height:"100%",transition:o?L.default.easeOut("0ms","left","0ms"):L.default.easeOut("0ms","left","450ms")},content:{boxSizing:"border-box",WebkitTapHighlightColor:"rgba(0,0,0,0)",transition:L.default.easeOut(),position:"relative",width:"75%",maxWidth:12*i.desktopKeylineIncrement,margin:"0 auto",zIndex:u.dialog},actionsContainer:{boxSizing:"border-box",WebkitTapHighlightColor:"rgba(0,0,0,0)",padding:8,width:"100%",textAlign:"right",marginTop:n?-1:0},overlay:{zIndex:u.dialogOverlay},title:{margin:0,padding:c+"px "+c+"px 20px "+c+"px",color:l.textColor,fontSize:s.titleFontSize,lineHeight:"32px",fontWeight:400,marginBottom:n?-1:0},body:{fontSize:s.bodyFontSize,color:s.bodyColor,padding:(e.title?0:c)+"px "+c+"px "+c+"px",boxSizing:"border-box",overflowY:n?"auto":"hidden",borderTop:n?d:"none",borderBottom:n?d:"none"}}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=o(r),l=n(9),s=o(l),u=n(4),c=o(u),d=n(2),p=o(d),f=n(3),h=o(f),m=n(6),y=o(m),v=n(5),g=o(v),b=n(7),T=o(b),w=n(0),S=o(w),E=n(1),k=o(E),x=n(15),C=o(x),O=n(26),M=o(O),_=n(25),R=o(_),P=n(12),L=o(P),j=n(108),D=o(j),A=n(159),I=o(A),N=n(22),B=o(N),z=n(97),W=o(z),H=function(e){function t(){var e,n,o,a;(0,p.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=o=(0,y.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(i))),o.state={style:{}},a=n,(0,y.default)(o,a)}return(0,g.default)(t,e),(0,h.default)(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.enterTimeout),clearTimeout(this.leaveTimeout)}},{key:"componentWillEnter",value:function(e){this.componentWillAppear(e)}},{key:"componentWillAppear",value:function(e){var t=this.context.muiTheme.baseTheme.spacing;this.setState({style:{opacity:1,transform:"translate(0, "+t.desktopKeylineIncrement+"px)"}}),this.enterTimeout=setTimeout(e,450)}},{key:"componentWillLeave",value:function(e){this.setState({style:{opacity:0,transform:"translate(0, 0)"}}),this.leaveTimeout=setTimeout(e,450)}},{key:"render",value:function(){var e=this.props,t=e.style,n=e.children,o=(0,s.default)(e,["style","children"]),a=this.context.muiTheme.prepareStyles;return S.default.createElement("div",(0,i.default)({},o,{style:a((0,T.default)({},this.state.style,t))}),n)}}]),t}(w.Component);H.contextTypes={muiTheme:k.default.object.isRequired},H.propTypes={};var U=function(e){function t(){var e,n,o,a;(0,p.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=o=(0,y.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(i))),o.handleTouchTapOverlay=function(){o.requestClose(!1)},o.handleKeyUp=function(e){"esc"===(0,R.default)(e)&&o.requestClose(!1)},o.handleResize=function(){o.positionDialog()},a=n,(0,y.default)(o,a)}return(0,g.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){this.positionDialog()}},{key:"componentDidUpdate",value:function(){this.positionDialog()}},{key:"positionDialog",value:function(){var e=this.props,t=e.actions,n=e.autoDetectWindowHeight,o=e.autoScrollBodyContent,r=e.bodyStyle,i=e.open,l=e.repositionOnUpdate,s=e.title;if(i){var u=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=C.default.findDOMNode(this),d=C.default.findDOMNode(this.refs.dialogWindow),p=C.default.findDOMNode(this.refs.dialogContent);d.style.height="",p.style.height="";var f=d.offsetHeight,h=(u-f)/2-64;if(h<16&&(h=16),!l&&c.style.paddingTop||(c.style.paddingTop=h+"px"),n||o){var m=a(this.props,this.context);m.body=(0,T.default)(m.body,r);var y=u-128;s&&(y-=p.previousSibling.offsetHeight),S.default.Children.count(t)&&(y-=p.nextSibling.offsetHeight),p.style.maxHeight=y+"px",y>f&&(p.style.borderBottom="none",p.style.borderTop="none")}}}},{key:"requestClose",value:function(e){!e&&this.props.modal||this.props.onRequestClose&&this.props.onRequestClose(!!e)}},{key:"render",value:function(){var e=this.props,t=e.actions,n=e.actionsContainerClassName,o=e.actionsContainerStyle,r=e.bodyClassName,l=e.bodyStyle,s=e.children,u=e.className,c=e.contentClassName,d=e.contentStyle,p=e.overlayClassName,f=e.overlayStyle,h=e.open,m=e.paperClassName,y=e.paperProps,v=e.style,g=e.titleClassName,b=e.titleStyle,w=e.title,E=this.context.muiTheme.prepareStyles,k=a(this.props,this.context);k.root=(0,T.default)(k.root,v),k.content=(0,T.default)(k.content,d),k.body=(0,T.default)(k.body,l),k.actionsContainer=(0,T.default)(k.actionsContainer,o),k.overlay=(0,T.default)(k.overlay,f),k.title=(0,T.default)(k.title,b);var x=S.default.Children.count(t)>0&&S.default.createElement("div",{className:n,style:E(k.actionsContainer)},S.default.Children.toArray(t)),C=w;return S.default.isValidElement(w)?C=S.default.cloneElement(w,{className:w.props.className||g,style:E((0,T.default)(k.title,w.props.style))}):"string"==typeof w&&(C=S.default.createElement("h3",{className:g,style:E(k.title)},w)),S.default.createElement("div",{className:u,style:E(k.root)},h&&S.default.createElement(M.default,{target:"window",onKeyUp:this.handleKeyUp,onResize:this.handleResize}),S.default.createElement(W.default,{component:"div",ref:"dialogWindow",transitionAppear:!0,transitionAppearTimeout:450,transitionEnter:!0,transitionEnterTimeout:450},h&&S.default.createElement(H,{className:c,style:k.content},S.default.createElement(B.default,(0,i.default)({className:m,zDepth:4},y),C,S.default.createElement("div",{ref:"dialogContent",className:r,style:E(k.body)},s),x))),S.default.createElement(D.default,{show:h,className:p,style:k.overlay,onTouchTap:this.handleTouchTapOverlay}))}}]),t}(w.Component);U.contextTypes={muiTheme:k.default.object.isRequired},U.propTypes={};var q=function(e){function t(){var e,n,o,a;(0,p.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=o=(0,y.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(i))),o.renderLayer=function(){return S.default.createElement(U,o.props)},a=n,(0,y.default)(o,a)}return(0,g.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){return S.default.createElement(I.default,{render:this.renderLayer,open:!0,useLayerForClickAway:!1})}}]),t}(w.Component);q.contextTypes={muiTheme:k.default.object.isRequired},q.defaultProps={autoDetectWindowHeight:!0,autoScrollBodyContent:!1,modal:!1,repositionOnUpdate:!0},q.propTypes={},t.default=q},147:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),r=o(a),i=n(2),l=o(i),s=n(3),u=o(s),c=n(6),d=o(c),p=n(5),f=o(p),h=n(7),m=o(h),y=n(0),v=o(y),g=n(1),b=o(g),T=n(15),w=o(T),S=n(26),E=o(S),k=n(25),x=o(k),C=n(68),O=o(C),M=n(12),_=o(M),R=n(108),P=o(R),L=n(22),j=o(L),D=n(21),A=(o(D),null),I=function(e){function t(){var e,n,o,a;(0,l.default)(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return n=o=(0,d.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(s))),o.handleTouchTapOverlay=function(e){e.preventDefault(),o.close("clickaway")},o.handleKeyUp=function(e){o.state.open&&!o.props.docked&&"esc"===(0,x.default)(e)&&o.close("escape")},o.onBodyTouchStart=function(e){var t=o.props.swipeAreaWidth,n=o.context.muiTheme.isRtl?document.body.offsetWidth-e.touches[0].pageX:e.touches[0].pageX,a=e.touches[0].pageY;if(null!==t&&!o.state.open)if(o.props.openSecondary){if(n<document.body.offsetWidth-t)return}else if(n>t)return;(o.state.open||A===o.onBodyTouchStart&&!o.props.disableSwipeToOpen)&&(o.maybeSwiping=!0,o.touchStartX=n,o.touchStartY=a,document.body.addEventListener("touchmove",o.onBodyTouchMove),document.body.addEventListener("touchend",o.onBodyTouchEnd),document.body.addEventListener("touchcancel",o.onBodyTouchEnd))},o.onBodyTouchMove=function(e){var t=o.context.muiTheme.isRtl?document.body.offsetWidth-e.touches[0].pageX:e.touches[0].pageX,n=e.touches[0].pageY;if(o.state.swiping)e.preventDefault(),o.setPosition(o.getTranslateX(t));else if(o.maybeSwiping){var a=Math.abs(t-o.touchStartX),r=Math.abs(n-o.touchStartY);a>10&&r<=10?(o.swipeStartX=t,o.setState({swiping:o.state.open?"closing":"opening"}),o.setPosition(o.getTranslateX(t))):a<=10&&r>10&&o.onBodyTouchEnd()}},o.onBodyTouchEnd=function(e){if(o.state.swiping){var t=o.context.muiTheme.isRtl?document.body.offsetWidth-e.changedTouches[0].pageX:e.changedTouches[0].pageX,n=o.getTranslateX(t)/o.getMaxTranslateX();o.maybeSwiping=!1;var a=o.state.swiping;o.setState({swiping:null}),n>.5?"opening"===a?o.setPosition(o.getMaxTranslateX()):o.close("swipe"):"opening"===a?o.open("swipe"):o.setPosition(0)}else o.maybeSwiping=!1;o.removeBodyTouchListeners()},a=n,(0,d.default)(o,a)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.maybeSwiping=!1,this.touchStartX=null,this.touchStartY=null,this.swipeStartX=null,this.setState({open:null!==this.props.open?this.props.open:this.props.docked,swiping:null})}},{key:"componentDidMount",value:function(){this.enableSwipeHandling()}},{key:"componentWillReceiveProps",value:function(e){null!==e.open?this.setState({open:e.open}):this.props.docked!==e.docked&&this.setState({open:e.docked})}},{key:"componentDidUpdate",value:function(){this.enableSwipeHandling()}},{key:"componentWillUnmount",value:function(){this.disableSwipeHandling(),this.removeBodyTouchListeners()}},{key:"getStyles",value:function(){var e=this.context.muiTheme,t=e.drawer,n=this.getTranslateMultiplier()*(this.state.open?0:this.getMaxTranslateX());return{root:{height:"100%",width:this.getTranslatedWidth()||t.width,position:"fixed",zIndex:e.zIndex.drawer,left:0,top:0,transform:"translate("+n+"px, 0)",transition:!this.state.swiping&&_.default.easeOut(null,"transform",null),backgroundColor:t.color,overflow:"auto",WebkitOverflowScrolling:"touch"},overlay:{zIndex:e.zIndex.drawerOverlay,pointerEvents:this.state.open?"auto":"none"},rootWhenOpenRight:{left:"auto",right:0}}}},{key:"shouldShow",value:function(){return this.state.open||!!this.state.swiping}},{key:"close",value:function(e){return null===this.props.open&&this.setState({open:!1}),this.props.onRequestChange&&this.props.onRequestChange(!1,e),this}},{key:"open",value:function(e){return null===this.props.open&&this.setState({open:!0}),this.props.onRequestChange&&this.props.onRequestChange(!0,e),this}},{key:"getTranslatedWidth",value:function(){if("string"==typeof this.props.width){if(!/^\d+(\.\d+)?%$/.test(this.props.width))throw new Error("Not a valid percentage format.");var e=parseFloat(this.props.width)/100;return"undefined"!=typeof window?e*window.innerWidth:1e4}return this.props.width}},{key:"getMaxTranslateX",value:function(){return(this.getTranslatedWidth()||this.context.muiTheme.drawer.width)+10}},{key:"getTranslateMultiplier",value:function(){return this.props.openSecondary?1:-1}},{key:"enableSwipeHandling",value:function(){this.props.docked?this.disableSwipeHandling():(document.body.addEventListener("touchstart",this.onBodyTouchStart),A||(A=this.onBodyTouchStart))}},{key:"disableSwipeHandling",value:function(){document.body.removeEventListener("touchstart",this.onBodyTouchStart),A===this.onBodyTouchStart&&(A=null)}},{key:"removeBodyTouchListeners",value:function(){document.body.removeEventListener("touchmove",this.onBodyTouchMove),document.body.removeEventListener("touchend",this.onBodyTouchEnd),document.body.removeEventListener("touchcancel",this.onBodyTouchEnd)}},{key:"setPosition",value:function(e){var t=this.context.muiTheme.isRtl?-1:1,n=w.default.findDOMNode(this.refs.clickAwayableElement),o="translate("+this.getTranslateMultiplier()*t*e+"px, 0)";this.refs.overlay.setOpacity(1-e/this.getMaxTranslateX()),O.default.set(n.style,"transform",o)}},{key:"getTranslateX",value:function(e){return Math.min(Math.max("closing"===this.state.swiping?this.getTranslateMultiplier()*(e-this.swipeStartX):this.getMaxTranslateX()-this.getTranslateMultiplier()*(this.swipeStartX-e),0),this.getMaxTranslateX())}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,o=e.containerClassName,a=e.containerStyle,r=e.docked,i=e.openSecondary,l=e.overlayClassName,s=e.overlayStyle,u=e.style,c=e.zDepth,d=this.getStyles(),p=void 0;return r||(p=v.default.createElement(P.default,{ref:"overlay",show:this.shouldShow(),className:l,style:(0,m.default)(d.overlay,s),transitionEnabled:!this.state.swiping,onTouchTap:this.handleTouchTapOverlay})),v.default.createElement("div",{className:n,style:u},v.default.createElement(E.default,{target:"window",onKeyUp:this.handleKeyUp}),p,v.default.createElement(j.default,{ref:"clickAwayableElement",zDepth:c,rounded:!1,transitionEnabled:!this.state.swiping,className:o,style:(0,m.default)(d.root,i&&d.rootWhenOpenRight,a)},t))}}]),t}(y.Component);I.defaultProps={disableSwipeToOpen:!1,docked:!0,open:null,openSecondary:!1,swipeAreaWidth:30,width:null,zDepth:2},I.contextTypes={muiTheme:b.default.object.isRequired},I.propTypes={},t.default=I},148:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(147),a=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=a.default},149:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=e.disabled,o=t.muiTheme.baseTheme.spacing,a=t.muiTheme.baseTheme.palette,r=t.muiTheme.dropDownMenu.accentColor;return{control:{cursor:n?"not-allowed":"pointer",height:"100%",position:"relative",width:"100%"},icon:{fill:r,position:"absolute",right:o.desktopGutterLess,top:(o.iconSize-24)/2+o.desktopGutterMini/2},iconChildren:{fill:"inherit"},label:{color:n?a.disabledColor:a.textColor,height:o.desktopToolbarHeight+"px",lineHeight:o.desktopToolbarHeight+"px",overflow:"hidden",opacity:1,position:"relative",paddingLeft:o.desktopGutter,paddingRight:2*o.iconSize+o.desktopGutterMini,textOverflow:"ellipsis",top:0,whiteSpace:"nowrap"},labelWhenOpen:{opacity:0,top:o.desktopToolbarHeight/8},root:{display:"inline-block",fontSize:o.desktopDropDownMenuFontSize,height:o.desktopSubheaderHeight,fontFamily:t.muiTheme.baseTheme.fontFamily,outline:"none",position:"relative",transition:M.default.easeOut()},rootWhenOpen:{opacity:1},underline:{borderTop:"solid 1px "+r,bottom:1,left:0,margin:"-1px "+o.desktopGutter+"px",right:0,position:"absolute"}}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=o(r),l=n(9),s=o(l),u=n(4),c=o(u),d=n(2),p=o(d),f=n(3),h=o(f),m=n(6),y=o(m),v=n(5),g=o(v),b=n(7),T=o(b),w=n(0),S=o(w),E=n(1),k=o(E),x=n(15),C=o(x),O=n(12),M=o(O),_=n(164),R=o(_),P=n(91),L=o(P),j=n(155),D=o(j),A=n(67),I=o(A),N=n(107),B=o(N),z=n(25),W=o(z),H=n(70),U=o(H),q=n(38),F=o(q),K=n(21),Y=(o(K),function(e){function t(){var e,n,o,a;(0,p.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=o=(0,y.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(i))),o.state={open:!1},o.rootNode=void 0,o.arrowNode=void 0,o.handleTouchTapControl=function(e){e.preventDefault(),o.props.disabled||o.setState({open:!o.state.open,anchorEl:o.rootNode})},o.handleRequestCloseMenu=function(){o.close(!1)},o.handleEscKeyDownMenu=function(){o.close(!0)},o.handleKeyDown=function(e){switch((0,W.default)(e)){case"up":case"down":case"space":case"enter":e.preventDefault(),o.setState({open:!0,anchorEl:o.rootNode})}},o.handleItemTouchTap=function(e,t,n){o.props.multiple?o.state.open||o.setState({open:!0}):(e.persist(),o.setState({open:!1},function(){o.props.onChange&&o.props.onChange(e,n,t.props.value),o.close(U.default.isKeyboard(e))}))},o.handleChange=function(e,t){o.props.multiple&&o.props.onChange&&o.props.onChange(e,void 0,t)},o.close=function(e){o.setState({open:!1},function(){if(o.props.onClose&&o.props.onClose(),e){var t=o.arrowNode;C.default.findDOMNode(t).focus(),t.setKeyboardFocus(!0)}})},a=n,(0,y.default)(o,a)}return(0,g.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.autoWidth&&this.setWidth(),this.props.openImmediately&&setTimeout(function(){return e.setState({open:!0,anchorEl:e.rootNode})},0)}},{key:"componentWillReceiveProps",value:function(){this.props.autoWidth&&this.setWidth()}},{key:"getInputNode",value:function(){var e=this,t=this.rootNode;return t.focus=function(){e.props.disabled||e.setState({open:!e.state.open,anchorEl:e.rootNode})},t}},{key:"setWidth",value:function(){var e=this.rootNode;this.props.style&&this.props.style.hasOwnProperty("width")||(e.style.width="auto")}},{key:"render",value:function(){var e=this,t=this.props,n=t.animated,o=t.animation,r=t.autoWidth,l=t.multiple,u=t.children,c=t.className,d=t.disabled,p=t.iconStyle,f=t.labelStyle,h=t.listStyle,m=t.maxHeight,y=t.menuStyle,v=t.selectionRenderer,g=(t.onClose,t.openImmediately,t.menuItemStyle),b=t.selectedMenuItemStyle,w=t.style,E=t.underlineStyle,k=t.value,x=t.iconButton,C=t.anchorOrigin,O=t.targetOrigin,M=(0,s.default)(t,["animated","animation","autoWidth","multiple","children","className","disabled","iconStyle","labelStyle","listStyle","maxHeight","menuStyle","selectionRenderer","onClose","openImmediately","menuItemStyle","selectedMenuItemStyle","style","underlineStyle","value","iconButton","anchorOrigin","targetOrigin"]),_=this.state,R=_.anchorEl,P=_.open,j=this.context.muiTheme.prepareStyles,A=a(this.props,this.context),N="";if(l){var z=[],W=[];S.default.Children.forEach(u,function(e){e&&k&&k.indexOf(e.props.value)>-1&&(v?(z.push(e.props.value),W.push(e)):z.push(e.props.label||e.props.primaryText))}),N=[],N=v?v(z,W):z.join(", ")}else S.default.Children.forEach(u,function(e){e&&k===e.props.value&&(N=v?v(k,e):e.props.label||e.props.primaryText)});var H=void 0;return H=R&&!r?(0,T.default)({width:R.clientWidth},y):y,S.default.createElement("div",(0,i.default)({},M,{ref:function(t){e.rootNode=t},className:c,style:j((0,T.default)({},A.root,P&&A.rootWhenOpen,w))}),S.default.createElement(D.default,{style:A.control,onTouchTap:this.handleTouchTapControl},S.default.createElement("div",{style:j((0,T.default)({},A.label,P&&A.labelWhenOpen,f))},N),S.default.createElement(F.default,{disabled:d,onKeyDown:this.handleKeyDown,ref:function(t){e.arrowNode=t},style:(0,T.default)({},A.icon,p),iconStyle:A.iconChildren},x),S.default.createElement("div",{style:j((0,T.default)({},A.underline,E))})),S.default.createElement(I.default,{anchorOrigin:C,targetOrigin:O,anchorEl:R,animation:o||B.default,open:P,animated:n,onRequestClose:this.handleRequestCloseMenu},S.default.createElement(L.default,{multiple:l,maxHeight:m,desktop:!0,value:k,onEscKeyDown:this.handleEscKeyDownMenu,style:H,listStyle:h,onItemTouchTap:this.handleItemTouchTap,onChange:this.handleChange,menuItemStyle:g,selectedMenuItemStyle:b,autoWidth:r,width:!r&&H?H.width:null},u)))}}]),t}(w.Component));Y.muiName="DropDownMenu",Y.defaultProps={animated:!0,autoWidth:!0,disabled:!1,iconButton:S.default.createElement(R.default,null),openImmediately:!1,maxHeight:500,multiple:!1,anchorOrigin:{vertical:"top",horizontal:"left"}},Y.contextTypes={muiTheme:k.default.object.isRequired},Y.propTypes={},t.default=Y},150:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),r=o(a),i=n(9),l=o(i),s=n(4),u=o(s),c=n(2),d=o(c),p=n(3),f=o(p),h=n(6),m=o(h),y=n(5),v=o(y),g=n(7),b=o(g),T=n(0),w=o(T),S=n(1),E=o(S),k=n(15),x=o(k),C=n(70),O=o(C),M=n(21),_=(o(M),n(91)),R=o(_),P=n(67),L=o(P),j=n(10),D=(o(j),function(e){function t(){var e,n,o,a;(0,d.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=o=(0,m.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(i))),o.state={menuInitiallyKeyboardFocused:!1,open:!1},o.handleItemTouchTap=function(e,t){if(0!==o.props.touchTapCloseDelay&&!t.props.hasOwnProperty("menuItems")){var n=O.default.isKeyboard(e);o.timerCloseId=setTimeout(function(){o.close(n?"enter":"itemTap",n)},o.props.touchTapCloseDelay)}o.props.onItemTouchTap(e,t)},o.handleRequestClose=function(e){o.close(e)},o.handleEscKeyDownMenu=function(e){o.close("escape",e)},a=n,(0,m.default)(o,a)}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentWillReceiveProps",value:function(e){null!=e.open&&this.setState({open:e.open,anchorEl:this.refs.iconMenuContainer})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timerCloseId)}},{key:"isOpen",value:function(){return this.state.open}},{key:"close",value:function(e,t){var n=this;this.state.open&&(null!==this.props.open?this.props.onRequestChange(!1,e):this.setState({open:!1},function(){if(t){var e=n.refs.iconButton;x.default.findDOMNode(e).focus(),e.setKeyboardFocus()}}))}},{key:"open",value:function(e,t){if(null!==this.props.open)return this.props.onRequestChange(!0,e),this.setState({menuInitiallyKeyboardFocused:O.default.isKeyboard(t),anchorEl:t.currentTarget});this.setState({open:!0,menuInitiallyKeyboardFocused:O.default.isKeyboard(t),anchorEl:t.currentTarget}),t.preventDefault()}},{key:"render",value:function(){var e=this,t=this.props,n=t.anchorOrigin,o=t.className,a=t.animated,i=t.animation,s=t.iconButtonElement,u=t.iconStyle,c=(t.onItemTouchTap,t.onKeyboardFocus),d=t.onMouseDown,p=t.onMouseLeave,f=t.onMouseEnter,h=t.onMouseUp,m=(t.onRequestChange,t.onTouchTap),y=t.listStyle,v=t.menuStyle,g=t.style,T=t.targetOrigin,S=(t.touchTapCloseDelay,t.useLayerForClickAway),E=(0,l.default)(t,["anchorOrigin","className","animated","animation","iconButtonElement","iconStyle","onItemTouchTap","onKeyboardFocus","onMouseDown","onMouseLeave","onMouseEnter","onMouseUp","onRequestChange","onTouchTap","listStyle","menuStyle","style","targetOrigin","touchTapCloseDelay","useLayerForClickAway"]),k=this.context.muiTheme.prepareStyles,x=this.state,C=x.open,M=x.anchorEl,_={root:{display:"inline-block",position:"relative"},menu:{position:"relative"}},P=(0,b.default)(_.root,g),j=(0,b.default)(_.menu,v),D={onKeyboardFocus:c,onTouchTap:function(t){e.open(O.default.isKeyboard(t)?"keyboard":"iconTap",t),s.props.onTouchTap&&s.props.onTouchTap(t)},ref:"iconButton"};(u||s.props.iconStyle)&&(D.iconStyle=u?(0,b.default)({},u,s.props.iconStyle):s.props.iconStyle);var A=w.default.cloneElement(s,D),I=w.default.createElement(R.default,(0,r.default)({},E,{initiallyKeyboardFocused:this.state.menuInitiallyKeyboardFocused,onEscKeyDown:this.handleEscKeyDownMenu,onItemTouchTap:this.handleItemTouchTap,style:j,listStyle:y}),this.props.children);return w.default.createElement("div",{ref:"iconMenuContainer",className:o,onMouseDown:d,onMouseLeave:p,onMouseEnter:f,onMouseUp:h,onTouchTap:m,style:k(P)},A,w.default.createElement(L.default,{anchorOrigin:n,targetOrigin:T,open:C,anchorEl:M,childContextTypes:this.constructor.childContextTypes,useLayerForClickAway:S,onRequestClose:this.handleRequestClose,animated:a,animation:i,context:this.context},I))}}]),t}(T.Component));D.muiName="IconMenu",D.defaultProps={anchorOrigin:{vertical:"top",horizontal:"left"},animated:!0,multiple:!1,open:null,onItemTouchTap:function(){},onKeyboardFocus:function(){},onMouseDown:function(){},onMouseLeave:function(){},onMouseEnter:function(){},onMouseUp:function(){},onRequestChange:function(){},onTouchTap:function(){},targetOrigin:{vertical:"top",horizontal:"left"},touchTapCloseDelay:200,useLayerForClickAway:!1},D.contextTypes={muiTheme:E.default.object.isRequired},D.propTypes={},t.default=D},151:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MenuItem=t.IconMenu=void 0;var a=n(150),r=o(a),i=n(90),l=o(i);t.IconMenu=r.default,t.MenuItem=l.default,t.default=r.default},152:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var o=t.muiTheme,a=o.baseTheme.spacing.desktopSubheaderHeight,r=o.zIndex,i=n.open;return{root:{position:"fixed",left:"50%",display:"flex",bottom:0,zIndex:r.snackbar,visibility:i?"visible":"hidden",transform:i?"translate(-50%, 0)":"translate(-50%, "+a+"px)",transition:C.default.easeOut("400ms","transform")+", "+C.default.easeOut("400ms","visibility")}}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=o(r),l=n(9),s=o(l),u=n(4),c=o(u),d=n(2),p=o(d),f=n(3),h=o(f),m=n(6),y=o(m),v=n(5),g=o(v),b=n(7),T=o(b),w=n(0),S=o(w),E=n(1),k=o(E),x=n(12),C=o(x),O=n(156),M=o(O),_=n(153),R=o(_),P=function(e){function t(){var e,n,o,a;(0,p.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=o=(0,y.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(i))),o.componentClickAway=function(){o.timerTransitionId||(null!==o.props.open&&o.props.onRequestClose?o.props.onRequestClose("clickaway"):o.setState({open:!1}))},a=n,(0,y.default)(o,a)}return(0,g.default)(t,e),(0,h.default)(t,[{key:"componentWillMount",value:function(){this.setState({open:this.props.open,message:this.props.message,action:this.props.action})}},{key:"componentDidMount",value:function(){this.state.open&&(this.setAutoHideTimer(),this.setTransitionTimer())}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(this.props.open&&e.open&&(e.message!==this.props.message||e.action!==this.props.action))this.setState({open:!1}),clearTimeout(this.timerOneAtTheTimeId),this.timerOneAtTheTimeId=setTimeout(function(){t.setState({message:e.message,action:e.action,open:!0})},400);else{var n=e.open;this.setState({open:null!==n?n:this.state.open,message:e.message,action:e.action})}}},{key:"componentDidUpdate",value:function(e,t){t.open!==this.state.open&&(this.state.open?(this.setAutoHideTimer(),this.setTransitionTimer()):clearTimeout(this.timerAutoHideId))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timerAutoHideId),clearTimeout(this.timerTransitionId),clearTimeout(this.timerOneAtTheTimeId)}},{key:"setAutoHideTimer",value:function(){var e=this,t=this.props.autoHideDuration;t>0&&(clearTimeout(this.timerAutoHideId),this.timerAutoHideId=setTimeout(function(){null!==e.props.open&&e.props.onRequestClose?e.props.onRequestClose("timeout"):e.setState({open:!1})},t))}},{key:"setTransitionTimer",value:function(){var e=this;this.timerTransitionId=setTimeout(function(){e.timerTransitionId=void 0},400)}},{key:"render",value:function(){var e=this.props,t=(e.autoHideDuration,e.contentStyle),n=e.bodyStyle,o=(e.message,e.onRequestClose,e.onActionTouchTap),r=e.style,l=(0,s.default)(e,["autoHideDuration","contentStyle","bodyStyle","message","onRequestClose","onActionTouchTap","style"]),u=this.state,c=u.action,d=u.message,p=u.open,f=this.context.muiTheme.prepareStyles,h=a(this.props,this.context,this.state);return S.default.createElement(M.default,{onClickAway:p?this.componentClickAway:null},S.default.createElement("div",(0,i.default)({},l,{style:f((0,T.default)(h.root,r))}),S.default.createElement(R.default,{action:c,contentStyle:t,message:d,open:p,onActionTouchTap:o,style:n})))}}]),t}(w.Component);P.contextTypes={muiTheme:k.default.object.isRequired},P.propTypes={},t.default=P},153:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=e.open,o=e.width,a=t.muiTheme,r=a.baseTheme,i=r.spacing,l=i.desktopGutter,s=i.desktopSubheaderHeight,u=r.fontFamily,c=a.snackbar,d=c.backgroundColor,p=c.textColor,f=c.actionColor,h=a.borderRadius,m=o===v.SMALL;return{root:{fontFamily:u,backgroundColor:d,padding:"0 "+l+"px",height:s,lineHeight:s+"px",borderRadius:m?0:h,maxWidth:m?"inherit":568,minWidth:m?"inherit":288,width:m?"calc(100vw - "+2*l+"px)":"auto",flexGrow:m?1:0},content:{fontSize:14,color:p,opacity:n?1:0,transition:n?y.default.easeOut("500ms","opacity","100ms"):y.default.easeOut("400ms","opacity")},action:{color:f,float:"right",marginTop:6,marginRight:-16,marginLeft:l,backgroundColor:"transparent"}}}Object.defineProperty(t,"__esModule",{value:!0}),t.SnackbarBody=void 0;var r=n(8),i=o(r),l=n(9),s=o(l),u=n(7),c=o(u),d=n(0),p=o(d),f=n(1),h=o(f),m=n(12),y=o(m),v=n(169),g=o(v),b=n(29),T=o(b),w=function(e,t){var n=e.action,o=e.contentStyle,r=e.message,l=(e.open,e.onActionTouchTap),u=e.style,d=(0,s.default)(e,["action","contentStyle","message","open","onActionTouchTap","style"]),f=t.muiTheme.prepareStyles,h=a(e,t),m=n&&p.default.createElement(T.default,{style:h.action,label:n,onTouchTap:l});return p.default.createElement("div",(0,i.default)({},d,{style:f((0,c.default)(h.root,u))}),p.default.createElement("div",{style:f((0,c.default)(h.content,o))},p.default.createElement("span",null,r),m))};t.SnackbarBody=w,w.propTypes={},w.contextTypes={muiTheme:h.default.object.isRequired},t.default=(0,g.default)()(w)},154:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),r=o(a),i=n(4),l=o(i),s=n(2),u=o(s),c=n(3),d=o(c),p=n(6),f=o(p),h=n(5),m=o(h),y=n(7),v=o(y),g=n(0),b=o(g),T=n(1),w=o(T),S={box:{boxSizing:"border-box"}},E=function(e){function t(){return(0,u.default)(this,t),(0,f.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.beforeStyle,n=e.afterStyle,o=(e.beforeElementType,e.afterElementType,e.elementType,(0,r.default)(e,["beforeStyle","afterStyle","beforeElementType","afterElementType","elementType"])),a=this.context.muiTheme.prepareStyles,i=void 0,l=void 0;t&&(i=b.default.createElement(this.props.beforeElementType,{style:a((0,v.default)({},S.box,t)),key:"::before"})),n&&(l=b.default.createElement(this.props.afterElementType,{style:a((0,v.default)({},S.box,n)),key:"::after"}));var s=[i,this.props.children,l],u=o;return u.style=a((0,v.default)({},this.props.style)),b.default.createElement(this.props.elementType,u,s)}}]),t}(g.Component);E.defaultProps={beforeElementType:"div",afterElementType:"div",elementType:"div"},E.contextTypes={muiTheme:w.default.object.isRequired},E.propTypes={},t.default=E},155:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),r=o(a),i=n(9),l=o(i),s=n(0),u=o(s),c=n(1),d=(o(c),n(154)),p=o(d),f={before:{content:"' '",display:"table"},after:{content:"' '",clear:"both",display:"table"}},h=function(e){var t=e.style,n=e.children,o=(0,l.default)(e,["style","children"]);return u.default.createElement(p.default,(0,r.default)({},o,{beforeStyle:f.before,afterStyle:f.after,style:t}),n)};h.muiName="ClearFix",h.propTypes={},t.default=h},157:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=t.muiTheme.baseTheme;return{root:{cursor:e.disabled?"not-allowed":"pointer",position:"relative",overflow:"visible",display:"table",height:"auto",width:"100%"},input:{position:"absolute",cursor:"inherit",pointerEvents:"all",opacity:0,width:"100%",height:"100%",zIndex:2,left:0,boxSizing:"border-box",padding:0,margin:0},controls:{display:"flex",width:"100%",height:"100%"},label:{float:"left",position:"relative",display:"block",width:"calc(100% - 60px)",lineHeight:"24px",color:n.palette.textColor,fontFamily:n.fontFamily},wrap:{transition:R.default.easeOut(),float:"left",position:"relative",display:"block",flexShrink:0,width:60-n.spacing.desktopGutterLess,marginRight:"right"===e.labelPosition?n.spacing.desktopGutterLess:0,marginLeft:"left"===e.labelPosition?n.spacing.desktopGutterLess:0},ripple:{color:e.rippleColor||n.palette.primary1Color,height:"200%",width:"200%",top:-12,left:-12}}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=o(r),l=n(9),s=o(l),u=n(4),c=o(u),d=n(2),p=o(d),f=n(3),h=o(f),m=n(6),y=o(m),v=n(5),g=o(v),b=n(7),T=o(b),w=n(0),S=o(w),E=n(1),k=o(E),x=n(26),C=o(x),O=n(25),M=o(O),_=n(12),R=o(_),P=n(158),L=o(P),j=n(161),D=o(j),A=n(22),I=o(A),N=n(10),B=(o(N),function(e){function t(){var e,n,o,a;(0,p.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=o=(0,y.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(i))),o.state={isKeyboardFocused:!1},o.handleChange=function(e){o.tabPressed=!1,o.setState({isKeyboardFocused:!1});var t=o.refs.checkbox.checked;!o.props.hasOwnProperty("checked")&&o.props.onParentShouldUpdate&&o.props.onParentShouldUpdate(t),o.props.onSwitch&&o.props.onSwitch(e,t)},o.handleKeyDown=function(e){var t=(0,M.default)(e);"tab"===t&&(o.tabPressed=!0),o.state.isKeyboardFocused&&"space"===t&&o.handleChange(e)},o.handleKeyUp=function(e){o.state.isKeyboardFocused&&"space"===(0,M.default)(e)&&o.handleChange(e)},o.handleMouseDown=function(e){0===e.button&&o.refs.touchRipple.start(e)},o.handleMouseUp=function(){o.refs.touchRipple.end()},o.handleMouseLeave=function(){o.refs.touchRipple.end()},o.handleTouchStart=function(e){o.refs.touchRipple.start(e)},o.handleTouchEnd=function(){o.refs.touchRipple.end()},o.handleBlur=function(e){o.setState({isKeyboardFocused:!1}),o.props.onBlur&&o.props.onBlur(e)},o.handleFocus=function(e){setTimeout(function(){o.tabPressed&&o.setState({isKeyboardFocused:!0})},150),o.props.onFocus&&o.props.onFocus(e)},a=n,(0,y.default)(o,a)}return(0,g.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){var e=this.refs.checkbox;this.props.switched&&e.checked===this.props.switched||!this.props.onParentShouldUpdate||this.props.onParentShouldUpdate(e.checked)}},{key:"componentWillReceiveProps",value:function(e){var t=e.hasOwnProperty("checked"),n=e.hasOwnProperty("defaultChecked")&&e.defaultChecked!==this.props.defaultChecked;if(t||n){var o=e.checked||e.defaultChecked||!1;this.setState({switched:o}),this.props.onParentShouldUpdate&&o!==this.props.switched&&this.props.onParentShouldUpdate(o)}}},{key:"isSwitched",value:function(){return this.refs.checkbox.checked}},{key:"setSwitched",value:function(e){this.props.hasOwnProperty("checked")&&!1!==this.props.checked||(this.props.onParentShouldUpdate&&this.props.onParentShouldUpdate(e),this.refs.checkbox.checked=e)}},{key:"getValue",value:function(){return this.refs.checkbox.value}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.value,o=e.iconStyle,r=e.inputStyle,l=e.inputType,u=e.label,c=e.labelStyle,d=e.labelPosition,p=(e.onSwitch,e.onBlur,e.onFocus,e.onMouseUp,e.onMouseDown,e.onMouseLeave,e.onTouchStart,e.onTouchEnd,e.onParentShouldUpdate,e.disabled),f=e.disableTouchRipple,h=e.disableFocusRipple,m=e.className,y=(e.rippleColor,e.rippleStyle),v=e.style,g=(e.switched,e.switchElement),b=e.thumbStyle,w=e.trackStyle,E=(0,s.default)(e,["name","value","iconStyle","inputStyle","inputType","label","labelStyle","labelPosition","onSwitch","onBlur","onFocus","onMouseUp","onMouseDown","onMouseLeave","onTouchStart","onTouchEnd","onParentShouldUpdate","disabled","disableTouchRipple","disableFocusRipple","className","rippleColor","rippleStyle","style","switched","switchElement","thumbStyle","trackStyle"]),k=this.context.muiTheme.prepareStyles,x=a(this.props,this.context),O=(0,T.default)(x.wrap,o),M=(0,T.default)(x.ripple,y);b&&(O.marginLeft/=2,O.marginRight/=2);var _=u&&S.default.createElement("label",{style:k((0,T.default)(x.label,c))},u),R=!p&&!f,P=!p&&!h,j=S.default.createElement(D.default,{ref:"touchRipple",key:"touchRipple",style:M,color:M.color,muiTheme:this.context.muiTheme,centerRipple:!0}),A=S.default.createElement(L.default,{key:"focusRipple",innerStyle:M,color:M.color,muiTheme:this.context.muiTheme,show:this.state.isKeyboardFocused}),N=[R?j:null,P?A:null],B=S.default.createElement("input",(0,i.default)({},E,{ref:"checkbox",type:l,style:k((0,T.default)(x.input,r)),name:t,value:n,disabled:p,onBlur:this.handleBlur,onFocus:this.handleFocus,onChange:this.handleChange,onMouseUp:R&&this.handleMouseUp,onMouseDown:R&&this.handleMouseDown,onMouseLeave:R&&this.handleMouseLeave,onTouchStart:R&&this.handleTouchStart,onTouchEnd:R&&this.handleTouchEnd})),z=b?S.default.createElement("div",{style:k(O)},S.default.createElement("div",{style:k((0,T.default)({},w))}),S.default.createElement(I.default,{style:b,zDepth:1,circle:!0}," ",N," ")):S.default.createElement("div",{style:k(O)},g,N),W="right"===d?S.default.createElement("div",{style:x.controls},z,_):S.default.createElement("div",{style:x.controls},_,z);return S.default.createElement("div",{ref:"root",className:m,style:k((0,T.default)(x.root,v))},S.default.createElement(C.default,{target:"window",onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp}),B,W)}}]),t}(w.Component));B.contextTypes={muiTheme:k.default.object.isRequired},B.propTypes={},t.default=B},16:function(e,t,n){"use strict";var o=function(e,t,n,o,a,r,i,l){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,o,a,r,i,l],c=0;s=new Error(t.replace(/%s/g,function(){return u[c++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}};e.exports=o},163:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=o(a),i=n(20),l=o(i),s=n(19),u=o(s),c=function(e){return r.default.createElement(u.default,e,r.default.createElement("path",{d:"M9.5,7l5,5l-5,5V7z"}))};c=(0,l.default)(c),c.displayName="NavigationArrowDropRight",c.muiName="SvgIcon",t.default=c},164:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=o(a),i=n(20),l=o(i),s=n(19),u=o(s),c=function(e){return r.default.createElement(u.default,e,r.default.createElement("path",{d:"M7 10l5 5 5-5z"}))};c=(0,l.default)(c),c.displayName="NavigationArrowDropDown",c.muiName="SvgIcon",t.default=c},165:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=o(a),i=n(20),l=o(i),s=n(19),u=o(s),c=function(e){return r.default.createElement(u.default,e,r.default.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))};c=(0,l.default)(c),c.displayName="NavigationMenu",c.muiName="SvgIcon",t.default=c},166:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=o(a),i=n(20),l=o(i),s=n(19),u=o(s),c=function(e){return r.default.createElement(u.default,e,r.default.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}))};c=(0,l.default)(c),c.displayName="NavigationMoreVert",c.muiName="SvgIcon",t.default=c},167:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=o(a),i=n(20),l=o(i),s=n(19),u=o(s),c=function(e){return r.default.createElement(u.default,e,r.default.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}))};c=(0,l.default)(c),c.displayName="ToggleCheckBoxOutlineBlank",c.muiName="SvgIcon",t.default=c},168:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=o(a),i=n(20),l=o(i),s=n(19),u=o(s),c=function(e){return r.default.createElement(u.default,e,r.default.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))};c=(0,l.default)(c),c.displayName="ToggleCheckBox",c.muiName="SvgIcon",t.default=c},169:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.largeWidth,n=void 0===t?992:t,o=e.mediumWidth,a=void 0===o?768:o,r=e.resizeInterval,l=void 0===r?166:r;return function(e){return function(t){function o(){var e,t,n,a;(0,c.default)(this,o);for(var r=arguments.length,i=Array(r),u=0;u<r;u++)i[u]=arguments[u];return t=n=(0,h.default)(this,(e=o.__proto__||(0,s.default)(o)).call.apply(e,[this].concat(i))),n.state={width:null},n.handleResize=function(){clearTimeout(n.deferTimer),n.deferTimer=setTimeout(function(){n.updateWidth()},l)},a=t,(0,h.default)(n,a)}return(0,y.default)(o,t),(0,p.default)(o,[{key:"componentDidMount",value:function(){this.updateWidth()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.deferTimer)}},{key:"updateWidth",value:function(){var e=window.innerWidth,t=void 0;(t=e>=n?E:e>=a?S:w)!==this.state.width&&this.setState({width:t})}},{key:"render",value:function(){var t=this.state.width;return null===t?null:g.default.createElement(T.default,{target:"window",onResize:this.handleResize},g.default.createElement(e,(0,i.default)({width:t},this.props)))}}]),o}(v.Component)}}Object.defineProperty(t,"__esModule",{value:!0}),t.LARGE=t.MEDIUM=t.SMALL=void 0;var r=n(8),i=o(r),l=n(4),s=o(l),u=n(2),c=o(u),d=n(3),p=o(d),f=n(6),h=o(f),m=n(5),y=o(m);t.default=a;var v=n(0),g=o(v),b=n(26),T=o(b),w=t.SMALL=1,S=t.MEDIUM=2,E=t.LARGE=3},170:function(e,t,n){function o(e,t){for(var n,o=[],a=0,r=0,i="",l=t&&t.delimiter||"/";null!=(n=g.exec(e));){var c=n[0],d=n[1],p=n.index;if(i+=e.slice(r,p),r=p+c.length,d)i+=d[1];else{var f=e[r],h=n[2],m=n[3],y=n[4],v=n[5],b=n[6],T=n[7];i&&(o.push(i),i="");var w=null!=h&&null!=f&&f!==h,S="+"===b||"*"===b,E="?"===b||"*"===b,k=n[2]||l,x=y||v;o.push({name:m||a++,prefix:h||"",delimiter:k,optional:E,repeat:S,partial:w,asterisk:!!T,pattern:x?u(x):T?".*":"[^"+s(k)+"]+?"})}}return r<e.length&&(i+=e.substr(r)),i&&o.push(i),o}function a(e,t){return l(o(e,t))}function r(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function i(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function l(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,o){for(var a="",l=n||{},s=o||{},u=s.pretty?r:encodeURIComponent,c=0;c<e.length;c++){var d=e[c];if("string"!=typeof d){var p,f=l[d.name];if(null==f){if(d.optional){d.partial&&(a+=d.prefix);continue}throw new TypeError('Expected "'+d.name+'" to be defined')}if(v(f)){if(!d.repeat)throw new TypeError('Expected "'+d.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(d.optional)continue;throw new TypeError('Expected "'+d.name+'" to not be empty')}for(var h=0;h<f.length;h++){if(p=u(f[h]),!t[c].test(p))throw new TypeError('Expected all "'+d.name+'" to match "'+d.pattern+'", but received `'+JSON.stringify(p)+"`");a+=(0===h?d.prefix:d.delimiter)+p}}else{if(p=d.asterisk?i(f):u(f),!t[c].test(p))throw new TypeError('Expected "'+d.name+'" to match "'+d.pattern+'", but received "'+p+'"');a+=d.prefix+p}}else a+=d}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function u(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function c(e,t){return e.keys=t,e}function d(e){return e.sensitive?"":"i"}function p(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var o=0;o<n.length;o++)t.push({name:o,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(e,t)}function f(e,t,n){for(var o=[],a=0;a<e.length;a++)o.push(y(e[a],t,n).source);return c(new RegExp("(?:"+o.join("|")+")",d(n)),t)}function h(e,t,n){return m(o(e,n),t,n)}function m(e,t,n){v(t)||(n=t||n,t=[]),n=n||{};for(var o=n.strict,a=!1!==n.end,r="",i=0;i<e.length;i++){var l=e[i];if("string"==typeof l)r+=s(l);else{var u=s(l.prefix),p="(?:"+l.pattern+")";t.push(l),l.repeat&&(p+="(?:"+u+p+")*"),p=l.optional?l.partial?u+"("+p+")?":"(?:"+u+"("+p+"))?":u+"("+p+")",r+=p}}var f=s(n.delimiter||"/"),h=r.slice(-f.length)===f;return o||(r=(h?r.slice(0,-f.length):r)+"(?:"+f+"(?=$))?"),r+=a?"$":o&&h?"":"(?="+f+"|$)",c(new RegExp("^"+r,d(n)),t)}function y(e,t,n){return v(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?p(e,t):v(e)?f(e,t,n):h(e,t,n)}var v=n(171);e.exports=y,e.exports.parse=o,e.exports.compile=a,e.exports.tokensToFunction=l,e.exports.tokensToRegExp=m;var g=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},171:function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},189:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(10),l=n.n(i),s=n(0),u=n.n(s),c=n(1),d=n.n(c),p=n(135),f=n.n(p),h=n(55),m=function(e){function t(){var n,r,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=r=a(this,e.call.apply(e,[this].concat(s))),r.history=f()(r.props),i=n,a(r,i)}return r(t,e),t.prototype.componentWillMount=function(){l()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},t.prototype.render=function(){return u.a.createElement(h.a,{history:this.history,children:this.props.children})},t}(u.a.Component);m.propTypes={basename:d.a.string,forceRefresh:d.a.bool,getUserConfirmation:d.a.func,keyLength:d.a.number,children:d.a.node},t.a=m},190:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(10),l=n.n(i),s=n(0),u=n.n(s),c=n(1),d=n.n(c),p=n(136),f=n.n(p),h=n(55),m=function(e){function t(){var n,r,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=r=a(this,e.call.apply(e,[this].concat(s))),r.history=f()(r.props),i=n,a(r,i)}return r(t,e),t.prototype.componentWillMount=function(){l()(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},t.prototype.render=function(){return u.a.createElement(h.a,{history:this.history,children:this.props.children})},t}(u.a.Component);m.propTypes={basename:d.a.string,getUserConfirmation:d.a.func,hashType:d.a.oneOf(["hashbang","noslash","slash"]),children:d.a.node},t.a=m},191:function(e,t,n){"use strict";var o=n(199);t.a=o.a},192:function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}var a=n(0),r=n.n(a),i=n(1),l=n.n(i),s=n(95),u=n(94),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(e){var t=e.to,n=e.exact,a=e.strict,i=e.location,l=e.activeClassName,p=e.className,f=e.activeStyle,h=e.style,m=e.isActive,y=e.ariaCurrent,v=o(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","ariaCurrent"]);return r.a.createElement(s.a,{path:"object"===(void 0===t?"undefined":d(t))?t.pathname:t,exact:n,strict:a,location:i,children:function(e){var n=e.location,o=e.match,a=!!(m?m(o,n):o);return r.a.createElement(u.a,c({to:t,className:a?[p,l].filter(function(e){return e}).join(" "):p,style:a?c({},h,f):h,"aria-current":a&&y},v))}})};p.propTypes={to:u.a.propTypes.to,exact:l.a.bool,strict:l.a.bool,location:l.a.object,activeClassName:l.a.string,className:l.a.string,activeStyle:l.a.object,style:l.a.object,isActive:l.a.func,ariaCurrent:l.a.oneOf(["page","step","location","true"])},p.defaultProps={activeClassName:"active",ariaCurrent:"true"},t.a=p},193:function(e,t,n){"use strict";var o=n(200);t.a=o.a},194:function(e,t,n){"use strict";var o=n(201);t.a=o.a},195:function(e,t,n){"use strict";var o=n(202);t.a=o.a},196:function(e,t,n){"use strict";var o=n(203);t.a=o.a},197:function(e,t,n){"use strict";var o=n(57);t.a=o.a},198:function(e,t,n){"use strict";var o=n(204);t.a=o.a},199:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(10),l=n.n(i),s=n(0),u=n.n(s),c=n(1),d=n.n(c),p=n(137),f=n.n(p),h=n(56),m=function(e){function t(){var n,r,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=r=a(this,e.call.apply(e,[this].concat(s))),r.history=f()(r.props),i=n,a(r,i)}return r(t,e),t.prototype.componentWillMount=function(){l()(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},t.prototype.render=function(){return u.a.createElement(h.a,{history:this.history,children:this.props.children})},t}(u.a.Component);m.propTypes={initialEntries:d.a.array,initialIndex:d.a.number,getUserConfirmation:d.a.func,keyLength:d.a.number,children:d.a.node},t.a=m},200:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),l=n.n(i),s=n(1),u=n.n(s),c=n(16),d=n.n(c),p=function(e){function t(){return o(this,t),a(this,e.apply(this,arguments))}return r(t,e),t.prototype.enable=function(e){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(e)},t.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},t.prototype.componentWillMount=function(){d()(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},t.prototype.componentWillReceiveProps=function(e){e.when?this.props.when&&this.props.message===e.message||this.enable(e.message):this.disable()},t.prototype.componentWillUnmount=function(){this.disable()},t.prototype.render=function(){return null},t}(l.a.Component);p.propTypes={when:u.a.bool,message:u.a.oneOfType([u.a.func,u.a.string]).isRequired},p.defaultProps={when:!0},p.contextTypes={router:u.a.shape({history:u.a.shape({block:u.a.func.isRequired}).isRequired}).isRequired},t.a=p},201:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),l=n.n(i),s=n(1),u=n.n(s),c=n(10),d=n.n(c),p=n(16),f=n.n(p),h=n(141),m=function(e){function t(){return o(this,t),a(this,e.apply(this,arguments))}return r(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){f()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=n.i(h.a)(e.to),o=n.i(h.a)(this.props.to);if(n.i(h.b)(t,o))return void d()(!1,"You tried to redirect to the same route you're currently on: \""+o.pathname+o.search+'"');this.perform()},t.prototype.perform=function(){var e=this.context.router.history,t=this.props,n=t.push,o=t.to;n?e.push(o):e.replace(o)},t.prototype.render=function(){return null},t}(l.a.Component);m.propTypes={push:u.a.bool,from:u.a.string,to:u.a.oneOfType([u.a.string,u.a.object]).isRequired},m.defaultProps={push:!1},m.contextTypes={router:u.a.shape({history:u.a.shape({push:u.a.func.isRequired,replace:u.a.func.isRequired}).isRequired,staticContext:u.a.object}).isRequired},t.a=m},202:function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(10),s=n.n(l),u=n(16),c=n.n(u),d=n(0),p=n.n(d),f=n(1),h=n.n(f),m=n(31),y=(n.n(m),n(56)),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},g=function(e){var t=e.pathname,n=void 0===t?"/":t,o=e.search,a=void 0===o?"":o,r=e.hash,i=void 0===r?"":r;return{pathname:n,search:"?"===a?"":a,hash:"#"===i?"":i}},b=function(e,t){return e?v({},t,{pathname:n.i(m.addLeadingSlash)(e)+t.pathname}):t},T=function(e,t){if(!e)return t;var o=n.i(m.addLeadingSlash)(e);return 0!==t.pathname.indexOf(o)?t:v({},t,{pathname:t.pathname.substr(o.length)})},w=function(e){return"string"==typeof e?n.i(m.parsePath)(e):g(e)},S=function(e){return"string"==typeof e?e:n.i(m.createPath)(e)},E=function(e){return function(){c()(!1,"You cannot %s with <StaticRouter>",e)}},k=function(){},x=function(e){function t(){var o,i,l;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return o=i=r(this,e.call.apply(e,[this].concat(u))),i.createHref=function(e){return n.i(m.addLeadingSlash)(i.props.basename+S(e))},i.handlePush=function(e){var t=i.props,n=t.basename,o=t.context;o.action="PUSH",o.location=b(n,w(e)),o.url=S(o.location)},i.handleReplace=function(e){var t=i.props,n=t.basename,o=t.context;o.action="REPLACE",o.location=b(n,w(e)),o.url=S(o.location)},i.handleListen=function(){return k},i.handleBlock=function(){return k},l=o,r(i,l)}return i(t,e),t.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},t.prototype.componentWillMount=function(){s()(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},t.prototype.render=function(){var e=this.props,t=e.basename,n=(e.context,e.location),a=o(e,["basename","context","location"]),r={createHref:this.createHref,action:"POP",location:T(t,w(n)),push:this.handlePush,replace:this.handleReplace,go:E("go"),goBack:E("goBack"),goForward:E("goForward"),listen:this.handleListen,block:this.handleBlock};return p.a.createElement(y.a,v({},a,{history:r}))},t}(p.a.Component);x.propTypes={basename:h.a.string,context:h.a.object.isRequired,location:h.a.oneOfType([h.a.string,h.a.object])},x.defaultProps={basename:"",location:"/"},x.childContextTypes={router:h.a.object.isRequired},t.a=x},203:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),l=n.n(i),s=n(1),u=n.n(s),c=n(10),d=n.n(c),p=n(16),f=n.n(p),h=n(57),m=function(e){function t(){return o(this,t),a(this,e.apply(this,arguments))}return r(t,e),t.prototype.componentWillMount=function(){f()(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){d()(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),d()(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,o=this.props.location||e.location,a=void 0,r=void 0;return l.a.Children.forEach(t,function(t){if(l.a.isValidElement(t)){var i=t.props,s=i.path,u=i.exact,c=i.strict,d=i.sensitive,p=i.from,f=s||p;null==a&&(r=t,a=f?n.i(h.a)(o.pathname,{path:f,exact:u,strict:c,sensitive:d}):e.match)}}),a?l.a.cloneElement(r,{location:o,computedMatch:a}):null},t}(l.a.Component);m.contextTypes={router:u.a.shape({route:u.a.object.isRequired}).isRequired},m.propTypes={children:u.a.node,location:u.a.object},t.a=m},204:function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}var a=n(0),r=n.n(a),i=n(1),l=n.n(i),s=n(205),u=n.n(s),c=n(96),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},p=function(e){var t=function(t){var n=t.wrappedComponentRef,a=o(t,["wrappedComponentRef"]);return r.a.createElement(c.a,{render:function(t){return r.a.createElement(e,d({},a,t,{ref:n}))}})};return t.displayName="withRouter("+(e.displayName||e.name)+")",t.WrappedComponent=e,t.propTypes={wrappedComponentRef:l.a.func},u()(t,e)};t.a=p},205:function(e,t,n){!function(t,n){e.exports=n()}(0,function(){"use strict";var e={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n=Object.defineProperty,o=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,r=Object.getOwnPropertyDescriptor,i=Object.getPrototypeOf,l=i&&i(Object);return function s(u,c,d){if("string"!=typeof c){if(l){var p=i(c);p&&p!==l&&s(u,p,d)}var f=o(c);a&&(f=f.concat(a(c)));for(var h=0;h<f.length;++h){var m=f[h];if(!(e[m]||t[m]||d&&d[m])){var y=r(c,m);try{n(u,m,y)}catch(e){}}}return u}return u}})},273:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return i.default.createElement(y.default,{iconButtonElement:i.default.createElement(g.default,null,i.default.createElement(T.default,{className:"submenu-svg",style:{color:"white",fill:"white"}})),targetOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"top"}},i.default.createElement(f.default,{primaryText:"Cerrar sesion",onClick:e.onLogout}))}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=o(r),l=n(46),s=n(144),u=o(s),c=n(148),d=o(c),p=n(101),f=o(p),h=n(163),m=(o(h),n(151)),y=o(m),v=n(38),g=o(v),b=n(166),T=o(b);a.muiName="IconMenu";var w=i.default.createClass({displayName:"AdminBackofficeBar",getInitialState:function(){return{drawerOpen:!1}},getDefaultProps:function(){return{onLogout:function(){}}},closeDrawer:function(){this.setState({drawerOpen:!1})},toggleDrawer:function(){var e=!this.state.drawerOpen;this.setState({drawerOpen:e})},render:function(){var e=this;return i.default.createElement("div",null,i.default.createElement(u.default,{onLeftIconButtonTouchTap:this.toggleDrawer,iconElementRight:i.default.createElement(a,{onLogout:this.props.onLogout}),title:"Administracion HOY COMO"}),i.default.createElement(d.default,{open:this.state.drawerOpen,docked:!1,onRequestChange:function(t){return e.setState({drawerOpen:t})}},i.default.createElement(l.Link,{to:"/index",onClick:this.closeDrawer},i.default.createElement(f.default,null,"Principal")),i.default.createElement(l.Link,{to:"/shops/list",onClick:this.closeDrawer},i.default.createElement(f.default,null,"Comercios"))))}});t.default=w},274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(o),r=a.default.createClass({displayName:"AdminIndex",render:function(){return a.default.createElement("div",{className:"with-margin index"},a.default.createElement("h1",null,"Administracion de HOY COMO"),a.default.createElement("h2",null,"Configuracion y estadisticas"),a.default.createElement("p",null,"Desde aqui es posible monitorear a los usuarios registrados y comercios asociados a la aplicacion."))}});t.default=r},275:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=o(a),i=n(34),l=o(i),s=n(60),u=(o(s),n(41)),c=o(u),d=n(59),p=n(29),f=o(p),h=n(36),m=o(h),y=n(79),v=o(y),g=function(){},b=r.default.createClass({displayName:"AdminLogin",getInitialState:function(){return{username:"",password:"",errMsg:null}},getDefaultProps:function(){return{onSubmit:g}},submitForm:function(){var e=this,t=this.state.username,n=this.state.password,o=btoa(t+":"+n);(0,m.default)({method:"post",url:"/api/v1/admin/login",headers:{Authorization:"Basic "+o}}).then(function(t){console.log("Contenido:"),console.log(t.data),e.props.onSubmit(t.data.token)}).catch(function(t){console.error("Error"),e.setState({errMsg:"Credenciales invalidas"})})},handleKeyPress:function(e){"Enter"==e.key&&this.submitForm()},render:function(){var e=this,t=this.state.errMsg?r.default.createElement("p",{style:{color:"red"}},this.state.errMsg):r.default.createElement("div",null);return r.default.createElement("div",{onKeyPress:this.handleKeyPress},r.default.createElement(v.default,{title:"Admin HOY COMO"}),t,r.default.createElement(l.default,null,r.default.createElement(d.Card,null,r.default.createElement(d.CardHeader,{title:"Iniciar sesion",subtitle:"Ingrese credenciales"}),";",r.default.createElement(d.CardText,{expandable:!1},r.default.createElement(c.default,{name:"username",hint:"username",floatingLabelText:"username",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})}}),r.default.createElement("br",null),r.default.createElement(c.default,{name:"password",hintText:"Password",floatingLabelText:"Password",type:"password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}}),r.default.createElement("br",null)),r.default.createElement(d.CardActions,null,r.default.createElement(f.default,{label:"Iniciar sesion",onClick:this.submitForm})))))}});t.default=b},277:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=o(a),i=n(34),l=(o(i),n(60)),s=o(l),u=n(41),c=o(u),d=(n(59),n(80)),p=(o(d),n(29)),f=(o(p),n(45)),h=(o(f),n(81)),m=o(h),y=n(115),v=o(y),g=n(101),b=o(g),T=n(36),w=o(T),S=n(79),E=(o(S),r.default.createClass({displayName:"ShopForm",getDefaultProps:function(){return{token:""}},getInitialState:function(){return{msgSnackbarOpen:!1,name:"",address:"",phone:"",zone:1,districts:null,adminEmail:"",adminName:"",lat:"",long:""}},componentDidMount:function(){var e=this;console.log("token: "+this.props.token),w.default.get("/api/v1/districts").then(function(t){return e.setState({districts:t.data.districts})})},openSnackbar:function(e){console.log("Abriendo snack bar"),this.setState({msgSnackbarOpen:!0,snackbarMessage:e})},handleSnackbarRequestClose:function(){this.setState({msgSnackbarOpen:!1})},handleShopCreateSuccess:function(e){var t=e.shop.id;this.openSnackbar("Comercio "+t+" creado")},handleShopCreateError:function(e){this.openSnackbar(e.response.data.message)},checkFields:function(){var e=this.state,t=e.name,n=e.address,o=e.phone,a=e.zone,r=e.adminEmail,i=e.adminName,l=e.lat,s=e.long;return t&&n&&o&&a&&r&&i&&l&&s?{ok:!0}:{ok:!1,msg:"Parametros incompletos"}},createShop:function(){var e=this,t=this.checkFields();if(!t.ok)return this.openSnackbar(t.msg);var n=this.state,o=n.name,a=n.address,r=n.phone,i=n.zone,l=n.adminEmail,s=n.adminName,u=n.lat,c=n.long,d=this.state.districts.find(function(e){return e.id==i}),p={name:o,address:a,phone:r,zone:d.name,adminEmail:l,adminName:s,lat:u,long:c},f={headers:{Authorization:"Bearer "+this.props.token}};w.default.post("/api/v1/shops",p,f).then(function(t){console.log(t.data),e.handleShopCreateSuccess(t.data)}).catch(function(t){console.error(t),e.handleShopCreateError(t)})},handleZoneChange:function(e,t,n){this.setState({zone:n})},render:function(){var e=this;if(!this.state.districts)return r.default.createElement("span",null,"Espere...");var t=[];return this.state.districts.forEach(function(e){return t.push(r.default.createElement(b.default,{value:e.id,primaryText:e.name}))}),r.default.createElement("div",{style:{paddingBottom:10,backgroundColor:"rgba(255,255,255,0.7)"}},r.default.createElement("div",{style:{margin:20}},r.default.createElement("h1",null,"Nuevo comercio"),r.default.createElement("hr",null),r.default.createElement("h2",null,"Datos del comercio"),r.default.createElement(c.default,{name:"Nombre",hint:"Nombre",floatingLabelText:"Nombre",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}}),r.default.createElement("br",null),r.default.createElement(c.default,{name:"Direccion",hint:"Direccion",floatingLabelText:"Direccion",value:this.state.address,onChange:function(t){return e.setState({address:t.target.value})}}),r.default.createElement("br",null),r.default.createElement(c.default,{name:"Latitud",hint:"Latitud",floatingLabelText:"Latitud",value:this.state.lat,onChange:function(t){return e.setState({lat:t.target.value})}}),r.default.createElement(c.default,{name:"Longitud",hint:"Longitud",floatingLabelText:"Longitud",value:this.state.long,onChange:function(t){return e.setState({long:t.target.value})}}),r.default.createElement("br",null),r.default.createElement(v.default,{value:this.state.zone,onChange:this.handleZoneChange,openImmediately:!1,style:{width:200,padding:0}},t)," ",r.default.createElement("br",null),r.default.createElement(c.default,{name:"Telefono",hint:"Telefono sin guion ni espacios",floatingLabelText:"Telefono",value:this.state.phone,onChange:function(t){return e.setState({phone:t.target.value})},type:"number"}),r.default.createElement("br",null),r.default.createElement("hr",null),r.default.createElement("h2",null,"Datos del administrador del comercio"),r.default.createElement(c.default,{name:"Nombre",hint:"Nombre",floatingLabelText:"Nombre",value:this.state.adminName,onChange:function(t){return e.setState({adminName:t.target.value})}}),r.default.createElement("br",null),r.default.createElement(c.default,{name:"Email",hint:"Email",floatingLabelText:"Email",value:this.state.adminEmail,onChange:function(t){return e.setState({adminEmail:t.target.value})}}),r.default.createElement("br",null),r.default.createElement(s.default,{style:{marginTop:20},label:"Crear comercio",onClick:this.createShop,secondary:!0})),r.default.createElement(m.default,{open:this.state.msgSnackbarOpen,message:this.state.snackbarMessage,autoHideDuration:3e3,onRequestClose:this.handleSnackbarRequestClose}))}}));t.default=E},278:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){function t(){var t=e.shop.id;e.shop.enabled=!1,(0,k.default)({url:"/api/v1/shops/"+t,method:"PUT",headers:{Authorization:"Bearer "+e.token},data:e.shop}).then(function(t){console.log(t.data),e.onSuccess()}).catch(function(t){console.error(t),e.onError()})}var n=[i.default.createElement(f.default,{label:"Cancelar",primary:!0,onClick:e.onClose}),i.default.createElement(f.default,{label:"Prohibir",primary:!0,onClick:t})];return i.default.createElement(m.default,{title:"Prohibir comercio "+e.shop.id,actions:n,modal:!0,open:e.open},"Desea Prohibir el comercio?")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=o(r),l=n(34),s=(o(l),n(60)),u=(o(s),n(41)),c=(o(u),n(59)),d=n(80),p=(o(d),n(29)),f=o(p),h=n(45),m=o(h),y=n(81),v=o(y),g=n(46),b=n(415),T=o(b),w=n(449),S=o(w),E=n(36),k=o(E),x=n(79),C=(o(x),n(303)),O=o(C),M=i.default.createClass({displayName:"ShopList",getDefaultProps:function(){return{token:""}},getInitialState:function(){return{shops:[],errSnackbarOpen:!1,banShop:null,shopMenu:null}},loadShops:function(){var e=this;k.default.get("/api/v1/shops?token="+this.props.token).then(function(t){var n=t.data.shops;console.log("loadShops shops: "+n),console.log("shops:"),console.log(n),e.setState({shops:n})}).catch(function(t){console.error(t),e.openErrSnackbar("Error al obtener los comercios")})},componentDidMount:function(){console.log("token: "+this.props.token),this.loadShops(),console.log("ShopList DID MOUNT")},openErrSnackbar:function(e){console.log("Abriendo snack bar"),this.setState({errSnackbarOpen:!0,errSnackbarMessage:e})},handleErrSnackbarRequestClose:function(){this.setState({errSnackbarOpen:!1})},closeBanDialog:function(e){var t=this;return function(){t.setState({banShop:null})}},openBanDialog:function(e){var t=this;return function(){var n=e.id||e;t.setState({banShop:n})}},handleShopBanSuccess:function(e){var t=this;return function(){t.closeBanDialog(e)(),t.loadShops(),t.openErrSnackbar("Comercio baneado")}},enableShop:function(e){var t=this;return e.enabled=!0,function(){(0,k.default)({url:"/api/v1/shops/"+e.id,method:"PUT",headers:{Authorization:"Bearer "+t.props.token},data:e}).then(t.loadShops).catch(function(e){console.error(e),t.openErrSnackbar("Error al habilitar comercio")})}},showMenu:function(e){var t=this;return function(){(0,k.default)({url:"/api/v1/shops/"+e.id+"/menu",method:"GET",headers:{Authorization:"Bearer "+t.props.token}}).then(function(e){console.log("showMenu axios response: "),console.log(e.data),t.setState({shopMenu:e.data.menu})}).catch(function(e){console.error(e),t.openErrSnackbar("Error al obtener menu de comercio")})}},handleMenuClose:function(){this.setState({shopMenu:null})},render:function(){var e=this;if(console.log("this.state.shops: "+this.state.shops),0==this.state.shops.length)return i.default.createElement("div",null,"No hay comercios...");var t=null;if(this.state.banShop){console.log("Creando dialogo de baneo");var n=this.state.shops.find(function(t){return t.id==e.state.banShop});t=i.default.createElement(a,{shop:n,token:this.props.token,open:!0,onSuccess:this.handleShopBanSuccess(n),onClose:this.closeBanDialog(n),onError:function(){return e.openErrSnackbar("Error al Prohibir el comercio "+n.id)}})}var o=null;this.state.shopMenu&&(o=i.default.createElement(O.default,{menu:this.state.shopMenu,goBack:this.handleMenuClose}));var r=this.state.shops.map(function(t){var n=t.initdone,o=t.validone,a="Registro pendiente";return n&&(a="Validacion pendiente"),o&&(a="Publicado"),i.default.createElement(c.Card,{style:{backgroundColor:"rgba(255,255,255,0.8)",margin:10}},i.default.createElement(c.CardHeader,{title:"Comercio "+t.id,subtitle:t.name}),i.default.createElement(c.CardText,{expandable:!1},i.default.createElement("p",null,i.default.createElement("strong",null,"Nombre"),": ",t.name," "),i.default.createElement("p",null,i.default.createElement("strong",null,"Direccion"),": ",t.address," "),i.default.createElement("p",null,i.default.createElement("strong",null,"Barrio"),": ",t.zone," "),i.default.createElement("p",null,i.default.createElement("strong",null,"Telefono"),": ",t.phone," "),i.default.createElement("p",null,i.default.createElement("strong",null,"Estado"),": ",a)),i.default.createElement(c.CardActions,null,i.default.createElement(f.default,{label:"Prohibir",secondary:!0,disabled:!t.enabled,onClick:e.openBanDialog(t)}),i.default.createElement(f.default,{label:"Habilitar",disabled:t.enabled,onClick:e.enableShop(t)}),i.default.createElement(f.default,{label:"Menu",onClick:e.showMenu(t)})))}),l=t||o||r;return i.default.createElement("div",null,i.default.createElement(g.Link,{to:"/shops/create"},i.default.createElement(T.default,{secondary:!0,style:{position:"fixed",zIndex:1,bottom:"5%",right:"5%"}},i.default.createElement(S.default,null))),l,i.default.createElement(v.default,{open:this.state.errSnackbarOpen,message:this.state.errSnackbarMessage,autoHideDuration:3e3,onRequestClose:this.handleErrSnackbarRequestClose}))}});t.default=M},300:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=o(a),i=n(29),l=o(i),s=function(e){e.title;return r.default.createElement("div",{style:{color:"white",backgroundColor:"rgb(0, 188, 212)",transition:"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms",boxSizing:"border-box",fontFamily:"Roboto, sans-serif",borderRadius:"0px",position:"relative",zIndex:1100,width:"100%",display:"flex",paddingLeft:"24px",paddingRight:"24px"}},r.default.createElement(l.default,{style:{color:"white"},label:"Volver",onClick:e.onClick}))};t.default=s},301:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=o(a),i=n(15),l=o(i),s=n(46),u=n(34),c=o(u),d=n(36),p=(o(d),n(273)),f=o(p),h=n(274),m=o(h),y=n(275),v=o(y),g=n(278),b=o(g),T=n(277),w=o(T);(0,o(n(82)).default)(),console.log("Parseando cookie "+document.cookie);var S=document.cookie||"",E=S.split("; ").find(function(e){return e.startsWith("token=")}),k=E?E.replace("token=",""):null,x=r.default.createClass({displayName:"AdminBackoffice",getInitialState:function(){return{token:null,user:null,renderReady:!1}},componentDidMount:function(){console.log("AdminBackoffice MONTADA!"),k?this.setToken(k):this.setState({renderReady:!0})},setToken:function(e){e=e.token||e,console.log("Seteando token: "+e),this.setState({token:e,renderReady:!0})},render:function(){var e=this;console.log("RENDERING AdminBackoffice!");var t=this.state.token;return t?(console.log("window.location.hash: "+window.location.hash),"#/"==window.location.hash&&(console.log("REPLACING LOCATION"),window.location.replace("/admin#/index")),r.default.createElement(c.default,null,r.default.createElement("div",null,r.default.createElement(f.default,{onLogout:function(){return e.logoutForm.submit()}}),r.default.createElement(s.Route,{path:"/index",component:m.default}),r.default.createElement(s.Route,{path:"/shops/list",component:function(){return r.default.createElement(b.default,{token:t})}}),r.default.createElement(s.Route,{path:"/shops/create",component:function(){return r.default.createElement(w.default,{token:t})}}),r.default.createElement("form",{action:"/admin/logout",method:"POST",ref:function(t){return e.logoutForm=t},style:{display:"hidden"}})))):r.default.createElement(v.default,{onSubmit:this.setToken})}});l.default.render(r.default.createElement(s.HashRouter,null,r.default.createElement(x,null)),document.getElementById("root"))},303:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.menu,n=t.map(function(e){var t=e.dish;return i.default.createElement(c.Card,{style:{backgroundColor:"rgba(255,255,255,0.7)"}},i.default.createElement(c.CardHeader,{title:"Plato "+t.id,subtitle:t.name}),i.default.createElement(c.CardText,{expandable:!1},i.default.createElement("p",null,i.default.createElement("strong",null,"Descripcion:")," ",t.description," "),i.default.createElement("p",null,i.default.createElement("strong",null,"Costo:")," ",t.cost," ")))});return i.default.createElement("div",null,i.default.createElement(y.default,{onClick:e.goBack}),n)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=o(r),l=n(34),s=(o(l),n(60)),u=(o(s),n(41)),c=(o(u),n(59)),d=n(80),p=(o(d),n(29)),f=(o(p),n(45)),h=(o(f),n(81)),m=(o(h),n(300)),y=o(m);t.default=a},31:function(e,t,n){"use strict";t.__esModule=!0;var o=(t.addLeadingSlash=function(e){return"/"===e.charAt(0)?e:"/"+e},t.stripLeadingSlash=function(e){return"/"===e.charAt(0)?e.substr(1):e},t.hasBasename=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)});t.stripBasename=function(e,t){return o(e,t)?e.substr(t.length):e},t.stripTrailingSlash=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},t.parsePath=function(e){var t=e||"/",n="",o="",a=t.indexOf("#");-1!==a&&(o=t.substr(a),t=t.substr(0,a));var r=t.indexOf("?");return-1!==r&&(n=t.substr(r),t=t.substr(0,r)),{pathname:t,search:"?"===n?"":n,hash:"#"===o?"":o}},t.createPath=function(e){var t=e.pathname,n=e.search,o=e.hash,a=t||"/";return n&&"?"!==n&&(a+="?"===n.charAt(0)?n:"?"+n),o&&"#"!==o&&(a+="#"===o.charAt(0)?o:"#"+o),a}},32:function(e,t,n){"use strict";n.d(t,"d",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"f",function(){return r}),n.d(t,"g",function(){return i}),n.d(t,"e",function(){return l}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return u});var o=function(e){return"/"===e.charAt(0)?e:"/"+e},a=function(e){return"/"===e.charAt(0)?e.substr(1):e},r=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)},i=function(e,t){return r(e,t)?e.substr(t.length):e},l=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},s=function(e){var t=e||"/",n="",o="",a=t.indexOf("#");-1!==a&&(o=t.substr(a),t=t.substr(0,a));var r=t.indexOf("?");return-1!==r&&(n=t.substr(r),t=t.substr(0,r)),{pathname:t,search:"?"===n?"":n,hash:"#"===o?"":o}},u=function(e){var t=e.pathname,n=e.search,o=e.hash,a=t||"/";return n&&"?"!==n&&(a+="?"===n.charAt(0)?n:"?"+n),o&&"#"!==o&&(a+="#"===o.charAt(0)?o:"#"+o),a}},37:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return s});var o=n(99),a=n(100),r=n(32),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=function(e,t,a,l){var s=void 0;"string"==typeof e?(s=n.i(r.a)(e),s.state=t):(s=i({},e),void 0===s.pathname&&(s.pathname=""),s.search?"?"!==s.search.charAt(0)&&(s.search="?"+s.search):s.search="",s.hash?"#"!==s.hash.charAt(0)&&(s.hash="#"+s.hash):s.hash="",void 0!==t&&void 0===s.state&&(s.state=t));try{s.pathname=decodeURI(s.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+s.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return a&&(s.key=a),l?s.pathname?"/"!==s.pathname.charAt(0)&&(s.pathname=n.i(o.default)(s.pathname,l.pathname)):s.pathname=l.pathname:s.pathname||(s.pathname="/"),s},s=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&n.i(a.default)(e.state,t.state)}},414:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=t.muiTheme.floatingActionButton,o=e.backgroundColor||n.color,a=n.iconColor;return e.disabled?(o=e.disabledColor||n.disabledColor,a=n.disabledTextColor):e.secondary&&(o=n.secondaryColor,a=n.secondaryIconColor),{root:{transition:C.default.easeOut(),display:"inline-block",backgroundColor:"transparent"},container:{backgroundColor:o,transition:C.default.easeOut(),height:n.buttonSize,width:n.buttonSize,padding:0,overflow:"hidden",borderRadius:"50%",textAlign:"center",verticalAlign:"bottom"},containerWhenMini:{height:n.miniSize,width:n.miniSize},overlay:{transition:C.default.easeOut(),top:0},overlayWhenHovered:{backgroundColor:(0,O.fade)(a,.4)},icon:{height:n.buttonSize,lineHeight:n.buttonSize+"px",fill:a,color:a},iconWhenMini:{height:n.miniSize,lineHeight:n.miniSize+"px"}}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=o(r),l=n(9),s=o(l),u=n(4),c=o(u),d=n(2),p=o(d),f=n(3),h=o(f),m=n(6),y=o(m),v=n(5),g=o(v),b=n(7),T=o(b),w=n(0),S=o(w),E=n(1),k=o(E),x=n(12),C=o(x),O=n(69),M=n(53),_=o(M),R=n(237),P=o(R),L=n(22),j=o(L),D=n(241),A=n(10),I=(o(A),n(21)),N=(o(I),function(e){function t(){var e,n,o,r;(0,p.default)(this,t);for(var i=arguments.length,l=Array(i),s=0;s<i;s++)l[s]=arguments[s];return n=o=(0,y.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(l))),o.state={hovered:!1,touch:!1,zDepth:void 0},o.handleMouseDown=function(e){0===e.button&&o.setState({zDepth:o.props.zDepth+1}),o.props.onMouseDown&&o.props.onMouseDown(e)},o.handleMouseUp=function(e){o.setState({zDepth:o.props.zDepth}),o.props.onMouseUp&&o.props.onMouseUp(e)},o.handleMouseLeave=function(e){o.refs.container.isKeyboardFocused()||o.setState({zDepth:o.props.zDepth,hovered:!1}),o.props.onMouseLeave&&o.props.onMouseLeave(e)},o.handleMouseEnter=function(e){o.refs.container.isKeyboardFocused()||o.state.touch||o.setState({hovered:!0}),o.props.onMouseEnter&&o.props.onMouseEnter(e)},o.handleTouchStart=function(e){o.setState({touch:!0,zDepth:o.props.zDepth+1}),o.props.onTouchStart&&o.props.onTouchStart(e)},o.handleTouchEnd=function(e){o.setState({touch:!0,zDepth:o.props.zDepth}),o.props.onTouchEnd&&o.props.onTouchEnd(e)},o.handleKeyboardFocus=function(e,t){t&&!o.props.disabled?(o.setState({zDepth:o.props.zDepth+1}),o.refs.overlay.style.backgroundColor=(0,O.fade)(a(o.props,o.context).icon.color,.4)):o.state.hovered||(o.setState({zDepth:o.props.zDepth}),o.refs.overlay.style.backgroundColor="transparent")},r=n,(0,y.default)(o,r)}return(0,g.default)(t,e),(0,h.default)(t,[{key:"componentWillMount",value:function(){this.setState({zDepth:this.props.disabled?0:this.props.zDepth})}},{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t={};e.disabled!==this.props.disabled&&(t.zDepth=e.disabled?0:this.props.zDepth),e.disabled&&(t.hovered=!1),this.setState(t)}},{key:"render",value:function(){var e=this.props,t=(e.backgroundColor,e.className),n=e.children,o=e.disabled,r=(e.disabledColor,e.mini),l=(e.secondary,e.iconStyle),u=e.iconClassName,c=(e.zDepth,(0,s.default)(e,["backgroundColor","className","children","disabled","disabledColor","mini","secondary","iconStyle","iconClassName","zDepth"])),d=this.context.muiTheme.prepareStyles,p=a(this.props,this.context),f=void 0;u&&(f=S.default.createElement(P.default,{className:u,style:(0,T.default)({},p.icon,r&&p.iconWhenMini,l)}));var h=void 0;n&&(h=(0,D.extendChildren)(n,function(e){return{style:(0,T.default)({},p.icon,r&&p.iconWhenMini,l,e.props.style)}}));var m=o?null:{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseEnter:this.handleMouseEnter,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onKeyboardFocus:this.handleKeyboardFocus};return S.default.createElement(j.default,{className:t,style:(0,T.default)(p.root,this.props.style),zDepth:this.state.zDepth,circle:!0},S.default.createElement(_.default,(0,i.default)({},c,m,{ref:"container",disabled:o,style:(0,T.default)(p.container,this.props.mini&&p.containerWhenMini,l),focusRippleColor:p.icon.color,touchRippleColor:p.icon.color}),S.default.createElement("div",{ref:"overlay",style:d((0,T.default)(p.overlay,this.state.hovered&&!this.props.disabled&&p.overlayWhenHovered))},f,h)))}}]),t}(w.Component));N.defaultProps={disabled:!1,mini:!1,secondary:!1,zDepth:2},N.contextTypes={muiTheme:k.default.object.isRequired},N.propTypes={},t.default=N},415:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(414),a=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=a.default},449:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=o(a),i=n(20),l=o(i),s=n(19),u=o(s),c=function(e){return r.default.createElement(u.default,e,r.default.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}))};c=(0,l.default)(c),c.displayName="ContentAdd",c.muiName="SvgIcon",t.default=c},45:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(146),a=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=a.default},46:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(189);n.d(t,"BrowserRouter",function(){return o.a});var a=n(190);n.d(t,"HashRouter",function(){return a.a});var r=n(94);n.d(t,"Link",function(){return r.a});var i=n(191);n.d(t,"MemoryRouter",function(){return i.a});var l=n(192);n.d(t,"NavLink",function(){return l.a});var s=n(193);n.d(t,"Prompt",function(){return s.a});var u=n(194);n.d(t,"Redirect",function(){return u.a});var c=n(95);n.d(t,"Route",function(){return c.a});var d=n(55);n.d(t,"Router",function(){return d.a});var p=n(195);n.d(t,"StaticRouter",function(){return p.a});var f=n(196);n.d(t,"Switch",function(){return f.a});var h=n(197);n.d(t,"matchPath",function(){return h.a});var m=n(198);n.d(t,"withRouter",function(){return m.a})},50:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.locationsAreEqual=t.createLocation=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=n(99),i=o(r),l=n(100),s=o(l),u=n(31);t.createLocation=function(e,t,n,o){var r=void 0;"string"==typeof e?(r=(0,u.parsePath)(e),r.state=t):(r=a({},e),void 0===r.pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==t&&void 0===r.state&&(r.state=t));try{r.pathname=decodeURI(r.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(r.key=n),o?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=(0,i.default)(r.pathname,o.pathname)):r.pathname=o.pathname:r.pathname||(r.pathname="/"),r},t.locationsAreEqual=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&(0,s.default)(e.state,t.state)}},51:function(e,t,n){"use strict";t.__esModule=!0;var o=n(10),a=function(e){return e&&e.__esModule?e:{default:e}}(o),r=function(){var e=null,t=function(t){return(0,a.default)(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},n=function(t,n,o,r){if(null!=e){var i="function"==typeof e?e(t,n):e;"string"==typeof i?"function"==typeof o?o(i,r):((0,a.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),r(!0)):r(!1!==i)}else r(!0)},o=[];return{setPrompt:t,confirmTransitionTo:n,appendListener:function(e){var t=!0,n=function(){t&&e.apply(void 0,arguments)};return o.push(n),function(){t=!1,o=o.filter(function(e){return e!==n})}},notifyListeners:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.forEach(function(e){return e.apply(void 0,t)})}}};t.default=r},52:function(e,t,n){"use strict";var o=n(10),a=n.n(o),r=function(){var e=null,t=function(t){return a()(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},n=function(t,n,o,r){if(null!=e){var i="function"==typeof e?e(t,n):e;"string"==typeof i?"function"==typeof o?o(i,r):(a()(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),r(!0)):r(!1!==i)}else r(!0)},o=[];return{setPrompt:t,confirmTransitionTo:n,appendListener:function(e){var t=!0,n=function(){t&&e.apply(void 0,arguments)};return o.push(n),function(){t=!1,o=o.filter(function(e){return e!==n})}},notifyListeners:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.forEach(function(e){return e.apply(void 0,t)})}}};t.a=r},55:function(e,t,n){"use strict";var o=n(56);t.a=o.a},56:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(10),l=n.n(i),s=n(16),u=n.n(s),c=n(0),d=n.n(c),p=n(1),f=n.n(p),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},m=function(e){function t(){var n,r,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=r=a(this,e.call.apply(e,[this].concat(s))),r.state={match:r.computeMatch(r.props.history.location.pathname)},i=n,a(r,i)}return r(t,e),t.prototype.getChildContext=function(){return{router:h({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,o=t.history;u()(null==n||1===d.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=o.listen(function(){e.setState({match:e.computeMatch(o.location.pathname)})})},t.prototype.componentWillReceiveProps=function(e){l()(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?d.a.Children.only(e):null},t}(d.a.Component);m.propTypes={history:f.a.object.isRequired,children:f.a.node},m.contextTypes={router:f.a.object},m.childContextTypes={router:f.a.object.isRequired},t.a=m},57:function(e,t,n){"use strict";var o=n(170),a=n.n(o),r={},i=0,l=function(e,t){var n=""+t.end+t.strict+t.sensitive,o=r[n]||(r[n]={});if(o[e])return o[e];var l=[],s=a()(e,l,t),u={re:s,keys:l};return i<1e4&&(o[e]=u,i++),u},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof t&&(t={path:t});var n=t,o=n.path,a=void 0===o?"/":o,r=n.exact,i=void 0!==r&&r,s=n.strict,u=void 0!==s&&s,c=n.sensitive,d=void 0!==c&&c,p=l(a,{end:i,strict:u,sensitive:d}),f=p.re,h=p.keys,m=f.exec(e);if(!m)return null;var y=m[0],v=m.slice(1),g=e===y;return i&&!g?null:{path:a,url:"/"===a&&""===y?"/":y,isExact:g,params:h.reduce(function(e,t,n){return e[t.name]=v[n],e},{})}};t.a=s},80:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(145),a=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=a.default},81:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(152),a=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=a.default},87:function(e,t,n){"use strict";t.__esModule=!0;t.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),t.addEventListener=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},t.removeEventListener=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},t.getConfirmation=function(e,t){return t(window.confirm(e))},t.supportsHistory=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},t.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},t.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},t.isExtraneousPopstateEvent=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}},88:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"e",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return s}),n.d(t,"b",function(){return u}),n.d(t,"h",function(){return c});var o=!("undefined"==typeof window||!window.document||!window.document.createElement),a=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},r=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},i=function(e,t){return t(window.confirm(e))},l=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},s=function(){return-1===window.navigator.userAgent.indexOf("Trident")},u=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},c=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}},94:function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(0),s=n.n(l),u=n(1),c=n.n(u),d=n(16),p=n.n(d),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},h=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},m=function(e){function t(){var n,o,i;a(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=o=r(this,e.call.apply(e,[this].concat(s))),o.handleClick=function(e){if(o.props.onClick&&o.props.onClick(e),!e.defaultPrevented&&0===e.button&&!o.props.target&&!h(e)){e.preventDefault();var t=o.context.router.history,n=o.props,a=n.replace,r=n.to;a?t.replace(r):t.push(r)}},i=n,r(o,i)}return i(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,a=o(e,["replace","to","innerRef"]);p()(this.context.router,"You should not use <Link> outside a <Router>");var r=this.context.router.history.createHref("string"==typeof t?{pathname:t}:t);return s.a.createElement("a",f({},a,{onClick:this.handleClick,href:r,ref:n}))},t}(s.a.Component);m.propTypes={onClick:c.a.func,target:c.a.string,replace:c.a.bool,to:c.a.oneOfType([c.a.string,c.a.object]).isRequired,innerRef:c.a.oneOfType([c.a.string,c.a.func])},m.defaultProps={replace:!1},m.contextTypes={router:c.a.shape({history:c.a.shape({push:c.a.func.isRequired,replace:c.a.func.isRequired,createHref:c.a.func.isRequired}).isRequired}).isRequired},t.a=m},95:function(e,t,n){"use strict";var o=n(96);t.a=o.a},96:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(10),l=n.n(i),s=n(16),u=n.n(s),c=n(0),d=n.n(c),p=n(1),f=n.n(p),h=n(57),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},y=function(e){return 0===d.a.Children.count(e)},v=function(e){function t(){var n,r,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=r=a(this,e.call.apply(e,[this].concat(s))),r.state={match:r.computeMatch(r.props,r.context.router)},i=n,a(r,i)}return r(t,e),t.prototype.getChildContext=function(){return{router:m({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var o=e.computedMatch,a=e.location,r=e.path,i=e.strict,l=e.exact,s=e.sensitive;if(o)return o;u()(t,"You should not use <Route> or withRouter() outside a <Router>");var c=t.route,d=(a||c.location).pathname;return r?n.i(h.a)(d,{path:r,strict:i,exact:l,sensitive:s}):c.match},t.prototype.componentWillMount=function(){l()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),l()(!(this.props.component&&this.props.children&&!y(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),l()(!(this.props.render&&this.props.children&&!y(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){l()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),l()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,o=t.component,a=t.render,r=this.context.router,i=r.history,l=r.route,s=r.staticContext,u=this.props.location||l.location,c={match:e,location:u,history:i,staticContext:s};return o?e?d.a.createElement(o,c):null:a?e?a(c):null:n?"function"==typeof n?n(c):y(n)?null:d.a.Children.only(n):null},t}(d.a.Component);v.propTypes={computedMatch:f.a.object,path:f.a.string,exact:f.a.bool,strict:f.a.bool,sensitive:f.a.bool,component:f.a.func,render:f.a.func,children:f.a.oneOfType([f.a.func,f.a.node]),location:f.a.object},v.contextTypes={router:f.a.shape({history:f.a.object.isRequired,route:f.a.object.isRequired,staticContext:f.a.object})},v.childContextTypes={router:f.a.object.isRequired},t.a=v},99:function(e,t,n){"use strict";function o(e){return"/"===e.charAt(0)}function a(e,t){for(var n=t,o=n+1,a=e.length;o<a;n+=1,o+=1)e[n]=e[o];e.pop()}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],r=t&&t.split("/")||[],i=e&&o(e),l=t&&o(t),s=i||l;if(e&&o(e)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var u=void 0;if(r.length){var c=r[r.length-1];u="."===c||".."===c||""===c}else u=!1;for(var d=0,p=r.length;p>=0;p--){var f=r[p];"."===f?a(r,p):".."===f?(a(r,p),d++):d&&(a(r,p),d--)}if(!s)for(;d--;d)r.unshift("..");!s||""===r[0]||r[0]&&o(r[0])||r.unshift("");var h=r.join("/");return u&&"/"!==h.substr(-1)&&(h+="/"),h}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}},[301]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYWRtaW5iYWNrb2ZmaWNlLmJ1bmRsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3ZhbHVlLWVxdWFsL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbWF0ZXJpYWwtdWkvUG9wb3Zlci9Qb3BvdmVyQW5pbWF0aW9uVmVydGljYWwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYXRlcmlhbC11aS9Ecm9wRG93bk1lbnUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9oaXN0b3J5L2NyZWF0ZUJyb3dzZXJIaXN0b3J5LmpzIiwid2VicGFjazovLy8uL34vaGlzdG9yeS9jcmVhdGVIYXNoSGlzdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9+L2hpc3RvcnkvY3JlYXRlTWVtb3J5SGlzdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9+L2hpc3RvcnkvZXMvY3JlYXRlQnJvd3Nlckhpc3RvcnkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9oaXN0b3J5L2VzL2NyZWF0ZUhhc2hIaXN0b3J5LmpzIiwid2VicGFjazovLy8uL34vaGlzdG9yeS9lcy9jcmVhdGVNZW1vcnlIaXN0b3J5LmpzIiwid2VicGFjazovLy8uL34vbWF0ZXJpYWwtdWkvQXBwQmFyL0FwcEJhci5qcyIsIndlYnBhY2s6Ly8vLi9+L21hdGVyaWFsLXVpL0FwcEJhci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L21hdGVyaWFsLXVpL0NoZWNrYm94L0NoZWNrYm94LmpzIiwid2VicGFjazovLy8uL34vbWF0ZXJpYWwtdWkvRGlhbG9nL0RpYWxvZy5qcyIsIndlYnBhY2s6Ly8vLi9+L21hdGVyaWFsLXVpL0RyYXdlci9EcmF3ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYXRlcmlhbC11aS9EcmF3ZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYXRlcmlhbC11aS9Ecm9wRG93bk1lbnUvRHJvcERvd25NZW51LmpzIiwid2VicGFjazovLy8uL34vbWF0ZXJpYWwtdWkvSWNvbk1lbnUvSWNvbk1lbnUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYXRlcmlhbC11aS9JY29uTWVudS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L21hdGVyaWFsLXVpL1NuYWNrYmFyL1NuYWNrYmFyLmpzIiwid2VicGFjazovLy8uL34vbWF0ZXJpYWwtdWkvU25hY2tiYXIvU25hY2tiYXJCb2R5LmpzIiwid2VicGFjazovLy8uL34vbWF0ZXJpYWwtdWkvaW50ZXJuYWwvQmVmb3JlQWZ0ZXJXcmFwcGVyLmpzIiwid2VicGFjazovLy8uL34vbWF0ZXJpYWwtdWkvaW50ZXJuYWwvQ2xlYXJGaXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYXRlcmlhbC11aS9pbnRlcm5hbC9FbmhhbmNlZFN3aXRjaC5qcyIsIndlYnBhY2s6Ly8vLi9+L2ludmFyaWFudC9icm93c2VyLmpzIiwid2VicGFjazovLy8uL34vbWF0ZXJpYWwtdWkvc3ZnLWljb25zL25hdmlnYXRpb24tYXJyb3ctZHJvcC1yaWdodC5qcyIsIndlYnBhY2s6Ly8vLi9+L21hdGVyaWFsLXVpL3N2Zy1pY29ucy9uYXZpZ2F0aW9uL2Fycm93LWRyb3AtZG93bi5qcyIsIndlYnBhY2s6Ly8vLi9+L21hdGVyaWFsLXVpL3N2Zy1pY29ucy9uYXZpZ2F0aW9uL21lbnUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYXRlcmlhbC11aS9zdmctaWNvbnMvbmF2aWdhdGlvbi9tb3JlLXZlcnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYXRlcmlhbC11aS9zdmctaWNvbnMvdG9nZ2xlL2NoZWNrLWJveC1vdXRsaW5lLWJsYW5rLmpzIiwid2VicGFjazovLy8uL34vbWF0ZXJpYWwtdWkvc3ZnLWljb25zL3RvZ2dsZS9jaGVjay1ib3guanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYXRlcmlhbC11aS91dGlscy93aXRoV2lkdGguanMiLCJ3ZWJwYWNrOi8vLy4vfi9wYXRoLXRvLXJlZ2V4cC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3BhdGgtdG8tcmVnZXhwL34vaXNhcnJheS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvQnJvd3NlclJvdXRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvSGFzaFJvdXRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvTWVtb3J5Um91dGVyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyLWRvbS9lcy9OYXZMaW5rLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyLWRvbS9lcy9Qcm9tcHQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yb3V0ZXItZG9tL2VzL1JlZGlyZWN0LmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyLWRvbS9lcy9TdGF0aWNSb3V0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yb3V0ZXItZG9tL2VzL1N3aXRjaC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvbWF0Y2hQYXRoLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyLWRvbS9lcy93aXRoUm91dGVyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyL2VzL01lbW9yeVJvdXRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXJvdXRlci9lcy9Qcm9tcHQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yb3V0ZXIvZXMvUmVkaXJlY3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yb3V0ZXIvZXMvU3RhdGljUm91dGVyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyL2VzL1N3aXRjaC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXJvdXRlci9lcy93aXRoUm91dGVyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyL34vaG9pc3Qtbm9uLXJlYWN0LXN0YXRpY3MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9BZG1pbkJhY2tvZmZpY2VCYXIuanMiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9BZG1pbkluZGV4LmpzIiwid2VicGFjazovLy8uL2NvbXBvbmVudHMvQWRtaW5Mb2dpbi5qcyIsIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL1Nob3BGb3JtLmpzIiwid2VicGFjazovLy8uL2NvbXBvbmVudHMvU2hvcExpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9BY3Rpb25IZWFkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9BZG1pbkJhY2tvZmZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9TaG9wTWVudS5qcyIsIndlYnBhY2s6Ly8vLi9+L2hpc3RvcnkvUGF0aFV0aWxzLmpzIiwid2VicGFjazovLy8uL34vaGlzdG9yeS9lcy9QYXRoVXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9oaXN0b3J5L2VzL0xvY2F0aW9uVXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYXRlcmlhbC11aS9GbG9hdGluZ0FjdGlvbkJ1dHRvbi9GbG9hdGluZ0FjdGlvbkJ1dHRvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L21hdGVyaWFsLXVpL0Zsb2F0aW5nQWN0aW9uQnV0dG9uL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbWF0ZXJpYWwtdWkvc3ZnLWljb25zL2NvbnRlbnQvYWRkLmpzIiwid2VicGFjazovLy8uL34vbWF0ZXJpYWwtdWkvRGlhbG9nL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vaGlzdG9yeS9Mb2NhdGlvblV0aWxzLmpzIiwid2VicGFjazovLy8uL34vaGlzdG9yeS9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2hpc3RvcnkvZXMvY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yb3V0ZXItZG9tL2VzL1JvdXRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXJvdXRlci9lcy9Sb3V0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yb3V0ZXIvZXMvbWF0Y2hQYXRoLmpzIiwid2VicGFjazovLy8uL34vbWF0ZXJpYWwtdWkvQ2hlY2tib3gvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYXRlcmlhbC11aS9TbmFja2Jhci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2hpc3RvcnkvRE9NVXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9oaXN0b3J5L2VzL0RPTVV0aWxzLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyLWRvbS9lcy9MaW5rLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyLWRvbS9lcy9Sb3V0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXJvdXRlci9lcy9Sb3V0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3Jlc29sdmUtcGF0aG5hbWUvaW5kZXguanMiXSwibmFtZXMiOlsid2VicGFja0pzb25wIiwiMTAwIiwibW9kdWxlIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJ2YWx1ZUVxdWFsIiwiYSIsImIiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJldmVyeSIsIml0ZW0iLCJpbmRleCIsImFUeXBlIiwiX3R5cGVvZiIsImFWYWx1ZSIsInZhbHVlT2YiLCJiVmFsdWUiLCJhS2V5cyIsIk9iamVjdCIsImtleXMiLCJiS2V5cyIsImtleSIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm9iaiIsImNvbnN0cnVjdG9yIiwicHJvdG90eXBlIiwiMTA3IiwiZXhwb3J0cyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImdldFN0eWxlcyIsInByb3BzIiwiY29udGV4dCIsInN0YXRlIiwidGFyZ2V0T3JpZ2luIiwib3BlbiIsIm11aVRoZW1lIiwiaG9yaXpvbnRhbCIsInJlcGxhY2UiLCJyb290IiwicG9zaXRpb24iLCJ6SW5kZXgiLCJwb3BvdmVyIiwib3BhY2l0eSIsInRyYW5zZm9ybSIsInRyYW5zZm9ybU9yaWdpbiIsInZlcnRpY2FsIiwidHJhbnNpdGlvbiIsIl90cmFuc2l0aW9uczIiLCJlYXNlT3V0IiwibWF4SGVpZ2h0IiwiX2dldFByb3RvdHlwZU9mIiwiX2dldFByb3RvdHlwZU9mMiIsIl9jbGFzc0NhbGxDaGVjazIiLCJfY2xhc3NDYWxsQ2hlY2szIiwiX2NyZWF0ZUNsYXNzMiIsIl9jcmVhdGVDbGFzczMiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMiLCJfaW5oZXJpdHMyIiwiX2luaGVyaXRzMyIsIl9zaW1wbGVBc3NpZ24iLCJfc2ltcGxlQXNzaWduMiIsIl9yZWFjdCIsIl9yZWFjdDIiLCJfcHJvcFR5cGVzIiwiX3Byb3BUeXBlczIiLCJfUGFwZXIiLCJfUGFwZXIyIiwiX3RyYW5zaXRpb25zIiwiX3Byb3BUeXBlczMiLCJQb3BvdmVyQW5pbWF0aW9uVmVydGljYWwiLCJfQ29tcG9uZW50IiwiX3JlZiIsIl90ZW1wIiwiX3RoaXMiLCJfcmV0IiwidGhpcyIsIl9sZW4iLCJhcmd1bWVudHMiLCJhcmdzIiwiX2tleSIsIl9fcHJvdG9fXyIsImNhbGwiLCJhcHBseSIsImNvbmNhdCIsInNldFN0YXRlIiwibmV4dFByb3BzIiwiX3Byb3BzIiwiY2xhc3NOYW1lIiwic3R5bGUiLCJ6RGVwdGgiLCJzdHlsZXMiLCJjcmVhdGVFbGVtZW50IiwiY2hpbGRyZW4iLCJDb21wb25lbnQiLCJkZWZhdWx0UHJvcHMiLCJjb250ZXh0VHlwZXMiLCJvYmplY3QiLCJpc1JlcXVpcmVkIiwicHJvcFR5cGVzIiwiMTE1IiwiTWVudUl0ZW0iLCJEcm9wRG93bk1lbnUiLCJ1bmRlZmluZWQiLCJfRHJvcERvd25NZW51MiIsIl9Ecm9wRG93bk1lbnUzIiwiX01lbnVJdGVtMiIsIl9NZW51SXRlbTMiLCIxMzUiLCJfZXh0ZW5kcyIsImFzc2lnbiIsInRhcmdldCIsImkiLCJzb3VyY2UiLCJoYXNPd25Qcm9wZXJ0eSIsIl93YXJuaW5nIiwiX3dhcm5pbmcyIiwiX2ludmFyaWFudCIsIl9pbnZhcmlhbnQyIiwiX0xvY2F0aW9uVXRpbHMiLCJfUGF0aFV0aWxzIiwiX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyIiwiX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyMiIsIl9ET01VdGlscyIsImdldEhpc3RvcnlTdGF0ZSIsIndpbmRvdyIsImhpc3RvcnkiLCJlIiwiY3JlYXRlQnJvd3Nlckhpc3RvcnkiLCJjYW5Vc2VET00iLCJnbG9iYWxIaXN0b3J5IiwiY2FuVXNlSGlzdG9yeSIsInN1cHBvcnRzSGlzdG9yeSIsIm5lZWRzSGFzaENoYW5nZUxpc3RlbmVyIiwic3VwcG9ydHNQb3BTdGF0ZU9uSGFzaENoYW5nZSIsIl9wcm9wcyRmb3JjZVJlZnJlc2giLCJmb3JjZVJlZnJlc2giLCJfcHJvcHMkZ2V0VXNlckNvbmZpcm0iLCJnZXRVc2VyQ29uZmlybWF0aW9uIiwiZ2V0Q29uZmlybWF0aW9uIiwiX3Byb3BzJGtleUxlbmd0aCIsImtleUxlbmd0aCIsImJhc2VuYW1lIiwic3RyaXBUcmFpbGluZ1NsYXNoIiwiYWRkTGVhZGluZ1NsYXNoIiwiZ2V0RE9NTG9jYXRpb24iLCJoaXN0b3J5U3RhdGUiLCJfd2luZG93JGxvY2F0aW9uIiwibG9jYXRpb24iLCJwYXRobmFtZSIsInNlYXJjaCIsImhhc2giLCJwYXRoIiwiaGFzQmFzZW5hbWUiLCJzdHJpcEJhc2VuYW1lIiwiY3JlYXRlTG9jYXRpb24iLCJjcmVhdGVLZXkiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiLCJ0cmFuc2l0aW9uTWFuYWdlciIsIm5leHRTdGF0ZSIsIm5vdGlmeUxpc3RlbmVycyIsImFjdGlvbiIsImhhbmRsZVBvcFN0YXRlIiwiZXZlbnQiLCJpc0V4dHJhbmVvdXNQb3BzdGF0ZUV2ZW50IiwiaGFuZGxlUG9wIiwiaGFuZGxlSGFzaENoYW5nZSIsImZvcmNlTmV4dFBvcCIsImNvbmZpcm1UcmFuc2l0aW9uVG8iLCJvayIsInJldmVydFBvcCIsImZyb21Mb2NhdGlvbiIsInRvTG9jYXRpb24iLCJ0b0luZGV4IiwiYWxsS2V5cyIsImluZGV4T2YiLCJmcm9tSW5kZXgiLCJkZWx0YSIsImdvIiwiaW5pdGlhbExvY2F0aW9uIiwiY3JlYXRlSHJlZiIsImNyZWF0ZVBhdGgiLCJwdXNoIiwiaHJlZiIsInB1c2hTdGF0ZSIsInByZXZJbmRleCIsIm5leHRLZXlzIiwic2xpY2UiLCJyZXBsYWNlU3RhdGUiLCJuIiwiZ29CYWNrIiwiZ29Gb3J3YXJkIiwibGlzdGVuZXJDb3VudCIsImNoZWNrRE9NTGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpc0Jsb2NrZWQiLCJibG9jayIsInByb21wdCIsInVuYmxvY2siLCJzZXRQcm9tcHQiLCJsaXN0ZW4iLCJsaXN0ZW5lciIsInVubGlzdGVuIiwiYXBwZW5kTGlzdGVuZXIiLCIxMzYiLCJIYXNoUGF0aENvZGVycyIsImhhc2hiYW5nIiwiZW5jb2RlUGF0aCIsImNoYXJBdCIsInN0cmlwTGVhZGluZ1NsYXNoIiwiZGVjb2RlUGF0aCIsIm5vc2xhc2giLCJzbGFzaCIsImdldEhhc2hQYXRoIiwiaGFzaEluZGV4Iiwic3Vic3RyaW5nIiwicHVzaEhhc2hQYXRoIiwicmVwbGFjZUhhc2hQYXRoIiwiY3JlYXRlSGFzaEhpc3RvcnkiLCJjYW5Hb1dpdGhvdXRSZWxvYWQiLCJzdXBwb3J0c0dvV2l0aG91dFJlbG9hZFVzaW5nSGFzaCIsIl9wcm9wcyRoYXNoVHlwZSIsImhhc2hUeXBlIiwiX0hhc2hQYXRoQ29kZXJzJGhhc2hUIiwiaWdub3JlUGF0aCIsImVuY29kZWRQYXRoIiwicHJldkxvY2F0aW9uIiwibG9jYXRpb25zQXJlRXF1YWwiLCJhbGxQYXRocyIsImxhc3RJbmRleE9mIiwibmV4dFBhdGhzIiwiMTM3IiwiY2xhbXAiLCJsb3dlckJvdW5kIiwidXBwZXJCb3VuZCIsIm1pbiIsIm1heCIsImNyZWF0ZU1lbW9yeUhpc3RvcnkiLCJfcHJvcHMkaW5pdGlhbEVudHJpZXMiLCJpbml0aWFsRW50cmllcyIsIl9wcm9wcyRpbml0aWFsSW5kZXgiLCJpbml0aWFsSW5kZXgiLCJlbnRyaWVzIiwibWFwIiwiZW50cnkiLCJuZXh0SW5kZXgiLCJuZXh0RW50cmllcyIsInNwbGljZSIsImNhbkdvIiwiMTM4IiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9pbnZhcmlhbnRfXyIsIjEzOSIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fUGF0aFV0aWxzX18iLCIxNDAiLCIxNDEiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX0xvY2F0aW9uVXRpbHNfXyIsImQiLCIxNDMiLCJfY29udGV4dCRtdWlUaGVtZSIsImFwcEJhciIsImljb25CdXR0b25TaXplIiwiYnV0dG9uIiwid2lkdGgiLCJkaXNwbGF5IiwiYmFja2dyb3VuZENvbG9yIiwiY29sb3IiLCJwYWRkaW5nTGVmdCIsInBhZGRpbmciLCJwYWRkaW5nUmlnaHQiLCJ0aXRsZSIsIndoaXRlU3BhY2UiLCJvdmVyZmxvdyIsInRleHRPdmVyZmxvdyIsIm1hcmdpbiIsInBhZGRpbmdUb3AiLCJsZXR0ZXJTcGFjaW5nIiwiZm9udFNpemUiLCJmb250V2VpZ2h0IiwidGl0bGVGb250V2VpZ2h0IiwidGV4dENvbG9yIiwiaGVpZ2h0IiwibGluZUhlaWdodCIsIm1haW5FbGVtZW50IiwiYm94RmxleCIsImZsZXgiLCJpY29uQnV0dG9uU3R5bGUiLCJtYXJnaW5Ub3AiLCJtYXJnaW5SaWdodCIsIm1hcmdpbkxlZnQiLCJpY29uQnV0dG9uSWNvblN0eWxlIiwiZmlsbCIsImZsYXRCdXR0b24iLCJfZXh0ZW5kczIiLCJfZXh0ZW5kczMiLCJfa2V5cyIsIl9rZXlzMiIsIl9vYmplY3RXaXRob3V0UHJvcGVydGllczIiLCJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzIiwiX0ljb25CdXR0b24iLCJfSWNvbkJ1dHRvbjIiLCJfbWVudSIsIl9tZW51MiIsIkFwcEJhciIsImhhbmRsZVRvdWNoVGFwTGVmdEljb25CdXR0b24iLCJvbkxlZnRJY29uQnV0dG9uVG91Y2hUYXAiLCJoYW5kbGVUb3VjaFRhcFJpZ2h0SWNvbkJ1dHRvbiIsIm9uUmlnaHRJY29uQnV0dG9uVG91Y2hUYXAiLCJoYW5kbGVUaXRsZVRvdWNoVGFwIiwib25UaXRsZVRvdWNoVGFwIiwidGl0bGVTdHlsZSIsImljb25TdHlsZUxlZnQiLCJpY29uU3R5bGVSaWdodCIsInNob3dNZW51SWNvbkJ1dHRvbiIsImljb25FbGVtZW50TGVmdCIsImljb25FbGVtZW50UmlnaHQiLCJpY29uQ2xhc3NOYW1lTGVmdCIsImljb25DbGFzc05hbWVSaWdodCIsIm90aGVyIiwicHJlcGFyZVN0eWxlcyIsIm1lbnVFbGVtZW50TGVmdCIsIm1lbnVFbGVtZW50UmlnaHQiLCJ0aXRsZUNvbXBvbmVudCIsIlN0cmluZyIsInRpdGxlRWxlbWVudCIsIm9uVG91Y2hUYXAiLCJpY29uTGVmdFN0eWxlIiwiaWNvbkVsZW1lbnRMZWZ0UHJvcHMiLCJ0eXBlIiwibXVpTmFtZSIsImljb25FbGVtTGVmdENoaWxkcmVuIiwiaWNvblN0eWxlIiwiY2xvbmVFbGVtZW50IiwiaWNvbkNsYXNzTmFtZSIsImljb25SaWdodFN0eWxlIiwiaWNvbkVsZW1lbnRSaWdodFByb3BzIiwiaWNvbkVsZW1SaWdodENoaWxkcmVuIiwiX2ljb25CdXR0b25JY29uU3R5bGUiLCJyb3VuZGVkIiwiMTQ0IiwiX0FwcEJhciIsIl9BcHBCYXIyIiwiMTQ1IiwiY2hlY2tib3giLCJpY29uIiwiY2hlY2siLCJ0cmFuc2l0aW9uT3JpZ2luIiwiY2hlY2tlZENvbG9yIiwiY2hlY2tXaGVuU3dpdGNoZWQiLCJjaGVja1doZW5EaXNhYmxlZCIsImRpc2FibGVkQ29sb3IiLCJib3giLCJib3hDb2xvciIsImJveFdoZW5Td2l0Y2hlZCIsImJveFdoZW5EaXNhYmxlZCIsImNoZWNrZWQiLCJsYWJlbCIsImRpc2FibGVkIiwibGFiZWxEaXNhYmxlZENvbG9yIiwibGFiZWxDb2xvciIsIl9FbmhhbmNlZFN3aXRjaCIsIl9FbmhhbmNlZFN3aXRjaDIiLCJfY2hlY2tCb3hPdXRsaW5lQmxhbmsiLCJfY2hlY2tCb3hPdXRsaW5lQmxhbmsyIiwiX2NoZWNrQm94IiwiX2NoZWNrQm94MiIsIkNoZWNrYm94Iiwic3dpdGNoZWQiLCJoYW5kbGVTdGF0ZUNoYW5nZSIsIm5ld1N3aXRjaGVkIiwiaGFuZGxlQ2hlY2siLCJpc0lucHV0Q2hlY2tlZCIsIm9uQ2hlY2siLCJkZWZhdWx0Q2hlY2tlZCIsInZhbHVlTGluayIsInJlZnMiLCJlbmhhbmNlZFN3aXRjaCIsImlzU3dpdGNoZWQiLCJuZXdDaGVja2VkVmFsdWUiLCJzZXRTd2l0Y2hlZCIsIl9wcm9wczIiLCJjaGVja2VkSWNvbiIsInVuY2hlY2tlZEljb24iLCJib3hTdHlsZXMiLCJjaGVja1N0eWxlcyIsImNoZWNrZWRFbGVtZW50IiwidW5DaGVja2VkRWxlbWVudCIsImNoZWNrYm94RWxlbWVudCIsInJpcHBsZUNvbG9yIiwibWVyZ2VkSWNvblN0eWxlIiwibGFiZWxTdHlsZSIsImVuaGFuY2VkU3dpdGNoUHJvcHMiLCJyZWYiLCJpbnB1dFR5cGUiLCJzd2l0Y2hFbGVtZW50Iiwib25Td2l0Y2giLCJvblBhcmVudFNob3VsZFVwZGF0ZSIsImxhYmVsUG9zaXRpb24iLCIxNDYiLCJhdXRvU2Nyb2xsQm9keUNvbnRlbnQiLCJfY29udGV4dCRtdWlUaGVtZSRiYXMiLCJiYXNlVGhlbWUiLCJzcGFjaW5nIiwicGFsZXR0ZSIsImRpYWxvZyIsImd1dHRlciIsImRlc2t0b3BHdXR0ZXIiLCJib3JkZXJTY3JvbGwiLCJib3JkZXJDb2xvciIsImJveFNpemluZyIsIldlYmtpdFRhcEhpZ2hsaWdodENvbG9yIiwidG9wIiwibGVmdCIsImNvbnRlbnQiLCJtYXhXaWR0aCIsImRlc2t0b3BLZXlsaW5lSW5jcmVtZW50IiwiYWN0aW9uc0NvbnRhaW5lciIsInRleHRBbGlnbiIsIm92ZXJsYXkiLCJkaWFsb2dPdmVybGF5IiwidGl0bGVGb250U2l6ZSIsIm1hcmdpbkJvdHRvbSIsImJvZHkiLCJib2R5Rm9udFNpemUiLCJib2R5Q29sb3IiLCJvdmVyZmxvd1kiLCJib3JkZXJUb3AiLCJib3JkZXJCb3R0b20iLCJfcmVhY3REb20iLCJfcmVhY3REb20yIiwiX3JlYWN0RXZlbnRMaXN0ZW5lciIsIl9yZWFjdEV2ZW50TGlzdGVuZXIyIiwiX2tleWNvZGUiLCJfa2V5Y29kZTIiLCJfT3ZlcmxheSIsIl9PdmVybGF5MiIsIl9SZW5kZXJUb0xheWVyIiwiX1JlbmRlclRvTGF5ZXIyIiwiX1RyYW5zaXRpb25Hcm91cCIsIl9UcmFuc2l0aW9uR3JvdXAyIiwiVHJhbnNpdGlvbkl0ZW0iLCJjbGVhclRpbWVvdXQiLCJlbnRlclRpbWVvdXQiLCJsZWF2ZVRpbWVvdXQiLCJjYWxsYmFjayIsImNvbXBvbmVudFdpbGxBcHBlYXIiLCJzZXRUaW1lb3V0IiwiRGlhbG9nSW5saW5lIiwiX0NvbXBvbmVudDIiLCJfcmVmMiIsIl90ZW1wMiIsIl90aGlzMiIsIl9yZXQyIiwiX2xlbjIiLCJfa2V5MiIsImhhbmRsZVRvdWNoVGFwT3ZlcmxheSIsInJlcXVlc3RDbG9zZSIsImhhbmRsZUtleVVwIiwiaGFuZGxlUmVzaXplIiwicG9zaXRpb25EaWFsb2ciLCJhY3Rpb25zIiwiYXV0b0RldGVjdFdpbmRvd0hlaWdodCIsImJvZHlTdHlsZSIsInJlcG9zaXRpb25PblVwZGF0ZSIsImNsaWVudEhlaWdodCIsImlubmVySGVpZ2h0IiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJjb250YWluZXIiLCJmaW5kRE9NTm9kZSIsImRpYWxvZ1dpbmRvdyIsImRpYWxvZ0NvbnRlbnQiLCJkaWFsb2dXaW5kb3dIZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJtYXhEaWFsb2dDb250ZW50SGVpZ2h0IiwicHJldmlvdXNTaWJsaW5nIiwiQ2hpbGRyZW4iLCJjb3VudCIsIm5leHRTaWJsaW5nIiwiYnV0dG9uQ2xpY2tlZCIsIm1vZGFsIiwib25SZXF1ZXN0Q2xvc2UiLCJfcHJvcHMzIiwiYWN0aW9uc0NvbnRhaW5lckNsYXNzTmFtZSIsImFjdGlvbnNDb250YWluZXJTdHlsZSIsImJvZHlDbGFzc05hbWUiLCJjb250ZW50Q2xhc3NOYW1lIiwiY29udGVudFN0eWxlIiwib3ZlcmxheUNsYXNzTmFtZSIsIm92ZXJsYXlTdHlsZSIsInBhcGVyQ2xhc3NOYW1lIiwicGFwZXJQcm9wcyIsInRpdGxlQ2xhc3NOYW1lIiwidG9BcnJheSIsImlzVmFsaWRFbGVtZW50Iiwib25LZXlVcCIsIm9uUmVzaXplIiwiY29tcG9uZW50IiwidHJhbnNpdGlvbkFwcGVhciIsInRyYW5zaXRpb25BcHBlYXJUaW1lb3V0IiwidHJhbnNpdGlvbkVudGVyIiwidHJhbnNpdGlvbkVudGVyVGltZW91dCIsInNob3ciLCJEaWFsb2ciLCJfQ29tcG9uZW50MyIsIl9yZWYzIiwiX3RlbXAzIiwiX3RoaXMzIiwiX3JldDMiLCJfbGVuMyIsIl9rZXkzIiwicmVuZGVyTGF5ZXIiLCJyZW5kZXIiLCJ1c2VMYXllckZvckNsaWNrQXdheSIsIjE0NyIsIl9hdXRvUHJlZml4IiwiX2F1dG9QcmVmaXgyIiwib3Blbk5hdkV2ZW50SGFuZGxlciIsIkRyYXdlciIsInByZXZlbnREZWZhdWx0IiwiY2xvc2UiLCJkb2NrZWQiLCJvbkJvZHlUb3VjaFN0YXJ0Iiwic3dpcGVBcmVhV2lkdGgiLCJ0b3VjaFN0YXJ0WCIsImlzUnRsIiwib2Zmc2V0V2lkdGgiLCJ0b3VjaGVzIiwicGFnZVgiLCJ0b3VjaFN0YXJ0WSIsInBhZ2VZIiwib3BlblNlY29uZGFyeSIsImRpc2FibGVTd2lwZVRvT3BlbiIsIm1heWJlU3dpcGluZyIsIm9uQm9keVRvdWNoTW92ZSIsIm9uQm9keVRvdWNoRW5kIiwiY3VycmVudFgiLCJjdXJyZW50WSIsInN3aXBpbmciLCJzZXRQb3NpdGlvbiIsImdldFRyYW5zbGF0ZVgiLCJkWEFicyIsImFicyIsImRZQWJzIiwic3dpcGVTdGFydFgiLCJjaGFuZ2VkVG91Y2hlcyIsInRyYW5zbGF0ZVJhdGlvIiwiZ2V0TWF4VHJhbnNsYXRlWCIsInJlbW92ZUJvZHlUb3VjaExpc3RlbmVycyIsImVuYWJsZVN3aXBlSGFuZGxpbmciLCJkaXNhYmxlU3dpcGVIYW5kbGluZyIsInRoZW1lIiwiZHJhd2VyIiwieCIsImdldFRyYW5zbGF0ZU11bHRpcGxpZXIiLCJnZXRUcmFuc2xhdGVkV2lkdGgiLCJXZWJraXRPdmVyZmxvd1Njcm9sbGluZyIsImRyYXdlck92ZXJsYXkiLCJwb2ludGVyRXZlbnRzIiwicm9vdFdoZW5PcGVuUmlnaHQiLCJyaWdodCIsInJlYXNvbiIsIm9uUmVxdWVzdENoYW5nZSIsInRlc3QiLCJFcnJvciIsInBhcnNlRmxvYXQiLCJpbm5lcldpZHRoIiwidHJhbnNsYXRlWCIsInJ0bFRyYW5zbGF0ZU11bHRpcGxpZXIiLCJjbGlja0F3YXlhYmxlRWxlbWVudCIsInRyYW5zZm9ybUNTUyIsInNldE9wYWNpdHkiLCJzZXQiLCJjb250YWluZXJDbGFzc05hbWUiLCJjb250YWluZXJTdHlsZSIsInNob3VsZFNob3ciLCJ0cmFuc2l0aW9uRW5hYmxlZCIsIjE0OCIsIl9EcmF3ZXIiLCJfRHJhd2VyMiIsIjE0OSIsImFjY2VudENvbG9yIiwiZHJvcERvd25NZW51IiwiY29udHJvbCIsImN1cnNvciIsImRlc2t0b3BHdXR0ZXJMZXNzIiwiaWNvblNpemUiLCJkZXNrdG9wR3V0dGVyTWluaSIsImljb25DaGlsZHJlbiIsImRlc2t0b3BUb29sYmFySGVpZ2h0IiwibGFiZWxXaGVuT3BlbiIsImRlc2t0b3BEcm9wRG93bk1lbnVGb250U2l6ZSIsImRlc2t0b3BTdWJoZWFkZXJIZWlnaHQiLCJmb250RmFtaWx5Iiwib3V0bGluZSIsInJvb3RXaGVuT3BlbiIsInVuZGVybGluZSIsImJvdHRvbSIsIl9hcnJvd0Ryb3BEb3duIiwiX2Fycm93RHJvcERvd24yIiwiX01lbnUiLCJfTWVudTIiLCJfQ2xlYXJGaXgiLCJfQ2xlYXJGaXgyIiwiX1BvcG92ZXIiLCJfUG9wb3ZlcjIiLCJfUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsIiwiX1BvcG92ZXJBbmltYXRpb25WZXJ0aWNhbDIiLCJfZXZlbnRzIiwiX2V2ZW50czIiLCJyb290Tm9kZSIsImFycm93Tm9kZSIsImhhbmRsZVRvdWNoVGFwQ29udHJvbCIsImFuY2hvckVsIiwiaGFuZGxlUmVxdWVzdENsb3NlTWVudSIsImhhbmRsZUVzY0tleURvd25NZW51IiwiaGFuZGxlS2V5RG93biIsImhhbmRsZUl0ZW1Ub3VjaFRhcCIsImNoaWxkIiwibXVsdGlwbGUiLCJwZXJzaXN0Iiwib25DaGFuZ2UiLCJpc0tleWJvYXJkIiwiaGFuZGxlQ2hhbmdlIiwib25DbG9zZSIsImRyb3BBcnJvdyIsImZvY3VzIiwic2V0S2V5Ym9hcmRGb2N1cyIsImF1dG9XaWR0aCIsInNldFdpZHRoIiwib3BlbkltbWVkaWF0ZWx5IiwiZWwiLCJfdGhpczQiLCJhbmltYXRlZCIsImFuaW1hdGlvbiIsImxpc3RTdHlsZSIsIm1lbnVTdHlsZVByb3AiLCJtZW51U3R5bGUiLCJzZWxlY3Rpb25SZW5kZXJlciIsIm1lbnVJdGVtU3R5bGUiLCJzZWxlY3RlZE1lbnVJdGVtU3R5bGUiLCJ1bmRlcmxpbmVTdHlsZSIsImljb25CdXR0b24iLCJhbmNob3JPcmlnaW4iLCJfc3RhdGUiLCJkaXNwbGF5VmFsdWUiLCJ2YWx1ZXMiLCJzZWxlY3Rpb25SZW5kZXJlckNoaWxkcmVuIiwiZm9yRWFjaCIsInByaW1hcnlUZXh0Iiwiam9pbiIsImNsaWVudFdpZHRoIiwibm9kZSIsIm9uS2V5RG93biIsImRlc2t0b3AiLCJvbkVzY0tleURvd24iLCJvbkl0ZW1Ub3VjaFRhcCIsIjE1MCIsIkljb25NZW51IiwibWVudUluaXRpYWxseUtleWJvYXJkRm9jdXNlZCIsInRvdWNoVGFwQ2xvc2VEZWxheSIsInRpbWVyQ2xvc2VJZCIsImhhbmRsZVJlcXVlc3RDbG9zZSIsImljb25NZW51Q29udGFpbmVyIiwiY3VycmVudFRhcmdldCIsImljb25CdXR0b25FbGVtZW50Iiwib25LZXlib2FyZEZvY3VzIiwib25Nb3VzZURvd24iLCJvbk1vdXNlTGVhdmUiLCJvbk1vdXNlRW50ZXIiLCJvbk1vdXNlVXAiLCJtZW51IiwibWVyZ2VkUm9vdFN0eWxlcyIsIm1lcmdlZE1lbnVTdHlsZXMiLCJpY29uQnV0dG9uUHJvcHMiLCJpbml0aWFsbHlLZXlib2FyZEZvY3VzZWQiLCJjaGlsZENvbnRleHRUeXBlcyIsIjE1MSIsIl9JY29uTWVudTIiLCJfSWNvbk1lbnUzIiwiMTUyIiwic25hY2tiYXIiLCJ2aXNpYmlsaXR5IiwiX0NsaWNrQXdheUxpc3RlbmVyIiwiX0NsaWNrQXdheUxpc3RlbmVyMiIsIl9TbmFja2JhckJvZHkiLCJfU25hY2tiYXJCb2R5MiIsIlNuYWNrYmFyIiwiY29tcG9uZW50Q2xpY2tBd2F5IiwidGltZXJUcmFuc2l0aW9uSWQiLCJtZXNzYWdlIiwic2V0QXV0b0hpZGVUaW1lciIsInNldFRyYW5zaXRpb25UaW1lciIsInRpbWVyT25lQXRUaGVUaW1lSWQiLCJwcmV2UHJvcHMiLCJwcmV2U3RhdGUiLCJ0aW1lckF1dG9IaWRlSWQiLCJhdXRvSGlkZUR1cmF0aW9uIiwib25BY3Rpb25Ub3VjaFRhcCIsIm9uQ2xpY2tBd2F5IiwiMTUzIiwiX2NvbnRleHQkbXVpVGhlbWUkYmFzMiIsIl9jb250ZXh0JG11aVRoZW1lJHNuYSIsImFjdGlvbkNvbG9yIiwiYm9yZGVyUmFkaXVzIiwiaXNTbWFsbCIsIl93aXRoV2lkdGgiLCJTTUFMTCIsIm1pbldpZHRoIiwiZmxleEdyb3ciLCJmbG9hdCIsIlNuYWNrYmFyQm9keSIsIl93aXRoV2lkdGgyIiwiX0ZsYXRCdXR0b24iLCJfRmxhdEJ1dHRvbjIiLCJhY3Rpb25CdXR0b24iLCIxNTQiLCJCZWZvcmVBZnRlcldyYXBwZXIiLCJiZWZvcmVTdHlsZSIsImFmdGVyU3R5bGUiLCJiZWZvcmVFbGVtZW50VHlwZSIsImFmdGVyRWxlbWVudFR5cGUiLCJlbGVtZW50VHlwZSIsImJlZm9yZUVsZW1lbnQiLCJhZnRlckVsZW1lbnQiLCIxNTUiLCJfQmVmb3JlQWZ0ZXJXcmFwcGVyIiwiX0JlZm9yZUFmdGVyV3JhcHBlcjIiLCJiZWZvcmUiLCJhZnRlciIsImNsZWFyIiwiQ2xlYXJGaXgiLCIxNTciLCJpbnB1dCIsImNvbnRyb2xzIiwid3JhcCIsImZsZXhTaHJpbmsiLCJyaXBwbGUiLCJwcmltYXJ5MUNvbG9yIiwiX0ZvY3VzUmlwcGxlIiwiX0ZvY3VzUmlwcGxlMiIsIl9Ub3VjaFJpcHBsZSIsIl9Ub3VjaFJpcHBsZTIiLCJFbmhhbmNlZFN3aXRjaCIsImlzS2V5Ym9hcmRGb2N1c2VkIiwidGFiUHJlc3NlZCIsImNvZGUiLCJoYW5kbGVNb3VzZURvd24iLCJ0b3VjaFJpcHBsZSIsInN0YXJ0IiwiaGFuZGxlTW91c2VVcCIsImVuZCIsImhhbmRsZU1vdXNlTGVhdmUiLCJoYW5kbGVUb3VjaFN0YXJ0IiwiaGFuZGxlVG91Y2hFbmQiLCJoYW5kbGVCbHVyIiwib25CbHVyIiwiaGFuZGxlRm9jdXMiLCJvbkZvY3VzIiwiaW5wdXROb2RlIiwiaGFzQ2hlY2tlZFByb3AiLCJoYXNOZXdEZWZhdWx0UHJvcCIsIm5ld1N3aXRjaGVkVmFsdWUiLCJuYW1lIiwiaW5wdXRTdHlsZSIsIm9uVG91Y2hTdGFydCIsIm9uVG91Y2hFbmQiLCJkaXNhYmxlVG91Y2hSaXBwbGUiLCJkaXNhYmxlRm9jdXNSaXBwbGUiLCJyaXBwbGVTdHlsZSIsInRodW1iU3R5bGUiLCJ0cmFja1N0eWxlIiwid3JhcFN0eWxlcyIsIm1lcmdlZFJpcHBsZVN0eWxlIiwibGFiZWxFbGVtZW50Iiwic2hvd1RvdWNoUmlwcGxlIiwic2hvd0ZvY3VzUmlwcGxlIiwiY2VudGVyUmlwcGxlIiwiZm9jdXNSaXBwbGUiLCJpbm5lclN0eWxlIiwicmlwcGxlcyIsImlucHV0RWxlbWVudCIsInN3aXRjaE9yVGh1bWJFbGVtZW50IiwiY2lyY2xlIiwiZWxlbWVudHNJbk9yZGVyIiwiMTYiLCJpbnZhcmlhbnQiLCJjb25kaXRpb24iLCJmb3JtYXQiLCJjIiwiZiIsImVycm9yIiwiYXJnSW5kZXgiLCJmcmFtZXNUb1BvcCIsIjE2MyIsIl9wdXJlIiwiX3B1cmUyIiwiX1N2Z0ljb24iLCJfU3ZnSWNvbjIiLCJOYXZpZ2F0aW9uQXJyb3dEcm9wUmlnaHQiLCJkaXNwbGF5TmFtZSIsIjE2NCIsIk5hdmlnYXRpb25BcnJvd0Ryb3BEb3duIiwiMTY1IiwiTmF2aWdhdGlvbk1lbnUiLCIxNjYiLCJOYXZpZ2F0aW9uTW9yZVZlcnQiLCIxNjciLCJUb2dnbGVDaGVja0JveE91dGxpbmVCbGFuayIsIjE2OCIsIlRvZ2dsZUNoZWNrQm94IiwiMTY5Iiwid2l0aFdpZHRoIiwib3B0aW9ucyIsIl9vcHRpb25zJGxhcmdlV2lkdGgiLCJsYXJnZVdpZHRoIiwiX29wdGlvbnMkbWVkaXVtV2lkdGgiLCJtZWRpdW1XaWR0aCIsIl9vcHRpb25zJHJlc2l6ZUludGVydiIsInJlc2l6ZUludGVydmFsIiwiTXlDb21wb25lbnQiLCJXaXRoV2lkdGgiLCJkZWZlclRpbWVyIiwidXBkYXRlV2lkdGgiLCJMQVJHRSIsIk1FRElVTSIsIjE3MCIsInBhcnNlIiwic3RyIiwicmVzIiwidG9rZW5zIiwiZGVmYXVsdERlbGltaXRlciIsImRlbGltaXRlciIsIlBBVEhfUkVHRVhQIiwiZXhlYyIsIm0iLCJlc2NhcGVkIiwib2Zmc2V0IiwibmV4dCIsInByZWZpeCIsImNhcHR1cmUiLCJncm91cCIsIm1vZGlmaWVyIiwiYXN0ZXJpc2siLCJwYXJ0aWFsIiwicmVwZWF0Iiwib3B0aW9uYWwiLCJwYXR0ZXJuIiwiZXNjYXBlR3JvdXAiLCJlc2NhcGVTdHJpbmciLCJjb21waWxlIiwidG9rZW5zVG9GdW5jdGlvbiIsImVuY29kZVVSSUNvbXBvbmVudFByZXR0eSIsImVuY29kZVVSSSIsImNoYXJDb2RlQXQiLCJ0b1VwcGVyQ2FzZSIsImVuY29kZUFzdGVyaXNrIiwibWF0Y2hlcyIsIlJlZ0V4cCIsIm9wdHMiLCJkYXRhIiwiZW5jb2RlIiwicHJldHR5IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidG9rZW4iLCJzZWdtZW50IiwiVHlwZUVycm9yIiwiaXNhcnJheSIsIkpTT04iLCJzdHJpbmdpZnkiLCJqIiwiYXR0YWNoS2V5cyIsInJlIiwiZmxhZ3MiLCJzZW5zaXRpdmUiLCJyZWdleHBUb1JlZ2V4cCIsImdyb3VwcyIsIm1hdGNoIiwiYXJyYXlUb1JlZ2V4cCIsInBhcnRzIiwicGF0aFRvUmVnZXhwIiwic3RyaW5nVG9SZWdleHAiLCJ0b2tlbnNUb1JlZ0V4cCIsInN0cmljdCIsInJvdXRlIiwiZW5kc1dpdGhEZWxpbWl0ZXIiLCIxNzEiLCJhcnIiLCIxODkiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJzZWxmIiwiUmVmZXJlbmNlRXJyb3IiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJjcmVhdGUiLCJlbnVtZXJhYmxlIiwid3JpdGFibGUiLCJjb25maWd1cmFibGUiLCJzZXRQcm90b3R5cGVPZiIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9yZWFjdF9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3JlYWN0X19fZGVmYXVsdCIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9wcm9wX3R5cGVzX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcHJvcF90eXBlc19fX2RlZmF1bHQiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaGlzdG9yeV9jcmVhdGVCcm93c2VySGlzdG9yeV9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2hpc3RvcnlfY3JlYXRlQnJvd3Nlckhpc3RvcnlfX19kZWZhdWx0IiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19Sb3V0ZXJfXyIsIkJyb3dzZXJSb3V0ZXIiLCJfUmVhY3QkQ29tcG9uZW50IiwiY29tcG9uZW50V2lsbE1vdW50Iiwic3RyaW5nIiwiYm9vbCIsImZ1bmMiLCJudW1iZXIiLCIxOTAiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaGlzdG9yeV9jcmVhdGVIYXNoSGlzdG9yeV9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2hpc3RvcnlfY3JlYXRlSGFzaEhpc3RvcnlfX19kZWZhdWx0IiwiSGFzaFJvdXRlciIsIm9uZU9mIiwiMTkxIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19NZW1vcnlSb3V0ZXJfXyIsIjE5MiIsIl9vYmplY3RXaXRob3V0UHJvcGVydGllcyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19fZGVmYXVsdCIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1JvdXRlX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX0xpbmtfXyIsIk5hdkxpbmsiLCJ0byIsImV4YWN0IiwiYWN0aXZlQ2xhc3NOYW1lIiwiYWN0aXZlU3R5bGUiLCJnZXRJc0FjdGl2ZSIsImlzQWN0aXZlIiwiYXJpYUN1cnJlbnQiLCJyZXN0IiwiZmlsdGVyIiwiYXJpYS1jdXJyZW50IiwiMTkzIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19Qcm9tcHRfXyIsIjE5NCIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9yb3V0ZXJfZXNfUmVkaXJlY3RfXyIsIjE5NSIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9yb3V0ZXJfZXNfU3RhdGljUm91dGVyX18iLCIxOTYiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3Rfcm91dGVyX2VzX1N3aXRjaF9fIiwiMTk3IiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19tYXRjaFBhdGhfXyIsIjE5OCIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9yb3V0ZXJfZXNfd2l0aFJvdXRlcl9fIiwiMTk5IiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2hpc3RvcnlfY3JlYXRlTWVtb3J5SGlzdG9yeV9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2hpc3RvcnlfY3JlYXRlTWVtb3J5SGlzdG9yeV9fX2RlZmF1bHQiLCJNZW1vcnlSb3V0ZXIiLCJhcnJheSIsIjIwMCIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9pbnZhcmlhbnRfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9pbnZhcmlhbnRfX19kZWZhdWx0IiwiUHJvbXB0IiwiZW5hYmxlIiwicm91dGVyIiwiZGlzYWJsZSIsIndoZW4iLCJjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJvbmVPZlR5cGUiLCJzaGFwZSIsIjIwMSIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl93YXJuaW5nX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfd2FybmluZ19fX2RlZmF1bHQiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaW52YXJpYW50X18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaW52YXJpYW50X19fZGVmYXVsdCIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9oaXN0b3J5X18iLCJSZWRpcmVjdCIsImlzU3RhdGljIiwic3RhdGljQ29udGV4dCIsInBlcmZvcm0iLCJjb21wb25lbnREaWRNb3VudCIsImNvbXBvbmVudERpZFVwZGF0ZSIsInByZXZUbyIsIm5leHRUbyIsImZyb20iLCIyMDIiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X19fZGVmYXVsdCIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9yZWFjdF9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3JlYWN0X19fZGVmYXVsdCIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19wcm9wX3R5cGVzX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfaGlzdG9yeV9QYXRoVXRpbHNfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fUm91dGVyX18iLCJub3JtYWxpemVMb2NhdGlvbiIsIl9vYmplY3QkcGF0aG5hbWUiLCJfb2JqZWN0JHNlYXJjaCIsIl9vYmplY3QkaGFzaCIsImFkZEJhc2VuYW1lIiwiYmFzZSIsImNyZWF0ZVVSTCIsInN0YXRpY0hhbmRsZXIiLCJtZXRob2ROYW1lIiwibm9vcCIsIlN0YXRpY1JvdXRlciIsImhhbmRsZVB1c2giLCJfdGhpcyRwcm9wcyIsInVybCIsImhhbmRsZVJlcGxhY2UiLCJfdGhpcyRwcm9wczIiLCJoYW5kbGVMaXN0ZW4iLCJoYW5kbGVCbG9jayIsImdldENoaWxkQ29udGV4dCIsIjIwMyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fbWF0Y2hQYXRoX18iLCJTd2l0Y2giLCJlbGVtZW50IiwiX2VsZW1lbnQkcHJvcHMiLCJwYXRoUHJvcCIsImNvbXB1dGVkTWF0Y2giLCIyMDQiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfaG9pc3Rfbm9uX3JlYWN0X3N0YXRpY3NfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9ob2lzdF9ub25fcmVhY3Rfc3RhdGljc19fX2RlZmF1bHQiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1JvdXRlX18iLCJ3aXRoUm91dGVyIiwiQyIsIndyYXBwZWRDb21wb25lbnRSZWYiLCJyZW1haW5pbmdQcm9wcyIsInJvdXRlQ29tcG9uZW50UHJvcHMiLCJXcmFwcGVkQ29tcG9uZW50IiwiMjA1IiwiZ2xvYmFsIiwiZmFjdG9yeSIsIlJFQUNUX1NUQVRJQ1MiLCJnZXREZWZhdWx0UHJvcHMiLCJnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMiLCJtaXhpbnMiLCJLTk9XTl9TVEFUSUNTIiwiY2FsbGVyIiwiY2FsbGVlIiwiYXJpdHkiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZ2V0UHJvdG90eXBlT2YiLCJvYmplY3RQcm90b3R5cGUiLCJob2lzdE5vblJlYWN0U3RhdGljcyIsInRhcmdldENvbXBvbmVudCIsInNvdXJjZUNvbXBvbmVudCIsImJsYWNrbGlzdCIsImluaGVyaXRlZENvbXBvbmVudCIsImRlc2NyaXB0b3IiLCIyNzMiLCJTdWJNZW51IiwiX21vcmVWZXJ0MiIsIm9uQ2xpY2siLCJvbkxvZ291dCIsIl9yZWFjdFJvdXRlckRvbSIsIl9NZW51SXRlbSIsIl9uYXZpZ2F0aW9uQXJyb3dEcm9wUmlnaHQiLCJfSWNvbk1lbnUiLCJfbW9yZVZlcnQiLCJBZG1pbkJhY2tvZmZpY2VCYXIiLCJjcmVhdGVDbGFzcyIsImdldEluaXRpYWxTdGF0ZSIsImRyYXdlck9wZW4iLCJjbG9zZURyYXdlciIsInRvZ2dsZURyYXdlciIsIkxpbmsiLCIyNzQiLCJBZG1pbkluZGV4IiwiMjc1IiwiX011aVRoZW1lUHJvdmlkZXIiLCJfTXVpVGhlbWVQcm92aWRlcjIiLCJfUmFpc2VkQnV0dG9uIiwiX1RleHRGaWVsZCIsIl9UZXh0RmllbGQyIiwiX0NhcmQiLCJfYXhpb3MiLCJfYXhpb3MyIiwiX0hlYWRlciIsIl9IZWFkZXIyIiwiRU1QVFlfQ0FMTEJBQ0siLCJBZG1pbkxvZ2luIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImVyck1zZyIsIm9uU3VibWl0Iiwic3VibWl0Rm9ybSIsImVuY29kZWQiLCJidG9hIiwibWV0aG9kIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJ0aGVuIiwiY29udGVudHMiLCJjb25zb2xlIiwibG9nIiwiY2F0Y2giLCJjYXVzZSIsImhhbmRsZUtleVByZXNzIiwibXNnRWxlbSIsIm9uS2V5UHJlc3MiLCJDYXJkIiwiQ2FyZEhlYWRlciIsInN1YnRpdGxlIiwiQ2FyZFRleHQiLCJleHBhbmRhYmxlIiwiaGludCIsImZsb2F0aW5nTGFiZWxUZXh0IiwiaGludFRleHQiLCJDYXJkQWN0aW9ucyIsIjI3NyIsIl9SYWlzZWRCdXR0b24yIiwiX0NoZWNrYm94IiwiX0RpYWxvZyIsIl9TbmFja2JhciIsIl9TbmFja2JhcjIiLCJfRHJvcERvd25NZW51IiwiU2hvcEZvcm0iLCJtc2dTbmFja2Jhck9wZW4iLCJhZGRyZXNzIiwicGhvbmUiLCJ6b25lIiwiZGlzdHJpY3RzIiwiYWRtaW5FbWFpbCIsImFkbWluTmFtZSIsImxhdCIsImxvbmciLCJnZXQiLCJyZXNwb25zZSIsIm9wZW5TbmFja2JhciIsIm1zZyIsInNuYWNrYmFyTWVzc2FnZSIsImhhbmRsZVNuYWNrYmFyUmVxdWVzdENsb3NlIiwiaGFuZGxlU2hvcENyZWF0ZVN1Y2Nlc3MiLCJzaG9wSWQiLCJzaG9wIiwiaWQiLCJoYW5kbGVTaG9wQ3JlYXRlRXJyb3IiLCJjaGVja0ZpZWxkcyIsImNyZWF0ZVNob3AiLCJmaWVsZHNDaGVjayIsIl9zdGF0ZTIiLCJ6b25lT2JqIiwiZmluZCIsImNvbmZpZyIsInBvc3QiLCJoYW5kbGVab25lQ2hhbmdlIiwiZGlzdHJpY3RNZW51SXRlbXMiLCJkaXN0cmljdCIsInBhZGRpbmdCb3R0b20iLCJzZWNvbmRhcnkiLCIyNzgiLCJCYW5TaG9wRGlhbG9nIiwiYmFuU2hvcCIsImVuYWJsZWQiLCJvblN1Y2Nlc3MiLCJvbkVycm9yIiwicHJpbWFyeSIsIl9EaWFsb2cyIiwiX0Zsb2F0aW5nQWN0aW9uQnV0dG9uIiwiX0Zsb2F0aW5nQWN0aW9uQnV0dG9uMiIsIl9hZGQiLCJfYWRkMiIsIl9TaG9wTWVudSIsIl9TaG9wTWVudTIiLCJTaG9wTGlzdCIsInNob3BzIiwiZXJyU25hY2tiYXJPcGVuIiwic2hvcE1lbnUiLCJsb2FkU2hvcHMiLCJvcGVuRXJyU25hY2tiYXIiLCJlcnJTbmFja2Jhck1lc3NhZ2UiLCJoYW5kbGVFcnJTbmFja2JhclJlcXVlc3RDbG9zZSIsImNsb3NlQmFuRGlhbG9nIiwib3BlbkJhbkRpYWxvZyIsImhhbmRsZVNob3BCYW5TdWNjZXNzIiwiZW5hYmxlU2hvcCIsInNob3dNZW51IiwiaGFuZGxlTWVudUNsb3NlIiwiYmFuU2hvcERpYWxvZyIsInMiLCJzaG9wTWVudUVsZW0iLCJzaG9wQ2FyZHMiLCJpbml0ZG9uZSIsInZhbGlkb25lIiwic3RhdHVzU3RyIiwibWFpbkVsZW0iLCIzMDAiLCJBY3Rpb25IZWFkZXIiLCIzMDEiLCJfQWRtaW5CYWNrb2ZmaWNlQmFyIiwiX0FkbWluQmFja29mZmljZUJhcjIiLCJfQWRtaW5JbmRleCIsIl9BZG1pbkluZGV4MiIsIl9BZG1pbkxvZ2luIiwiX0FkbWluTG9naW4yIiwiX1Nob3BMaXN0IiwiX1Nob3BMaXN0MiIsIl9TaG9wRm9ybSIsIl9TaG9wRm9ybTIiLCJjb29raWUiLCJjb29raWVUb2tlblN0ciIsInNwbGl0Iiwic3RhcnRzV2l0aCIsImNvb2tpZVRva2VuIiwiQWRtaW5CYWNrb2ZmaWNlIiwidXNlciIsInJlbmRlclJlYWR5Iiwic2V0VG9rZW4iLCJsb2dvdXRGb3JtIiwic3VibWl0IiwiUm91dGUiLCJnZXRFbGVtZW50QnlJZCIsIjMwMyIsIlNob3BNZW51IiwibWVudUNhcmRzIiwiZGlzaCIsImRlc2NyaXB0aW9uIiwiY29zdCIsIl9BY3Rpb25IZWFkZXIyIiwiX0FjdGlvbkhlYWRlciIsIjMxIiwicGFyc2VQYXRoIiwic2VhcmNoSW5kZXgiLCIzMiIsIjM3IiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3Jlc29sdmVfcGF0aG5hbWVfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV92YWx1ZV9lcXVhbF9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19QYXRoVXRpbHNfXyIsImN1cnJlbnRMb2NhdGlvbiIsImRlY29kZVVSSSIsIlVSSUVycm9yIiwiNDE0IiwiZmxvYXRpbmdBY3Rpb25CdXR0b24iLCJpY29uQ29sb3IiLCJkaXNhYmxlZFRleHRDb2xvciIsInNlY29uZGFyeUNvbG9yIiwic2Vjb25kYXJ5SWNvbkNvbG9yIiwiYnV0dG9uU2l6ZSIsInZlcnRpY2FsQWxpZ24iLCJjb250YWluZXJXaGVuTWluaSIsIm1pbmlTaXplIiwib3ZlcmxheVdoZW5Ib3ZlcmVkIiwiX2NvbG9yTWFuaXB1bGF0b3IiLCJmYWRlIiwiaWNvbldoZW5NaW5pIiwiX0VuaGFuY2VkQnV0dG9uIiwiX0VuaGFuY2VkQnV0dG9uMiIsIl9Gb250SWNvbiIsIl9Gb250SWNvbjIiLCJfY2hpbGRVdGlscyIsIkZsb2F0aW5nQWN0aW9uQnV0dG9uIiwiaG92ZXJlZCIsInRvdWNoIiwiaGFuZGxlTW91c2VFbnRlciIsImhhbmRsZUtleWJvYXJkRm9jdXMiLCJrZXlib2FyZEZvY3VzZWQiLCJjaGlsZHJlblByb3AiLCJtaW5pIiwiaWNvbkVsZW1lbnQiLCJleHRlbmRDaGlsZHJlbiIsImJ1dHRvbkV2ZW50SGFuZGxlcnMiLCJmb2N1c1JpcHBsZUNvbG9yIiwidG91Y2hSaXBwbGVDb2xvciIsIjQxNSIsIjQ0OSIsIkNvbnRlbnRBZGQiLCI0NSIsIjQ2IiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19Ccm93c2VyUm91dGVyX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX0hhc2hSb3V0ZXJfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fTGlua19fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19NZW1vcnlSb3V0ZXJfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fTmF2TGlua19fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19Qcm9tcHRfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fUmVkaXJlY3RfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fUm91dGVfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOF9fUm91dGVyX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzlfX1N0YXRpY1JvdXRlcl9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMF9fU3dpdGNoX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzExX19tYXRjaFBhdGhfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTJfX3dpdGhSb3V0ZXJfXyIsIjUwIiwiX3Jlc29sdmVQYXRobmFtZSIsIl9yZXNvbHZlUGF0aG5hbWUyIiwiX3ZhbHVlRXF1YWwiLCJfdmFsdWVFcXVhbDIiLCI1MSIsImNyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyIiwibmV4dFByb21wdCIsInJlc3VsdCIsImxpc3RlbmVycyIsImZuIiwiNTIiLCI1NSIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9yb3V0ZXJfZXNfUm91dGVyX18iLCI1NiIsIlJvdXRlciIsImNvbXB1dGVNYXRjaCIsInBhcmFtcyIsImlzRXhhY3QiLCJvbmx5IiwiNTciLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcGF0aF90b19yZWdleHBfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9wYXRoX3RvX3JlZ2V4cF9fX2RlZmF1bHQiLCJwYXR0ZXJuQ2FjaGUiLCJjYWNoZUNvdW50IiwiY29tcGlsZVBhdGgiLCJjYWNoZUtleSIsImNhY2hlIiwiY29tcGlsZWRQYXR0ZXJuIiwibWF0Y2hQYXRoIiwiX29wdGlvbnMiLCJfb3B0aW9ucyRwYXRoIiwiX29wdGlvbnMkZXhhY3QiLCJfb3B0aW9ucyRzdHJpY3QiLCJfb3B0aW9ucyRzZW5zaXRpdmUiLCJfY29tcGlsZVBhdGgiLCJyZWR1Y2UiLCJtZW1vIiwiODAiLCJfQ2hlY2tib3gyIiwiODEiLCI4NyIsImF0dGFjaEV2ZW50IiwiZGV0YWNoRXZlbnQiLCJjb25maXJtIiwidWEiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCI4OCIsIjk0IiwiaXNNb2RpZmllZEV2ZW50IiwibWV0YUtleSIsImFsdEtleSIsImN0cmxLZXkiLCJzaGlmdEtleSIsImhhbmRsZUNsaWNrIiwiZGVmYXVsdFByZXZlbnRlZCIsImlubmVyUmVmIiwiOTUiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3Rfcm91dGVyX2VzX1JvdXRlX18iLCI5NiIsImlzRW1wdHlDaGlsZHJlbiIsIm5leHRDb250ZXh0IiwiX2NvbnRleHQkcm91dGVyIiwiOTkiLCJpc0Fic29sdXRlIiwic3BsaWNlT25lIiwibGlzdCIsImsiLCJwb3AiLCJyZXNvbHZlUGF0aG5hbWUiLCJ0b1BhcnRzIiwiZnJvbVBhcnRzIiwiaXNUb0FicyIsImlzRnJvbUFicyIsIm11c3RFbmRBYnMiLCJoYXNUcmFpbGluZ1NsYXNoIiwibGFzdCIsInVwIiwicGFydCIsInVuc2hpZnQiXSwibWFwcGluZ3MiOiJBQUFBQSxjQUFjLElBRVJDLElBQ0EsU0FBVUMsRUFBUUMsRUFBcUJDLEdBRTdDLFlDSEEsU0FBQUMsR0FBQUMsRUFBQUMsR0FDQSxHQUFBRCxJQUFBQyxFQUFBLFFBRUEsVUFBQUQsR0FBQSxNQUFBQyxFQUFBLFFBRUEsSUFBQUMsTUFBQUMsUUFBQUgsR0FDQSxNQUFBRSxPQUFBQyxRQUFBRixJQUFBRCxFQUFBSSxTQUFBSCxFQUFBRyxRQUFBSixFQUFBSyxNQUFBLFNBQUFDLEVBQUFDLEdBQ0EsTUFBQVIsR0FBQU8sRUFBQUwsRUFBQU0sS0FJQSxJQUFBQyxPQUFBLEtBQUFSLEVBQUEsWUFBQVMsRUFBQVQsRUFHQSxJQUFBUSxTQUZBLEtBQUFQLEVBQUEsWUFBQVEsRUFBQVIsSUFFQSxRQUVBLGVBQUFPLEVBQUEsQ0FDQSxHQUFBRSxHQUFBVixFQUFBVyxVQUNBQyxFQUFBWCxFQUFBVSxTQUVBLElBQUFELElBQUFWLEdBQUFZLElBQUFYLEVBQUEsTUFBQUYsR0FBQVcsRUFBQUUsRUFFQSxJQUFBQyxHQUFBQyxPQUFBQyxLQUFBZixHQUNBZ0IsRUFBQUYsT0FBQUMsS0FBQWQsRUFFQSxPQUFBWSxHQUFBVCxTQUFBWSxFQUFBWixRQUVBUyxFQUFBUixNQUFBLFNBQUFZLEdBQ0EsTUFBQWxCLEdBQUFDLEVBQUFp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QUFBUCxFQUFBTyxFQUFBLEtBQUFBLEVBQUFRLFFBQUEsR0FFSCxJQUFBeEUsR0FBQWdFLEVBQUFwc0IsS0FBQSxJQUlBLE9BRkF3c0IsSUFBQSxNQUFBcEUsRUFBQWxuQyxRQUFBLEtBQUFrbkMsR0FBQSxLQUVBQSxFQWxFQXJ3QyxPQUFBSSxlQUFBckIsRUFBQSxjQUFBc0IsT0FBQSxJQXFFQXRCLEVBQUEsYS9FNC9VRyIsImZpbGUiOiJhZG1pbmJhY2tvZmZpY2UuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2VicGFja0pzb25wKFswXSx7XG5cbi8qKiovIDEwMDpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbmZ1bmN0aW9uIHZhbHVlRXF1YWwoYSwgYikge1xuICBpZiAoYSA9PT0gYikgcmV0dXJuIHRydWU7XG5cbiAgaWYgKGEgPT0gbnVsbCB8fCBiID09IG51bGwpIHJldHVybiBmYWxzZTtcblxuICBpZiAoQXJyYXkuaXNBcnJheShhKSkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGIpICYmIGEubGVuZ3RoID09PSBiLmxlbmd0aCAmJiBhLmV2ZXJ5KGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgcmV0dXJuIHZhbHVlRXF1YWwoaXRlbSwgYltpbmRleF0pO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIGFUeXBlID0gdHlwZW9mIGEgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGEpO1xuICB2YXIgYlR5cGUgPSB0eXBlb2YgYiA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoYik7XG5cbiAgaWYgKGFUeXBlICE9PSBiVHlwZSkgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChhVHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICB2YXIgYVZhbHVlID0gYS52YWx1ZU9mKCk7XG4gICAgdmFyIGJWYWx1ZSA9IGIudmFsdWVPZigpO1xuXG4gICAgaWYgKGFWYWx1ZSAhPT0gYSB8fCBiVmFsdWUgIT09IGIpIHJldHVybiB2YWx1ZUVxdWFsKGFWYWx1ZSwgYlZhbHVlKTtcblxuICAgIHZhciBhS2V5cyA9IE9iamVjdC5rZXlzKGEpO1xuICAgIHZhciBiS2V5cyA9IE9iamVjdC5rZXlzKGIpO1xuXG4gICAgaWYgKGFLZXlzLmxlbmd0aCAhPT0gYktleXMubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG5cbiAgICByZXR1cm4gYUtleXMuZXZlcnkoZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIHZhbHVlRXF1YWwoYVtrZXldLCBiW2tleV0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKHZhbHVlRXF1YWwpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMTA3OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2dldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7XG5cbnZhciBfaW5oZXJpdHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG52YXIgX3NpbXBsZUFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cbnZhciBfc2ltcGxlQXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NpbXBsZUFzc2lnbik7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX1BhcGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cbnZhciBfUGFwZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUGFwZXIpO1xuXG52YXIgX3RyYW5zaXRpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cbnZhciBfdHJhbnNpdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHJhbnNpdGlvbnMpO1xuXG52YXIgX3Byb3BUeXBlczMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblxudmFyIF9wcm9wVHlwZXM0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzMyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGdldFN0eWxlcyhwcm9wcywgY29udGV4dCwgc3RhdGUpIHtcbiAgdmFyIHRhcmdldE9yaWdpbiA9IHByb3BzLnRhcmdldE9yaWdpbjtcbiAgdmFyIG9wZW4gPSBzdGF0ZS5vcGVuO1xuICB2YXIgbXVpVGhlbWUgPSBjb250ZXh0Lm11aVRoZW1lO1xuXG4gIHZhciBob3Jpem9udGFsID0gdGFyZ2V0T3JpZ2luLmhvcml6b250YWwucmVwbGFjZSgnbWlkZGxlJywgJ3ZlcnRpY2FsJyk7XG5cbiAgcmV0dXJuIHtcbiAgICByb290OiB7XG4gICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAgIHpJbmRleDogbXVpVGhlbWUuekluZGV4LnBvcG92ZXIsXG4gICAgICBvcGFjaXR5OiBvcGVuID8gMSA6IDAsXG4gICAgICB0cmFuc2Zvcm06IG9wZW4gPyAnc2NhbGVZKDEpJyA6ICdzY2FsZVkoMCknLFxuICAgICAgdHJhbnNmb3JtT3JpZ2luOiBob3Jpem9udGFsICsgJyAnICsgdGFyZ2V0T3JpZ2luLnZlcnRpY2FsLFxuICAgICAgdHJhbnNpdGlvbjogX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoJzQ1MG1zJywgWyd0cmFuc2Zvcm0nLCAnb3BhY2l0eSddKSxcbiAgICAgIG1heEhlaWdodDogJzEwMCUnXG4gICAgfVxuICB9O1xufVxuXG52YXIgUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBQb3BvdmVyQW5pbWF0aW9uVmVydGljYWwoKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoX3JlZiA9IFBvcG92ZXJBbmltYXRpb25WZXJ0aWNhbC5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsKSkuY2FsbC5hcHBseShfcmVmLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBvcGVuOiBmYWxzZVxuICAgIH0sIF90ZW1wKSwgKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KShfdGhpcywgX3JldCk7XG4gIH1cblxuICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShQb3BvdmVyQW5pbWF0aW9uVmVydGljYWwsIFt7XG4gICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBvcGVuOiB0cnVlIH0pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHJlYWN0L25vLWRpZC1tb3VudC1zZXQtc3RhdGVcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBvcGVuOiBuZXh0UHJvcHMub3BlblxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgY2xhc3NOYW1lID0gX3Byb3BzLmNsYXNzTmFtZSxcbiAgICAgICAgICBzdHlsZSA9IF9wcm9wcy5zdHlsZSxcbiAgICAgICAgICB6RGVwdGggPSBfcHJvcHMuekRlcHRoO1xuXG5cbiAgICAgIHZhciBzdHlsZXMgPSBnZXRTdHlsZXModGhpcy5wcm9wcywgdGhpcy5jb250ZXh0LCB0aGlzLnN0YXRlKTtcblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICBfUGFwZXIyLmRlZmF1bHQsXG4gICAgICAgIHtcbiAgICAgICAgICBzdHlsZTogKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5yb290LCBzdHlsZSksXG4gICAgICAgICAgekRlcHRoOiB6RGVwdGgsXG4gICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVcbiAgICAgICAgfSxcbiAgICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlblxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIFBvcG92ZXJBbmltYXRpb25WZXJ0aWNhbDtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cblBvcG92ZXJBbmltYXRpb25WZXJ0aWNhbC5kZWZhdWx0UHJvcHMgPSB7XG4gIHN0eWxlOiB7fSxcbiAgekRlcHRoOiAxXG59O1xuUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsLmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5Qb3BvdmVyQW5pbWF0aW9uVmVydGljYWwucHJvcFR5cGVzID0gIGZhbHNlID8ge1xuICBjaGlsZHJlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICBjbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBvcGVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wuaXNSZXF1aXJlZCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIHRhcmdldE9yaWdpbjogX3Byb3BUeXBlczQuZGVmYXVsdC5vcmlnaW4uaXNSZXF1aXJlZCxcbiAgekRlcHRoOiBfcHJvcFR5cGVzNC5kZWZhdWx0LnpEZXB0aFxufSA6IHt9O1xuZXhwb3J0cy5kZWZhdWx0ID0gUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMTE1OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gZXhwb3J0cy5NZW51SXRlbSA9IGV4cG9ydHMuRHJvcERvd25NZW51ID0gdW5kZWZpbmVkO1xuXG52YXIgX0Ryb3BEb3duTWVudTIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0OSk7XG5cbnZhciBfRHJvcERvd25NZW51MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0Ryb3BEb3duTWVudTIpO1xuXG52YXIgX01lbnVJdGVtMiA9IF9fd2VicGFja19yZXF1aXJlX18oOTApO1xuXG52YXIgX01lbnVJdGVtMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX01lbnVJdGVtMik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuRHJvcERvd25NZW51ID0gX0Ryb3BEb3duTWVudTMuZGVmYXVsdDtcbmV4cG9ydHMuTWVudUl0ZW0gPSBfTWVudUl0ZW0zLmRlZmF1bHQ7XG5leHBvcnRzLmRlZmF1bHQgPSBfRHJvcERvd25NZW51My5kZWZhdWx0O1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMTM1OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfd2FybmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXG52YXIgX3dhcm5pbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2FybmluZyk7XG5cbnZhciBfaW52YXJpYW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cbnZhciBfaW52YXJpYW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ludmFyaWFudCk7XG5cbnZhciBfTG9jYXRpb25VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXG52YXIgX1BhdGhVdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpO1xuXG52YXIgX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7XG5cbnZhciBfY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIpO1xuXG52YXIgX0RPTVV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Nyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBQb3BTdGF0ZUV2ZW50ID0gJ3BvcHN0YXRlJztcbnZhciBIYXNoQ2hhbmdlRXZlbnQgPSAnaGFzaGNoYW5nZSc7XG5cbnZhciBnZXRIaXN0b3J5U3RhdGUgPSBmdW5jdGlvbiBnZXRIaXN0b3J5U3RhdGUoKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHdpbmRvdy5oaXN0b3J5LnN0YXRlIHx8IHt9O1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gSUUgMTEgc29tZXRpbWVzIHRocm93cyB3aGVuIGFjY2Vzc2luZyB3aW5kb3cuaGlzdG9yeS5zdGF0ZVxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vUmVhY3RUcmFpbmluZy9oaXN0b3J5L3B1bGwvMjg5XG4gICAgcmV0dXJuIHt9O1xuICB9XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBoaXN0b3J5IG9iamVjdCB0aGF0IHVzZXMgdGhlIEhUTUw1IGhpc3RvcnkgQVBJIGluY2x1ZGluZ1xuICogcHVzaFN0YXRlLCByZXBsYWNlU3RhdGUsIGFuZCB0aGUgcG9wc3RhdGUgZXZlbnQuXG4gKi9cbnZhciBjcmVhdGVCcm93c2VySGlzdG9yeSA9IGZ1bmN0aW9uIGNyZWF0ZUJyb3dzZXJIaXN0b3J5KCkge1xuICB2YXIgcHJvcHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gICgwLCBfaW52YXJpYW50Mi5kZWZhdWx0KShfRE9NVXRpbHMuY2FuVXNlRE9NLCAnQnJvd3NlciBoaXN0b3J5IG5lZWRzIGEgRE9NJyk7XG5cbiAgdmFyIGdsb2JhbEhpc3RvcnkgPSB3aW5kb3cuaGlzdG9yeTtcbiAgdmFyIGNhblVzZUhpc3RvcnkgPSAoMCwgX0RPTVV0aWxzLnN1cHBvcnRzSGlzdG9yeSkoKTtcbiAgdmFyIG5lZWRzSGFzaENoYW5nZUxpc3RlbmVyID0gISgwLCBfRE9NVXRpbHMuc3VwcG9ydHNQb3BTdGF0ZU9uSGFzaENoYW5nZSkoKTtcblxuICB2YXIgX3Byb3BzJGZvcmNlUmVmcmVzaCA9IHByb3BzLmZvcmNlUmVmcmVzaCxcbiAgICAgIGZvcmNlUmVmcmVzaCA9IF9wcm9wcyRmb3JjZVJlZnJlc2ggPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3Byb3BzJGZvcmNlUmVmcmVzaCxcbiAgICAgIF9wcm9wcyRnZXRVc2VyQ29uZmlybSA9IHByb3BzLmdldFVzZXJDb25maXJtYXRpb24sXG4gICAgICBnZXRVc2VyQ29uZmlybWF0aW9uID0gX3Byb3BzJGdldFVzZXJDb25maXJtID09PSB1bmRlZmluZWQgPyBfRE9NVXRpbHMuZ2V0Q29uZmlybWF0aW9uIDogX3Byb3BzJGdldFVzZXJDb25maXJtLFxuICAgICAgX3Byb3BzJGtleUxlbmd0aCA9IHByb3BzLmtleUxlbmd0aCxcbiAgICAgIGtleUxlbmd0aCA9IF9wcm9wcyRrZXlMZW5ndGggPT09IHVuZGVmaW5lZCA/IDYgOiBfcHJvcHMka2V5TGVuZ3RoO1xuXG4gIHZhciBiYXNlbmFtZSA9IHByb3BzLmJhc2VuYW1lID8gKDAsIF9QYXRoVXRpbHMuc3RyaXBUcmFpbGluZ1NsYXNoKSgoMCwgX1BhdGhVdGlscy5hZGRMZWFkaW5nU2xhc2gpKHByb3BzLmJhc2VuYW1lKSkgOiAnJztcblxuICB2YXIgZ2V0RE9NTG9jYXRpb24gPSBmdW5jdGlvbiBnZXRET01Mb2NhdGlvbihoaXN0b3J5U3RhdGUpIHtcbiAgICB2YXIgX3JlZiA9IGhpc3RvcnlTdGF0ZSB8fCB7fSxcbiAgICAgICAga2V5ID0gX3JlZi5rZXksXG4gICAgICAgIHN0YXRlID0gX3JlZi5zdGF0ZTtcblxuICAgIHZhciBfd2luZG93JGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLFxuICAgICAgICBwYXRobmFtZSA9IF93aW5kb3ckbG9jYXRpb24ucGF0aG5hbWUsXG4gICAgICAgIHNlYXJjaCA9IF93aW5kb3ckbG9jYXRpb24uc2VhcmNoLFxuICAgICAgICBoYXNoID0gX3dpbmRvdyRsb2NhdGlvbi5oYXNoO1xuXG5cbiAgICB2YXIgcGF0aCA9IHBhdGhuYW1lICsgc2VhcmNoICsgaGFzaDtcblxuICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkoIWJhc2VuYW1lIHx8ICgwLCBfUGF0aFV0aWxzLmhhc0Jhc2VuYW1lKShwYXRoLCBiYXNlbmFtZSksICdZb3UgYXJlIGF0dGVtcHRpbmcgdG8gdXNlIGEgYmFzZW5hbWUgb24gYSBwYWdlIHdob3NlIFVSTCBwYXRoIGRvZXMgbm90IGJlZ2luICcgKyAnd2l0aCB0aGUgYmFzZW5hbWUuIEV4cGVjdGVkIHBhdGggXCInICsgcGF0aCArICdcIiB0byBiZWdpbiB3aXRoIFwiJyArIGJhc2VuYW1lICsgJ1wiLicpO1xuXG4gICAgaWYgKGJhc2VuYW1lKSBwYXRoID0gKDAsIF9QYXRoVXRpbHMuc3RyaXBCYXNlbmFtZSkocGF0aCwgYmFzZW5hbWUpO1xuXG4gICAgcmV0dXJuICgwLCBfTG9jYXRpb25VdGlscy5jcmVhdGVMb2NhdGlvbikocGF0aCwgc3RhdGUsIGtleSk7XG4gIH07XG5cbiAgdmFyIGNyZWF0ZUtleSA9IGZ1bmN0aW9uIGNyZWF0ZUtleSgpIHtcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIGtleUxlbmd0aCk7XG4gIH07XG5cbiAgdmFyIHRyYW5zaXRpb25NYW5hZ2VyID0gKDAsIF9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcjIuZGVmYXVsdCkoKTtcblxuICB2YXIgc2V0U3RhdGUgPSBmdW5jdGlvbiBzZXRTdGF0ZShuZXh0U3RhdGUpIHtcbiAgICBfZXh0ZW5kcyhoaXN0b3J5LCBuZXh0U3RhdGUpO1xuXG4gICAgaGlzdG9yeS5sZW5ndGggPSBnbG9iYWxIaXN0b3J5Lmxlbmd0aDtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLm5vdGlmeUxpc3RlbmVycyhoaXN0b3J5LmxvY2F0aW9uLCBoaXN0b3J5LmFjdGlvbik7XG4gIH07XG5cbiAgdmFyIGhhbmRsZVBvcFN0YXRlID0gZnVuY3Rpb24gaGFuZGxlUG9wU3RhdGUoZXZlbnQpIHtcbiAgICAvLyBJZ25vcmUgZXh0cmFuZW91cyBwb3BzdGF0ZSBldmVudHMgaW4gV2ViS2l0LlxuICAgIGlmICgoMCwgX0RPTVV0aWxzLmlzRXh0cmFuZW91c1BvcHN0YXRlRXZlbnQpKGV2ZW50KSkgcmV0dXJuO1xuXG4gICAgaGFuZGxlUG9wKGdldERPTUxvY2F0aW9uKGV2ZW50LnN0YXRlKSk7XG4gIH07XG5cbiAgdmFyIGhhbmRsZUhhc2hDaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVIYXNoQ2hhbmdlKCkge1xuICAgIGhhbmRsZVBvcChnZXRET01Mb2NhdGlvbihnZXRIaXN0b3J5U3RhdGUoKSkpO1xuICB9O1xuXG4gIHZhciBmb3JjZU5leHRQb3AgPSBmYWxzZTtcblxuICB2YXIgaGFuZGxlUG9wID0gZnVuY3Rpb24gaGFuZGxlUG9wKGxvY2F0aW9uKSB7XG4gICAgaWYgKGZvcmNlTmV4dFBvcCkge1xuICAgICAgZm9yY2VOZXh0UG9wID0gZmFsc2U7XG4gICAgICBzZXRTdGF0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYWN0aW9uID0gJ1BPUCc7XG5cbiAgICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICAgIGlmIChvaykge1xuICAgICAgICAgIHNldFN0YXRlKHsgYWN0aW9uOiBhY3Rpb24sIGxvY2F0aW9uOiBsb2NhdGlvbiB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXZlcnRQb3AobG9jYXRpb24pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHJldmVydFBvcCA9IGZ1bmN0aW9uIHJldmVydFBvcChmcm9tTG9jYXRpb24pIHtcbiAgICB2YXIgdG9Mb2NhdGlvbiA9IGhpc3RvcnkubG9jYXRpb247XG5cbiAgICAvLyBUT0RPOiBXZSBjb3VsZCBwcm9iYWJseSBtYWtlIHRoaXMgbW9yZSByZWxpYWJsZSBieVxuICAgIC8vIGtlZXBpbmcgYSBsaXN0IG9mIGtleXMgd2UndmUgc2VlbiBpbiBzZXNzaW9uU3RvcmFnZS5cbiAgICAvLyBJbnN0ZWFkLCB3ZSBqdXN0IGRlZmF1bHQgdG8gMCBmb3Iga2V5cyB3ZSBkb24ndCBrbm93LlxuXG4gICAgdmFyIHRvSW5kZXggPSBhbGxLZXlzLmluZGV4T2YodG9Mb2NhdGlvbi5rZXkpO1xuXG4gICAgaWYgKHRvSW5kZXggPT09IC0xKSB0b0luZGV4ID0gMDtcblxuICAgIHZhciBmcm9tSW5kZXggPSBhbGxLZXlzLmluZGV4T2YoZnJvbUxvY2F0aW9uLmtleSk7XG5cbiAgICBpZiAoZnJvbUluZGV4ID09PSAtMSkgZnJvbUluZGV4ID0gMDtcblxuICAgIHZhciBkZWx0YSA9IHRvSW5kZXggLSBmcm9tSW5kZXg7XG5cbiAgICBpZiAoZGVsdGEpIHtcbiAgICAgIGZvcmNlTmV4dFBvcCA9IHRydWU7XG4gICAgICBnbyhkZWx0YSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBpbml0aWFsTG9jYXRpb24gPSBnZXRET01Mb2NhdGlvbihnZXRIaXN0b3J5U3RhdGUoKSk7XG4gIHZhciBhbGxLZXlzID0gW2luaXRpYWxMb2NhdGlvbi5rZXldO1xuXG4gIC8vIFB1YmxpYyBpbnRlcmZhY2VcblxuICB2YXIgY3JlYXRlSHJlZiA9IGZ1bmN0aW9uIGNyZWF0ZUhyZWYobG9jYXRpb24pIHtcbiAgICByZXR1cm4gYmFzZW5hbWUgKyAoMCwgX1BhdGhVdGlscy5jcmVhdGVQYXRoKShsb2NhdGlvbik7XG4gIH07XG5cbiAgdmFyIHB1c2ggPSBmdW5jdGlvbiBwdXNoKHBhdGgsIHN0YXRlKSB7XG4gICAgKDAsIF93YXJuaW5nMi5kZWZhdWx0KSghKCh0eXBlb2YgcGF0aCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YocGF0aCkpID09PSAnb2JqZWN0JyAmJiBwYXRoLnN0YXRlICE9PSB1bmRlZmluZWQgJiYgc3RhdGUgIT09IHVuZGVmaW5lZCksICdZb3Ugc2hvdWxkIGF2b2lkIHByb3ZpZGluZyBhIDJuZCBzdGF0ZSBhcmd1bWVudCB0byBwdXNoIHdoZW4gdGhlIDFzdCAnICsgJ2FyZ3VtZW50IGlzIGEgbG9jYXRpb24tbGlrZSBvYmplY3QgdGhhdCBhbHJlYWR5IGhhcyBzdGF0ZTsgaXQgaXMgaWdub3JlZCcpO1xuXG4gICAgdmFyIGFjdGlvbiA9ICdQVVNIJztcbiAgICB2YXIgbG9jYXRpb24gPSAoMCwgX0xvY2F0aW9uVXRpbHMuY3JlYXRlTG9jYXRpb24pKHBhdGgsIHN0YXRlLCBjcmVhdGVLZXkoKSwgaGlzdG9yeS5sb2NhdGlvbik7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKCFvaykgcmV0dXJuO1xuXG4gICAgICB2YXIgaHJlZiA9IGNyZWF0ZUhyZWYobG9jYXRpb24pO1xuICAgICAgdmFyIGtleSA9IGxvY2F0aW9uLmtleSxcbiAgICAgICAgICBzdGF0ZSA9IGxvY2F0aW9uLnN0YXRlO1xuXG5cbiAgICAgIGlmIChjYW5Vc2VIaXN0b3J5KSB7XG4gICAgICAgIGdsb2JhbEhpc3RvcnkucHVzaFN0YXRlKHsga2V5OiBrZXksIHN0YXRlOiBzdGF0ZSB9LCBudWxsLCBocmVmKTtcblxuICAgICAgICBpZiAoZm9yY2VSZWZyZXNoKSB7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBocmVmO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBwcmV2SW5kZXggPSBhbGxLZXlzLmluZGV4T2YoaGlzdG9yeS5sb2NhdGlvbi5rZXkpO1xuICAgICAgICAgIHZhciBuZXh0S2V5cyA9IGFsbEtleXMuc2xpY2UoMCwgcHJldkluZGV4ID09PSAtMSA/IDAgOiBwcmV2SW5kZXggKyAxKTtcblxuICAgICAgICAgIG5leHRLZXlzLnB1c2gobG9jYXRpb24ua2V5KTtcbiAgICAgICAgICBhbGxLZXlzID0gbmV4dEtleXM7XG5cbiAgICAgICAgICBzZXRTdGF0ZSh7IGFjdGlvbjogYWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24gfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkoc3RhdGUgPT09IHVuZGVmaW5lZCwgJ0Jyb3dzZXIgaGlzdG9yeSBjYW5ub3QgcHVzaCBzdGF0ZSBpbiBicm93c2VycyB0aGF0IGRvIG5vdCBzdXBwb3J0IEhUTUw1IGhpc3RvcnknKTtcblxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhyZWY7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIHJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlKHBhdGgsIHN0YXRlKSB7XG4gICAgKDAsIF93YXJuaW5nMi5kZWZhdWx0KSghKCh0eXBlb2YgcGF0aCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YocGF0aCkpID09PSAnb2JqZWN0JyAmJiBwYXRoLnN0YXRlICE9PSB1bmRlZmluZWQgJiYgc3RhdGUgIT09IHVuZGVmaW5lZCksICdZb3Ugc2hvdWxkIGF2b2lkIHByb3ZpZGluZyBhIDJuZCBzdGF0ZSBhcmd1bWVudCB0byByZXBsYWNlIHdoZW4gdGhlIDFzdCAnICsgJ2FyZ3VtZW50IGlzIGEgbG9jYXRpb24tbGlrZSBvYmplY3QgdGhhdCBhbHJlYWR5IGhhcyBzdGF0ZTsgaXQgaXMgaWdub3JlZCcpO1xuXG4gICAgdmFyIGFjdGlvbiA9ICdSRVBMQUNFJztcbiAgICB2YXIgbG9jYXRpb24gPSAoMCwgX0xvY2F0aW9uVXRpbHMuY3JlYXRlTG9jYXRpb24pKHBhdGgsIHN0YXRlLCBjcmVhdGVLZXkoKSwgaGlzdG9yeS5sb2NhdGlvbik7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKCFvaykgcmV0dXJuO1xuXG4gICAgICB2YXIgaHJlZiA9IGNyZWF0ZUhyZWYobG9jYXRpb24pO1xuICAgICAgdmFyIGtleSA9IGxvY2F0aW9uLmtleSxcbiAgICAgICAgICBzdGF0ZSA9IGxvY2F0aW9uLnN0YXRlO1xuXG5cbiAgICAgIGlmIChjYW5Vc2VIaXN0b3J5KSB7XG4gICAgICAgIGdsb2JhbEhpc3RvcnkucmVwbGFjZVN0YXRlKHsga2V5OiBrZXksIHN0YXRlOiBzdGF0ZSB9LCBudWxsLCBocmVmKTtcblxuICAgICAgICBpZiAoZm9yY2VSZWZyZXNoKSB7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoaHJlZik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHByZXZJbmRleCA9IGFsbEtleXMuaW5kZXhPZihoaXN0b3J5LmxvY2F0aW9uLmtleSk7XG5cbiAgICAgICAgICBpZiAocHJldkluZGV4ICE9PSAtMSkgYWxsS2V5c1twcmV2SW5kZXhdID0gbG9jYXRpb24ua2V5O1xuXG4gICAgICAgICAgc2V0U3RhdGUoeyBhY3Rpb246IGFjdGlvbiwgbG9jYXRpb246IGxvY2F0aW9uIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKHN0YXRlID09PSB1bmRlZmluZWQsICdCcm93c2VyIGhpc3RvcnkgY2Fubm90IHJlcGxhY2Ugc3RhdGUgaW4gYnJvd3NlcnMgdGhhdCBkbyBub3Qgc3VwcG9ydCBIVE1MNSBoaXN0b3J5Jyk7XG5cbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoaHJlZik7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdvID0gZnVuY3Rpb24gZ28obikge1xuICAgIGdsb2JhbEhpc3RvcnkuZ28obik7XG4gIH07XG5cbiAgdmFyIGdvQmFjayA9IGZ1bmN0aW9uIGdvQmFjaygpIHtcbiAgICByZXR1cm4gZ28oLTEpO1xuICB9O1xuXG4gIHZhciBnb0ZvcndhcmQgPSBmdW5jdGlvbiBnb0ZvcndhcmQoKSB7XG4gICAgcmV0dXJuIGdvKDEpO1xuICB9O1xuXG4gIHZhciBsaXN0ZW5lckNvdW50ID0gMDtcblxuICB2YXIgY2hlY2tET01MaXN0ZW5lcnMgPSBmdW5jdGlvbiBjaGVja0RPTUxpc3RlbmVycyhkZWx0YSkge1xuICAgIGxpc3RlbmVyQ291bnQgKz0gZGVsdGE7XG5cbiAgICBpZiAobGlzdGVuZXJDb3VudCA9PT0gMSkge1xuICAgICAgKDAsIF9ET01VdGlscy5hZGRFdmVudExpc3RlbmVyKSh3aW5kb3csIFBvcFN0YXRlRXZlbnQsIGhhbmRsZVBvcFN0YXRlKTtcblxuICAgICAgaWYgKG5lZWRzSGFzaENoYW5nZUxpc3RlbmVyKSAoMCwgX0RPTVV0aWxzLmFkZEV2ZW50TGlzdGVuZXIpKHdpbmRvdywgSGFzaENoYW5nZUV2ZW50LCBoYW5kbGVIYXNoQ2hhbmdlKTtcbiAgICB9IGVsc2UgaWYgKGxpc3RlbmVyQ291bnQgPT09IDApIHtcbiAgICAgICgwLCBfRE9NVXRpbHMucmVtb3ZlRXZlbnRMaXN0ZW5lcikod2luZG93LCBQb3BTdGF0ZUV2ZW50LCBoYW5kbGVQb3BTdGF0ZSk7XG5cbiAgICAgIGlmIChuZWVkc0hhc2hDaGFuZ2VMaXN0ZW5lcikgKDAsIF9ET01VdGlscy5yZW1vdmVFdmVudExpc3RlbmVyKSh3aW5kb3csIEhhc2hDaGFuZ2VFdmVudCwgaGFuZGxlSGFzaENoYW5nZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBpc0Jsb2NrZWQgPSBmYWxzZTtcblxuICB2YXIgYmxvY2sgPSBmdW5jdGlvbiBibG9jaygpIHtcbiAgICB2YXIgcHJvbXB0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmYWxzZTtcblxuICAgIHZhciB1bmJsb2NrID0gdHJhbnNpdGlvbk1hbmFnZXIuc2V0UHJvbXB0KHByb21wdCk7XG5cbiAgICBpZiAoIWlzQmxvY2tlZCkge1xuICAgICAgY2hlY2tET01MaXN0ZW5lcnMoMSk7XG4gICAgICBpc0Jsb2NrZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaXNCbG9ja2VkKSB7XG4gICAgICAgIGlzQmxvY2tlZCA9IGZhbHNlO1xuICAgICAgICBjaGVja0RPTUxpc3RlbmVycygtMSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bmJsb2NrKCk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgbGlzdGVuID0gZnVuY3Rpb24gbGlzdGVuKGxpc3RlbmVyKSB7XG4gICAgdmFyIHVubGlzdGVuID0gdHJhbnNpdGlvbk1hbmFnZXIuYXBwZW5kTGlzdGVuZXIobGlzdGVuZXIpO1xuICAgIGNoZWNrRE9NTGlzdGVuZXJzKDEpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrRE9NTGlzdGVuZXJzKC0xKTtcbiAgICAgIHVubGlzdGVuKCk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgaGlzdG9yeSA9IHtcbiAgICBsZW5ndGg6IGdsb2JhbEhpc3RvcnkubGVuZ3RoLFxuICAgIGFjdGlvbjogJ1BPUCcsXG4gICAgbG9jYXRpb246IGluaXRpYWxMb2NhdGlvbixcbiAgICBjcmVhdGVIcmVmOiBjcmVhdGVIcmVmLFxuICAgIHB1c2g6IHB1c2gsXG4gICAgcmVwbGFjZTogcmVwbGFjZSxcbiAgICBnbzogZ28sXG4gICAgZ29CYWNrOiBnb0JhY2ssXG4gICAgZ29Gb3J3YXJkOiBnb0ZvcndhcmQsXG4gICAgYmxvY2s6IGJsb2NrLFxuICAgIGxpc3RlbjogbGlzdGVuXG4gIH07XG5cbiAgcmV0dXJuIGhpc3Rvcnk7XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBjcmVhdGVCcm93c2VySGlzdG9yeTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDEzNjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF93YXJuaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cbnZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblxudmFyIF9pbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblxudmFyIF9pbnZhcmlhbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW52YXJpYW50KTtcblxudmFyIF9Mb2NhdGlvblV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cbnZhciBfUGF0aFV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSk7XG5cbnZhciBfY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblxudmFyIF9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcik7XG5cbnZhciBfRE9NVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg3KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIEhhc2hDaGFuZ2VFdmVudCA9ICdoYXNoY2hhbmdlJztcblxudmFyIEhhc2hQYXRoQ29kZXJzID0ge1xuICBoYXNoYmFuZzoge1xuICAgIGVuY29kZVBhdGg6IGZ1bmN0aW9uIGVuY29kZVBhdGgocGF0aCkge1xuICAgICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnIScgPyBwYXRoIDogJyEvJyArICgwLCBfUGF0aFV0aWxzLnN0cmlwTGVhZGluZ1NsYXNoKShwYXRoKTtcbiAgICB9LFxuICAgIGRlY29kZVBhdGg6IGZ1bmN0aW9uIGRlY29kZVBhdGgocGF0aCkge1xuICAgICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnIScgPyBwYXRoLnN1YnN0cigxKSA6IHBhdGg7XG4gICAgfVxuICB9LFxuICBub3NsYXNoOiB7XG4gICAgZW5jb2RlUGF0aDogX1BhdGhVdGlscy5zdHJpcExlYWRpbmdTbGFzaCxcbiAgICBkZWNvZGVQYXRoOiBfUGF0aFV0aWxzLmFkZExlYWRpbmdTbGFzaFxuICB9LFxuICBzbGFzaDoge1xuICAgIGVuY29kZVBhdGg6IF9QYXRoVXRpbHMuYWRkTGVhZGluZ1NsYXNoLFxuICAgIGRlY29kZVBhdGg6IF9QYXRoVXRpbHMuYWRkTGVhZGluZ1NsYXNoXG4gIH1cbn07XG5cbnZhciBnZXRIYXNoUGF0aCA9IGZ1bmN0aW9uIGdldEhhc2hQYXRoKCkge1xuICAvLyBXZSBjYW4ndCB1c2Ugd2luZG93LmxvY2F0aW9uLmhhc2ggaGVyZSBiZWNhdXNlIGl0J3Mgbm90XG4gIC8vIGNvbnNpc3RlbnQgYWNyb3NzIGJyb3dzZXJzIC0gRmlyZWZveCB3aWxsIHByZS1kZWNvZGUgaXQhXG4gIHZhciBocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIHZhciBoYXNoSW5kZXggPSBocmVmLmluZGV4T2YoJyMnKTtcbiAgcmV0dXJuIGhhc2hJbmRleCA9PT0gLTEgPyAnJyA6IGhyZWYuc3Vic3RyaW5nKGhhc2hJbmRleCArIDEpO1xufTtcblxudmFyIHB1c2hIYXNoUGF0aCA9IGZ1bmN0aW9uIHB1c2hIYXNoUGF0aChwYXRoKSB7XG4gIHJldHVybiB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHBhdGg7XG59O1xuXG52YXIgcmVwbGFjZUhhc2hQYXRoID0gZnVuY3Rpb24gcmVwbGFjZUhhc2hQYXRoKHBhdGgpIHtcbiAgdmFyIGhhc2hJbmRleCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoJyMnKTtcblxuICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSh3aW5kb3cubG9jYXRpb24uaHJlZi5zbGljZSgwLCBoYXNoSW5kZXggPj0gMCA/IGhhc2hJbmRleCA6IDApICsgJyMnICsgcGF0aCk7XG59O1xuXG52YXIgY3JlYXRlSGFzaEhpc3RvcnkgPSBmdW5jdGlvbiBjcmVhdGVIYXNoSGlzdG9yeSgpIHtcbiAgdmFyIHByb3BzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICAoMCwgX2ludmFyaWFudDIuZGVmYXVsdCkoX0RPTVV0aWxzLmNhblVzZURPTSwgJ0hhc2ggaGlzdG9yeSBuZWVkcyBhIERPTScpO1xuXG4gIHZhciBnbG9iYWxIaXN0b3J5ID0gd2luZG93Lmhpc3Rvcnk7XG4gIHZhciBjYW5Hb1dpdGhvdXRSZWxvYWQgPSAoMCwgX0RPTVV0aWxzLnN1cHBvcnRzR29XaXRob3V0UmVsb2FkVXNpbmdIYXNoKSgpO1xuXG4gIHZhciBfcHJvcHMkZ2V0VXNlckNvbmZpcm0gPSBwcm9wcy5nZXRVc2VyQ29uZmlybWF0aW9uLFxuICAgICAgZ2V0VXNlckNvbmZpcm1hdGlvbiA9IF9wcm9wcyRnZXRVc2VyQ29uZmlybSA9PT0gdW5kZWZpbmVkID8gX0RPTVV0aWxzLmdldENvbmZpcm1hdGlvbiA6IF9wcm9wcyRnZXRVc2VyQ29uZmlybSxcbiAgICAgIF9wcm9wcyRoYXNoVHlwZSA9IHByb3BzLmhhc2hUeXBlLFxuICAgICAgaGFzaFR5cGUgPSBfcHJvcHMkaGFzaFR5cGUgPT09IHVuZGVmaW5lZCA/ICdzbGFzaCcgOiBfcHJvcHMkaGFzaFR5cGU7XG5cbiAgdmFyIGJhc2VuYW1lID0gcHJvcHMuYmFzZW5hbWUgPyAoMCwgX1BhdGhVdGlscy5zdHJpcFRyYWlsaW5nU2xhc2gpKCgwLCBfUGF0aFV0aWxzLmFkZExlYWRpbmdTbGFzaCkocHJvcHMuYmFzZW5hbWUpKSA6ICcnO1xuXG4gIHZhciBfSGFzaFBhdGhDb2RlcnMkaGFzaFQgPSBIYXNoUGF0aENvZGVyc1toYXNoVHlwZV0sXG4gICAgICBlbmNvZGVQYXRoID0gX0hhc2hQYXRoQ29kZXJzJGhhc2hULmVuY29kZVBhdGgsXG4gICAgICBkZWNvZGVQYXRoID0gX0hhc2hQYXRoQ29kZXJzJGhhc2hULmRlY29kZVBhdGg7XG5cblxuICB2YXIgZ2V0RE9NTG9jYXRpb24gPSBmdW5jdGlvbiBnZXRET01Mb2NhdGlvbigpIHtcbiAgICB2YXIgcGF0aCA9IGRlY29kZVBhdGgoZ2V0SGFzaFBhdGgoKSk7XG5cbiAgICAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKCFiYXNlbmFtZSB8fCAoMCwgX1BhdGhVdGlscy5oYXNCYXNlbmFtZSkocGF0aCwgYmFzZW5hbWUpLCAnWW91IGFyZSBhdHRlbXB0aW5nIHRvIHVzZSBhIGJhc2VuYW1lIG9uIGEgcGFnZSB3aG9zZSBVUkwgcGF0aCBkb2VzIG5vdCBiZWdpbiAnICsgJ3dpdGggdGhlIGJhc2VuYW1lLiBFeHBlY3RlZCBwYXRoIFwiJyArIHBhdGggKyAnXCIgdG8gYmVnaW4gd2l0aCBcIicgKyBiYXNlbmFtZSArICdcIi4nKTtcblxuICAgIGlmIChiYXNlbmFtZSkgcGF0aCA9ICgwLCBfUGF0aFV0aWxzLnN0cmlwQmFzZW5hbWUpKHBhdGgsIGJhc2VuYW1lKTtcblxuICAgIHJldHVybiAoMCwgX0xvY2F0aW9uVXRpbHMuY3JlYXRlTG9jYXRpb24pKHBhdGgpO1xuICB9O1xuXG4gIHZhciB0cmFuc2l0aW9uTWFuYWdlciA9ICgwLCBfY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIyLmRlZmF1bHQpKCk7XG5cbiAgdmFyIHNldFN0YXRlID0gZnVuY3Rpb24gc2V0U3RhdGUobmV4dFN0YXRlKSB7XG4gICAgX2V4dGVuZHMoaGlzdG9yeSwgbmV4dFN0YXRlKTtcblxuICAgIGhpc3RvcnkubGVuZ3RoID0gZ2xvYmFsSGlzdG9yeS5sZW5ndGg7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5ub3RpZnlMaXN0ZW5lcnMoaGlzdG9yeS5sb2NhdGlvbiwgaGlzdG9yeS5hY3Rpb24pO1xuICB9O1xuXG4gIHZhciBmb3JjZU5leHRQb3AgPSBmYWxzZTtcbiAgdmFyIGlnbm9yZVBhdGggPSBudWxsO1xuXG4gIHZhciBoYW5kbGVIYXNoQ2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlSGFzaENoYW5nZSgpIHtcbiAgICB2YXIgcGF0aCA9IGdldEhhc2hQYXRoKCk7XG4gICAgdmFyIGVuY29kZWRQYXRoID0gZW5jb2RlUGF0aChwYXRoKTtcblxuICAgIGlmIChwYXRoICE9PSBlbmNvZGVkUGF0aCkge1xuICAgICAgLy8gRW5zdXJlIHdlIGFsd2F5cyBoYXZlIGEgcHJvcGVybHktZW5jb2RlZCBoYXNoLlxuICAgICAgcmVwbGFjZUhhc2hQYXRoKGVuY29kZWRQYXRoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGxvY2F0aW9uID0gZ2V0RE9NTG9jYXRpb24oKTtcbiAgICAgIHZhciBwcmV2TG9jYXRpb24gPSBoaXN0b3J5LmxvY2F0aW9uO1xuXG4gICAgICBpZiAoIWZvcmNlTmV4dFBvcCAmJiAoMCwgX0xvY2F0aW9uVXRpbHMubG9jYXRpb25zQXJlRXF1YWwpKHByZXZMb2NhdGlvbiwgbG9jYXRpb24pKSByZXR1cm47IC8vIEEgaGFzaGNoYW5nZSBkb2Vzbid0IGFsd2F5cyA9PSBsb2NhdGlvbiBjaGFuZ2UuXG5cbiAgICAgIGlmIChpZ25vcmVQYXRoID09PSAoMCwgX1BhdGhVdGlscy5jcmVhdGVQYXRoKShsb2NhdGlvbikpIHJldHVybjsgLy8gSWdub3JlIHRoaXMgY2hhbmdlOyB3ZSBhbHJlYWR5IHNldFN0YXRlIGluIHB1c2gvcmVwbGFjZS5cblxuICAgICAgaWdub3JlUGF0aCA9IG51bGw7XG5cbiAgICAgIGhhbmRsZVBvcChsb2NhdGlvbik7XG4gICAgfVxuICB9O1xuXG4gIHZhciBoYW5kbGVQb3AgPSBmdW5jdGlvbiBoYW5kbGVQb3AobG9jYXRpb24pIHtcbiAgICBpZiAoZm9yY2VOZXh0UG9wKSB7XG4gICAgICBmb3JjZU5leHRQb3AgPSBmYWxzZTtcbiAgICAgIHNldFN0YXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhY3Rpb24gPSAnUE9QJztcblxuICAgICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgICAgaWYgKG9rKSB7XG4gICAgICAgICAgc2V0U3RhdGUoeyBhY3Rpb246IGFjdGlvbiwgbG9jYXRpb246IGxvY2F0aW9uIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldmVydFBvcChsb2NhdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICB2YXIgcmV2ZXJ0UG9wID0gZnVuY3Rpb24gcmV2ZXJ0UG9wKGZyb21Mb2NhdGlvbikge1xuICAgIHZhciB0b0xvY2F0aW9uID0gaGlzdG9yeS5sb2NhdGlvbjtcblxuICAgIC8vIFRPRE86IFdlIGNvdWxkIHByb2JhYmx5IG1ha2UgdGhpcyBtb3JlIHJlbGlhYmxlIGJ5XG4gICAgLy8ga2VlcGluZyBhIGxpc3Qgb2YgcGF0aHMgd2UndmUgc2VlbiBpbiBzZXNzaW9uU3RvcmFnZS5cbiAgICAvLyBJbnN0ZWFkLCB3ZSBqdXN0IGRlZmF1bHQgdG8gMCBmb3IgcGF0aHMgd2UgZG9uJ3Qga25vdy5cblxuICAgIHZhciB0b0luZGV4ID0gYWxsUGF0aHMubGFzdEluZGV4T2YoKDAsIF9QYXRoVXRpbHMuY3JlYXRlUGF0aCkodG9Mb2NhdGlvbikpO1xuXG4gICAgaWYgKHRvSW5kZXggPT09IC0xKSB0b0luZGV4ID0gMDtcblxuICAgIHZhciBmcm9tSW5kZXggPSBhbGxQYXRocy5sYXN0SW5kZXhPZigoMCwgX1BhdGhVdGlscy5jcmVhdGVQYXRoKShmcm9tTG9jYXRpb24pKTtcblxuICAgIGlmIChmcm9tSW5kZXggPT09IC0xKSBmcm9tSW5kZXggPSAwO1xuXG4gICAgdmFyIGRlbHRhID0gdG9JbmRleCAtIGZyb21JbmRleDtcblxuICAgIGlmIChkZWx0YSkge1xuICAgICAgZm9yY2VOZXh0UG9wID0gdHJ1ZTtcbiAgICAgIGdvKGRlbHRhKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gRW5zdXJlIHRoZSBoYXNoIGlzIGVuY29kZWQgcHJvcGVybHkgYmVmb3JlIGRvaW5nIGFueXRoaW5nIGVsc2UuXG4gIHZhciBwYXRoID0gZ2V0SGFzaFBhdGgoKTtcbiAgdmFyIGVuY29kZWRQYXRoID0gZW5jb2RlUGF0aChwYXRoKTtcblxuICBpZiAocGF0aCAhPT0gZW5jb2RlZFBhdGgpIHJlcGxhY2VIYXNoUGF0aChlbmNvZGVkUGF0aCk7XG5cbiAgdmFyIGluaXRpYWxMb2NhdGlvbiA9IGdldERPTUxvY2F0aW9uKCk7XG4gIHZhciBhbGxQYXRocyA9IFsoMCwgX1BhdGhVdGlscy5jcmVhdGVQYXRoKShpbml0aWFsTG9jYXRpb24pXTtcblxuICAvLyBQdWJsaWMgaW50ZXJmYWNlXG5cbiAgdmFyIGNyZWF0ZUhyZWYgPSBmdW5jdGlvbiBjcmVhdGVIcmVmKGxvY2F0aW9uKSB7XG4gICAgcmV0dXJuICcjJyArIGVuY29kZVBhdGgoYmFzZW5hbWUgKyAoMCwgX1BhdGhVdGlscy5jcmVhdGVQYXRoKShsb2NhdGlvbikpO1xuICB9O1xuXG4gIHZhciBwdXNoID0gZnVuY3Rpb24gcHVzaChwYXRoLCBzdGF0ZSkge1xuICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkoc3RhdGUgPT09IHVuZGVmaW5lZCwgJ0hhc2ggaGlzdG9yeSBjYW5ub3QgcHVzaCBzdGF0ZTsgaXQgaXMgaWdub3JlZCcpO1xuXG4gICAgdmFyIGFjdGlvbiA9ICdQVVNIJztcbiAgICB2YXIgbG9jYXRpb24gPSAoMCwgX0xvY2F0aW9uVXRpbHMuY3JlYXRlTG9jYXRpb24pKHBhdGgsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBoaXN0b3J5LmxvY2F0aW9uKTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG5cbiAgICAgIHZhciBwYXRoID0gKDAsIF9QYXRoVXRpbHMuY3JlYXRlUGF0aCkobG9jYXRpb24pO1xuICAgICAgdmFyIGVuY29kZWRQYXRoID0gZW5jb2RlUGF0aChiYXNlbmFtZSArIHBhdGgpO1xuICAgICAgdmFyIGhhc2hDaGFuZ2VkID0gZ2V0SGFzaFBhdGgoKSAhPT0gZW5jb2RlZFBhdGg7XG5cbiAgICAgIGlmIChoYXNoQ2hhbmdlZCkge1xuICAgICAgICAvLyBXZSBjYW5ub3QgdGVsbCBpZiBhIGhhc2hjaGFuZ2Ugd2FzIGNhdXNlZCBieSBhIFBVU0gsIHNvIHdlJ2RcbiAgICAgICAgLy8gcmF0aGVyIHNldFN0YXRlIGhlcmUgYW5kIGlnbm9yZSB0aGUgaGFzaGNoYW5nZS4gVGhlIGNhdmVhdCBoZXJlXG4gICAgICAgIC8vIGlzIHRoYXQgb3RoZXIgaGFzaCBoaXN0b3JpZXMgaW4gdGhlIHBhZ2Ugd2lsbCBjb25zaWRlciBpdCBhIFBPUC5cbiAgICAgICAgaWdub3JlUGF0aCA9IHBhdGg7XG4gICAgICAgIHB1c2hIYXNoUGF0aChlbmNvZGVkUGF0aCk7XG5cbiAgICAgICAgdmFyIHByZXZJbmRleCA9IGFsbFBhdGhzLmxhc3RJbmRleE9mKCgwLCBfUGF0aFV0aWxzLmNyZWF0ZVBhdGgpKGhpc3RvcnkubG9jYXRpb24pKTtcbiAgICAgICAgdmFyIG5leHRQYXRocyA9IGFsbFBhdGhzLnNsaWNlKDAsIHByZXZJbmRleCA9PT0gLTEgPyAwIDogcHJldkluZGV4ICsgMSk7XG5cbiAgICAgICAgbmV4dFBhdGhzLnB1c2gocGF0aCk7XG4gICAgICAgIGFsbFBhdGhzID0gbmV4dFBhdGhzO1xuXG4gICAgICAgIHNldFN0YXRlKHsgYWN0aW9uOiBhY3Rpb24sIGxvY2F0aW9uOiBsb2NhdGlvbiB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkoZmFsc2UsICdIYXNoIGhpc3RvcnkgY2Fubm90IFBVU0ggdGhlIHNhbWUgcGF0aDsgYSBuZXcgZW50cnkgd2lsbCBub3QgYmUgYWRkZWQgdG8gdGhlIGhpc3Rvcnkgc3RhY2snKTtcblxuICAgICAgICBzZXRTdGF0ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHZhciByZXBsYWNlID0gZnVuY3Rpb24gcmVwbGFjZShwYXRoLCBzdGF0ZSkge1xuICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkoc3RhdGUgPT09IHVuZGVmaW5lZCwgJ0hhc2ggaGlzdG9yeSBjYW5ub3QgcmVwbGFjZSBzdGF0ZTsgaXQgaXMgaWdub3JlZCcpO1xuXG4gICAgdmFyIGFjdGlvbiA9ICdSRVBMQUNFJztcbiAgICB2YXIgbG9jYXRpb24gPSAoMCwgX0xvY2F0aW9uVXRpbHMuY3JlYXRlTG9jYXRpb24pKHBhdGgsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBoaXN0b3J5LmxvY2F0aW9uKTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG5cbiAgICAgIHZhciBwYXRoID0gKDAsIF9QYXRoVXRpbHMuY3JlYXRlUGF0aCkobG9jYXRpb24pO1xuICAgICAgdmFyIGVuY29kZWRQYXRoID0gZW5jb2RlUGF0aChiYXNlbmFtZSArIHBhdGgpO1xuICAgICAgdmFyIGhhc2hDaGFuZ2VkID0gZ2V0SGFzaFBhdGgoKSAhPT0gZW5jb2RlZFBhdGg7XG5cbiAgICAgIGlmIChoYXNoQ2hhbmdlZCkge1xuICAgICAgICAvLyBXZSBjYW5ub3QgdGVsbCBpZiBhIGhhc2hjaGFuZ2Ugd2FzIGNhdXNlZCBieSBhIFJFUExBQ0UsIHNvIHdlJ2RcbiAgICAgICAgLy8gcmF0aGVyIHNldFN0YXRlIGhlcmUgYW5kIGlnbm9yZSB0aGUgaGFzaGNoYW5nZS4gVGhlIGNhdmVhdCBoZXJlXG4gICAgICAgIC8vIGlzIHRoYXQgb3RoZXIgaGFzaCBoaXN0b3JpZXMgaW4gdGhlIHBhZ2Ugd2lsbCBjb25zaWRlciBpdCBhIFBPUC5cbiAgICAgICAgaWdub3JlUGF0aCA9IHBhdGg7XG4gICAgICAgIHJlcGxhY2VIYXNoUGF0aChlbmNvZGVkUGF0aCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBwcmV2SW5kZXggPSBhbGxQYXRocy5pbmRleE9mKCgwLCBfUGF0aFV0aWxzLmNyZWF0ZVBhdGgpKGhpc3RvcnkubG9jYXRpb24pKTtcblxuICAgICAgaWYgKHByZXZJbmRleCAhPT0gLTEpIGFsbFBhdGhzW3ByZXZJbmRleF0gPSBwYXRoO1xuXG4gICAgICBzZXRTdGF0ZSh7IGFjdGlvbjogYWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24gfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdvID0gZnVuY3Rpb24gZ28obikge1xuICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkoY2FuR29XaXRob3V0UmVsb2FkLCAnSGFzaCBoaXN0b3J5IGdvKG4pIGNhdXNlcyBhIGZ1bGwgcGFnZSByZWxvYWQgaW4gdGhpcyBicm93c2VyJyk7XG5cbiAgICBnbG9iYWxIaXN0b3J5LmdvKG4pO1xuICB9O1xuXG4gIHZhciBnb0JhY2sgPSBmdW5jdGlvbiBnb0JhY2soKSB7XG4gICAgcmV0dXJuIGdvKC0xKTtcbiAgfTtcblxuICB2YXIgZ29Gb3J3YXJkID0gZnVuY3Rpb24gZ29Gb3J3YXJkKCkge1xuICAgIHJldHVybiBnbygxKTtcbiAgfTtcblxuICB2YXIgbGlzdGVuZXJDb3VudCA9IDA7XG5cbiAgdmFyIGNoZWNrRE9NTGlzdGVuZXJzID0gZnVuY3Rpb24gY2hlY2tET01MaXN0ZW5lcnMoZGVsdGEpIHtcbiAgICBsaXN0ZW5lckNvdW50ICs9IGRlbHRhO1xuXG4gICAgaWYgKGxpc3RlbmVyQ291bnQgPT09IDEpIHtcbiAgICAgICgwLCBfRE9NVXRpbHMuYWRkRXZlbnRMaXN0ZW5lcikod2luZG93LCBIYXNoQ2hhbmdlRXZlbnQsIGhhbmRsZUhhc2hDaGFuZ2UpO1xuICAgIH0gZWxzZSBpZiAobGlzdGVuZXJDb3VudCA9PT0gMCkge1xuICAgICAgKDAsIF9ET01VdGlscy5yZW1vdmVFdmVudExpc3RlbmVyKSh3aW5kb3csIEhhc2hDaGFuZ2VFdmVudCwgaGFuZGxlSGFzaENoYW5nZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBpc0Jsb2NrZWQgPSBmYWxzZTtcblxuICB2YXIgYmxvY2sgPSBmdW5jdGlvbiBibG9jaygpIHtcbiAgICB2YXIgcHJvbXB0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmYWxzZTtcblxuICAgIHZhciB1bmJsb2NrID0gdHJhbnNpdGlvbk1hbmFnZXIuc2V0UHJvbXB0KHByb21wdCk7XG5cbiAgICBpZiAoIWlzQmxvY2tlZCkge1xuICAgICAgY2hlY2tET01MaXN0ZW5lcnMoMSk7XG4gICAgICBpc0Jsb2NrZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaXNCbG9ja2VkKSB7XG4gICAgICAgIGlzQmxvY2tlZCA9IGZhbHNlO1xuICAgICAgICBjaGVja0RPTUxpc3RlbmVycygtMSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bmJsb2NrKCk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgbGlzdGVuID0gZnVuY3Rpb24gbGlzdGVuKGxpc3RlbmVyKSB7XG4gICAgdmFyIHVubGlzdGVuID0gdHJhbnNpdGlvbk1hbmFnZXIuYXBwZW5kTGlzdGVuZXIobGlzdGVuZXIpO1xuICAgIGNoZWNrRE9NTGlzdGVuZXJzKDEpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrRE9NTGlzdGVuZXJzKC0xKTtcbiAgICAgIHVubGlzdGVuKCk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgaGlzdG9yeSA9IHtcbiAgICBsZW5ndGg6IGdsb2JhbEhpc3RvcnkubGVuZ3RoLFxuICAgIGFjdGlvbjogJ1BPUCcsXG4gICAgbG9jYXRpb246IGluaXRpYWxMb2NhdGlvbixcbiAgICBjcmVhdGVIcmVmOiBjcmVhdGVIcmVmLFxuICAgIHB1c2g6IHB1c2gsXG4gICAgcmVwbGFjZTogcmVwbGFjZSxcbiAgICBnbzogZ28sXG4gICAgZ29CYWNrOiBnb0JhY2ssXG4gICAgZ29Gb3J3YXJkOiBnb0ZvcndhcmQsXG4gICAgYmxvY2s6IGJsb2NrLFxuICAgIGxpc3RlbjogbGlzdGVuXG4gIH07XG5cbiAgcmV0dXJuIGhpc3Rvcnk7XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBjcmVhdGVIYXNoSGlzdG9yeTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDEzNzpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX3dhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG52YXIgX1BhdGhVdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpO1xuXG52YXIgX0xvY2F0aW9uVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblxudmFyIF9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpO1xuXG52YXIgX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGNsYW1wID0gZnVuY3Rpb24gY2xhbXAobiwgbG93ZXJCb3VuZCwgdXBwZXJCb3VuZCkge1xuICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgobiwgbG93ZXJCb3VuZCksIHVwcGVyQm91bmQpO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgaGlzdG9yeSBvYmplY3QgdGhhdCBzdG9yZXMgbG9jYXRpb25zIGluIG1lbW9yeS5cbiAqL1xudmFyIGNyZWF0ZU1lbW9yeUhpc3RvcnkgPSBmdW5jdGlvbiBjcmVhdGVNZW1vcnlIaXN0b3J5KCkge1xuICB2YXIgcHJvcHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICB2YXIgZ2V0VXNlckNvbmZpcm1hdGlvbiA9IHByb3BzLmdldFVzZXJDb25maXJtYXRpb24sXG4gICAgICBfcHJvcHMkaW5pdGlhbEVudHJpZXMgPSBwcm9wcy5pbml0aWFsRW50cmllcyxcbiAgICAgIGluaXRpYWxFbnRyaWVzID0gX3Byb3BzJGluaXRpYWxFbnRyaWVzID09PSB1bmRlZmluZWQgPyBbJy8nXSA6IF9wcm9wcyRpbml0aWFsRW50cmllcyxcbiAgICAgIF9wcm9wcyRpbml0aWFsSW5kZXggPSBwcm9wcy5pbml0aWFsSW5kZXgsXG4gICAgICBpbml0aWFsSW5kZXggPSBfcHJvcHMkaW5pdGlhbEluZGV4ID09PSB1bmRlZmluZWQgPyAwIDogX3Byb3BzJGluaXRpYWxJbmRleCxcbiAgICAgIF9wcm9wcyRrZXlMZW5ndGggPSBwcm9wcy5rZXlMZW5ndGgsXG4gICAgICBrZXlMZW5ndGggPSBfcHJvcHMka2V5TGVuZ3RoID09PSB1bmRlZmluZWQgPyA2IDogX3Byb3BzJGtleUxlbmd0aDtcblxuXG4gIHZhciB0cmFuc2l0aW9uTWFuYWdlciA9ICgwLCBfY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIyLmRlZmF1bHQpKCk7XG5cbiAgdmFyIHNldFN0YXRlID0gZnVuY3Rpb24gc2V0U3RhdGUobmV4dFN0YXRlKSB7XG4gICAgX2V4dGVuZHMoaGlzdG9yeSwgbmV4dFN0YXRlKTtcblxuICAgIGhpc3RvcnkubGVuZ3RoID0gaGlzdG9yeS5lbnRyaWVzLmxlbmd0aDtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLm5vdGlmeUxpc3RlbmVycyhoaXN0b3J5LmxvY2F0aW9uLCBoaXN0b3J5LmFjdGlvbik7XG4gIH07XG5cbiAgdmFyIGNyZWF0ZUtleSA9IGZ1bmN0aW9uIGNyZWF0ZUtleSgpIHtcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIGtleUxlbmd0aCk7XG4gIH07XG5cbiAgdmFyIGluZGV4ID0gY2xhbXAoaW5pdGlhbEluZGV4LCAwLCBpbml0aWFsRW50cmllcy5sZW5ndGggLSAxKTtcbiAgdmFyIGVudHJpZXMgPSBpbml0aWFsRW50cmllcy5tYXAoZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgcmV0dXJuIHR5cGVvZiBlbnRyeSA9PT0gJ3N0cmluZycgPyAoMCwgX0xvY2F0aW9uVXRpbHMuY3JlYXRlTG9jYXRpb24pKGVudHJ5LCB1bmRlZmluZWQsIGNyZWF0ZUtleSgpKSA6ICgwLCBfTG9jYXRpb25VdGlscy5jcmVhdGVMb2NhdGlvbikoZW50cnksIHVuZGVmaW5lZCwgZW50cnkua2V5IHx8IGNyZWF0ZUtleSgpKTtcbiAgfSk7XG5cbiAgLy8gUHVibGljIGludGVyZmFjZVxuXG4gIHZhciBjcmVhdGVIcmVmID0gX1BhdGhVdGlscy5jcmVhdGVQYXRoO1xuXG4gIHZhciBwdXNoID0gZnVuY3Rpb24gcHVzaChwYXRoLCBzdGF0ZSkge1xuICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkoISgodHlwZW9mIHBhdGggPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHBhdGgpKSA9PT0gJ29iamVjdCcgJiYgcGF0aC5zdGF0ZSAhPT0gdW5kZWZpbmVkICYmIHN0YXRlICE9PSB1bmRlZmluZWQpLCAnWW91IHNob3VsZCBhdm9pZCBwcm92aWRpbmcgYSAybmQgc3RhdGUgYXJndW1lbnQgdG8gcHVzaCB3aGVuIHRoZSAxc3QgJyArICdhcmd1bWVudCBpcyBhIGxvY2F0aW9uLWxpa2Ugb2JqZWN0IHRoYXQgYWxyZWFkeSBoYXMgc3RhdGU7IGl0IGlzIGlnbm9yZWQnKTtcblxuICAgIHZhciBhY3Rpb24gPSAnUFVTSCc7XG4gICAgdmFyIGxvY2F0aW9uID0gKDAsIF9Mb2NhdGlvblV0aWxzLmNyZWF0ZUxvY2F0aW9uKShwYXRoLCBzdGF0ZSwgY3JlYXRlS2V5KCksIGhpc3RvcnkubG9jYXRpb24pO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmICghb2spIHJldHVybjtcblxuICAgICAgdmFyIHByZXZJbmRleCA9IGhpc3RvcnkuaW5kZXg7XG4gICAgICB2YXIgbmV4dEluZGV4ID0gcHJldkluZGV4ICsgMTtcblxuICAgICAgdmFyIG5leHRFbnRyaWVzID0gaGlzdG9yeS5lbnRyaWVzLnNsaWNlKDApO1xuICAgICAgaWYgKG5leHRFbnRyaWVzLmxlbmd0aCA+IG5leHRJbmRleCkge1xuICAgICAgICBuZXh0RW50cmllcy5zcGxpY2UobmV4dEluZGV4LCBuZXh0RW50cmllcy5sZW5ndGggLSBuZXh0SW5kZXgsIGxvY2F0aW9uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHRFbnRyaWVzLnB1c2gobG9jYXRpb24pO1xuICAgICAgfVxuXG4gICAgICBzZXRTdGF0ZSh7XG4gICAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sXG4gICAgICAgIGluZGV4OiBuZXh0SW5kZXgsXG4gICAgICAgIGVudHJpZXM6IG5leHRFbnRyaWVzXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgcmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UocGF0aCwgc3RhdGUpIHtcbiAgICAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKCEoKHR5cGVvZiBwYXRoID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihwYXRoKSkgPT09ICdvYmplY3QnICYmIHBhdGguc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBzdGF0ZSAhPT0gdW5kZWZpbmVkKSwgJ1lvdSBzaG91bGQgYXZvaWQgcHJvdmlkaW5nIGEgMm5kIHN0YXRlIGFyZ3VtZW50IHRvIHJlcGxhY2Ugd2hlbiB0aGUgMXN0ICcgKyAnYXJndW1lbnQgaXMgYSBsb2NhdGlvbi1saWtlIG9iamVjdCB0aGF0IGFscmVhZHkgaGFzIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7XG5cbiAgICB2YXIgYWN0aW9uID0gJ1JFUExBQ0UnO1xuICAgIHZhciBsb2NhdGlvbiA9ICgwLCBfTG9jYXRpb25VdGlscy5jcmVhdGVMb2NhdGlvbikocGF0aCwgc3RhdGUsIGNyZWF0ZUtleSgpLCBoaXN0b3J5LmxvY2F0aW9uKTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG5cbiAgICAgIGhpc3RvcnkuZW50cmllc1toaXN0b3J5LmluZGV4XSA9IGxvY2F0aW9uO1xuXG4gICAgICBzZXRTdGF0ZSh7IGFjdGlvbjogYWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24gfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdvID0gZnVuY3Rpb24gZ28obikge1xuICAgIHZhciBuZXh0SW5kZXggPSBjbGFtcChoaXN0b3J5LmluZGV4ICsgbiwgMCwgaGlzdG9yeS5lbnRyaWVzLmxlbmd0aCAtIDEpO1xuXG4gICAgdmFyIGFjdGlvbiA9ICdQT1AnO1xuICAgIHZhciBsb2NhdGlvbiA9IGhpc3RvcnkuZW50cmllc1tuZXh0SW5kZXhdO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmIChvaykge1xuICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uLFxuICAgICAgICAgIGluZGV4OiBuZXh0SW5kZXhcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBNaW1pYyB0aGUgYmVoYXZpb3Igb2YgRE9NIGhpc3RvcmllcyBieVxuICAgICAgICAvLyBjYXVzaW5nIGEgcmVuZGVyIGFmdGVyIGEgY2FuY2VsbGVkIFBPUC5cbiAgICAgICAgc2V0U3RhdGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICB2YXIgZ29CYWNrID0gZnVuY3Rpb24gZ29CYWNrKCkge1xuICAgIHJldHVybiBnbygtMSk7XG4gIH07XG5cbiAgdmFyIGdvRm9yd2FyZCA9IGZ1bmN0aW9uIGdvRm9yd2FyZCgpIHtcbiAgICByZXR1cm4gZ28oMSk7XG4gIH07XG5cbiAgdmFyIGNhbkdvID0gZnVuY3Rpb24gY2FuR28obikge1xuICAgIHZhciBuZXh0SW5kZXggPSBoaXN0b3J5LmluZGV4ICsgbjtcbiAgICByZXR1cm4gbmV4dEluZGV4ID49IDAgJiYgbmV4dEluZGV4IDwgaGlzdG9yeS5lbnRyaWVzLmxlbmd0aDtcbiAgfTtcblxuICB2YXIgYmxvY2sgPSBmdW5jdGlvbiBibG9jaygpIHtcbiAgICB2YXIgcHJvbXB0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmYWxzZTtcbiAgICByZXR1cm4gdHJhbnNpdGlvbk1hbmFnZXIuc2V0UHJvbXB0KHByb21wdCk7XG4gIH07XG5cbiAgdmFyIGxpc3RlbiA9IGZ1bmN0aW9uIGxpc3RlbihsaXN0ZW5lcikge1xuICAgIHJldHVybiB0cmFuc2l0aW9uTWFuYWdlci5hcHBlbmRMaXN0ZW5lcihsaXN0ZW5lcik7XG4gIH07XG5cbiAgdmFyIGhpc3RvcnkgPSB7XG4gICAgbGVuZ3RoOiBlbnRyaWVzLmxlbmd0aCxcbiAgICBhY3Rpb246ICdQT1AnLFxuICAgIGxvY2F0aW9uOiBlbnRyaWVzW2luZGV4XSxcbiAgICBpbmRleDogaW5kZXgsXG4gICAgZW50cmllczogZW50cmllcyxcbiAgICBjcmVhdGVIcmVmOiBjcmVhdGVIcmVmLFxuICAgIHB1c2g6IHB1c2gsXG4gICAgcmVwbGFjZTogcmVwbGFjZSxcbiAgICBnbzogZ28sXG4gICAgZ29CYWNrOiBnb0JhY2ssXG4gICAgZ29Gb3J3YXJkOiBnb0ZvcndhcmQsXG4gICAgY2FuR286IGNhbkdvLFxuICAgIGJsb2NrOiBibG9jayxcbiAgICBsaXN0ZW46IGxpc3RlblxuICB9O1xuXG4gIHJldHVybiBoaXN0b3J5O1xufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gY3JlYXRlTWVtb3J5SGlzdG9yeTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDEzODpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fTG9jYXRpb25VdGlsc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19QYXRoVXRpbHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fRE9NVXRpbHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oODgpO1xudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5cblxuXG5cblxuXG5cbnZhciBQb3BTdGF0ZUV2ZW50ID0gJ3BvcHN0YXRlJztcbnZhciBIYXNoQ2hhbmdlRXZlbnQgPSAnaGFzaGNoYW5nZSc7XG5cbnZhciBnZXRIaXN0b3J5U3RhdGUgPSBmdW5jdGlvbiBnZXRIaXN0b3J5U3RhdGUoKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHdpbmRvdy5oaXN0b3J5LnN0YXRlIHx8IHt9O1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gSUUgMTEgc29tZXRpbWVzIHRocm93cyB3aGVuIGFjY2Vzc2luZyB3aW5kb3cuaGlzdG9yeS5zdGF0ZVxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vUmVhY3RUcmFpbmluZy9oaXN0b3J5L3B1bGwvMjg5XG4gICAgcmV0dXJuIHt9O1xuICB9XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBoaXN0b3J5IG9iamVjdCB0aGF0IHVzZXMgdGhlIEhUTUw1IGhpc3RvcnkgQVBJIGluY2x1ZGluZ1xuICogcHVzaFN0YXRlLCByZXBsYWNlU3RhdGUsIGFuZCB0aGUgcG9wc3RhdGUgZXZlbnQuXG4gKi9cbnZhciBjcmVhdGVCcm93c2VySGlzdG9yeSA9IGZ1bmN0aW9uIGNyZWF0ZUJyb3dzZXJIaXN0b3J5KCkge1xuICB2YXIgcHJvcHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9pbnZhcmlhbnRfX19kZWZhdWx0KCkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19ET01VdGlsc19fW1wiYVwiIC8qIGNhblVzZURPTSAqL10sICdCcm93c2VyIGhpc3RvcnkgbmVlZHMgYSBET00nKTtcblxuICB2YXIgZ2xvYmFsSGlzdG9yeSA9IHdpbmRvdy5oaXN0b3J5O1xuICB2YXIgY2FuVXNlSGlzdG9yeSA9IF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX0RPTVV0aWxzX19bXCJmXCIgLyogc3VwcG9ydHNIaXN0b3J5ICovXSkoKTtcbiAgdmFyIG5lZWRzSGFzaENoYW5nZUxpc3RlbmVyID0gIV9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX0RPTVV0aWxzX19bXCJnXCIgLyogc3VwcG9ydHNQb3BTdGF0ZU9uSGFzaENoYW5nZSAqL10pKCk7XG5cbiAgdmFyIF9wcm9wcyRmb3JjZVJlZnJlc2ggPSBwcm9wcy5mb3JjZVJlZnJlc2gsXG4gICAgICBmb3JjZVJlZnJlc2ggPSBfcHJvcHMkZm9yY2VSZWZyZXNoID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9wcm9wcyRmb3JjZVJlZnJlc2gsXG4gICAgICBfcHJvcHMkZ2V0VXNlckNvbmZpcm0gPSBwcm9wcy5nZXRVc2VyQ29uZmlybWF0aW9uLFxuICAgICAgZ2V0VXNlckNvbmZpcm1hdGlvbiA9IF9wcm9wcyRnZXRVc2VyQ29uZmlybSA9PT0gdW5kZWZpbmVkID8gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19ET01VdGlsc19fW1wiY1wiIC8qIGdldENvbmZpcm1hdGlvbiAqL10gOiBfcHJvcHMkZ2V0VXNlckNvbmZpcm0sXG4gICAgICBfcHJvcHMka2V5TGVuZ3RoID0gcHJvcHMua2V5TGVuZ3RoLFxuICAgICAga2V5TGVuZ3RoID0gX3Byb3BzJGtleUxlbmd0aCA9PT0gdW5kZWZpbmVkID8gNiA6IF9wcm9wcyRrZXlMZW5ndGg7XG5cbiAgdmFyIGJhc2VuYW1lID0gcHJvcHMuYmFzZW5hbWUgPyBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19QYXRoVXRpbHNfX1tcImVcIiAvKiBzdHJpcFRyYWlsaW5nU2xhc2ggKi9dKShfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19QYXRoVXRpbHNfX1tcImRcIiAvKiBhZGRMZWFkaW5nU2xhc2ggKi9dKShwcm9wcy5iYXNlbmFtZSkpIDogJyc7XG5cbiAgdmFyIGdldERPTUxvY2F0aW9uID0gZnVuY3Rpb24gZ2V0RE9NTG9jYXRpb24oaGlzdG9yeVN0YXRlKSB7XG4gICAgdmFyIF9yZWYgPSBoaXN0b3J5U3RhdGUgfHwge30sXG4gICAgICAgIGtleSA9IF9yZWYua2V5LFxuICAgICAgICBzdGF0ZSA9IF9yZWYuc3RhdGU7XG5cbiAgICB2YXIgX3dpbmRvdyRsb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbixcbiAgICAgICAgcGF0aG5hbWUgPSBfd2luZG93JGxvY2F0aW9uLnBhdGhuYW1lLFxuICAgICAgICBzZWFyY2ggPSBfd2luZG93JGxvY2F0aW9uLnNlYXJjaCxcbiAgICAgICAgaGFzaCA9IF93aW5kb3ckbG9jYXRpb24uaGFzaDtcblxuXG4gICAgdmFyIHBhdGggPSBwYXRobmFtZSArIHNlYXJjaCArIGhhc2g7XG5cbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQoKSghYmFzZW5hbWUgfHwgX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fUGF0aFV0aWxzX19bXCJmXCIgLyogaGFzQmFzZW5hbWUgKi9dKShwYXRoLCBiYXNlbmFtZSksICdZb3UgYXJlIGF0dGVtcHRpbmcgdG8gdXNlIGEgYmFzZW5hbWUgb24gYSBwYWdlIHdob3NlIFVSTCBwYXRoIGRvZXMgbm90IGJlZ2luICcgKyAnd2l0aCB0aGUgYmFzZW5hbWUuIEV4cGVjdGVkIHBhdGggXCInICsgcGF0aCArICdcIiB0byBiZWdpbiB3aXRoIFwiJyArIGJhc2VuYW1lICsgJ1wiLicpO1xuXG4gICAgaWYgKGJhc2VuYW1lKSBwYXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fUGF0aFV0aWxzX19bXCJnXCIgLyogc3RyaXBCYXNlbmFtZSAqL10pKHBhdGgsIGJhc2VuYW1lKTtcblxuICAgIHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19Mb2NhdGlvblV0aWxzX19bXCJhXCIgLyogY3JlYXRlTG9jYXRpb24gKi9dKShwYXRoLCBzdGF0ZSwga2V5KTtcbiAgfTtcblxuICB2YXIgY3JlYXRlS2V5ID0gZnVuY3Rpb24gY3JlYXRlS2V5KCkge1xuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwga2V5TGVuZ3RoKTtcbiAgfTtcblxuICB2YXIgdHJhbnNpdGlvbk1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcl9fW1wiYVwiIC8qIGRlZmF1bHQgKi9dKSgpO1xuXG4gIHZhciBzZXRTdGF0ZSA9IGZ1bmN0aW9uIHNldFN0YXRlKG5leHRTdGF0ZSkge1xuICAgIF9leHRlbmRzKGhpc3RvcnksIG5leHRTdGF0ZSk7XG5cbiAgICBoaXN0b3J5Lmxlbmd0aCA9IGdsb2JhbEhpc3RvcnkubGVuZ3RoO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIubm90aWZ5TGlzdGVuZXJzKGhpc3RvcnkubG9jYXRpb24sIGhpc3RvcnkuYWN0aW9uKTtcbiAgfTtcblxuICB2YXIgaGFuZGxlUG9wU3RhdGUgPSBmdW5jdGlvbiBoYW5kbGVQb3BTdGF0ZShldmVudCkge1xuICAgIC8vIElnbm9yZSBleHRyYW5lb3VzIHBvcHN0YXRlIGV2ZW50cyBpbiBXZWJLaXQuXG4gICAgaWYgKF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX0RPTVV0aWxzX19bXCJoXCIgLyogaXNFeHRyYW5lb3VzUG9wc3RhdGVFdmVudCAqL10pKGV2ZW50KSkgcmV0dXJuO1xuXG4gICAgaGFuZGxlUG9wKGdldERPTUxvY2F0aW9uKGV2ZW50LnN0YXRlKSk7XG4gIH07XG5cbiAgdmFyIGhhbmRsZUhhc2hDaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVIYXNoQ2hhbmdlKCkge1xuICAgIGhhbmRsZVBvcChnZXRET01Mb2NhdGlvbihnZXRIaXN0b3J5U3RhdGUoKSkpO1xuICB9O1xuXG4gIHZhciBmb3JjZU5leHRQb3AgPSBmYWxzZTtcblxuICB2YXIgaGFuZGxlUG9wID0gZnVuY3Rpb24gaGFuZGxlUG9wKGxvY2F0aW9uKSB7XG4gICAgaWYgKGZvcmNlTmV4dFBvcCkge1xuICAgICAgZm9yY2VOZXh0UG9wID0gZmFsc2U7XG4gICAgICBzZXRTdGF0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYWN0aW9uID0gJ1BPUCc7XG5cbiAgICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICAgIGlmIChvaykge1xuICAgICAgICAgIHNldFN0YXRlKHsgYWN0aW9uOiBhY3Rpb24sIGxvY2F0aW9uOiBsb2NhdGlvbiB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXZlcnRQb3AobG9jYXRpb24pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHJldmVydFBvcCA9IGZ1bmN0aW9uIHJldmVydFBvcChmcm9tTG9jYXRpb24pIHtcbiAgICB2YXIgdG9Mb2NhdGlvbiA9IGhpc3RvcnkubG9jYXRpb247XG5cbiAgICAvLyBUT0RPOiBXZSBjb3VsZCBwcm9iYWJseSBtYWtlIHRoaXMgbW9yZSByZWxpYWJsZSBieVxuICAgIC8vIGtlZXBpbmcgYSBsaXN0IG9mIGtleXMgd2UndmUgc2VlbiBpbiBzZXNzaW9uU3RvcmFnZS5cbiAgICAvLyBJbnN0ZWFkLCB3ZSBqdXN0IGRlZmF1bHQgdG8gMCBmb3Iga2V5cyB3ZSBkb24ndCBrbm93LlxuXG4gICAgdmFyIHRvSW5kZXggPSBhbGxLZXlzLmluZGV4T2YodG9Mb2NhdGlvbi5rZXkpO1xuXG4gICAgaWYgKHRvSW5kZXggPT09IC0xKSB0b0luZGV4ID0gMDtcblxuICAgIHZhciBmcm9tSW5kZXggPSBhbGxLZXlzLmluZGV4T2YoZnJvbUxvY2F0aW9uLmtleSk7XG5cbiAgICBpZiAoZnJvbUluZGV4ID09PSAtMSkgZnJvbUluZGV4ID0gMDtcblxuICAgIHZhciBkZWx0YSA9IHRvSW5kZXggLSBmcm9tSW5kZXg7XG5cbiAgICBpZiAoZGVsdGEpIHtcbiAgICAgIGZvcmNlTmV4dFBvcCA9IHRydWU7XG4gICAgICBnbyhkZWx0YSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBpbml0aWFsTG9jYXRpb24gPSBnZXRET01Mb2NhdGlvbihnZXRIaXN0b3J5U3RhdGUoKSk7XG4gIHZhciBhbGxLZXlzID0gW2luaXRpYWxMb2NhdGlvbi5rZXldO1xuXG4gIC8vIFB1YmxpYyBpbnRlcmZhY2VcblxuICB2YXIgY3JlYXRlSHJlZiA9IGZ1bmN0aW9uIGNyZWF0ZUhyZWYobG9jYXRpb24pIHtcbiAgICByZXR1cm4gYmFzZW5hbWUgKyBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19QYXRoVXRpbHNfX1tcImJcIiAvKiBjcmVhdGVQYXRoICovXSkobG9jYXRpb24pO1xuICB9O1xuXG4gIHZhciBwdXNoID0gZnVuY3Rpb24gcHVzaChwYXRoLCBzdGF0ZSkge1xuICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCgpKCEoKHR5cGVvZiBwYXRoID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihwYXRoKSkgPT09ICdvYmplY3QnICYmIHBhdGguc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBzdGF0ZSAhPT0gdW5kZWZpbmVkKSwgJ1lvdSBzaG91bGQgYXZvaWQgcHJvdmlkaW5nIGEgMm5kIHN0YXRlIGFyZ3VtZW50IHRvIHB1c2ggd2hlbiB0aGUgMXN0ICcgKyAnYXJndW1lbnQgaXMgYSBsb2NhdGlvbi1saWtlIG9iamVjdCB0aGF0IGFscmVhZHkgaGFzIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7XG5cbiAgICB2YXIgYWN0aW9uID0gJ1BVU0gnO1xuICAgIHZhciBsb2NhdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX0xvY2F0aW9uVXRpbHNfX1tcImFcIiAvKiBjcmVhdGVMb2NhdGlvbiAqL10pKHBhdGgsIHN0YXRlLCBjcmVhdGVLZXkoKSwgaGlzdG9yeS5sb2NhdGlvbik7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKCFvaykgcmV0dXJuO1xuXG4gICAgICB2YXIgaHJlZiA9IGNyZWF0ZUhyZWYobG9jYXRpb24pO1xuICAgICAgdmFyIGtleSA9IGxvY2F0aW9uLmtleSxcbiAgICAgICAgICBzdGF0ZSA9IGxvY2F0aW9uLnN0YXRlO1xuXG5cbiAgICAgIGlmIChjYW5Vc2VIaXN0b3J5KSB7XG4gICAgICAgIGdsb2JhbEhpc3RvcnkucHVzaFN0YXRlKHsga2V5OiBrZXksIHN0YXRlOiBzdGF0ZSB9LCBudWxsLCBocmVmKTtcblxuICAgICAgICBpZiAoZm9yY2VSZWZyZXNoKSB7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBocmVmO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBwcmV2SW5kZXggPSBhbGxLZXlzLmluZGV4T2YoaGlzdG9yeS5sb2NhdGlvbi5rZXkpO1xuICAgICAgICAgIHZhciBuZXh0S2V5cyA9IGFsbEtleXMuc2xpY2UoMCwgcHJldkluZGV4ID09PSAtMSA/IDAgOiBwcmV2SW5kZXggKyAxKTtcblxuICAgICAgICAgIG5leHRLZXlzLnB1c2gobG9jYXRpb24ua2V5KTtcbiAgICAgICAgICBhbGxLZXlzID0gbmV4dEtleXM7XG5cbiAgICAgICAgICBzZXRTdGF0ZSh7IGFjdGlvbjogYWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24gfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCgpKHN0YXRlID09PSB1bmRlZmluZWQsICdCcm93c2VyIGhpc3RvcnkgY2Fubm90IHB1c2ggc3RhdGUgaW4gYnJvd3NlcnMgdGhhdCBkbyBub3Qgc3VwcG9ydCBIVE1MNSBoaXN0b3J5Jyk7XG5cbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBocmVmO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHZhciByZXBsYWNlID0gZnVuY3Rpb24gcmVwbGFjZShwYXRoLCBzdGF0ZSkge1xuICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCgpKCEoKHR5cGVvZiBwYXRoID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihwYXRoKSkgPT09ICdvYmplY3QnICYmIHBhdGguc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBzdGF0ZSAhPT0gdW5kZWZpbmVkKSwgJ1lvdSBzaG91bGQgYXZvaWQgcHJvdmlkaW5nIGEgMm5kIHN0YXRlIGFyZ3VtZW50IHRvIHJlcGxhY2Ugd2hlbiB0aGUgMXN0ICcgKyAnYXJndW1lbnQgaXMgYSBsb2NhdGlvbi1saWtlIG9iamVjdCB0aGF0IGFscmVhZHkgaGFzIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7XG5cbiAgICB2YXIgYWN0aW9uID0gJ1JFUExBQ0UnO1xuICAgIHZhciBsb2NhdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX0xvY2F0aW9uVXRpbHNfX1tcImFcIiAvKiBjcmVhdGVMb2NhdGlvbiAqL10pKHBhdGgsIHN0YXRlLCBjcmVhdGVLZXkoKSwgaGlzdG9yeS5sb2NhdGlvbik7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKCFvaykgcmV0dXJuO1xuXG4gICAgICB2YXIgaHJlZiA9IGNyZWF0ZUhyZWYobG9jYXRpb24pO1xuICAgICAgdmFyIGtleSA9IGxvY2F0aW9uLmtleSxcbiAgICAgICAgICBzdGF0ZSA9IGxvY2F0aW9uLnN0YXRlO1xuXG5cbiAgICAgIGlmIChjYW5Vc2VIaXN0b3J5KSB7XG4gICAgICAgIGdsb2JhbEhpc3RvcnkucmVwbGFjZVN0YXRlKHsga2V5OiBrZXksIHN0YXRlOiBzdGF0ZSB9LCBudWxsLCBocmVmKTtcblxuICAgICAgICBpZiAoZm9yY2VSZWZyZXNoKSB7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoaHJlZik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHByZXZJbmRleCA9IGFsbEtleXMuaW5kZXhPZihoaXN0b3J5LmxvY2F0aW9uLmtleSk7XG5cbiAgICAgICAgICBpZiAocHJldkluZGV4ICE9PSAtMSkgYWxsS2V5c1twcmV2SW5kZXhdID0gbG9jYXRpb24ua2V5O1xuXG4gICAgICAgICAgc2V0U3RhdGUoeyBhY3Rpb246IGFjdGlvbiwgbG9jYXRpb246IGxvY2F0aW9uIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQoKShzdGF0ZSA9PT0gdW5kZWZpbmVkLCAnQnJvd3NlciBoaXN0b3J5IGNhbm5vdCByZXBsYWNlIHN0YXRlIGluIGJyb3dzZXJzIHRoYXQgZG8gbm90IHN1cHBvcnQgSFRNTDUgaGlzdG9yeScpO1xuXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKGhyZWYpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHZhciBnbyA9IGZ1bmN0aW9uIGdvKG4pIHtcbiAgICBnbG9iYWxIaXN0b3J5LmdvKG4pO1xuICB9O1xuXG4gIHZhciBnb0JhY2sgPSBmdW5jdGlvbiBnb0JhY2soKSB7XG4gICAgcmV0dXJuIGdvKC0xKTtcbiAgfTtcblxuICB2YXIgZ29Gb3J3YXJkID0gZnVuY3Rpb24gZ29Gb3J3YXJkKCkge1xuICAgIHJldHVybiBnbygxKTtcbiAgfTtcblxuICB2YXIgbGlzdGVuZXJDb3VudCA9IDA7XG5cbiAgdmFyIGNoZWNrRE9NTGlzdGVuZXJzID0gZnVuY3Rpb24gY2hlY2tET01MaXN0ZW5lcnMoZGVsdGEpIHtcbiAgICBsaXN0ZW5lckNvdW50ICs9IGRlbHRhO1xuXG4gICAgaWYgKGxpc3RlbmVyQ291bnQgPT09IDEpIHtcbiAgICAgIF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX0RPTVV0aWxzX19bXCJkXCIgLyogYWRkRXZlbnRMaXN0ZW5lciAqL10pKHdpbmRvdywgUG9wU3RhdGVFdmVudCwgaGFuZGxlUG9wU3RhdGUpO1xuXG4gICAgICBpZiAobmVlZHNIYXNoQ2hhbmdlTGlzdGVuZXIpIF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX0RPTVV0aWxzX19bXCJkXCIgLyogYWRkRXZlbnRMaXN0ZW5lciAqL10pKHdpbmRvdywgSGFzaENoYW5nZUV2ZW50LCBoYW5kbGVIYXNoQ2hhbmdlKTtcbiAgICB9IGVsc2UgaWYgKGxpc3RlbmVyQ291bnQgPT09IDApIHtcbiAgICAgIF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX0RPTVV0aWxzX19bXCJlXCIgLyogcmVtb3ZlRXZlbnRMaXN0ZW5lciAqL10pKHdpbmRvdywgUG9wU3RhdGVFdmVudCwgaGFuZGxlUG9wU3RhdGUpO1xuXG4gICAgICBpZiAobmVlZHNIYXNoQ2hhbmdlTGlzdGVuZXIpIF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX0RPTVV0aWxzX19bXCJlXCIgLyogcmVtb3ZlRXZlbnRMaXN0ZW5lciAqL10pKHdpbmRvdywgSGFzaENoYW5nZUV2ZW50LCBoYW5kbGVIYXNoQ2hhbmdlKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGlzQmxvY2tlZCA9IGZhbHNlO1xuXG4gIHZhciBibG9jayA9IGZ1bmN0aW9uIGJsb2NrKCkge1xuICAgIHZhciBwcm9tcHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlO1xuXG4gICAgdmFyIHVuYmxvY2sgPSB0cmFuc2l0aW9uTWFuYWdlci5zZXRQcm9tcHQocHJvbXB0KTtcblxuICAgIGlmICghaXNCbG9ja2VkKSB7XG4gICAgICBjaGVja0RPTUxpc3RlbmVycygxKTtcbiAgICAgIGlzQmxvY2tlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChpc0Jsb2NrZWQpIHtcbiAgICAgICAgaXNCbG9ja2VkID0gZmFsc2U7XG4gICAgICAgIGNoZWNrRE9NTGlzdGVuZXJzKC0xKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHVuYmxvY2soKTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBsaXN0ZW4gPSBmdW5jdGlvbiBsaXN0ZW4obGlzdGVuZXIpIHtcbiAgICB2YXIgdW5saXN0ZW4gPSB0cmFuc2l0aW9uTWFuYWdlci5hcHBlbmRMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgY2hlY2tET01MaXN0ZW5lcnMoMSk7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgY2hlY2tET01MaXN0ZW5lcnMoLTEpO1xuICAgICAgdW5saXN0ZW4oKTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBoaXN0b3J5ID0ge1xuICAgIGxlbmd0aDogZ2xvYmFsSGlzdG9yeS5sZW5ndGgsXG4gICAgYWN0aW9uOiAnUE9QJyxcbiAgICBsb2NhdGlvbjogaW5pdGlhbExvY2F0aW9uLFxuICAgIGNyZWF0ZUhyZWY6IGNyZWF0ZUhyZWYsXG4gICAgcHVzaDogcHVzaCxcbiAgICByZXBsYWNlOiByZXBsYWNlLFxuICAgIGdvOiBnbyxcbiAgICBnb0JhY2s6IGdvQmFjayxcbiAgICBnb0ZvcndhcmQ6IGdvRm9yd2FyZCxcbiAgICBibG9jazogYmxvY2ssXG4gICAgbGlzdGVuOiBsaXN0ZW5cbiAgfTtcblxuICByZXR1cm4gaGlzdG9yeTtcbn07XG5cbi8qIHVudXNlZCBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIHZhciBfdW51c2VkX3dlYnBhY2tfZGVmYXVsdF9leHBvcnQgPSAoY3JlYXRlQnJvd3Nlckhpc3RvcnkpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMTM5OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9pbnZhcmlhbnRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9pbnZhcmlhbnRfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9pbnZhcmlhbnRfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19Mb2NhdGlvblV0aWxzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1BhdGhVdGlsc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19ET01VdGlsc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OCk7XG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5cblxuXG5cblxuXG5cbnZhciBIYXNoQ2hhbmdlRXZlbnQgPSAnaGFzaGNoYW5nZSc7XG5cbnZhciBIYXNoUGF0aENvZGVycyA9IHtcbiAgaGFzaGJhbmc6IHtcbiAgICBlbmNvZGVQYXRoOiBmdW5jdGlvbiBlbmNvZGVQYXRoKHBhdGgpIHtcbiAgICAgIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJyEnID8gcGF0aCA6ICchLycgKyBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19QYXRoVXRpbHNfX1tcImNcIiAvKiBzdHJpcExlYWRpbmdTbGFzaCAqL10pKHBhdGgpO1xuICAgIH0sXG4gICAgZGVjb2RlUGF0aDogZnVuY3Rpb24gZGVjb2RlUGF0aChwYXRoKSB7XG4gICAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICchJyA/IHBhdGguc3Vic3RyKDEpIDogcGF0aDtcbiAgICB9XG4gIH0sXG4gIG5vc2xhc2g6IHtcbiAgICBlbmNvZGVQYXRoOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1BhdGhVdGlsc19fW1wiY1wiIC8qIHN0cmlwTGVhZGluZ1NsYXNoICovXSxcbiAgICBkZWNvZGVQYXRoOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1BhdGhVdGlsc19fW1wiZFwiIC8qIGFkZExlYWRpbmdTbGFzaCAqL11cbiAgfSxcbiAgc2xhc2g6IHtcbiAgICBlbmNvZGVQYXRoOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1BhdGhVdGlsc19fW1wiZFwiIC8qIGFkZExlYWRpbmdTbGFzaCAqL10sXG4gICAgZGVjb2RlUGF0aDogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19QYXRoVXRpbHNfX1tcImRcIiAvKiBhZGRMZWFkaW5nU2xhc2ggKi9dXG4gIH1cbn07XG5cbnZhciBnZXRIYXNoUGF0aCA9IGZ1bmN0aW9uIGdldEhhc2hQYXRoKCkge1xuICAvLyBXZSBjYW4ndCB1c2Ugd2luZG93LmxvY2F0aW9uLmhhc2ggaGVyZSBiZWNhdXNlIGl0J3Mgbm90XG4gIC8vIGNvbnNpc3RlbnQgYWNyb3NzIGJyb3dzZXJzIC0gRmlyZWZveCB3aWxsIHByZS1kZWNvZGUgaXQhXG4gIHZhciBocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIHZhciBoYXNoSW5kZXggPSBocmVmLmluZGV4T2YoJyMnKTtcbiAgcmV0dXJuIGhhc2hJbmRleCA9PT0gLTEgPyAnJyA6IGhyZWYuc3Vic3RyaW5nKGhhc2hJbmRleCArIDEpO1xufTtcblxudmFyIHB1c2hIYXNoUGF0aCA9IGZ1bmN0aW9uIHB1c2hIYXNoUGF0aChwYXRoKSB7XG4gIHJldHVybiB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHBhdGg7XG59O1xuXG52YXIgcmVwbGFjZUhhc2hQYXRoID0gZnVuY3Rpb24gcmVwbGFjZUhhc2hQYXRoKHBhdGgpIHtcbiAgdmFyIGhhc2hJbmRleCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoJyMnKTtcblxuICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSh3aW5kb3cubG9jYXRpb24uaHJlZi5zbGljZSgwLCBoYXNoSW5kZXggPj0gMCA/IGhhc2hJbmRleCA6IDApICsgJyMnICsgcGF0aCk7XG59O1xuXG52YXIgY3JlYXRlSGFzaEhpc3RvcnkgPSBmdW5jdGlvbiBjcmVhdGVIYXNoSGlzdG9yeSgpIHtcbiAgdmFyIHByb3BzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X19fZGVmYXVsdCgpKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fRE9NVXRpbHNfX1tcImFcIiAvKiBjYW5Vc2VET00gKi9dLCAnSGFzaCBoaXN0b3J5IG5lZWRzIGEgRE9NJyk7XG5cbiAgdmFyIGdsb2JhbEhpc3RvcnkgPSB3aW5kb3cuaGlzdG9yeTtcbiAgdmFyIGNhbkdvV2l0aG91dFJlbG9hZCA9IF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX0RPTVV0aWxzX19bXCJiXCIgLyogc3VwcG9ydHNHb1dpdGhvdXRSZWxvYWRVc2luZ0hhc2ggKi9dKSgpO1xuXG4gIHZhciBfcHJvcHMkZ2V0VXNlckNvbmZpcm0gPSBwcm9wcy5nZXRVc2VyQ29uZmlybWF0aW9uLFxuICAgICAgZ2V0VXNlckNvbmZpcm1hdGlvbiA9IF9wcm9wcyRnZXRVc2VyQ29uZmlybSA9PT0gdW5kZWZpbmVkID8gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19ET01VdGlsc19fW1wiY1wiIC8qIGdldENvbmZpcm1hdGlvbiAqL10gOiBfcHJvcHMkZ2V0VXNlckNvbmZpcm0sXG4gICAgICBfcHJvcHMkaGFzaFR5cGUgPSBwcm9wcy5oYXNoVHlwZSxcbiAgICAgIGhhc2hUeXBlID0gX3Byb3BzJGhhc2hUeXBlID09PSB1bmRlZmluZWQgPyAnc2xhc2gnIDogX3Byb3BzJGhhc2hUeXBlO1xuXG4gIHZhciBiYXNlbmFtZSA9IHByb3BzLmJhc2VuYW1lID8gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fUGF0aFV0aWxzX19bXCJlXCIgLyogc3RyaXBUcmFpbGluZ1NsYXNoICovXSkoX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fUGF0aFV0aWxzX19bXCJkXCIgLyogYWRkTGVhZGluZ1NsYXNoICovXSkocHJvcHMuYmFzZW5hbWUpKSA6ICcnO1xuXG4gIHZhciBfSGFzaFBhdGhDb2RlcnMkaGFzaFQgPSBIYXNoUGF0aENvZGVyc1toYXNoVHlwZV0sXG4gICAgICBlbmNvZGVQYXRoID0gX0hhc2hQYXRoQ29kZXJzJGhhc2hULmVuY29kZVBhdGgsXG4gICAgICBkZWNvZGVQYXRoID0gX0hhc2hQYXRoQ29kZXJzJGhhc2hULmRlY29kZVBhdGg7XG5cblxuICB2YXIgZ2V0RE9NTG9jYXRpb24gPSBmdW5jdGlvbiBnZXRET01Mb2NhdGlvbigpIHtcbiAgICB2YXIgcGF0aCA9IGRlY29kZVBhdGgoZ2V0SGFzaFBhdGgoKSk7XG5cbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQoKSghYmFzZW5hbWUgfHwgX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fUGF0aFV0aWxzX19bXCJmXCIgLyogaGFzQmFzZW5hbWUgKi9dKShwYXRoLCBiYXNlbmFtZSksICdZb3UgYXJlIGF0dGVtcHRpbmcgdG8gdXNlIGEgYmFzZW5hbWUgb24gYSBwYWdlIHdob3NlIFVSTCBwYXRoIGRvZXMgbm90IGJlZ2luICcgKyAnd2l0aCB0aGUgYmFzZW5hbWUuIEV4cGVjdGVkIHBhdGggXCInICsgcGF0aCArICdcIiB0byBiZWdpbiB3aXRoIFwiJyArIGJhc2VuYW1lICsgJ1wiLicpO1xuXG4gICAgaWYgKGJhc2VuYW1lKSBwYXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fUGF0aFV0aWxzX19bXCJnXCIgLyogc3RyaXBCYXNlbmFtZSAqL10pKHBhdGgsIGJhc2VuYW1lKTtcblxuICAgIHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19Mb2NhdGlvblV0aWxzX19bXCJhXCIgLyogY3JlYXRlTG9jYXRpb24gKi9dKShwYXRoKTtcbiAgfTtcblxuICB2YXIgdHJhbnNpdGlvbk1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcl9fW1wiYVwiIC8qIGRlZmF1bHQgKi9dKSgpO1xuXG4gIHZhciBzZXRTdGF0ZSA9IGZ1bmN0aW9uIHNldFN0YXRlKG5leHRTdGF0ZSkge1xuICAgIF9leHRlbmRzKGhpc3RvcnksIG5leHRTdGF0ZSk7XG5cbiAgICBoaXN0b3J5Lmxlbmd0aCA9IGdsb2JhbEhpc3RvcnkubGVuZ3RoO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIubm90aWZ5TGlzdGVuZXJzKGhpc3RvcnkubG9jYXRpb24sIGhpc3RvcnkuYWN0aW9uKTtcbiAgfTtcblxuICB2YXIgZm9yY2VOZXh0UG9wID0gZmFsc2U7XG4gIHZhciBpZ25vcmVQYXRoID0gbnVsbDtcblxuICB2YXIgaGFuZGxlSGFzaENoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZUhhc2hDaGFuZ2UoKSB7XG4gICAgdmFyIHBhdGggPSBnZXRIYXNoUGF0aCgpO1xuICAgIHZhciBlbmNvZGVkUGF0aCA9IGVuY29kZVBhdGgocGF0aCk7XG5cbiAgICBpZiAocGF0aCAhPT0gZW5jb2RlZFBhdGgpIHtcbiAgICAgIC8vIEVuc3VyZSB3ZSBhbHdheXMgaGF2ZSBhIHByb3Blcmx5LWVuY29kZWQgaGFzaC5cbiAgICAgIHJlcGxhY2VIYXNoUGF0aChlbmNvZGVkUGF0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBsb2NhdGlvbiA9IGdldERPTUxvY2F0aW9uKCk7XG4gICAgICB2YXIgcHJldkxvY2F0aW9uID0gaGlzdG9yeS5sb2NhdGlvbjtcblxuICAgICAgaWYgKCFmb3JjZU5leHRQb3AgJiYgX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fTG9jYXRpb25VdGlsc19fW1wiYlwiIC8qIGxvY2F0aW9uc0FyZUVxdWFsICovXSkocHJldkxvY2F0aW9uLCBsb2NhdGlvbikpIHJldHVybjsgLy8gQSBoYXNoY2hhbmdlIGRvZXNuJ3QgYWx3YXlzID09IGxvY2F0aW9uIGNoYW5nZS5cblxuICAgICAgaWYgKGlnbm9yZVBhdGggPT09IF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1BhdGhVdGlsc19fW1wiYlwiIC8qIGNyZWF0ZVBhdGggKi9dKShsb2NhdGlvbikpIHJldHVybjsgLy8gSWdub3JlIHRoaXMgY2hhbmdlOyB3ZSBhbHJlYWR5IHNldFN0YXRlIGluIHB1c2gvcmVwbGFjZS5cblxuICAgICAgaWdub3JlUGF0aCA9IG51bGw7XG5cbiAgICAgIGhhbmRsZVBvcChsb2NhdGlvbik7XG4gICAgfVxuICB9O1xuXG4gIHZhciBoYW5kbGVQb3AgPSBmdW5jdGlvbiBoYW5kbGVQb3AobG9jYXRpb24pIHtcbiAgICBpZiAoZm9yY2VOZXh0UG9wKSB7XG4gICAgICBmb3JjZU5leHRQb3AgPSBmYWxzZTtcbiAgICAgIHNldFN0YXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhY3Rpb24gPSAnUE9QJztcblxuICAgICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgICAgaWYgKG9rKSB7XG4gICAgICAgICAgc2V0U3RhdGUoeyBhY3Rpb246IGFjdGlvbiwgbG9jYXRpb246IGxvY2F0aW9uIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldmVydFBvcChsb2NhdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICB2YXIgcmV2ZXJ0UG9wID0gZnVuY3Rpb24gcmV2ZXJ0UG9wKGZyb21Mb2NhdGlvbikge1xuICAgIHZhciB0b0xvY2F0aW9uID0gaGlzdG9yeS5sb2NhdGlvbjtcblxuICAgIC8vIFRPRE86IFdlIGNvdWxkIHByb2JhYmx5IG1ha2UgdGhpcyBtb3JlIHJlbGlhYmxlIGJ5XG4gICAgLy8ga2VlcGluZyBhIGxpc3Qgb2YgcGF0aHMgd2UndmUgc2VlbiBpbiBzZXNzaW9uU3RvcmFnZS5cbiAgICAvLyBJbnN0ZWFkLCB3ZSBqdXN0IGRlZmF1bHQgdG8gMCBmb3IgcGF0aHMgd2UgZG9uJ3Qga25vdy5cblxuICAgIHZhciB0b0luZGV4ID0gYWxsUGF0aHMubGFzdEluZGV4T2YoX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fUGF0aFV0aWxzX19bXCJiXCIgLyogY3JlYXRlUGF0aCAqL10pKHRvTG9jYXRpb24pKTtcblxuICAgIGlmICh0b0luZGV4ID09PSAtMSkgdG9JbmRleCA9IDA7XG5cbiAgICB2YXIgZnJvbUluZGV4ID0gYWxsUGF0aHMubGFzdEluZGV4T2YoX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fUGF0aFV0aWxzX19bXCJiXCIgLyogY3JlYXRlUGF0aCAqL10pKGZyb21Mb2NhdGlvbikpO1xuXG4gICAgaWYgKGZyb21JbmRleCA9PT0gLTEpIGZyb21JbmRleCA9IDA7XG5cbiAgICB2YXIgZGVsdGEgPSB0b0luZGV4IC0gZnJvbUluZGV4O1xuXG4gICAgaWYgKGRlbHRhKSB7XG4gICAgICBmb3JjZU5leHRQb3AgPSB0cnVlO1xuICAgICAgZ28oZGVsdGEpO1xuICAgIH1cbiAgfTtcblxuICAvLyBFbnN1cmUgdGhlIGhhc2ggaXMgZW5jb2RlZCBwcm9wZXJseSBiZWZvcmUgZG9pbmcgYW55dGhpbmcgZWxzZS5cbiAgdmFyIHBhdGggPSBnZXRIYXNoUGF0aCgpO1xuICB2YXIgZW5jb2RlZFBhdGggPSBlbmNvZGVQYXRoKHBhdGgpO1xuXG4gIGlmIChwYXRoICE9PSBlbmNvZGVkUGF0aCkgcmVwbGFjZUhhc2hQYXRoKGVuY29kZWRQYXRoKTtcblxuICB2YXIgaW5pdGlhbExvY2F0aW9uID0gZ2V0RE9NTG9jYXRpb24oKTtcbiAgdmFyIGFsbFBhdGhzID0gW19fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1BhdGhVdGlsc19fW1wiYlwiIC8qIGNyZWF0ZVBhdGggKi9dKShpbml0aWFsTG9jYXRpb24pXTtcblxuICAvLyBQdWJsaWMgaW50ZXJmYWNlXG5cbiAgdmFyIGNyZWF0ZUhyZWYgPSBmdW5jdGlvbiBjcmVhdGVIcmVmKGxvY2F0aW9uKSB7XG4gICAgcmV0dXJuICcjJyArIGVuY29kZVBhdGgoYmFzZW5hbWUgKyBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19QYXRoVXRpbHNfX1tcImJcIiAvKiBjcmVhdGVQYXRoICovXSkobG9jYXRpb24pKTtcbiAgfTtcblxuICB2YXIgcHVzaCA9IGZ1bmN0aW9uIHB1c2gocGF0aCwgc3RhdGUpIHtcbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQoKShzdGF0ZSA9PT0gdW5kZWZpbmVkLCAnSGFzaCBoaXN0b3J5IGNhbm5vdCBwdXNoIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7XG5cbiAgICB2YXIgYWN0aW9uID0gJ1BVU0gnO1xuICAgIHZhciBsb2NhdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX0xvY2F0aW9uVXRpbHNfX1tcImFcIiAvKiBjcmVhdGVMb2NhdGlvbiAqL10pKHBhdGgsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBoaXN0b3J5LmxvY2F0aW9uKTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG5cbiAgICAgIHZhciBwYXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fUGF0aFV0aWxzX19bXCJiXCIgLyogY3JlYXRlUGF0aCAqL10pKGxvY2F0aW9uKTtcbiAgICAgIHZhciBlbmNvZGVkUGF0aCA9IGVuY29kZVBhdGgoYmFzZW5hbWUgKyBwYXRoKTtcbiAgICAgIHZhciBoYXNoQ2hhbmdlZCA9IGdldEhhc2hQYXRoKCkgIT09IGVuY29kZWRQYXRoO1xuXG4gICAgICBpZiAoaGFzaENoYW5nZWQpIHtcbiAgICAgICAgLy8gV2UgY2Fubm90IHRlbGwgaWYgYSBoYXNoY2hhbmdlIHdhcyBjYXVzZWQgYnkgYSBQVVNILCBzbyB3ZSdkXG4gICAgICAgIC8vIHJhdGhlciBzZXRTdGF0ZSBoZXJlIGFuZCBpZ25vcmUgdGhlIGhhc2hjaGFuZ2UuIFRoZSBjYXZlYXQgaGVyZVxuICAgICAgICAvLyBpcyB0aGF0IG90aGVyIGhhc2ggaGlzdG9yaWVzIGluIHRoZSBwYWdlIHdpbGwgY29uc2lkZXIgaXQgYSBQT1AuXG4gICAgICAgIGlnbm9yZVBhdGggPSBwYXRoO1xuICAgICAgICBwdXNoSGFzaFBhdGgoZW5jb2RlZFBhdGgpO1xuXG4gICAgICAgIHZhciBwcmV2SW5kZXggPSBhbGxQYXRocy5sYXN0SW5kZXhPZihfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19QYXRoVXRpbHNfX1tcImJcIiAvKiBjcmVhdGVQYXRoICovXSkoaGlzdG9yeS5sb2NhdGlvbikpO1xuICAgICAgICB2YXIgbmV4dFBhdGhzID0gYWxsUGF0aHMuc2xpY2UoMCwgcHJldkluZGV4ID09PSAtMSA/IDAgOiBwcmV2SW5kZXggKyAxKTtcblxuICAgICAgICBuZXh0UGF0aHMucHVzaChwYXRoKTtcbiAgICAgICAgYWxsUGF0aHMgPSBuZXh0UGF0aHM7XG5cbiAgICAgICAgc2V0U3RhdGUoeyBhY3Rpb246IGFjdGlvbiwgbG9jYXRpb246IGxvY2F0aW9uIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0KCkoZmFsc2UsICdIYXNoIGhpc3RvcnkgY2Fubm90IFBVU0ggdGhlIHNhbWUgcGF0aDsgYSBuZXcgZW50cnkgd2lsbCBub3QgYmUgYWRkZWQgdG8gdGhlIGhpc3Rvcnkgc3RhY2snKTtcblxuICAgICAgICBzZXRTdGF0ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHZhciByZXBsYWNlID0gZnVuY3Rpb24gcmVwbGFjZShwYXRoLCBzdGF0ZSkge1xuICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCgpKHN0YXRlID09PSB1bmRlZmluZWQsICdIYXNoIGhpc3RvcnkgY2Fubm90IHJlcGxhY2Ugc3RhdGU7IGl0IGlzIGlnbm9yZWQnKTtcblxuICAgIHZhciBhY3Rpb24gPSAnUkVQTEFDRSc7XG4gICAgdmFyIGxvY2F0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fTG9jYXRpb25VdGlsc19fW1wiYVwiIC8qIGNyZWF0ZUxvY2F0aW9uICovXSkocGF0aCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGhpc3RvcnkubG9jYXRpb24pO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmICghb2spIHJldHVybjtcblxuICAgICAgdmFyIHBhdGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19QYXRoVXRpbHNfX1tcImJcIiAvKiBjcmVhdGVQYXRoICovXSkobG9jYXRpb24pO1xuICAgICAgdmFyIGVuY29kZWRQYXRoID0gZW5jb2RlUGF0aChiYXNlbmFtZSArIHBhdGgpO1xuICAgICAgdmFyIGhhc2hDaGFuZ2VkID0gZ2V0SGFzaFBhdGgoKSAhPT0gZW5jb2RlZFBhdGg7XG5cbiAgICAgIGlmIChoYXNoQ2hhbmdlZCkge1xuICAgICAgICAvLyBXZSBjYW5ub3QgdGVsbCBpZiBhIGhhc2hjaGFuZ2Ugd2FzIGNhdXNlZCBieSBhIFJFUExBQ0UsIHNvIHdlJ2RcbiAgICAgICAgLy8gcmF0aGVyIHNldFN0YXRlIGhlcmUgYW5kIGlnbm9yZSB0aGUgaGFzaGNoYW5nZS4gVGhlIGNhdmVhdCBoZXJlXG4gICAgICAgIC8vIGlzIHRoYXQgb3RoZXIgaGFzaCBoaXN0b3JpZXMgaW4gdGhlIHBhZ2Ugd2lsbCBjb25zaWRlciBpdCBhIFBPUC5cbiAgICAgICAgaWdub3JlUGF0aCA9IHBhdGg7XG4gICAgICAgIHJlcGxhY2VIYXNoUGF0aChlbmNvZGVkUGF0aCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBwcmV2SW5kZXggPSBhbGxQYXRocy5pbmRleE9mKF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1BhdGhVdGlsc19fW1wiYlwiIC8qIGNyZWF0ZVBhdGggKi9dKShoaXN0b3J5LmxvY2F0aW9uKSk7XG5cbiAgICAgIGlmIChwcmV2SW5kZXggIT09IC0xKSBhbGxQYXRoc1twcmV2SW5kZXhdID0gcGF0aDtcblxuICAgICAgc2V0U3RhdGUoeyBhY3Rpb246IGFjdGlvbiwgbG9jYXRpb246IGxvY2F0aW9uIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBnbyA9IGZ1bmN0aW9uIGdvKG4pIHtcbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQoKShjYW5Hb1dpdGhvdXRSZWxvYWQsICdIYXNoIGhpc3RvcnkgZ28obikgY2F1c2VzIGEgZnVsbCBwYWdlIHJlbG9hZCBpbiB0aGlzIGJyb3dzZXInKTtcblxuICAgIGdsb2JhbEhpc3RvcnkuZ28obik7XG4gIH07XG5cbiAgdmFyIGdvQmFjayA9IGZ1bmN0aW9uIGdvQmFjaygpIHtcbiAgICByZXR1cm4gZ28oLTEpO1xuICB9O1xuXG4gIHZhciBnb0ZvcndhcmQgPSBmdW5jdGlvbiBnb0ZvcndhcmQoKSB7XG4gICAgcmV0dXJuIGdvKDEpO1xuICB9O1xuXG4gIHZhciBsaXN0ZW5lckNvdW50ID0gMDtcblxuICB2YXIgY2hlY2tET01MaXN0ZW5lcnMgPSBmdW5jdGlvbiBjaGVja0RPTUxpc3RlbmVycyhkZWx0YSkge1xuICAgIGxpc3RlbmVyQ291bnQgKz0gZGVsdGE7XG5cbiAgICBpZiAobGlzdGVuZXJDb3VudCA9PT0gMSkge1xuICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fRE9NVXRpbHNfX1tcImRcIiAvKiBhZGRFdmVudExpc3RlbmVyICovXSkod2luZG93LCBIYXNoQ2hhbmdlRXZlbnQsIGhhbmRsZUhhc2hDaGFuZ2UpO1xuICAgIH0gZWxzZSBpZiAobGlzdGVuZXJDb3VudCA9PT0gMCkge1xuICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fRE9NVXRpbHNfX1tcImVcIiAvKiByZW1vdmVFdmVudExpc3RlbmVyICovXSkod2luZG93LCBIYXNoQ2hhbmdlRXZlbnQsIGhhbmRsZUhhc2hDaGFuZ2UpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgaXNCbG9ja2VkID0gZmFsc2U7XG5cbiAgdmFyIGJsb2NrID0gZnVuY3Rpb24gYmxvY2soKSB7XG4gICAgdmFyIHByb21wdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZmFsc2U7XG5cbiAgICB2YXIgdW5ibG9jayA9IHRyYW5zaXRpb25NYW5hZ2VyLnNldFByb21wdChwcm9tcHQpO1xuXG4gICAgaWYgKCFpc0Jsb2NrZWQpIHtcbiAgICAgIGNoZWNrRE9NTGlzdGVuZXJzKDEpO1xuICAgICAgaXNCbG9ja2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGlzQmxvY2tlZCkge1xuICAgICAgICBpc0Jsb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgY2hlY2tET01MaXN0ZW5lcnMoLTEpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdW5ibG9jaygpO1xuICAgIH07XG4gIH07XG5cbiAgdmFyIGxpc3RlbiA9IGZ1bmN0aW9uIGxpc3RlbihsaXN0ZW5lcikge1xuICAgIHZhciB1bmxpc3RlbiA9IHRyYW5zaXRpb25NYW5hZ2VyLmFwcGVuZExpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICBjaGVja0RPTUxpc3RlbmVycygxKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGVja0RPTUxpc3RlbmVycygtMSk7XG4gICAgICB1bmxpc3RlbigpO1xuICAgIH07XG4gIH07XG5cbiAgdmFyIGhpc3RvcnkgPSB7XG4gICAgbGVuZ3RoOiBnbG9iYWxIaXN0b3J5Lmxlbmd0aCxcbiAgICBhY3Rpb246ICdQT1AnLFxuICAgIGxvY2F0aW9uOiBpbml0aWFsTG9jYXRpb24sXG4gICAgY3JlYXRlSHJlZjogY3JlYXRlSHJlZixcbiAgICBwdXNoOiBwdXNoLFxuICAgIHJlcGxhY2U6IHJlcGxhY2UsXG4gICAgZ286IGdvLFxuICAgIGdvQmFjazogZ29CYWNrLFxuICAgIGdvRm9yd2FyZDogZ29Gb3J3YXJkLFxuICAgIGJsb2NrOiBibG9jayxcbiAgICBsaXN0ZW46IGxpc3RlblxuICB9O1xuXG4gIHJldHVybiBoaXN0b3J5O1xufTtcblxuLyogdW51c2VkIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gdmFyIF91bnVzZWRfd2VicGFja19kZWZhdWx0X2V4cG9ydCA9IChjcmVhdGVIYXNoSGlzdG9yeSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAxNDA6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19QYXRoVXRpbHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fTG9jYXRpb25VdGlsc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mik7XG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cblxuXG5cblxuXG52YXIgY2xhbXAgPSBmdW5jdGlvbiBjbGFtcChuLCBsb3dlckJvdW5kLCB1cHBlckJvdW5kKSB7XG4gIHJldHVybiBNYXRoLm1pbihNYXRoLm1heChuLCBsb3dlckJvdW5kKSwgdXBwZXJCb3VuZCk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBoaXN0b3J5IG9iamVjdCB0aGF0IHN0b3JlcyBsb2NhdGlvbnMgaW4gbWVtb3J5LlxuICovXG52YXIgY3JlYXRlTWVtb3J5SGlzdG9yeSA9IGZ1bmN0aW9uIGNyZWF0ZU1lbW9yeUhpc3RvcnkoKSB7XG4gIHZhciBwcm9wcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gIHZhciBnZXRVc2VyQ29uZmlybWF0aW9uID0gcHJvcHMuZ2V0VXNlckNvbmZpcm1hdGlvbixcbiAgICAgIF9wcm9wcyRpbml0aWFsRW50cmllcyA9IHByb3BzLmluaXRpYWxFbnRyaWVzLFxuICAgICAgaW5pdGlhbEVudHJpZXMgPSBfcHJvcHMkaW5pdGlhbEVudHJpZXMgPT09IHVuZGVmaW5lZCA/IFsnLyddIDogX3Byb3BzJGluaXRpYWxFbnRyaWVzLFxuICAgICAgX3Byb3BzJGluaXRpYWxJbmRleCA9IHByb3BzLmluaXRpYWxJbmRleCxcbiAgICAgIGluaXRpYWxJbmRleCA9IF9wcm9wcyRpbml0aWFsSW5kZXggPT09IHVuZGVmaW5lZCA/IDAgOiBfcHJvcHMkaW5pdGlhbEluZGV4LFxuICAgICAgX3Byb3BzJGtleUxlbmd0aCA9IHByb3BzLmtleUxlbmd0aCxcbiAgICAgIGtleUxlbmd0aCA9IF9wcm9wcyRrZXlMZW5ndGggPT09IHVuZGVmaW5lZCA/IDYgOiBfcHJvcHMka2V5TGVuZ3RoO1xuXG5cbiAgdmFyIHRyYW5zaXRpb25NYW5hZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXJfX1tcImFcIiAvKiBkZWZhdWx0ICovXSkoKTtcblxuICB2YXIgc2V0U3RhdGUgPSBmdW5jdGlvbiBzZXRTdGF0ZShuZXh0U3RhdGUpIHtcbiAgICBfZXh0ZW5kcyhoaXN0b3J5LCBuZXh0U3RhdGUpO1xuXG4gICAgaGlzdG9yeS5sZW5ndGggPSBoaXN0b3J5LmVudHJpZXMubGVuZ3RoO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIubm90aWZ5TGlzdGVuZXJzKGhpc3RvcnkubG9jYXRpb24sIGhpc3RvcnkuYWN0aW9uKTtcbiAgfTtcblxuICB2YXIgY3JlYXRlS2V5ID0gZnVuY3Rpb24gY3JlYXRlS2V5KCkge1xuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwga2V5TGVuZ3RoKTtcbiAgfTtcblxuICB2YXIgaW5kZXggPSBjbGFtcChpbml0aWFsSW5kZXgsIDAsIGluaXRpYWxFbnRyaWVzLmxlbmd0aCAtIDEpO1xuICB2YXIgZW50cmllcyA9IGluaXRpYWxFbnRyaWVzLm1hcChmdW5jdGlvbiAoZW50cnkpIHtcbiAgICByZXR1cm4gdHlwZW9mIGVudHJ5ID09PSAnc3RyaW5nJyA/IF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX0xvY2F0aW9uVXRpbHNfX1tcImFcIiAvKiBjcmVhdGVMb2NhdGlvbiAqL10pKGVudHJ5LCB1bmRlZmluZWQsIGNyZWF0ZUtleSgpKSA6IF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX0xvY2F0aW9uVXRpbHNfX1tcImFcIiAvKiBjcmVhdGVMb2NhdGlvbiAqL10pKGVudHJ5LCB1bmRlZmluZWQsIGVudHJ5LmtleSB8fCBjcmVhdGVLZXkoKSk7XG4gIH0pO1xuXG4gIC8vIFB1YmxpYyBpbnRlcmZhY2VcblxuICB2YXIgY3JlYXRlSHJlZiA9IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fUGF0aFV0aWxzX19bXCJiXCIgLyogY3JlYXRlUGF0aCAqL107XG5cbiAgdmFyIHB1c2ggPSBmdW5jdGlvbiBwdXNoKHBhdGgsIHN0YXRlKSB7XG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0KCkoISgodHlwZW9mIHBhdGggPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHBhdGgpKSA9PT0gJ29iamVjdCcgJiYgcGF0aC5zdGF0ZSAhPT0gdW5kZWZpbmVkICYmIHN0YXRlICE9PSB1bmRlZmluZWQpLCAnWW91IHNob3VsZCBhdm9pZCBwcm92aWRpbmcgYSAybmQgc3RhdGUgYXJndW1lbnQgdG8gcHVzaCB3aGVuIHRoZSAxc3QgJyArICdhcmd1bWVudCBpcyBhIGxvY2F0aW9uLWxpa2Ugb2JqZWN0IHRoYXQgYWxyZWFkeSBoYXMgc3RhdGU7IGl0IGlzIGlnbm9yZWQnKTtcblxuICAgIHZhciBhY3Rpb24gPSAnUFVTSCc7XG4gICAgdmFyIGxvY2F0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fTG9jYXRpb25VdGlsc19fW1wiYVwiIC8qIGNyZWF0ZUxvY2F0aW9uICovXSkocGF0aCwgc3RhdGUsIGNyZWF0ZUtleSgpLCBoaXN0b3J5LmxvY2F0aW9uKTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG5cbiAgICAgIHZhciBwcmV2SW5kZXggPSBoaXN0b3J5LmluZGV4O1xuICAgICAgdmFyIG5leHRJbmRleCA9IHByZXZJbmRleCArIDE7XG5cbiAgICAgIHZhciBuZXh0RW50cmllcyA9IGhpc3RvcnkuZW50cmllcy5zbGljZSgwKTtcbiAgICAgIGlmIChuZXh0RW50cmllcy5sZW5ndGggPiBuZXh0SW5kZXgpIHtcbiAgICAgICAgbmV4dEVudHJpZXMuc3BsaWNlKG5leHRJbmRleCwgbmV4dEVudHJpZXMubGVuZ3RoIC0gbmV4dEluZGV4LCBsb2NhdGlvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXh0RW50cmllcy5wdXNoKGxvY2F0aW9uKTtcbiAgICAgIH1cblxuICAgICAgc2V0U3RhdGUoe1xuICAgICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uLFxuICAgICAgICBpbmRleDogbmV4dEluZGV4LFxuICAgICAgICBlbnRyaWVzOiBuZXh0RW50cmllc1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIHJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlKHBhdGgsIHN0YXRlKSB7XG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0KCkoISgodHlwZW9mIHBhdGggPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHBhdGgpKSA9PT0gJ29iamVjdCcgJiYgcGF0aC5zdGF0ZSAhPT0gdW5kZWZpbmVkICYmIHN0YXRlICE9PSB1bmRlZmluZWQpLCAnWW91IHNob3VsZCBhdm9pZCBwcm92aWRpbmcgYSAybmQgc3RhdGUgYXJndW1lbnQgdG8gcmVwbGFjZSB3aGVuIHRoZSAxc3QgJyArICdhcmd1bWVudCBpcyBhIGxvY2F0aW9uLWxpa2Ugb2JqZWN0IHRoYXQgYWxyZWFkeSBoYXMgc3RhdGU7IGl0IGlzIGlnbm9yZWQnKTtcblxuICAgIHZhciBhY3Rpb24gPSAnUkVQTEFDRSc7XG4gICAgdmFyIGxvY2F0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fTG9jYXRpb25VdGlsc19fW1wiYVwiIC8qIGNyZWF0ZUxvY2F0aW9uICovXSkocGF0aCwgc3RhdGUsIGNyZWF0ZUtleSgpLCBoaXN0b3J5LmxvY2F0aW9uKTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG5cbiAgICAgIGhpc3RvcnkuZW50cmllc1toaXN0b3J5LmluZGV4XSA9IGxvY2F0aW9uO1xuXG4gICAgICBzZXRTdGF0ZSh7IGFjdGlvbjogYWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24gfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdvID0gZnVuY3Rpb24gZ28obikge1xuICAgIHZhciBuZXh0SW5kZXggPSBjbGFtcChoaXN0b3J5LmluZGV4ICsgbiwgMCwgaGlzdG9yeS5lbnRyaWVzLmxlbmd0aCAtIDEpO1xuXG4gICAgdmFyIGFjdGlvbiA9ICdQT1AnO1xuICAgIHZhciBsb2NhdGlvbiA9IGhpc3RvcnkuZW50cmllc1tuZXh0SW5kZXhdO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmIChvaykge1xuICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uLFxuICAgICAgICAgIGluZGV4OiBuZXh0SW5kZXhcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBNaW1pYyB0aGUgYmVoYXZpb3Igb2YgRE9NIGhpc3RvcmllcyBieVxuICAgICAgICAvLyBjYXVzaW5nIGEgcmVuZGVyIGFmdGVyIGEgY2FuY2VsbGVkIFBPUC5cbiAgICAgICAgc2V0U3RhdGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICB2YXIgZ29CYWNrID0gZnVuY3Rpb24gZ29CYWNrKCkge1xuICAgIHJldHVybiBnbygtMSk7XG4gIH07XG5cbiAgdmFyIGdvRm9yd2FyZCA9IGZ1bmN0aW9uIGdvRm9yd2FyZCgpIHtcbiAgICByZXR1cm4gZ28oMSk7XG4gIH07XG5cbiAgdmFyIGNhbkdvID0gZnVuY3Rpb24gY2FuR28obikge1xuICAgIHZhciBuZXh0SW5kZXggPSBoaXN0b3J5LmluZGV4ICsgbjtcbiAgICByZXR1cm4gbmV4dEluZGV4ID49IDAgJiYgbmV4dEluZGV4IDwgaGlzdG9yeS5lbnRyaWVzLmxlbmd0aDtcbiAgfTtcblxuICB2YXIgYmxvY2sgPSBmdW5jdGlvbiBibG9jaygpIHtcbiAgICB2YXIgcHJvbXB0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmYWxzZTtcbiAgICByZXR1cm4gdHJhbnNpdGlvbk1hbmFnZXIuc2V0UHJvbXB0KHByb21wdCk7XG4gIH07XG5cbiAgdmFyIGxpc3RlbiA9IGZ1bmN0aW9uIGxpc3RlbihsaXN0ZW5lcikge1xuICAgIHJldHVybiB0cmFuc2l0aW9uTWFuYWdlci5hcHBlbmRMaXN0ZW5lcihsaXN0ZW5lcik7XG4gIH07XG5cbiAgdmFyIGhpc3RvcnkgPSB7XG4gICAgbGVuZ3RoOiBlbnRyaWVzLmxlbmd0aCxcbiAgICBhY3Rpb246ICdQT1AnLFxuICAgIGxvY2F0aW9uOiBlbnRyaWVzW2luZGV4XSxcbiAgICBpbmRleDogaW5kZXgsXG4gICAgZW50cmllczogZW50cmllcyxcbiAgICBjcmVhdGVIcmVmOiBjcmVhdGVIcmVmLFxuICAgIHB1c2g6IHB1c2gsXG4gICAgcmVwbGFjZTogcmVwbGFjZSxcbiAgICBnbzogZ28sXG4gICAgZ29CYWNrOiBnb0JhY2ssXG4gICAgZ29Gb3J3YXJkOiBnb0ZvcndhcmQsXG4gICAgY2FuR286IGNhbkdvLFxuICAgIGJsb2NrOiBibG9jayxcbiAgICBsaXN0ZW46IGxpc3RlblxuICB9O1xuXG4gIHJldHVybiBoaXN0b3J5O1xufTtcblxuLyogdW51c2VkIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gdmFyIF91bnVzZWRfd2VicGFja19kZWZhdWx0X2V4cG9ydCA9IChjcmVhdGVNZW1vcnlIaXN0b3J5KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDE0MTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19jcmVhdGVCcm93c2VySGlzdG9yeV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzgpO1xuLyogdW51c2VkIGhhcm1vbnkgcmVleHBvcnQgY3JlYXRlQnJvd3Nlckhpc3RvcnkgKi9cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX2NyZWF0ZUhhc2hIaXN0b3J5X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOSk7XG4vKiB1bnVzZWQgaGFybW9ueSByZWV4cG9ydCBjcmVhdGVIYXNoSGlzdG9yeSAqL1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fY3JlYXRlTWVtb3J5SGlzdG9yeV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDApO1xuLyogdW51c2VkIGhhcm1vbnkgcmVleHBvcnQgY3JlYXRlTWVtb3J5SGlzdG9yeSAqL1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fTG9jYXRpb25VdGlsc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7XG4vKiBoYXJtb255IHJlZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJhXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19Mb2NhdGlvblV0aWxzX19bXCJhXCJdOyB9KTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX0xvY2F0aW9uVXRpbHNfX1tcImJcIl07IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fUGF0aFV0aWxzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTtcbi8qIHVudXNlZCBoYXJtb255IHJlZXhwb3J0IHBhcnNlUGF0aCAqL1xuLyogdW51c2VkIGhhcm1vbnkgcmVleHBvcnQgY3JlYXRlUGF0aCAqL1xuXG5cblxuXG5cblxuXG5cblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMTQzOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblxudmFyIF9leHRlbmRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4dGVuZHMyKTtcblxudmFyIF9rZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDIpO1xuXG52YXIgX2tleXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5cyk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RXaXRob3V0UHJvcGVydGllczIpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7XG5cbnZhciBfaW5oZXJpdHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG5leHBvcnRzLmdldFN0eWxlcyA9IGdldFN0eWxlcztcblxudmFyIF9zaW1wbGVBc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXG52YXIgX3NpbXBsZUFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaW1wbGVBc3NpZ24pO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxudmFyIF9JY29uQnV0dG9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCk7XG5cbnZhciBfSWNvbkJ1dHRvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9JY29uQnV0dG9uKTtcblxudmFyIF9tZW51ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjUpO1xuXG52YXIgX21lbnUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWVudSk7XG5cbnZhciBfUGFwZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblxudmFyIF9QYXBlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9QYXBlcik7XG5cbnZhciBfcHJvcFR5cGVzMyA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXG52YXIgX3Byb3BUeXBlczQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMzKTtcblxudmFyIF93YXJuaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cbnZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gZ2V0U3R5bGVzKHByb3BzLCBjb250ZXh0KSB7XG4gIHZhciBfY29udGV4dCRtdWlUaGVtZSA9IGNvbnRleHQubXVpVGhlbWUsXG4gICAgICBhcHBCYXIgPSBfY29udGV4dCRtdWlUaGVtZS5hcHBCYXIsXG4gICAgICBpY29uQnV0dG9uU2l6ZSA9IF9jb250ZXh0JG11aVRoZW1lLmJ1dHRvbi5pY29uQnV0dG9uU2l6ZSxcbiAgICAgIHpJbmRleCA9IF9jb250ZXh0JG11aVRoZW1lLnpJbmRleDtcblxuXG4gIHZhciBmbGF0QnV0dG9uU2l6ZSA9IDM2O1xuXG4gIHZhciBzdHlsZXMgPSB7XG4gICAgcm9vdDoge1xuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICB6SW5kZXg6IHpJbmRleC5hcHBCYXIsXG4gICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiBhcHBCYXIuY29sb3IsXG4gICAgICBwYWRkaW5nTGVmdDogYXBwQmFyLnBhZGRpbmcsXG4gICAgICBwYWRkaW5nUmlnaHQ6IGFwcEJhci5wYWRkaW5nXG4gICAgfSxcbiAgICB0aXRsZToge1xuICAgICAgd2hpdGVTcGFjZTogJ25vd3JhcCcsXG4gICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICB0ZXh0T3ZlcmZsb3c6ICdlbGxpcHNpcycsXG4gICAgICBtYXJnaW46IDAsXG4gICAgICBwYWRkaW5nVG9wOiAwLFxuICAgICAgbGV0dGVyU3BhY2luZzogMCxcbiAgICAgIGZvbnRTaXplOiAyNCxcbiAgICAgIGZvbnRXZWlnaHQ6IGFwcEJhci50aXRsZUZvbnRXZWlnaHQsXG4gICAgICBjb2xvcjogYXBwQmFyLnRleHRDb2xvcixcbiAgICAgIGhlaWdodDogYXBwQmFyLmhlaWdodCxcbiAgICAgIGxpbmVIZWlnaHQ6IGFwcEJhci5oZWlnaHQgKyAncHgnXG4gICAgfSxcbiAgICBtYWluRWxlbWVudDoge1xuICAgICAgYm94RmxleDogMSxcbiAgICAgIGZsZXg6ICcxJ1xuICAgIH0sXG4gICAgaWNvbkJ1dHRvblN0eWxlOiB7XG4gICAgICBtYXJnaW5Ub3A6IChhcHBCYXIuaGVpZ2h0IC0gaWNvbkJ1dHRvblNpemUpIC8gMixcbiAgICAgIG1hcmdpblJpZ2h0OiA4LFxuICAgICAgbWFyZ2luTGVmdDogLTE2XG4gICAgfSxcbiAgICBpY29uQnV0dG9uSWNvblN0eWxlOiB7XG4gICAgICBmaWxsOiBhcHBCYXIudGV4dENvbG9yLFxuICAgICAgY29sb3I6IGFwcEJhci50ZXh0Q29sb3JcbiAgICB9LFxuICAgIGZsYXRCdXR0b246IHtcbiAgICAgIGNvbG9yOiBhcHBCYXIudGV4dENvbG9yLFxuICAgICAgbWFyZ2luVG9wOiAoaWNvbkJ1dHRvblNpemUgLSBmbGF0QnV0dG9uU2l6ZSkgLyAyICsgMVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gc3R5bGVzO1xufVxuXG52YXIgQXBwQmFyID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoQXBwQmFyLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBBcHBCYXIoKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgQXBwQmFyKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoX3JlZiA9IEFwcEJhci5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoQXBwQmFyKSkuY2FsbC5hcHBseShfcmVmLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuaGFuZGxlVG91Y2hUYXBMZWZ0SWNvbkJ1dHRvbiA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKF90aGlzLnByb3BzLm9uTGVmdEljb25CdXR0b25Ub3VjaFRhcCkge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbkxlZnRJY29uQnV0dG9uVG91Y2hUYXAoZXZlbnQpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmhhbmRsZVRvdWNoVGFwUmlnaHRJY29uQnV0dG9uID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoX3RoaXMucHJvcHMub25SaWdodEljb25CdXR0b25Ub3VjaFRhcCkge1xuICAgICAgICBfdGhpcy5wcm9wcy5vblJpZ2h0SWNvbkJ1dHRvblRvdWNoVGFwKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9LCBfdGhpcy5oYW5kbGVUaXRsZVRvdWNoVGFwID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoX3RoaXMucHJvcHMub25UaXRsZVRvdWNoVGFwKSB7XG4gICAgICAgIF90aGlzLnByb3BzLm9uVGl0bGVUb3VjaFRhcChldmVudCk7XG4gICAgICB9XG4gICAgfSwgX3RlbXApLCAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKEFwcEJhciwgW3tcbiAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgIGZhbHNlID8gKDAsIF93YXJuaW5nMi5kZWZhdWx0KSghdGhpcy5wcm9wcy5pY29uRWxlbWVudExlZnQgfHwgIXRoaXMucHJvcHMuaWNvbkNsYXNzTmFtZUxlZnQsICdNYXRlcmlhbC1VSTogUHJvcGVydGllcyBpY29uRWxlbWVudExlZnRcXG4gICAgICBhbmQgaWNvbkNsYXNzTmFtZUxlZnQgY2Fubm90IGJlIHNpbXVsdGFuZW91c2x5IGRlZmluZWQuIFBsZWFzZSB1c2Ugb25lIG9yIHRoZSBvdGhlci4nKSA6IHZvaWQgMDtcblxuICAgICAgIGZhbHNlID8gKDAsIF93YXJuaW5nMi5kZWZhdWx0KSghdGhpcy5wcm9wcy5pY29uRWxlbWVudFJpZ2h0IHx8ICF0aGlzLnByb3BzLmljb25DbGFzc05hbWVSaWdodCwgJ01hdGVyaWFsLVVJOiBQcm9wZXJ0aWVzIGljb25FbGVtZW50UmlnaHRcXG4gICAgICBhbmQgaWNvbkNsYXNzTmFtZVJpZ2h0IGNhbm5vdCBiZSBzaW11bHRhbmVvdXNseSBkZWZpbmVkLiBQbGVhc2UgdXNlIG9uZSBvciB0aGUgb3RoZXIuJykgOiB2b2lkIDA7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgdGl0bGUgPSBfcHJvcHMudGl0bGUsXG4gICAgICAgICAgdGl0bGVTdHlsZSA9IF9wcm9wcy50aXRsZVN0eWxlLFxuICAgICAgICAgIGljb25TdHlsZUxlZnQgPSBfcHJvcHMuaWNvblN0eWxlTGVmdCxcbiAgICAgICAgICBpY29uU3R5bGVSaWdodCA9IF9wcm9wcy5pY29uU3R5bGVSaWdodCxcbiAgICAgICAgICBvblRpdGxlVG91Y2hUYXAgPSBfcHJvcHMub25UaXRsZVRvdWNoVGFwLFxuICAgICAgICAgIHNob3dNZW51SWNvbkJ1dHRvbiA9IF9wcm9wcy5zaG93TWVudUljb25CdXR0b24sXG4gICAgICAgICAgaWNvbkVsZW1lbnRMZWZ0ID0gX3Byb3BzLmljb25FbGVtZW50TGVmdCxcbiAgICAgICAgICBpY29uRWxlbWVudFJpZ2h0ID0gX3Byb3BzLmljb25FbGVtZW50UmlnaHQsXG4gICAgICAgICAgaWNvbkNsYXNzTmFtZUxlZnQgPSBfcHJvcHMuaWNvbkNsYXNzTmFtZUxlZnQsXG4gICAgICAgICAgaWNvbkNsYXNzTmFtZVJpZ2h0ID0gX3Byb3BzLmljb25DbGFzc05hbWVSaWdodCxcbiAgICAgICAgICBvbkxlZnRJY29uQnV0dG9uVG91Y2hUYXAgPSBfcHJvcHMub25MZWZ0SWNvbkJ1dHRvblRvdWNoVGFwLFxuICAgICAgICAgIG9uUmlnaHRJY29uQnV0dG9uVG91Y2hUYXAgPSBfcHJvcHMub25SaWdodEljb25CdXR0b25Ub3VjaFRhcCxcbiAgICAgICAgICBjbGFzc05hbWUgPSBfcHJvcHMuY2xhc3NOYW1lLFxuICAgICAgICAgIHN0eWxlID0gX3Byb3BzLnN0eWxlLFxuICAgICAgICAgIHpEZXB0aCA9IF9wcm9wcy56RGVwdGgsXG4gICAgICAgICAgY2hpbGRyZW4gPSBfcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgICAgb3RoZXIgPSAoMCwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMy5kZWZhdWx0KShfcHJvcHMsIFsndGl0bGUnLCAndGl0bGVTdHlsZScsICdpY29uU3R5bGVMZWZ0JywgJ2ljb25TdHlsZVJpZ2h0JywgJ29uVGl0bGVUb3VjaFRhcCcsICdzaG93TWVudUljb25CdXR0b24nLCAnaWNvbkVsZW1lbnRMZWZ0JywgJ2ljb25FbGVtZW50UmlnaHQnLCAnaWNvbkNsYXNzTmFtZUxlZnQnLCAnaWNvbkNsYXNzTmFtZVJpZ2h0JywgJ29uTGVmdEljb25CdXR0b25Ub3VjaFRhcCcsICdvblJpZ2h0SWNvbkJ1dHRvblRvdWNoVGFwJywgJ2NsYXNzTmFtZScsICdzdHlsZScsICd6RGVwdGgnLCAnY2hpbGRyZW4nXSk7XG4gICAgICB2YXIgcHJlcGFyZVN0eWxlcyA9IHRoaXMuY29udGV4dC5tdWlUaGVtZS5wcmVwYXJlU3R5bGVzO1xuXG4gICAgICB2YXIgc3R5bGVzID0gZ2V0U3R5bGVzKHRoaXMucHJvcHMsIHRoaXMuY29udGV4dCk7XG5cbiAgICAgIHZhciBtZW51RWxlbWVudExlZnQgPSB2b2lkIDA7XG4gICAgICB2YXIgbWVudUVsZW1lbnRSaWdodCA9IHZvaWQgMDtcblxuICAgICAgLy8gSWYgdGhlIHRpdGxlIGlzIGEgc3RyaW5nLCB3cmFwIGluIGFuIGgxIHRhZy5cbiAgICAgIC8vIElmIG5vdCwgd3JhcCBpbiBhIGRpdiB0YWcuXG4gICAgICB2YXIgdGl0bGVDb21wb25lbnQgPSB0eXBlb2YgdGl0bGUgPT09ICdzdHJpbmcnIHx8IHRpdGxlIGluc3RhbmNlb2YgU3RyaW5nID8gJ2gxJyA6ICdkaXYnO1xuXG4gICAgICB2YXIgdGl0bGVFbGVtZW50ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQodGl0bGVDb21wb25lbnQsIHtcbiAgICAgICAgb25Ub3VjaFRhcDogdGhpcy5oYW5kbGVUaXRsZVRvdWNoVGFwLFxuICAgICAgICBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLnRpdGxlLCBzdHlsZXMubWFpbkVsZW1lbnQsIHRpdGxlU3R5bGUpKVxuICAgICAgfSwgdGl0bGUpO1xuXG4gICAgICB2YXIgaWNvbkxlZnRTdHlsZSA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgc3R5bGVzLmljb25CdXR0b25TdHlsZSwgaWNvblN0eWxlTGVmdCk7XG5cbiAgICAgIGlmIChzaG93TWVudUljb25CdXR0b24pIHtcbiAgICAgICAgaWYgKGljb25FbGVtZW50TGVmdCkge1xuICAgICAgICAgIHZhciBpY29uRWxlbWVudExlZnRQcm9wcyA9IHt9O1xuXG4gICAgICAgICAgaWYgKGljb25FbGVtZW50TGVmdC50eXBlLm11aU5hbWUgPT09ICdJY29uQnV0dG9uJykge1xuICAgICAgICAgICAgdmFyIGljb25FbGVtTGVmdENoaWxkcmVuID0gaWNvbkVsZW1lbnRMZWZ0LnByb3BzLmNoaWxkcmVuO1xuICAgICAgICAgICAgdmFyIGljb25CdXR0b25JY29uU3R5bGUgPSAhKGljb25FbGVtTGVmdENoaWxkcmVuICYmIGljb25FbGVtTGVmdENoaWxkcmVuLnByb3BzICYmIGljb25FbGVtTGVmdENoaWxkcmVuLnByb3BzLmNvbG9yKSA/IHN0eWxlcy5pY29uQnV0dG9uSWNvblN0eWxlIDogbnVsbDtcblxuICAgICAgICAgICAgaWNvbkVsZW1lbnRMZWZ0UHJvcHMuaWNvblN0eWxlID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBpY29uQnV0dG9uSWNvblN0eWxlLCBpY29uRWxlbWVudExlZnQucHJvcHMuaWNvblN0eWxlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWljb25FbGVtZW50TGVmdC5wcm9wcy5vblRvdWNoVGFwICYmIHRoaXMucHJvcHMub25MZWZ0SWNvbkJ1dHRvblRvdWNoVGFwKSB7XG4gICAgICAgICAgICBpY29uRWxlbWVudExlZnRQcm9wcy5vblRvdWNoVGFwID0gdGhpcy5oYW5kbGVUb3VjaFRhcExlZnRJY29uQnV0dG9uO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG1lbnVFbGVtZW50TGVmdCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7IHN0eWxlOiBwcmVwYXJlU3R5bGVzKGljb25MZWZ0U3R5bGUpIH0sXG4gICAgICAgICAgICAoMCwgX2tleXMyLmRlZmF1bHQpKGljb25FbGVtZW50TGVmdFByb3BzKS5sZW5ndGggPiAwID8gKDAsIF9yZWFjdC5jbG9uZUVsZW1lbnQpKGljb25FbGVtZW50TGVmdCwgaWNvbkVsZW1lbnRMZWZ0UHJvcHMpIDogaWNvbkVsZW1lbnRMZWZ0XG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtZW51RWxlbWVudExlZnQgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgIF9JY29uQnV0dG9uMi5kZWZhdWx0LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzdHlsZTogaWNvbkxlZnRTdHlsZSxcbiAgICAgICAgICAgICAgaWNvblN0eWxlOiBzdHlsZXMuaWNvbkJ1dHRvbkljb25TdHlsZSxcbiAgICAgICAgICAgICAgaWNvbkNsYXNzTmFtZTogaWNvbkNsYXNzTmFtZUxlZnQsXG4gICAgICAgICAgICAgIG9uVG91Y2hUYXA6IHRoaXMuaGFuZGxlVG91Y2hUYXBMZWZ0SWNvbkJ1dHRvblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGljb25DbGFzc05hbWVMZWZ0ID8gJycgOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfbWVudTIuZGVmYXVsdCwgeyBzdHlsZTogKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBzdHlsZXMuaWNvbkJ1dHRvbkljb25TdHlsZSkgfSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBpY29uUmlnaHRTdHlsZSA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgc3R5bGVzLmljb25CdXR0b25TdHlsZSwge1xuICAgICAgICBtYXJnaW5SaWdodDogLTE2LFxuICAgICAgICBtYXJnaW5MZWZ0OiAnYXV0bydcbiAgICAgIH0sIGljb25TdHlsZVJpZ2h0KTtcblxuICAgICAgaWYgKGljb25FbGVtZW50UmlnaHQpIHtcbiAgICAgICAgdmFyIGljb25FbGVtZW50UmlnaHRQcm9wcyA9IHt9O1xuXG4gICAgICAgIHN3aXRjaCAoaWNvbkVsZW1lbnRSaWdodC50eXBlLm11aU5hbWUpIHtcbiAgICAgICAgICBjYXNlICdJY29uTWVudSc6XG4gICAgICAgICAgY2FzZSAnSWNvbkJ1dHRvbic6XG4gICAgICAgICAgICB2YXIgaWNvbkVsZW1SaWdodENoaWxkcmVuID0gaWNvbkVsZW1lbnRSaWdodC5wcm9wcy5jaGlsZHJlbjtcbiAgICAgICAgICAgIHZhciBfaWNvbkJ1dHRvbkljb25TdHlsZSA9ICEoaWNvbkVsZW1SaWdodENoaWxkcmVuICYmIGljb25FbGVtUmlnaHRDaGlsZHJlbi5wcm9wcyAmJiBpY29uRWxlbVJpZ2h0Q2hpbGRyZW4ucHJvcHMuY29sb3IpID8gc3R5bGVzLmljb25CdXR0b25JY29uU3R5bGUgOiBudWxsO1xuXG4gICAgICAgICAgICBpY29uRWxlbWVudFJpZ2h0UHJvcHMuaWNvblN0eWxlID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBfaWNvbkJ1dHRvbkljb25TdHlsZSwgaWNvbkVsZW1lbnRSaWdodC5wcm9wcy5pY29uU3R5bGUpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdGbGF0QnV0dG9uJzpcbiAgICAgICAgICAgIGljb25FbGVtZW50UmlnaHRQcm9wcy5zdHlsZSA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgc3R5bGVzLmZsYXRCdXR0b24sIGljb25FbGVtZW50UmlnaHQucHJvcHMuc3R5bGUpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpY29uRWxlbWVudFJpZ2h0LnByb3BzLm9uVG91Y2hUYXAgJiYgdGhpcy5wcm9wcy5vblJpZ2h0SWNvbkJ1dHRvblRvdWNoVGFwKSB7XG4gICAgICAgICAgaWNvbkVsZW1lbnRSaWdodFByb3BzLm9uVG91Y2hUYXAgPSB0aGlzLmhhbmRsZVRvdWNoVGFwUmlnaHRJY29uQnV0dG9uO1xuICAgICAgICB9XG5cbiAgICAgICAgbWVudUVsZW1lbnRSaWdodCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIHsgc3R5bGU6IHByZXBhcmVTdHlsZXMoaWNvblJpZ2h0U3R5bGUpIH0sXG4gICAgICAgICAgKDAsIF9rZXlzMi5kZWZhdWx0KShpY29uRWxlbWVudFJpZ2h0UHJvcHMpLmxlbmd0aCA+IDAgPyAoMCwgX3JlYWN0LmNsb25lRWxlbWVudCkoaWNvbkVsZW1lbnRSaWdodCwgaWNvbkVsZW1lbnRSaWdodFByb3BzKSA6IGljb25FbGVtZW50UmlnaHRcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoaWNvbkNsYXNzTmFtZVJpZ2h0KSB7XG4gICAgICAgIG1lbnVFbGVtZW50UmlnaHQgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfSWNvbkJ1dHRvbjIuZGVmYXVsdCwge1xuICAgICAgICAgIHN0eWxlOiBpY29uUmlnaHRTdHlsZSxcbiAgICAgICAgICBpY29uU3R5bGU6IHN0eWxlcy5pY29uQnV0dG9uSWNvblN0eWxlLFxuICAgICAgICAgIGljb25DbGFzc05hbWU6IGljb25DbGFzc05hbWVSaWdodCxcbiAgICAgICAgICBvblRvdWNoVGFwOiB0aGlzLmhhbmRsZVRvdWNoVGFwUmlnaHRJY29uQnV0dG9uXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgIF9QYXBlcjIuZGVmYXVsdCxcbiAgICAgICAgKDAsIF9leHRlbmRzMy5kZWZhdWx0KSh7fSwgb3RoZXIsIHtcbiAgICAgICAgICByb3VuZGVkOiBmYWxzZSxcbiAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgICBzdHlsZTogKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBzdHlsZXMucm9vdCwgc3R5bGUpLFxuICAgICAgICAgIHpEZXB0aDogekRlcHRoXG4gICAgICAgIH0pLFxuICAgICAgICBtZW51RWxlbWVudExlZnQsXG4gICAgICAgIHRpdGxlRWxlbWVudCxcbiAgICAgICAgbWVudUVsZW1lbnRSaWdodCxcbiAgICAgICAgY2hpbGRyZW5cbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBBcHBCYXI7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5BcHBCYXIubXVpTmFtZSA9ICdBcHBCYXInO1xuQXBwQmFyLmRlZmF1bHRQcm9wcyA9IHtcbiAgc2hvd01lbnVJY29uQnV0dG9uOiB0cnVlLFxuICB0aXRsZTogJycsXG4gIHpEZXB0aDogMVxufTtcbkFwcEJhci5jb250ZXh0VHlwZXMgPSB7XG4gIG11aVRoZW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkXG59O1xuQXBwQmFyLnByb3BUeXBlcyA9ICBmYWxzZSA/IHtcbiAgLyoqXG4gICAqIENhbiBiZSB1c2VkIHRvIHJlbmRlciBhIHRhYiBpbnNpZGUgYW4gYXBwIGJhciBmb3IgaW5zdGFuY2UuXG4gICAqL1xuICBjaGlsZHJlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICAvKipcbiAgICogQXBwbGllZCB0byB0aGUgYXBwIGJhcidzIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIGNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBUaGUgY2xhc3NuYW1lIG9mIHRoZSBpY29uIG9uIHRoZSBsZWZ0IG9mIHRoZSBhcHAgYmFyLlxuICAgKiBJZiB5b3UgYXJlIHVzaW5nIGEgc3R5bGVzaGVldCBmb3IgeW91ciBpY29ucywgZW50ZXIgdGhlIGNsYXNzIG5hbWUgZm9yIHRoZSBpY29uIHRvIGJlIHVzZWQgaGVyZS5cbiAgICovXG4gIGljb25DbGFzc05hbWVMZWZ0OiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIFNpbWlsaWFyIHRvIHRoZSBpY29uQ2xhc3NOYW1lTGVmdCBwcm9wIGV4Y2VwdCB0aGF0XG4gICAqIGl0IGFwcGxpZXMgdG8gdGhlIGljb24gZGlzcGxheWVkIG9uIHRoZSByaWdodCBvZiB0aGUgYXBwIGJhci5cbiAgICovXG4gIGljb25DbGFzc05hbWVSaWdodDogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBUaGUgY3VzdG9tIGVsZW1lbnQgdG8gYmUgZGlzcGxheWVkIG9uIHRoZSBsZWZ0IHNpZGUgb2YgdGhlXG4gICAqIGFwcCBiYXIgc3VjaCBhcyBhbiBTdmdJY29uLlxuICAgKi9cbiAgaWNvbkVsZW1lbnRMZWZ0OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmVsZW1lbnQsXG4gIC8qKlxuICAgKiBTaW1pbGlhciB0byB0aGUgaWNvbkVsZW1lbnRMZWZ0IHByb3AgZXhjZXB0IHRoYXQgdGhpcyBlbGVtZW50IGlzIGRpc3BsYXllZCBvbiB0aGUgcmlnaHQgb2YgdGhlIGFwcCBiYXIuXG4gICAqL1xuICBpY29uRWxlbWVudFJpZ2h0OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmVsZW1lbnQsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgZWxlbWVudCBkaXNwbGF5ZWQgb24gdGhlIGxlZnQgc2lkZSBvZiB0aGUgYXBwIGJhci5cbiAgICovXG4gIGljb25TdHlsZUxlZnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIGVsZW1lbnQgZGlzcGxheWVkIG9uIHRoZSByaWdodCBzaWRlIG9mIHRoZSBhcHAgYmFyLlxuICAgKi9cbiAgaWNvblN0eWxlUmlnaHQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gZm9yIHdoZW4gdGhlIGxlZnQgaWNvbiBpcyBzZWxlY3RlZCB2aWEgYSB0b3VjaCB0YXAuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBUb3VjaFRhcCBldmVudCB0YXJnZXRpbmcgdGhlIGxlZnQgYEljb25CdXR0b25gLlxuICAgKi9cbiAgb25MZWZ0SWNvbkJ1dHRvblRvdWNoVGFwOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmdW5jdGlvbiBmb3Igd2hlbiB0aGUgcmlnaHQgaWNvbiBpcyBzZWxlY3RlZCB2aWEgYSB0b3VjaCB0YXAuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBUb3VjaFRhcCBldmVudCB0YXJnZXRpbmcgdGhlIHJpZ2h0IGBJY29uQnV0dG9uYC5cbiAgICovXG4gIG9uUmlnaHRJY29uQnV0dG9uVG91Y2hUYXA6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZvciB3aGVuIHRoZSB0aXRsZSB0ZXh0IGlzIHNlbGVjdGVkIHZpYSBhIHRvdWNoIHRhcC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IFRvdWNoVGFwIGV2ZW50IHRhcmdldGluZyB0aGUgYHRpdGxlYCBub2RlLlxuICAgKi9cbiAgb25UaXRsZVRvdWNoVGFwOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgb3Igbm90IHRvIGRpc3BsYXkgdGhlIE1lbnUgaWNvbiBuZXh0IHRvIHRoZSB0aXRsZS5cbiAgICogU2V0dGluZyB0aGlzIHByb3AgdG8gZmFsc2Ugd2lsbCBoaWRlIHRoZSBpY29uLlxuICAgKi9cbiAgc2hvd01lbnVJY29uQnV0dG9uOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhlIHRpdGxlIHRvIGRpc3BsYXkgb24gdGhlIGFwcCBiYXIuXG4gICAqL1xuICB0aXRsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIGFwcCBiYXIncyB0aXRsZSBlbGVtZW50LlxuICAgKi9cbiAgdGl0bGVTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBUaGUgekRlcHRoIG9mIHRoZSBjb21wb25lbnQuXG4gICAqIFRoZSBzaGFkb3cgb2YgdGhlIGFwcCBiYXIgaXMgYWxzbyBkZXBlbmRlbnQgb24gdGhpcyBwcm9wZXJ0eS5cbiAgICovXG4gIHpEZXB0aDogX3Byb3BUeXBlczQuZGVmYXVsdC56RGVwdGhcbn0gOiB7fTtcbmV4cG9ydHMuZGVmYXVsdCA9IEFwcEJhcjtcblxuLyoqKi8gfSksXG5cbi8qKiovIDE0NDpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHVuZGVmaW5lZDtcblxudmFyIF9BcHBCYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Myk7XG5cbnZhciBfQXBwQmFyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0FwcEJhcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuZGVmYXVsdCA9IF9BcHBCYXIyLmRlZmF1bHQ7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAxNDU6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXG52YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTtcblxudmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpO1xuXG52YXIgX2luaGVyaXRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cbnZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTtcblxudmFyIF9zaW1wbGVBc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXG52YXIgX3NpbXBsZUFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaW1wbGVBc3NpZ24pO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxudmFyIF9FbmhhbmNlZFN3aXRjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMTU3KTtcblxudmFyIF9FbmhhbmNlZFN3aXRjaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9FbmhhbmNlZFN3aXRjaCk7XG5cbnZhciBfdHJhbnNpdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblxudmFyIF90cmFuc2l0aW9uczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90cmFuc2l0aW9ucyk7XG5cbnZhciBfY2hlY2tCb3hPdXRsaW5lQmxhbmsgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Nyk7XG5cbnZhciBfY2hlY2tCb3hPdXRsaW5lQmxhbmsyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hlY2tCb3hPdXRsaW5lQmxhbmspO1xuXG52YXIgX2NoZWNrQm94ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjgpO1xuXG52YXIgX2NoZWNrQm94MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NoZWNrQm94KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gZ2V0U3R5bGVzKHByb3BzLCBjb250ZXh0KSB7XG4gIHZhciBjaGVja2JveCA9IGNvbnRleHQubXVpVGhlbWUuY2hlY2tib3g7XG5cbiAgdmFyIGNoZWNrYm94U2l6ZSA9IDI0O1xuXG4gIHJldHVybiB7XG4gICAgaWNvbjoge1xuICAgICAgaGVpZ2h0OiBjaGVja2JveFNpemUsXG4gICAgICB3aWR0aDogY2hlY2tib3hTaXplXG4gICAgfSxcbiAgICBjaGVjazoge1xuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICBvcGFjaXR5OiAwLFxuICAgICAgdHJhbnNmb3JtOiAnc2NhbGUoMCknLFxuICAgICAgdHJhbnNpdGlvbk9yaWdpbjogJzUwJSA1MCUnLFxuICAgICAgdHJhbnNpdGlvbjogX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoJzQ1MG1zJywgJ29wYWNpdHknLCAnMG1zJykgKyAnLCAnICsgX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoJzBtcycsICd0cmFuc2Zvcm0nLCAnNDUwbXMnKSxcbiAgICAgIGZpbGw6IGNoZWNrYm94LmNoZWNrZWRDb2xvclxuICAgIH0sXG4gICAgY2hlY2tXaGVuU3dpdGNoZWQ6IHtcbiAgICAgIG9wYWNpdHk6IDEsXG4gICAgICB0cmFuc2Zvcm06ICdzY2FsZSgxKScsXG4gICAgICB0cmFuc2l0aW9uOiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnMG1zJywgJ29wYWNpdHknLCAnMG1zJykgKyAnLCAnICsgX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoJzgwMG1zJywgJ3RyYW5zZm9ybScsICcwbXMnKVxuICAgIH0sXG4gICAgY2hlY2tXaGVuRGlzYWJsZWQ6IHtcbiAgICAgIGZpbGw6IGNoZWNrYm94LmRpc2FibGVkQ29sb3JcbiAgICB9LFxuICAgIGJveDoge1xuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICBvcGFjaXR5OiAxLFxuICAgICAgZmlsbDogY2hlY2tib3guYm94Q29sb3IsXG4gICAgICB0cmFuc2l0aW9uOiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnMTAwMG1zJywgJ29wYWNpdHknLCAnMjAwbXMnKVxuICAgIH0sXG4gICAgYm94V2hlblN3aXRjaGVkOiB7XG4gICAgICBvcGFjaXR5OiAwLFxuICAgICAgdHJhbnNpdGlvbjogX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoJzY1MG1zJywgJ29wYWNpdHknLCAnMTUwbXMnKSxcbiAgICAgIGZpbGw6IGNoZWNrYm94LmNoZWNrZWRDb2xvclxuICAgIH0sXG4gICAgYm94V2hlbkRpc2FibGVkOiB7XG4gICAgICBmaWxsOiBwcm9wcy5jaGVja2VkID8gJ3RyYW5zcGFyZW50JyA6IGNoZWNrYm94LmRpc2FibGVkQ29sb3JcbiAgICB9LFxuICAgIGxhYmVsOiB7XG4gICAgICBjb2xvcjogcHJvcHMuZGlzYWJsZWQgPyBjaGVja2JveC5sYWJlbERpc2FibGVkQ29sb3IgOiBjaGVja2JveC5sYWJlbENvbG9yXG4gICAgfVxuICB9O1xufVxuXG52YXIgQ2hlY2tib3ggPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShDaGVja2JveCwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQ2hlY2tib3goKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgQ2hlY2tib3gpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChfcmVmID0gQ2hlY2tib3guX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKENoZWNrYm94KSkuY2FsbC5hcHBseShfcmVmLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBzd2l0Y2hlZDogZmFsc2VcbiAgICB9LCBfdGhpcy5oYW5kbGVTdGF0ZUNoYW5nZSA9IGZ1bmN0aW9uIChuZXdTd2l0Y2hlZCkge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBzd2l0Y2hlZDogbmV3U3dpdGNoZWRcbiAgICAgIH0pO1xuICAgIH0sIF90aGlzLmhhbmRsZUNoZWNrID0gZnVuY3Rpb24gKGV2ZW50LCBpc0lucHV0Q2hlY2tlZCkge1xuICAgICAgaWYgKF90aGlzLnByb3BzLm9uQ2hlY2spIHtcbiAgICAgICAgX3RoaXMucHJvcHMub25DaGVjayhldmVudCwgaXNJbnB1dENoZWNrZWQpO1xuICAgICAgfVxuICAgIH0sIF90ZW1wKSwgKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KShfdGhpcywgX3JldCk7XG4gIH1cblxuICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShDaGVja2JveCwgW3tcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBjaGVja2VkID0gX3Byb3BzLmNoZWNrZWQsXG4gICAgICAgICAgZGVmYXVsdENoZWNrZWQgPSBfcHJvcHMuZGVmYXVsdENoZWNrZWQsXG4gICAgICAgICAgdmFsdWVMaW5rID0gX3Byb3BzLnZhbHVlTGluaztcblxuXG4gICAgICBpZiAoY2hlY2tlZCB8fCBkZWZhdWx0Q2hlY2tlZCB8fCB2YWx1ZUxpbmsgJiYgdmFsdWVMaW5rLnZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIHN3aXRjaGVkOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgaWYgKHRoaXMucHJvcHMuY2hlY2tlZCAhPT0gbmV4dFByb3BzLmNoZWNrZWQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgc3dpdGNoZWQ6IG5leHRQcm9wcy5jaGVja2VkXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2lzQ2hlY2tlZCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzQ2hlY2tlZCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlZnMuZW5oYW5jZWRTd2l0Y2guaXNTd2l0Y2hlZCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NldENoZWNrZWQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRDaGVja2VkKG5ld0NoZWNrZWRWYWx1ZSkge1xuICAgICAgdGhpcy5yZWZzLmVuaGFuY2VkU3dpdGNoLnNldFN3aXRjaGVkKG5ld0NoZWNrZWRWYWx1ZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9wcm9wczIgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGljb25TdHlsZSA9IF9wcm9wczIuaWNvblN0eWxlLFxuICAgICAgICAgIG9uQ2hlY2sgPSBfcHJvcHMyLm9uQ2hlY2ssXG4gICAgICAgICAgY2hlY2tlZEljb24gPSBfcHJvcHMyLmNoZWNrZWRJY29uLFxuICAgICAgICAgIHVuY2hlY2tlZEljb24gPSBfcHJvcHMyLnVuY2hlY2tlZEljb24sXG4gICAgICAgICAgb3RoZXIgPSAoMCwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMy5kZWZhdWx0KShfcHJvcHMyLCBbJ2ljb25TdHlsZScsICdvbkNoZWNrJywgJ2NoZWNrZWRJY29uJywgJ3VuY2hlY2tlZEljb24nXSk7XG5cbiAgICAgIHZhciBzdHlsZXMgPSBnZXRTdHlsZXModGhpcy5wcm9wcywgdGhpcy5jb250ZXh0KTtcbiAgICAgIHZhciBib3hTdHlsZXMgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLmJveCwgdGhpcy5zdGF0ZS5zd2l0Y2hlZCAmJiBzdHlsZXMuYm94V2hlblN3aXRjaGVkLCBpY29uU3R5bGUsIHRoaXMucHJvcHMuZGlzYWJsZWQgJiYgc3R5bGVzLmJveFdoZW5EaXNhYmxlZCk7XG4gICAgICB2YXIgY2hlY2tTdHlsZXMgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLmNoZWNrLCB0aGlzLnN0YXRlLnN3aXRjaGVkICYmIHN0eWxlcy5jaGVja1doZW5Td2l0Y2hlZCwgaWNvblN0eWxlLCB0aGlzLnByb3BzLmRpc2FibGVkICYmIHN0eWxlcy5jaGVja1doZW5EaXNhYmxlZCk7XG5cbiAgICAgIHZhciBjaGVja2VkRWxlbWVudCA9IGNoZWNrZWRJY29uID8gX3JlYWN0Mi5kZWZhdWx0LmNsb25lRWxlbWVudChjaGVja2VkSWNvbiwge1xuICAgICAgICBzdHlsZTogKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKGNoZWNrU3R5bGVzLCBjaGVja2VkSWNvbi5wcm9wcy5zdHlsZSlcbiAgICAgIH0pIDogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NoZWNrQm94Mi5kZWZhdWx0LCB7XG4gICAgICAgIHN0eWxlOiBjaGVja1N0eWxlc1xuICAgICAgfSk7XG5cbiAgICAgIHZhciB1bkNoZWNrZWRFbGVtZW50ID0gdW5jaGVja2VkSWNvbiA/IF9yZWFjdDIuZGVmYXVsdC5jbG9uZUVsZW1lbnQodW5jaGVja2VkSWNvbiwge1xuICAgICAgICBzdHlsZTogKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKGJveFN0eWxlcywgdW5jaGVja2VkSWNvbi5wcm9wcy5zdHlsZSlcbiAgICAgIH0pIDogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NoZWNrQm94T3V0bGluZUJsYW5rMi5kZWZhdWx0LCB7XG4gICAgICAgIHN0eWxlOiBib3hTdHlsZXNcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgY2hlY2tib3hFbGVtZW50ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICBudWxsLFxuICAgICAgICB1bkNoZWNrZWRFbGVtZW50LFxuICAgICAgICBjaGVja2VkRWxlbWVudFxuICAgICAgKTtcblxuICAgICAgdmFyIHJpcHBsZUNvbG9yID0gdGhpcy5zdGF0ZS5zd2l0Y2hlZCA/IGNoZWNrU3R5bGVzLmZpbGwgOiBib3hTdHlsZXMuZmlsbDtcbiAgICAgIHZhciBtZXJnZWRJY29uU3R5bGUgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLmljb24sIGljb25TdHlsZSk7XG5cbiAgICAgIHZhciBsYWJlbFN0eWxlID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5sYWJlbCwgdGhpcy5wcm9wcy5sYWJlbFN0eWxlKTtcblxuICAgICAgdmFyIGVuaGFuY2VkU3dpdGNoUHJvcHMgPSB7XG4gICAgICAgIHJlZjogJ2VuaGFuY2VkU3dpdGNoJyxcbiAgICAgICAgaW5wdXRUeXBlOiAnY2hlY2tib3gnLFxuICAgICAgICBzd2l0Y2hlZDogdGhpcy5zdGF0ZS5zd2l0Y2hlZCxcbiAgICAgICAgc3dpdGNoRWxlbWVudDogY2hlY2tib3hFbGVtZW50LFxuICAgICAgICByaXBwbGVDb2xvcjogcmlwcGxlQ29sb3IsXG4gICAgICAgIGljb25TdHlsZTogbWVyZ2VkSWNvblN0eWxlLFxuICAgICAgICBvblN3aXRjaDogdGhpcy5oYW5kbGVDaGVjayxcbiAgICAgICAgbGFiZWxTdHlsZTogbGFiZWxTdHlsZSxcbiAgICAgICAgb25QYXJlbnRTaG91bGRVcGRhdGU6IHRoaXMuaGFuZGxlU3RhdGVDaGFuZ2UsXG4gICAgICAgIGxhYmVsUG9zaXRpb246IHRoaXMucHJvcHMubGFiZWxQb3NpdGlvblxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9FbmhhbmNlZFN3aXRjaDIuZGVmYXVsdCwgKDAsIF9leHRlbmRzMy5kZWZhdWx0KSh7fSwgb3RoZXIsIGVuaGFuY2VkU3dpdGNoUHJvcHMpKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIENoZWNrYm94O1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuQ2hlY2tib3guZGVmYXVsdFByb3BzID0ge1xuICBsYWJlbFBvc2l0aW9uOiAncmlnaHQnLFxuICBkaXNhYmxlZDogZmFsc2Vcbn07XG5DaGVja2JveC5jb250ZXh0VHlwZXMgPSB7XG4gIG11aVRoZW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkXG59O1xuQ2hlY2tib3gucHJvcFR5cGVzID0gIGZhbHNlID8ge1xuICAvKipcbiAgICogQ2hlY2tib3ggaXMgY2hlY2tlZCBpZiB0cnVlLlxuICAgKi9cbiAgY2hlY2tlZDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogVGhlIFN2Z0ljb24gdG8gdXNlIGZvciB0aGUgY2hlY2tlZCBzdGF0ZS5cbiAgICogVGhpcyBpcyB1c2VmdWwgdG8gY3JlYXRlIGljb24gdG9nZ2xlcy5cbiAgICovXG4gIGNoZWNrZWRJY29uOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmVsZW1lbnQsXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBzdGF0ZSBvZiBvdXIgY2hlY2tib3ggY29tcG9uZW50LlxuICAgKiAqKldhcm5pbmc6KiogVGhpcyBjYW5ub3QgYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGBjaGVja2VkYC5cbiAgICogRGVjaWRlIGJldHdlZW4gdXNpbmcgYSBjb250cm9sbGVkIG9yIHVuY29udHJvbGxlZCBpbnB1dCBlbGVtZW50IGFuZCByZW1vdmUgb25lIG9mIHRoZXNlIHByb3BzLlxuICAgKiBNb3JlIGluZm86IGh0dHBzOi8vZmIubWUvcmVhY3QtY29udHJvbGxlZC1jb21wb25lbnRzXG4gICAqL1xuICBkZWZhdWx0Q2hlY2tlZDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogRGlzYWJsZWQgaWYgdHJ1ZS5cbiAgICovXG4gIGRpc2FibGVkOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIGljb24gZWxlbWVudC5cbiAgICovXG4gIGljb25TdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqL1xuICBpbnB1dFN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIFdoZXJlIHRoZSBsYWJlbCB3aWxsIGJlIHBsYWNlZCBuZXh0IHRvIHRoZSBjaGVja2JveC5cbiAgICovXG4gIGxhYmVsUG9zaXRpb246IF9wcm9wVHlwZXMyLmRlZmF1bHQub25lT2YoWydsZWZ0JywgJ3JpZ2h0J10pLFxuICAvKipcbiAgICogT3ZlcnJpZGVzIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBDaGVja2JveCBlbGVtZW50IGxhYmVsLlxuICAgKi9cbiAgbGFiZWxTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmdW5jdGlvbiB0aGF0IGlzIGZpcmVkIHdoZW4gdGhlIGNoZWNrYm94IGlzIGNoZWNrZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBgY2hhbmdlYCBldmVudCB0YXJnZXRpbmcgdGhlIHVuZGVybHlpbmcgY2hlY2tib3ggYGlucHV0YC5cbiAgICogQHBhcmFtIHtib29sZWFufSBpc0lucHV0Q2hlY2tlZCBUaGUgYGNoZWNrZWRgIHZhbHVlIG9mIHRoZSB1bmRlcmx5aW5nIGNoZWNrYm94IGBpbnB1dGAuXG4gICAqL1xuICBvbkNoZWNrOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhlIFN2Z0ljb24gdG8gdXNlIGZvciB0aGUgdW5jaGVja2VkIHN0YXRlLlxuICAgKiBUaGlzIGlzIHVzZWZ1bCB0byBjcmVhdGUgaWNvbiB0b2dnbGVzLlxuICAgKi9cbiAgdW5jaGVja2VkSWNvbjogX3Byb3BUeXBlczIuZGVmYXVsdC5lbGVtZW50LFxuICAvKipcbiAgICogVmFsdWVMaW5rIGZvciB3aGVuIHVzaW5nIGNvbnRyb2xsZWQgY2hlY2tib3guXG4gICAqL1xuICB2YWx1ZUxpbms6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0XG59IDoge307XG5leHBvcnRzLmRlZmF1bHQgPSBDaGVja2JveDtcblxuLyoqKi8gfSksXG5cbi8qKiovIDE0Njpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cbnZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RXaXRob3V0UHJvcGVydGllczIpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7XG5cbnZhciBfaW5oZXJpdHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG52YXIgX3NpbXBsZUFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cbnZhciBfc2ltcGxlQXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NpbXBsZUFzc2lnbik7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cbnZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXG52YXIgX3JlYWN0RXZlbnRMaXN0ZW5lciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXG52YXIgX3JlYWN0RXZlbnRMaXN0ZW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdEV2ZW50TGlzdGVuZXIpO1xuXG52YXIgX2tleWNvZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblxudmFyIF9rZXljb2RlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2tleWNvZGUpO1xuXG52YXIgX3RyYW5zaXRpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cbnZhciBfdHJhbnNpdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHJhbnNpdGlvbnMpO1xuXG52YXIgX092ZXJsYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOCk7XG5cbnZhciBfT3ZlcmxheTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9PdmVybGF5KTtcblxudmFyIF9SZW5kZXJUb0xheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTkpO1xuXG52YXIgX1JlbmRlclRvTGF5ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUmVuZGVyVG9MYXllcik7XG5cbnZhciBfUGFwZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblxudmFyIF9QYXBlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9QYXBlcik7XG5cbnZhciBfVHJhbnNpdGlvbkdyb3VwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Nyk7XG5cbnZhciBfVHJhbnNpdGlvbkdyb3VwMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1RyYW5zaXRpb25Hcm91cCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBUcmFuc2l0aW9uSXRlbSA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKFRyYW5zaXRpb25JdGVtLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBUcmFuc2l0aW9uSXRlbSgpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBUcmFuc2l0aW9uSXRlbSk7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKF9yZWYgPSBUcmFuc2l0aW9uSXRlbS5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoVHJhbnNpdGlvbkl0ZW0pKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHN0eWxlOiB7fVxuICAgIH0sIF90ZW1wKSwgKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KShfdGhpcywgX3JldCk7XG4gIH1cblxuICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShUcmFuc2l0aW9uSXRlbSwgW3tcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsVW5tb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZW50ZXJUaW1lb3V0KTtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmxlYXZlVGltZW91dCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbEVudGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbEVudGVyKGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLmNvbXBvbmVudFdpbGxBcHBlYXIoY2FsbGJhY2spO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxBcHBlYXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsQXBwZWFyKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgc3BhY2luZyA9IHRoaXMuY29udGV4dC5tdWlUaGVtZS5iYXNlVGhlbWUuc3BhY2luZztcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoMCwgJyArIHNwYWNpbmcuZGVza3RvcEtleWxpbmVJbmNyZW1lbnQgKyAncHgpJ1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5lbnRlclRpbWVvdXQgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCA0NTApOyAvLyBtYXRjaGVzIHRyYW5zaXRpb24gZHVyYXRpb25cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsTGVhdmUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTGVhdmUoY2FsbGJhY2spIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBzdHlsZToge1xuICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlKDAsIDApJ1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5sZWF2ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCA0NTApOyAvLyBtYXRjaGVzIHRyYW5zaXRpb24gZHVyYXRpb25cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBzdHlsZSA9IF9wcm9wcy5zdHlsZSxcbiAgICAgICAgICBjaGlsZHJlbiA9IF9wcm9wcy5jaGlsZHJlbixcbiAgICAgICAgICBvdGhlciA9ICgwLCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzLmRlZmF1bHQpKF9wcm9wcywgWydzdHlsZScsICdjaGlsZHJlbiddKTtcbiAgICAgIHZhciBwcmVwYXJlU3R5bGVzID0gdGhpcy5jb250ZXh0Lm11aVRoZW1lLnByZXBhcmVTdHlsZXM7XG5cblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgKDAsIF9leHRlbmRzMy5kZWZhdWx0KSh7fSwgb3RoZXIsIHsgc3R5bGU6IHByZXBhcmVTdHlsZXMoKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCB0aGlzLnN0YXRlLnN0eWxlLCBzdHlsZSkpIH0pLFxuICAgICAgICBjaGlsZHJlblxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIFRyYW5zaXRpb25JdGVtO1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuVHJhbnNpdGlvbkl0ZW0uY29udGV4dFR5cGVzID0ge1xuICBtdWlUaGVtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QuaXNSZXF1aXJlZFxufTtcblRyYW5zaXRpb25JdGVtLnByb3BUeXBlcyA9ICBmYWxzZSA/IHtcbiAgY2hpbGRyZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0XG59IDoge307XG5cblxuZnVuY3Rpb24gZ2V0U3R5bGVzKHByb3BzLCBjb250ZXh0KSB7XG4gIHZhciBhdXRvU2Nyb2xsQm9keUNvbnRlbnQgPSBwcm9wcy5hdXRvU2Nyb2xsQm9keUNvbnRlbnQsXG4gICAgICBvcGVuID0gcHJvcHMub3BlbjtcbiAgdmFyIF9jb250ZXh0JG11aVRoZW1lID0gY29udGV4dC5tdWlUaGVtZSxcbiAgICAgIF9jb250ZXh0JG11aVRoZW1lJGJhcyA9IF9jb250ZXh0JG11aVRoZW1lLmJhc2VUaGVtZSxcbiAgICAgIHNwYWNpbmcgPSBfY29udGV4dCRtdWlUaGVtZSRiYXMuc3BhY2luZyxcbiAgICAgIHBhbGV0dGUgPSBfY29udGV4dCRtdWlUaGVtZSRiYXMucGFsZXR0ZSxcbiAgICAgIGRpYWxvZyA9IF9jb250ZXh0JG11aVRoZW1lLmRpYWxvZyxcbiAgICAgIHpJbmRleCA9IF9jb250ZXh0JG11aVRoZW1lLnpJbmRleDtcblxuXG4gIHZhciBndXR0ZXIgPSBzcGFjaW5nLmRlc2t0b3BHdXR0ZXI7XG4gIHZhciBib3JkZXJTY3JvbGwgPSAnMXB4IHNvbGlkICcgKyBwYWxldHRlLmJvcmRlckNvbG9yO1xuXG4gIHJldHVybiB7XG4gICAgcm9vdDoge1xuICAgICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgICBib3hTaXppbmc6ICdib3JkZXItYm94JyxcbiAgICAgIFdlYmtpdFRhcEhpZ2hsaWdodENvbG9yOiAncmdiYSgwLDAsMCwwKScsIC8vIFJlbW92ZSBtb2JpbGUgY29sb3IgZmxhc2hpbmcgKGRlcHJlY2F0ZWQpXG4gICAgICB6SW5kZXg6IHpJbmRleC5kaWFsb2csXG4gICAgICB0b3A6IDAsXG4gICAgICBsZWZ0OiBvcGVuID8gMCA6IC0xMDAwMCxcbiAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgIHRyYW5zaXRpb246IG9wZW4gPyBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnMG1zJywgJ2xlZnQnLCAnMG1zJykgOiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnMG1zJywgJ2xlZnQnLCAnNDUwbXMnKVxuICAgIH0sXG4gICAgY29udGVudDoge1xuICAgICAgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsXG4gICAgICBXZWJraXRUYXBIaWdobGlnaHRDb2xvcjogJ3JnYmEoMCwwLDAsMCknLCAvLyBSZW1vdmUgbW9iaWxlIGNvbG9yIGZsYXNoaW5nIChkZXByZWNhdGVkKVxuICAgICAgdHJhbnNpdGlvbjogX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoKSxcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgd2lkdGg6ICc3NSUnLFxuICAgICAgbWF4V2lkdGg6IHNwYWNpbmcuZGVza3RvcEtleWxpbmVJbmNyZW1lbnQgKiAxMixcbiAgICAgIG1hcmdpbjogJzAgYXV0bycsXG4gICAgICB6SW5kZXg6IHpJbmRleC5kaWFsb2dcbiAgICB9LFxuICAgIGFjdGlvbnNDb250YWluZXI6IHtcbiAgICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnLFxuICAgICAgV2Via2l0VGFwSGlnaGxpZ2h0Q29sb3I6ICdyZ2JhKDAsMCwwLDApJywgLy8gUmVtb3ZlIG1vYmlsZSBjb2xvciBmbGFzaGluZyAoZGVwcmVjYXRlZClcbiAgICAgIHBhZGRpbmc6IDgsXG4gICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgdGV4dEFsaWduOiAncmlnaHQnLFxuICAgICAgbWFyZ2luVG9wOiBhdXRvU2Nyb2xsQm9keUNvbnRlbnQgPyAtMSA6IDBcbiAgICB9LFxuICAgIG92ZXJsYXk6IHtcbiAgICAgIHpJbmRleDogekluZGV4LmRpYWxvZ092ZXJsYXlcbiAgICB9LFxuICAgIHRpdGxlOiB7XG4gICAgICBtYXJnaW46IDAsXG4gICAgICBwYWRkaW5nOiBndXR0ZXIgKyAncHggJyArIGd1dHRlciArICdweCAyMHB4ICcgKyBndXR0ZXIgKyAncHgnLFxuICAgICAgY29sb3I6IHBhbGV0dGUudGV4dENvbG9yLFxuICAgICAgZm9udFNpemU6IGRpYWxvZy50aXRsZUZvbnRTaXplLFxuICAgICAgbGluZUhlaWdodDogJzMycHgnLFxuICAgICAgZm9udFdlaWdodDogNDAwLFxuICAgICAgbWFyZ2luQm90dG9tOiBhdXRvU2Nyb2xsQm9keUNvbnRlbnQgPyAtMSA6IDBcbiAgICB9LFxuICAgIGJvZHk6IHtcbiAgICAgIGZvbnRTaXplOiBkaWFsb2cuYm9keUZvbnRTaXplLFxuICAgICAgY29sb3I6IGRpYWxvZy5ib2R5Q29sb3IsXG4gICAgICBwYWRkaW5nOiAocHJvcHMudGl0bGUgPyAwIDogZ3V0dGVyKSArICdweCAnICsgZ3V0dGVyICsgJ3B4ICcgKyBndXR0ZXIgKyAncHgnLFxuICAgICAgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsXG4gICAgICBvdmVyZmxvd1k6IGF1dG9TY3JvbGxCb2R5Q29udGVudCA/ICdhdXRvJyA6ICdoaWRkZW4nLFxuICAgICAgYm9yZGVyVG9wOiBhdXRvU2Nyb2xsQm9keUNvbnRlbnQgPyBib3JkZXJTY3JvbGwgOiAnbm9uZScsXG4gICAgICBib3JkZXJCb3R0b206IGF1dG9TY3JvbGxCb2R5Q29udGVudCA/IGJvcmRlclNjcm9sbCA6ICdub25lJ1xuICAgIH1cbiAgfTtcbn1cblxudmFyIERpYWxvZ0lubGluZSA9IGZ1bmN0aW9uIChfQ29tcG9uZW50Mikge1xuICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShEaWFsb2dJbmxpbmUsIF9Db21wb25lbnQyKTtcblxuICBmdW5jdGlvbiBEaWFsb2dJbmxpbmUoKSB7XG4gICAgdmFyIF9yZWYyO1xuXG4gICAgdmFyIF90ZW1wMiwgX3RoaXMyLCBfcmV0MjtcblxuICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERpYWxvZ0lubGluZSk7XG5cbiAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgYXJnc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0MiA9IChfdGVtcDIgPSAoX3RoaXMyID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoX3JlZjIgPSBEaWFsb2dJbmxpbmUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERpYWxvZ0lubGluZSkpLmNhbGwuYXBwbHkoX3JlZjIsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMyKSwgX3RoaXMyLmhhbmRsZVRvdWNoVGFwT3ZlcmxheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzMi5yZXF1ZXN0Q2xvc2UoZmFsc2UpO1xuICAgIH0sIF90aGlzMi5oYW5kbGVLZXlVcCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKCgwLCBfa2V5Y29kZTIuZGVmYXVsdCkoZXZlbnQpID09PSAnZXNjJykge1xuICAgICAgICBfdGhpczIucmVxdWVzdENsb3NlKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9LCBfdGhpczIuaGFuZGxlUmVzaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMyLnBvc2l0aW9uRGlhbG9nKCk7XG4gICAgfSwgX3RlbXAyKSwgKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KShfdGhpczIsIF9yZXQyKTtcbiAgfVxuXG4gICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKERpYWxvZ0lubGluZSwgW3tcbiAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdGhpcy5wb3NpdGlvbkRpYWxvZygpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudERpZFVwZGF0ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgIHRoaXMucG9zaXRpb25EaWFsb2coKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwb3NpdGlvbkRpYWxvZycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBvc2l0aW9uRGlhbG9nKCkge1xuICAgICAgdmFyIF9wcm9wczIgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGFjdGlvbnMgPSBfcHJvcHMyLmFjdGlvbnMsXG4gICAgICAgICAgYXV0b0RldGVjdFdpbmRvd0hlaWdodCA9IF9wcm9wczIuYXV0b0RldGVjdFdpbmRvd0hlaWdodCxcbiAgICAgICAgICBhdXRvU2Nyb2xsQm9keUNvbnRlbnQgPSBfcHJvcHMyLmF1dG9TY3JvbGxCb2R5Q29udGVudCxcbiAgICAgICAgICBib2R5U3R5bGUgPSBfcHJvcHMyLmJvZHlTdHlsZSxcbiAgICAgICAgICBvcGVuID0gX3Byb3BzMi5vcGVuLFxuICAgICAgICAgIHJlcG9zaXRpb25PblVwZGF0ZSA9IF9wcm9wczIucmVwb3NpdGlvbk9uVXBkYXRlLFxuICAgICAgICAgIHRpdGxlID0gX3Byb3BzMi50aXRsZTtcblxuXG4gICAgICBpZiAoIW9wZW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2xpZW50SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgfHwgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQ7XG4gICAgICB2YXIgY29udGFpbmVyID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMpO1xuICAgICAgdmFyIGRpYWxvZ1dpbmRvdyA9IF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzLnJlZnMuZGlhbG9nV2luZG93KTtcbiAgICAgIHZhciBkaWFsb2dDb250ZW50ID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMucmVmcy5kaWFsb2dDb250ZW50KTtcbiAgICAgIHZhciBtaW5QYWRkaW5nVG9wID0gMTY7XG5cbiAgICAgIC8vIFJlc2V0IHRoZSBoZWlnaHQgaW4gY2FzZSB0aGUgd2luZG93IHdhcyByZXNpemVkLlxuICAgICAgZGlhbG9nV2luZG93LnN0eWxlLmhlaWdodCA9ICcnO1xuICAgICAgZGlhbG9nQ29udGVudC5zdHlsZS5oZWlnaHQgPSAnJztcblxuICAgICAgdmFyIGRpYWxvZ1dpbmRvd0hlaWdodCA9IGRpYWxvZ1dpbmRvdy5vZmZzZXRIZWlnaHQ7XG4gICAgICB2YXIgcGFkZGluZ1RvcCA9IChjbGllbnRIZWlnaHQgLSBkaWFsb2dXaW5kb3dIZWlnaHQpIC8gMiAtIDY0O1xuICAgICAgaWYgKHBhZGRpbmdUb3AgPCBtaW5QYWRkaW5nVG9wKSBwYWRkaW5nVG9wID0gbWluUGFkZGluZ1RvcDtcblxuICAgICAgLy8gVmVydGljYWxseSBjZW50ZXIgdGhlIGRpYWxvZyB3aW5kb3csIGJ1dCBtYWtlIHN1cmUgaXQgZG9lc24ndFxuICAgICAgLy8gdHJhbnNpdGlvbiB0byB0aGF0IHBvc2l0aW9uLlxuICAgICAgaWYgKHJlcG9zaXRpb25PblVwZGF0ZSB8fCAhY29udGFpbmVyLnN0eWxlLnBhZGRpbmdUb3ApIHtcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnBhZGRpbmdUb3AgPSBwYWRkaW5nVG9wICsgJ3B4JztcbiAgICAgIH1cblxuICAgICAgLy8gRm9yY2UgYSBoZWlnaHQgaWYgdGhlIGRpYWxvZyBpcyB0YWxsZXIgdGhhbiBjbGllbnRIZWlnaHRcbiAgICAgIGlmIChhdXRvRGV0ZWN0V2luZG93SGVpZ2h0IHx8IGF1dG9TY3JvbGxCb2R5Q29udGVudCkge1xuICAgICAgICB2YXIgc3R5bGVzID0gZ2V0U3R5bGVzKHRoaXMucHJvcHMsIHRoaXMuY29udGV4dCk7XG4gICAgICAgIHN0eWxlcy5ib2R5ID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5ib2R5LCBib2R5U3R5bGUpO1xuICAgICAgICB2YXIgbWF4RGlhbG9nQ29udGVudEhlaWdodCA9IGNsaWVudEhlaWdodCAtIDIgKiA2NDtcblxuICAgICAgICBpZiAodGl0bGUpIG1heERpYWxvZ0NvbnRlbnRIZWlnaHQgLT0gZGlhbG9nQ29udGVudC5wcmV2aW91c1NpYmxpbmcub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgIGlmIChfcmVhY3QyLmRlZmF1bHQuQ2hpbGRyZW4uY291bnQoYWN0aW9ucykpIHtcbiAgICAgICAgICBtYXhEaWFsb2dDb250ZW50SGVpZ2h0IC09IGRpYWxvZ0NvbnRlbnQubmV4dFNpYmxpbmcub2Zmc2V0SGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgZGlhbG9nQ29udGVudC5zdHlsZS5tYXhIZWlnaHQgPSBtYXhEaWFsb2dDb250ZW50SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgaWYgKG1heERpYWxvZ0NvbnRlbnRIZWlnaHQgPiBkaWFsb2dXaW5kb3dIZWlnaHQpIHtcbiAgICAgICAgICBkaWFsb2dDb250ZW50LnN0eWxlLmJvcmRlckJvdHRvbSA9ICdub25lJztcbiAgICAgICAgICBkaWFsb2dDb250ZW50LnN0eWxlLmJvcmRlclRvcCA9ICdub25lJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlcXVlc3RDbG9zZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlcXVlc3RDbG9zZShidXR0b25DbGlja2VkKSB7XG4gICAgICBpZiAoIWJ1dHRvbkNsaWNrZWQgJiYgdGhpcy5wcm9wcy5tb2RhbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLm9uUmVxdWVzdENsb3NlKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25SZXF1ZXN0Q2xvc2UoISFidXR0b25DbGlja2VkKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3Byb3BzMyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgYWN0aW9ucyA9IF9wcm9wczMuYWN0aW9ucyxcbiAgICAgICAgICBhY3Rpb25zQ29udGFpbmVyQ2xhc3NOYW1lID0gX3Byb3BzMy5hY3Rpb25zQ29udGFpbmVyQ2xhc3NOYW1lLFxuICAgICAgICAgIGFjdGlvbnNDb250YWluZXJTdHlsZSA9IF9wcm9wczMuYWN0aW9uc0NvbnRhaW5lclN0eWxlLFxuICAgICAgICAgIGJvZHlDbGFzc05hbWUgPSBfcHJvcHMzLmJvZHlDbGFzc05hbWUsXG4gICAgICAgICAgYm9keVN0eWxlID0gX3Byb3BzMy5ib2R5U3R5bGUsXG4gICAgICAgICAgY2hpbGRyZW4gPSBfcHJvcHMzLmNoaWxkcmVuLFxuICAgICAgICAgIGNsYXNzTmFtZSA9IF9wcm9wczMuY2xhc3NOYW1lLFxuICAgICAgICAgIGNvbnRlbnRDbGFzc05hbWUgPSBfcHJvcHMzLmNvbnRlbnRDbGFzc05hbWUsXG4gICAgICAgICAgY29udGVudFN0eWxlID0gX3Byb3BzMy5jb250ZW50U3R5bGUsXG4gICAgICAgICAgb3ZlcmxheUNsYXNzTmFtZSA9IF9wcm9wczMub3ZlcmxheUNsYXNzTmFtZSxcbiAgICAgICAgICBvdmVybGF5U3R5bGUgPSBfcHJvcHMzLm92ZXJsYXlTdHlsZSxcbiAgICAgICAgICBvcGVuID0gX3Byb3BzMy5vcGVuLFxuICAgICAgICAgIHBhcGVyQ2xhc3NOYW1lID0gX3Byb3BzMy5wYXBlckNsYXNzTmFtZSxcbiAgICAgICAgICBwYXBlclByb3BzID0gX3Byb3BzMy5wYXBlclByb3BzLFxuICAgICAgICAgIHN0eWxlID0gX3Byb3BzMy5zdHlsZSxcbiAgICAgICAgICB0aXRsZUNsYXNzTmFtZSA9IF9wcm9wczMudGl0bGVDbGFzc05hbWUsXG4gICAgICAgICAgdGl0bGVTdHlsZSA9IF9wcm9wczMudGl0bGVTdHlsZSxcbiAgICAgICAgICB0aXRsZSA9IF9wcm9wczMudGl0bGU7XG4gICAgICB2YXIgcHJlcGFyZVN0eWxlcyA9IHRoaXMuY29udGV4dC5tdWlUaGVtZS5wcmVwYXJlU3R5bGVzO1xuXG4gICAgICB2YXIgc3R5bGVzID0gZ2V0U3R5bGVzKHRoaXMucHJvcHMsIHRoaXMuY29udGV4dCk7XG5cbiAgICAgIHN0eWxlcy5yb290ID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5yb290LCBzdHlsZSk7XG4gICAgICBzdHlsZXMuY29udGVudCA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMuY29udGVudCwgY29udGVudFN0eWxlKTtcbiAgICAgIHN0eWxlcy5ib2R5ID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5ib2R5LCBib2R5U3R5bGUpO1xuICAgICAgc3R5bGVzLmFjdGlvbnNDb250YWluZXIgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLmFjdGlvbnNDb250YWluZXIsIGFjdGlvbnNDb250YWluZXJTdHlsZSk7XG4gICAgICBzdHlsZXMub3ZlcmxheSA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMub3ZlcmxheSwgb3ZlcmxheVN0eWxlKTtcbiAgICAgIHN0eWxlcy50aXRsZSA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMudGl0bGUsIHRpdGxlU3R5bGUpO1xuXG4gICAgICB2YXIgYWN0aW9uc0NvbnRhaW5lciA9IF9yZWFjdDIuZGVmYXVsdC5DaGlsZHJlbi5jb3VudChhY3Rpb25zKSA+IDAgJiYgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IGNsYXNzTmFtZTogYWN0aW9uc0NvbnRhaW5lckNsYXNzTmFtZSwgc3R5bGU6IHByZXBhcmVTdHlsZXMoc3R5bGVzLmFjdGlvbnNDb250YWluZXIpIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5DaGlsZHJlbi50b0FycmF5KGFjdGlvbnMpXG4gICAgICApO1xuXG4gICAgICB2YXIgdGl0bGVFbGVtZW50ID0gdGl0bGU7XG4gICAgICBpZiAoX3JlYWN0Mi5kZWZhdWx0LmlzVmFsaWRFbGVtZW50KHRpdGxlKSkge1xuICAgICAgICB0aXRsZUVsZW1lbnQgPSBfcmVhY3QyLmRlZmF1bHQuY2xvbmVFbGVtZW50KHRpdGxlLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiB0aXRsZS5wcm9wcy5jbGFzc05hbWUgfHwgdGl0bGVDbGFzc05hbWUsXG4gICAgICAgICAgc3R5bGU6IHByZXBhcmVTdHlsZXMoKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy50aXRsZSwgdGl0bGUucHJvcHMuc3R5bGUpKVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRpdGxlID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aXRsZUVsZW1lbnQgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnaDMnLFxuICAgICAgICAgIHsgY2xhc3NOYW1lOiB0aXRsZUNsYXNzTmFtZSwgc3R5bGU6IHByZXBhcmVTdHlsZXMoc3R5bGVzLnRpdGxlKSB9LFxuICAgICAgICAgIHRpdGxlXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgY2xhc3NOYW1lOiBjbGFzc05hbWUsIHN0eWxlOiBwcmVwYXJlU3R5bGVzKHN0eWxlcy5yb290KSB9LFxuICAgICAgICBvcGVuICYmIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdEV2ZW50TGlzdGVuZXIyLmRlZmF1bHQsIHtcbiAgICAgICAgICB0YXJnZXQ6ICd3aW5kb3cnLFxuICAgICAgICAgIG9uS2V5VXA6IHRoaXMuaGFuZGxlS2V5VXAsXG4gICAgICAgICAgb25SZXNpemU6IHRoaXMuaGFuZGxlUmVzaXplXG4gICAgICAgIH0pLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICBfVHJhbnNpdGlvbkdyb3VwMi5kZWZhdWx0LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbXBvbmVudDogJ2RpdicsXG4gICAgICAgICAgICByZWY6ICdkaWFsb2dXaW5kb3cnLFxuICAgICAgICAgICAgdHJhbnNpdGlvbkFwcGVhcjogdHJ1ZSxcbiAgICAgICAgICAgIHRyYW5zaXRpb25BcHBlYXJUaW1lb3V0OiA0NTAsXG4gICAgICAgICAgICB0cmFuc2l0aW9uRW50ZXI6IHRydWUsXG4gICAgICAgICAgICB0cmFuc2l0aW9uRW50ZXJUaW1lb3V0OiA0NTBcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9wZW4gJiYgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBUcmFuc2l0aW9uSXRlbSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjb250ZW50Q2xhc3NOYW1lLFxuICAgICAgICAgICAgICBzdHlsZTogc3R5bGVzLmNvbnRlbnRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgX1BhcGVyMi5kZWZhdWx0LFxuICAgICAgICAgICAgICAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHsgY2xhc3NOYW1lOiBwYXBlckNsYXNzTmFtZSwgekRlcHRoOiA0IH0sIHBhcGVyUHJvcHMpLFxuICAgICAgICAgICAgICB0aXRsZUVsZW1lbnQsXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHJlZjogJ2RpYWxvZ0NvbnRlbnQnLFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBib2R5Q2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICAgc3R5bGU6IHByZXBhcmVTdHlsZXMoc3R5bGVzLmJvZHkpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlblxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBhY3Rpb25zQ29udGFpbmVyXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfT3ZlcmxheTIuZGVmYXVsdCwge1xuICAgICAgICAgIHNob3c6IG9wZW4sXG4gICAgICAgICAgY2xhc3NOYW1lOiBvdmVybGF5Q2xhc3NOYW1lLFxuICAgICAgICAgIHN0eWxlOiBzdHlsZXMub3ZlcmxheSxcbiAgICAgICAgICBvblRvdWNoVGFwOiB0aGlzLmhhbmRsZVRvdWNoVGFwT3ZlcmxheVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIERpYWxvZ0lubGluZTtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbkRpYWxvZ0lubGluZS5jb250ZXh0VHlwZXMgPSB7XG4gIG11aVRoZW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkXG59O1xuRGlhbG9nSW5saW5lLnByb3BUeXBlcyA9ICBmYWxzZSA/IHtcbiAgYWN0aW9uczogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICBhY3Rpb25zQ29udGFpbmVyQ2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgYWN0aW9uc0NvbnRhaW5lclN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgYXV0b0RldGVjdFdpbmRvd0hlaWdodDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBhdXRvU2Nyb2xsQm9keUNvbnRlbnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgYm9keUNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGJvZHlTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGNoaWxkcmVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIGNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGNvbnRlbnRDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBjb250ZW50U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBtb2RhbDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBvblJlcXVlc3RDbG9zZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBvcGVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wuaXNSZXF1aXJlZCxcbiAgb3ZlcmxheUNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIG92ZXJsYXlTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIHBhcGVyQ2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgcGFwZXJQcm9wczogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIHJlcG9zaXRpb25PblVwZGF0ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIHRpdGxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIHRpdGxlQ2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgdGl0bGVTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3Rcbn0gOiB7fTtcblxudmFyIERpYWxvZyA9IGZ1bmN0aW9uIChfQ29tcG9uZW50Mykge1xuICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShEaWFsb2csIF9Db21wb25lbnQzKTtcblxuICBmdW5jdGlvbiBEaWFsb2coKSB7XG4gICAgdmFyIF9yZWYzO1xuXG4gICAgdmFyIF90ZW1wMywgX3RoaXMzLCBfcmV0MztcblxuICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERpYWxvZyk7XG5cbiAgICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMyksIF9rZXkzID0gMDsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykge1xuICAgICAgYXJnc1tfa2V5M10gPSBhcmd1bWVudHNbX2tleTNdO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0MyA9IChfdGVtcDMgPSAoX3RoaXMzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoX3JlZjMgPSBEaWFsb2cuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERpYWxvZykpLmNhbGwuYXBwbHkoX3JlZjMsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMzKSwgX3RoaXMzLnJlbmRlckxheWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KERpYWxvZ0lubGluZSwgX3RoaXMzLnByb3BzKTtcbiAgICB9LCBfdGVtcDMpLCAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKF90aGlzMywgX3JldDMpO1xuICB9XG5cbiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRGlhbG9nLCBbe1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfUmVuZGVyVG9MYXllcjIuZGVmYXVsdCwgeyByZW5kZXI6IHRoaXMucmVuZGVyTGF5ZXIsIG9wZW46IHRydWUsIHVzZUxheWVyRm9yQ2xpY2tBd2F5OiBmYWxzZSB9KTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIERpYWxvZztcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbkRpYWxvZy5jb250ZXh0VHlwZXMgPSB7XG4gIG11aVRoZW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkXG59O1xuRGlhbG9nLmRlZmF1bHRQcm9wcyA9IHtcbiAgYXV0b0RldGVjdFdpbmRvd0hlaWdodDogdHJ1ZSxcbiAgYXV0b1Njcm9sbEJvZHlDb250ZW50OiBmYWxzZSxcbiAgbW9kYWw6IGZhbHNlLFxuICByZXBvc2l0aW9uT25VcGRhdGU6IHRydWVcbn07XG5EaWFsb2cucHJvcFR5cGVzID0gIGZhbHNlID8ge1xuICAvKipcbiAgICogQWN0aW9uIGJ1dHRvbnMgdG8gZGlzcGxheSBiZWxvdyB0aGUgRGlhbG9nIGNvbnRlbnQgKGBjaGlsZHJlbmApLlxuICAgKiBUaGlzIHByb3BlcnR5IGFjY2VwdHMgZWl0aGVyIGEgUmVhY3QgZWxlbWVudCwgb3IgYW4gYXJyYXkgb2YgUmVhY3QgZWxlbWVudHMuXG4gICAqL1xuICBhY3Rpb25zOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIC8qKlxuICAgKiBUaGUgYGNsYXNzTmFtZWAgdG8gYWRkIHRvIHRoZSBhY3Rpb25zIGNvbnRhaW5lcidzIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIGFjdGlvbnNDb250YWluZXJDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogT3ZlcnJpZGVzIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBhY3Rpb25zIGNvbnRhaW5lcidzIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIGFjdGlvbnNDb250YWluZXJTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBJZiBzZXQgdG8gdHJ1ZSwgdGhlIGhlaWdodCBvZiB0aGUgYERpYWxvZ2Agd2lsbCBiZSBhdXRvIGRldGVjdGVkLiBBIG1heCBoZWlnaHRcbiAgICogd2lsbCBiZSBlbmZvcmNlZCBzbyB0aGF0IHRoZSBjb250ZW50IGRvZXMgbm90IGV4dGVuZCBiZXlvbmQgdGhlIHZpZXdwb3J0LlxuICAgKi9cbiAgYXV0b0RldGVjdFdpbmRvd0hlaWdodDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogSWYgc2V0IHRvIHRydWUsIHRoZSBib2R5IGNvbnRlbnQgb2YgdGhlIGBEaWFsb2dgIHdpbGwgYmUgc2Nyb2xsYWJsZS5cbiAgICovXG4gIGF1dG9TY3JvbGxCb2R5Q29udGVudDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogVGhlIGBjbGFzc05hbWVgIHRvIGFkZCB0byB0aGUgY29udGVudCdzIHJvb3QgZWxlbWVudCB1bmRlciB0aGUgdGl0bGUuXG4gICAqL1xuICBib2R5Q2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIE92ZXJyaWRlcyB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgY29udGVudCdzIHJvb3QgZWxlbWVudCB1bmRlciB0aGUgdGl0bGUuXG4gICAqL1xuICBib2R5U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhlIGNvbnRlbnRzIG9mIHRoZSBgRGlhbG9nYC5cbiAgICovXG4gIGNoaWxkcmVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBjbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogVGhlIGBjbGFzc05hbWVgIHRvIGFkZCB0byB0aGUgY29udGVudCBjb250YWluZXIuXG4gICAqL1xuICBjb250ZW50Q2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIE92ZXJyaWRlcyB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgY29udGVudCBjb250YWluZXIuXG4gICAqL1xuICBjb250ZW50U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogRm9yY2UgdGhlIHVzZXIgdG8gdXNlIG9uZSBvZiB0aGUgYWN0aW9ucyBpbiB0aGUgYERpYWxvZ2AuXG4gICAqIENsaWNraW5nIG91dHNpZGUgdGhlIGBEaWFsb2dgIHdpbGwgbm90IHRyaWdnZXIgdGhlIGBvblJlcXVlc3RDbG9zZWAuXG4gICAqL1xuICBtb2RhbDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogRmlyZWQgd2hlbiB0aGUgYERpYWxvZ2AgaXMgcmVxdWVzdGVkIHRvIGJlIGNsb3NlZCBieSBhIGNsaWNrIG91dHNpZGUgdGhlIGBEaWFsb2dgIG9yIG9uIHRoZSBidXR0b25zLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2x9IGJ1dHRvbkNsaWNrZWQgRGV0ZXJtaW5lcyB3aGV0aGVyIGEgYnV0dG9uIGNsaWNrIHRyaWdnZXJlZCB0aGlzIHJlcXVlc3QuXG4gICAqL1xuICBvblJlcXVlc3RDbG9zZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogQ29udHJvbHMgd2hldGhlciB0aGUgRGlhbG9nIGlzIG9wZW5lZCBvciBub3QuXG4gICAqL1xuICBvcGVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wuaXNSZXF1aXJlZCxcbiAgLyoqXG4gICAqIFRoZSBgY2xhc3NOYW1lYCB0byBhZGQgdG8gdGhlIGBPdmVybGF5YCBjb21wb25lbnQgdGhhdCBpcyByZW5kZXJlZCBiZWhpbmQgdGhlIGBEaWFsb2dgLlxuICAgKi9cbiAgb3ZlcmxheUNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIGBPdmVybGF5YCBjb21wb25lbnQgdGhhdCBpcyByZW5kZXJlZCBiZWhpbmQgdGhlIGBEaWFsb2dgLlxuICAgKi9cbiAgb3ZlcmxheVN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIFRoZSBDU1MgY2xhc3MgbmFtZSBvZiB0aGUgYFBhcGVyYCBlbGVtZW50LlxuICAgKi9cbiAgcGFwZXJDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogUHJvcGVydGllcyBhcHBsaWVkIHRvIHRoZSBgUGFwZXJgIGVsZW1lbnQuXG4gICAqL1xuICBwYXBlclByb3BzOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hldGhlciB0aGUgYERpYWxvZ2Agc2hvdWxkIGJlIHJlcG9zaXRpb25lZCB3aGVuIGl0J3MgY29udGVudHMgYXJlIHVwZGF0ZWQuXG4gICAqL1xuICByZXBvc2l0aW9uT25VcGRhdGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBUaGUgdGl0bGUgdG8gZGlzcGxheSBvbiB0aGUgYERpYWxvZ2AuIENvdWxkIGJlIG51bWJlciwgc3RyaW5nLCBlbGVtZW50IG9yIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlc2UgdHlwZXMuXG4gICAqL1xuICB0aXRsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICAvKipcbiAgICogVGhlIGBjbGFzc05hbWVgIHRvIGFkZCB0byB0aGUgdGl0bGUncyByb290IGNvbnRhaW5lciBlbGVtZW50LlxuICAgKi9cbiAgdGl0bGVDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogT3ZlcnJpZGVzIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSB0aXRsZSdzIHJvb3QgY29udGFpbmVyIGVsZW1lbnQuXG4gICAqL1xuICB0aXRsZVN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdFxufSA6IHt9O1xuZXhwb3J0cy5kZWZhdWx0ID0gRGlhbG9nO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMTQ3OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2dldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7XG5cbnZhciBfaW5oZXJpdHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG52YXIgX3NpbXBsZUFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cbnZhciBfc2ltcGxlQXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NpbXBsZUFzc2lnbik7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cbnZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXG52YXIgX3JlYWN0RXZlbnRMaXN0ZW5lciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXG52YXIgX3JlYWN0RXZlbnRMaXN0ZW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdEV2ZW50TGlzdGVuZXIpO1xuXG52YXIgX2tleWNvZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblxudmFyIF9rZXljb2RlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2tleWNvZGUpO1xuXG52YXIgX2F1dG9QcmVmaXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY4KTtcblxudmFyIF9hdXRvUHJlZml4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F1dG9QcmVmaXgpO1xuXG52YXIgX3RyYW5zaXRpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cbnZhciBfdHJhbnNpdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHJhbnNpdGlvbnMpO1xuXG52YXIgX092ZXJsYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOCk7XG5cbnZhciBfT3ZlcmxheTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9PdmVybGF5KTtcblxudmFyIF9QYXBlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXG52YXIgX1BhcGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BhcGVyKTtcblxudmFyIF9wcm9wVHlwZXMzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cbnZhciBfcHJvcFR5cGVzNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlczMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgb3Blbk5hdkV2ZW50SGFuZGxlciA9IG51bGw7XG5cbnZhciBEcmF3ZXIgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShEcmF3ZXIsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIERyYXdlcigpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBEcmF3ZXIpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChfcmVmID0gRHJhd2VyLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEcmF3ZXIpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5oYW5kbGVUb3VjaFRhcE92ZXJsYXkgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBfdGhpcy5jbG9zZSgnY2xpY2thd2F5Jyk7XG4gICAgfSwgX3RoaXMuaGFuZGxlS2V5VXAgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmIChfdGhpcy5zdGF0ZS5vcGVuICYmICFfdGhpcy5wcm9wcy5kb2NrZWQgJiYgKDAsIF9rZXljb2RlMi5kZWZhdWx0KShldmVudCkgPT09ICdlc2MnKSB7XG4gICAgICAgIF90aGlzLmNsb3NlKCdlc2NhcGUnKTtcbiAgICAgIH1cbiAgICB9LCBfdGhpcy5vbkJvZHlUb3VjaFN0YXJ0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB2YXIgc3dpcGVBcmVhV2lkdGggPSBfdGhpcy5wcm9wcy5zd2lwZUFyZWFXaWR0aDtcblxuICAgICAgdmFyIHRvdWNoU3RhcnRYID0gX3RoaXMuY29udGV4dC5tdWlUaGVtZS5pc1J0bCA/IGRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGggLSBldmVudC50b3VjaGVzWzBdLnBhZ2VYIDogZXZlbnQudG91Y2hlc1swXS5wYWdlWDtcbiAgICAgIHZhciB0b3VjaFN0YXJ0WSA9IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVk7XG5cbiAgICAgIC8vIE9wZW4gb25seSBpZiBzd2lwaW5nIGZyb20gZmFyIGxlZnQgKG9yIHJpZ2h0KSB3aGlsZSBjbG9zZWRcbiAgICAgIGlmIChzd2lwZUFyZWFXaWR0aCAhPT0gbnVsbCAmJiAhX3RoaXMuc3RhdGUub3Blbikge1xuICAgICAgICBpZiAoX3RoaXMucHJvcHMub3BlblNlY29uZGFyeSkge1xuICAgICAgICAgIC8vIElmIG9wZW5TZWNvbmRhcnkgaXMgdHJ1ZSBjYWxjdWxhdGUgZnJvbSB0aGUgZmFyIHJpZ2h0XG4gICAgICAgICAgaWYgKHRvdWNoU3RhcnRYIDwgZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aCAtIHN3aXBlQXJlYVdpZHRoKSByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgb3BlblNlY29uZGFyeSBpcyBmYWxzZSBjYWxjdWxhdGUgZnJvbSB0aGUgZmFyIGxlZnRcbiAgICAgICAgICBpZiAodG91Y2hTdGFydFggPiBzd2lwZUFyZWFXaWR0aCkgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghX3RoaXMuc3RhdGUub3BlbiAmJiAob3Blbk5hdkV2ZW50SGFuZGxlciAhPT0gX3RoaXMub25Cb2R5VG91Y2hTdGFydCB8fCBfdGhpcy5wcm9wcy5kaXNhYmxlU3dpcGVUb09wZW4pKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgX3RoaXMubWF5YmVTd2lwaW5nID0gdHJ1ZTtcbiAgICAgIF90aGlzLnRvdWNoU3RhcnRYID0gdG91Y2hTdGFydFg7XG4gICAgICBfdGhpcy50b3VjaFN0YXJ0WSA9IHRvdWNoU3RhcnRZO1xuXG4gICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIF90aGlzLm9uQm9keVRvdWNoTW92ZSk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgX3RoaXMub25Cb2R5VG91Y2hFbmQpO1xuICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIF90aGlzLm9uQm9keVRvdWNoRW5kKTtcbiAgICB9LCBfdGhpcy5vbkJvZHlUb3VjaE1vdmUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciBjdXJyZW50WCA9IF90aGlzLmNvbnRleHQubXVpVGhlbWUuaXNSdGwgPyBkb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoIC0gZXZlbnQudG91Y2hlc1swXS5wYWdlWCA6IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVg7XG4gICAgICB2YXIgY3VycmVudFkgPSBldmVudC50b3VjaGVzWzBdLnBhZ2VZO1xuXG4gICAgICBpZiAoX3RoaXMuc3RhdGUuc3dpcGluZykge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBfdGhpcy5zZXRQb3NpdGlvbihfdGhpcy5nZXRUcmFuc2xhdGVYKGN1cnJlbnRYKSk7XG4gICAgICB9IGVsc2UgaWYgKF90aGlzLm1heWJlU3dpcGluZykge1xuICAgICAgICB2YXIgZFhBYnMgPSBNYXRoLmFicyhjdXJyZW50WCAtIF90aGlzLnRvdWNoU3RhcnRYKTtcbiAgICAgICAgdmFyIGRZQWJzID0gTWF0aC5hYnMoY3VycmVudFkgLSBfdGhpcy50b3VjaFN0YXJ0WSk7XG4gICAgICAgIC8vIElmIHRoZSB1c2VyIGhhcyBtb3ZlZCBoaXMgdGh1bWIgdGVuIHBpeGVscyBpbiBlaXRoZXIgZGlyZWN0aW9uLFxuICAgICAgICAvLyB3ZSBjYW4gc2FmZWx5IG1ha2UgYW4gYXNzdW1wdGlvbiBhYm91dCB3aGV0aGVyIGhlIHdhcyBpbnRlbmRpbmdcbiAgICAgICAgLy8gdG8gc3dpcGUgb3Igc2Nyb2xsLlxuICAgICAgICB2YXIgdGhyZXNob2xkID0gMTA7XG5cbiAgICAgICAgaWYgKGRYQWJzID4gdGhyZXNob2xkICYmIGRZQWJzIDw9IHRocmVzaG9sZCkge1xuICAgICAgICAgIF90aGlzLnN3aXBlU3RhcnRYID0gY3VycmVudFg7XG4gICAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc3dpcGluZzogX3RoaXMuc3RhdGUub3BlbiA/ICdjbG9zaW5nJyA6ICdvcGVuaW5nJ1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIF90aGlzLnNldFBvc2l0aW9uKF90aGlzLmdldFRyYW5zbGF0ZVgoY3VycmVudFgpKTtcbiAgICAgICAgfSBlbHNlIGlmIChkWEFicyA8PSB0aHJlc2hvbGQgJiYgZFlBYnMgPiB0aHJlc2hvbGQpIHtcbiAgICAgICAgICBfdGhpcy5vbkJvZHlUb3VjaEVuZCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgX3RoaXMub25Cb2R5VG91Y2hFbmQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmIChfdGhpcy5zdGF0ZS5zd2lwaW5nKSB7XG4gICAgICAgIHZhciBjdXJyZW50WCA9IF90aGlzLmNvbnRleHQubXVpVGhlbWUuaXNSdGwgPyBkb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoIC0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVggOiBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWDtcbiAgICAgICAgdmFyIHRyYW5zbGF0ZVJhdGlvID0gX3RoaXMuZ2V0VHJhbnNsYXRlWChjdXJyZW50WCkgLyBfdGhpcy5nZXRNYXhUcmFuc2xhdGVYKCk7XG5cbiAgICAgICAgX3RoaXMubWF5YmVTd2lwaW5nID0gZmFsc2U7XG4gICAgICAgIHZhciBzd2lwaW5nID0gX3RoaXMuc3RhdGUuc3dpcGluZztcbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIHN3aXBpbmc6IG51bGxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gV2UgaGF2ZSB0byBvcGVuIG9yIGNsb3NlIGFmdGVyIHNldHRpbmcgc3dpcGluZyB0byBudWxsLFxuICAgICAgICAvLyBiZWNhdXNlIG9ubHkgdGhlbiBDU1MgdHJhbnNpdGlvbiBpcyBlbmFibGVkLlxuICAgICAgICBpZiAodHJhbnNsYXRlUmF0aW8gPiAwLjUpIHtcbiAgICAgICAgICBpZiAoc3dpcGluZyA9PT0gJ29wZW5pbmcnKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRQb3NpdGlvbihfdGhpcy5nZXRNYXhUcmFuc2xhdGVYKCkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5jbG9zZSgnc3dpcGUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHN3aXBpbmcgPT09ICdvcGVuaW5nJykge1xuICAgICAgICAgICAgX3RoaXMub3Blbignc3dpcGUnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMuc2V0UG9zaXRpb24oMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfdGhpcy5tYXliZVN3aXBpbmcgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMucmVtb3ZlQm9keVRvdWNoTGlzdGVuZXJzKCk7XG4gICAgfSwgX3RlbXApLCAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKERyYXdlciwgW3tcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICB0aGlzLm1heWJlU3dpcGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy50b3VjaFN0YXJ0WCA9IG51bGw7XG4gICAgICB0aGlzLnRvdWNoU3RhcnRZID0gbnVsbDtcbiAgICAgIHRoaXMuc3dpcGVTdGFydFggPSBudWxsO1xuXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgb3BlbjogdGhpcy5wcm9wcy5vcGVuICE9PSBudWxsID8gdGhpcy5wcm9wcy5vcGVuIDogdGhpcy5wcm9wcy5kb2NrZWQsXG4gICAgICAgIHN3aXBpbmc6IG51bGxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICB0aGlzLmVuYWJsZVN3aXBlSGFuZGxpbmcoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICAgIC8vIElmIGNvbnRyb2xsZWQgdGhlbiB0aGUgb3BlbiBwcm9wIHRha2VzIHByZWNlZGVuY2UuXG4gICAgICBpZiAobmV4dFByb3BzLm9wZW4gIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgb3BlbjogbmV4dFByb3BzLm9wZW5cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgaWYgZG9ja2VkIGlzIGNoYW5nZWQsIGNoYW5nZSB0aGUgb3BlbiBzdGF0ZSBmb3Igd2hlbiB1bmNvbnRyb2xsZWQuXG4gICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuZG9ja2VkICE9PSBuZXh0UHJvcHMuZG9ja2VkKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIG9wZW46IG5leHRQcm9wcy5kb2NrZWRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50RGlkVXBkYXRlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgdGhpcy5lbmFibGVTd2lwZUhhbmRsaW5nKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbFVubW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIHRoaXMuZGlzYWJsZVN3aXBlSGFuZGxpbmcoKTtcbiAgICAgIHRoaXMucmVtb3ZlQm9keVRvdWNoTGlzdGVuZXJzKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZ2V0U3R5bGVzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U3R5bGVzKCkge1xuICAgICAgdmFyIG11aVRoZW1lID0gdGhpcy5jb250ZXh0Lm11aVRoZW1lO1xuICAgICAgdmFyIHRoZW1lID0gbXVpVGhlbWUuZHJhd2VyO1xuXG4gICAgICB2YXIgeCA9IHRoaXMuZ2V0VHJhbnNsYXRlTXVsdGlwbGllcigpICogKHRoaXMuc3RhdGUub3BlbiA/IDAgOiB0aGlzLmdldE1heFRyYW5zbGF0ZVgoKSk7XG5cbiAgICAgIHZhciBzdHlsZXMgPSB7XG4gICAgICAgIHJvb3Q6IHtcbiAgICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgICB3aWR0aDogdGhpcy5nZXRUcmFuc2xhdGVkV2lkdGgoKSB8fCB0aGVtZS53aWR0aCxcbiAgICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAgICAgICB6SW5kZXg6IG11aVRoZW1lLnpJbmRleC5kcmF3ZXIsXG4gICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlKCcgKyB4ICsgJ3B4LCAwKScsXG4gICAgICAgICAgdHJhbnNpdGlvbjogIXRoaXMuc3RhdGUuc3dpcGluZyAmJiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dChudWxsLCAndHJhbnNmb3JtJywgbnVsbCksXG4gICAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGVtZS5jb2xvcixcbiAgICAgICAgICBvdmVyZmxvdzogJ2F1dG8nLFxuICAgICAgICAgIFdlYmtpdE92ZXJmbG93U2Nyb2xsaW5nOiAndG91Y2gnIC8vIGlPUyBtb21lbnR1bSBzY3JvbGxpbmdcbiAgICAgICAgfSxcbiAgICAgICAgb3ZlcmxheToge1xuICAgICAgICAgIHpJbmRleDogbXVpVGhlbWUuekluZGV4LmRyYXdlck92ZXJsYXksXG4gICAgICAgICAgcG9pbnRlckV2ZW50czogdGhpcy5zdGF0ZS5vcGVuID8gJ2F1dG8nIDogJ25vbmUnIC8vIEJ5cGFzcyBtb3VzZSBldmVudHMgd2hlbiBsZWZ0IG5hdiBpcyBjbG9zaW5nLlxuICAgICAgICB9LFxuICAgICAgICByb290V2hlbk9wZW5SaWdodDoge1xuICAgICAgICAgIGxlZnQ6ICdhdXRvJyxcbiAgICAgICAgICByaWdodDogMFxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gc3R5bGVzO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3Nob3VsZFNob3cnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzaG91bGRTaG93KCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RhdGUub3BlbiB8fCAhIXRoaXMuc3RhdGUuc3dpcGluZzsgLy8gY29tcG9uZW50IGlzIHN3aXBpbmdcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjbG9zZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlKHJlYXNvbikge1xuICAgICAgaWYgKHRoaXMucHJvcHMub3BlbiA9PT0gbnVsbCkgdGhpcy5zZXRTdGF0ZSh7IG9wZW46IGZhbHNlIH0pO1xuICAgICAgaWYgKHRoaXMucHJvcHMub25SZXF1ZXN0Q2hhbmdlKSB0aGlzLnByb3BzLm9uUmVxdWVzdENoYW5nZShmYWxzZSwgcmVhc29uKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29wZW4nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuKHJlYXNvbikge1xuICAgICAgaWYgKHRoaXMucHJvcHMub3BlbiA9PT0gbnVsbCkgdGhpcy5zZXRTdGF0ZSh7IG9wZW46IHRydWUgfSk7XG4gICAgICBpZiAodGhpcy5wcm9wcy5vblJlcXVlc3RDaGFuZ2UpIHRoaXMucHJvcHMub25SZXF1ZXN0Q2hhbmdlKHRydWUsIHJlYXNvbik7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdnZXRUcmFuc2xhdGVkV2lkdGgnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUcmFuc2xhdGVkV2lkdGgoKSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMucHJvcHMud2lkdGggPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICghL15cXGQrKFxcLlxcZCspPyUkLy50ZXN0KHRoaXMucHJvcHMud2lkdGgpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgYSB2YWxpZCBwZXJjZW50YWdlIGZvcm1hdC4nKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgd2lkdGggPSBwYXJzZUZsb2F0KHRoaXMucHJvcHMud2lkdGgpIC8gMTAwLjA7XG4gICAgICAgIC8vIFdlIGFyZSBkb2luZyBvdXIgYmVzdCBvbiB0aGUgU2VydmVyIHRvIHJlbmRlciBhIGNvbnNpc3RlbnQgVUksIGhlbmNlIHRoZVxuICAgICAgICAvLyBkZWZhdWx0IHZhbHVlIG9mIDEwMDAwXG4gICAgICAgIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpZHRoICogd2luZG93LmlubmVyV2lkdGggOiAxMDAwMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLndpZHRoO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2dldE1heFRyYW5zbGF0ZVgnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRNYXhUcmFuc2xhdGVYKCkge1xuICAgICAgdmFyIHdpZHRoID0gdGhpcy5nZXRUcmFuc2xhdGVkV2lkdGgoKSB8fCB0aGlzLmNvbnRleHQubXVpVGhlbWUuZHJhd2VyLndpZHRoO1xuICAgICAgcmV0dXJuIHdpZHRoICsgMTA7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZ2V0VHJhbnNsYXRlTXVsdGlwbGllcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRyYW5zbGF0ZU11bHRpcGxpZXIoKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5vcGVuU2Vjb25kYXJ5ID8gMSA6IC0xO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2VuYWJsZVN3aXBlSGFuZGxpbmcnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmFibGVTd2lwZUhhbmRsaW5nKCkge1xuICAgICAgaWYgKCF0aGlzLnByb3BzLmRvY2tlZCkge1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLm9uQm9keVRvdWNoU3RhcnQpO1xuICAgICAgICBpZiAoIW9wZW5OYXZFdmVudEhhbmRsZXIpIHtcbiAgICAgICAgICBvcGVuTmF2RXZlbnRIYW5kbGVyID0gdGhpcy5vbkJvZHlUb3VjaFN0YXJ0O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRpc2FibGVTd2lwZUhhbmRsaW5nKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZGlzYWJsZVN3aXBlSGFuZGxpbmcnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNhYmxlU3dpcGVIYW5kbGluZygpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMub25Cb2R5VG91Y2hTdGFydCk7XG4gICAgICBpZiAob3Blbk5hdkV2ZW50SGFuZGxlciA9PT0gdGhpcy5vbkJvZHlUb3VjaFN0YXJ0KSB7XG4gICAgICAgIG9wZW5OYXZFdmVudEhhbmRsZXIgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlbW92ZUJvZHlUb3VjaExpc3RlbmVycycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUJvZHlUb3VjaExpc3RlbmVycygpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5vbkJvZHlUb3VjaE1vdmUpO1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMub25Cb2R5VG91Y2hFbmQpO1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIHRoaXMub25Cb2R5VG91Y2hFbmQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NldFBvc2l0aW9uJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UG9zaXRpb24odHJhbnNsYXRlWCkge1xuICAgICAgdmFyIHJ0bFRyYW5zbGF0ZU11bHRpcGxpZXIgPSB0aGlzLmNvbnRleHQubXVpVGhlbWUuaXNSdGwgPyAtMSA6IDE7XG4gICAgICB2YXIgZHJhd2VyID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKHRoaXMucmVmcy5jbGlja0F3YXlhYmxlRWxlbWVudCk7XG4gICAgICB2YXIgdHJhbnNmb3JtQ1NTID0gJ3RyYW5zbGF0ZSgnICsgdGhpcy5nZXRUcmFuc2xhdGVNdWx0aXBsaWVyKCkgKiBydGxUcmFuc2xhdGVNdWx0aXBsaWVyICogdHJhbnNsYXRlWCArICdweCwgMCknO1xuICAgICAgdGhpcy5yZWZzLm92ZXJsYXkuc2V0T3BhY2l0eSgxIC0gdHJhbnNsYXRlWCAvIHRoaXMuZ2V0TWF4VHJhbnNsYXRlWCgpKTtcbiAgICAgIF9hdXRvUHJlZml4Mi5kZWZhdWx0LnNldChkcmF3ZXIuc3R5bGUsICd0cmFuc2Zvcm0nLCB0cmFuc2Zvcm1DU1MpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2dldFRyYW5zbGF0ZVgnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUcmFuc2xhdGVYKGN1cnJlbnRYKSB7XG4gICAgICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodGhpcy5zdGF0ZS5zd2lwaW5nID09PSAnY2xvc2luZycgPyB0aGlzLmdldFRyYW5zbGF0ZU11bHRpcGxpZXIoKSAqIChjdXJyZW50WCAtIHRoaXMuc3dpcGVTdGFydFgpIDogdGhpcy5nZXRNYXhUcmFuc2xhdGVYKCkgLSB0aGlzLmdldFRyYW5zbGF0ZU11bHRpcGxpZXIoKSAqICh0aGlzLnN3aXBlU3RhcnRYIC0gY3VycmVudFgpLCAwKSwgdGhpcy5nZXRNYXhUcmFuc2xhdGVYKCkpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGNoaWxkcmVuID0gX3Byb3BzLmNoaWxkcmVuLFxuICAgICAgICAgIGNsYXNzTmFtZSA9IF9wcm9wcy5jbGFzc05hbWUsXG4gICAgICAgICAgY29udGFpbmVyQ2xhc3NOYW1lID0gX3Byb3BzLmNvbnRhaW5lckNsYXNzTmFtZSxcbiAgICAgICAgICBjb250YWluZXJTdHlsZSA9IF9wcm9wcy5jb250YWluZXJTdHlsZSxcbiAgICAgICAgICBkb2NrZWQgPSBfcHJvcHMuZG9ja2VkLFxuICAgICAgICAgIG9wZW5TZWNvbmRhcnkgPSBfcHJvcHMub3BlblNlY29uZGFyeSxcbiAgICAgICAgICBvdmVybGF5Q2xhc3NOYW1lID0gX3Byb3BzLm92ZXJsYXlDbGFzc05hbWUsXG4gICAgICAgICAgb3ZlcmxheVN0eWxlID0gX3Byb3BzLm92ZXJsYXlTdHlsZSxcbiAgICAgICAgICBzdHlsZSA9IF9wcm9wcy5zdHlsZSxcbiAgICAgICAgICB6RGVwdGggPSBfcHJvcHMuekRlcHRoO1xuXG5cbiAgICAgIHZhciBzdHlsZXMgPSB0aGlzLmdldFN0eWxlcygpO1xuXG4gICAgICB2YXIgb3ZlcmxheSA9IHZvaWQgMDtcbiAgICAgIGlmICghZG9ja2VkKSB7XG4gICAgICAgIG92ZXJsYXkgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfT3ZlcmxheTIuZGVmYXVsdCwge1xuICAgICAgICAgIHJlZjogJ292ZXJsYXknLFxuICAgICAgICAgIHNob3c6IHRoaXMuc2hvdWxkU2hvdygpLFxuICAgICAgICAgIGNsYXNzTmFtZTogb3ZlcmxheUNsYXNzTmFtZSxcbiAgICAgICAgICBzdHlsZTogKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5vdmVybGF5LCBvdmVybGF5U3R5bGUpLFxuICAgICAgICAgIHRyYW5zaXRpb25FbmFibGVkOiAhdGhpcy5zdGF0ZS5zd2lwaW5nLFxuICAgICAgICAgIG9uVG91Y2hUYXA6IHRoaXMuaGFuZGxlVG91Y2hUYXBPdmVybGF5XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgICAgc3R5bGU6IHN0eWxlXG4gICAgICAgIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdEV2ZW50TGlzdGVuZXIyLmRlZmF1bHQsIHsgdGFyZ2V0OiAnd2luZG93Jywgb25LZXlVcDogdGhpcy5oYW5kbGVLZXlVcCB9KSxcbiAgICAgICAgb3ZlcmxheSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgX1BhcGVyMi5kZWZhdWx0LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJlZjogJ2NsaWNrQXdheWFibGVFbGVtZW50JyxcbiAgICAgICAgICAgIHpEZXB0aDogekRlcHRoLFxuICAgICAgICAgICAgcm91bmRlZDogZmFsc2UsXG4gICAgICAgICAgICB0cmFuc2l0aW9uRW5hYmxlZDogIXRoaXMuc3RhdGUuc3dpcGluZyxcbiAgICAgICAgICAgIGNsYXNzTmFtZTogY29udGFpbmVyQ2xhc3NOYW1lLFxuICAgICAgICAgICAgc3R5bGU6ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMucm9vdCwgb3BlblNlY29uZGFyeSAmJiBzdHlsZXMucm9vdFdoZW5PcGVuUmlnaHQsIGNvbnRhaW5lclN0eWxlKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgY2hpbGRyZW5cbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIERyYXdlcjtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbkRyYXdlci5kZWZhdWx0UHJvcHMgPSB7XG4gIGRpc2FibGVTd2lwZVRvT3BlbjogZmFsc2UsXG4gIGRvY2tlZDogdHJ1ZSxcbiAgb3BlbjogbnVsbCxcbiAgb3BlblNlY29uZGFyeTogZmFsc2UsXG4gIHN3aXBlQXJlYVdpZHRoOiAzMCxcbiAgd2lkdGg6IG51bGwsXG4gIHpEZXB0aDogMlxufTtcbkRyYXdlci5jb250ZXh0VHlwZXMgPSB7XG4gIG11aVRoZW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkXG59O1xuRHJhd2VyLnByb3BUeXBlcyA9ICBmYWxzZSA/IHtcbiAgLyoqXG4gICAqIFRoZSBjb250ZW50cyBvZiB0aGUgYERyYXdlcmBcbiAgICovXG4gIGNoaWxkcmVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIC8qKlxuICAgKiBUaGUgQ1NTIGNsYXNzIG5hbWUgb2YgdGhlIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIGNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBUaGUgQ1NTIGNsYXNzIG5hbWUgb2YgdGhlIGNvbnRhaW5lciBlbGVtZW50LlxuICAgKi9cbiAgY29udGFpbmVyQ2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBjb250YWluZXIgZWxlbWVudC5cbiAgICovXG4gIGNvbnRhaW5lclN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIElmIHRydWUsIHN3aXBpbmcgc2lkZXdheXMgd2hlbiB0aGUgYERyYXdlcmAgaXMgY2xvc2VkIHdpbGwgbm90IG9wZW4gaXQuXG4gICAqL1xuICBkaXNhYmxlU3dpcGVUb09wZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIElmIHRydWUsIHRoZSBgRHJhd2VyYCB3aWxsIGJlIGRvY2tlZC4gSW4gdGhpcyBzdGF0ZSwgdGhlIG92ZXJsYXkgd29uJ3Qgc2hvdyBhbmRcbiAgICogY2xpY2tpbmcgb24gYSBtZW51IGl0ZW0gd2lsbCBub3QgY2xvc2UgdGhlIGBEcmF3ZXJgLlxuICAgKi9cbiAgZG9ja2VkOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmdW5jdGlvbiBmaXJlZCB3aGVuIHRoZSBgb3BlbmAgc3RhdGUgb2YgdGhlIGBEcmF3ZXJgIGlzIHJlcXVlc3RlZCB0byBiZSBjaGFuZ2VkLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wZW4gSWYgdHJ1ZSwgdGhlIGBEcmF3ZXJgIHdhcyByZXF1ZXN0ZWQgdG8gYmUgb3BlbmVkLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVhc29uIFRoZSByZWFzb24gZm9yIHRoZSBvcGVuIG9yIGNsb3NlIHJlcXVlc3QuIFBvc3NpYmxlIHZhbHVlcyBhcmVcbiAgICogJ3N3aXBlJyBmb3Igb3BlbiByZXF1ZXN0czsgJ2NsaWNrYXdheScgKG9uIG92ZXJsYXkgY2xpY2tzKSxcbiAgICogJ2VzY2FwZScgKG9uIGVzY2FwZSBrZXkgcHJlc3MpLCBhbmQgJ3N3aXBlJyBmb3IgY2xvc2UgcmVxdWVzdHMuXG4gICAqL1xuICBvblJlcXVlc3RDaGFuZ2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIElmIHRydWUsIHRoZSBgRHJhd2VyYCBpcyBvcGVuZWQuICBQcm92aWRpbmcgYSB2YWx1ZSB3aWxsIHR1cm4gdGhlIGBEcmF3ZXJgXG4gICAqIGludG8gYSBjb250cm9sbGVkIGNvbXBvbmVudC5cbiAgICovXG4gIG9wZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIElmIHRydWUsIHRoZSBgRHJhd2VyYCBpcyBwb3NpdGlvbmVkIHRvIG9wZW4gZnJvbSB0aGUgb3Bwb3NpdGUgc2lkZS5cbiAgICovXG4gIG9wZW5TZWNvbmRhcnk6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIFRoZSBDU1MgY2xhc3MgbmFtZSB0byBhZGQgdG8gdGhlIGBPdmVybGF5YCBjb21wb25lbnQgdGhhdCBpcyByZW5kZXJlZCBiZWhpbmQgdGhlIGBEcmF3ZXJgLlxuICAgKi9cbiAgb3ZlcmxheUNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgYE92ZXJsYXlgIGNvbXBvbmVudCB0aGF0IGlzIHJlbmRlcmVkIGJlaGluZCB0aGUgYERyYXdlcmAuXG4gICAqL1xuICBvdmVybGF5U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIHN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIFRoZSB3aWR0aCBvZiB0aGUgbGVmdCBtb3N0IChvciByaWdodCBtb3N0KSBhcmVhIGluIHBpeGVscyB3aGVyZSB0aGUgYERyYXdlcmAgY2FuIGJlXG4gICAqIHN3aXBlZCBvcGVuIGZyb20uIFNldHRpbmcgdGhpcyB0byBgbnVsbGAgc3BhbnMgdGhhdCBhcmVhIHRvIHRoZSBlbnRpcmUgcGFnZVxuICAgKiAoKipDQVVUSU9OISoqIFNldHRpbmcgdGhpcyBwcm9wZXJ0eSB0byBgbnVsbGAgbWlnaHQgY2F1c2UgaXNzdWVzIHdpdGggc2xpZGVycyBhbmRcbiAgICogc3dpcGVhYmxlIGBUYWJzYDogdXNlIGF0IHlvdXIgb3duIHJpc2spLlxuICAgKi9cbiAgc3dpcGVBcmVhV2lkdGg6IF9wcm9wVHlwZXMyLmRlZmF1bHQubnVtYmVyLFxuICAvKipcbiAgICogVGhlIHdpZHRoIG9mIHRoZSBgRHJhd2VyYCBpbiBwaXhlbHMgb3IgcGVyY2VudGFnZSBpbiBzdHJpbmcgZm9ybWF0IGV4LiBgNTAlYCB0byBmaWxsXG4gICAqIGhhbGYgb2YgdGhlIHdpbmRvdyBvciBgMTAwJWAgYW5kIHNvIG9uLiBEZWZhdWx0cyB0byB1c2luZyB0aGUgdmFsdWVzIGZyb20gdGhlbWUuXG4gICAqL1xuICB3aWR0aDogX3Byb3BUeXBlczIuZGVmYXVsdC5vbmVPZlR5cGUoW19wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLCBfcHJvcFR5cGVzMi5kZWZhdWx0Lm51bWJlcl0pLFxuICAvKipcbiAgICogVGhlIHpEZXB0aCBvZiB0aGUgYERyYXdlcmAuXG4gICAqL1xuICB6RGVwdGg6IF9wcm9wVHlwZXM0LmRlZmF1bHQuekRlcHRoXG5cbn0gOiB7fTtcbmV4cG9ydHMuZGVmYXVsdCA9IERyYXdlcjtcblxuLyoqKi8gfSksXG5cbi8qKiovIDE0ODpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHVuZGVmaW5lZDtcblxudmFyIF9EcmF3ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Nyk7XG5cbnZhciBfRHJhd2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RyYXdlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuZGVmYXVsdCA9IF9EcmF3ZXIyLmRlZmF1bHQ7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAxNDk6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXG52YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTtcblxudmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpO1xuXG52YXIgX2luaGVyaXRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cbnZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTtcblxudmFyIF9zaW1wbGVBc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXG52YXIgX3NpbXBsZUFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaW1wbGVBc3NpZ24pO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxudmFyIF9yZWFjdERvbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXG52YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblxudmFyIF90cmFuc2l0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXG52YXIgX3RyYW5zaXRpb25zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RyYW5zaXRpb25zKTtcblxudmFyIF9hcnJvd0Ryb3BEb3duID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjQpO1xuXG52YXIgX2Fycm93RHJvcERvd24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXJyb3dEcm9wRG93bik7XG5cbnZhciBfTWVudSA9IF9fd2VicGFja19yZXF1aXJlX18oOTEpO1xuXG52YXIgX01lbnUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTWVudSk7XG5cbnZhciBfQ2xlYXJGaXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1NSk7XG5cbnZhciBfQ2xlYXJGaXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ2xlYXJGaXgpO1xuXG52YXIgX1BvcG92ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KTtcblxudmFyIF9Qb3BvdmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BvcG92ZXIpO1xuXG52YXIgX1BvcG92ZXJBbmltYXRpb25WZXJ0aWNhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTA3KTtcblxudmFyIF9Qb3BvdmVyQW5pbWF0aW9uVmVydGljYWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsKTtcblxudmFyIF9rZXljb2RlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cbnZhciBfa2V5Y29kZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9rZXljb2RlKTtcblxudmFyIF9ldmVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKTtcblxudmFyIF9ldmVudHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXZlbnRzKTtcblxudmFyIF9JY29uQnV0dG9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCk7XG5cbnZhciBfSWNvbkJ1dHRvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9JY29uQnV0dG9uKTtcblxudmFyIF9wcm9wVHlwZXMzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cbnZhciBfcHJvcFR5cGVzNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlczMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBnZXRTdHlsZXMocHJvcHMsIGNvbnRleHQpIHtcbiAgdmFyIGRpc2FibGVkID0gcHJvcHMuZGlzYWJsZWQ7XG5cbiAgdmFyIHNwYWNpbmcgPSBjb250ZXh0Lm11aVRoZW1lLmJhc2VUaGVtZS5zcGFjaW5nO1xuICB2YXIgcGFsZXR0ZSA9IGNvbnRleHQubXVpVGhlbWUuYmFzZVRoZW1lLnBhbGV0dGU7XG4gIHZhciBhY2NlbnRDb2xvciA9IGNvbnRleHQubXVpVGhlbWUuZHJvcERvd25NZW51LmFjY2VudENvbG9yO1xuICByZXR1cm4ge1xuICAgIGNvbnRyb2w6IHtcbiAgICAgIGN1cnNvcjogZGlzYWJsZWQgPyAnbm90LWFsbG93ZWQnIDogJ3BvaW50ZXInLFxuICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgIHdpZHRoOiAnMTAwJSdcbiAgICB9LFxuICAgIGljb246IHtcbiAgICAgIGZpbGw6IGFjY2VudENvbG9yLFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICByaWdodDogc3BhY2luZy5kZXNrdG9wR3V0dGVyTGVzcyxcbiAgICAgIHRvcDogKHNwYWNpbmcuaWNvblNpemUgLSAyNCkgLyAyICsgc3BhY2luZy5kZXNrdG9wR3V0dGVyTWluaSAvIDJcbiAgICB9LFxuICAgIGljb25DaGlsZHJlbjoge1xuICAgICAgZmlsbDogJ2luaGVyaXQnXG4gICAgfSxcbiAgICBsYWJlbDoge1xuICAgICAgY29sb3I6IGRpc2FibGVkID8gcGFsZXR0ZS5kaXNhYmxlZENvbG9yIDogcGFsZXR0ZS50ZXh0Q29sb3IsXG4gICAgICBoZWlnaHQ6IHNwYWNpbmcuZGVza3RvcFRvb2xiYXJIZWlnaHQgKyAncHgnLFxuICAgICAgbGluZUhlaWdodDogc3BhY2luZy5kZXNrdG9wVG9vbGJhckhlaWdodCArICdweCcsXG4gICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICBvcGFjaXR5OiAxLFxuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICBwYWRkaW5nTGVmdDogc3BhY2luZy5kZXNrdG9wR3V0dGVyLFxuICAgICAgcGFkZGluZ1JpZ2h0OiBzcGFjaW5nLmljb25TaXplICogMiArIHNwYWNpbmcuZGVza3RvcEd1dHRlck1pbmksXG4gICAgICB0ZXh0T3ZlcmZsb3c6ICdlbGxpcHNpcycsXG4gICAgICB0b3A6IDAsXG4gICAgICB3aGl0ZVNwYWNlOiAnbm93cmFwJ1xuICAgIH0sXG4gICAgbGFiZWxXaGVuT3Blbjoge1xuICAgICAgb3BhY2l0eTogMCxcbiAgICAgIHRvcDogc3BhY2luZy5kZXNrdG9wVG9vbGJhckhlaWdodCAvIDhcbiAgICB9LFxuICAgIHJvb3Q6IHtcbiAgICAgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuICAgICAgZm9udFNpemU6IHNwYWNpbmcuZGVza3RvcERyb3BEb3duTWVudUZvbnRTaXplLFxuICAgICAgaGVpZ2h0OiBzcGFjaW5nLmRlc2t0b3BTdWJoZWFkZXJIZWlnaHQsXG4gICAgICBmb250RmFtaWx5OiBjb250ZXh0Lm11aVRoZW1lLmJhc2VUaGVtZS5mb250RmFtaWx5LFxuICAgICAgb3V0bGluZTogJ25vbmUnLFxuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICB0cmFuc2l0aW9uOiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgpXG4gICAgfSxcbiAgICByb290V2hlbk9wZW46IHtcbiAgICAgIG9wYWNpdHk6IDFcbiAgICB9LFxuICAgIHVuZGVybGluZToge1xuICAgICAgYm9yZGVyVG9wOiAnc29saWQgMXB4ICcgKyBhY2NlbnRDb2xvcixcbiAgICAgIGJvdHRvbTogMSxcbiAgICAgIGxlZnQ6IDAsXG4gICAgICBtYXJnaW46ICctMXB4ICcgKyBzcGFjaW5nLmRlc2t0b3BHdXR0ZXIgKyAncHgnLFxuICAgICAgcmlnaHQ6IDAsXG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJ1xuICAgIH1cbiAgfTtcbn1cblxudmFyIERyb3BEb3duTWVudSA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKERyb3BEb3duTWVudSwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gRHJvcERvd25NZW51KCkge1xuICAgIHZhciBfcmVmO1xuXG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERyb3BEb3duTWVudSk7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKF9yZWYgPSBEcm9wRG93bk1lbnUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERyb3BEb3duTWVudSkpLmNhbGwuYXBwbHkoX3JlZiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLnN0YXRlID0ge1xuICAgICAgb3BlbjogZmFsc2VcbiAgICB9LCBfdGhpcy5yb290Tm9kZSA9IHVuZGVmaW5lZCwgX3RoaXMuYXJyb3dOb2RlID0gdW5kZWZpbmVkLCBfdGhpcy5oYW5kbGVUb3VjaFRhcENvbnRyb2wgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoIV90aGlzLnByb3BzLmRpc2FibGVkKSB7XG4gICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBvcGVuOiAhX3RoaXMuc3RhdGUub3BlbixcbiAgICAgICAgICBhbmNob3JFbDogX3RoaXMucm9vdE5vZGVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSwgX3RoaXMuaGFuZGxlUmVxdWVzdENsb3NlTWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLmNsb3NlKGZhbHNlKTtcbiAgICB9LCBfdGhpcy5oYW5kbGVFc2NLZXlEb3duTWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLmNsb3NlKHRydWUpO1xuICAgIH0sIF90aGlzLmhhbmRsZUtleURvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHN3aXRjaCAoKDAsIF9rZXljb2RlMi5kZWZhdWx0KShldmVudCkpIHtcbiAgICAgICAgY2FzZSAndXAnOlxuICAgICAgICBjYXNlICdkb3duJzpcbiAgICAgICAgY2FzZSAnc3BhY2UnOlxuICAgICAgICBjYXNlICdlbnRlcic6XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBvcGVuOiB0cnVlLFxuICAgICAgICAgICAgYW5jaG9yRWw6IF90aGlzLnJvb3ROb2RlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSwgX3RoaXMuaGFuZGxlSXRlbVRvdWNoVGFwID0gZnVuY3Rpb24gKGV2ZW50LCBjaGlsZCwgaW5kZXgpIHtcbiAgICAgIGlmIChfdGhpcy5wcm9wcy5tdWx0aXBsZSkge1xuICAgICAgICBpZiAoIV90aGlzLnN0YXRlLm9wZW4pIHtcbiAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IG9wZW46IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGV2ZW50LnBlcnNpc3QoKTtcbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIG9wZW46IGZhbHNlXG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoX3RoaXMucHJvcHMub25DaGFuZ2UpIHtcbiAgICAgICAgICAgIF90aGlzLnByb3BzLm9uQ2hhbmdlKGV2ZW50LCBpbmRleCwgY2hpbGQucHJvcHMudmFsdWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF90aGlzLmNsb3NlKF9ldmVudHMyLmRlZmF1bHQuaXNLZXlib2FyZChldmVudCkpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCBfdGhpcy5oYW5kbGVDaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQsIHZhbHVlKSB7XG4gICAgICBpZiAoX3RoaXMucHJvcHMubXVsdGlwbGUgJiYgX3RoaXMucHJvcHMub25DaGFuZ2UpIHtcbiAgICAgICAgX3RoaXMucHJvcHMub25DaGFuZ2UoZXZlbnQsIHVuZGVmaW5lZCwgdmFsdWUpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmNsb3NlID0gZnVuY3Rpb24gKGlzS2V5Ym9hcmQpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgb3BlbjogZmFsc2VcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF90aGlzLnByb3BzLm9uQ2xvc2UpIHtcbiAgICAgICAgICBfdGhpcy5wcm9wcy5vbkNsb3NlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNLZXlib2FyZCkge1xuICAgICAgICAgIHZhciBkcm9wQXJyb3cgPSBfdGhpcy5hcnJvd05vZGU7XG4gICAgICAgICAgdmFyIGRyb3BOb2RlID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKGRyb3BBcnJvdyk7XG4gICAgICAgICAgZHJvcE5vZGUuZm9jdXMoKTtcbiAgICAgICAgICBkcm9wQXJyb3cuc2V0S2V5Ym9hcmRGb2N1cyh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSwgX3RlbXApLCAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gIC8vIFRoZSBuZXN0ZWQgc3R5bGVzIGZvciBkcm9wLWRvd24tbWVudSBhcmUgbW9kaWZpZWQgYnkgdG9vbGJhciBhbmQgcG9zc2libHlcbiAgLy8gb3RoZXIgdXNlciBjb21wb25lbnRzLCBzbyBpdCB3aWxsIGdpdmUgZnVsbCBhY2Nlc3MgdG8gaXRzIGpzIHN0eWxlcyByYXRoZXJcbiAgLy8gdGhhbiBqdXN0IHRoZSBwYXJlbnQuXG5cblxuICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShEcm9wRG93bk1lbnUsIFt7XG4gICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy5hdXRvV2lkdGgpIHtcbiAgICAgICAgdGhpcy5zZXRXaWR0aCgpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMucHJvcHMub3BlbkltbWVkaWF0ZWx5KSB7XG4gICAgICAgIC8vIFRPRE86IFRlbXBvcmFyeSBmaXggdG8gbWFrZSBvcGVuSW1tZWRpYXRlbHkgd29yayB3aXRoIHBvcG92ZXIuXG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlIHJlYWN0L25vLWRpZC1tb3VudC1zZXQtc3RhdGUgKi9cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMi5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBvcGVuOiB0cnVlLFxuICAgICAgICAgICAgYW5jaG9yRWw6IF90aGlzMi5yb290Tm9kZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9LCAwKTtcbiAgICAgICAgLyogZXNsaW50LWVuYWJsZSByZWFjdC9uby1kaWQtbW91bnQtc2V0LXN0YXRlICovXG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMoKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5hdXRvV2lkdGgpIHtcbiAgICAgICAgdGhpcy5zZXRXaWR0aCgpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2dldElucHV0Tm9kZScsXG5cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGRlcHJlY2F0ZWQgYnV0IHN0aWxsIGhlcmUgYmVjYXVzZSB0aGUgVGV4dEZpZWxkXG4gICAgICogbmVlZCBpdCBpbiBvcmRlciB0byB3b3JrLiBUT0RPOiBUaGF0IHdpbGwgYmUgYWRkcmVzc2VkIGxhdGVyLlxuICAgICAqL1xuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnB1dE5vZGUoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIHJvb3ROb2RlID0gdGhpcy5yb290Tm9kZTtcblxuICAgICAgcm9vdE5vZGUuZm9jdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghX3RoaXMzLnByb3BzLmRpc2FibGVkKSB7XG4gICAgICAgICAgX3RoaXMzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIG9wZW46ICFfdGhpczMuc3RhdGUub3BlbixcbiAgICAgICAgICAgIGFuY2hvckVsOiBfdGhpczMucm9vdE5vZGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHJvb3ROb2RlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NldFdpZHRoJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0V2lkdGgoKSB7XG4gICAgICB2YXIgZWwgPSB0aGlzLnJvb3ROb2RlO1xuICAgICAgaWYgKCF0aGlzLnByb3BzLnN0eWxlIHx8ICF0aGlzLnByb3BzLnN0eWxlLmhhc093blByb3BlcnR5KCd3aWR0aCcpKSB7XG4gICAgICAgIGVsLnN0eWxlLndpZHRoID0gJ2F1dG8nO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBhbmltYXRlZCA9IF9wcm9wcy5hbmltYXRlZCxcbiAgICAgICAgICBhbmltYXRpb24gPSBfcHJvcHMuYW5pbWF0aW9uLFxuICAgICAgICAgIGF1dG9XaWR0aCA9IF9wcm9wcy5hdXRvV2lkdGgsXG4gICAgICAgICAgbXVsdGlwbGUgPSBfcHJvcHMubXVsdGlwbGUsXG4gICAgICAgICAgY2hpbGRyZW4gPSBfcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgICAgY2xhc3NOYW1lID0gX3Byb3BzLmNsYXNzTmFtZSxcbiAgICAgICAgICBkaXNhYmxlZCA9IF9wcm9wcy5kaXNhYmxlZCxcbiAgICAgICAgICBpY29uU3R5bGUgPSBfcHJvcHMuaWNvblN0eWxlLFxuICAgICAgICAgIGxhYmVsU3R5bGUgPSBfcHJvcHMubGFiZWxTdHlsZSxcbiAgICAgICAgICBsaXN0U3R5bGUgPSBfcHJvcHMubGlzdFN0eWxlLFxuICAgICAgICAgIG1heEhlaWdodCA9IF9wcm9wcy5tYXhIZWlnaHQsXG4gICAgICAgICAgbWVudVN0eWxlUHJvcCA9IF9wcm9wcy5tZW51U3R5bGUsXG4gICAgICAgICAgc2VsZWN0aW9uUmVuZGVyZXIgPSBfcHJvcHMuc2VsZWN0aW9uUmVuZGVyZXIsXG4gICAgICAgICAgb25DbG9zZSA9IF9wcm9wcy5vbkNsb3NlLFxuICAgICAgICAgIG9wZW5JbW1lZGlhdGVseSA9IF9wcm9wcy5vcGVuSW1tZWRpYXRlbHksXG4gICAgICAgICAgbWVudUl0ZW1TdHlsZSA9IF9wcm9wcy5tZW51SXRlbVN0eWxlLFxuICAgICAgICAgIHNlbGVjdGVkTWVudUl0ZW1TdHlsZSA9IF9wcm9wcy5zZWxlY3RlZE1lbnVJdGVtU3R5bGUsXG4gICAgICAgICAgc3R5bGUgPSBfcHJvcHMuc3R5bGUsXG4gICAgICAgICAgdW5kZXJsaW5lU3R5bGUgPSBfcHJvcHMudW5kZXJsaW5lU3R5bGUsXG4gICAgICAgICAgdmFsdWUgPSBfcHJvcHMudmFsdWUsXG4gICAgICAgICAgaWNvbkJ1dHRvbiA9IF9wcm9wcy5pY29uQnV0dG9uLFxuICAgICAgICAgIGFuY2hvck9yaWdpbiA9IF9wcm9wcy5hbmNob3JPcmlnaW4sXG4gICAgICAgICAgdGFyZ2V0T3JpZ2luID0gX3Byb3BzLnRhcmdldE9yaWdpbixcbiAgICAgICAgICBvdGhlciA9ICgwLCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzLmRlZmF1bHQpKF9wcm9wcywgWydhbmltYXRlZCcsICdhbmltYXRpb24nLCAnYXV0b1dpZHRoJywgJ211bHRpcGxlJywgJ2NoaWxkcmVuJywgJ2NsYXNzTmFtZScsICdkaXNhYmxlZCcsICdpY29uU3R5bGUnLCAnbGFiZWxTdHlsZScsICdsaXN0U3R5bGUnLCAnbWF4SGVpZ2h0JywgJ21lbnVTdHlsZScsICdzZWxlY3Rpb25SZW5kZXJlcicsICdvbkNsb3NlJywgJ29wZW5JbW1lZGlhdGVseScsICdtZW51SXRlbVN0eWxlJywgJ3NlbGVjdGVkTWVudUl0ZW1TdHlsZScsICdzdHlsZScsICd1bmRlcmxpbmVTdHlsZScsICd2YWx1ZScsICdpY29uQnV0dG9uJywgJ2FuY2hvck9yaWdpbicsICd0YXJnZXRPcmlnaW4nXSk7XG4gICAgICB2YXIgX3N0YXRlID0gdGhpcy5zdGF0ZSxcbiAgICAgICAgICBhbmNob3JFbCA9IF9zdGF0ZS5hbmNob3JFbCxcbiAgICAgICAgICBvcGVuID0gX3N0YXRlLm9wZW47XG4gICAgICB2YXIgcHJlcGFyZVN0eWxlcyA9IHRoaXMuY29udGV4dC5tdWlUaGVtZS5wcmVwYXJlU3R5bGVzO1xuXG4gICAgICB2YXIgc3R5bGVzID0gZ2V0U3R5bGVzKHRoaXMucHJvcHMsIHRoaXMuY29udGV4dCk7XG5cbiAgICAgIHZhciBkaXNwbGF5VmFsdWUgPSAnJztcbiAgICAgIGlmICghbXVsdGlwbGUpIHtcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LkNoaWxkcmVuLmZvckVhY2goY2hpbGRyZW4sIGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgIGlmIChjaGlsZCAmJiB2YWx1ZSA9PT0gY2hpbGQucHJvcHMudmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rpb25SZW5kZXJlcikge1xuICAgICAgICAgICAgICBkaXNwbGF5VmFsdWUgPSBzZWxlY3Rpb25SZW5kZXJlcih2YWx1ZSwgY2hpbGQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gVGhpcyB3aWxsIG5lZWQgdG8gYmUgaW1wcm92ZWQgKGluIGNhc2UgcHJpbWFyeVRleHQgaXMgYSBub2RlKVxuICAgICAgICAgICAgICBkaXNwbGF5VmFsdWUgPSBjaGlsZC5wcm9wcy5sYWJlbCB8fCBjaGlsZC5wcm9wcy5wcmltYXJ5VGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgICAgICB2YXIgc2VsZWN0aW9uUmVuZGVyZXJDaGlsZHJlbiA9IFtdO1xuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuQ2hpbGRyZW4uZm9yRWFjaChjaGlsZHJlbiwgZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgaWYgKGNoaWxkICYmIHZhbHVlICYmIHZhbHVlLmluZGV4T2YoY2hpbGQucHJvcHMudmFsdWUpID4gLTEpIHtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rpb25SZW5kZXJlcikge1xuICAgICAgICAgICAgICB2YWx1ZXMucHVzaChjaGlsZC5wcm9wcy52YWx1ZSk7XG4gICAgICAgICAgICAgIHNlbGVjdGlvblJlbmRlcmVyQ2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2YWx1ZXMucHVzaChjaGlsZC5wcm9wcy5sYWJlbCB8fCBjaGlsZC5wcm9wcy5wcmltYXJ5VGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBkaXNwbGF5VmFsdWUgPSBbXTtcbiAgICAgICAgaWYgKHNlbGVjdGlvblJlbmRlcmVyKSB7XG4gICAgICAgICAgZGlzcGxheVZhbHVlID0gc2VsZWN0aW9uUmVuZGVyZXIodmFsdWVzLCBzZWxlY3Rpb25SZW5kZXJlckNoaWxkcmVuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkaXNwbGF5VmFsdWUgPSB2YWx1ZXMuam9pbignLCAnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgbWVudVN0eWxlID0gdm9pZCAwO1xuICAgICAgaWYgKGFuY2hvckVsICYmICFhdXRvV2lkdGgpIHtcbiAgICAgICAgbWVudVN0eWxlID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHtcbiAgICAgICAgICB3aWR0aDogYW5jaG9yRWwuY2xpZW50V2lkdGhcbiAgICAgICAgfSwgbWVudVN0eWxlUHJvcCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtZW51U3R5bGUgPSBtZW51U3R5bGVQcm9wO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBvdGhlciwge1xuICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKG5vZGUpIHtcbiAgICAgICAgICAgIF90aGlzNC5yb290Tm9kZSA9IG5vZGU7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgICBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe30sIHN0eWxlcy5yb290LCBvcGVuICYmIHN0eWxlcy5yb290V2hlbk9wZW4sIHN0eWxlKSlcbiAgICAgICAgfSksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIF9DbGVhckZpeDIuZGVmYXVsdCxcbiAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuY29udHJvbCwgb25Ub3VjaFRhcDogdGhpcy5oYW5kbGVUb3VjaFRhcENvbnRyb2wgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe30sIHN0eWxlcy5sYWJlbCwgb3BlbiAmJiBzdHlsZXMubGFiZWxXaGVuT3BlbiwgbGFiZWxTdHlsZSkpIH0sXG4gICAgICAgICAgICBkaXNwbGF5VmFsdWVcbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgX0ljb25CdXR0b24yLmRlZmF1bHQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgICAgICAgICAgb25LZXlEb3duOiB0aGlzLmhhbmRsZUtleURvd24sXG4gICAgICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBfdGhpczQuYXJyb3dOb2RlID0gbm9kZTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgc3R5bGU6ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgc3R5bGVzLmljb24sIGljb25TdHlsZSksXG4gICAgICAgICAgICAgIGljb25TdHlsZTogc3R5bGVzLmljb25DaGlsZHJlblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGljb25CdXR0b25cbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IHN0eWxlOiBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgc3R5bGVzLnVuZGVybGluZSwgdW5kZXJsaW5lU3R5bGUpKSB9KVxuICAgICAgICApLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICBfUG9wb3ZlcjIuZGVmYXVsdCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBhbmNob3JPcmlnaW46IGFuY2hvck9yaWdpbixcbiAgICAgICAgICAgIHRhcmdldE9yaWdpbjogdGFyZ2V0T3JpZ2luLFxuICAgICAgICAgICAgYW5jaG9yRWw6IGFuY2hvckVsLFxuICAgICAgICAgICAgYW5pbWF0aW9uOiBhbmltYXRpb24gfHwgX1BvcG92ZXJBbmltYXRpb25WZXJ0aWNhbDIuZGVmYXVsdCxcbiAgICAgICAgICAgIG9wZW46IG9wZW4sXG4gICAgICAgICAgICBhbmltYXRlZDogYW5pbWF0ZWQsXG4gICAgICAgICAgICBvblJlcXVlc3RDbG9zZTogdGhpcy5oYW5kbGVSZXF1ZXN0Q2xvc2VNZW51XG4gICAgICAgICAgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgIF9NZW51Mi5kZWZhdWx0LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBtdWx0aXBsZTogbXVsdGlwbGUsXG4gICAgICAgICAgICAgIG1heEhlaWdodDogbWF4SGVpZ2h0LFxuICAgICAgICAgICAgICBkZXNrdG9wOiB0cnVlLFxuICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAgIG9uRXNjS2V5RG93bjogdGhpcy5oYW5kbGVFc2NLZXlEb3duTWVudSxcbiAgICAgICAgICAgICAgc3R5bGU6IG1lbnVTdHlsZSxcbiAgICAgICAgICAgICAgbGlzdFN0eWxlOiBsaXN0U3R5bGUsXG4gICAgICAgICAgICAgIG9uSXRlbVRvdWNoVGFwOiB0aGlzLmhhbmRsZUl0ZW1Ub3VjaFRhcCxcbiAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlQ2hhbmdlLFxuICAgICAgICAgICAgICBtZW51SXRlbVN0eWxlOiBtZW51SXRlbVN0eWxlLFxuICAgICAgICAgICAgICBzZWxlY3RlZE1lbnVJdGVtU3R5bGU6IHNlbGVjdGVkTWVudUl0ZW1TdHlsZSxcbiAgICAgICAgICAgICAgYXV0b1dpZHRoOiBhdXRvV2lkdGgsXG4gICAgICAgICAgICAgIHdpZHRoOiAhYXV0b1dpZHRoICYmIG1lbnVTdHlsZSA/IG1lbnVTdHlsZS53aWR0aCA6IG51bGxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjaGlsZHJlblxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIERyb3BEb3duTWVudTtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbkRyb3BEb3duTWVudS5tdWlOYW1lID0gJ0Ryb3BEb3duTWVudSc7XG5Ecm9wRG93bk1lbnUuZGVmYXVsdFByb3BzID0ge1xuICBhbmltYXRlZDogdHJ1ZSxcbiAgYXV0b1dpZHRoOiB0cnVlLFxuICBkaXNhYmxlZDogZmFsc2UsXG4gIGljb25CdXR0b246IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9hcnJvd0Ryb3BEb3duMi5kZWZhdWx0LCBudWxsKSxcbiAgb3BlbkltbWVkaWF0ZWx5OiBmYWxzZSxcbiAgbWF4SGVpZ2h0OiA1MDAsXG4gIG11bHRpcGxlOiBmYWxzZSxcbiAgYW5jaG9yT3JpZ2luOiB7XG4gICAgdmVydGljYWw6ICd0b3AnLFxuICAgIGhvcml6b250YWw6ICdsZWZ0J1xuICB9XG59O1xuRHJvcERvd25NZW51LmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5Ecm9wRG93bk1lbnUucHJvcFR5cGVzID0gIGZhbHNlID8ge1xuICAvKipcbiAgICogVGhpcyBpcyB0aGUgcG9pbnQgb24gdGhlIGFuY2hvciB0aGF0IHRoZSBwb3BvdmVyJ3NcbiAgICogYHRhcmdldE9yaWdpbmAgd2lsbCBhdHRhY2ggdG8uXG4gICAqIE9wdGlvbnM6XG4gICAqIHZlcnRpY2FsOiBbdG9wLCBjZW50ZXIsIGJvdHRvbV1cbiAgICogaG9yaXpvbnRhbDogW2xlZnQsIG1pZGRsZSwgcmlnaHRdLlxuICAgKi9cbiAgYW5jaG9yT3JpZ2luOiBfcHJvcFR5cGVzNC5kZWZhdWx0Lm9yaWdpbixcbiAgLyoqXG4gICAqIElmIHRydWUsIHRoZSBwb3BvdmVyIHdpbGwgYXBwbHkgdHJhbnNpdGlvbnMgd2hlblxuICAgKiBpdCBnZXRzIGFkZGVkIHRvIHRoZSBET00uXG4gICAqL1xuICBhbmltYXRlZDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGRlZmF1bHQgYW5pbWF0aW9uIGNvbXBvbmVudCB1c2VkLlxuICAgKi9cbiAgYW5pbWF0aW9uOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBUaGUgd2lkdGggd2lsbCBhdXRvbWF0aWNhbGx5IGJlIHNldCBhY2NvcmRpbmcgdG8gdGhlIGl0ZW1zIGluc2lkZSB0aGUgbWVudS5cbiAgICogVG8gY29udHJvbCB0aGlzIHdpZHRoIGluIGNzcyBpbnN0ZWFkLCBzZXQgdGhpcyBwcm9wIHRvIGBmYWxzZWAuXG4gICAqL1xuICBhdXRvV2lkdGg6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIFRoZSBgTWVudUl0ZW1gcyB0byBwb3B1bGF0ZSB0aGUgYE1lbnVgIHdpdGguIElmIHRoZSBgTWVudUl0ZW1zYCBoYXZlIHRoZVxuICAgKiBwcm9wIGBsYWJlbGAgdGhhdCB2YWx1ZSB3aWxsIGJlIHVzZWQgdG8gcmVuZGVyIHRoZSByZXByZXNlbnRhdGlvbiBvZiB0aGF0XG4gICAqIGl0ZW0gd2l0aGluIHRoZSBmaWVsZC5cbiAgICovXG4gIGNoaWxkcmVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIC8qKlxuICAgKiBUaGUgY3NzIGNsYXNzIG5hbWUgb2YgdGhlIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIGNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBEaXNhYmxlcyB0aGUgbWVudS5cbiAgICovXG4gIGRpc2FibGVkOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgZGVmYXVsdCBgU3ZnSWNvbmAgZHJvcGRvd24gYXJyb3cgY29tcG9uZW50LlxuICAgKi9cbiAgaWNvbkJ1dHRvbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICAvKipcbiAgICogT3ZlcnJpZGVzIHRoZSBzdHlsZXMgb2YgaWNvbiBlbGVtZW50LlxuICAgKi9cbiAgaWNvblN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlcyB0aGUgc3R5bGVzIG9mIGxhYmVsIHdoZW4gdGhlIGBEcm9wRG93bk1lbnVgIGlzIGluYWN0aXZlLlxuICAgKi9cbiAgbGFiZWxTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBUaGUgc3R5bGUgb2JqZWN0IHRvIHVzZSB0byBvdmVycmlkZSB1bmRlcmx5aW5nIGxpc3Qgc3R5bGUuXG4gICAqL1xuICBsaXN0U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhlIG1heGltdW0gaGVpZ2h0IG9mIHRoZSBgTWVudWAgd2hlbiBpdCBpcyBkaXNwbGF5ZWQuXG4gICAqL1xuICBtYXhIZWlnaHQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQubnVtYmVyLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgbWVudSBpdGVtcy5cbiAgICovXG4gIG1lbnVJdGVtU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogT3ZlcnJpZGVzIHRoZSBzdHlsZXMgb2YgYE1lbnVgIHdoZW4gdGhlIGBEcm9wRG93bk1lbnVgIGlzIGRpc3BsYXllZC5cbiAgICovXG4gIG1lbnVTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBJZiB0cnVlLCBgdmFsdWVgIG11c3QgYmUgYW4gYXJyYXkgYW5kIHRoZSBtZW51IHdpbGwgc3VwcG9ydFxuICAgKiBtdWx0aXBsZSBzZWxlY3Rpb25zLlxuICAgKi9cbiAgbXVsdGlwbGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZpcmVkIHdoZW4gYSBtZW51IGl0ZW0gaXMgY2xpY2tlZCwgb3RoZXIgdGhhbiB0aGUgb25lIGN1cnJlbnRseSBzZWxlY3RlZC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IFRvdWNoVGFwIGV2ZW50IHRhcmdldGluZyB0aGUgbWVudSBpdGVtIHRoYXQgd2FzIGNsaWNrZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBrZXkgVGhlIGluZGV4IG9mIHRoZSBjbGlja2VkIG1lbnUgaXRlbSBpbiB0aGUgYGNoaWxkcmVuYCBjb2xsZWN0aW9uLlxuICAgKiBAcGFyYW0ge2FueX0gdmFsdWUgSWYgYG11bHRpcGxlYCBpcyB0cnVlLCB0aGUgbWVudSdzIGB2YWx1ZWBcbiAgICogYXJyYXkgd2l0aCBlaXRoZXIgdGhlIG1lbnUgaXRlbSdzIGB2YWx1ZWAgYWRkZWQgKGlmXG4gICAqIGl0IHdhc24ndCBhbHJlYWR5IHNlbGVjdGVkKSBvciBvbWl0dGVkIChpZiBpdCB3YXMgYWxyZWFkeSBzZWxlY3RlZCkuXG4gICAqIE90aGVyd2lzZSwgdGhlIGB2YWx1ZWAgb2YgdGhlIG1lbnUgaXRlbS5cbiAgICovXG4gIG9uQ2hhbmdlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmdW5jdGlvbiBmaXJlZCB3aGVuIHRoZSBtZW51IGlzIGNsb3NlZC5cbiAgICovXG4gIG9uQ2xvc2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIFNldCB0byB0cnVlIHRvIGhhdmUgdGhlIGBEcm9wRG93bk1lbnVgIGF1dG9tYXRpY2FsbHkgb3BlbiBvbiBtb3VudC5cbiAgICovXG4gIG9wZW5JbW1lZGlhdGVseTogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2Ygc2VsZWN0ZWQgbWVudSBpdGVtcy5cbiAgICovXG4gIHNlbGVjdGVkTWVudUl0ZW1TdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmdW5jdGlvbiBmaXJlZCB3aGVuIGEgbWVudSBpdGVtIGlzIGNsaWNrZWQsIG90aGVyIHRoYW4gdGhlIG9uZSBjdXJyZW50bHkgc2VsZWN0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7YW55fSB2YWx1ZSBJZiBgbXVsdGlwbGVgIGlzIHRydWUsIHRoZSBtZW51J3MgYHZhbHVlYFxuICAgKiBhcnJheSB3aXRoIGVpdGhlciB0aGUgbWVudSBpdGVtJ3MgYHZhbHVlYCBhZGRlZCAoaWZcbiAgICogaXQgd2Fzbid0IGFscmVhZHkgc2VsZWN0ZWQpIG9yIG9taXR0ZWQgKGlmIGl0IHdhcyBhbHJlYWR5IHNlbGVjdGVkKS5cbiAgICogT3RoZXJ3aXNlLCB0aGUgYHZhbHVlYCBvZiB0aGUgbWVudSBpdGVtLlxuICAgKiBAcGFyYW0ge2FueX0gbWVudUl0ZW0gVGhlIHNlbGVjdGVkIGBNZW51SXRlbWAuXG4gICAqIElmIGBtdWx0aXBsZWAgaXMgdHJ1ZSwgdGhpcyB3aWxsIGJlIGFuIGFycmF5IHdpdGggdGhlIGBNZW51SXRlbWBzIG1hdGNoaW5nIHRoZSBgdmFsdWVgcyBwYXJhbWV0ZXIuXG4gICAqL1xuICBzZWxlY3Rpb25SZW5kZXJlcjogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIHN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIHBvaW50IG9uIHRoZSBwb3BvdmVyIHdoaWNoIHdpbGwgYXR0YWNoIHRvXG4gICAqIHRoZSBhbmNob3IncyBvcmlnaW4uXG4gICAqIE9wdGlvbnM6XG4gICAqIHZlcnRpY2FsOiBbdG9wLCBjZW50ZXIsIGJvdHRvbV1cbiAgICogaG9yaXpvbnRhbDogW2xlZnQsIG1pZGRsZSwgcmlnaHRdLlxuICAgKi9cbiAgdGFyZ2V0T3JpZ2luOiBfcHJvcFR5cGVzNC5kZWZhdWx0Lm9yaWdpbixcbiAgLyoqXG4gICAqIE92ZXJyaWRlcyB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgdW5kZXJsaW5lLlxuICAgKi9cbiAgdW5kZXJsaW5lU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogSWYgYG11bHRpcGxlYCBpcyB0cnVlLCBhbiBhcnJheSBvZiB0aGUgYHZhbHVlYHMgb2YgdGhlIHNlbGVjdGVkXG4gICAqIG1lbnUgaXRlbXMuIE90aGVyd2lzZSwgdGhlIGB2YWx1ZWAgb2YgdGhlIHNlbGVjdGVkIG1lbnUgaXRlbS5cbiAgICogSWYgcHJvdmlkZWQsIHRoZSBtZW51IHdpbGwgYmUgYSBjb250cm9sbGVkIGNvbXBvbmVudC5cbiAgICovXG4gIHZhbHVlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmFueVxufSA6IHt9O1xuZXhwb3J0cy5kZWZhdWx0ID0gRHJvcERvd25NZW51O1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMTUwOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblxudmFyIF9leHRlbmRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4dGVuZHMyKTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMik7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7XG5cbnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblxudmFyIF9pbmhlcml0czIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXG52YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cbnZhciBfc2ltcGxlQXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblxudmFyIF9zaW1wbGVBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2ltcGxlQXNzaWduKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbnZhciBfcmVhY3REb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblxudmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cbnZhciBfZXZlbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7XG5cbnZhciBfZXZlbnRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V2ZW50cyk7XG5cbnZhciBfcHJvcFR5cGVzMyA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXG52YXIgX3Byb3BUeXBlczQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMzKTtcblxudmFyIF9NZW51ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MSk7XG5cbnZhciBfTWVudTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9NZW51KTtcblxudmFyIF9Qb3BvdmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nyk7XG5cbnZhciBfUG9wb3ZlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Qb3BvdmVyKTtcblxudmFyIF93YXJuaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cbnZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIEljb25NZW51ID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoSWNvbk1lbnUsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEljb25NZW51KCkge1xuICAgIHZhciBfcmVmO1xuXG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIEljb25NZW51KTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoX3JlZiA9IEljb25NZW51Ll9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShJY29uTWVudSkpLmNhbGwuYXBwbHkoX3JlZiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLnN0YXRlID0ge1xuICAgICAgbWVudUluaXRpYWxseUtleWJvYXJkRm9jdXNlZDogZmFsc2UsXG4gICAgICBvcGVuOiBmYWxzZVxuICAgIH0sIF90aGlzLmhhbmRsZUl0ZW1Ub3VjaFRhcCA9IGZ1bmN0aW9uIChldmVudCwgY2hpbGQpIHtcbiAgICAgIGlmIChfdGhpcy5wcm9wcy50b3VjaFRhcENsb3NlRGVsYXkgIT09IDAgJiYgIWNoaWxkLnByb3BzLmhhc093blByb3BlcnR5KCdtZW51SXRlbXMnKSkge1xuICAgICAgICB2YXIgaXNLZXlib2FyZCA9IF9ldmVudHMyLmRlZmF1bHQuaXNLZXlib2FyZChldmVudCk7XG4gICAgICAgIF90aGlzLnRpbWVyQ2xvc2VJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzLmNsb3NlKGlzS2V5Ym9hcmQgPyAnZW50ZXInIDogJ2l0ZW1UYXAnLCBpc0tleWJvYXJkKTtcbiAgICAgICAgfSwgX3RoaXMucHJvcHMudG91Y2hUYXBDbG9zZURlbGF5KTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMucHJvcHMub25JdGVtVG91Y2hUYXAoZXZlbnQsIGNoaWxkKTtcbiAgICB9LCBfdGhpcy5oYW5kbGVSZXF1ZXN0Q2xvc2UgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICBfdGhpcy5jbG9zZShyZWFzb24pO1xuICAgIH0sIF90aGlzLmhhbmRsZUVzY0tleURvd25NZW51ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBfdGhpcy5jbG9zZSgnZXNjYXBlJywgZXZlbnQpO1xuICAgIH0sIF90ZW1wKSwgKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KShfdGhpcywgX3JldCk7XG4gIH1cblxuICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShJY29uTWVudSwgW3tcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICAgIGlmIChuZXh0UHJvcHMub3BlbiAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIG9wZW46IG5leHRQcm9wcy5vcGVuLFxuICAgICAgICAgIGFuY2hvckVsOiB0aGlzLnJlZnMuaWNvbk1lbnVDb250YWluZXJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbFVubW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyQ2xvc2VJZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnaXNPcGVuJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNPcGVuKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RhdGUub3BlbjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjbG9zZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlKHJlYXNvbiwgaXNLZXlib2FyZCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIGlmICghdGhpcy5zdGF0ZS5vcGVuKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMucHJvcHMub3BlbiAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLnByb3BzLm9uUmVxdWVzdENoYW5nZShmYWxzZSwgcmVhc29uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBvcGVuOiBmYWxzZSB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gU2V0IGZvY3VzIG9uIHRoZSBpY29uIGJ1dHRvbiB3aGVuIHRoZSBtZW51IGNsb3NlXG4gICAgICAgICAgaWYgKGlzS2V5Ym9hcmQpIHtcbiAgICAgICAgICAgIHZhciBpY29uQnV0dG9uID0gX3RoaXMyLnJlZnMuaWNvbkJ1dHRvbjtcbiAgICAgICAgICAgIF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZShpY29uQnV0dG9uKS5mb2N1cygpO1xuICAgICAgICAgICAgaWNvbkJ1dHRvbi5zZXRLZXlib2FyZEZvY3VzKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvcGVuJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb3BlbihyZWFzb24sIGV2ZW50KSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5vcGVuICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25SZXF1ZXN0Q2hhbmdlKHRydWUsIHJlYXNvbik7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIG1lbnVJbml0aWFsbHlLZXlib2FyZEZvY3VzZWQ6IF9ldmVudHMyLmRlZmF1bHQuaXNLZXlib2FyZChldmVudCksXG4gICAgICAgICAgYW5jaG9yRWw6IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBvcGVuOiB0cnVlLFxuICAgICAgICBtZW51SW5pdGlhbGx5S2V5Ym9hcmRGb2N1c2VkOiBfZXZlbnRzMi5kZWZhdWx0LmlzS2V5Ym9hcmQoZXZlbnQpLFxuICAgICAgICBhbmNob3JFbDogZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgfSk7XG5cbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGFuY2hvck9yaWdpbiA9IF9wcm9wcy5hbmNob3JPcmlnaW4sXG4gICAgICAgICAgY2xhc3NOYW1lID0gX3Byb3BzLmNsYXNzTmFtZSxcbiAgICAgICAgICBhbmltYXRlZCA9IF9wcm9wcy5hbmltYXRlZCxcbiAgICAgICAgICBhbmltYXRpb24gPSBfcHJvcHMuYW5pbWF0aW9uLFxuICAgICAgICAgIGljb25CdXR0b25FbGVtZW50ID0gX3Byb3BzLmljb25CdXR0b25FbGVtZW50LFxuICAgICAgICAgIGljb25TdHlsZSA9IF9wcm9wcy5pY29uU3R5bGUsXG4gICAgICAgICAgb25JdGVtVG91Y2hUYXAgPSBfcHJvcHMub25JdGVtVG91Y2hUYXAsXG4gICAgICAgICAgb25LZXlib2FyZEZvY3VzID0gX3Byb3BzLm9uS2V5Ym9hcmRGb2N1cyxcbiAgICAgICAgICBvbk1vdXNlRG93biA9IF9wcm9wcy5vbk1vdXNlRG93bixcbiAgICAgICAgICBvbk1vdXNlTGVhdmUgPSBfcHJvcHMub25Nb3VzZUxlYXZlLFxuICAgICAgICAgIG9uTW91c2VFbnRlciA9IF9wcm9wcy5vbk1vdXNlRW50ZXIsXG4gICAgICAgICAgb25Nb3VzZVVwID0gX3Byb3BzLm9uTW91c2VVcCxcbiAgICAgICAgICBvblJlcXVlc3RDaGFuZ2UgPSBfcHJvcHMub25SZXF1ZXN0Q2hhbmdlLFxuICAgICAgICAgIG9uVG91Y2hUYXAgPSBfcHJvcHMub25Ub3VjaFRhcCxcbiAgICAgICAgICBsaXN0U3R5bGUgPSBfcHJvcHMubGlzdFN0eWxlLFxuICAgICAgICAgIG1lbnVTdHlsZSA9IF9wcm9wcy5tZW51U3R5bGUsXG4gICAgICAgICAgc3R5bGUgPSBfcHJvcHMuc3R5bGUsXG4gICAgICAgICAgdGFyZ2V0T3JpZ2luID0gX3Byb3BzLnRhcmdldE9yaWdpbixcbiAgICAgICAgICB0b3VjaFRhcENsb3NlRGVsYXkgPSBfcHJvcHMudG91Y2hUYXBDbG9zZURlbGF5LFxuICAgICAgICAgIHVzZUxheWVyRm9yQ2xpY2tBd2F5ID0gX3Byb3BzLnVzZUxheWVyRm9yQ2xpY2tBd2F5LFxuICAgICAgICAgIG90aGVyID0gKDAsIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMuZGVmYXVsdCkoX3Byb3BzLCBbJ2FuY2hvck9yaWdpbicsICdjbGFzc05hbWUnLCAnYW5pbWF0ZWQnLCAnYW5pbWF0aW9uJywgJ2ljb25CdXR0b25FbGVtZW50JywgJ2ljb25TdHlsZScsICdvbkl0ZW1Ub3VjaFRhcCcsICdvbktleWJvYXJkRm9jdXMnLCAnb25Nb3VzZURvd24nLCAnb25Nb3VzZUxlYXZlJywgJ29uTW91c2VFbnRlcicsICdvbk1vdXNlVXAnLCAnb25SZXF1ZXN0Q2hhbmdlJywgJ29uVG91Y2hUYXAnLCAnbGlzdFN0eWxlJywgJ21lbnVTdHlsZScsICdzdHlsZScsICd0YXJnZXRPcmlnaW4nLCAndG91Y2hUYXBDbG9zZURlbGF5JywgJ3VzZUxheWVyRm9yQ2xpY2tBd2F5J10pO1xuICAgICAgdmFyIHByZXBhcmVTdHlsZXMgPSB0aGlzLmNvbnRleHQubXVpVGhlbWUucHJlcGFyZVN0eWxlcztcbiAgICAgIHZhciBfc3RhdGUgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgIG9wZW4gPSBfc3RhdGUub3BlbixcbiAgICAgICAgICBhbmNob3JFbCA9IF9zdGF0ZS5hbmNob3JFbDtcblxuXG4gICAgICB2YXIgc3R5bGVzID0ge1xuICAgICAgICByb290OiB7XG4gICAgICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZSdcbiAgICAgICAgfSxcbiAgICAgICAgbWVudToge1xuICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHZhciBtZXJnZWRSb290U3R5bGVzID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5yb290LCBzdHlsZSk7XG4gICAgICB2YXIgbWVyZ2VkTWVudVN0eWxlcyA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMubWVudSwgbWVudVN0eWxlKTtcblxuICAgICAgIGZhbHNlID8gKDAsIF93YXJuaW5nMi5kZWZhdWx0KShpY29uQnV0dG9uRWxlbWVudC50eXBlLm11aU5hbWUgIT09ICdTdmdJY29uJywgJ01hdGVyaWFsLVVJOiBZb3Ugc2hvdWQgbm90IHByb3ZpZGUgYW4gPFN2Z0ljb24gLz4gdG8gdGhlIFxcJ2ljb25CdXR0b25FbGVtZW50XFwnIHByb3BlcnR5IG9mIDxJY29uTWVudSAvPi5cXG5Zb3Ugc2hvdWxkIHdyYXBwZWQgaXQgd2l0aCBhbiA8SWNvbkJ1dHRvbiAvPi4nKSA6IHZvaWQgMDtcblxuICAgICAgdmFyIGljb25CdXR0b25Qcm9wcyA9IHtcbiAgICAgICAgb25LZXlib2FyZEZvY3VzOiBvbktleWJvYXJkRm9jdXMsXG4gICAgICAgIG9uVG91Y2hUYXA6IGZ1bmN0aW9uIG9uVG91Y2hUYXAoZXZlbnQpIHtcbiAgICAgICAgICBfdGhpczMub3BlbihfZXZlbnRzMi5kZWZhdWx0LmlzS2V5Ym9hcmQoZXZlbnQpID8gJ2tleWJvYXJkJyA6ICdpY29uVGFwJywgZXZlbnQpO1xuICAgICAgICAgIGlmIChpY29uQnV0dG9uRWxlbWVudC5wcm9wcy5vblRvdWNoVGFwKSB7XG4gICAgICAgICAgICBpY29uQnV0dG9uRWxlbWVudC5wcm9wcy5vblRvdWNoVGFwKGV2ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlZjogJ2ljb25CdXR0b24nXG4gICAgICB9O1xuICAgICAgaWYgKGljb25TdHlsZSB8fCBpY29uQnV0dG9uRWxlbWVudC5wcm9wcy5pY29uU3R5bGUpIHtcbiAgICAgICAgaWNvbkJ1dHRvblByb3BzLmljb25TdHlsZSA9IGljb25TdHlsZSA/ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgaWNvblN0eWxlLCBpY29uQnV0dG9uRWxlbWVudC5wcm9wcy5pY29uU3R5bGUpIDogaWNvbkJ1dHRvbkVsZW1lbnQucHJvcHMuaWNvblN0eWxlO1xuICAgICAgfVxuICAgICAgdmFyIGljb25CdXR0b24gPSBfcmVhY3QyLmRlZmF1bHQuY2xvbmVFbGVtZW50KGljb25CdXR0b25FbGVtZW50LCBpY29uQnV0dG9uUHJvcHMpO1xuXG4gICAgICB2YXIgbWVudSA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICBfTWVudTIuZGVmYXVsdCxcbiAgICAgICAgKDAsIF9leHRlbmRzMy5kZWZhdWx0KSh7fSwgb3RoZXIsIHtcbiAgICAgICAgICBpbml0aWFsbHlLZXlib2FyZEZvY3VzZWQ6IHRoaXMuc3RhdGUubWVudUluaXRpYWxseUtleWJvYXJkRm9jdXNlZCxcbiAgICAgICAgICBvbkVzY0tleURvd246IHRoaXMuaGFuZGxlRXNjS2V5RG93bk1lbnUsXG4gICAgICAgICAgb25JdGVtVG91Y2hUYXA6IHRoaXMuaGFuZGxlSXRlbVRvdWNoVGFwLFxuICAgICAgICAgIHN0eWxlOiBtZXJnZWRNZW51U3R5bGVzLFxuICAgICAgICAgIGxpc3RTdHlsZTogbGlzdFN0eWxlXG4gICAgICAgIH0pLFxuICAgICAgICB0aGlzLnByb3BzLmNoaWxkcmVuXG4gICAgICApO1xuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7XG4gICAgICAgICAgcmVmOiAnaWNvbk1lbnVDb250YWluZXInLFxuICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICAgIG9uTW91c2VEb3duOiBvbk1vdXNlRG93bixcbiAgICAgICAgICBvbk1vdXNlTGVhdmU6IG9uTW91c2VMZWF2ZSxcbiAgICAgICAgICBvbk1vdXNlRW50ZXI6IG9uTW91c2VFbnRlcixcbiAgICAgICAgICBvbk1vdXNlVXA6IG9uTW91c2VVcCxcbiAgICAgICAgICBvblRvdWNoVGFwOiBvblRvdWNoVGFwLFxuICAgICAgICAgIHN0eWxlOiBwcmVwYXJlU3R5bGVzKG1lcmdlZFJvb3RTdHlsZXMpXG4gICAgICAgIH0sXG4gICAgICAgIGljb25CdXR0b24sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIF9Qb3BvdmVyMi5kZWZhdWx0LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGFuY2hvck9yaWdpbjogYW5jaG9yT3JpZ2luLFxuICAgICAgICAgICAgdGFyZ2V0T3JpZ2luOiB0YXJnZXRPcmlnaW4sXG4gICAgICAgICAgICBvcGVuOiBvcGVuLFxuICAgICAgICAgICAgYW5jaG9yRWw6IGFuY2hvckVsLFxuICAgICAgICAgICAgY2hpbGRDb250ZXh0VHlwZXM6IHRoaXMuY29uc3RydWN0b3IuY2hpbGRDb250ZXh0VHlwZXMsXG4gICAgICAgICAgICB1c2VMYXllckZvckNsaWNrQXdheTogdXNlTGF5ZXJGb3JDbGlja0F3YXksXG4gICAgICAgICAgICBvblJlcXVlc3RDbG9zZTogdGhpcy5oYW5kbGVSZXF1ZXN0Q2xvc2UsXG4gICAgICAgICAgICBhbmltYXRlZDogYW5pbWF0ZWQsXG4gICAgICAgICAgICBhbmltYXRpb246IGFuaW1hdGlvbixcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuY29udGV4dFxuICAgICAgICAgIH0sXG4gICAgICAgICAgbWVudVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gSWNvbk1lbnU7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5JY29uTWVudS5tdWlOYW1lID0gJ0ljb25NZW51Jztcbkljb25NZW51LmRlZmF1bHRQcm9wcyA9IHtcbiAgYW5jaG9yT3JpZ2luOiB7XG4gICAgdmVydGljYWw6ICd0b3AnLFxuICAgIGhvcml6b250YWw6ICdsZWZ0J1xuICB9LFxuICBhbmltYXRlZDogdHJ1ZSxcbiAgbXVsdGlwbGU6IGZhbHNlLFxuICBvcGVuOiBudWxsLFxuICBvbkl0ZW1Ub3VjaFRhcDogZnVuY3Rpb24gb25JdGVtVG91Y2hUYXAoKSB7fSxcbiAgb25LZXlib2FyZEZvY3VzOiBmdW5jdGlvbiBvbktleWJvYXJkRm9jdXMoKSB7fSxcbiAgb25Nb3VzZURvd246IGZ1bmN0aW9uIG9uTW91c2VEb3duKCkge30sXG4gIG9uTW91c2VMZWF2ZTogZnVuY3Rpb24gb25Nb3VzZUxlYXZlKCkge30sXG4gIG9uTW91c2VFbnRlcjogZnVuY3Rpb24gb25Nb3VzZUVudGVyKCkge30sXG4gIG9uTW91c2VVcDogZnVuY3Rpb24gb25Nb3VzZVVwKCkge30sXG4gIG9uUmVxdWVzdENoYW5nZTogZnVuY3Rpb24gb25SZXF1ZXN0Q2hhbmdlKCkge30sXG4gIG9uVG91Y2hUYXA6IGZ1bmN0aW9uIG9uVG91Y2hUYXAoKSB7fSxcbiAgdGFyZ2V0T3JpZ2luOiB7XG4gICAgdmVydGljYWw6ICd0b3AnLFxuICAgIGhvcml6b250YWw6ICdsZWZ0J1xuICB9LFxuICB0b3VjaFRhcENsb3NlRGVsYXk6IDIwMCxcbiAgdXNlTGF5ZXJGb3JDbGlja0F3YXk6IGZhbHNlXG59O1xuSWNvbk1lbnUuY29udGV4dFR5cGVzID0ge1xuICBtdWlUaGVtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QuaXNSZXF1aXJlZFxufTtcbkljb25NZW51LnByb3BUeXBlcyA9ICBmYWxzZSA/IHtcbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIHBvaW50IG9uIHRoZSBpY29uIHdoZXJlIHRoZSBtZW51XG4gICAqIGB0YXJnZXRPcmlnaW5gIHdpbGwgYXR0YWNoLlxuICAgKiBPcHRpb25zOlxuICAgKiB2ZXJ0aWNhbDogW3RvcCwgY2VudGVyLCBib3R0b21dXG4gICAqIGhvcml6b250YWw6IFtsZWZ0LCBtaWRkbGUsIHJpZ2h0XS5cbiAgICovXG4gIGFuY2hvck9yaWdpbjogX3Byb3BUeXBlczQuZGVmYXVsdC5vcmlnaW4sXG4gIC8qKlxuICAgKiBJZiB0cnVlLCB0aGUgcG9wb3ZlciB3aWxsIGFwcGx5IHRyYW5zaXRpb25zIHdoZW5cbiAgICogaXQgZ2V0cyBhZGRlZCB0byB0aGUgRE9NLlxuICAgKi9cbiAgYW5pbWF0ZWQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBkZWZhdWx0IGFuaW1hdGlvbiBjb21wb25lbnQgdXNlZC5cbiAgICovXG4gIGFuaW1hdGlvbjogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogU2hvdWxkIGJlIHVzZWQgdG8gcGFzcyBgTWVudUl0ZW1gIGNvbXBvbmVudHMuXG4gICAqL1xuICBjaGlsZHJlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICAvKipcbiAgICogVGhlIENTUyBjbGFzcyBuYW1lIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBjbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogVGhpcyBpcyB0aGUgYEljb25CdXR0b25gIHRvIHJlbmRlci4gVGhpcyBidXR0b24gd2lsbCBvcGVuIHRoZSBtZW51LlxuICAgKi9cbiAgaWNvbkJ1dHRvbkVsZW1lbnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZWxlbWVudC5pc1JlcXVpcmVkLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIHVuZGVybHlpbmcgaWNvbiBlbGVtZW50LlxuICAgKi9cbiAgaWNvblN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSB1bmRlcmx5aW5nIGBMaXN0YCBlbGVtZW50LlxuICAgKi9cbiAgbGlzdFN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBtZW51IGVsZW1lbnQuXG4gICAqL1xuICBtZW51U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogSWYgdHJ1ZSwgdGhlIHZhbHVlIGNhbiBhbiBiZSBhcnJheSBhbmQgYWxsb3cgdGhlIG1lbnUgdG8gYmUgYSBtdWx0aS1zZWxlY3QuXG4gICAqL1xuICBtdWx0aXBsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gZmlyZWQgd2hlbiBhIG1lbnUgaXRlbSBpcyBzZWxlY3RlZCB3aXRoIGEgdG91Y2gtdGFwLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgVG91Y2hUYXAgZXZlbnQgdGFyZ2V0aW5nIHRoZSBzZWxlY3RlZCBtZW51IGl0ZW0gZWxlbWVudC5cbiAgICogQHBhcmFtIHtvYmplY3R9IGNoaWxkIFRoZSBzZWxlY3RlZCBlbGVtZW50LlxuICAgKi9cbiAgb25JdGVtVG91Y2hUYXA6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZpcmVkIHdoZW4gdGhlIGBJY29uQnV0dG9uYCBlbGVtZW50IGlzIGZvY3VzZWQgb3IgYmx1cnJlZCBieSB0aGUga2V5Ym9hcmQuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBgZm9jdXNgIG9yIGBibHVyYCBldmVudCB0YXJnZXRpbmcgdGhlIGBJY29uQnV0dG9uYCBlbGVtZW50LlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGtleWJvYXJkRm9jdXNlZCBJZiB0cnVlLCB0aGUgYEljb25CdXR0b25gIGVsZW1lbnQgaXMgZm9jdXNlZC5cbiAgICovXG4gIG9uS2V5Ym9hcmRGb2N1czogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKiogQGlnbm9yZSAqL1xuICBvbk1vdXNlRG93bjogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKiogQGlnbm9yZSAqL1xuICBvbk1vdXNlRW50ZXI6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqIEBpZ25vcmUgKi9cbiAgb25Nb3VzZUxlYXZlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKiBAaWdub3JlICovXG4gIG9uTW91c2VVcDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gZmlyZWQgd2hlbiB0aGUgYG9wZW5gIHN0YXRlIG9mIHRoZSBtZW51IGlzIHJlcXVlc3RlZCB0byBiZSBjaGFuZ2VkLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wZW4gSWYgdHJ1ZSwgdGhlIG1lbnUgd2FzIHJlcXVlc3RlZCB0byBiZSBvcGVuZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gVGhlIHJlYXNvbiBmb3IgdGhlIG9wZW4gb3IgY2xvc2UgcmVxdWVzdC4gUG9zc2libGUgdmFsdWVzIGFyZVxuICAgKiAna2V5Ym9hcmQnIGFuZCAnaWNvblRhcCcgZm9yIG9wZW4gcmVxdWVzdHM7ICdlbnRlcicsICdlc2NhcGUnLCAnaXRlbVRhcCcsIGFuZCAnY2xpY2tBd2F5J1xuICAgKiBmb3IgY2xvc2UgcmVxdWVzdHMuXG4gICAqL1xuICBvblJlcXVlc3RDaGFuZ2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZpcmVkIHdoZW4gdGhlIGBJY29uQnV0dG9uYCBlbGVtZW50IGlzIHRvdWNoLXRhcHBlZC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IFRvdWNoVGFwIGV2ZW50IHRhcmdldGluZyB0aGUgYEljb25CdXR0b25gIGVsZW1lbnQuXG4gICAqL1xuICBvblRvdWNoVGFwOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBJZiB0cnVlLCB0aGUgYEljb25NZW51YCBpcyBvcGVuZWQuXG4gICAqL1xuICBvcGVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhpcyBpcyB0aGUgcG9pbnQgb24gdGhlIG1lbnUgd2hpY2ggd2lsbCBzdGljayB0byB0aGUgbWVudVxuICAgKiBvcmlnaW4uXG4gICAqIE9wdGlvbnM6XG4gICAqIHZlcnRpY2FsOiBbdG9wLCBjZW50ZXIsIGJvdHRvbV1cbiAgICogaG9yaXpvbnRhbDogW2xlZnQsIG1pZGRsZSwgcmlnaHRdLlxuICAgKi9cbiAgdGFyZ2V0T3JpZ2luOiBfcHJvcFR5cGVzNC5kZWZhdWx0Lm9yaWdpbixcbiAgLyoqXG4gICAqIFNldHMgdGhlIGRlbGF5IGluIG1pbGxpc2Vjb25kcyBiZWZvcmUgY2xvc2luZyB0aGVcbiAgICogbWVudSB3aGVuIGFuIGl0ZW0gaXMgY2xpY2tlZC5cbiAgICogSWYgc2V0IHRvIDAgdGhlbiB0aGUgYXV0byBjbG9zZSBmdW5jdGlvbmFsaXR5XG4gICAqIHdpbGwgYmUgZGlzYWJsZWQuXG4gICAqL1xuICB0b3VjaFRhcENsb3NlRGVsYXk6IF9wcm9wVHlwZXMyLmRlZmF1bHQubnVtYmVyLFxuICAvKipcbiAgICogSWYgdHJ1ZSwgdGhlIHBvcG92ZXIgd2lsbCByZW5kZXIgb24gdG9wIG9mIGFuIGludmlzaWJsZVxuICAgKiBsYXllciwgd2hpY2ggd2lsbCBwcmV2ZW50IGNsaWNrcyB0byB0aGUgdW5kZXJseWluZyBlbGVtZW50cy5cbiAgICovXG4gIHVzZUxheWVyRm9yQ2xpY2tBd2F5OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2xcbn0gOiB7fTtcbmV4cG9ydHMuZGVmYXVsdCA9IEljb25NZW51O1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMTUxOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gZXhwb3J0cy5NZW51SXRlbSA9IGV4cG9ydHMuSWNvbk1lbnUgPSB1bmRlZmluZWQ7XG5cbnZhciBfSWNvbk1lbnUyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTApO1xuXG52YXIgX0ljb25NZW51MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ljb25NZW51Mik7XG5cbnZhciBfTWVudUl0ZW0yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MCk7XG5cbnZhciBfTWVudUl0ZW0zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTWVudUl0ZW0yKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZXhwb3J0cy5JY29uTWVudSA9IF9JY29uTWVudTMuZGVmYXVsdDtcbmV4cG9ydHMuTWVudUl0ZW0gPSBfTWVudUl0ZW0zLmRlZmF1bHQ7XG5leHBvcnRzLmRlZmF1bHQgPSBfSWNvbk1lbnUzLmRlZmF1bHQ7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAxNTI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXG52YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTtcblxudmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpO1xuXG52YXIgX2luaGVyaXRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cbnZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTtcblxudmFyIF9zaW1wbGVBc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXG52YXIgX3NpbXBsZUFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaW1wbGVBc3NpZ24pO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxudmFyIF90cmFuc2l0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXG52YXIgX3RyYW5zaXRpb25zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RyYW5zaXRpb25zKTtcblxudmFyIF9DbGlja0F3YXlMaXN0ZW5lciA9IF9fd2VicGFja19yZXF1aXJlX18oMTU2KTtcblxudmFyIF9DbGlja0F3YXlMaXN0ZW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9DbGlja0F3YXlMaXN0ZW5lcik7XG5cbnZhciBfU25hY2tiYXJCb2R5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTMpO1xuXG52YXIgX1NuYWNrYmFyQm9keTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TbmFja2JhckJvZHkpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBnZXRTdHlsZXMocHJvcHMsIGNvbnRleHQsIHN0YXRlKSB7XG4gIHZhciBfY29udGV4dCRtdWlUaGVtZSA9IGNvbnRleHQubXVpVGhlbWUsXG4gICAgICBkZXNrdG9wU3ViaGVhZGVySGVpZ2h0ID0gX2NvbnRleHQkbXVpVGhlbWUuYmFzZVRoZW1lLnNwYWNpbmcuZGVza3RvcFN1YmhlYWRlckhlaWdodCxcbiAgICAgIHpJbmRleCA9IF9jb250ZXh0JG11aVRoZW1lLnpJbmRleDtcbiAgdmFyIG9wZW4gPSBzdGF0ZS5vcGVuO1xuXG5cbiAgdmFyIHN0eWxlcyA9IHtcbiAgICByb290OiB7XG4gICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAgIGxlZnQ6ICc1MCUnLFxuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgYm90dG9tOiAwLFxuICAgICAgekluZGV4OiB6SW5kZXguc25hY2tiYXIsXG4gICAgICB2aXNpYmlsaXR5OiBvcGVuID8gJ3Zpc2libGUnIDogJ2hpZGRlbicsXG4gICAgICB0cmFuc2Zvcm06IG9wZW4gPyAndHJhbnNsYXRlKC01MCUsIDApJyA6ICd0cmFuc2xhdGUoLTUwJSwgJyArIGRlc2t0b3BTdWJoZWFkZXJIZWlnaHQgKyAncHgpJyxcbiAgICAgIHRyYW5zaXRpb246IF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KCc0MDBtcycsICd0cmFuc2Zvcm0nKSArICcsICcgKyBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnNDAwbXMnLCAndmlzaWJpbGl0eScpXG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBzdHlsZXM7XG59XG5cbnZhciBTbmFja2JhciA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKFNuYWNrYmFyLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBTbmFja2JhcigpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBTbmFja2Jhcik7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKF9yZWYgPSBTbmFja2Jhci5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoU25hY2tiYXIpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5jb21wb25lbnRDbGlja0F3YXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoX3RoaXMudGltZXJUcmFuc2l0aW9uSWQpIHtcbiAgICAgICAgLy8gSWYgdHJhbnNpdGlvbmluZywgZG9uJ3QgY2xvc2UgdGhlIHNuYWNrYmFyLlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChfdGhpcy5wcm9wcy5vcGVuICE9PSBudWxsICYmIF90aGlzLnByb3BzLm9uUmVxdWVzdENsb3NlKSB7XG4gICAgICAgIF90aGlzLnByb3BzLm9uUmVxdWVzdENsb3NlKCdjbGlja2F3YXknKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF90aGlzLnNldFN0YXRlKHsgb3BlbjogZmFsc2UgfSk7XG4gICAgICB9XG4gICAgfSwgX3RlbXApLCAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKFNuYWNrYmFyLCBbe1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBvcGVuOiB0aGlzLnByb3BzLm9wZW4sXG4gICAgICAgIG1lc3NhZ2U6IHRoaXMucHJvcHMubWVzc2FnZSxcbiAgICAgICAgYWN0aW9uOiB0aGlzLnByb3BzLmFjdGlvblxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIGlmICh0aGlzLnN0YXRlLm9wZW4pIHtcbiAgICAgICAgdGhpcy5zZXRBdXRvSGlkZVRpbWVyKCk7XG4gICAgICAgIHRoaXMuc2V0VHJhbnNpdGlvblRpbWVyKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMucHJvcHMub3BlbiAmJiBuZXh0UHJvcHMub3BlbiAmJiAobmV4dFByb3BzLm1lc3NhZ2UgIT09IHRoaXMucHJvcHMubWVzc2FnZSB8fCBuZXh0UHJvcHMuYWN0aW9uICE9PSB0aGlzLnByb3BzLmFjdGlvbikpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgb3BlbjogZmFsc2VcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJPbmVBdFRoZVRpbWVJZCk7XG4gICAgICAgIHRoaXMudGltZXJPbmVBdFRoZVRpbWVJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBtZXNzYWdlOiBuZXh0UHJvcHMubWVzc2FnZSxcbiAgICAgICAgICAgIGFjdGlvbjogbmV4dFByb3BzLmFjdGlvbixcbiAgICAgICAgICAgIG9wZW46IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgNDAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBvcGVuID0gbmV4dFByb3BzLm9wZW47XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgb3Blbjogb3BlbiAhPT0gbnVsbCA/IG9wZW4gOiB0aGlzLnN0YXRlLm9wZW4sXG4gICAgICAgICAgbWVzc2FnZTogbmV4dFByb3BzLm1lc3NhZ2UsXG4gICAgICAgICAgYWN0aW9uOiBuZXh0UHJvcHMuYWN0aW9uXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudERpZFVwZGF0ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgaWYgKHByZXZTdGF0ZS5vcGVuICE9PSB0aGlzLnN0YXRlLm9wZW4pIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUub3Blbikge1xuICAgICAgICAgIHRoaXMuc2V0QXV0b0hpZGVUaW1lcigpO1xuICAgICAgICAgIHRoaXMuc2V0VHJhbnNpdGlvblRpbWVyKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJBdXRvSGlkZUlkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxVbm1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lckF1dG9IaWRlSWQpO1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJUcmFuc2l0aW9uSWQpO1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJPbmVBdFRoZVRpbWVJZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2V0QXV0b0hpZGVUaW1lcicsXG5cblxuICAgIC8vIFRpbWVyIHRoYXQgY29udHJvbHMgZGVsYXkgYmVmb3JlIHNuYWNrYmFyIGF1dG8gaGlkZXNcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0QXV0b0hpZGVUaW1lcigpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICB2YXIgYXV0b0hpZGVEdXJhdGlvbiA9IHRoaXMucHJvcHMuYXV0b0hpZGVEdXJhdGlvbjtcblxuICAgICAgaWYgKGF1dG9IaWRlRHVyYXRpb24gPiAwKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyQXV0b0hpZGVJZCk7XG4gICAgICAgIHRoaXMudGltZXJBdXRvSGlkZUlkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKF90aGlzMy5wcm9wcy5vcGVuICE9PSBudWxsICYmIF90aGlzMy5wcm9wcy5vblJlcXVlc3RDbG9zZSkge1xuICAgICAgICAgICAgX3RoaXMzLnByb3BzLm9uUmVxdWVzdENsb3NlKCd0aW1lb3V0Jyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzMy5zZXRTdGF0ZSh7IG9wZW46IGZhbHNlIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgYXV0b0hpZGVEdXJhdGlvbik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVGltZXIgdGhhdCBjb250cm9scyBkZWxheSBiZWZvcmUgY2xpY2stYXdheSBldmVudHMgYXJlIGNhcHR1cmVkIChiYXNlZCBvbiB3aGVuIGFuaW1hdGlvbiBjb21wbGV0ZXMpXG5cbiAgfSwge1xuICAgIGtleTogJ3NldFRyYW5zaXRpb25UaW1lcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldFRyYW5zaXRpb25UaW1lcigpIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICB0aGlzLnRpbWVyVHJhbnNpdGlvbklkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzNC50aW1lclRyYW5zaXRpb25JZCA9IHVuZGVmaW5lZDtcbiAgICAgIH0sIDQwMCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgYXV0b0hpZGVEdXJhdGlvbiA9IF9wcm9wcy5hdXRvSGlkZUR1cmF0aW9uLFxuICAgICAgICAgIGNvbnRlbnRTdHlsZSA9IF9wcm9wcy5jb250ZW50U3R5bGUsXG4gICAgICAgICAgYm9keVN0eWxlID0gX3Byb3BzLmJvZHlTdHlsZSxcbiAgICAgICAgICBtZXNzYWdlUHJvcCA9IF9wcm9wcy5tZXNzYWdlLFxuICAgICAgICAgIG9uUmVxdWVzdENsb3NlID0gX3Byb3BzLm9uUmVxdWVzdENsb3NlLFxuICAgICAgICAgIG9uQWN0aW9uVG91Y2hUYXAgPSBfcHJvcHMub25BY3Rpb25Ub3VjaFRhcCxcbiAgICAgICAgICBzdHlsZSA9IF9wcm9wcy5zdHlsZSxcbiAgICAgICAgICBvdGhlciA9ICgwLCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzLmRlZmF1bHQpKF9wcm9wcywgWydhdXRvSGlkZUR1cmF0aW9uJywgJ2NvbnRlbnRTdHlsZScsICdib2R5U3R5bGUnLCAnbWVzc2FnZScsICdvblJlcXVlc3RDbG9zZScsICdvbkFjdGlvblRvdWNoVGFwJywgJ3N0eWxlJ10pO1xuICAgICAgdmFyIF9zdGF0ZSA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgYWN0aW9uID0gX3N0YXRlLmFjdGlvbixcbiAgICAgICAgICBtZXNzYWdlID0gX3N0YXRlLm1lc3NhZ2UsXG4gICAgICAgICAgb3BlbiA9IF9zdGF0ZS5vcGVuO1xuICAgICAgdmFyIHByZXBhcmVTdHlsZXMgPSB0aGlzLmNvbnRleHQubXVpVGhlbWUucHJlcGFyZVN0eWxlcztcblxuICAgICAgdmFyIHN0eWxlcyA9IGdldFN0eWxlcyh0aGlzLnByb3BzLCB0aGlzLmNvbnRleHQsIHRoaXMuc3RhdGUpO1xuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgIF9DbGlja0F3YXlMaXN0ZW5lcjIuZGVmYXVsdCxcbiAgICAgICAgeyBvbkNsaWNrQXdheTogb3BlbiA/IHRoaXMuY29tcG9uZW50Q2xpY2tBd2F5IDogbnVsbCB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBvdGhlciwgeyBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLnJvb3QsIHN0eWxlKSkgfSksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1NuYWNrYmFyQm9keTIuZGVmYXVsdCwge1xuICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgICAgICBjb250ZW50U3R5bGU6IGNvbnRlbnRTdHlsZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICBvcGVuOiBvcGVuLFxuICAgICAgICAgICAgb25BY3Rpb25Ub3VjaFRhcDogb25BY3Rpb25Ub3VjaFRhcCxcbiAgICAgICAgICAgIHN0eWxlOiBib2R5U3R5bGVcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gU25hY2tiYXI7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5TbmFja2Jhci5jb250ZXh0VHlwZXMgPSB7XG4gIG11aVRoZW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkXG59O1xuU25hY2tiYXIucHJvcFR5cGVzID0gIGZhbHNlID8ge1xuICAvKipcbiAgICogVGhlIGxhYmVsIGZvciB0aGUgYWN0aW9uIG9uIHRoZSBzbmFja2Jhci5cbiAgICovXG4gIGFjdGlvbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gd2FpdCBiZWZvcmUgYXV0b21hdGljYWxseSBkaXNtaXNzaW5nLlxuICAgKiBJZiBubyB2YWx1ZSBpcyBzcGVjaWZpZWQgdGhlIHNuYWNrYmFyIHdpbGwgZGlzbWlzcyBub3JtYWxseS5cbiAgICogSWYgYSB2YWx1ZSBpcyBwcm92aWRlZCB0aGUgc25hY2tiYXIgY2FuIHN0aWxsIGJlIGRpc21pc3NlZCBub3JtYWxseS5cbiAgICogSWYgYSBzbmFja2JhciBpcyBkaXNtaXNzZWQgYmVmb3JlIHRoZSB0aW1lciBleHBpcmVzLCB0aGUgdGltZXIgd2lsbCBiZSBjbGVhcmVkLlxuICAgKi9cbiAgYXV0b0hpZGVEdXJhdGlvbjogX3Byb3BUeXBlczIuZGVmYXVsdC5udW1iZXIsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgYm9keSBlbGVtZW50LlxuICAgKi9cbiAgYm9keVN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIFRoZSBjc3MgY2xhc3MgbmFtZSBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgY2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBjb250ZW50IGVsZW1lbnQuXG4gICAqL1xuICBjb250ZW50U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhlIG1lc3NhZ2UgdG8gYmUgZGlzcGxheWVkLlxuICAgKlxuICAgKiAoTm90ZTogSWYgdGhlIG1lc3NhZ2UgaXMgYW4gZWxlbWVudCBvciBhcnJheSwgYW5kIHRoZSBgU25hY2tiYXJgIG1heSByZS1yZW5kZXIgd2hpbGUgaXQgaXMgc3RpbGwgb3BlbixcbiAgICogZW5zdXJlIHRoYXQgdGhlIHNhbWUgb2JqZWN0IHJlbWFpbnMgYXMgdGhlIGBtZXNzYWdlYCBwcm9wZXJ0eSBpZiB5b3Ugd2FudCB0byBhdm9pZCB0aGUgYFNuYWNrYmFyYCBoaWRpbmcgYW5kXG4gICAqIHNob3dpbmcgYWdhaW4pXG4gICAqL1xuICBtZXNzYWdlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUuaXNSZXF1aXJlZCxcbiAgLyoqXG4gICAqIEZpcmVkIHdoZW4gdGhlIGFjdGlvbiBidXR0b24gaXMgdG91Y2h0YXBwZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBBY3Rpb24gYnV0dG9uIGV2ZW50LlxuICAgKi9cbiAgb25BY3Rpb25Ub3VjaFRhcDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogRmlyZWQgd2hlbiB0aGUgYFNuYWNrYmFyYCBpcyByZXF1ZXN0ZWQgdG8gYmUgY2xvc2VkIGJ5IGEgY2xpY2sgb3V0c2lkZSB0aGUgYFNuYWNrYmFyYCwgb3IgYWZ0ZXIgdGhlXG4gICAqIGBhdXRvSGlkZUR1cmF0aW9uYCB0aW1lciBleHBpcmVzLlxuICAgKlxuICAgKiBUeXBpY2FsbHkgYG9uUmVxdWVzdENsb3NlYCBpcyB1c2VkIHRvIHNldCBzdGF0ZSBpbiB0aGUgcGFyZW50IGNvbXBvbmVudCwgd2hpY2ggaXMgdXNlZCB0byBjb250cm9sIHRoZSBgU25hY2tiYXJgXG4gICAqIGBvcGVuYCBwcm9wLlxuICAgKlxuICAgKiBUaGUgYHJlYXNvbmAgcGFyYW1ldGVyIGNhbiBvcHRpb25hbGx5IGJlIHVzZWQgdG8gY29udHJvbCB0aGUgcmVzcG9uc2UgdG8gYG9uUmVxdWVzdENsb3NlYCxcbiAgICogZm9yIGV4YW1wbGUgaWdub3JpbmcgYGNsaWNrYXdheWAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gQ2FuIGJlOmBcInRpbWVvdXRcImAgKGBhdXRvSGlkZUR1cmF0aW9uYCBleHBpcmVkKSBvcjogYFwiY2xpY2thd2F5XCJgXG4gICAqL1xuICBvblJlcXVlc3RDbG9zZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogQ29udHJvbHMgd2hldGhlciB0aGUgYFNuYWNrYmFyYCBpcyBvcGVuZWQgb3Igbm90LlxuICAgKi9cbiAgb3BlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLmlzUmVxdWlyZWQsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0XG59IDoge307XG5leHBvcnRzLmRlZmF1bHQgPSBTbmFja2JhcjtcblxuLyoqKi8gfSksXG5cbi8qKiovIDE1Mzpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuU25hY2tiYXJCb2R5ID0gdW5kZWZpbmVkO1xuXG52YXIgX2V4dGVuZHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblxudmFyIF9leHRlbmRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4dGVuZHMyKTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMik7XG5cbnZhciBfc2ltcGxlQXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblxudmFyIF9zaW1wbGVBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2ltcGxlQXNzaWduKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbnZhciBfdHJhbnNpdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblxudmFyIF90cmFuc2l0aW9uczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90cmFuc2l0aW9ucyk7XG5cbnZhciBfd2l0aFdpZHRoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjkpO1xuXG52YXIgX3dpdGhXaWR0aDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93aXRoV2lkdGgpO1xuXG52YXIgX0ZsYXRCdXR0b24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblxudmFyIF9GbGF0QnV0dG9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ZsYXRCdXR0b24pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBnZXRTdHlsZXMocHJvcHMsIGNvbnRleHQpIHtcbiAgdmFyIG9wZW4gPSBwcm9wcy5vcGVuLFxuICAgICAgd2lkdGggPSBwcm9wcy53aWR0aDtcbiAgdmFyIF9jb250ZXh0JG11aVRoZW1lID0gY29udGV4dC5tdWlUaGVtZSxcbiAgICAgIF9jb250ZXh0JG11aVRoZW1lJGJhcyA9IF9jb250ZXh0JG11aVRoZW1lLmJhc2VUaGVtZSxcbiAgICAgIF9jb250ZXh0JG11aVRoZW1lJGJhczIgPSBfY29udGV4dCRtdWlUaGVtZSRiYXMuc3BhY2luZyxcbiAgICAgIGRlc2t0b3BHdXR0ZXIgPSBfY29udGV4dCRtdWlUaGVtZSRiYXMyLmRlc2t0b3BHdXR0ZXIsXG4gICAgICBkZXNrdG9wU3ViaGVhZGVySGVpZ2h0ID0gX2NvbnRleHQkbXVpVGhlbWUkYmFzMi5kZXNrdG9wU3ViaGVhZGVySGVpZ2h0LFxuICAgICAgZm9udEZhbWlseSA9IF9jb250ZXh0JG11aVRoZW1lJGJhcy5mb250RmFtaWx5LFxuICAgICAgX2NvbnRleHQkbXVpVGhlbWUkc25hID0gX2NvbnRleHQkbXVpVGhlbWUuc25hY2tiYXIsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3IgPSBfY29udGV4dCRtdWlUaGVtZSRzbmEuYmFja2dyb3VuZENvbG9yLFxuICAgICAgdGV4dENvbG9yID0gX2NvbnRleHQkbXVpVGhlbWUkc25hLnRleHRDb2xvcixcbiAgICAgIGFjdGlvbkNvbG9yID0gX2NvbnRleHQkbXVpVGhlbWUkc25hLmFjdGlvbkNvbG9yLFxuICAgICAgYm9yZGVyUmFkaXVzID0gX2NvbnRleHQkbXVpVGhlbWUuYm9yZGVyUmFkaXVzO1xuXG5cbiAgdmFyIGlzU21hbGwgPSB3aWR0aCA9PT0gX3dpdGhXaWR0aC5TTUFMTDtcblxuICB2YXIgc3R5bGVzID0ge1xuICAgIHJvb3Q6IHtcbiAgICAgIGZvbnRGYW1pbHk6IGZvbnRGYW1pbHksXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJhY2tncm91bmRDb2xvcixcbiAgICAgIHBhZGRpbmc6ICcwICcgKyBkZXNrdG9wR3V0dGVyICsgJ3B4JyxcbiAgICAgIGhlaWdodDogZGVza3RvcFN1YmhlYWRlckhlaWdodCxcbiAgICAgIGxpbmVIZWlnaHQ6IGRlc2t0b3BTdWJoZWFkZXJIZWlnaHQgKyAncHgnLFxuICAgICAgYm9yZGVyUmFkaXVzOiBpc1NtYWxsID8gMCA6IGJvcmRlclJhZGl1cyxcbiAgICAgIG1heFdpZHRoOiBpc1NtYWxsID8gJ2luaGVyaXQnIDogNTY4LFxuICAgICAgbWluV2lkdGg6IGlzU21hbGwgPyAnaW5oZXJpdCcgOiAyODgsXG4gICAgICB3aWR0aDogaXNTbWFsbCA/ICdjYWxjKDEwMHZ3IC0gJyArIGRlc2t0b3BHdXR0ZXIgKiAyICsgJ3B4KScgOiAnYXV0bycsXG4gICAgICBmbGV4R3JvdzogaXNTbWFsbCA/IDEgOiAwXG4gICAgfSxcbiAgICBjb250ZW50OiB7XG4gICAgICBmb250U2l6ZTogMTQsXG4gICAgICBjb2xvcjogdGV4dENvbG9yLFxuICAgICAgb3BhY2l0eTogb3BlbiA/IDEgOiAwLFxuICAgICAgdHJhbnNpdGlvbjogb3BlbiA/IF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KCc1MDBtcycsICdvcGFjaXR5JywgJzEwMG1zJykgOiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnNDAwbXMnLCAnb3BhY2l0eScpXG4gICAgfSxcbiAgICBhY3Rpb246IHtcbiAgICAgIGNvbG9yOiBhY3Rpb25Db2xvcixcbiAgICAgIGZsb2F0OiAncmlnaHQnLFxuICAgICAgbWFyZ2luVG9wOiA2LFxuICAgICAgbWFyZ2luUmlnaHQ6IC0xNixcbiAgICAgIG1hcmdpbkxlZnQ6IGRlc2t0b3BHdXR0ZXIsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd0cmFuc3BhcmVudCdcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHN0eWxlcztcbn1cblxudmFyIFNuYWNrYmFyQm9keSA9IGZ1bmN0aW9uIFNuYWNrYmFyQm9keShwcm9wcywgY29udGV4dCkge1xuICB2YXIgYWN0aW9uID0gcHJvcHMuYWN0aW9uLFxuICAgICAgY29udGVudFN0eWxlID0gcHJvcHMuY29udGVudFN0eWxlLFxuICAgICAgbWVzc2FnZSA9IHByb3BzLm1lc3NhZ2UsXG4gICAgICBvcGVuID0gcHJvcHMub3BlbixcbiAgICAgIG9uQWN0aW9uVG91Y2hUYXAgPSBwcm9wcy5vbkFjdGlvblRvdWNoVGFwLFxuICAgICAgc3R5bGUgPSBwcm9wcy5zdHlsZSxcbiAgICAgIG90aGVyID0gKDAsIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMuZGVmYXVsdCkocHJvcHMsIFsnYWN0aW9uJywgJ2NvbnRlbnRTdHlsZScsICdtZXNzYWdlJywgJ29wZW4nLCAnb25BY3Rpb25Ub3VjaFRhcCcsICdzdHlsZSddKTtcbiAgdmFyIHByZXBhcmVTdHlsZXMgPSBjb250ZXh0Lm11aVRoZW1lLnByZXBhcmVTdHlsZXM7XG5cbiAgdmFyIHN0eWxlcyA9IGdldFN0eWxlcyhwcm9wcywgY29udGV4dCk7XG5cbiAgdmFyIGFjdGlvbkJ1dHRvbiA9IGFjdGlvbiAmJiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfRmxhdEJ1dHRvbjIuZGVmYXVsdCwge1xuICAgIHN0eWxlOiBzdHlsZXMuYWN0aW9uLFxuICAgIGxhYmVsOiBhY3Rpb24sXG4gICAgb25Ub3VjaFRhcDogb25BY3Rpb25Ub3VjaFRhcFxuICB9KTtcblxuICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgJ2RpdicsXG4gICAgKDAsIF9leHRlbmRzMy5kZWZhdWx0KSh7fSwgb3RoZXIsIHsgc3R5bGU6IHByZXBhcmVTdHlsZXMoKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5yb290LCBzdHlsZSkpIH0pLFxuICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgJ2RpdicsXG4gICAgICB7IHN0eWxlOiBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMuY29udGVudCwgY29udGVudFN0eWxlKSkgfSxcbiAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnc3BhbicsXG4gICAgICAgIG51bGwsXG4gICAgICAgIG1lc3NhZ2VcbiAgICAgICksXG4gICAgICBhY3Rpb25CdXR0b25cbiAgICApXG4gICk7XG59O1xuXG5leHBvcnRzLlNuYWNrYmFyQm9keSA9IFNuYWNrYmFyQm9keTtcblNuYWNrYmFyQm9keS5wcm9wVHlwZXMgPSAgZmFsc2UgPyB7XG4gIC8qKlxuICAgKiBUaGUgbGFiZWwgZm9yIHRoZSBhY3Rpb24gb24gdGhlIHNuYWNrYmFyLlxuICAgKi9cbiAgYWN0aW9uOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgY29udGVudCBlbGVtZW50LlxuICAgKi9cbiAgY29udGVudFN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIFRoZSBtZXNzYWdlIHRvIGJlIGRpc3BsYXllZC5cbiAgICpcbiAgICogKE5vdGU6IElmIHRoZSBtZXNzYWdlIGlzIGFuIGVsZW1lbnQgb3IgYXJyYXksIGFuZCB0aGUgYFNuYWNrYmFyYCBtYXkgcmUtcmVuZGVyIHdoaWxlIGl0IGlzIHN0aWxsIG9wZW4sXG4gICAqIGVuc3VyZSB0aGF0IHRoZSBzYW1lIG9iamVjdCByZW1haW5zIGFzIHRoZSBgbWVzc2FnZWAgcHJvcGVydHkgaWYgeW91IHdhbnQgdG8gYXZvaWQgdGhlIGBTbmFja2JhcmAgaGlkaW5nIGFuZFxuICAgKiBzaG93aW5nIGFnYWluKVxuICAgKi9cbiAgbWVzc2FnZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLmlzUmVxdWlyZWQsXG4gIC8qKlxuICAgKiBGaXJlZCB3aGVuIHRoZSBhY3Rpb24gYnV0dG9uIGlzIHRvdWNodGFwcGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgQWN0aW9uIGJ1dHRvbiBldmVudC5cbiAgICovXG4gIG9uQWN0aW9uVG91Y2hUYXA6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICogQ29udHJvbHMgd2hldGhlciB0aGUgYFNuYWNrYmFyYCBpcyBvcGVuZWQgb3Igbm90LlxuICAgKi9cbiAgb3BlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLmlzUmVxdWlyZWQsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKiBXaWR0aCBvZiB0aGUgc2NyZWVuLlxuICAgKi9cbiAgd2lkdGg6IF9wcm9wVHlwZXMyLmRlZmF1bHQubnVtYmVyLmlzUmVxdWlyZWRcbn0gOiB7fTtcblxuU25hY2tiYXJCb2R5LmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9ICgwLCBfd2l0aFdpZHRoMi5kZWZhdWx0KSgpKFNuYWNrYmFyQm9keSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAxNTQ6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RXaXRob3V0UHJvcGVydGllczIpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7XG5cbnZhciBfaW5oZXJpdHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG52YXIgX3NpbXBsZUFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cbnZhciBfc2ltcGxlQXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NpbXBsZUFzc2lnbik7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqICBCZWZvcmVBZnRlcldyYXBwZXJcbiAqICAgIEFuIGFsdGVybmF0aXZlIGZvciB0aGUgOjpiZWZvcmUgYW5kIDo6YWZ0ZXIgY3NzIHBzZXVkby1lbGVtZW50cyBmb3JcbiAqICAgIGNvbXBvbmVudHMgd2hvc2Ugc3R5bGVzIGFyZSBkZWZpbmVkIGluIGphdmFzY3JpcHQgaW5zdGVhZCBvZiBjc3MuXG4gKlxuICogIFVzYWdlOiBGb3IgdGhlIGVsZW1lbnQgdGhhdCB3ZSB3YW50IHRvIGFwcGx5IGJlZm9yZSBhbmQgYWZ0ZXIgZWxlbWVudHMgdG8sXG4gKiAgICB3cmFwIGl0cyBjaGlsZHJlbiB3aXRoIEJlZm9yZUFmdGVyV3JhcHBlci4gRm9yIGV4YW1wbGU6XG4gKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQYXBlcj5cbiAqICA8UGFwZXI+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+IC8vIFNlZSBub3RpY2VcbiAqICAgIDxCZWZvcmVBZnRlcldyYXBwZXI+ICAgICAgICByZW5kZXJzICAgICAgICAgPGRpdi8+IC8vIGJlZm9yZSBlbGVtZW50XG4gKiAgICAgIFtjaGlsZHJlbiBvZiBwYXBlcl0gICAgICAgLS0tLS0tPiAgICAgICAgIFtjaGlsZHJlbiBvZiBwYXBlcl1cbiAqICAgIDwvQmVmb3JlQWZ0ZXJXcmFwcGVyPiAgICAgICAgICAgICAgICAgICAgICAgPGRpdi8+IC8vIGFmdGVyIGVsZW1lbnRcbiAqICA8L1BhcGVyPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvUGFwZXI+XG4gKlxuICogIE5vdGljZTogTm90aWNlIHRoYXQgdGhpcyBkaXYgYnVuZGxlcyB0b2dldGhlciBvdXIgZWxlbWVudHMuIElmIHRoZSBlbGVtZW50XG4gKiAgICB0aGF0IHdlIHdhbnQgdG8gYXBwbHkgYmVmb3JlIGFuZCBhZnRlciBlbGVtZW50cyBpcyBhIEhUTUwgdGFnIChpLmUuIGFcbiAqICAgIGRpdiwgcCwgb3IgYnV0dG9uIHRhZyksIHdlIGNhbiBhdm9pZCB0aGlzIGV4dHJhIG5lc3RpbmcgYnkgcGFzc2luZyB1c2luZ1xuICogICAgdGhlIEJlZm9yZUFmdGVyV3JhcHBlciBpbiBwbGFjZSBvZiBzYWlkIHRhZyBsaWtlIHNvOlxuICpcbiAqICA8cD5cbiAqICAgIDxCZWZvcmVBZnRlcldyYXBwZXI+ICAgZG8gdGhpcyBpbnN0ZWFkICAgPEJlZm9yZUFmdGVyV3JhcHBlciBlbGVtZW50VHlwZT0ncCc+XG4gKiAgICAgIFtjaGlsZHJlbiBvZiBwXSAgICAgICAgICAtLS0tLS0+ICAgICAgICAgW2NoaWxkcmVuIG9mIHBdXG4gKiAgICA8L0JlZm9yZUFmdGVyV3JhcHBlcj4gICAgICAgICAgICAgICAgICAgIDwvQmVmb3JlQWZ0ZXJXcmFwcGVyPlxuICogIDwvcD5cbiAqXG4gKiAgQmVmb3JlQWZ0ZXJXcmFwcGVyIGZlYXR1cmVzIHNwcmVhZCBmdW5jdGlvbmFsaXR5LiBUaGlzIG1lYW5zIHRoYXQgd2UgY2FuXG4gKiAgcGFzcyBIVE1MIHRhZyBwcm9wZXJ0aWVzIGRpcmVjdGx5IGludG8gdGhlIEJlZm9yZUFmdGVyV3JhcHBlciB0YWcuXG4gKlxuICogIFdoZW4gdXNpbmcgQmVmb3JlQWZ0ZXJXcmFwcGVyLCBlbnN1cmUgdGhhdCB0aGUgcGFyZW50IG9mIHRoZSBiZWZvcmVFbGVtZW50XG4gKiAgYW5kIGFmdGVyRWxlbWVudCBoYXZlIGEgZGVmaW5lZCBzdHlsZSBwb3NpdGlvbi5cbiAqL1xuXG52YXIgc3R5bGVzID0ge1xuICBib3g6IHtcbiAgICBib3hTaXppbmc6ICdib3JkZXItYm94J1xuICB9XG59O1xuXG52YXIgQmVmb3JlQWZ0ZXJXcmFwcGVyID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoQmVmb3JlQWZ0ZXJXcmFwcGVyLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBCZWZvcmVBZnRlcldyYXBwZXIoKSB7XG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgQmVmb3JlQWZ0ZXJXcmFwcGVyKTtcbiAgICByZXR1cm4gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoQmVmb3JlQWZ0ZXJXcmFwcGVyLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShCZWZvcmVBZnRlcldyYXBwZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKEJlZm9yZUFmdGVyV3JhcHBlciwgW3tcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBiZWZvcmVTdHlsZSA9IF9wcm9wcy5iZWZvcmVTdHlsZSxcbiAgICAgICAgICBhZnRlclN0eWxlID0gX3Byb3BzLmFmdGVyU3R5bGUsXG4gICAgICAgICAgYmVmb3JlRWxlbWVudFR5cGUgPSBfcHJvcHMuYmVmb3JlRWxlbWVudFR5cGUsXG4gICAgICAgICAgYWZ0ZXJFbGVtZW50VHlwZSA9IF9wcm9wcy5hZnRlckVsZW1lbnRUeXBlLFxuICAgICAgICAgIGVsZW1lbnRUeXBlID0gX3Byb3BzLmVsZW1lbnRUeXBlLFxuICAgICAgICAgIG90aGVyID0gKDAsIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMuZGVmYXVsdCkoX3Byb3BzLCBbJ2JlZm9yZVN0eWxlJywgJ2FmdGVyU3R5bGUnLCAnYmVmb3JlRWxlbWVudFR5cGUnLCAnYWZ0ZXJFbGVtZW50VHlwZScsICdlbGVtZW50VHlwZSddKTtcbiAgICAgIHZhciBwcmVwYXJlU3R5bGVzID0gdGhpcy5jb250ZXh0Lm11aVRoZW1lLnByZXBhcmVTdHlsZXM7XG5cblxuICAgICAgdmFyIGJlZm9yZUVsZW1lbnQgPSB2b2lkIDA7XG4gICAgICB2YXIgYWZ0ZXJFbGVtZW50ID0gdm9pZCAwO1xuXG4gICAgICBpZiAoYmVmb3JlU3R5bGUpIHtcbiAgICAgICAgYmVmb3JlRWxlbWVudCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KHRoaXMucHJvcHMuYmVmb3JlRWxlbWVudFR5cGUsIHtcbiAgICAgICAgICBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe30sIHN0eWxlcy5ib3gsIGJlZm9yZVN0eWxlKSksXG4gICAgICAgICAga2V5OiAnOjpiZWZvcmUnXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoYWZ0ZXJTdHlsZSkge1xuICAgICAgICBhZnRlckVsZW1lbnQgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCh0aGlzLnByb3BzLmFmdGVyRWxlbWVudFR5cGUsIHtcbiAgICAgICAgICBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe30sIHN0eWxlcy5ib3gsIGFmdGVyU3R5bGUpKSxcbiAgICAgICAgICBrZXk6ICc6OmFmdGVyJ1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdmFyIGNoaWxkcmVuID0gW2JlZm9yZUVsZW1lbnQsIHRoaXMucHJvcHMuY2hpbGRyZW4sIGFmdGVyRWxlbWVudF07XG5cbiAgICAgIHZhciBwcm9wcyA9IG90aGVyO1xuICAgICAgcHJvcHMuc3R5bGUgPSBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgdGhpcy5wcm9wcy5zdHlsZSkpO1xuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQodGhpcy5wcm9wcy5lbGVtZW50VHlwZSwgcHJvcHMsIGNoaWxkcmVuKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIEJlZm9yZUFmdGVyV3JhcHBlcjtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbkJlZm9yZUFmdGVyV3JhcHBlci5kZWZhdWx0UHJvcHMgPSB7XG4gIGJlZm9yZUVsZW1lbnRUeXBlOiAnZGl2JyxcbiAgYWZ0ZXJFbGVtZW50VHlwZTogJ2RpdicsXG4gIGVsZW1lbnRUeXBlOiAnZGl2J1xufTtcbkJlZm9yZUFmdGVyV3JhcHBlci5jb250ZXh0VHlwZXMgPSB7XG4gIG11aVRoZW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkXG59O1xuQmVmb3JlQWZ0ZXJXcmFwcGVyLnByb3BUeXBlcyA9ICBmYWxzZSA/IHtcbiAgYWZ0ZXJFbGVtZW50VHlwZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGFmdGVyU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBiZWZvcmVFbGVtZW50VHlwZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGJlZm9yZVN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgY2hpbGRyZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgZWxlbWVudFR5cGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIHN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdFxufSA6IHt9O1xuZXhwb3J0cy5kZWZhdWx0ID0gQmVmb3JlQWZ0ZXJXcmFwcGVyO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMTU1OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblxudmFyIF9leHRlbmRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4dGVuZHMyKTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMik7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX0JlZm9yZUFmdGVyV3JhcHBlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTU0KTtcblxudmFyIF9CZWZvcmVBZnRlcldyYXBwZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQmVmb3JlQWZ0ZXJXcmFwcGVyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIHN0eWxlcyA9IHtcbiAgYmVmb3JlOiB7XG4gICAgY29udGVudDogXCInICdcIixcbiAgICBkaXNwbGF5OiAndGFibGUnXG4gIH0sXG4gIGFmdGVyOiB7XG4gICAgY29udGVudDogXCInICdcIixcbiAgICBjbGVhcjogJ2JvdGgnLFxuICAgIGRpc3BsYXk6ICd0YWJsZSdcbiAgfVxufTtcblxudmFyIENsZWFyRml4ID0gZnVuY3Rpb24gQ2xlYXJGaXgoX3JlZikge1xuICB2YXIgc3R5bGUgPSBfcmVmLnN0eWxlLFxuICAgICAgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuLFxuICAgICAgb3RoZXIgPSAoMCwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMy5kZWZhdWx0KShfcmVmLCBbJ3N0eWxlJywgJ2NoaWxkcmVuJ10pO1xuICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgX0JlZm9yZUFmdGVyV3JhcHBlcjIuZGVmYXVsdCxcbiAgICAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBvdGhlciwge1xuICAgICAgYmVmb3JlU3R5bGU6IHN0eWxlcy5iZWZvcmUsXG4gICAgICBhZnRlclN0eWxlOiBzdHlsZXMuYWZ0ZXIsXG4gICAgICBzdHlsZTogc3R5bGVcbiAgICB9KSxcbiAgICBjaGlsZHJlblxuICApO1xufTtcblxuQ2xlYXJGaXgubXVpTmFtZSA9ICdDbGVhckZpeCc7XG5cbkNsZWFyRml4LnByb3BUeXBlcyA9ICBmYWxzZSA/IHtcbiAgY2hpbGRyZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3Rcbn0gOiB7fTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gQ2xlYXJGaXg7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAxNTc6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXG52YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTtcblxudmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpO1xuXG52YXIgX2luaGVyaXRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cbnZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTtcblxudmFyIF9zaW1wbGVBc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXG52YXIgX3NpbXBsZUFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaW1wbGVBc3NpZ24pO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxudmFyIF9yZWFjdEV2ZW50TGlzdGVuZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblxudmFyIF9yZWFjdEV2ZW50TGlzdGVuZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3RFdmVudExpc3RlbmVyKTtcblxudmFyIF9rZXljb2RlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cbnZhciBfa2V5Y29kZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9rZXljb2RlKTtcblxudmFyIF90cmFuc2l0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXG52YXIgX3RyYW5zaXRpb25zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RyYW5zaXRpb25zKTtcblxudmFyIF9Gb2N1c1JpcHBsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTU4KTtcblxudmFyIF9Gb2N1c1JpcHBsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Gb2N1c1JpcHBsZSk7XG5cbnZhciBfVG91Y2hSaXBwbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2MSk7XG5cbnZhciBfVG91Y2hSaXBwbGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfVG91Y2hSaXBwbGUpO1xuXG52YXIgX1BhcGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cbnZhciBfUGFwZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUGFwZXIpO1xuXG52YXIgX3dhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBnZXRTdHlsZXMocHJvcHMsIGNvbnRleHQpIHtcbiAgdmFyIGJhc2VUaGVtZSA9IGNvbnRleHQubXVpVGhlbWUuYmFzZVRoZW1lO1xuXG5cbiAgcmV0dXJuIHtcbiAgICByb290OiB7XG4gICAgICBjdXJzb3I6IHByb3BzLmRpc2FibGVkID8gJ25vdC1hbGxvd2VkJyA6ICdwb2ludGVyJyxcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgb3ZlcmZsb3c6ICd2aXNpYmxlJyxcbiAgICAgIGRpc3BsYXk6ICd0YWJsZScsXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIHdpZHRoOiAnMTAwJSdcbiAgICB9LFxuICAgIGlucHV0OiB7XG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIGN1cnNvcjogJ2luaGVyaXQnLFxuICAgICAgcG9pbnRlckV2ZW50czogJ2FsbCcsXG4gICAgICBvcGFjaXR5OiAwLFxuICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgekluZGV4OiAyLFxuICAgICAgbGVmdDogMCxcbiAgICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnLFxuICAgICAgcGFkZGluZzogMCxcbiAgICAgIG1hcmdpbjogMFxuICAgIH0sXG4gICAgY29udHJvbHM6IHtcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICBoZWlnaHQ6ICcxMDAlJ1xuICAgIH0sXG4gICAgbGFiZWw6IHtcbiAgICAgIGZsb2F0OiAnbGVmdCcsXG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgIGRpc3BsYXk6ICdibG9jaycsXG4gICAgICB3aWR0aDogJ2NhbGMoMTAwJSAtIDYwcHgpJyxcbiAgICAgIGxpbmVIZWlnaHQ6ICcyNHB4JyxcbiAgICAgIGNvbG9yOiBiYXNlVGhlbWUucGFsZXR0ZS50ZXh0Q29sb3IsXG4gICAgICBmb250RmFtaWx5OiBiYXNlVGhlbWUuZm9udEZhbWlseVxuICAgIH0sXG4gICAgd3JhcDoge1xuICAgICAgdHJhbnNpdGlvbjogX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoKSxcbiAgICAgIGZsb2F0OiAnbGVmdCcsXG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgIGRpc3BsYXk6ICdibG9jaycsXG4gICAgICBmbGV4U2hyaW5rOiAwLFxuICAgICAgd2lkdGg6IDYwIC0gYmFzZVRoZW1lLnNwYWNpbmcuZGVza3RvcEd1dHRlckxlc3MsXG4gICAgICBtYXJnaW5SaWdodDogcHJvcHMubGFiZWxQb3NpdGlvbiA9PT0gJ3JpZ2h0JyA/IGJhc2VUaGVtZS5zcGFjaW5nLmRlc2t0b3BHdXR0ZXJMZXNzIDogMCxcbiAgICAgIG1hcmdpbkxlZnQ6IHByb3BzLmxhYmVsUG9zaXRpb24gPT09ICdsZWZ0JyA/IGJhc2VUaGVtZS5zcGFjaW5nLmRlc2t0b3BHdXR0ZXJMZXNzIDogMFxuICAgIH0sXG4gICAgcmlwcGxlOiB7XG4gICAgICBjb2xvcjogcHJvcHMucmlwcGxlQ29sb3IgfHwgYmFzZVRoZW1lLnBhbGV0dGUucHJpbWFyeTFDb2xvcixcbiAgICAgIGhlaWdodDogJzIwMCUnLFxuICAgICAgd2lkdGg6ICcyMDAlJyxcbiAgICAgIHRvcDogLTEyLFxuICAgICAgbGVmdDogLTEyXG4gICAgfVxuICB9O1xufVxuXG52YXIgRW5oYW5jZWRTd2l0Y2ggPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShFbmhhbmNlZFN3aXRjaCwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gRW5oYW5jZWRTd2l0Y2goKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRW5oYW5jZWRTd2l0Y2gpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChfcmVmID0gRW5oYW5jZWRTd2l0Y2guX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKEVuaGFuY2VkU3dpdGNoKSkuY2FsbC5hcHBseShfcmVmLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBpc0tleWJvYXJkRm9jdXNlZDogZmFsc2VcbiAgICB9LCBfdGhpcy5oYW5kbGVDaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIF90aGlzLnRhYlByZXNzZWQgPSBmYWxzZTtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgaXNLZXlib2FyZEZvY3VzZWQ6IGZhbHNlXG4gICAgICB9KTtcblxuICAgICAgdmFyIGlzSW5wdXRDaGVja2VkID0gX3RoaXMucmVmcy5jaGVja2JveC5jaGVja2VkO1xuXG4gICAgICBpZiAoIV90aGlzLnByb3BzLmhhc093blByb3BlcnR5KCdjaGVja2VkJykgJiYgX3RoaXMucHJvcHMub25QYXJlbnRTaG91bGRVcGRhdGUpIHtcbiAgICAgICAgX3RoaXMucHJvcHMub25QYXJlbnRTaG91bGRVcGRhdGUoaXNJbnB1dENoZWNrZWQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoX3RoaXMucHJvcHMub25Td2l0Y2gpIHtcbiAgICAgICAgX3RoaXMucHJvcHMub25Td2l0Y2goZXZlbnQsIGlzSW5wdXRDaGVja2VkKTtcbiAgICAgIH1cbiAgICB9LCBfdGhpcy5oYW5kbGVLZXlEb3duID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB2YXIgY29kZSA9ICgwLCBfa2V5Y29kZTIuZGVmYXVsdCkoZXZlbnQpO1xuXG4gICAgICBpZiAoY29kZSA9PT0gJ3RhYicpIHtcbiAgICAgICAgX3RoaXMudGFiUHJlc3NlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoX3RoaXMuc3RhdGUuaXNLZXlib2FyZEZvY3VzZWQgJiYgY29kZSA9PT0gJ3NwYWNlJykge1xuICAgICAgICBfdGhpcy5oYW5kbGVDaGFuZ2UoZXZlbnQpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmhhbmRsZUtleVVwID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoX3RoaXMuc3RhdGUuaXNLZXlib2FyZEZvY3VzZWQgJiYgKDAsIF9rZXljb2RlMi5kZWZhdWx0KShldmVudCkgPT09ICdzcGFjZScpIHtcbiAgICAgICAgX3RoaXMuaGFuZGxlQ2hhbmdlKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9LCBfdGhpcy5oYW5kbGVNb3VzZURvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIC8vIG9ubHkgbGlzdGVuIHRvIGxlZnQgY2xpY2tzXG4gICAgICBpZiAoZXZlbnQuYnV0dG9uID09PSAwKSB7XG4gICAgICAgIF90aGlzLnJlZnMudG91Y2hSaXBwbGUuc3RhcnQoZXZlbnQpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmhhbmRsZU1vdXNlVXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5yZWZzLnRvdWNoUmlwcGxlLmVuZCgpO1xuICAgIH0sIF90aGlzLmhhbmRsZU1vdXNlTGVhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5yZWZzLnRvdWNoUmlwcGxlLmVuZCgpO1xuICAgIH0sIF90aGlzLmhhbmRsZVRvdWNoU3RhcnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIF90aGlzLnJlZnMudG91Y2hSaXBwbGUuc3RhcnQoZXZlbnQpO1xuICAgIH0sIF90aGlzLmhhbmRsZVRvdWNoRW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMucmVmcy50b3VjaFJpcHBsZS5lbmQoKTtcbiAgICB9LCBfdGhpcy5oYW5kbGVCbHVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGlzS2V5Ym9hcmRGb2N1c2VkOiBmYWxzZVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChfdGhpcy5wcm9wcy5vbkJsdXIpIHtcbiAgICAgICAgX3RoaXMucHJvcHMub25CbHVyKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9LCBfdGhpcy5oYW5kbGVGb2N1cyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgLy8gc2V0VGltZW91dCBpcyBuZWVkZWQgYmVjdWFzZSB0aGUgZm9jdXMgZXZlbnQgZmlyZXMgZmlyc3RcbiAgICAgIC8vIFdhaXQgc28gdGhhdCB3ZSBjYW4gY2FwdHVyZSBpZiB0aGlzIHdhcyBhIGtleWJvYXJkIGZvY3VzXG4gICAgICAvLyBvciB0b3VjaCBmb2N1c1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChfdGhpcy50YWJQcmVzc2VkKSB7XG4gICAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNLZXlib2FyZEZvY3VzZWQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSwgMTUwKTtcblxuICAgICAgaWYgKF90aGlzLnByb3BzLm9uRm9jdXMpIHtcbiAgICAgICAgX3RoaXMucHJvcHMub25Gb2N1cyhldmVudCk7XG4gICAgICB9XG4gICAgfSwgX3RlbXApLCAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKEVuaGFuY2VkU3dpdGNoLCBbe1xuICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICB2YXIgaW5wdXROb2RlID0gdGhpcy5yZWZzLmNoZWNrYm94O1xuICAgICAgaWYgKCghdGhpcy5wcm9wcy5zd2l0Y2hlZCB8fCBpbnB1dE5vZGUuY2hlY2tlZCAhPT0gdGhpcy5wcm9wcy5zd2l0Y2hlZCkgJiYgdGhpcy5wcm9wcy5vblBhcmVudFNob3VsZFVwZGF0ZSkge1xuICAgICAgICB0aGlzLnByb3BzLm9uUGFyZW50U2hvdWxkVXBkYXRlKGlucHV0Tm9kZS5jaGVja2VkKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICAgIHZhciBoYXNDaGVja2VkUHJvcCA9IG5leHRQcm9wcy5oYXNPd25Qcm9wZXJ0eSgnY2hlY2tlZCcpO1xuICAgICAgdmFyIGhhc05ld0RlZmF1bHRQcm9wID0gbmV4dFByb3BzLmhhc093blByb3BlcnR5KCdkZWZhdWx0Q2hlY2tlZCcpICYmIG5leHRQcm9wcy5kZWZhdWx0Q2hlY2tlZCAhPT0gdGhpcy5wcm9wcy5kZWZhdWx0Q2hlY2tlZDtcblxuICAgICAgaWYgKGhhc0NoZWNrZWRQcm9wIHx8IGhhc05ld0RlZmF1bHRQcm9wKSB7XG4gICAgICAgIHZhciBzd2l0Y2hlZCA9IG5leHRQcm9wcy5jaGVja2VkIHx8IG5leHRQcm9wcy5kZWZhdWx0Q2hlY2tlZCB8fCBmYWxzZTtcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBzd2l0Y2hlZDogc3dpdGNoZWRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMub25QYXJlbnRTaG91bGRVcGRhdGUgJiYgc3dpdGNoZWQgIT09IHRoaXMucHJvcHMuc3dpdGNoZWQpIHtcbiAgICAgICAgICB0aGlzLnByb3BzLm9uUGFyZW50U2hvdWxkVXBkYXRlKHN3aXRjaGVkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2lzU3dpdGNoZWQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc1N3aXRjaGVkKCkge1xuICAgICAgcmV0dXJuIHRoaXMucmVmcy5jaGVja2JveC5jaGVja2VkO1xuICAgIH1cblxuICAgIC8vIG5vIGNhbGxiYWNrIGhlcmUgYmVjYXVzZSB0aGVyZSBpcyBubyBldmVudFxuXG4gIH0sIHtcbiAgICBrZXk6ICdzZXRTd2l0Y2hlZCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldFN3aXRjaGVkKG5ld1N3aXRjaGVkVmFsdWUpIHtcbiAgICAgIGlmICghdGhpcy5wcm9wcy5oYXNPd25Qcm9wZXJ0eSgnY2hlY2tlZCcpIHx8IHRoaXMucHJvcHMuY2hlY2tlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMub25QYXJlbnRTaG91bGRVcGRhdGUpIHtcbiAgICAgICAgICB0aGlzLnByb3BzLm9uUGFyZW50U2hvdWxkVXBkYXRlKG5ld1N3aXRjaGVkVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVmcy5jaGVja2JveC5jaGVja2VkID0gbmV3U3dpdGNoZWRWYWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICBmYWxzZSA/ICgwLCBfd2FybmluZzIuZGVmYXVsdCkoZmFsc2UsICdNYXRlcmlhbC1VSTogQ2Fubm90IGNhbGwgc2V0IG1ldGhvZCB3aGlsZSBjaGVja2VkIGlzIGRlZmluZWQgYXMgYSBwcm9wZXJ0eS4nKSA6IHZvaWQgMDtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdnZXRWYWx1ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFZhbHVlKCkge1xuICAgICAgcmV0dXJuIHRoaXMucmVmcy5jaGVja2JveC52YWx1ZTtcbiAgICB9XG5cbiAgICAvLyBDaGVja2JveCBpbnB1dHMgb25seSB1c2UgU1BBQ0UgdG8gY2hhbmdlIHRoZWlyIHN0YXRlLiBVc2luZyBFTlRFUiB3aWxsXG4gICAgLy8gdXBkYXRlIHRoZSB1aSBidXQgbm90IHRoZSBpbnB1dC5cblxuXG4gICAgLyoqXG4gICAgICogQmVjYXVzZSBib3RoIHRoZSByaXBwbGVzIGFuZCB0aGUgY2hlY2tib3ggaW5wdXQgY2Fubm90IHNoYXJlIHBvaW50ZXJcbiAgICAgKiBldmVudHMsIHRoZSBjaGVja2JveCBpbnB1dCB0YWtlcyBjb250cm9sIG9mIHBvaW50ZXIgZXZlbnRzIGFuZCBjYWxsc1xuICAgICAqIHJpcHBsZSBhbmltYXRpb25zIG1hbnVhbGx5LlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBuYW1lID0gX3Byb3BzLm5hbWUsXG4gICAgICAgICAgdmFsdWUgPSBfcHJvcHMudmFsdWUsXG4gICAgICAgICAgaWNvblN0eWxlID0gX3Byb3BzLmljb25TdHlsZSxcbiAgICAgICAgICBpbnB1dFN0eWxlID0gX3Byb3BzLmlucHV0U3R5bGUsXG4gICAgICAgICAgaW5wdXRUeXBlID0gX3Byb3BzLmlucHV0VHlwZSxcbiAgICAgICAgICBsYWJlbCA9IF9wcm9wcy5sYWJlbCxcbiAgICAgICAgICBsYWJlbFN0eWxlID0gX3Byb3BzLmxhYmVsU3R5bGUsXG4gICAgICAgICAgbGFiZWxQb3NpdGlvbiA9IF9wcm9wcy5sYWJlbFBvc2l0aW9uLFxuICAgICAgICAgIG9uU3dpdGNoID0gX3Byb3BzLm9uU3dpdGNoLFxuICAgICAgICAgIG9uQmx1ciA9IF9wcm9wcy5vbkJsdXIsXG4gICAgICAgICAgb25Gb2N1cyA9IF9wcm9wcy5vbkZvY3VzLFxuICAgICAgICAgIG9uTW91c2VVcCA9IF9wcm9wcy5vbk1vdXNlVXAsXG4gICAgICAgICAgb25Nb3VzZURvd24gPSBfcHJvcHMub25Nb3VzZURvd24sXG4gICAgICAgICAgb25Nb3VzZUxlYXZlID0gX3Byb3BzLm9uTW91c2VMZWF2ZSxcbiAgICAgICAgICBvblRvdWNoU3RhcnQgPSBfcHJvcHMub25Ub3VjaFN0YXJ0LFxuICAgICAgICAgIG9uVG91Y2hFbmQgPSBfcHJvcHMub25Ub3VjaEVuZCxcbiAgICAgICAgICBvblBhcmVudFNob3VsZFVwZGF0ZSA9IF9wcm9wcy5vblBhcmVudFNob3VsZFVwZGF0ZSxcbiAgICAgICAgICBkaXNhYmxlZCA9IF9wcm9wcy5kaXNhYmxlZCxcbiAgICAgICAgICBkaXNhYmxlVG91Y2hSaXBwbGUgPSBfcHJvcHMuZGlzYWJsZVRvdWNoUmlwcGxlLFxuICAgICAgICAgIGRpc2FibGVGb2N1c1JpcHBsZSA9IF9wcm9wcy5kaXNhYmxlRm9jdXNSaXBwbGUsXG4gICAgICAgICAgY2xhc3NOYW1lID0gX3Byb3BzLmNsYXNzTmFtZSxcbiAgICAgICAgICByaXBwbGVDb2xvciA9IF9wcm9wcy5yaXBwbGVDb2xvcixcbiAgICAgICAgICByaXBwbGVTdHlsZSA9IF9wcm9wcy5yaXBwbGVTdHlsZSxcbiAgICAgICAgICBzdHlsZSA9IF9wcm9wcy5zdHlsZSxcbiAgICAgICAgICBzd2l0Y2hlZCA9IF9wcm9wcy5zd2l0Y2hlZCxcbiAgICAgICAgICBzd2l0Y2hFbGVtZW50ID0gX3Byb3BzLnN3aXRjaEVsZW1lbnQsXG4gICAgICAgICAgdGh1bWJTdHlsZSA9IF9wcm9wcy50aHVtYlN0eWxlLFxuICAgICAgICAgIHRyYWNrU3R5bGUgPSBfcHJvcHMudHJhY2tTdHlsZSxcbiAgICAgICAgICBvdGhlciA9ICgwLCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzLmRlZmF1bHQpKF9wcm9wcywgWyduYW1lJywgJ3ZhbHVlJywgJ2ljb25TdHlsZScsICdpbnB1dFN0eWxlJywgJ2lucHV0VHlwZScsICdsYWJlbCcsICdsYWJlbFN0eWxlJywgJ2xhYmVsUG9zaXRpb24nLCAnb25Td2l0Y2gnLCAnb25CbHVyJywgJ29uRm9jdXMnLCAnb25Nb3VzZVVwJywgJ29uTW91c2VEb3duJywgJ29uTW91c2VMZWF2ZScsICdvblRvdWNoU3RhcnQnLCAnb25Ub3VjaEVuZCcsICdvblBhcmVudFNob3VsZFVwZGF0ZScsICdkaXNhYmxlZCcsICdkaXNhYmxlVG91Y2hSaXBwbGUnLCAnZGlzYWJsZUZvY3VzUmlwcGxlJywgJ2NsYXNzTmFtZScsICdyaXBwbGVDb2xvcicsICdyaXBwbGVTdHlsZScsICdzdHlsZScsICdzd2l0Y2hlZCcsICdzd2l0Y2hFbGVtZW50JywgJ3RodW1iU3R5bGUnLCAndHJhY2tTdHlsZSddKTtcbiAgICAgIHZhciBwcmVwYXJlU3R5bGVzID0gdGhpcy5jb250ZXh0Lm11aVRoZW1lLnByZXBhcmVTdHlsZXM7XG5cbiAgICAgIHZhciBzdHlsZXMgPSBnZXRTdHlsZXModGhpcy5wcm9wcywgdGhpcy5jb250ZXh0KTtcbiAgICAgIHZhciB3cmFwU3R5bGVzID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy53cmFwLCBpY29uU3R5bGUpO1xuICAgICAgdmFyIG1lcmdlZFJpcHBsZVN0eWxlID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5yaXBwbGUsIHJpcHBsZVN0eWxlKTtcblxuICAgICAgaWYgKHRodW1iU3R5bGUpIHtcbiAgICAgICAgd3JhcFN0eWxlcy5tYXJnaW5MZWZ0IC89IDI7XG4gICAgICAgIHdyYXBTdHlsZXMubWFyZ2luUmlnaHQgLz0gMjtcbiAgICAgIH1cblxuICAgICAgdmFyIGxhYmVsRWxlbWVudCA9IGxhYmVsICYmIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnbGFiZWwnLFxuICAgICAgICB7IHN0eWxlOiBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMubGFiZWwsIGxhYmVsU3R5bGUpKSB9LFxuICAgICAgICBsYWJlbFxuICAgICAgKTtcblxuICAgICAgdmFyIHNob3dUb3VjaFJpcHBsZSA9ICFkaXNhYmxlZCAmJiAhZGlzYWJsZVRvdWNoUmlwcGxlO1xuICAgICAgdmFyIHNob3dGb2N1c1JpcHBsZSA9ICFkaXNhYmxlZCAmJiAhZGlzYWJsZUZvY3VzUmlwcGxlO1xuXG4gICAgICB2YXIgdG91Y2hSaXBwbGUgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfVG91Y2hSaXBwbGUyLmRlZmF1bHQsIHtcbiAgICAgICAgcmVmOiAndG91Y2hSaXBwbGUnLFxuICAgICAgICBrZXk6ICd0b3VjaFJpcHBsZScsXG4gICAgICAgIHN0eWxlOiBtZXJnZWRSaXBwbGVTdHlsZSxcbiAgICAgICAgY29sb3I6IG1lcmdlZFJpcHBsZVN0eWxlLmNvbG9yLFxuICAgICAgICBtdWlUaGVtZTogdGhpcy5jb250ZXh0Lm11aVRoZW1lLFxuICAgICAgICBjZW50ZXJSaXBwbGU6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgZm9jdXNSaXBwbGUgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfRm9jdXNSaXBwbGUyLmRlZmF1bHQsIHtcbiAgICAgICAga2V5OiAnZm9jdXNSaXBwbGUnLFxuICAgICAgICBpbm5lclN0eWxlOiBtZXJnZWRSaXBwbGVTdHlsZSxcbiAgICAgICAgY29sb3I6IG1lcmdlZFJpcHBsZVN0eWxlLmNvbG9yLFxuICAgICAgICBtdWlUaGVtZTogdGhpcy5jb250ZXh0Lm11aVRoZW1lLFxuICAgICAgICBzaG93OiB0aGlzLnN0YXRlLmlzS2V5Ym9hcmRGb2N1c2VkXG4gICAgICB9KTtcblxuICAgICAgdmFyIHJpcHBsZXMgPSBbc2hvd1RvdWNoUmlwcGxlID8gdG91Y2hSaXBwbGUgOiBudWxsLCBzaG93Rm9jdXNSaXBwbGUgPyBmb2N1c1JpcHBsZSA6IG51bGxdO1xuXG4gICAgICB2YXIgaW5wdXRFbGVtZW50ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgKDAsIF9leHRlbmRzMy5kZWZhdWx0KSh7fSwgb3RoZXIsIHtcbiAgICAgICAgcmVmOiAnY2hlY2tib3gnLFxuICAgICAgICB0eXBlOiBpbnB1dFR5cGUsXG4gICAgICAgIHN0eWxlOiBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMuaW5wdXQsIGlucHV0U3R5bGUpKSxcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQsXG4gICAgICAgIG9uQmx1cjogdGhpcy5oYW5kbGVCbHVyLFxuICAgICAgICBvbkZvY3VzOiB0aGlzLmhhbmRsZUZvY3VzLFxuICAgICAgICBvbkNoYW5nZTogdGhpcy5oYW5kbGVDaGFuZ2UsXG4gICAgICAgIG9uTW91c2VVcDogc2hvd1RvdWNoUmlwcGxlICYmIHRoaXMuaGFuZGxlTW91c2VVcCxcbiAgICAgICAgb25Nb3VzZURvd246IHNob3dUb3VjaFJpcHBsZSAmJiB0aGlzLmhhbmRsZU1vdXNlRG93bixcbiAgICAgICAgb25Nb3VzZUxlYXZlOiBzaG93VG91Y2hSaXBwbGUgJiYgdGhpcy5oYW5kbGVNb3VzZUxlYXZlLFxuICAgICAgICBvblRvdWNoU3RhcnQ6IHNob3dUb3VjaFJpcHBsZSAmJiB0aGlzLmhhbmRsZVRvdWNoU3RhcnQsXG4gICAgICAgIG9uVG91Y2hFbmQ6IHNob3dUb3VjaFJpcHBsZSAmJiB0aGlzLmhhbmRsZVRvdWNoRW5kXG4gICAgICB9KSk7XG5cbiAgICAgIC8vIElmIHRvZ2dsZSBjb21wb25lbnQgKGluZGljYXRlZCBieSB3aGV0aGVyIHRoZSBzdHlsZSBpbmNsdWRlcyB0aHVtYikgbWFudWFsbHkgbGF5IG91dFxuICAgICAgLy8gZWxlbWVudHMgaW4gb3JkZXIgdG8gbmVzdCByaXBwbGUgZWxlbWVudHNcbiAgICAgIHZhciBzd2l0Y2hPclRodW1iRWxlbWVudCA9ICF0aHVtYlN0eWxlID8gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IHN0eWxlOiBwcmVwYXJlU3R5bGVzKHdyYXBTdHlsZXMpIH0sXG4gICAgICAgIHN3aXRjaEVsZW1lbnQsXG4gICAgICAgIHJpcHBsZXNcbiAgICAgICkgOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgc3R5bGU6IHByZXBhcmVTdHlsZXMod3JhcFN0eWxlcykgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgc3R5bGU6IHByZXBhcmVTdHlsZXMoKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCB0cmFja1N0eWxlKSkgfSksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIF9QYXBlcjIuZGVmYXVsdCxcbiAgICAgICAgICB7IHN0eWxlOiB0aHVtYlN0eWxlLCB6RGVwdGg6IDEsIGNpcmNsZTogdHJ1ZSB9LFxuICAgICAgICAgICcgJyxcbiAgICAgICAgICByaXBwbGVzLFxuICAgICAgICAgICcgJ1xuICAgICAgICApXG4gICAgICApO1xuXG4gICAgICB2YXIgZWxlbWVudHNJbk9yZGVyID0gbGFiZWxQb3NpdGlvbiA9PT0gJ3JpZ2h0JyA/IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyBzdHlsZTogc3R5bGVzLmNvbnRyb2xzIH0sXG4gICAgICAgIHN3aXRjaE9yVGh1bWJFbGVtZW50LFxuICAgICAgICBsYWJlbEVsZW1lbnRcbiAgICAgICkgOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgc3R5bGU6IHN0eWxlcy5jb250cm9scyB9LFxuICAgICAgICBsYWJlbEVsZW1lbnQsXG4gICAgICAgIHN3aXRjaE9yVGh1bWJFbGVtZW50XG4gICAgICApO1xuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IHJlZjogJ3Jvb3QnLCBjbGFzc05hbWU6IGNsYXNzTmFtZSwgc3R5bGU6IHByZXBhcmVTdHlsZXMoKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5yb290LCBzdHlsZSkpIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdEV2ZW50TGlzdGVuZXIyLmRlZmF1bHQsIHtcbiAgICAgICAgICB0YXJnZXQ6ICd3aW5kb3cnLFxuICAgICAgICAgIG9uS2V5RG93bjogdGhpcy5oYW5kbGVLZXlEb3duLFxuICAgICAgICAgIG9uS2V5VXA6IHRoaXMuaGFuZGxlS2V5VXBcbiAgICAgICAgfSksXG4gICAgICAgIGlucHV0RWxlbWVudCxcbiAgICAgICAgZWxlbWVudHNJbk9yZGVyXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gRW5oYW5jZWRTd2l0Y2g7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5FbmhhbmNlZFN3aXRjaC5jb250ZXh0VHlwZXMgPSB7XG4gIG11aVRoZW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkXG59O1xuRW5oYW5jZWRTd2l0Y2gucHJvcFR5cGVzID0gIGZhbHNlID8ge1xuICBjaGVja2VkOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIGNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGRlZmF1bHRDaGVja2VkOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIGRpc2FibGVGb2N1c1JpcHBsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBkaXNhYmxlVG91Y2hSaXBwbGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgZGlzYWJsZWQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgaWNvblN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgaW5wdXRTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGlucHV0VHlwZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgbGFiZWw6IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgbGFiZWxQb3NpdGlvbjogX3Byb3BUeXBlczIuZGVmYXVsdC5vbmVPZihbJ2xlZnQnLCAncmlnaHQnXSksXG4gIGxhYmVsU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBuYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgb25CbHVyOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIG9uRm9jdXM6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgb25Nb3VzZURvd246IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgb25Nb3VzZUxlYXZlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIG9uTW91c2VVcDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBvblBhcmVudFNob3VsZFVwZGF0ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBvblN3aXRjaDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBvblRvdWNoRW5kOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIG9uVG91Y2hTdGFydDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICByaXBwbGVDb2xvcjogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIHJpcHBsZVN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBzd2l0Y2hFbGVtZW50OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmVsZW1lbnQuaXNSZXF1aXJlZCxcbiAgc3dpdGNoZWQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbC5pc1JlcXVpcmVkLFxuICB0aHVtYlN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgdHJhY2tTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIHZhbHVlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmFueVxufSA6IHt9O1xuZXhwb3J0cy5kZWZhdWx0ID0gRW5oYW5jZWRTd2l0Y2g7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAxNjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cblxuXG4vKipcbiAqIFVzZSBpbnZhcmlhbnQoKSB0byBhc3NlcnQgc3RhdGUgd2hpY2ggeW91ciBwcm9ncmFtIGFzc3VtZXMgdG8gYmUgdHJ1ZS5cbiAqXG4gKiBQcm92aWRlIHNwcmludGYtc3R5bGUgZm9ybWF0IChvbmx5ICVzIGlzIHN1cHBvcnRlZCkgYW5kIGFyZ3VtZW50c1xuICogdG8gcHJvdmlkZSBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGJyb2tlIGFuZCB3aGF0IHlvdSB3ZXJlXG4gKiBleHBlY3RpbmcuXG4gKlxuICogVGhlIGludmFyaWFudCBtZXNzYWdlIHdpbGwgYmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiwgYnV0IHRoZSBpbnZhcmlhbnRcbiAqIHdpbGwgcmVtYWluIHRvIGVuc3VyZSBsb2dpYyBkb2VzIG5vdCBkaWZmZXIgaW4gcHJvZHVjdGlvbi5cbiAqL1xuXG52YXIgaW52YXJpYW50ID0gZnVuY3Rpb24oY29uZGl0aW9uLCBmb3JtYXQsIGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgaWYgKGZhbHNlKSB7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFyaWFudCByZXF1aXJlcyBhbiBlcnJvciBtZXNzYWdlIGFyZ3VtZW50Jyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFjb25kaXRpb24pIHtcbiAgICB2YXIgZXJyb3I7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcihcbiAgICAgICAgJ01pbmlmaWVkIGV4Y2VwdGlvbiBvY2N1cnJlZDsgdXNlIHRoZSBub24tbWluaWZpZWQgZGV2IGVudmlyb25tZW50ICcgK1xuICAgICAgICAnZm9yIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2UgYW5kIGFkZGl0aW9uYWwgaGVscGZ1bCB3YXJuaW5ncy4nXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYXJncyA9IFthLCBiLCBjLCBkLCBlLCBmXTtcbiAgICAgIHZhciBhcmdJbmRleCA9IDA7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcihcbiAgICAgICAgZm9ybWF0LnJlcGxhY2UoLyVzL2csIGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJnc1thcmdJbmRleCsrXTsgfSlcbiAgICAgICk7XG4gICAgICBlcnJvci5uYW1lID0gJ0ludmFyaWFudCBWaW9sYXRpb24nO1xuICAgIH1cblxuICAgIGVycm9yLmZyYW1lc1RvUG9wID0gMTsgLy8gd2UgZG9uJ3QgY2FyZSBhYm91dCBpbnZhcmlhbnQncyBvd24gZnJhbWVcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBpbnZhcmlhbnQ7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDE2Mzpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3B1cmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblxudmFyIF9wdXJlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3B1cmUpO1xuXG52YXIgX1N2Z0ljb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblxudmFyIF9TdmdJY29uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N2Z0ljb24pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgTmF2aWdhdGlvbkFycm93RHJvcFJpZ2h0ID0gZnVuY3Rpb24gTmF2aWdhdGlvbkFycm93RHJvcFJpZ2h0KHByb3BzKSB7XG4gIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICBfU3ZnSWNvbjIuZGVmYXVsdCxcbiAgICBwcm9wcyxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgncGF0aCcsIHsgZDogJ005LjUsN2w1LDVsLTUsNVY3eicgfSlcbiAgKTtcbn07XG5cbk5hdmlnYXRpb25BcnJvd0Ryb3BSaWdodCA9ICgwLCBfcHVyZTIuZGVmYXVsdCkoTmF2aWdhdGlvbkFycm93RHJvcFJpZ2h0KTtcbk5hdmlnYXRpb25BcnJvd0Ryb3BSaWdodC5kaXNwbGF5TmFtZSA9ICdOYXZpZ2F0aW9uQXJyb3dEcm9wUmlnaHQnO1xuTmF2aWdhdGlvbkFycm93RHJvcFJpZ2h0Lm11aU5hbWUgPSAnU3ZnSWNvbic7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IE5hdmlnYXRpb25BcnJvd0Ryb3BSaWdodDtcblxuLyoqKi8gfSksXG5cbi8qKiovIDE2NDpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3B1cmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblxudmFyIF9wdXJlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3B1cmUpO1xuXG52YXIgX1N2Z0ljb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblxudmFyIF9TdmdJY29uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N2Z0ljb24pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgTmF2aWdhdGlvbkFycm93RHJvcERvd24gPSBmdW5jdGlvbiBOYXZpZ2F0aW9uQXJyb3dEcm9wRG93bihwcm9wcykge1xuICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgX1N2Z0ljb24yLmRlZmF1bHQsXG4gICAgcHJvcHMsXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3BhdGgnLCB7IGQ6ICdNNyAxMGw1IDUgNS01eicgfSlcbiAgKTtcbn07XG5OYXZpZ2F0aW9uQXJyb3dEcm9wRG93biA9ICgwLCBfcHVyZTIuZGVmYXVsdCkoTmF2aWdhdGlvbkFycm93RHJvcERvd24pO1xuTmF2aWdhdGlvbkFycm93RHJvcERvd24uZGlzcGxheU5hbWUgPSAnTmF2aWdhdGlvbkFycm93RHJvcERvd24nO1xuTmF2aWdhdGlvbkFycm93RHJvcERvd24ubXVpTmFtZSA9ICdTdmdJY29uJztcblxuZXhwb3J0cy5kZWZhdWx0ID0gTmF2aWdhdGlvbkFycm93RHJvcERvd247XG5cbi8qKiovIH0pLFxuXG4vKioqLyAxNjU6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wdXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cbnZhciBfcHVyZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wdXJlKTtcblxudmFyIF9TdmdJY29uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cbnZhciBfU3ZnSWNvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TdmdJY29uKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIE5hdmlnYXRpb25NZW51ID0gZnVuY3Rpb24gTmF2aWdhdGlvbk1lbnUocHJvcHMpIHtcbiAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgIF9TdmdJY29uMi5kZWZhdWx0LFxuICAgIHByb3BzLFxuICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdwYXRoJywgeyBkOiAnTTMgMThoMTh2LTJIM3Yyem0wLTVoMTh2LTJIM3Yyem0wLTd2MmgxOFY2SDN6JyB9KVxuICApO1xufTtcbk5hdmlnYXRpb25NZW51ID0gKDAsIF9wdXJlMi5kZWZhdWx0KShOYXZpZ2F0aW9uTWVudSk7XG5OYXZpZ2F0aW9uTWVudS5kaXNwbGF5TmFtZSA9ICdOYXZpZ2F0aW9uTWVudSc7XG5OYXZpZ2F0aW9uTWVudS5tdWlOYW1lID0gJ1N2Z0ljb24nO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBOYXZpZ2F0aW9uTWVudTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDE2Njpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3B1cmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblxudmFyIF9wdXJlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3B1cmUpO1xuXG52YXIgX1N2Z0ljb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblxudmFyIF9TdmdJY29uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N2Z0ljb24pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgTmF2aWdhdGlvbk1vcmVWZXJ0ID0gZnVuY3Rpb24gTmF2aWdhdGlvbk1vcmVWZXJ0KHByb3BzKSB7XG4gIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICBfU3ZnSWNvbjIuZGVmYXVsdCxcbiAgICBwcm9wcyxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgncGF0aCcsIHsgZDogJ00xMiA4YzEuMSAwIDItLjkgMi0ycy0uOS0yLTItMi0yIC45LTIgMiAuOSAyIDIgMnptMCAyYy0xLjEgMC0yIC45LTIgMnMuOSAyIDIgMiAyLS45IDItMi0uOS0yLTItMnptMCA2Yy0xLjEgMC0yIC45LTIgMnMuOSAyIDIgMiAyLS45IDItMi0uOS0yLTItMnonIH0pXG4gICk7XG59O1xuTmF2aWdhdGlvbk1vcmVWZXJ0ID0gKDAsIF9wdXJlMi5kZWZhdWx0KShOYXZpZ2F0aW9uTW9yZVZlcnQpO1xuTmF2aWdhdGlvbk1vcmVWZXJ0LmRpc3BsYXlOYW1lID0gJ05hdmlnYXRpb25Nb3JlVmVydCc7XG5OYXZpZ2F0aW9uTW9yZVZlcnQubXVpTmFtZSA9ICdTdmdJY29uJztcblxuZXhwb3J0cy5kZWZhdWx0ID0gTmF2aWdhdGlvbk1vcmVWZXJ0O1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMTY3OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHVyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXG52YXIgX3B1cmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHVyZSk7XG5cbnZhciBfU3ZnSWNvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXG52YXIgX1N2Z0ljb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3ZnSWNvbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBUb2dnbGVDaGVja0JveE91dGxpbmVCbGFuayA9IGZ1bmN0aW9uIFRvZ2dsZUNoZWNrQm94T3V0bGluZUJsYW5rKHByb3BzKSB7XG4gIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICBfU3ZnSWNvbjIuZGVmYXVsdCxcbiAgICBwcm9wcyxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgncGF0aCcsIHsgZDogJ00xOSA1djE0SDVWNWgxNG0wLTJINWMtMS4xIDAtMiAuOS0yIDJ2MTRjMCAxLjEuOSAyIDIgMmgxNGMxLjEgMCAyLS45IDItMlY1YzAtMS4xLS45LTItMi0yeicgfSlcbiAgKTtcbn07XG5Ub2dnbGVDaGVja0JveE91dGxpbmVCbGFuayA9ICgwLCBfcHVyZTIuZGVmYXVsdCkoVG9nZ2xlQ2hlY2tCb3hPdXRsaW5lQmxhbmspO1xuVG9nZ2xlQ2hlY2tCb3hPdXRsaW5lQmxhbmsuZGlzcGxheU5hbWUgPSAnVG9nZ2xlQ2hlY2tCb3hPdXRsaW5lQmxhbmsnO1xuVG9nZ2xlQ2hlY2tCb3hPdXRsaW5lQmxhbmsubXVpTmFtZSA9ICdTdmdJY29uJztcblxuZXhwb3J0cy5kZWZhdWx0ID0gVG9nZ2xlQ2hlY2tCb3hPdXRsaW5lQmxhbms7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAxNjg6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wdXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cbnZhciBfcHVyZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wdXJlKTtcblxudmFyIF9TdmdJY29uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cbnZhciBfU3ZnSWNvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TdmdJY29uKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIFRvZ2dsZUNoZWNrQm94ID0gZnVuY3Rpb24gVG9nZ2xlQ2hlY2tCb3gocHJvcHMpIHtcbiAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgIF9TdmdJY29uMi5kZWZhdWx0LFxuICAgIHByb3BzLFxuICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdwYXRoJywgeyBkOiAnTTE5IDNINWMtMS4xMSAwLTIgLjktMiAydjE0YzAgMS4xLjg5IDIgMiAyaDE0YzEuMTEgMCAyLS45IDItMlY1YzAtMS4xLS44OS0yLTItMnptLTkgMTRsLTUtNSAxLjQxLTEuNDFMMTAgMTQuMTdsNy41OS03LjU5TDE5IDhsLTkgOXonIH0pXG4gICk7XG59O1xuVG9nZ2xlQ2hlY2tCb3ggPSAoMCwgX3B1cmUyLmRlZmF1bHQpKFRvZ2dsZUNoZWNrQm94KTtcblRvZ2dsZUNoZWNrQm94LmRpc3BsYXlOYW1lID0gJ1RvZ2dsZUNoZWNrQm94JztcblRvZ2dsZUNoZWNrQm94Lm11aU5hbWUgPSAnU3ZnSWNvbic7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFRvZ2dsZUNoZWNrQm94O1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMTY5OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5MQVJHRSA9IGV4cG9ydHMuTUVESVVNID0gZXhwb3J0cy5TTUFMTCA9IHVuZGVmaW5lZDtcblxudmFyIF9leHRlbmRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cbnZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7XG5cbnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblxudmFyIF9pbmhlcml0czIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXG52YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IHdpdGhXaWR0aDtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0RXZlbnRMaXN0ZW5lciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXG52YXIgX3JlYWN0RXZlbnRMaXN0ZW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdEV2ZW50TGlzdGVuZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgU01BTEwgPSBleHBvcnRzLlNNQUxMID0gMTtcbnZhciBNRURJVU0gPSBleHBvcnRzLk1FRElVTSA9IDI7XG52YXIgTEFSR0UgPSBleHBvcnRzLkxBUkdFID0gMztcblxuZnVuY3Rpb24gd2l0aFdpZHRoKCkge1xuICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gIHZhciBfb3B0aW9ucyRsYXJnZVdpZHRoID0gb3B0aW9ucy5sYXJnZVdpZHRoLFxuICAgICAgbGFyZ2VXaWR0aCA9IF9vcHRpb25zJGxhcmdlV2lkdGggPT09IHVuZGVmaW5lZCA/IDk5MiA6IF9vcHRpb25zJGxhcmdlV2lkdGgsXG4gICAgICBfb3B0aW9ucyRtZWRpdW1XaWR0aCA9IG9wdGlvbnMubWVkaXVtV2lkdGgsXG4gICAgICBtZWRpdW1XaWR0aCA9IF9vcHRpb25zJG1lZGl1bVdpZHRoID09PSB1bmRlZmluZWQgPyA3NjggOiBfb3B0aW9ucyRtZWRpdW1XaWR0aCxcbiAgICAgIF9vcHRpb25zJHJlc2l6ZUludGVydiA9IG9wdGlvbnMucmVzaXplSW50ZXJ2YWwsXG4gICAgICByZXNpemVJbnRlcnZhbCA9IF9vcHRpb25zJHJlc2l6ZUludGVydiA9PT0gdW5kZWZpbmVkID8gMTY2IDogX29wdGlvbnMkcmVzaXplSW50ZXJ2O1xuXG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChNeUNvbXBvbmVudCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAgICAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoV2l0aFdpZHRoLCBfQ29tcG9uZW50KTtcblxuICAgICAgZnVuY3Rpb24gV2l0aFdpZHRoKCkge1xuICAgICAgICB2YXIgX3JlZjtcblxuICAgICAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIFdpdGhXaWR0aCk7XG5cbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChfcmVmID0gV2l0aFdpZHRoLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShXaXRoV2lkdGgpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICB3aWR0aDogbnVsbFxuICAgICAgICB9LCBfdGhpcy5oYW5kbGVSZXNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzLmRlZmVyVGltZXIpO1xuICAgICAgICAgIF90aGlzLmRlZmVyVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnVwZGF0ZVdpZHRoKCk7XG4gICAgICAgICAgfSwgcmVzaXplSW50ZXJ2YWwpO1xuICAgICAgICB9LCBfdGVtcCksICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkoX3RoaXMsIF9yZXQpO1xuICAgICAgfVxuXG4gICAgICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShXaXRoV2lkdGgsIFt7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICAgIHRoaXMudXBkYXRlV2lkdGgoKTtcbiAgICAgICAgfVxuICAgICAgfSwge1xuICAgICAgICBrZXk6ICdjb21wb25lbnRXaWxsVW5tb3VudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5kZWZlclRpbWVyKTtcbiAgICAgICAgfVxuICAgICAgfSwge1xuICAgICAgICBrZXk6ICd1cGRhdGVXaWR0aCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVXaWR0aCgpIHtcbiAgICAgICAgICB2YXIgaW5uZXJXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICAgIHZhciB3aWR0aCA9IHZvaWQgMDtcblxuICAgICAgICAgIGlmIChpbm5lcldpZHRoID49IGxhcmdlV2lkdGgpIHtcbiAgICAgICAgICAgIHdpZHRoID0gTEFSR0U7XG4gICAgICAgICAgfSBlbHNlIGlmIChpbm5lcldpZHRoID49IG1lZGl1bVdpZHRoKSB7XG4gICAgICAgICAgICB3aWR0aCA9IE1FRElVTTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gaW5uZXJXaWR0aCA8IDc2OFxuICAgICAgICAgICAgd2lkdGggPSBTTUFMTDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAod2lkdGggIT09IHRoaXMuc3RhdGUud2lkdGgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICB3aWR0aDogd2lkdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuc3RhdGUud2lkdGg7XG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBXaGVuIHJlbmRlcmluZyB0aGUgY29tcG9uZW50IG9uIHRoZSBzZXJ2ZXIsXG4gICAgICAgICAgICogd2UgaGF2ZSBubyBpZGVhIGFib3V0IHRoZSBzY3JlZW4gd2lkdGguXG4gICAgICAgICAgICogSW4gb3JkZXIgdG8gcHJldmVudCBibGlua3MgYW5kIGhlbHAgdGhlIHJlY29uY2lsaWF0aW9uXG4gICAgICAgICAgICogd2UgYXJlIG5vdCByZW5kZXJpbmcgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEEgYmV0dGVyIGFsdGVybmF0aXZlIHdvdWxkIGJlIHRvIHNlbmQgY2xpZW50IGhpbnRzLlxuICAgICAgICAgICAqIEJ1dCB0aGUgYnJvd3NlciBzdXBwb3J0IG9mIHRoaXMgQVBJIGlzIGxvdzpcbiAgICAgICAgICAgKiBodHRwOi8vY2FuaXVzZS5jb20vI3NlYXJjaD1jbGllbnQlMjBoaW50XG4gICAgICAgICAgICovXG4gICAgICAgICAgaWYgKHdpZHRoID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBfcmVhY3RFdmVudExpc3RlbmVyMi5kZWZhdWx0LFxuICAgICAgICAgICAgeyB0YXJnZXQ6ICd3aW5kb3cnLCBvblJlc2l6ZTogdGhpcy5oYW5kbGVSZXNpemUgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KE15Q29tcG9uZW50LCAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHtcbiAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoXG4gICAgICAgICAgICB9LCB0aGlzLnByb3BzKSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XSk7XG4gICAgICByZXR1cm4gV2l0aFdpZHRoO1xuICAgIH0oX3JlYWN0LkNvbXBvbmVudCk7XG4gIH07XG59XG5cbi8qKiovIH0pLFxuXG4vKioqLyAxNzA6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciBpc2FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzEpXG5cbi8qKlxuICogRXhwb3NlIGBwYXRoVG9SZWdleHBgLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IHBhdGhUb1JlZ2V4cFxubW9kdWxlLmV4cG9ydHMucGFyc2UgPSBwYXJzZVxubW9kdWxlLmV4cG9ydHMuY29tcGlsZSA9IGNvbXBpbGVcbm1vZHVsZS5leHBvcnRzLnRva2Vuc1RvRnVuY3Rpb24gPSB0b2tlbnNUb0Z1bmN0aW9uXG5tb2R1bGUuZXhwb3J0cy50b2tlbnNUb1JlZ0V4cCA9IHRva2Vuc1RvUmVnRXhwXG5cbi8qKlxuICogVGhlIG1haW4gcGF0aCBtYXRjaGluZyByZWdleHAgdXRpbGl0eS5cbiAqXG4gKiBAdHlwZSB7UmVnRXhwfVxuICovXG52YXIgUEFUSF9SRUdFWFAgPSBuZXcgUmVnRXhwKFtcbiAgLy8gTWF0Y2ggZXNjYXBlZCBjaGFyYWN0ZXJzIHRoYXQgd291bGQgb3RoZXJ3aXNlIGFwcGVhciBpbiBmdXR1cmUgbWF0Y2hlcy5cbiAgLy8gVGhpcyBhbGxvd3MgdGhlIHVzZXIgdG8gZXNjYXBlIHNwZWNpYWwgY2hhcmFjdGVycyB0aGF0IHdvbid0IHRyYW5zZm9ybS5cbiAgJyhcXFxcXFxcXC4pJyxcbiAgLy8gTWF0Y2ggRXhwcmVzcy1zdHlsZSBwYXJhbWV0ZXJzIGFuZCB1bi1uYW1lZCBwYXJhbWV0ZXJzIHdpdGggYSBwcmVmaXhcbiAgLy8gYW5kIG9wdGlvbmFsIHN1ZmZpeGVzLiBNYXRjaGVzIGFwcGVhciBhczpcbiAgLy9cbiAgLy8gXCIvOnRlc3QoXFxcXGQrKT9cIiA9PiBbXCIvXCIsIFwidGVzdFwiLCBcIlxcZCtcIiwgdW5kZWZpbmVkLCBcIj9cIiwgdW5kZWZpbmVkXVxuICAvLyBcIi9yb3V0ZShcXFxcZCspXCIgID0+IFt1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBcIlxcZCtcIiwgdW5kZWZpbmVkLCB1bmRlZmluZWRdXG4gIC8vIFwiLypcIiAgICAgICAgICAgID0+IFtcIi9cIiwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBcIipcIl1cbiAgJyhbXFxcXC8uXSk/KD86KD86XFxcXDooXFxcXHcrKSg/OlxcXFwoKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKCldKSspXFxcXCkpP3xcXFxcKCgoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpXSkrKVxcXFwpKShbKyo/XSk/fChcXFxcKikpJ1xuXS5qb2luKCd8JyksICdnJylcblxuLyoqXG4gKiBQYXJzZSBhIHN0cmluZyBmb3IgdGhlIHJhdyB0b2tlbnMuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSAgc3RyXG4gKiBAcGFyYW0gIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAcmV0dXJuIHshQXJyYXl9XG4gKi9cbmZ1bmN0aW9uIHBhcnNlIChzdHIsIG9wdGlvbnMpIHtcbiAgdmFyIHRva2VucyA9IFtdXG4gIHZhciBrZXkgPSAwXG4gIHZhciBpbmRleCA9IDBcbiAgdmFyIHBhdGggPSAnJ1xuICB2YXIgZGVmYXVsdERlbGltaXRlciA9IG9wdGlvbnMgJiYgb3B0aW9ucy5kZWxpbWl0ZXIgfHwgJy8nXG4gIHZhciByZXNcblxuICB3aGlsZSAoKHJlcyA9IFBBVEhfUkVHRVhQLmV4ZWMoc3RyKSkgIT0gbnVsbCkge1xuICAgIHZhciBtID0gcmVzWzBdXG4gICAgdmFyIGVzY2FwZWQgPSByZXNbMV1cbiAgICB2YXIgb2Zmc2V0ID0gcmVzLmluZGV4XG4gICAgcGF0aCArPSBzdHIuc2xpY2UoaW5kZXgsIG9mZnNldClcbiAgICBpbmRleCA9IG9mZnNldCArIG0ubGVuZ3RoXG5cbiAgICAvLyBJZ25vcmUgYWxyZWFkeSBlc2NhcGVkIHNlcXVlbmNlcy5cbiAgICBpZiAoZXNjYXBlZCkge1xuICAgICAgcGF0aCArPSBlc2NhcGVkWzFdXG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIHZhciBuZXh0ID0gc3RyW2luZGV4XVxuICAgIHZhciBwcmVmaXggPSByZXNbMl1cbiAgICB2YXIgbmFtZSA9IHJlc1szXVxuICAgIHZhciBjYXB0dXJlID0gcmVzWzRdXG4gICAgdmFyIGdyb3VwID0gcmVzWzVdXG4gICAgdmFyIG1vZGlmaWVyID0gcmVzWzZdXG4gICAgdmFyIGFzdGVyaXNrID0gcmVzWzddXG5cbiAgICAvLyBQdXNoIHRoZSBjdXJyZW50IHBhdGggb250byB0aGUgdG9rZW5zLlxuICAgIGlmIChwYXRoKSB7XG4gICAgICB0b2tlbnMucHVzaChwYXRoKVxuICAgICAgcGF0aCA9ICcnXG4gICAgfVxuXG4gICAgdmFyIHBhcnRpYWwgPSBwcmVmaXggIT0gbnVsbCAmJiBuZXh0ICE9IG51bGwgJiYgbmV4dCAhPT0gcHJlZml4XG4gICAgdmFyIHJlcGVhdCA9IG1vZGlmaWVyID09PSAnKycgfHwgbW9kaWZpZXIgPT09ICcqJ1xuICAgIHZhciBvcHRpb25hbCA9IG1vZGlmaWVyID09PSAnPycgfHwgbW9kaWZpZXIgPT09ICcqJ1xuICAgIHZhciBkZWxpbWl0ZXIgPSByZXNbMl0gfHwgZGVmYXVsdERlbGltaXRlclxuICAgIHZhciBwYXR0ZXJuID0gY2FwdHVyZSB8fCBncm91cFxuXG4gICAgdG9rZW5zLnB1c2goe1xuICAgICAgbmFtZTogbmFtZSB8fCBrZXkrKyxcbiAgICAgIHByZWZpeDogcHJlZml4IHx8ICcnLFxuICAgICAgZGVsaW1pdGVyOiBkZWxpbWl0ZXIsXG4gICAgICBvcHRpb25hbDogb3B0aW9uYWwsXG4gICAgICByZXBlYXQ6IHJlcGVhdCxcbiAgICAgIHBhcnRpYWw6IHBhcnRpYWwsXG4gICAgICBhc3RlcmlzazogISFhc3RlcmlzayxcbiAgICAgIHBhdHRlcm46IHBhdHRlcm4gPyBlc2NhcGVHcm91cChwYXR0ZXJuKSA6IChhc3RlcmlzayA/ICcuKicgOiAnW14nICsgZXNjYXBlU3RyaW5nKGRlbGltaXRlcikgKyAnXSs/JylcbiAgICB9KVxuICB9XG5cbiAgLy8gTWF0Y2ggYW55IGNoYXJhY3RlcnMgc3RpbGwgcmVtYWluaW5nLlxuICBpZiAoaW5kZXggPCBzdHIubGVuZ3RoKSB7XG4gICAgcGF0aCArPSBzdHIuc3Vic3RyKGluZGV4KVxuICB9XG5cbiAgLy8gSWYgdGhlIHBhdGggZXhpc3RzLCBwdXNoIGl0IG9udG8gdGhlIGVuZC5cbiAgaWYgKHBhdGgpIHtcbiAgICB0b2tlbnMucHVzaChwYXRoKVxuICB9XG5cbiAgcmV0dXJuIHRva2Vuc1xufVxuXG4vKipcbiAqIENvbXBpbGUgYSBzdHJpbmcgdG8gYSB0ZW1wbGF0ZSBmdW5jdGlvbiBmb3IgdGhlIHBhdGguXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSAgICAgICAgICAgICBzdHJcbiAqIEBwYXJhbSAge09iamVjdD19ICAgICAgICAgICAgb3B0aW9uc1xuICogQHJldHVybiB7IWZ1bmN0aW9uKE9iamVjdD0sIE9iamVjdD0pfVxuICovXG5mdW5jdGlvbiBjb21waWxlIChzdHIsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIHRva2Vuc1RvRnVuY3Rpb24ocGFyc2Uoc3RyLCBvcHRpb25zKSlcbn1cblxuLyoqXG4gKiBQcmV0dGllciBlbmNvZGluZyBvZiBVUkkgcGF0aCBzZWdtZW50cy5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGVuY29kZVVSSUNvbXBvbmVudFByZXR0eSAoc3RyKSB7XG4gIHJldHVybiBlbmNvZGVVUkkoc3RyKS5yZXBsYWNlKC9bXFwvPyNdL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgcmV0dXJuICclJyArIGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKVxuICB9KVxufVxuXG4vKipcbiAqIEVuY29kZSB0aGUgYXN0ZXJpc2sgcGFyYW1ldGVyLiBTaW1pbGFyIHRvIGBwcmV0dHlgLCBidXQgYWxsb3dzIHNsYXNoZXMuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBlbmNvZGVBc3RlcmlzayAoc3RyKSB7XG4gIHJldHVybiBlbmNvZGVVUkkoc3RyKS5yZXBsYWNlKC9bPyNdL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgcmV0dXJuICclJyArIGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKVxuICB9KVxufVxuXG4vKipcbiAqIEV4cG9zZSBhIG1ldGhvZCBmb3IgdHJhbnNmb3JtaW5nIHRva2VucyBpbnRvIHRoZSBwYXRoIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiB0b2tlbnNUb0Z1bmN0aW9uICh0b2tlbnMpIHtcbiAgLy8gQ29tcGlsZSBhbGwgdGhlIHRva2VucyBpbnRvIHJlZ2V4cHMuXG4gIHZhciBtYXRjaGVzID0gbmV3IEFycmF5KHRva2Vucy5sZW5ndGgpXG5cbiAgLy8gQ29tcGlsZSBhbGwgdGhlIHBhdHRlcm5zIGJlZm9yZSBjb21waWxhdGlvbi5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAodHlwZW9mIHRva2Vuc1tpXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIG1hdGNoZXNbaV0gPSBuZXcgUmVnRXhwKCdeKD86JyArIHRva2Vuc1tpXS5wYXR0ZXJuICsgJykkJylcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKG9iaiwgb3B0cykge1xuICAgIHZhciBwYXRoID0gJydcbiAgICB2YXIgZGF0YSA9IG9iaiB8fCB7fVxuICAgIHZhciBvcHRpb25zID0gb3B0cyB8fCB7fVxuICAgIHZhciBlbmNvZGUgPSBvcHRpb25zLnByZXR0eSA/IGVuY29kZVVSSUNvbXBvbmVudFByZXR0eSA6IGVuY29kZVVSSUNvbXBvbmVudFxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB0b2tlbiA9IHRva2Vuc1tpXVxuXG4gICAgICBpZiAodHlwZW9mIHRva2VuID09PSAnc3RyaW5nJykge1xuICAgICAgICBwYXRoICs9IHRva2VuXG5cbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgdmFyIHZhbHVlID0gZGF0YVt0b2tlbi5uYW1lXVxuICAgICAgdmFyIHNlZ21lbnRcblxuICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgaWYgKHRva2VuLm9wdGlvbmFsKSB7XG4gICAgICAgICAgLy8gUHJlcGVuZCBwYXJ0aWFsIHNlZ21lbnQgcHJlZml4ZXMuXG4gICAgICAgICAgaWYgKHRva2VuLnBhcnRpYWwpIHtcbiAgICAgICAgICAgIHBhdGggKz0gdG9rZW4ucHJlZml4XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBcIicgKyB0b2tlbi5uYW1lICsgJ1wiIHRvIGJlIGRlZmluZWQnKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChpc2FycmF5KHZhbHVlKSkge1xuICAgICAgICBpZiAoIXRva2VuLnJlcGVhdCkge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIFwiJyArIHRva2VuLm5hbWUgKyAnXCIgdG8gbm90IHJlcGVhdCwgYnV0IHJlY2VpdmVkIGAnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpICsgJ2AnKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGlmICh0b2tlbi5vcHRpb25hbCkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgXCInICsgdG9rZW4ubmFtZSArICdcIiB0byBub3QgYmUgZW1wdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmFsdWUubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBzZWdtZW50ID0gZW5jb2RlKHZhbHVlW2pdKVxuXG4gICAgICAgICAgaWYgKCFtYXRjaGVzW2ldLnRlc3Qoc2VnbWVudCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGFsbCBcIicgKyB0b2tlbi5uYW1lICsgJ1wiIHRvIG1hdGNoIFwiJyArIHRva2VuLnBhdHRlcm4gKyAnXCIsIGJ1dCByZWNlaXZlZCBgJyArIEpTT04uc3RyaW5naWZ5KHNlZ21lbnQpICsgJ2AnKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHBhdGggKz0gKGogPT09IDAgPyB0b2tlbi5wcmVmaXggOiB0b2tlbi5kZWxpbWl0ZXIpICsgc2VnbWVudFxuICAgICAgICB9XG5cbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgc2VnbWVudCA9IHRva2VuLmFzdGVyaXNrID8gZW5jb2RlQXN0ZXJpc2sodmFsdWUpIDogZW5jb2RlKHZhbHVlKVxuXG4gICAgICBpZiAoIW1hdGNoZXNbaV0udGVzdChzZWdtZW50KSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBcIicgKyB0b2tlbi5uYW1lICsgJ1wiIHRvIG1hdGNoIFwiJyArIHRva2VuLnBhdHRlcm4gKyAnXCIsIGJ1dCByZWNlaXZlZCBcIicgKyBzZWdtZW50ICsgJ1wiJylcbiAgICAgIH1cblxuICAgICAgcGF0aCArPSB0b2tlbi5wcmVmaXggKyBzZWdtZW50XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhdGhcbiAgfVxufVxuXG4vKipcbiAqIEVzY2FwZSBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBzdHJpbmcuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZXNjYXBlU3RyaW5nIChzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oWy4rKj89XiE6JHt9KClbXFxdfFxcL1xcXFxdKS9nLCAnXFxcXCQxJylcbn1cblxuLyoqXG4gKiBFc2NhcGUgdGhlIGNhcHR1cmluZyBncm91cCBieSBlc2NhcGluZyBzcGVjaWFsIGNoYXJhY3RlcnMgYW5kIG1lYW5pbmcuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSBncm91cFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBlc2NhcGVHcm91cCAoZ3JvdXApIHtcbiAgcmV0dXJuIGdyb3VwLnJlcGxhY2UoLyhbPSE6JFxcLygpXSkvZywgJ1xcXFwkMScpXG59XG5cbi8qKlxuICogQXR0YWNoIHRoZSBrZXlzIGFzIGEgcHJvcGVydHkgb2YgdGhlIHJlZ2V4cC5cbiAqXG4gKiBAcGFyYW0gIHshUmVnRXhwfSByZVxuICogQHBhcmFtICB7QXJyYXl9ICAga2V5c1xuICogQHJldHVybiB7IVJlZ0V4cH1cbiAqL1xuZnVuY3Rpb24gYXR0YWNoS2V5cyAocmUsIGtleXMpIHtcbiAgcmUua2V5cyA9IGtleXNcbiAgcmV0dXJuIHJlXG59XG5cbi8qKlxuICogR2V0IHRoZSBmbGFncyBmb3IgYSByZWdleHAgZnJvbSB0aGUgb3B0aW9ucy5cbiAqXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZmxhZ3MgKG9wdGlvbnMpIHtcbiAgcmV0dXJuIG9wdGlvbnMuc2Vuc2l0aXZlID8gJycgOiAnaSdcbn1cblxuLyoqXG4gKiBQdWxsIG91dCBrZXlzIGZyb20gYSByZWdleHAuXG4gKlxuICogQHBhcmFtICB7IVJlZ0V4cH0gcGF0aFxuICogQHBhcmFtICB7IUFycmF5fSAga2V5c1xuICogQHJldHVybiB7IVJlZ0V4cH1cbiAqL1xuZnVuY3Rpb24gcmVnZXhwVG9SZWdleHAgKHBhdGgsIGtleXMpIHtcbiAgLy8gVXNlIGEgbmVnYXRpdmUgbG9va2FoZWFkIHRvIG1hdGNoIG9ubHkgY2FwdHVyaW5nIGdyb3Vwcy5cbiAgdmFyIGdyb3VwcyA9IHBhdGguc291cmNlLm1hdGNoKC9cXCgoPyFcXD8pL2cpXG5cbiAgaWYgKGdyb3Vwcykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JvdXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBrZXlzLnB1c2goe1xuICAgICAgICBuYW1lOiBpLFxuICAgICAgICBwcmVmaXg6IG51bGwsXG4gICAgICAgIGRlbGltaXRlcjogbnVsbCxcbiAgICAgICAgb3B0aW9uYWw6IGZhbHNlLFxuICAgICAgICByZXBlYXQ6IGZhbHNlLFxuICAgICAgICBwYXJ0aWFsOiBmYWxzZSxcbiAgICAgICAgYXN0ZXJpc2s6IGZhbHNlLFxuICAgICAgICBwYXR0ZXJuOiBudWxsXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhdHRhY2hLZXlzKHBhdGgsIGtleXMpXG59XG5cbi8qKlxuICogVHJhbnNmb3JtIGFuIGFycmF5IGludG8gYSByZWdleHAuXG4gKlxuICogQHBhcmFtICB7IUFycmF5fSAgcGF0aFxuICogQHBhcmFtICB7QXJyYXl9ICAga2V5c1xuICogQHBhcmFtICB7IU9iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7IVJlZ0V4cH1cbiAqL1xuZnVuY3Rpb24gYXJyYXlUb1JlZ2V4cCAocGF0aCwga2V5cywgb3B0aW9ucykge1xuICB2YXIgcGFydHMgPSBbXVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xuICAgIHBhcnRzLnB1c2gocGF0aFRvUmVnZXhwKHBhdGhbaV0sIGtleXMsIG9wdGlvbnMpLnNvdXJjZSlcbiAgfVxuXG4gIHZhciByZWdleHAgPSBuZXcgUmVnRXhwKCcoPzonICsgcGFydHMuam9pbignfCcpICsgJyknLCBmbGFncyhvcHRpb25zKSlcblxuICByZXR1cm4gYXR0YWNoS2V5cyhyZWdleHAsIGtleXMpXG59XG5cbi8qKlxuICogQ3JlYXRlIGEgcGF0aCByZWdleHAgZnJvbSBzdHJpbmcgaW5wdXQuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSAgcGF0aFxuICogQHBhcmFtICB7IUFycmF5fSAga2V5c1xuICogQHBhcmFtICB7IU9iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7IVJlZ0V4cH1cbiAqL1xuZnVuY3Rpb24gc3RyaW5nVG9SZWdleHAgKHBhdGgsIGtleXMsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIHRva2Vuc1RvUmVnRXhwKHBhcnNlKHBhdGgsIG9wdGlvbnMpLCBrZXlzLCBvcHRpb25zKVxufVxuXG4vKipcbiAqIEV4cG9zZSBhIGZ1bmN0aW9uIGZvciB0YWtpbmcgdG9rZW5zIGFuZCByZXR1cm5pbmcgYSBSZWdFeHAuXG4gKlxuICogQHBhcmFtICB7IUFycmF5fSAgICAgICAgICB0b2tlbnNcbiAqIEBwYXJhbSAgeyhBcnJheXxPYmplY3QpPX0ga2V5c1xuICogQHBhcmFtICB7T2JqZWN0PX0gICAgICAgICBvcHRpb25zXG4gKiBAcmV0dXJuIHshUmVnRXhwfVxuICovXG5mdW5jdGlvbiB0b2tlbnNUb1JlZ0V4cCAodG9rZW5zLCBrZXlzLCBvcHRpb25zKSB7XG4gIGlmICghaXNhcnJheShrZXlzKSkge1xuICAgIG9wdGlvbnMgPSAvKiogQHR5cGUgeyFPYmplY3R9ICovIChrZXlzIHx8IG9wdGlvbnMpXG4gICAga2V5cyA9IFtdXG4gIH1cblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuXG4gIHZhciBzdHJpY3QgPSBvcHRpb25zLnN0cmljdFxuICB2YXIgZW5kID0gb3B0aW9ucy5lbmQgIT09IGZhbHNlXG4gIHZhciByb3V0ZSA9ICcnXG5cbiAgLy8gSXRlcmF0ZSBvdmVyIHRoZSB0b2tlbnMgYW5kIGNyZWF0ZSBvdXIgcmVnZXhwIHN0cmluZy5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgdG9rZW4gPSB0b2tlbnNbaV1cblxuICAgIGlmICh0eXBlb2YgdG9rZW4gPT09ICdzdHJpbmcnKSB7XG4gICAgICByb3V0ZSArPSBlc2NhcGVTdHJpbmcodG9rZW4pXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBwcmVmaXggPSBlc2NhcGVTdHJpbmcodG9rZW4ucHJlZml4KVxuICAgICAgdmFyIGNhcHR1cmUgPSAnKD86JyArIHRva2VuLnBhdHRlcm4gKyAnKSdcblxuICAgICAga2V5cy5wdXNoKHRva2VuKVxuXG4gICAgICBpZiAodG9rZW4ucmVwZWF0KSB7XG4gICAgICAgIGNhcHR1cmUgKz0gJyg/OicgKyBwcmVmaXggKyBjYXB0dXJlICsgJykqJ1xuICAgICAgfVxuXG4gICAgICBpZiAodG9rZW4ub3B0aW9uYWwpIHtcbiAgICAgICAgaWYgKCF0b2tlbi5wYXJ0aWFsKSB7XG4gICAgICAgICAgY2FwdHVyZSA9ICcoPzonICsgcHJlZml4ICsgJygnICsgY2FwdHVyZSArICcpKT8nXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FwdHVyZSA9IHByZWZpeCArICcoJyArIGNhcHR1cmUgKyAnKT8nXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhcHR1cmUgPSBwcmVmaXggKyAnKCcgKyBjYXB0dXJlICsgJyknXG4gICAgICB9XG5cbiAgICAgIHJvdXRlICs9IGNhcHR1cmVcbiAgICB9XG4gIH1cblxuICB2YXIgZGVsaW1pdGVyID0gZXNjYXBlU3RyaW5nKG9wdGlvbnMuZGVsaW1pdGVyIHx8ICcvJylcbiAgdmFyIGVuZHNXaXRoRGVsaW1pdGVyID0gcm91dGUuc2xpY2UoLWRlbGltaXRlci5sZW5ndGgpID09PSBkZWxpbWl0ZXJcblxuICAvLyBJbiBub24tc3RyaWN0IG1vZGUgd2UgYWxsb3cgYSBzbGFzaCBhdCB0aGUgZW5kIG9mIG1hdGNoLiBJZiB0aGUgcGF0aCB0b1xuICAvLyBtYXRjaCBhbHJlYWR5IGVuZHMgd2l0aCBhIHNsYXNoLCB3ZSByZW1vdmUgaXQgZm9yIGNvbnNpc3RlbmN5LiBUaGUgc2xhc2hcbiAgLy8gaXMgdmFsaWQgYXQgdGhlIGVuZCBvZiBhIHBhdGggbWF0Y2gsIG5vdCBpbiB0aGUgbWlkZGxlLiBUaGlzIGlzIGltcG9ydGFudFxuICAvLyBpbiBub24tZW5kaW5nIG1vZGUsIHdoZXJlIFwiL3Rlc3QvXCIgc2hvdWxkbid0IG1hdGNoIFwiL3Rlc3QvL3JvdXRlXCIuXG4gIGlmICghc3RyaWN0KSB7XG4gICAgcm91dGUgPSAoZW5kc1dpdGhEZWxpbWl0ZXIgPyByb3V0ZS5zbGljZSgwLCAtZGVsaW1pdGVyLmxlbmd0aCkgOiByb3V0ZSkgKyAnKD86JyArIGRlbGltaXRlciArICcoPz0kKSk/J1xuICB9XG5cbiAgaWYgKGVuZCkge1xuICAgIHJvdXRlICs9ICckJ1xuICB9IGVsc2Uge1xuICAgIC8vIEluIG5vbi1lbmRpbmcgbW9kZSwgd2UgbmVlZCB0aGUgY2FwdHVyaW5nIGdyb3VwcyB0byBtYXRjaCBhcyBtdWNoIGFzXG4gICAgLy8gcG9zc2libGUgYnkgdXNpbmcgYSBwb3NpdGl2ZSBsb29rYWhlYWQgdG8gdGhlIGVuZCBvciBuZXh0IHBhdGggc2VnbWVudC5cbiAgICByb3V0ZSArPSBzdHJpY3QgJiYgZW5kc1dpdGhEZWxpbWl0ZXIgPyAnJyA6ICcoPz0nICsgZGVsaW1pdGVyICsgJ3wkKSdcbiAgfVxuXG4gIHJldHVybiBhdHRhY2hLZXlzKG5ldyBSZWdFeHAoJ14nICsgcm91dGUsIGZsYWdzKG9wdGlvbnMpKSwga2V5cylcbn1cblxuLyoqXG4gKiBOb3JtYWxpemUgdGhlIGdpdmVuIHBhdGggc3RyaW5nLCByZXR1cm5pbmcgYSByZWd1bGFyIGV4cHJlc3Npb24uXG4gKlxuICogQW4gZW1wdHkgYXJyYXkgY2FuIGJlIHBhc3NlZCBpbiBmb3IgdGhlIGtleXMsIHdoaWNoIHdpbGwgaG9sZCB0aGVcbiAqIHBsYWNlaG9sZGVyIGtleSBkZXNjcmlwdGlvbnMuIEZvciBleGFtcGxlLCB1c2luZyBgL3VzZXIvOmlkYCwgYGtleXNgIHdpbGxcbiAqIGNvbnRhaW4gYFt7IG5hbWU6ICdpZCcsIGRlbGltaXRlcjogJy8nLCBvcHRpb25hbDogZmFsc2UsIHJlcGVhdDogZmFsc2UgfV1gLlxuICpcbiAqIEBwYXJhbSAgeyhzdHJpbmd8UmVnRXhwfEFycmF5KX0gcGF0aFxuICogQHBhcmFtICB7KEFycmF5fE9iamVjdCk9fSAgICAgICBrZXlzXG4gKiBAcGFyYW0gIHtPYmplY3Q9fSAgICAgICAgICAgICAgIG9wdGlvbnNcbiAqIEByZXR1cm4geyFSZWdFeHB9XG4gKi9cbmZ1bmN0aW9uIHBhdGhUb1JlZ2V4cCAocGF0aCwga2V5cywgb3B0aW9ucykge1xuICBpZiAoIWlzYXJyYXkoa2V5cykpIHtcbiAgICBvcHRpb25zID0gLyoqIEB0eXBlIHshT2JqZWN0fSAqLyAoa2V5cyB8fCBvcHRpb25zKVxuICAgIGtleXMgPSBbXVxuICB9XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cblxuICBpZiAocGF0aCBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgIHJldHVybiByZWdleHBUb1JlZ2V4cChwYXRoLCAvKiogQHR5cGUgeyFBcnJheX0gKi8gKGtleXMpKVxuICB9XG5cbiAgaWYgKGlzYXJyYXkocGF0aCkpIHtcbiAgICByZXR1cm4gYXJyYXlUb1JlZ2V4cCgvKiogQHR5cGUgeyFBcnJheX0gKi8gKHBhdGgpLCAvKiogQHR5cGUgeyFBcnJheX0gKi8gKGtleXMpLCBvcHRpb25zKVxuICB9XG5cbiAgcmV0dXJuIHN0cmluZ1RvUmVnZXhwKC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAocGF0aCksIC8qKiBAdHlwZSB7IUFycmF5fSAqLyAoa2V5cyksIG9wdGlvbnMpXG59XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDE3MTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcnIpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyAxODk6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3JlYWN0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9yZWFjdF9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3JlYWN0X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9wcm9wX3R5cGVzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9wcm9wX3R5cGVzX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcHJvcF90eXBlc19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaGlzdG9yeV9jcmVhdGVCcm93c2VySGlzdG9yeV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzUpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19oaXN0b3J5X2NyZWF0ZUJyb3dzZXJIaXN0b3J5X19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaGlzdG9yeV9jcmVhdGVCcm93c2VySGlzdG9yeV9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1JvdXRlcl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSk7XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cblxuXG5cblxuXG5cbi8qKlxuICogVGhlIHB1YmxpYyBBUEkgZm9yIGEgPFJvdXRlcj4gdGhhdCB1c2VzIEhUTUw1IGhpc3RvcnkuXG4gKi9cblxudmFyIEJyb3dzZXJSb3V0ZXIgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoQnJvd3NlclJvdXRlciwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQnJvd3NlclJvdXRlcigpIHtcbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJyb3dzZXJSb3V0ZXIpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfUmVhY3QkQ29tcG9uZW50LmNhbGwuYXBwbHkoX1JlYWN0JENvbXBvbmVudCwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLmhpc3RvcnkgPSBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaGlzdG9yeV9jcmVhdGVCcm93c2VySGlzdG9yeV9fX2RlZmF1bHQoKShfdGhpcy5wcm9wcyksIF90ZW1wKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgQnJvd3NlclJvdXRlci5wcm90b3R5cGUuY29tcG9uZW50V2lsbE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCgpKCF0aGlzLnByb3BzLmhpc3RvcnksICc8QnJvd3NlclJvdXRlcj4gaWdub3JlcyB0aGUgaGlzdG9yeSBwcm9wLiBUbyB1c2UgYSBjdXN0b20gaGlzdG9yeSwgJyArICd1c2UgYGltcG9ydCB7IFJvdXRlciB9YCBpbnN0ZWFkIG9mIGBpbXBvcnQgeyBCcm93c2VyUm91dGVyIGFzIFJvdXRlciB9YC4nKTtcbiAgfTtcblxuICBCcm93c2VyUm91dGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgcmV0dXJuIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9yZWFjdF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fUm91dGVyX19bXCJhXCIgLyogZGVmYXVsdCAqL10sIHsgaGlzdG9yeTogdGhpcy5oaXN0b3J5LCBjaGlsZHJlbjogdGhpcy5wcm9wcy5jaGlsZHJlbiB9KTtcbiAgfTtcblxuICByZXR1cm4gQnJvd3NlclJvdXRlcjtcbn0oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3JlYWN0X19fZGVmYXVsdC5hLkNvbXBvbmVudCk7XG5cbkJyb3dzZXJSb3V0ZXIucHJvcFR5cGVzID0ge1xuICBiYXNlbmFtZTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuc3RyaW5nLFxuICBmb3JjZVJlZnJlc2g6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmJvb2wsXG4gIGdldFVzZXJDb25maXJtYXRpb246IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmZ1bmMsXG4gIGtleUxlbmd0aDogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEubnVtYmVyLFxuICBjaGlsZHJlbjogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEubm9kZVxufTtcblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKEJyb3dzZXJSb3V0ZXIpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMTkwOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9yZWFjdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcmVhY3RfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9yZWFjdF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcHJvcF90eXBlc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcHJvcF90eXBlc19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3Byb3BfdHlwZXNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2hpc3RvcnlfY3JlYXRlSGFzaEhpc3RvcnlfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTM2KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaGlzdG9yeV9jcmVhdGVIYXNoSGlzdG9yeV9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2hpc3RvcnlfY3JlYXRlSGFzaEhpc3RvcnlfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19Sb3V0ZXJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpO1xuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5cblxuXG5cblxuXG4vKipcbiAqIFRoZSBwdWJsaWMgQVBJIGZvciBhIDxSb3V0ZXI+IHRoYXQgdXNlcyB3aW5kb3cubG9jYXRpb24uaGFzaC5cbiAqL1xuXG52YXIgSGFzaFJvdXRlciA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhIYXNoUm91dGVyLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBIYXNoUm91dGVyKCkge1xuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSGFzaFJvdXRlcik7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9SZWFjdCRDb21wb25lbnQuY2FsbC5hcHBseShfUmVhY3QkQ29tcG9uZW50LCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuaGlzdG9yeSA9IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19oaXN0b3J5X2NyZWF0ZUhhc2hIaXN0b3J5X19fZGVmYXVsdCgpKF90aGlzLnByb3BzKSwgX3RlbXApLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7XG4gIH1cblxuICBIYXNoUm91dGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0KCkoIXRoaXMucHJvcHMuaGlzdG9yeSwgJzxIYXNoUm91dGVyPiBpZ25vcmVzIHRoZSBoaXN0b3J5IHByb3AuIFRvIHVzZSBhIGN1c3RvbSBoaXN0b3J5LCAnICsgJ3VzZSBgaW1wb3J0IHsgUm91dGVyIH1gIGluc3RlYWQgb2YgYGltcG9ydCB7IEhhc2hSb3V0ZXIgYXMgUm91dGVyIH1gLicpO1xuICB9O1xuXG4gIEhhc2hSb3V0ZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICByZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3JlYWN0X19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19Sb3V0ZXJfX1tcImFcIiAvKiBkZWZhdWx0ICovXSwgeyBoaXN0b3J5OiB0aGlzLmhpc3RvcnksIGNoaWxkcmVuOiB0aGlzLnByb3BzLmNoaWxkcmVuIH0pO1xuICB9O1xuXG4gIHJldHVybiBIYXNoUm91dGVyO1xufShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcmVhY3RfX19kZWZhdWx0LmEuQ29tcG9uZW50KTtcblxuSGFzaFJvdXRlci5wcm9wVHlwZXMgPSB7XG4gIGJhc2VuYW1lOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5zdHJpbmcsXG4gIGdldFVzZXJDb25maXJtYXRpb246IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmZ1bmMsXG4gIGhhc2hUeXBlOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vbmVPZihbJ2hhc2hiYW5nJywgJ25vc2xhc2gnLCAnc2xhc2gnXSksXG4gIGNoaWxkcmVuOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5ub2RlXG59O1xuXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAoSGFzaFJvdXRlcik7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAxOTE6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9yb3V0ZXJfZXNfTWVtb3J5Um91dGVyX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5OSk7XG4vLyBXcml0dGVuIGluIHRoaXMgcm91bmQgYWJvdXQgd2F5IGZvciBiYWJlbC10cmFuc2Zvcm0taW1wb3J0c1xuXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19NZW1vcnlSb3V0ZXJfX1tcImFcIiAvKiBkZWZhdWx0ICovXSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAxOTI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19Sb3V0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19MaW5rX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk0KTtcbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKG9iaiwga2V5cykgeyB2YXIgdGFyZ2V0ID0ge307IGZvciAodmFyIGkgaW4gb2JqKSB7IGlmIChrZXlzLmluZGV4T2YoaSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgaSkpIGNvbnRpbnVlOyB0YXJnZXRbaV0gPSBvYmpbaV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5cblxuXG5cblxuLyoqXG4gKiBBIDxMaW5rPiB3cmFwcGVyIHRoYXQga25vd3MgaWYgaXQncyBcImFjdGl2ZVwiIG9yIG5vdC5cbiAqL1xudmFyIE5hdkxpbmsgPSBmdW5jdGlvbiBOYXZMaW5rKF9yZWYpIHtcbiAgdmFyIHRvID0gX3JlZi50byxcbiAgICAgIGV4YWN0ID0gX3JlZi5leGFjdCxcbiAgICAgIHN0cmljdCA9IF9yZWYuc3RyaWN0LFxuICAgICAgbG9jYXRpb24gPSBfcmVmLmxvY2F0aW9uLFxuICAgICAgYWN0aXZlQ2xhc3NOYW1lID0gX3JlZi5hY3RpdmVDbGFzc05hbWUsXG4gICAgICBjbGFzc05hbWUgPSBfcmVmLmNsYXNzTmFtZSxcbiAgICAgIGFjdGl2ZVN0eWxlID0gX3JlZi5hY3RpdmVTdHlsZSxcbiAgICAgIHN0eWxlID0gX3JlZi5zdHlsZSxcbiAgICAgIGdldElzQWN0aXZlID0gX3JlZi5pc0FjdGl2ZSxcbiAgICAgIGFyaWFDdXJyZW50ID0gX3JlZi5hcmlhQ3VycmVudCxcbiAgICAgIHJlc3QgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgWyd0bycsICdleGFjdCcsICdzdHJpY3QnLCAnbG9jYXRpb24nLCAnYWN0aXZlQ2xhc3NOYW1lJywgJ2NsYXNzTmFtZScsICdhY3RpdmVTdHlsZScsICdzdHlsZScsICdpc0FjdGl2ZScsICdhcmlhQ3VycmVudCddKTtcblxuICByZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19Sb3V0ZV9fW1wiYVwiIC8qIGRlZmF1bHQgKi9dLCB7XG4gICAgcGF0aDogKHR5cGVvZiB0byA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodG8pKSA9PT0gJ29iamVjdCcgPyB0by5wYXRobmFtZSA6IHRvLFxuICAgIGV4YWN0OiBleGFjdCxcbiAgICBzdHJpY3Q6IHN0cmljdCxcbiAgICBsb2NhdGlvbjogbG9jYXRpb24sXG4gICAgY2hpbGRyZW46IGZ1bmN0aW9uIGNoaWxkcmVuKF9yZWYyKSB7XG4gICAgICB2YXIgbG9jYXRpb24gPSBfcmVmMi5sb2NhdGlvbixcbiAgICAgICAgICBtYXRjaCA9IF9yZWYyLm1hdGNoO1xuXG4gICAgICB2YXIgaXNBY3RpdmUgPSAhIShnZXRJc0FjdGl2ZSA/IGdldElzQWN0aXZlKG1hdGNoLCBsb2NhdGlvbikgOiBtYXRjaCk7XG5cbiAgICAgIHJldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX0xpbmtfX1tcImFcIiAvKiBkZWZhdWx0ICovXSwgX2V4dGVuZHMoe1xuICAgICAgICB0bzogdG8sXG4gICAgICAgIGNsYXNzTmFtZTogaXNBY3RpdmUgPyBbY2xhc3NOYW1lLCBhY3RpdmVDbGFzc05hbWVdLmZpbHRlcihmdW5jdGlvbiAoaSkge1xuICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9KS5qb2luKCcgJykgOiBjbGFzc05hbWUsXG4gICAgICAgIHN0eWxlOiBpc0FjdGl2ZSA/IF9leHRlbmRzKHt9LCBzdHlsZSwgYWN0aXZlU3R5bGUpIDogc3R5bGUsXG4gICAgICAgICdhcmlhLWN1cnJlbnQnOiBpc0FjdGl2ZSAmJiBhcmlhQ3VycmVudFxuICAgICAgfSwgcmVzdCkpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5OYXZMaW5rLnByb3BUeXBlcyA9IHtcbiAgdG86IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fTGlua19fW1wiYVwiIC8qIGRlZmF1bHQgKi9dLnByb3BUeXBlcy50byxcbiAgZXhhY3Q6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmJvb2wsXG4gIHN0cmljdDogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuYm9vbCxcbiAgbG9jYXRpb246IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLm9iamVjdCxcbiAgYWN0aXZlQ2xhc3NOYW1lOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5zdHJpbmcsXG4gIGNsYXNzTmFtZTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuc3RyaW5nLFxuICBhY3RpdmVTdHlsZTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEub2JqZWN0LFxuICBzdHlsZTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEub2JqZWN0LFxuICBpc0FjdGl2ZTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuZnVuYyxcbiAgYXJpYUN1cnJlbnQ6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLm9uZU9mKFsncGFnZScsICdzdGVwJywgJ2xvY2F0aW9uJywgJ3RydWUnXSlcbn07XG5cbk5hdkxpbmsuZGVmYXVsdFByb3BzID0ge1xuICBhY3RpdmVDbGFzc05hbWU6ICdhY3RpdmUnLFxuICBhcmlhQ3VycmVudDogJ3RydWUnXG59O1xuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKE5hdkxpbmspO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMTkzOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3Rfcm91dGVyX2VzX1Byb21wdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDApO1xuLy8gV3JpdHRlbiBpbiB0aGlzIHJvdW5kIGFib3V0IHdheSBmb3IgYmFiZWwtdHJhbnNmb3JtLWltcG9ydHNcblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9yb3V0ZXJfZXNfUHJvbXB0X19bXCJhXCIgLyogZGVmYXVsdCAqL10pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMTk0OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3Rfcm91dGVyX2VzX1JlZGlyZWN0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwMSk7XG4vLyBXcml0dGVuIGluIHRoaXMgcm91bmQgYWJvdXQgd2F5IGZvciBiYWJlbC10cmFuc2Zvcm0taW1wb3J0c1xuXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19SZWRpcmVjdF9fW1wiYVwiIC8qIGRlZmF1bHQgKi9dKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDE5NTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19TdGF0aWNSb3V0ZXJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjAyKTtcbi8vIFdyaXR0ZW4gaW4gdGhpcyByb3VuZCBhYm91dCB3YXkgZm9yIGJhYmVsLXRyYW5zZm9ybS1pbXBvcnRzXG5cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiYVwiXSA9IChfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3Rfcm91dGVyX2VzX1N0YXRpY1JvdXRlcl9fW1wiYVwiIC8qIGRlZmF1bHQgKi9dKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDE5Njpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19Td2l0Y2hfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjAzKTtcbi8vIFdyaXR0ZW4gaW4gdGhpcyByb3VuZCBhYm91dCB3YXkgZm9yIGJhYmVsLXRyYW5zZm9ybS1pbXBvcnRzXG5cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiYVwiXSA9IChfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3Rfcm91dGVyX2VzX1N3aXRjaF9fW1wiYVwiIC8qIGRlZmF1bHQgKi9dKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDE5Nzpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19tYXRjaFBhdGhfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTcpO1xuLy8gV3JpdHRlbiBpbiB0aGlzIHJvdW5kIGFib3V0IHdheSBmb3IgYmFiZWwtdHJhbnNmb3JtLWltcG9ydHNcblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9yb3V0ZXJfZXNfbWF0Y2hQYXRoX19bXCJhXCIgLyogZGVmYXVsdCAqL10pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMTk4OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3Rfcm91dGVyX2VzX3dpdGhSb3V0ZXJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjA0KTtcbi8vIFdyaXR0ZW4gaW4gdGhpcyByb3VuZCBhYm91dCB3YXkgZm9yIGJhYmVsLXRyYW5zZm9ybS1pbXBvcnRzXG5cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiYVwiXSA9IChfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3Rfcm91dGVyX2VzX3dpdGhSb3V0ZXJfX1tcImFcIiAvKiBkZWZhdWx0ICovXSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAxOTk6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3JlYWN0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9yZWFjdF9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3JlYWN0X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9wcm9wX3R5cGVzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9wcm9wX3R5cGVzX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcHJvcF90eXBlc19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaGlzdG9yeV9jcmVhdGVNZW1vcnlIaXN0b3J5X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2hpc3RvcnlfY3JlYXRlTWVtb3J5SGlzdG9yeV9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2hpc3RvcnlfY3JlYXRlTWVtb3J5SGlzdG9yeV9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1JvdXRlcl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nik7XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cblxuXG5cblxuXG5cbi8qKlxuICogVGhlIHB1YmxpYyBBUEkgZm9yIGEgPFJvdXRlcj4gdGhhdCBzdG9yZXMgbG9jYXRpb24gaW4gbWVtb3J5LlxuICovXG5cbnZhciBNZW1vcnlSb3V0ZXIgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoTWVtb3J5Um91dGVyLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBNZW1vcnlSb3V0ZXIoKSB7XG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNZW1vcnlSb3V0ZXIpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfUmVhY3QkQ29tcG9uZW50LmNhbGwuYXBwbHkoX1JlYWN0JENvbXBvbmVudCwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLmhpc3RvcnkgPSBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaGlzdG9yeV9jcmVhdGVNZW1vcnlIaXN0b3J5X19fZGVmYXVsdCgpKF90aGlzLnByb3BzKSwgX3RlbXApLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7XG4gIH1cblxuICBNZW1vcnlSb3V0ZXIucHJvdG90eXBlLmNvbXBvbmVudFdpbGxNb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQoKSghdGhpcy5wcm9wcy5oaXN0b3J5LCAnPE1lbW9yeVJvdXRlcj4gaWdub3JlcyB0aGUgaGlzdG9yeSBwcm9wLiBUbyB1c2UgYSBjdXN0b20gaGlzdG9yeSwgJyArICd1c2UgYGltcG9ydCB7IFJvdXRlciB9YCBpbnN0ZWFkIG9mIGBpbXBvcnQgeyBNZW1vcnlSb3V0ZXIgYXMgUm91dGVyIH1gLicpO1xuICB9O1xuXG4gIE1lbW9yeVJvdXRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHJldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcmVhY3RfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1JvdXRlcl9fW1wiYVwiIC8qIGRlZmF1bHQgKi9dLCB7IGhpc3Rvcnk6IHRoaXMuaGlzdG9yeSwgY2hpbGRyZW46IHRoaXMucHJvcHMuY2hpbGRyZW4gfSk7XG4gIH07XG5cbiAgcmV0dXJuIE1lbW9yeVJvdXRlcjtcbn0oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3JlYWN0X19fZGVmYXVsdC5hLkNvbXBvbmVudCk7XG5cbk1lbW9yeVJvdXRlci5wcm9wVHlwZXMgPSB7XG4gIGluaXRpYWxFbnRyaWVzOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5hcnJheSxcbiAgaW5pdGlhbEluZGV4OiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5udW1iZXIsXG4gIGdldFVzZXJDb25maXJtYXRpb246IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmZ1bmMsXG4gIGtleUxlbmd0aDogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEubnVtYmVyLFxuICBjaGlsZHJlbjogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEubm9kZVxufTtcblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKE1lbW9yeVJvdXRlcik7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAyMDA6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX2ludmFyaWFudF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX2ludmFyaWFudF9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX2ludmFyaWFudF9fKTtcbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuXG5cblxuXG4vKipcbiAqIFRoZSBwdWJsaWMgQVBJIGZvciBwcm9tcHRpbmcgdGhlIHVzZXIgYmVmb3JlIG5hdmlnYXRpbmcgYXdheVxuICogZnJvbSBhIHNjcmVlbiB3aXRoIGEgY29tcG9uZW50LlxuICovXG5cbnZhciBQcm9tcHQgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoUHJvbXB0LCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBQcm9tcHQoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb21wdCk7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX1JlYWN0JENvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIFByb21wdC5wcm90b3R5cGUuZW5hYmxlID0gZnVuY3Rpb24gZW5hYmxlKG1lc3NhZ2UpIHtcbiAgICBpZiAodGhpcy51bmJsb2NrKSB0aGlzLnVuYmxvY2soKTtcblxuICAgIHRoaXMudW5ibG9jayA9IHRoaXMuY29udGV4dC5yb3V0ZXIuaGlzdG9yeS5ibG9jayhtZXNzYWdlKTtcbiAgfTtcblxuICBQcm9tcHQucHJvdG90eXBlLmRpc2FibGUgPSBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgIGlmICh0aGlzLnVuYmxvY2spIHtcbiAgICAgIHRoaXMudW5ibG9jaygpO1xuICAgICAgdGhpcy51bmJsb2NrID0gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgUHJvbXB0LnByb3RvdHlwZS5jb21wb25lbnRXaWxsTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX2ludmFyaWFudF9fX2RlZmF1bHQoKSh0aGlzLmNvbnRleHQucm91dGVyLCAnWW91IHNob3VsZCBub3QgdXNlIDxQcm9tcHQ+IG91dHNpZGUgYSA8Um91dGVyPicpO1xuXG4gICAgaWYgKHRoaXMucHJvcHMud2hlbikgdGhpcy5lbmFibGUodGhpcy5wcm9wcy5tZXNzYWdlKTtcbiAgfTtcblxuICBQcm9tcHQucHJvdG90eXBlLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgIGlmIChuZXh0UHJvcHMud2hlbikge1xuICAgICAgaWYgKCF0aGlzLnByb3BzLndoZW4gfHwgdGhpcy5wcm9wcy5tZXNzYWdlICE9PSBuZXh0UHJvcHMubWVzc2FnZSkgdGhpcy5lbmFibGUobmV4dFByb3BzLm1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRpc2FibGUoKTtcbiAgICB9XG4gIH07XG5cbiAgUHJvbXB0LnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMuZGlzYWJsZSgpO1xuICB9O1xuXG4gIFByb21wdC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIHJldHVybiBQcm9tcHQ7XG59KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fX2RlZmF1bHQuYS5Db21wb25lbnQpO1xuXG5Qcm9tcHQucHJvcFR5cGVzID0ge1xuICB3aGVuOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5ib29sLFxuICBtZXNzYWdlOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vbmVPZlR5cGUoW19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmZ1bmMsIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLnN0cmluZ10pLmlzUmVxdWlyZWRcbn07XG5Qcm9tcHQuZGVmYXVsdFByb3BzID0ge1xuICB3aGVuOiB0cnVlXG59O1xuUHJvbXB0LmNvbnRleHRUeXBlcyA9IHtcbiAgcm91dGVyOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5zaGFwZSh7XG4gICAgaGlzdG9yeTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuc2hhcGUoe1xuICAgICAgYmxvY2s6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmZ1bmMuaXNSZXF1aXJlZFxuICAgIH0pLmlzUmVxdWlyZWRcbiAgfSkuaXNSZXF1aXJlZFxufTtcblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKFByb21wdCk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAyMDE6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3dhcm5pbmdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl93YXJuaW5nX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfd2FybmluZ19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaW52YXJpYW50X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaW52YXJpYW50X19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaW52YXJpYW50X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9oaXN0b3J5X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MSk7XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cblxuXG5cblxuXG5cbi8qKlxuICogVGhlIHB1YmxpYyBBUEkgZm9yIHVwZGF0aW5nIHRoZSBsb2NhdGlvbiBwcm9ncmFtbWF0aWNhbGx5XG4gKiB3aXRoIGEgY29tcG9uZW50LlxuICovXG5cbnZhciBSZWRpcmVjdCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhSZWRpcmVjdCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gUmVkaXJlY3QoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlZGlyZWN0KTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfUmVhY3QkQ29tcG9uZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgUmVkaXJlY3QucHJvdG90eXBlLmlzU3RhdGljID0gZnVuY3Rpb24gaXNTdGF0aWMoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dC5yb3V0ZXIgJiYgdGhpcy5jb250ZXh0LnJvdXRlci5zdGF0aWNDb250ZXh0O1xuICB9O1xuXG4gIFJlZGlyZWN0LnByb3RvdHlwZS5jb21wb25lbnRXaWxsTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2ludmFyaWFudF9fX2RlZmF1bHQoKSh0aGlzLmNvbnRleHQucm91dGVyLCAnWW91IHNob3VsZCBub3QgdXNlIDxSZWRpcmVjdD4gb3V0c2lkZSBhIDxSb3V0ZXI+Jyk7XG5cbiAgICBpZiAodGhpcy5pc1N0YXRpYygpKSB0aGlzLnBlcmZvcm0oKTtcbiAgfTtcblxuICBSZWRpcmVjdC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBpZiAoIXRoaXMuaXNTdGF0aWMoKSkgdGhpcy5wZXJmb3JtKCk7XG4gIH07XG5cbiAgUmVkaXJlY3QucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICB2YXIgcHJldlRvID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9oaXN0b3J5X19bXCJhXCIgLyogY3JlYXRlTG9jYXRpb24gKi9dKShwcmV2UHJvcHMudG8pO1xuICAgIHZhciBuZXh0VG8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X2hpc3RvcnlfX1tcImFcIiAvKiBjcmVhdGVMb2NhdGlvbiAqL10pKHRoaXMucHJvcHMudG8pO1xuXG4gICAgaWYgKF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfaGlzdG9yeV9fW1wiYlwiIC8qIGxvY2F0aW9uc0FyZUVxdWFsICovXSkocHJldlRvLCBuZXh0VG8pKSB7XG4gICAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfd2FybmluZ19fX2RlZmF1bHQoKShmYWxzZSwgJ1lvdSB0cmllZCB0byByZWRpcmVjdCB0byB0aGUgc2FtZSByb3V0ZSB5b3VcXCdyZSBjdXJyZW50bHkgb246ICcgKyAoJ1wiJyArIG5leHRUby5wYXRobmFtZSArIG5leHRUby5zZWFyY2ggKyAnXCInKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5wZXJmb3JtKCk7XG4gIH07XG5cbiAgUmVkaXJlY3QucHJvdG90eXBlLnBlcmZvcm0gPSBmdW5jdGlvbiBwZXJmb3JtKCkge1xuICAgIHZhciBoaXN0b3J5ID0gdGhpcy5jb250ZXh0LnJvdXRlci5oaXN0b3J5O1xuICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICBwdXNoID0gX3Byb3BzLnB1c2gsXG4gICAgICAgIHRvID0gX3Byb3BzLnRvO1xuXG5cbiAgICBpZiAocHVzaCkge1xuICAgICAgaGlzdG9yeS5wdXNoKHRvKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGlzdG9yeS5yZXBsYWNlKHRvKTtcbiAgICB9XG4gIH07XG5cbiAgUmVkaXJlY3QucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICByZXR1cm4gUmVkaXJlY3Q7XG59KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fX2RlZmF1bHQuYS5Db21wb25lbnQpO1xuXG5SZWRpcmVjdC5wcm9wVHlwZXMgPSB7XG4gIHB1c2g6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmJvb2wsXG4gIGZyb206IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLnN0cmluZyxcbiAgdG86IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLm9uZU9mVHlwZShbX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuc3RyaW5nLCBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vYmplY3RdKS5pc1JlcXVpcmVkXG59O1xuUmVkaXJlY3QuZGVmYXVsdFByb3BzID0ge1xuICBwdXNoOiBmYWxzZVxufTtcblJlZGlyZWN0LmNvbnRleHRUeXBlcyA9IHtcbiAgcm91dGVyOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5zaGFwZSh7XG4gICAgaGlzdG9yeTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuc2hhcGUoe1xuICAgICAgcHVzaDogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuZnVuYy5pc1JlcXVpcmVkLFxuICAgICAgcmVwbGFjZTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuZnVuYy5pc1JlcXVpcmVkXG4gICAgfSkuaXNSZXF1aXJlZCxcbiAgICBzdGF0aWNDb250ZXh0OiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vYmplY3RcbiAgfSkuaXNSZXF1aXJlZFxufTtcblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKFJlZGlyZWN0KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDIwMjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9yZWFjdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcmVhY3RfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9yZWFjdF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX3Byb3BfdHlwZXNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X2hpc3RvcnlfUGF0aFV0aWxzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfaGlzdG9yeV9QYXRoVXRpbHNfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9oaXN0b3J5X1BhdGhVdGlsc19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1JvdXRlcl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nik7XG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMob2JqLCBrZXlzKSB7IHZhciB0YXJnZXQgPSB7fTsgZm9yICh2YXIgaSBpbiBvYmopIHsgaWYgKGtleXMuaW5kZXhPZihpKSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBpKSkgY29udGludWU7IHRhcmdldFtpXSA9IG9ialtpXTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuXG5cblxuXG5cblxuXG52YXIgbm9ybWFsaXplTG9jYXRpb24gPSBmdW5jdGlvbiBub3JtYWxpemVMb2NhdGlvbihvYmplY3QpIHtcbiAgdmFyIF9vYmplY3QkcGF0aG5hbWUgPSBvYmplY3QucGF0aG5hbWUsXG4gICAgICBwYXRobmFtZSA9IF9vYmplY3QkcGF0aG5hbWUgPT09IHVuZGVmaW5lZCA/ICcvJyA6IF9vYmplY3QkcGF0aG5hbWUsXG4gICAgICBfb2JqZWN0JHNlYXJjaCA9IG9iamVjdC5zZWFyY2gsXG4gICAgICBzZWFyY2ggPSBfb2JqZWN0JHNlYXJjaCA9PT0gdW5kZWZpbmVkID8gJycgOiBfb2JqZWN0JHNlYXJjaCxcbiAgICAgIF9vYmplY3QkaGFzaCA9IG9iamVjdC5oYXNoLFxuICAgICAgaGFzaCA9IF9vYmplY3QkaGFzaCA9PT0gdW5kZWZpbmVkID8gJycgOiBfb2JqZWN0JGhhc2g7XG5cblxuICByZXR1cm4ge1xuICAgIHBhdGhuYW1lOiBwYXRobmFtZSxcbiAgICBzZWFyY2g6IHNlYXJjaCA9PT0gJz8nID8gJycgOiBzZWFyY2gsXG4gICAgaGFzaDogaGFzaCA9PT0gJyMnID8gJycgOiBoYXNoXG4gIH07XG59O1xuXG52YXIgYWRkQmFzZW5hbWUgPSBmdW5jdGlvbiBhZGRCYXNlbmFtZShiYXNlbmFtZSwgbG9jYXRpb24pIHtcbiAgaWYgKCFiYXNlbmFtZSkgcmV0dXJuIGxvY2F0aW9uO1xuXG4gIHJldHVybiBfZXh0ZW5kcyh7fSwgbG9jYXRpb24sIHtcbiAgICBwYXRobmFtZTogX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9oaXN0b3J5X1BhdGhVdGlsc19fW1wiYWRkTGVhZGluZ1NsYXNoXCJdKShiYXNlbmFtZSkgKyBsb2NhdGlvbi5wYXRobmFtZVxuICB9KTtcbn07XG5cbnZhciBzdHJpcEJhc2VuYW1lID0gZnVuY3Rpb24gc3RyaXBCYXNlbmFtZShiYXNlbmFtZSwgbG9jYXRpb24pIHtcbiAgaWYgKCFiYXNlbmFtZSkgcmV0dXJuIGxvY2F0aW9uO1xuXG4gIHZhciBiYXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9oaXN0b3J5X1BhdGhVdGlsc19fW1wiYWRkTGVhZGluZ1NsYXNoXCJdKShiYXNlbmFtZSk7XG5cbiAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoYmFzZSkgIT09IDApIHJldHVybiBsb2NhdGlvbjtcblxuICByZXR1cm4gX2V4dGVuZHMoe30sIGxvY2F0aW9uLCB7XG4gICAgcGF0aG5hbWU6IGxvY2F0aW9uLnBhdGhuYW1lLnN1YnN0cihiYXNlLmxlbmd0aClcbiAgfSk7XG59O1xuXG52YXIgY3JlYXRlTG9jYXRpb24gPSBmdW5jdGlvbiBjcmVhdGVMb2NhdGlvbihsb2NhdGlvbikge1xuICByZXR1cm4gdHlwZW9mIGxvY2F0aW9uID09PSAnc3RyaW5nJyA/IF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfaGlzdG9yeV9QYXRoVXRpbHNfX1tcInBhcnNlUGF0aFwiXSkobG9jYXRpb24pIDogbm9ybWFsaXplTG9jYXRpb24obG9jYXRpb24pO1xufTtcblxudmFyIGNyZWF0ZVVSTCA9IGZ1bmN0aW9uIGNyZWF0ZVVSTChsb2NhdGlvbikge1xuICByZXR1cm4gdHlwZW9mIGxvY2F0aW9uID09PSAnc3RyaW5nJyA/IGxvY2F0aW9uIDogX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9oaXN0b3J5X1BhdGhVdGlsc19fW1wiY3JlYXRlUGF0aFwiXSkobG9jYXRpb24pO1xufTtcblxudmFyIHN0YXRpY0hhbmRsZXIgPSBmdW5jdGlvbiBzdGF0aWNIYW5kbGVyKG1ldGhvZE5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X19fZGVmYXVsdCgpKGZhbHNlLCAnWW91IGNhbm5vdCAlcyB3aXRoIDxTdGF0aWNSb3V0ZXI+JywgbWV0aG9kTmFtZSk7XG4gIH07XG59O1xuXG52YXIgbm9vcCA9IGZ1bmN0aW9uIG5vb3AoKSB7fTtcblxuLyoqXG4gKiBUaGUgcHVibGljIHRvcC1sZXZlbCBBUEkgZm9yIGEgXCJzdGF0aWNcIiA8Um91dGVyPiwgc28tY2FsbGVkIGJlY2F1c2UgaXRcbiAqIGNhbid0IGFjdHVhbGx5IGNoYW5nZSB0aGUgY3VycmVudCBsb2NhdGlvbi4gSW5zdGVhZCwgaXQganVzdCByZWNvcmRzXG4gKiBsb2NhdGlvbiBjaGFuZ2VzIGluIGEgY29udGV4dCBvYmplY3QuIFVzZWZ1bCBtYWlubHkgaW4gdGVzdGluZyBhbmRcbiAqIHNlcnZlci1yZW5kZXJpbmcgc2NlbmFyaW9zLlxuICovXG5cbnZhciBTdGF0aWNSb3V0ZXIgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoU3RhdGljUm91dGVyLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBTdGF0aWNSb3V0ZXIoKSB7XG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGF0aWNSb3V0ZXIpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfUmVhY3QkQ29tcG9uZW50LmNhbGwuYXBwbHkoX1JlYWN0JENvbXBvbmVudCwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLmNyZWF0ZUhyZWYgPSBmdW5jdGlvbiAocGF0aCkge1xuICAgICAgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfaGlzdG9yeV9QYXRoVXRpbHNfX1tcImFkZExlYWRpbmdTbGFzaFwiXSkoX3RoaXMucHJvcHMuYmFzZW5hbWUgKyBjcmVhdGVVUkwocGF0aCkpO1xuICAgIH0sIF90aGlzLmhhbmRsZVB1c2ggPSBmdW5jdGlvbiAobG9jYXRpb24pIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIGJhc2VuYW1lID0gX3RoaXMkcHJvcHMuYmFzZW5hbWUsXG4gICAgICAgICAgY29udGV4dCA9IF90aGlzJHByb3BzLmNvbnRleHQ7XG5cbiAgICAgIGNvbnRleHQuYWN0aW9uID0gJ1BVU0gnO1xuICAgICAgY29udGV4dC5sb2NhdGlvbiA9IGFkZEJhc2VuYW1lKGJhc2VuYW1lLCBjcmVhdGVMb2NhdGlvbihsb2NhdGlvbikpO1xuICAgICAgY29udGV4dC51cmwgPSBjcmVhdGVVUkwoY29udGV4dC5sb2NhdGlvbik7XG4gICAgfSwgX3RoaXMuaGFuZGxlUmVwbGFjZSA9IGZ1bmN0aW9uIChsb2NhdGlvbikge1xuICAgICAgdmFyIF90aGlzJHByb3BzMiA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIGJhc2VuYW1lID0gX3RoaXMkcHJvcHMyLmJhc2VuYW1lLFxuICAgICAgICAgIGNvbnRleHQgPSBfdGhpcyRwcm9wczIuY29udGV4dDtcblxuICAgICAgY29udGV4dC5hY3Rpb24gPSAnUkVQTEFDRSc7XG4gICAgICBjb250ZXh0LmxvY2F0aW9uID0gYWRkQmFzZW5hbWUoYmFzZW5hbWUsIGNyZWF0ZUxvY2F0aW9uKGxvY2F0aW9uKSk7XG4gICAgICBjb250ZXh0LnVybCA9IGNyZWF0ZVVSTChjb250ZXh0LmxvY2F0aW9uKTtcbiAgICB9LCBfdGhpcy5oYW5kbGVMaXN0ZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbm9vcDtcbiAgICB9LCBfdGhpcy5oYW5kbGVCbG9jayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBub29wO1xuICAgIH0sIF90ZW1wKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgU3RhdGljUm91dGVyLnByb3RvdHlwZS5nZXRDaGlsZENvbnRleHQgPSBmdW5jdGlvbiBnZXRDaGlsZENvbnRleHQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJvdXRlcjoge1xuICAgICAgICBzdGF0aWNDb250ZXh0OiB0aGlzLnByb3BzLmNvbnRleHRcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIFN0YXRpY1JvdXRlci5wcm90b3R5cGUuY29tcG9uZW50V2lsbE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCgpKCF0aGlzLnByb3BzLmhpc3RvcnksICc8U3RhdGljUm91dGVyPiBpZ25vcmVzIHRoZSBoaXN0b3J5IHByb3AuIFRvIHVzZSBhIGN1c3RvbSBoaXN0b3J5LCAnICsgJ3VzZSBgaW1wb3J0IHsgUm91dGVyIH1gIGluc3RlYWQgb2YgYGltcG9ydCB7IFN0YXRpY1JvdXRlciBhcyBSb3V0ZXIgfWAuJyk7XG4gIH07XG5cbiAgU3RhdGljUm91dGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgIGJhc2VuYW1lID0gX3Byb3BzLmJhc2VuYW1lLFxuICAgICAgICBjb250ZXh0ID0gX3Byb3BzLmNvbnRleHQsXG4gICAgICAgIGxvY2F0aW9uID0gX3Byb3BzLmxvY2F0aW9uLFxuICAgICAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcHJvcHMsIFsnYmFzZW5hbWUnLCAnY29udGV4dCcsICdsb2NhdGlvbiddKTtcblxuICAgIHZhciBoaXN0b3J5ID0ge1xuICAgICAgY3JlYXRlSHJlZjogdGhpcy5jcmVhdGVIcmVmLFxuICAgICAgYWN0aW9uOiAnUE9QJyxcbiAgICAgIGxvY2F0aW9uOiBzdHJpcEJhc2VuYW1lKGJhc2VuYW1lLCBjcmVhdGVMb2NhdGlvbihsb2NhdGlvbikpLFxuICAgICAgcHVzaDogdGhpcy5oYW5kbGVQdXNoLFxuICAgICAgcmVwbGFjZTogdGhpcy5oYW5kbGVSZXBsYWNlLFxuICAgICAgZ286IHN0YXRpY0hhbmRsZXIoJ2dvJyksXG4gICAgICBnb0JhY2s6IHN0YXRpY0hhbmRsZXIoJ2dvQmFjaycpLFxuICAgICAgZ29Gb3J3YXJkOiBzdGF0aWNIYW5kbGVyKCdnb0ZvcndhcmQnKSxcbiAgICAgIGxpc3RlbjogdGhpcy5oYW5kbGVMaXN0ZW4sXG4gICAgICBibG9jazogdGhpcy5oYW5kbGVCbG9ja1xuICAgIH07XG5cbiAgICByZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3JlYWN0X19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19Sb3V0ZXJfX1tcImFcIiAvKiBkZWZhdWx0ICovXSwgX2V4dGVuZHMoe30sIHByb3BzLCB7IGhpc3Rvcnk6IGhpc3RvcnkgfSkpO1xuICB9O1xuXG4gIHJldHVybiBTdGF0aWNSb3V0ZXI7XG59KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9yZWFjdF9fX2RlZmF1bHQuYS5Db21wb25lbnQpO1xuXG5TdGF0aWNSb3V0ZXIucHJvcFR5cGVzID0ge1xuICBiYXNlbmFtZTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuc3RyaW5nLFxuICBjb250ZXh0OiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vYmplY3QuaXNSZXF1aXJlZCxcbiAgbG9jYXRpb246IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19wcm9wX3R5cGVzX19fZGVmYXVsdC5hLm9uZU9mVHlwZShbX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuc3RyaW5nLCBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vYmplY3RdKVxufTtcblN0YXRpY1JvdXRlci5kZWZhdWx0UHJvcHMgPSB7XG4gIGJhc2VuYW1lOiAnJyxcbiAgbG9jYXRpb246ICcvJ1xufTtcblN0YXRpY1JvdXRlci5jaGlsZENvbnRleHRUeXBlcyA9IHtcbiAgcm91dGVyOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vYmplY3QuaXNSZXF1aXJlZFxufTtcblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKFN0YXRpY1JvdXRlcik7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAyMDM6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3dhcm5pbmdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl93YXJuaW5nX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfd2FybmluZ19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaW52YXJpYW50X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaW52YXJpYW50X19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaW52YXJpYW50X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fbWF0Y2hQYXRoX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KTtcbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuXG5cblxuXG5cblxuLyoqXG4gKiBUaGUgcHVibGljIEFQSSBmb3IgcmVuZGVyaW5nIHRoZSBmaXJzdCA8Um91dGU+IHRoYXQgbWF0Y2hlcy5cbiAqL1xuXG52YXIgU3dpdGNoID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFN3aXRjaCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gU3dpdGNoKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTd2l0Y2gpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9SZWFjdCRDb21wb25lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBTd2l0Y2gucHJvdG90eXBlLmNvbXBvbmVudFdpbGxNb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfaW52YXJpYW50X19fZGVmYXVsdCgpKHRoaXMuY29udGV4dC5yb3V0ZXIsICdZb3Ugc2hvdWxkIG5vdCB1c2UgPFN3aXRjaD4gb3V0c2lkZSBhIDxSb3V0ZXI+Jyk7XG4gIH07XG5cbiAgU3dpdGNoLnByb3RvdHlwZS5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfd2FybmluZ19fX2RlZmF1bHQoKSghKG5leHRQcm9wcy5sb2NhdGlvbiAmJiAhdGhpcy5wcm9wcy5sb2NhdGlvbiksICc8U3dpdGNoPiBlbGVtZW50cyBzaG91bGQgbm90IGNoYW5nZSBmcm9tIHVuY29udHJvbGxlZCB0byBjb250cm9sbGVkIChvciB2aWNlIHZlcnNhKS4gWW91IGluaXRpYWxseSB1c2VkIG5vIFwibG9jYXRpb25cIiBwcm9wIGFuZCB0aGVuIHByb3ZpZGVkIG9uZSBvbiBhIHN1YnNlcXVlbnQgcmVuZGVyLicpO1xuXG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3dhcm5pbmdfX19kZWZhdWx0KCkoISghbmV4dFByb3BzLmxvY2F0aW9uICYmIHRoaXMucHJvcHMubG9jYXRpb24pLCAnPFN3aXRjaD4gZWxlbWVudHMgc2hvdWxkIG5vdCBjaGFuZ2UgZnJvbSBjb250cm9sbGVkIHRvIHVuY29udHJvbGxlZCAob3IgdmljZSB2ZXJzYSkuIFlvdSBwcm92aWRlZCBhIFwibG9jYXRpb25cIiBwcm9wIGluaXRpYWxseSBidXQgb21pdHRlZCBpdCBvbiBhIHN1YnNlcXVlbnQgcmVuZGVyLicpO1xuICB9O1xuXG4gIFN3aXRjaC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciByb3V0ZSA9IHRoaXMuY29udGV4dC5yb3V0ZXIucm91dGU7XG4gICAgdmFyIGNoaWxkcmVuID0gdGhpcy5wcm9wcy5jaGlsZHJlbjtcblxuICAgIHZhciBsb2NhdGlvbiA9IHRoaXMucHJvcHMubG9jYXRpb24gfHwgcm91dGUubG9jYXRpb247XG5cbiAgICB2YXIgbWF0Y2ggPSB2b2lkIDAsXG4gICAgICAgIGNoaWxkID0gdm9pZCAwO1xuICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fX2RlZmF1bHQuYS5DaGlsZHJlbi5mb3JFYWNoKGNoaWxkcmVuLCBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgaWYgKCFfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX19kZWZhdWx0LmEuaXNWYWxpZEVsZW1lbnQoZWxlbWVudCkpIHJldHVybjtcblxuICAgICAgdmFyIF9lbGVtZW50JHByb3BzID0gZWxlbWVudC5wcm9wcyxcbiAgICAgICAgICBwYXRoUHJvcCA9IF9lbGVtZW50JHByb3BzLnBhdGgsXG4gICAgICAgICAgZXhhY3QgPSBfZWxlbWVudCRwcm9wcy5leGFjdCxcbiAgICAgICAgICBzdHJpY3QgPSBfZWxlbWVudCRwcm9wcy5zdHJpY3QsXG4gICAgICAgICAgc2Vuc2l0aXZlID0gX2VsZW1lbnQkcHJvcHMuc2Vuc2l0aXZlLFxuICAgICAgICAgIGZyb20gPSBfZWxlbWVudCRwcm9wcy5mcm9tO1xuXG4gICAgICB2YXIgcGF0aCA9IHBhdGhQcm9wIHx8IGZyb207XG5cbiAgICAgIGlmIChtYXRjaCA9PSBudWxsKSB7XG4gICAgICAgIGNoaWxkID0gZWxlbWVudDtcbiAgICAgICAgbWF0Y2ggPSBwYXRoID8gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fbWF0Y2hQYXRoX19bXCJhXCIgLyogZGVmYXVsdCAqL10pKGxvY2F0aW9uLnBhdGhuYW1lLCB7IHBhdGg6IHBhdGgsIGV4YWN0OiBleGFjdCwgc3RyaWN0OiBzdHJpY3QsIHNlbnNpdGl2ZTogc2Vuc2l0aXZlIH0pIDogcm91dGUubWF0Y2g7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbWF0Y2ggPyBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX19kZWZhdWx0LmEuY2xvbmVFbGVtZW50KGNoaWxkLCB7IGxvY2F0aW9uOiBsb2NhdGlvbiwgY29tcHV0ZWRNYXRjaDogbWF0Y2ggfSkgOiBudWxsO1xuICB9O1xuXG4gIHJldHVybiBTd2l0Y2g7XG59KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fX2RlZmF1bHQuYS5Db21wb25lbnQpO1xuXG5Td2l0Y2guY29udGV4dFR5cGVzID0ge1xuICByb3V0ZXI6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLnNoYXBlKHtcbiAgICByb3V0ZTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEub2JqZWN0LmlzUmVxdWlyZWRcbiAgfSkuaXNSZXF1aXJlZFxufTtcblN3aXRjaC5wcm9wVHlwZXMgPSB7XG4gIGNoaWxkcmVuOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5ub2RlLFxuICBsb2NhdGlvbjogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEub2JqZWN0XG59O1xuXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAoU3dpdGNoKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDIwNDpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfaG9pc3Rfbm9uX3JlYWN0X3N0YXRpY3NfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjA1KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfaG9pc3Rfbm9uX3JlYWN0X3N0YXRpY3NfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9ob2lzdF9ub25fcmVhY3Rfc3RhdGljc19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1JvdXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2KTtcbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhvYmosIGtleXMpIHsgdmFyIHRhcmdldCA9IHt9OyBmb3IgKHZhciBpIGluIG9iaikgeyBpZiAoa2V5cy5pbmRleE9mKGkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGkpKSBjb250aW51ZTsgdGFyZ2V0W2ldID0gb2JqW2ldOyB9IHJldHVybiB0YXJnZXQ7IH1cblxuXG5cblxuXG5cbi8qKlxuICogQSBwdWJsaWMgaGlnaGVyLW9yZGVyIGNvbXBvbmVudCB0byBhY2Nlc3MgdGhlIGltcGVyYXRpdmUgQVBJXG4gKi9cbnZhciB3aXRoUm91dGVyID0gZnVuY3Rpb24gd2l0aFJvdXRlcihDb21wb25lbnQpIHtcbiAgdmFyIEMgPSBmdW5jdGlvbiBDKHByb3BzKSB7XG4gICAgdmFyIHdyYXBwZWRDb21wb25lbnRSZWYgPSBwcm9wcy53cmFwcGVkQ29tcG9uZW50UmVmLFxuICAgICAgICByZW1haW5pbmdQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhwcm9wcywgWyd3cmFwcGVkQ29tcG9uZW50UmVmJ10pO1xuXG4gICAgcmV0dXJuIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fUm91dGVfX1tcImFcIiAvKiBkZWZhdWx0ICovXSwgeyByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihyb3V0ZUNvbXBvbmVudFByb3BzKSB7XG4gICAgICAgIHJldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudChDb21wb25lbnQsIF9leHRlbmRzKHt9LCByZW1haW5pbmdQcm9wcywgcm91dGVDb21wb25lbnRQcm9wcywgeyByZWY6IHdyYXBwZWRDb21wb25lbnRSZWYgfSkpO1xuICAgICAgfSB9KTtcbiAgfTtcblxuICBDLmRpc3BsYXlOYW1lID0gJ3dpdGhSb3V0ZXIoJyArIChDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgQ29tcG9uZW50Lm5hbWUpICsgJyknO1xuICBDLldyYXBwZWRDb21wb25lbnQgPSBDb21wb25lbnQ7XG4gIEMucHJvcFR5cGVzID0ge1xuICAgIHdyYXBwZWRDb21wb25lbnRSZWY6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmZ1bmNcbiAgfTtcblxuICByZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX2hvaXN0X25vbl9yZWFjdF9zdGF0aWNzX19fZGVmYXVsdCgpKEMsIENvbXBvbmVudCk7XG59O1xuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKHdpdGhSb3V0ZXIpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMjA1OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE1LCBZYWhvbyEgSW5jLlxuICogQ29weXJpZ2h0cyBsaWNlbnNlZCB1bmRlciB0aGUgTmV3IEJTRCBMaWNlbnNlLiBTZWUgdGhlIGFjY29tcGFueWluZyBMSUNFTlNFIGZpbGUgZm9yIHRlcm1zLlxuICovXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgICB0cnVlID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICAgIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG4gICAgKGdsb2JhbC5ob2lzdE5vblJlYWN0U3RhdGljcyA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIFxuICAgIHZhciBSRUFDVF9TVEFUSUNTID0ge1xuICAgICAgICBjaGlsZENvbnRleHRUeXBlczogdHJ1ZSxcbiAgICAgICAgY29udGV4dFR5cGVzOiB0cnVlLFxuICAgICAgICBkZWZhdWx0UHJvcHM6IHRydWUsXG4gICAgICAgIGRpc3BsYXlOYW1lOiB0cnVlLFxuICAgICAgICBnZXREZWZhdWx0UHJvcHM6IHRydWUsXG4gICAgICAgIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wczogdHJ1ZSxcbiAgICAgICAgbWl4aW5zOiB0cnVlLFxuICAgICAgICBwcm9wVHlwZXM6IHRydWUsXG4gICAgICAgIHR5cGU6IHRydWVcbiAgICB9O1xuICAgIFxuICAgIHZhciBLTk9XTl9TVEFUSUNTID0ge1xuICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICBsZW5ndGg6IHRydWUsXG4gICAgICAgIHByb3RvdHlwZTogdHJ1ZSxcbiAgICAgICAgY2FsbGVyOiB0cnVlLFxuICAgICAgICBjYWxsZWU6IHRydWUsXG4gICAgICAgIGFyZ3VtZW50czogdHJ1ZSxcbiAgICAgICAgYXJpdHk6IHRydWVcbiAgICB9O1xuICAgIFxuICAgIHZhciBkZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbiAgICB2YXIgZ2V0T3duUHJvcGVydHlOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xuICAgIHZhciBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xuICAgIHZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuICAgIHZhciBnZXRQcm90b3R5cGVPZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbiAgICB2YXIgb2JqZWN0UHJvdG90eXBlID0gZ2V0UHJvdG90eXBlT2YgJiYgZ2V0UHJvdG90eXBlT2YoT2JqZWN0KTtcbiAgICBcbiAgICByZXR1cm4gZnVuY3Rpb24gaG9pc3ROb25SZWFjdFN0YXRpY3ModGFyZ2V0Q29tcG9uZW50LCBzb3VyY2VDb21wb25lbnQsIGJsYWNrbGlzdCkge1xuICAgICAgICBpZiAodHlwZW9mIHNvdXJjZUNvbXBvbmVudCAhPT0gJ3N0cmluZycpIHsgLy8gZG9uJ3QgaG9pc3Qgb3ZlciBzdHJpbmcgKGh0bWwpIGNvbXBvbmVudHNcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG9iamVjdFByb3RvdHlwZSkge1xuICAgICAgICAgICAgICAgIHZhciBpbmhlcml0ZWRDb21wb25lbnQgPSBnZXRQcm90b3R5cGVPZihzb3VyY2VDb21wb25lbnQpO1xuICAgICAgICAgICAgICAgIGlmIChpbmhlcml0ZWRDb21wb25lbnQgJiYgaW5oZXJpdGVkQ29tcG9uZW50ICE9PSBvYmplY3RQcm90b3R5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9pc3ROb25SZWFjdFN0YXRpY3ModGFyZ2V0Q29tcG9uZW50LCBpbmhlcml0ZWRDb21wb25lbnQsIGJsYWNrbGlzdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIga2V5cyA9IGdldE93blByb3BlcnR5TmFtZXMoc291cmNlQ29tcG9uZW50KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgICAgICAgICAgICAgIGtleXMgPSBrZXlzLmNvbmNhdChnZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlQ29tcG9uZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgICAgIGlmICghUkVBQ1RfU1RBVElDU1trZXldICYmICFLTk9XTl9TVEFUSUNTW2tleV0gJiYgKCFibGFja2xpc3QgfHwgIWJsYWNrbGlzdFtrZXldKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2VDb21wb25lbnQsIGtleSk7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7IC8vIEF2b2lkIGZhaWx1cmVzIGZyb20gcmVhZC1vbmx5IHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZVByb3BlcnR5KHRhcmdldENvbXBvbmVudCwga2V5LCBkZXNjcmlwdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRDb21wb25lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0YXJnZXRDb21wb25lbnQ7XG4gICAgfTtcbn0pKSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDI3Mzpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3RSb3V0ZXJEb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KTtcblxudmFyIF9BcHBCYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NCk7XG5cbnZhciBfQXBwQmFyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0FwcEJhcik7XG5cbnZhciBfRHJhd2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDgpO1xuXG52YXIgX0RyYXdlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EcmF3ZXIpO1xuXG52YXIgX01lbnVJdGVtID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpO1xuXG52YXIgX01lbnVJdGVtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX01lbnVJdGVtKTtcblxudmFyIF9uYXZpZ2F0aW9uQXJyb3dEcm9wUmlnaHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Myk7XG5cbnZhciBfbmF2aWdhdGlvbkFycm93RHJvcFJpZ2h0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25hdmlnYXRpb25BcnJvd0Ryb3BSaWdodCk7XG5cbnZhciBfSWNvbk1lbnUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MSk7XG5cbnZhciBfSWNvbk1lbnUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSWNvbk1lbnUpO1xuXG52YXIgX0ljb25CdXR0b24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblxudmFyIF9JY29uQnV0dG9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ljb25CdXR0b24pO1xuXG52YXIgX21vcmVWZXJ0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjYpO1xuXG52YXIgX21vcmVWZXJ0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21vcmVWZXJ0KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gU3ViTWVudShwcm9wcykge1xuICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgX0ljb25NZW51Mi5kZWZhdWx0LFxuICAgICAgICB7XG4gICAgICAgICAgICBpY29uQnV0dG9uRWxlbWVudDogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgX0ljb25CdXR0b24yLmRlZmF1bHQsXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfbW9yZVZlcnQyLmRlZmF1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnc3VibWVudS1zdmcnLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogeyBjb2xvcjogJ3doaXRlJywgZmlsbDogJ3doaXRlJyB9IH0pXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgdGFyZ2V0T3JpZ2luOiB7IGhvcml6b250YWw6ICdyaWdodCcsIHZlcnRpY2FsOiAndG9wJyB9LFxuICAgICAgICAgICAgYW5jaG9yT3JpZ2luOiB7IGhvcml6b250YWw6ICdyaWdodCcsIHZlcnRpY2FsOiAndG9wJyB9IH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9NZW51SXRlbTIuZGVmYXVsdCwgeyBwcmltYXJ5VGV4dDogJ0NlcnJhciBzZXNpb24nLCBvbkNsaWNrOiBwcm9wcy5vbkxvZ291dCB9KVxuICAgICk7XG59XG5cblN1Yk1lbnUubXVpTmFtZSA9ICdJY29uTWVudSc7XG5cbnZhciBBZG1pbkJhY2tvZmZpY2VCYXIgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlQ2xhc3Moe1xuICAgIGRpc3BsYXlOYW1lOiAnQWRtaW5CYWNrb2ZmaWNlQmFyJyxcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRyYXdlck9wZW46IGZhbHNlXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9uTG9nb3V0OiBmdW5jdGlvbiBvbkxvZ291dCgpIHt9XG4gICAgICAgIH07XG4gICAgfSxcbiAgICBjbG9zZURyYXdlcjogZnVuY3Rpb24gY2xvc2VEcmF3ZXIoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkcmF3ZXJPcGVuOiBmYWxzZSB9KTtcbiAgICB9LFxuICAgIHRvZ2dsZURyYXdlcjogZnVuY3Rpb24gdG9nZ2xlRHJhd2VyKCkge1xuICAgICAgICB2YXIgZHJhd2VyT3BlbiA9ICF0aGlzLnN0YXRlLmRyYXdlck9wZW47XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkcmF3ZXJPcGVuOiBkcmF3ZXJPcGVuIH0pO1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0FwcEJhcjIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgIG9uTGVmdEljb25CdXR0b25Ub3VjaFRhcDogdGhpcy50b2dnbGVEcmF3ZXIsXG4gICAgICAgICAgICAgICAgaWNvbkVsZW1lbnRSaWdodDogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoU3ViTWVudSwgeyBvbkxvZ291dDogdGhpcy5wcm9wcy5vbkxvZ291dCB9KSxcbiAgICAgICAgICAgICAgICB0aXRsZTogJ0FkbWluaXN0cmFjaW9uIEhPWSBDT01PJyB9KSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIF9EcmF3ZXIyLmRlZmF1bHQsXG4gICAgICAgICAgICAgICAgeyBvcGVuOiB0aGlzLnN0YXRlLmRyYXdlck9wZW4sIGRvY2tlZDogZmFsc2UsIG9uUmVxdWVzdENoYW5nZTogZnVuY3Rpb24gb25SZXF1ZXN0Q2hhbmdlKG9wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7IGRyYXdlck9wZW46IG9wZW4gfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Um91dGVyRG9tLkxpbmssXG4gICAgICAgICAgICAgICAgICAgIHsgdG86ICcvaW5kZXgnLCBvbkNsaWNrOiB0aGlzLmNsb3NlRHJhd2VyIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgX01lbnVJdGVtMi5kZWZhdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdQcmluY2lwYWwnXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3RSb3V0ZXJEb20uTGluayxcbiAgICAgICAgICAgICAgICAgICAgeyB0bzogJy9zaG9wcy9saXN0Jywgb25DbGljazogdGhpcy5jbG9zZURyYXdlciB9LFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgIF9NZW51SXRlbTIuZGVmYXVsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAnQ29tZXJjaW9zJ1xuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBBZG1pbkJhY2tvZmZpY2VCYXI7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAyNzQ6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKiogQ29tcG9uZW50ZSBpbmRpY2UgZGUgYWRtaW5pc3RyYWNpb24gZGUgSE9ZIENPTU8gKi9cbnZhciBBZG1pbkluZGV4ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogXCJBZG1pbkluZGV4XCIsXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBcIndpdGgtbWFyZ2luIGluZGV4XCIgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIFwiaDFcIixcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIFwiQWRtaW5pc3RyYWNpb24gZGUgSE9ZIENPTU9cIlxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIFwiaDJcIixcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIFwiQ29uZmlndXJhY2lvbiB5IGVzdGFkaXN0aWNhc1wiXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgXCJwXCIsXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBcIkRlc2RlIGFxdWkgZXMgcG9zaWJsZSBtb25pdG9yZWFyIGEgbG9zIHVzdWFyaW9zIHJlZ2lzdHJhZG9zIHkgY29tZXJjaW9zIGFzb2NpYWRvcyBhIGxhIGFwbGljYWNpb24uXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gQWRtaW5JbmRleDtcblxuLyoqKi8gfSksXG5cbi8qKiovIDI3NTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfTXVpVGhlbWVQcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXG52YXIgX011aVRoZW1lUHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTXVpVGhlbWVQcm92aWRlcik7XG5cbnZhciBfUmFpc2VkQnV0dG9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCk7XG5cbnZhciBfUmFpc2VkQnV0dG9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1JhaXNlZEJ1dHRvbik7XG5cbnZhciBfVGV4dEZpZWxkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cbnZhciBfVGV4dEZpZWxkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1RleHRGaWVsZCk7XG5cbnZhciBfQ2FyZCA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpO1xuXG52YXIgX0ZsYXRCdXR0b24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblxudmFyIF9GbGF0QnV0dG9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ZsYXRCdXR0b24pO1xuXG52YXIgX2F4aW9zID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG5cbnZhciBfYXhpb3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXhpb3MpO1xuXG52YXIgX0hlYWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpO1xuXG52YXIgX0hlYWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9IZWFkZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vL2ltcG9ydCBtYWluQ29uZmlnIGZyb20gJy4uL2NvbmZpZy9tYWluLWNvbmZpZyc7XG5cbi8qIEZJTiBERSBJTVBPUlRTIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbnZhciBFTVBUWV9DQUxMQkFDSyA9IGZ1bmN0aW9uIEVNUFRZX0NBTExCQUNLKCkge307XG5cbnZhciBBZG1pbkxvZ2luID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ0FkbWluTG9naW4nLFxuXG4gICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1c2VybmFtZTogJycsXG4gICAgICAgICAgICBwYXNzd29yZDogJycsXG4gICAgICAgICAgICBlcnJNc2c6IG51bGxcbiAgICAgICAgfTtcbiAgICB9LFxuXG4gICAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgICAgIHJldHVybiB7IG9uU3VibWl0OiBFTVBUWV9DQUxMQkFDSyB9O1xuICAgIH0sXG5cbiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiBzdWJtaXRGb3JtKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIHZhciB1c2VybmFtZSA9IHRoaXMuc3RhdGUudXNlcm5hbWU7XG4gICAgICAgIHZhciBwYXNzd29yZCA9IHRoaXMuc3RhdGUucGFzc3dvcmQ7XG5cbiAgICAgICAgLy9oYWdvIGVuY29kaW5nIGJhc2U2NCBwYXJhIHBhc2FyIGxhcyBjcmVkZW5jaWFsZXNcbiAgICAgICAgdmFyIGVuY29kZWQgPSBidG9hKHVzZXJuYW1lICsgJzonICsgcGFzc3dvcmQpO1xuXG4gICAgICAgICgwLCBfYXhpb3MyLmRlZmF1bHQpKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLCAvL3lvdSBjYW4gc2V0IHdoYXQgcmVxdWVzdCB5b3Ugd2FudCB0byBiZVxuICAgICAgICAgICAgdXJsOiAnL2FwaS92MS9hZG1pbi9sb2dpbicsXG4gICAgICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246ICdCYXNpYyAnICsgZW5jb2RlZCB9XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbnRlbnRzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQ29udGVuaWRvOicpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coY29udGVudHMuZGF0YSk7XG4gICAgICAgICAgICBfdGhpcy5wcm9wcy5vblN1Ym1pdChjb250ZW50cy5kYXRhLnRva2VuKTtcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGNhdXNlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcicpO1xuICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBlcnJNc2c6ICdDcmVkZW5jaWFsZXMgaW52YWxpZGFzJyB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGhhbmRsZUtleVByZXNzOiBmdW5jdGlvbiBoYW5kbGVLZXlQcmVzcyhldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQua2V5ID09ICdFbnRlcicpIHRoaXMuc3VibWl0Rm9ybSgpO1xuICAgIH0sXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgdmFyIG1zZ0VsZW0gPSB0aGlzLnN0YXRlLmVyck1zZyA/IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgeyBzdHlsZTogeyBjb2xvcjogJ3JlZCcgfSB9LFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5lcnJNc2dcbiAgICAgICAgKSA6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdkaXYnLCBudWxsKTtcblxuICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgb25LZXlQcmVzczogdGhpcy5oYW5kbGVLZXlQcmVzcyB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0hlYWRlcjIuZGVmYXVsdCwgeyB0aXRsZTogJ0FkbWluIEhPWSBDT01PJyB9KSxcbiAgICAgICAgICAgIG1zZ0VsZW0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBfTXVpVGhlbWVQcm92aWRlcjIuZGVmYXVsdCxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICBfQ2FyZC5DYXJkLFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfQ2FyZC5DYXJkSGVhZGVyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0luaWNpYXIgc2VzaW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnSW5ncmVzZSBjcmVkZW5jaWFsZXMnIH0pLFxuICAgICAgICAgICAgICAgICAgICAnOycsXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgX0NhcmQuQ2FyZFRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGV4cGFuZGFibGU6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfVGV4dEZpZWxkMi5kZWZhdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3VzZXJuYW1lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaW50OiAndXNlcm5hbWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0aW5nTGFiZWxUZXh0OiAndXNlcm5hbWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLnVzZXJuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuc2V0U3RhdGUoeyB1c2VybmFtZTogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdicicsIG51bGwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1RleHRGaWVsZDIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwYXNzd29yZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGludFRleHQ6ICdQYXNzd29yZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRpbmdMYWJlbFRleHQ6ICdQYXNzd29yZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5wYXNzd29yZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLnNldFN0YXRlKHsgcGFzc3dvcmQ6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnYnInLCBudWxsKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgIF9DYXJkLkNhcmRBY3Rpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9GbGF0QnV0dG9uMi5kZWZhdWx0LCB7IGxhYmVsOiAnSW5pY2lhciBzZXNpb24nLCBvbkNsaWNrOiB0aGlzLnN1Ym1pdEZvcm0gfSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gQWRtaW5Mb2dpbjtcblxuLyoqKi8gfSksXG5cbi8qKiovIDI3Nzpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfTXVpVGhlbWVQcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXG52YXIgX011aVRoZW1lUHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTXVpVGhlbWVQcm92aWRlcik7XG5cbnZhciBfUmFpc2VkQnV0dG9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCk7XG5cbnZhciBfUmFpc2VkQnV0dG9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1JhaXNlZEJ1dHRvbik7XG5cbnZhciBfVGV4dEZpZWxkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cbnZhciBfVGV4dEZpZWxkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1RleHRGaWVsZCk7XG5cbnZhciBfQ2FyZCA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpO1xuXG52YXIgX0NoZWNrYm94ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MCk7XG5cbnZhciBfQ2hlY2tib3gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ2hlY2tib3gpO1xuXG52YXIgX0ZsYXRCdXR0b24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblxudmFyIF9GbGF0QnV0dG9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ZsYXRCdXR0b24pO1xuXG52YXIgX0RpYWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXG52YXIgX0RpYWxvZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EaWFsb2cpO1xuXG52YXIgX1NuYWNrYmFyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MSk7XG5cbnZhciBfU25hY2tiYXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU25hY2tiYXIpO1xuXG52YXIgX0Ryb3BEb3duTWVudSA9IF9fd2VicGFja19yZXF1aXJlX18oMTE1KTtcblxudmFyIF9Ecm9wRG93bk1lbnUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRHJvcERvd25NZW51KTtcblxudmFyIF9NZW51SXRlbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTAxKTtcblxudmFyIF9NZW51SXRlbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9NZW51SXRlbSk7XG5cbnZhciBfYXhpb3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblxudmFyIF9heGlvczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9heGlvcyk7XG5cbnZhciBfSGVhZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OSk7XG5cbnZhciBfSGVhZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0hlYWRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qIEZJTiBERSBJTVBPUlRTIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbnZhciBTaG9wRm9ybSA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVDbGFzcyh7XG4gICAgZGlzcGxheU5hbWU6ICdTaG9wRm9ybScsXG4gICAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgICAgIHJldHVybiB7IHRva2VuOiAnJyB9O1xuICAgIH0sXG4gICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtc2dTbmFja2Jhck9wZW46IGZhbHNlLFxuICAgICAgICAgICAgbmFtZTogJycsXG4gICAgICAgICAgICBhZGRyZXNzOiAnJyxcbiAgICAgICAgICAgIHBob25lOiAnJyxcbiAgICAgICAgICAgIHpvbmU6IDEsXG4gICAgICAgICAgICBkaXN0cmljdHM6IG51bGwsXG4gICAgICAgICAgICBhZG1pbkVtYWlsOiAnJyxcbiAgICAgICAgICAgIGFkbWluTmFtZTogJycsXG4gICAgICAgICAgICBsYXQ6ICcnLFxuICAgICAgICAgICAgbG9uZzogJydcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICBjb25zb2xlLmxvZygndG9rZW46ICcgKyB0aGlzLnByb3BzLnRva2VuKTtcbiAgICAgICAgX2F4aW9zMi5kZWZhdWx0LmdldCgnL2FwaS92MS9kaXN0cmljdHMnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNldFN0YXRlKHsgZGlzdHJpY3RzOiByZXNwb25zZS5kYXRhLmRpc3RyaWN0cyB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBvcGVuU25hY2tiYXI6IGZ1bmN0aW9uIG9wZW5TbmFja2Jhcihtc2cpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0FicmllbmRvIHNuYWNrIGJhcicpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgbXNnU25hY2tiYXJPcGVuOiB0cnVlLCBzbmFja2Jhck1lc3NhZ2U6IG1zZyB9KTtcbiAgICB9LFxuICAgIGhhbmRsZVNuYWNrYmFyUmVxdWVzdENsb3NlOiBmdW5jdGlvbiBoYW5kbGVTbmFja2JhclJlcXVlc3RDbG9zZSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IG1zZ1NuYWNrYmFyT3BlbjogZmFsc2UgfSk7XG4gICAgfSxcbiAgICBoYW5kbGVTaG9wQ3JlYXRlU3VjY2VzczogZnVuY3Rpb24gaGFuZGxlU2hvcENyZWF0ZVN1Y2Nlc3MoZGF0YSkge1xuICAgICAgICB2YXIgc2hvcElkID0gZGF0YS5zaG9wLmlkO1xuICAgICAgICB0aGlzLm9wZW5TbmFja2JhcignQ29tZXJjaW8gJyArIHNob3BJZCArICcgY3JlYWRvJyk7XG4gICAgfSxcbiAgICBoYW5kbGVTaG9wQ3JlYXRlRXJyb3I6IGZ1bmN0aW9uIGhhbmRsZVNob3BDcmVhdGVFcnJvcihjYXVzZSkge1xuICAgICAgICB0aGlzLm9wZW5TbmFja2JhcihjYXVzZS5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpO1xuICAgIH0sXG4gICAgY2hlY2tGaWVsZHM6IGZ1bmN0aW9uIGNoZWNrRmllbGRzKCkge1xuICAgICAgICB2YXIgX3N0YXRlID0gdGhpcy5zdGF0ZSxcbiAgICAgICAgICAgIG5hbWUgPSBfc3RhdGUubmFtZSxcbiAgICAgICAgICAgIGFkZHJlc3MgPSBfc3RhdGUuYWRkcmVzcyxcbiAgICAgICAgICAgIHBob25lID0gX3N0YXRlLnBob25lLFxuICAgICAgICAgICAgem9uZSA9IF9zdGF0ZS56b25lLFxuICAgICAgICAgICAgYWRtaW5FbWFpbCA9IF9zdGF0ZS5hZG1pbkVtYWlsLFxuICAgICAgICAgICAgYWRtaW5OYW1lID0gX3N0YXRlLmFkbWluTmFtZSxcbiAgICAgICAgICAgIGxhdCA9IF9zdGF0ZS5sYXQsXG4gICAgICAgICAgICBsb25nID0gX3N0YXRlLmxvbmc7XG5cbiAgICAgICAgaWYgKCFuYW1lIHx8ICFhZGRyZXNzIHx8ICFwaG9uZSB8fCAhem9uZSB8fCAhYWRtaW5FbWFpbCB8fCAhYWRtaW5OYW1lIHx8ICFsYXQgfHwgIWxvbmcpIHtcbiAgICAgICAgICAgIHJldHVybiB7IG9rOiBmYWxzZSwgbXNnOiAnUGFyYW1ldHJvcyBpbmNvbXBsZXRvcycgfTtcbiAgICAgICAgfSBlbHNlIHJldHVybiB7IG9rOiB0cnVlIH07XG4gICAgfSxcbiAgICBjcmVhdGVTaG9wOiBmdW5jdGlvbiBjcmVhdGVTaG9wKCkge1xuICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICB2YXIgZmllbGRzQ2hlY2sgPSB0aGlzLmNoZWNrRmllbGRzKCk7XG4gICAgICAgIGlmICghZmllbGRzQ2hlY2sub2spIHJldHVybiB0aGlzLm9wZW5TbmFja2JhcihmaWVsZHNDaGVjay5tc2cpO1xuXG4gICAgICAgIHZhciBfc3RhdGUyID0gdGhpcy5zdGF0ZSxcbiAgICAgICAgICAgIG5hbWUgPSBfc3RhdGUyLm5hbWUsXG4gICAgICAgICAgICBhZGRyZXNzID0gX3N0YXRlMi5hZGRyZXNzLFxuICAgICAgICAgICAgcGhvbmUgPSBfc3RhdGUyLnBob25lLFxuICAgICAgICAgICAgem9uZSA9IF9zdGF0ZTIuem9uZSxcbiAgICAgICAgICAgIGFkbWluRW1haWwgPSBfc3RhdGUyLmFkbWluRW1haWwsXG4gICAgICAgICAgICBhZG1pbk5hbWUgPSBfc3RhdGUyLmFkbWluTmFtZSxcbiAgICAgICAgICAgIGxhdCA9IF9zdGF0ZTIubGF0LFxuICAgICAgICAgICAgbG9uZyA9IF9zdGF0ZTIubG9uZztcblxuICAgICAgICB2YXIgem9uZU9iaiA9IHRoaXMuc3RhdGUuZGlzdHJpY3RzLmZpbmQoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBkLmlkID09IHpvbmU7XG4gICAgICAgIH0pO1xuICAgICAgICAvKiBUT0RPIDogUE9SIEFIT1JBIFNFIEdVQVJEQSBMQSBaT05BIENPTU8gVU4gVkFSQ0hBUi4gTEEgTUlTTUEgREVCRVJJQSBHVUFSREFSU0UgQ09NTyBVTiBJRCBERSBESVNUUklUTyAqL1xuICAgICAgICB2YXIgYm9keSA9IHsgbmFtZTogbmFtZSwgYWRkcmVzczogYWRkcmVzcywgcGhvbmU6IHBob25lLCB6b25lOiB6b25lT2JqLm5hbWUsIGFkbWluRW1haWw6IGFkbWluRW1haWwsIGFkbWluTmFtZTogYWRtaW5OYW1lLCBsYXQ6IGxhdCwgbG9uZzogbG9uZyB9O1xuICAgICAgICB2YXIgY29uZmlnID0geyBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdGhpcy5wcm9wcy50b2tlbiB9IH07XG4gICAgICAgIF9heGlvczIuZGVmYXVsdC5wb3N0KCcvYXBpL3YxL3Nob3BzJywgYm9keSwgY29uZmlnKS50aGVuKGZ1bmN0aW9uIChjb250ZW50cykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coY29udGVudHMuZGF0YSk7XG4gICAgICAgICAgICBfdGhpczIuaGFuZGxlU2hvcENyZWF0ZVN1Y2Nlc3MoY29udGVudHMuZGF0YSk7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChjYXVzZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihjYXVzZSk7XG4gICAgICAgICAgICBfdGhpczIuaGFuZGxlU2hvcENyZWF0ZUVycm9yKGNhdXNlKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBoYW5kbGVab25lQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVab25lQ2hhbmdlKGV2ZW50LCBpbmRleCwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHpvbmU6IHZhbHVlIH0pO1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICAgIC8vIHNpIGxvcyBkaXN0cml0b3Mgbm8gZnVlcm9uIGNhcmdhZG9zLCBlbnRvbmNlcyBzZSBpbmRpY2EgYWwgdXN1YXJpbyBxdWUgZGViZSBlc3BlcmFyXG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5kaXN0cmljdHMpIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAnRXNwZXJlLi4uJ1xuICAgICAgICApO1xuXG4gICAgICAgIHZhciBkaXN0cmljdE1lbnVJdGVtcyA9IFtdO1xuICAgICAgICB0aGlzLnN0YXRlLmRpc3RyaWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChkaXN0cmljdCkge1xuICAgICAgICAgICAgcmV0dXJuIGRpc3RyaWN0TWVudUl0ZW1zLnB1c2goX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX01lbnVJdGVtMi5kZWZhdWx0LCB7IHZhbHVlOiBkaXN0cmljdC5pZCwgcHJpbWFyeVRleHQ6IGRpc3RyaWN0Lm5hbWUgfSkpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgc3R5bGU6IHsgcGFkZGluZ0JvdHRvbTogMTAsIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMjU1LDI1NSwyNTUsMC43KScgfSB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBzdHlsZTogeyBtYXJnaW46IDIwIH0gfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2gxJyxcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgJ051ZXZvIGNvbWVyY2lvJ1xuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2hyJywgbnVsbCksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdoMicsXG4gICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICdEYXRvcyBkZWwgY29tZXJjaW8nXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfVGV4dEZpZWxkMi5kZWZhdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdOb21icmUnLFxuICAgICAgICAgICAgICAgICAgICBoaW50OiAnTm9tYnJlJyxcbiAgICAgICAgICAgICAgICAgICAgZmxvYXRpbmdMYWJlbFRleHQ6ICdOb21icmUnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5zZXRTdGF0ZSh7IG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IH0pLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdicicsIG51bGwpLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9UZXh0RmllbGQyLmRlZmF1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0RpcmVjY2lvbicsXG4gICAgICAgICAgICAgICAgICAgIGhpbnQ6ICdEaXJlY2Npb24nLFxuICAgICAgICAgICAgICAgICAgICBmbG9hdGluZ0xhYmVsVGV4dDogJ0RpcmVjY2lvbicsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLmFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLnNldFN0YXRlKHsgYWRkcmVzczogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2JyJywgbnVsbCksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1RleHRGaWVsZDIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnTGF0aXR1ZCcsXG4gICAgICAgICAgICAgICAgICAgIGhpbnQ6ICdMYXRpdHVkJyxcbiAgICAgICAgICAgICAgICAgICAgZmxvYXRpbmdMYWJlbFRleHQ6ICdMYXRpdHVkJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUubGF0LFxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5zZXRTdGF0ZSh7IGxhdDogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1RleHRGaWVsZDIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnTG9uZ2l0dWQnLFxuICAgICAgICAgICAgICAgICAgICBoaW50OiAnTG9uZ2l0dWQnLFxuICAgICAgICAgICAgICAgICAgICBmbG9hdGluZ0xhYmVsVGV4dDogJ0xvbmdpdHVkJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUubG9uZyxcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuc2V0U3RhdGUoeyBsb25nOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSB9KSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnYnInLCBudWxsKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgX0Ryb3BEb3duTWVudTIuZGVmYXVsdCxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUuem9uZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZVpvbmVDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuSW1tZWRpYXRlbHk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsgd2lkdGg6IDIwMCwgcGFkZGluZzogMCB9IH0sXG4gICAgICAgICAgICAgICAgICAgIGRpc3RyaWN0TWVudUl0ZW1zXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAnICcsXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2JyJywgbnVsbCksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1RleHRGaWVsZDIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnVGVsZWZvbm8nLFxuICAgICAgICAgICAgICAgICAgICBoaW50OiAnVGVsZWZvbm8gc2luIGd1aW9uIG5pIGVzcGFjaW9zJyxcbiAgICAgICAgICAgICAgICAgICAgZmxvYXRpbmdMYWJlbFRleHQ6ICdUZWxlZm9ubycsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLnBob25lLFxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5zZXRTdGF0ZSh7IHBob25lOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ251bWJlcicgfSksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2JyJywgbnVsbCksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2hyJywgbnVsbCksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdoMicsXG4gICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICdEYXRvcyBkZWwgYWRtaW5pc3RyYWRvciBkZWwgY29tZXJjaW8nXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfVGV4dEZpZWxkMi5kZWZhdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdOb21icmUnLFxuICAgICAgICAgICAgICAgICAgICBoaW50OiAnTm9tYnJlJyxcbiAgICAgICAgICAgICAgICAgICAgZmxvYXRpbmdMYWJlbFRleHQ6ICdOb21icmUnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5hZG1pbk5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLnNldFN0YXRlKHsgYWRtaW5OYW1lOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSB9KSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnYnInLCBudWxsKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfVGV4dEZpZWxkMi5kZWZhdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdFbWFpbCcsXG4gICAgICAgICAgICAgICAgICAgIGhpbnQ6ICdFbWFpbCcsXG4gICAgICAgICAgICAgICAgICAgIGZsb2F0aW5nTGFiZWxUZXh0OiAnRW1haWwnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5hZG1pbkVtYWlsLFxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5zZXRTdGF0ZSh7IGFkbWluRW1haWw6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IH0pLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdicicsIG51bGwpLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9SYWlzZWRCdXR0b24yLmRlZmF1bHQsIHsgc3R5bGU6IHsgbWFyZ2luVG9wOiAyMCB9LCBsYWJlbDogJ0NyZWFyIGNvbWVyY2lvJywgb25DbGljazogdGhpcy5jcmVhdGVTaG9wLCBzZWNvbmRhcnk6IHRydWUgfSlcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfU25hY2tiYXIyLmRlZmF1bHQsIHtcbiAgICAgICAgICAgICAgICBvcGVuOiB0aGlzLnN0YXRlLm1zZ1NuYWNrYmFyT3BlbixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiB0aGlzLnN0YXRlLnNuYWNrYmFyTWVzc2FnZSxcbiAgICAgICAgICAgICAgICBhdXRvSGlkZUR1cmF0aW9uOiAzMDAwLFxuICAgICAgICAgICAgICAgIG9uUmVxdWVzdENsb3NlOiB0aGlzLmhhbmRsZVNuYWNrYmFyUmVxdWVzdENsb3NlIH0pXG4gICAgICAgICk7XG4gICAgfVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFNob3BGb3JtO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMjc4OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9NdWlUaGVtZVByb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG5cbnZhciBfTXVpVGhlbWVQcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9NdWlUaGVtZVByb3ZpZGVyKTtcblxudmFyIF9SYWlzZWRCdXR0b24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwKTtcblxudmFyIF9SYWlzZWRCdXR0b24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUmFpc2VkQnV0dG9uKTtcblxudmFyIF9UZXh0RmllbGQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblxudmFyIF9UZXh0RmllbGQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfVGV4dEZpZWxkKTtcblxudmFyIF9DYXJkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSk7XG5cbnZhciBfQ2hlY2tib3ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgwKTtcblxudmFyIF9DaGVja2JveDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9DaGVja2JveCk7XG5cbnZhciBfRmxhdEJ1dHRvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXG52YXIgX0ZsYXRCdXR0b24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRmxhdEJ1dHRvbik7XG5cbnZhciBfRGlhbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cbnZhciBfRGlhbG9nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RpYWxvZyk7XG5cbnZhciBfU25hY2tiYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgxKTtcblxudmFyIF9TbmFja2JhcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TbmFja2Jhcik7XG5cbnZhciBfcmVhY3RSb3V0ZXJEb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KTtcblxudmFyIF9GbG9hdGluZ0FjdGlvbkJ1dHRvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNDE1KTtcblxudmFyIF9GbG9hdGluZ0FjdGlvbkJ1dHRvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9GbG9hdGluZ0FjdGlvbkJ1dHRvbik7XG5cbnZhciBfYWRkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NDkpO1xuXG52YXIgX2FkZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hZGQpO1xuXG52YXIgX2F4aW9zID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG5cbnZhciBfYXhpb3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXhpb3MpO1xuXG52YXIgX0hlYWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpO1xuXG52YXIgX0hlYWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9IZWFkZXIpO1xuXG52YXIgX1Nob3BNZW51ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMDMpO1xuXG52YXIgX1Nob3BNZW51MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Nob3BNZW51KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyogRklOIERFIElNUE9SVFMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIEVNUFRZX0NBTExCQUNLID0gZnVuY3Rpb24gRU1QVFlfQ0FMTEJBQ0soKSB7fTtcblxuZnVuY3Rpb24gQmFuU2hvcERpYWxvZyhwcm9wcykge1xuICAgIGZ1bmN0aW9uIGJhblNob3AoKSB7XG4gICAgICAgIHZhciBzaG9wSWQgPSBwcm9wcy5zaG9wLmlkO1xuICAgICAgICBwcm9wcy5zaG9wLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgKDAsIF9heGlvczIuZGVmYXVsdCkoe1xuICAgICAgICAgICAgdXJsOiAnL2FwaS92MS9zaG9wcy8nICsgc2hvcElkLFxuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBwcm9wcy50b2tlbiB9LFxuICAgICAgICAgICAgZGF0YTogcHJvcHMuc2hvcFxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChjb250ZW50cykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coY29udGVudHMuZGF0YSk7XG4gICAgICAgICAgICBwcm9wcy5vblN1Y2Nlc3MoKTtcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGNhdXNlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGNhdXNlKTtcbiAgICAgICAgICAgIHByb3BzLm9uRXJyb3IoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIGFjdGlvbnMgPSBbX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0ZsYXRCdXR0b24yLmRlZmF1bHQsIHtcbiAgICAgICAgbGFiZWw6ICdDYW5jZWxhcicsXG4gICAgICAgIHByaW1hcnk6IHRydWUsXG4gICAgICAgIG9uQ2xpY2s6IHByb3BzLm9uQ2xvc2VcbiAgICB9KSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0ZsYXRCdXR0b24yLmRlZmF1bHQsIHtcbiAgICAgICAgbGFiZWw6ICdQcm9oaWJpcicsXG4gICAgICAgIHByaW1hcnk6IHRydWUsXG4gICAgICAgIG9uQ2xpY2s6IGJhblNob3BcbiAgICB9KV07XG5cbiAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgIF9EaWFsb2cyLmRlZmF1bHQsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiAnUHJvaGliaXIgY29tZXJjaW8gJyArIHByb3BzLnNob3AuaWQsXG4gICAgICAgICAgICBhY3Rpb25zOiBhY3Rpb25zLFxuICAgICAgICAgICAgbW9kYWw6IHRydWUsXG4gICAgICAgICAgICBvcGVuOiBwcm9wcy5vcGVuIH0sXG4gICAgICAgICdcXHhCRkRlc2VhIFByb2hpYmlyIGVsIGNvbWVyY2lvPydcbiAgICApO1xufVxuXG52YXIgU2hvcExpc3QgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlQ2xhc3Moe1xuICAgIGRpc3BsYXlOYW1lOiAnU2hvcExpc3QnLFxuICAgIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gZ2V0RGVmYXVsdFByb3BzKCkge1xuICAgICAgICByZXR1cm4geyB0b2tlbjogJycgfTtcbiAgICB9LFxuICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2hvcHM6IFtdLFxuICAgICAgICAgICAgZXJyU25hY2tiYXJPcGVuOiBmYWxzZSxcbiAgICAgICAgICAgIGJhblNob3A6IG51bGwsXG4gICAgICAgICAgICBzaG9wTWVudTogbnVsbFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgbG9hZFNob3BzOiBmdW5jdGlvbiBsb2FkU2hvcHMoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgX2F4aW9zMi5kZWZhdWx0LmdldCgnL2FwaS92MS9zaG9wcz90b2tlbj0nICsgdGhpcy5wcm9wcy50b2tlbikudGhlbihmdW5jdGlvbiAoY29udGVudHMpIHtcbiAgICAgICAgICAgIHZhciBzaG9wcyA9IGNvbnRlbnRzLmRhdGEuc2hvcHM7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbG9hZFNob3BzIHNob3BzOiAnICsgc2hvcHMpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3Nob3BzOicpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coc2hvcHMpO1xuICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBzaG9wczogc2hvcHMgfSk7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChjYXVzZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihjYXVzZSk7XG4gICAgICAgICAgICBfdGhpcy5vcGVuRXJyU25hY2tiYXIoJ0Vycm9yIGFsIG9idGVuZXIgbG9zIGNvbWVyY2lvcycpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3Rva2VuOiAnICsgdGhpcy5wcm9wcy50b2tlbik7XG4gICAgICAgIHRoaXMubG9hZFNob3BzKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTaG9wTGlzdCBESUQgTU9VTlQnKTtcbiAgICB9LFxuICAgIG9wZW5FcnJTbmFja2JhcjogZnVuY3Rpb24gb3BlbkVyclNuYWNrYmFyKG1zZykge1xuICAgICAgICBjb25zb2xlLmxvZygnQWJyaWVuZG8gc25hY2sgYmFyJyk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBlcnJTbmFja2Jhck9wZW46IHRydWUsIGVyclNuYWNrYmFyTWVzc2FnZTogbXNnIH0pO1xuICAgIH0sXG4gICAgaGFuZGxlRXJyU25hY2tiYXJSZXF1ZXN0Q2xvc2U6IGZ1bmN0aW9uIGhhbmRsZUVyclNuYWNrYmFyUmVxdWVzdENsb3NlKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgZXJyU25hY2tiYXJPcGVuOiBmYWxzZSB9KTtcbiAgICB9LFxuICAgIGNsb3NlQmFuRGlhbG9nOiBmdW5jdGlvbiBjbG9zZUJhbkRpYWxvZyhzaG9wKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuc2V0U3RhdGUoeyBiYW5TaG9wOiBudWxsIH0pO1xuICAgICAgICB9O1xuICAgIH0sXG4gICAgb3BlbkJhbkRpYWxvZzogZnVuY3Rpb24gb3BlbkJhbkRpYWxvZyhzaG9wKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzaG9wSWQgPSBzaG9wLmlkIHx8IHNob3A7XG4gICAgICAgICAgICBzZWxmLnNldFN0YXRlKHsgYmFuU2hvcDogc2hvcElkIH0pO1xuICAgICAgICB9O1xuICAgIH0sXG4gICAgaGFuZGxlU2hvcEJhblN1Y2Nlc3M6IGZ1bmN0aW9uIGhhbmRsZVNob3BCYW5TdWNjZXNzKHNob3ApIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5jbG9zZUJhbkRpYWxvZyhzaG9wKSgpO1xuICAgICAgICAgICAgc2VsZi5sb2FkU2hvcHMoKTtcbiAgICAgICAgICAgIHNlbGYub3BlbkVyclNuYWNrYmFyKCdDb21lcmNpbyBiYW5lYWRvJyk7XG4gICAgICAgIH07XG4gICAgfSxcbiAgICBlbmFibGVTaG9wOiBmdW5jdGlvbiBlbmFibGVTaG9wKHNob3ApIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBzaG9wLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgKDAsIF9heGlvczIuZGVmYXVsdCkoe1xuICAgICAgICAgICAgICAgIHVybDogJy9hcGkvdjEvc2hvcHMvJyArIHNob3AuaWQsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgc2VsZi5wcm9wcy50b2tlbiB9LFxuICAgICAgICAgICAgICAgIGRhdGE6IHNob3BcbiAgICAgICAgICAgIH0pLnRoZW4oc2VsZi5sb2FkU2hvcHMpLmNhdGNoKGZ1bmN0aW9uIChjYXVzZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoY2F1c2UpO1xuICAgICAgICAgICAgICAgIHNlbGYub3BlbkVyclNuYWNrYmFyKCdFcnJvciBhbCBoYWJpbGl0YXIgY29tZXJjaW8nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH0sXG4gICAgc2hvd01lbnU6IGZ1bmN0aW9uIHNob3dNZW51KHNob3ApIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgKDAsIF9heGlvczIuZGVmYXVsdCkoe1xuICAgICAgICAgICAgICAgIHVybDogJy9hcGkvdjEvc2hvcHMvJyArIHNob3AuaWQgKyAnL21lbnUnLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHNlbGYucHJvcHMudG9rZW4gfVxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2hvd01lbnUgYXhpb3MgcmVzcG9uc2U6ICcpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgIHNlbGYuc2V0U3RhdGUoeyBzaG9wTWVudTogcmVzcG9uc2UuZGF0YS5tZW51IH0pO1xuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGNhdXNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihjYXVzZSk7XG4gICAgICAgICAgICAgICAgc2VsZi5vcGVuRXJyU25hY2tiYXIoJ0Vycm9yIGFsIG9idGVuZXIgbWVudSBkZSBjb21lcmNpbycpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfSxcbiAgICBoYW5kbGVNZW51Q2xvc2U6IGZ1bmN0aW9uIGhhbmRsZU1lbnVDbG9zZSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNob3BNZW51OiBudWxsIH0pO1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFwidGhpcy5zdGF0ZS5zaG9wczogXCIgKyB0aGlzLnN0YXRlLnNob3BzKTtcblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zaG9wcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgJ05vIGhheSBjb21lcmNpb3MuLi4nXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGJhblNob3BEaWFsb2cgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5iYW5TaG9wKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQ3JlYW5kbyBkaWFsb2dvIGRlIGJhbmVvJyk7XG4gICAgICAgICAgICB2YXIgc2hvcCA9IHRoaXMuc3RhdGUuc2hvcHMuZmluZChmdW5jdGlvbiAocykge1xuICAgICAgICAgICAgICAgIHJldHVybiBzLmlkID09IF90aGlzMi5zdGF0ZS5iYW5TaG9wO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBiYW5TaG9wRGlhbG9nID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQmFuU2hvcERpYWxvZywge1xuICAgICAgICAgICAgICAgIHNob3A6IHNob3AsXG4gICAgICAgICAgICAgICAgdG9rZW46IHRoaXMucHJvcHMudG9rZW4sXG4gICAgICAgICAgICAgICAgb3BlbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBvblN1Y2Nlc3M6IHRoaXMuaGFuZGxlU2hvcEJhblN1Y2Nlc3Moc2hvcCksXG4gICAgICAgICAgICAgICAgb25DbG9zZTogdGhpcy5jbG9zZUJhbkRpYWxvZyhzaG9wKSxcbiAgICAgICAgICAgICAgICBvbkVycm9yOiBmdW5jdGlvbiBvbkVycm9yKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLm9wZW5FcnJTbmFja2JhcignRXJyb3IgYWwgUHJvaGliaXIgZWwgY29tZXJjaW8gJyArIHNob3AuaWQpO1xuICAgICAgICAgICAgICAgIH0gfSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2hvcE1lbnVFbGVtID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2hvcE1lbnUpIHtcbiAgICAgICAgICAgIHNob3BNZW51RWxlbSA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9TaG9wTWVudTIuZGVmYXVsdCwgeyBtZW51OiB0aGlzLnN0YXRlLnNob3BNZW51LCBnb0JhY2s6IHRoaXMuaGFuZGxlTWVudUNsb3NlIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNob3BDYXJkcyA9IHRoaXMuc3RhdGUuc2hvcHMubWFwKGZ1bmN0aW9uIChzaG9wKSB7XG4gICAgICAgICAgICB2YXIgYmFja0NvbG9ycyA9IFsnIzFBOTM4NicsICdyZ2IoMjEsIDExNCwgMTA1KScsICcjMTM0RTQ4J107XG4gICAgICAgICAgICB2YXIgY29sSWR4ID0gMDtcbiAgICAgICAgICAgIHZhciBpbml0ZG9uZSA9IHNob3AuaW5pdGRvbmUsXG4gICAgICAgICAgICAgICAgdmFsaWRvbmUgPSBzaG9wLnZhbGlkb25lO1xuXG4gICAgICAgICAgICB2YXIgc3RhdHVzU3RyID0gJ1JlZ2lzdHJvIHBlbmRpZW50ZSc7XG4gICAgICAgICAgICBpZiAoaW5pdGRvbmUpIHN0YXR1c1N0ciA9ICdWYWxpZGFjaW9uIHBlbmRpZW50ZSc7XG4gICAgICAgICAgICBpZiAodmFsaWRvbmUpIHN0YXR1c1N0ciA9ICdQdWJsaWNhZG8nO1xuXG4gICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgX0NhcmQuQ2FyZCxcbiAgICAgICAgICAgICAgICB7IHN0eWxlOiB7IGJhY2tncm91bmRDb2xvcjogXCJyZ2JhKDI1NSwyNTUsMjU1LDAuOClcIiwgbWFyZ2luOiAxMCB9IH0sXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0NhcmQuQ2FyZEhlYWRlciwge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0NvbWVyY2lvICcgKyBzaG9wLmlkLFxuICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogc2hvcC5uYW1lXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIF9DYXJkLkNhcmRUZXh0LFxuICAgICAgICAgICAgICAgICAgICB7IGV4cGFuZGFibGU6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdHJvbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ05vbWJyZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnOiAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvcC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyAnXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdHJvbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0RpcmVjY2lvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnOiAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvcC5hZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyAnXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdHJvbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0JhcnJpbydcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnOiAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvcC56b25lLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyAnXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdHJvbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1RlbGVmb25vJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICc6ICcsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG9wLnBob25lLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyAnXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdHJvbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0VzdGFkbydcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnOiAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzU3RyXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICBfQ2FyZC5DYXJkQWN0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0ZsYXRCdXR0b24yLmRlZmF1bHQsIHsgbGFiZWw6ICdQcm9oaWJpcicsIHNlY29uZGFyeTogdHJ1ZSwgZGlzYWJsZWQ6ICFzaG9wLmVuYWJsZWQsIG9uQ2xpY2s6IF90aGlzMi5vcGVuQmFuRGlhbG9nKHNob3ApIH0pLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfRmxhdEJ1dHRvbjIuZGVmYXVsdCwgeyBsYWJlbDogJ0hhYmlsaXRhcicsIGRpc2FibGVkOiBzaG9wLmVuYWJsZWQsIG9uQ2xpY2s6IF90aGlzMi5lbmFibGVTaG9wKHNob3ApIH0pLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfRmxhdEJ1dHRvbjIuZGVmYXVsdCwgeyBsYWJlbDogJ01lbnUnLCBvbkNsaWNrOiBfdGhpczIuc2hvd01lbnUoc2hvcCkgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgbWFpbkVsZW0gPSBiYW5TaG9wRGlhbG9nIHx8IHNob3BNZW51RWxlbSB8fCBzaG9wQ2FyZHM7XG5cbiAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgX3JlYWN0Um91dGVyRG9tLkxpbmssXG4gICAgICAgICAgICAgICAgeyB0bzogJy9zaG9wcy9jcmVhdGUnIH0sXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIF9GbG9hdGluZ0FjdGlvbkJ1dHRvbjIuZGVmYXVsdCxcbiAgICAgICAgICAgICAgICAgICAgeyBzZWNvbmRhcnk6IHRydWUsIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgekluZGV4OiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbTogJzUlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDogJzUlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfYWRkMi5kZWZhdWx0LCBudWxsKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBtYWluRWxlbSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9TbmFja2JhcjIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgIG9wZW46IHRoaXMuc3RhdGUuZXJyU25hY2tiYXJPcGVuLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuc3RhdGUuZXJyU25hY2tiYXJNZXNzYWdlLFxuICAgICAgICAgICAgICAgIGF1dG9IaWRlRHVyYXRpb246IDMwMDAsXG4gICAgICAgICAgICAgICAgb25SZXF1ZXN0Q2xvc2U6IHRoaXMuaGFuZGxlRXJyU25hY2tiYXJSZXF1ZXN0Q2xvc2VcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFNob3BMaXN0O1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMzAwOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9GbGF0QnV0dG9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cbnZhciBfRmxhdEJ1dHRvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9GbGF0QnV0dG9uKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIEFjdGlvbkhlYWRlciA9IGZ1bmN0aW9uIEFjdGlvbkhlYWRlcihwcm9wcykge1xuICAgIHZhciB0aXRsZSA9IHByb3BzLnRpdGxlIHx8ICdTaGFyZWQgc2VydmVyJztcbiAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IHN0eWxlOiB7IGNvbG9yOiAnd2hpdGUnLCBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2IoMCwgMTg4LCAyMTIpJywgdHJhbnNpdGlvbjogJ2FsbCA0NTBtcyBjdWJpYy1iZXppZXIoMC4yMywgMSwgMC4zMiwgMSkgMG1zJywgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsIGZvbnRGYW1pbHk6ICdSb2JvdG8sIHNhbnMtc2VyaWYnLCBib3JkZXJSYWRpdXM6ICcwcHgnLCBwb3NpdGlvbjogJ3JlbGF0aXZlJywgekluZGV4OiAxMTAwLCB3aWR0aDogJzEwMCUnLCBkaXNwbGF5OiAnZmxleCcsIHBhZGRpbmdMZWZ0OiAnMjRweCcsIHBhZGRpbmdSaWdodDogJzI0cHgnIH0gfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0ZsYXRCdXR0b24yLmRlZmF1bHQsIHsgc3R5bGU6IHsgY29sb3I6ICd3aGl0ZScgfSwgbGFiZWw6ICdWb2x2ZXInLCBvbkNsaWNrOiBwcm9wcy5vbkNsaWNrIH0pXG4gICAgKTtcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IEFjdGlvbkhlYWRlcjtcblxuLyoqKi8gfSksXG5cbi8qKiovIDMwMTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cbnZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXG52YXIgX3JlYWN0Um91dGVyRG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nik7XG5cbnZhciBfTXVpVGhlbWVQcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXG52YXIgX011aVRoZW1lUHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTXVpVGhlbWVQcm92aWRlcik7XG5cbnZhciBfYXhpb3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblxudmFyIF9heGlvczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9heGlvcyk7XG5cbnZhciBfQWRtaW5CYWNrb2ZmaWNlQmFyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNzMpO1xuXG52YXIgX0FkbWluQmFja29mZmljZUJhcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9BZG1pbkJhY2tvZmZpY2VCYXIpO1xuXG52YXIgX0FkbWluSW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3NCk7XG5cbnZhciBfQWRtaW5JbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9BZG1pbkluZGV4KTtcblxudmFyIF9BZG1pbkxvZ2luID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNzUpO1xuXG52YXIgX0FkbWluTG9naW4yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQWRtaW5Mb2dpbik7XG5cbnZhciBfU2hvcExpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3OCk7XG5cbnZhciBfU2hvcExpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU2hvcExpc3QpO1xuXG52YXIgX1Nob3BGb3JtID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNzcpO1xuXG52YXIgX1Nob3BGb3JtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Nob3BGb3JtKTtcblxudmFyIF9yZWFjdFRhcEV2ZW50UGx1Z2luID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Mik7XG5cbnZhciBfcmVhY3RUYXBFdmVudFBsdWdpbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdFRhcEV2ZW50UGx1Z2luKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuKDAsIF9yZWFjdFRhcEV2ZW50UGx1Z2luMi5kZWZhdWx0KSgpO1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLyogRVNURSBGUkFHTUVOVE8gREUgQ09ESUdPIEVTIFJFUVVFUklETyBQQVJBIExPUyBFVkVOVE9TIERFIFRJUE8gVE9VQ0ggTyBDTElDSyBFTiBDT01QT05FTlRFUyBNQVRFUklBTC1VSSAqL1xuY29uc29sZS5sb2coJ1BhcnNlYW5kbyBjb29raWUgJyArIGRvY3VtZW50LmNvb2tpZSk7XG52YXIgY29va2llID0gZG9jdW1lbnQuY29va2llIHx8ICcnO1xudmFyIGNvb2tpZVRva2VuU3RyID0gY29va2llLnNwbGl0KCc7ICcpLmZpbmQoZnVuY3Rpb24gKHMpIHtcbiAgICByZXR1cm4gcy5zdGFydHNXaXRoKCd0b2tlbj0nKTtcbn0pO1xudmFyIGNvb2tpZVRva2VuID0gY29va2llVG9rZW5TdHIgPyBjb29raWVUb2tlblN0ci5yZXBsYWNlKCd0b2tlbj0nLCAnJykgOiBudWxsO1xuXG52YXIgQWRtaW5CYWNrb2ZmaWNlID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ0FkbWluQmFja29mZmljZScsXG4gICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b2tlbjogbnVsbCxcbiAgICAgICAgICAgIHVzZXI6IG51bGwsXG4gICAgICAgICAgICByZW5kZXJSZWFkeTogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgLyogU0UgQ0FSR0FOIExBUyBDQU5DSU9ORVMgREVTUFVFUyBRVUUgRUwgQ09NUE9ORU5URSBIQVlBIFNJRE8gTU9OVEFETyAqL1xuICAgICAgICBjb25zb2xlLmxvZygnQWRtaW5CYWNrb2ZmaWNlIE1PTlRBREEhJyk7XG4gICAgICAgIC8qIFNpIHNlIGVuY3VlbnRyYSB1biB0b2tlbiBlbiBsYXMgY29va2llcyBlbnRvbmNlcyBzZSBzZXRlYSBlbCBtaXNtbyB5IHNlIG9idGllbmUgZWwgdXN1YXJpb1xyXG4gICAgICAgIENhc28gY29udHJhcmlvLCBzZSBtYXJjYSBhbCBjb21wb25lbnRlIGNvbW8gbGlzdG8gcGFyYSByZW5kZXJpemFyICovXG4gICAgICAgIGlmIChjb29raWVUb2tlbikgdGhpcy5zZXRUb2tlbihjb29raWVUb2tlbik7ZWxzZSB0aGlzLnNldFN0YXRlKHsgcmVuZGVyUmVhZHk6IHRydWUgfSk7XG4gICAgfSxcbiAgICBzZXRUb2tlbjogZnVuY3Rpb24gc2V0VG9rZW4odG9rZW4pIHtcbiAgICAgICAgdG9rZW4gPSB0b2tlbi50b2tlbiB8fCB0b2tlbjtcbiAgICAgICAgY29uc29sZS5sb2coJ1NldGVhbmRvIHRva2VuOiAnICsgdG9rZW4pO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgdG9rZW46IHRva2VuLCByZW5kZXJSZWFkeTogdHJ1ZSB9KTtcbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdSRU5ERVJJTkcgQWRtaW5CYWNrb2ZmaWNlIScpO1xuXG4gICAgICAgIC8vaWYgKCF0aGlzLnN0YXRlLnJlbmRlclJlYWR5KSByZXR1cm4gKDxzcGFuPkVzcGVyZS4uLjwvc3Bhbj4pO1xuXG4gICAgICAgIHZhciB0b2tlbiA9IHRoaXMuc3RhdGUudG9rZW47XG4gICAgICAgIGlmICghdG9rZW4pIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfQWRtaW5Mb2dpbjIuZGVmYXVsdCwgeyBvblN1Ym1pdDogdGhpcy5zZXRUb2tlbiB9KTtcblxuICAgICAgICBjb25zb2xlLmxvZygnd2luZG93LmxvY2F0aW9uLmhhc2g6ICcgKyB3aW5kb3cubG9jYXRpb24uaGFzaCk7XG4gICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaGFzaCA9PSAnIy8nKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUkVQTEFDSU5HIExPQ0FUSU9OJyk7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgnL2FkbWluIy9pbmRleCcpO1xuICAgICAgICAgICAgLy9yZXR1cm4gPHNwYW4+UmVkaXJlY2Npb25hbmRvLi4uPC9zcGFuPjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIFNpIHVuIHVzdWFyaW8gaW5pY2lvIHNlc2lvbiwgcmVuZGVyaXpvIGxhIGFwcCBub3JtYWwgKi9cbiAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgX011aVRoZW1lUHJvdmlkZXIyLmRlZmF1bHQsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfQWRtaW5CYWNrb2ZmaWNlQmFyMi5kZWZhdWx0LCB7IG9uTG9nb3V0OiBmdW5jdGlvbiBvbkxvZ291dCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2dvdXRGb3JtLnN1Ym1pdCgpO1xuICAgICAgICAgICAgICAgICAgICB9IH0pLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFJvdXRlckRvbS5Sb3V0ZSwgeyBwYXRoOiAnL2luZGV4JywgY29tcG9uZW50OiBfQWRtaW5JbmRleDIuZGVmYXVsdCB9KSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSb3V0ZXJEb20uUm91dGUsIHsgcGF0aDogJy9zaG9wcy9saXN0JywgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1Nob3BMaXN0Mi5kZWZhdWx0LCB7IHRva2VuOiB0b2tlbiB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSB9KSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSb3V0ZXJEb20uUm91dGUsIHsgcGF0aDogJy9zaG9wcy9jcmVhdGUnLCBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfU2hvcEZvcm0yLmRlZmF1bHQsIHsgdG9rZW46IHRva2VuIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IH0pLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdmb3JtJywge1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICcvYWRtaW4vbG9nb3V0JyxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2dvdXRGb3JtID0gZjtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsgZGlzcGxheTogJ2hpZGRlbicgfSB9KVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG5fcmVhY3REb20yLmRlZmF1bHQucmVuZGVyKF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgIF9yZWFjdFJvdXRlckRvbS5IYXNoUm91dGVyLFxuICAgIG51bGwsXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQWRtaW5CYWNrb2ZmaWNlLCBudWxsKVxuKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAzMDM6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX011aVRoZW1lUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTtcblxudmFyIF9NdWlUaGVtZVByb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX011aVRoZW1lUHJvdmlkZXIpO1xuXG52YXIgX1JhaXNlZEJ1dHRvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNjApO1xuXG52YXIgX1JhaXNlZEJ1dHRvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9SYWlzZWRCdXR0b24pO1xuXG52YXIgX1RleHRGaWVsZCA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXG52YXIgX1RleHRGaWVsZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9UZXh0RmllbGQpO1xuXG52YXIgX0NhcmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KTtcblxudmFyIF9DaGVja2JveCA9IF9fd2VicGFja19yZXF1aXJlX18oODApO1xuXG52YXIgX0NoZWNrYm94MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NoZWNrYm94KTtcblxudmFyIF9GbGF0QnV0dG9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cbnZhciBfRmxhdEJ1dHRvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9GbGF0QnV0dG9uKTtcblxudmFyIF9EaWFsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblxudmFyIF9EaWFsb2cyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGlhbG9nKTtcblxudmFyIF9TbmFja2JhciA9IF9fd2VicGFja19yZXF1aXJlX18oODEpO1xuXG52YXIgX1NuYWNrYmFyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1NuYWNrYmFyKTtcblxudmFyIF9BY3Rpb25IZWFkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwMCk7XG5cbnZhciBfQWN0aW9uSGVhZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0FjdGlvbkhlYWRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIFNob3BNZW51KHByb3BzKSB7XG4gICAgdmFyIG1lbnUgPSBwcm9wcy5tZW51O1xuXG4gICAgdmFyIG1lbnVDYXJkcyA9IG1lbnUubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHZhciBkaXNoID0gaXRlbS5kaXNoO1xuICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBfQ2FyZC5DYXJkLFxuICAgICAgICAgICAgeyBzdHlsZTogeyBiYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSgyNTUsMjU1LDI1NSwwLjcpXCIgfSB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0NhcmQuQ2FyZEhlYWRlciwge1xuICAgICAgICAgICAgICAgIHRpdGxlOiAnUGxhdG8gJyArIGRpc2guaWQsXG4gICAgICAgICAgICAgICAgc3VidGl0bGU6IGRpc2gubmFtZSB9KSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIF9DYXJkLkNhcmRUZXh0LFxuICAgICAgICAgICAgICAgIHsgZXhwYW5kYWJsZTogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdzdHJvbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdEZXNjcmlwY2lvbjonXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICcgJyxcbiAgICAgICAgICAgICAgICAgICAgZGlzaC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICAgICAgJyAnXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdzdHJvbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdDb3N0bzonXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICcgJyxcbiAgICAgICAgICAgICAgICAgICAgZGlzaC5jb3N0LFxuICAgICAgICAgICAgICAgICAgICAnICdcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICBudWxsLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfQWN0aW9uSGVhZGVyMi5kZWZhdWx0LCB7IG9uQ2xpY2s6IHByb3BzLmdvQmFjayB9KSxcbiAgICAgICAgbWVudUNhcmRzXG4gICAgKTtcbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gU2hvcE1lbnU7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAzMTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbnZhciBhZGRMZWFkaW5nU2xhc2ggPSBleHBvcnRzLmFkZExlYWRpbmdTbGFzaCA9IGZ1bmN0aW9uIGFkZExlYWRpbmdTbGFzaChwYXRoKSB7XG4gIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nID8gcGF0aCA6ICcvJyArIHBhdGg7XG59O1xuXG52YXIgc3RyaXBMZWFkaW5nU2xhc2ggPSBleHBvcnRzLnN0cmlwTGVhZGluZ1NsYXNoID0gZnVuY3Rpb24gc3RyaXBMZWFkaW5nU2xhc2gocGF0aCkge1xuICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJyA/IHBhdGguc3Vic3RyKDEpIDogcGF0aDtcbn07XG5cbnZhciBoYXNCYXNlbmFtZSA9IGV4cG9ydHMuaGFzQmFzZW5hbWUgPSBmdW5jdGlvbiBoYXNCYXNlbmFtZShwYXRoLCBwcmVmaXgpIHtcbiAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgcHJlZml4ICsgJyhcXFxcL3xcXFxcP3wjfCQpJywgJ2knKS50ZXN0KHBhdGgpO1xufTtcblxudmFyIHN0cmlwQmFzZW5hbWUgPSBleHBvcnRzLnN0cmlwQmFzZW5hbWUgPSBmdW5jdGlvbiBzdHJpcEJhc2VuYW1lKHBhdGgsIHByZWZpeCkge1xuICByZXR1cm4gaGFzQmFzZW5hbWUocGF0aCwgcHJlZml4KSA/IHBhdGguc3Vic3RyKHByZWZpeC5sZW5ndGgpIDogcGF0aDtcbn07XG5cbnZhciBzdHJpcFRyYWlsaW5nU2xhc2ggPSBleHBvcnRzLnN0cmlwVHJhaWxpbmdTbGFzaCA9IGZ1bmN0aW9uIHN0cmlwVHJhaWxpbmdTbGFzaChwYXRoKSB7XG4gIHJldHVybiBwYXRoLmNoYXJBdChwYXRoLmxlbmd0aCAtIDEpID09PSAnLycgPyBwYXRoLnNsaWNlKDAsIC0xKSA6IHBhdGg7XG59O1xuXG52YXIgcGFyc2VQYXRoID0gZXhwb3J0cy5wYXJzZVBhdGggPSBmdW5jdGlvbiBwYXJzZVBhdGgocGF0aCkge1xuICB2YXIgcGF0aG5hbWUgPSBwYXRoIHx8ICcvJztcbiAgdmFyIHNlYXJjaCA9ICcnO1xuICB2YXIgaGFzaCA9ICcnO1xuXG4gIHZhciBoYXNoSW5kZXggPSBwYXRobmFtZS5pbmRleE9mKCcjJyk7XG4gIGlmIChoYXNoSW5kZXggIT09IC0xKSB7XG4gICAgaGFzaCA9IHBhdGhuYW1lLnN1YnN0cihoYXNoSW5kZXgpO1xuICAgIHBhdGhuYW1lID0gcGF0aG5hbWUuc3Vic3RyKDAsIGhhc2hJbmRleCk7XG4gIH1cblxuICB2YXIgc2VhcmNoSW5kZXggPSBwYXRobmFtZS5pbmRleE9mKCc/Jyk7XG4gIGlmIChzZWFyY2hJbmRleCAhPT0gLTEpIHtcbiAgICBzZWFyY2ggPSBwYXRobmFtZS5zdWJzdHIoc2VhcmNoSW5kZXgpO1xuICAgIHBhdGhuYW1lID0gcGF0aG5hbWUuc3Vic3RyKDAsIHNlYXJjaEluZGV4KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcGF0aG5hbWU6IHBhdGhuYW1lLFxuICAgIHNlYXJjaDogc2VhcmNoID09PSAnPycgPyAnJyA6IHNlYXJjaCxcbiAgICBoYXNoOiBoYXNoID09PSAnIycgPyAnJyA6IGhhc2hcbiAgfTtcbn07XG5cbnZhciBjcmVhdGVQYXRoID0gZXhwb3J0cy5jcmVhdGVQYXRoID0gZnVuY3Rpb24gY3JlYXRlUGF0aChsb2NhdGlvbikge1xuICB2YXIgcGF0aG5hbWUgPSBsb2NhdGlvbi5wYXRobmFtZSxcbiAgICAgIHNlYXJjaCA9IGxvY2F0aW9uLnNlYXJjaCxcbiAgICAgIGhhc2ggPSBsb2NhdGlvbi5oYXNoO1xuXG5cbiAgdmFyIHBhdGggPSBwYXRobmFtZSB8fCAnLyc7XG5cbiAgaWYgKHNlYXJjaCAmJiBzZWFyY2ggIT09ICc/JykgcGF0aCArPSBzZWFyY2guY2hhckF0KDApID09PSAnPycgPyBzZWFyY2ggOiAnPycgKyBzZWFyY2g7XG5cbiAgaWYgKGhhc2ggJiYgaGFzaCAhPT0gJyMnKSBwYXRoICs9IGhhc2guY2hhckF0KDApID09PSAnIycgPyBoYXNoIDogJyMnICsgaGFzaDtcblxuICByZXR1cm4gcGF0aDtcbn07XG5cbi8qKiovIH0pLFxuXG4vKioqLyAzMjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGFkZExlYWRpbmdTbGFzaDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiY1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHN0cmlwTGVhZGluZ1NsYXNoOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJmXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gaGFzQmFzZW5hbWU7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImdcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBzdHJpcEJhc2VuYW1lOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc3RyaXBUcmFpbGluZ1NsYXNoOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJhXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcGFyc2VQYXRoOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJiXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gY3JlYXRlUGF0aDsgfSk7XG52YXIgYWRkTGVhZGluZ1NsYXNoID0gZnVuY3Rpb24gYWRkTGVhZGluZ1NsYXNoKHBhdGgpIHtcbiAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLycgPyBwYXRoIDogJy8nICsgcGF0aDtcbn07XG5cbnZhciBzdHJpcExlYWRpbmdTbGFzaCA9IGZ1bmN0aW9uIHN0cmlwTGVhZGluZ1NsYXNoKHBhdGgpIHtcbiAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLycgPyBwYXRoLnN1YnN0cigxKSA6IHBhdGg7XG59O1xuXG52YXIgaGFzQmFzZW5hbWUgPSBmdW5jdGlvbiBoYXNCYXNlbmFtZShwYXRoLCBwcmVmaXgpIHtcbiAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgcHJlZml4ICsgJyhcXFxcL3xcXFxcP3wjfCQpJywgJ2knKS50ZXN0KHBhdGgpO1xufTtcblxudmFyIHN0cmlwQmFzZW5hbWUgPSBmdW5jdGlvbiBzdHJpcEJhc2VuYW1lKHBhdGgsIHByZWZpeCkge1xuICByZXR1cm4gaGFzQmFzZW5hbWUocGF0aCwgcHJlZml4KSA/IHBhdGguc3Vic3RyKHByZWZpeC5sZW5ndGgpIDogcGF0aDtcbn07XG5cbnZhciBzdHJpcFRyYWlsaW5nU2xhc2ggPSBmdW5jdGlvbiBzdHJpcFRyYWlsaW5nU2xhc2gocGF0aCkge1xuICByZXR1cm4gcGF0aC5jaGFyQXQocGF0aC5sZW5ndGggLSAxKSA9PT0gJy8nID8gcGF0aC5zbGljZSgwLCAtMSkgOiBwYXRoO1xufTtcblxudmFyIHBhcnNlUGF0aCA9IGZ1bmN0aW9uIHBhcnNlUGF0aChwYXRoKSB7XG4gIHZhciBwYXRobmFtZSA9IHBhdGggfHwgJy8nO1xuICB2YXIgc2VhcmNoID0gJyc7XG4gIHZhciBoYXNoID0gJyc7XG5cbiAgdmFyIGhhc2hJbmRleCA9IHBhdGhuYW1lLmluZGV4T2YoJyMnKTtcbiAgaWYgKGhhc2hJbmRleCAhPT0gLTEpIHtcbiAgICBoYXNoID0gcGF0aG5hbWUuc3Vic3RyKGhhc2hJbmRleCk7XG4gICAgcGF0aG5hbWUgPSBwYXRobmFtZS5zdWJzdHIoMCwgaGFzaEluZGV4KTtcbiAgfVxuXG4gIHZhciBzZWFyY2hJbmRleCA9IHBhdGhuYW1lLmluZGV4T2YoJz8nKTtcbiAgaWYgKHNlYXJjaEluZGV4ICE9PSAtMSkge1xuICAgIHNlYXJjaCA9IHBhdGhuYW1lLnN1YnN0cihzZWFyY2hJbmRleCk7XG4gICAgcGF0aG5hbWUgPSBwYXRobmFtZS5zdWJzdHIoMCwgc2VhcmNoSW5kZXgpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwYXRobmFtZTogcGF0aG5hbWUsXG4gICAgc2VhcmNoOiBzZWFyY2ggPT09ICc/JyA/ICcnIDogc2VhcmNoLFxuICAgIGhhc2g6IGhhc2ggPT09ICcjJyA/ICcnIDogaGFzaFxuICB9O1xufTtcblxudmFyIGNyZWF0ZVBhdGggPSBmdW5jdGlvbiBjcmVhdGVQYXRoKGxvY2F0aW9uKSB7XG4gIHZhciBwYXRobmFtZSA9IGxvY2F0aW9uLnBhdGhuYW1lLFxuICAgICAgc2VhcmNoID0gbG9jYXRpb24uc2VhcmNoLFxuICAgICAgaGFzaCA9IGxvY2F0aW9uLmhhc2g7XG5cblxuICB2YXIgcGF0aCA9IHBhdGhuYW1lIHx8ICcvJztcblxuICBpZiAoc2VhcmNoICYmIHNlYXJjaCAhPT0gJz8nKSBwYXRoICs9IHNlYXJjaC5jaGFyQXQoMCkgPT09ICc/JyA/IHNlYXJjaCA6ICc/JyArIHNlYXJjaDtcblxuICBpZiAoaGFzaCAmJiBoYXNoICE9PSAnIycpIHBhdGggKz0gaGFzaC5jaGFyQXQoMCkgPT09ICcjJyA/IGhhc2ggOiAnIycgKyBoYXNoO1xuXG4gIHJldHVybiBwYXRoO1xufTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDM3OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJhXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gY3JlYXRlTG9jYXRpb247IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBsb2NhdGlvbnNBcmVFcXVhbDsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3Jlc29sdmVfcGF0aG5hbWVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV92YWx1ZV9lcXVhbF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fUGF0aFV0aWxzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTtcbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cblxuXG5cblxudmFyIGNyZWF0ZUxvY2F0aW9uID0gZnVuY3Rpb24gY3JlYXRlTG9jYXRpb24ocGF0aCwgc3RhdGUsIGtleSwgY3VycmVudExvY2F0aW9uKSB7XG4gIHZhciBsb2NhdGlvbiA9IHZvaWQgMDtcbiAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgIC8vIFR3by1hcmcgZm9ybTogcHVzaChwYXRoLCBzdGF0ZSlcbiAgICBsb2NhdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1BhdGhVdGlsc19fW1wiYVwiIC8qIHBhcnNlUGF0aCAqL10pKHBhdGgpO1xuICAgIGxvY2F0aW9uLnN0YXRlID0gc3RhdGU7XG4gIH0gZWxzZSB7XG4gICAgLy8gT25lLWFyZyBmb3JtOiBwdXNoKGxvY2F0aW9uKVxuICAgIGxvY2F0aW9uID0gX2V4dGVuZHMoe30sIHBhdGgpO1xuXG4gICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lID09PSB1bmRlZmluZWQpIGxvY2F0aW9uLnBhdGhuYW1lID0gJyc7XG5cbiAgICBpZiAobG9jYXRpb24uc2VhcmNoKSB7XG4gICAgICBpZiAobG9jYXRpb24uc2VhcmNoLmNoYXJBdCgwKSAhPT0gJz8nKSBsb2NhdGlvbi5zZWFyY2ggPSAnPycgKyBsb2NhdGlvbi5zZWFyY2g7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uLnNlYXJjaCA9ICcnO1xuICAgIH1cblxuICAgIGlmIChsb2NhdGlvbi5oYXNoKSB7XG4gICAgICBpZiAobG9jYXRpb24uaGFzaC5jaGFyQXQoMCkgIT09ICcjJykgbG9jYXRpb24uaGFzaCA9ICcjJyArIGxvY2F0aW9uLmhhc2g7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uLmhhc2ggPSAnJztcbiAgICB9XG5cbiAgICBpZiAoc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBsb2NhdGlvbi5zdGF0ZSA9PT0gdW5kZWZpbmVkKSBsb2NhdGlvbi5zdGF0ZSA9IHN0YXRlO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBsb2NhdGlvbi5wYXRobmFtZSA9IGRlY29kZVVSSShsb2NhdGlvbi5wYXRobmFtZSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIFVSSUVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgVVJJRXJyb3IoJ1BhdGhuYW1lIFwiJyArIGxvY2F0aW9uLnBhdGhuYW1lICsgJ1wiIGNvdWxkIG5vdCBiZSBkZWNvZGVkLiAnICsgJ1RoaXMgaXMgbGlrZWx5IGNhdXNlZCBieSBhbiBpbnZhbGlkIHBlcmNlbnQtZW5jb2RpbmcuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG5cbiAgaWYgKGtleSkgbG9jYXRpb24ua2V5ID0ga2V5O1xuXG4gIGlmIChjdXJyZW50TG9jYXRpb24pIHtcbiAgICAvLyBSZXNvbHZlIGluY29tcGxldGUvcmVsYXRpdmUgcGF0aG5hbWUgcmVsYXRpdmUgdG8gY3VycmVudCBsb2NhdGlvbi5cbiAgICBpZiAoIWxvY2F0aW9uLnBhdGhuYW1lKSB7XG4gICAgICBsb2NhdGlvbi5wYXRobmFtZSA9IGN1cnJlbnRMb2NhdGlvbi5wYXRobmFtZTtcbiAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLnBhdGhuYW1lLmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICBsb2NhdGlvbi5wYXRobmFtZSA9IF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVzb2x2ZV9wYXRobmFtZV9fW1wiZGVmYXVsdFwiXSkobG9jYXRpb24ucGF0aG5hbWUsIGN1cnJlbnRMb2NhdGlvbi5wYXRobmFtZSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIFdoZW4gdGhlcmUgaXMgbm8gcHJpb3IgbG9jYXRpb24gYW5kIHBhdGhuYW1lIGlzIGVtcHR5LCBzZXQgaXQgdG8gL1xuICAgIGlmICghbG9jYXRpb24ucGF0aG5hbWUpIHtcbiAgICAgIGxvY2F0aW9uLnBhdGhuYW1lID0gJy8nO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBsb2NhdGlvbjtcbn07XG5cbnZhciBsb2NhdGlvbnNBcmVFcXVhbCA9IGZ1bmN0aW9uIGxvY2F0aW9uc0FyZUVxdWFsKGEsIGIpIHtcbiAgcmV0dXJuIGEucGF0aG5hbWUgPT09IGIucGF0aG5hbWUgJiYgYS5zZWFyY2ggPT09IGIuc2VhcmNoICYmIGEuaGFzaCA9PT0gYi5oYXNoICYmIGEua2V5ID09PSBiLmtleSAmJiBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3ZhbHVlX2VxdWFsX19bXCJkZWZhdWx0XCJdKShhLnN0YXRlLCBiLnN0YXRlKTtcbn07XG5cbi8qKiovIH0pLFxuXG4vKioqLyA0MTQ6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXG52YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTtcblxudmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpO1xuXG52YXIgX2luaGVyaXRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cbnZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTtcblxudmFyIF9zaW1wbGVBc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXG52YXIgX3NpbXBsZUFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaW1wbGVBc3NpZ24pO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxudmFyIF90cmFuc2l0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXG52YXIgX3RyYW5zaXRpb25zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RyYW5zaXRpb25zKTtcblxudmFyIF9jb2xvck1hbmlwdWxhdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OSk7XG5cbnZhciBfRW5oYW5jZWRCdXR0b24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKTtcblxudmFyIF9FbmhhbmNlZEJ1dHRvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9FbmhhbmNlZEJ1dHRvbik7XG5cbnZhciBfRm9udEljb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzNyk7XG5cbnZhciBfRm9udEljb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRm9udEljb24pO1xuXG52YXIgX1BhcGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cbnZhciBfUGFwZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUGFwZXIpO1xuXG52YXIgX2NoaWxkVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0MSk7XG5cbnZhciBfd2FybmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXG52YXIgX3dhcm5pbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2FybmluZyk7XG5cbnZhciBfcHJvcFR5cGVzMyA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXG52YXIgX3Byb3BUeXBlczQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gZ2V0U3R5bGVzKHByb3BzLCBjb250ZXh0KSB7XG4gIHZhciBmbG9hdGluZ0FjdGlvbkJ1dHRvbiA9IGNvbnRleHQubXVpVGhlbWUuZmxvYXRpbmdBY3Rpb25CdXR0b247XG5cblxuICB2YXIgYmFja2dyb3VuZENvbG9yID0gcHJvcHMuYmFja2dyb3VuZENvbG9yIHx8IGZsb2F0aW5nQWN0aW9uQnV0dG9uLmNvbG9yO1xuICB2YXIgaWNvbkNvbG9yID0gZmxvYXRpbmdBY3Rpb25CdXR0b24uaWNvbkNvbG9yO1xuXG4gIGlmIChwcm9wcy5kaXNhYmxlZCkge1xuICAgIGJhY2tncm91bmRDb2xvciA9IHByb3BzLmRpc2FibGVkQ29sb3IgfHwgZmxvYXRpbmdBY3Rpb25CdXR0b24uZGlzYWJsZWRDb2xvcjtcbiAgICBpY29uQ29sb3IgPSBmbG9hdGluZ0FjdGlvbkJ1dHRvbi5kaXNhYmxlZFRleHRDb2xvcjtcbiAgfSBlbHNlIGlmIChwcm9wcy5zZWNvbmRhcnkpIHtcbiAgICBiYWNrZ3JvdW5kQ29sb3IgPSBmbG9hdGluZ0FjdGlvbkJ1dHRvbi5zZWNvbmRhcnlDb2xvcjtcbiAgICBpY29uQ29sb3IgPSBmbG9hdGluZ0FjdGlvbkJ1dHRvbi5zZWNvbmRhcnlJY29uQ29sb3I7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHJvb3Q6IHtcbiAgICAgIHRyYW5zaXRpb246IF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KCksXG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50J1xuICAgIH0sXG4gICAgY29udGFpbmVyOiB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJhY2tncm91bmRDb2xvcixcbiAgICAgIHRyYW5zaXRpb246IF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KCksXG4gICAgICBoZWlnaHQ6IGZsb2F0aW5nQWN0aW9uQnV0dG9uLmJ1dHRvblNpemUsXG4gICAgICB3aWR0aDogZmxvYXRpbmdBY3Rpb25CdXR0b24uYnV0dG9uU2l6ZSxcbiAgICAgIHBhZGRpbmc6IDAsXG4gICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICBib3JkZXJSYWRpdXM6ICc1MCUnLFxuICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcbiAgICAgIHZlcnRpY2FsQWxpZ246ICdib3R0b20nXG4gICAgfSxcbiAgICBjb250YWluZXJXaGVuTWluaToge1xuICAgICAgaGVpZ2h0OiBmbG9hdGluZ0FjdGlvbkJ1dHRvbi5taW5pU2l6ZSxcbiAgICAgIHdpZHRoOiBmbG9hdGluZ0FjdGlvbkJ1dHRvbi5taW5pU2l6ZVxuICAgIH0sXG4gICAgb3ZlcmxheToge1xuICAgICAgdHJhbnNpdGlvbjogX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoKSxcbiAgICAgIHRvcDogMFxuICAgIH0sXG4gICAgb3ZlcmxheVdoZW5Ib3ZlcmVkOiB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICgwLCBfY29sb3JNYW5pcHVsYXRvci5mYWRlKShpY29uQ29sb3IsIDAuNClcbiAgICB9LFxuICAgIGljb246IHtcbiAgICAgIGhlaWdodDogZmxvYXRpbmdBY3Rpb25CdXR0b24uYnV0dG9uU2l6ZSxcbiAgICAgIGxpbmVIZWlnaHQ6IGZsb2F0aW5nQWN0aW9uQnV0dG9uLmJ1dHRvblNpemUgKyAncHgnLFxuICAgICAgZmlsbDogaWNvbkNvbG9yLFxuICAgICAgY29sb3I6IGljb25Db2xvclxuICAgIH0sXG4gICAgaWNvbldoZW5NaW5pOiB7XG4gICAgICBoZWlnaHQ6IGZsb2F0aW5nQWN0aW9uQnV0dG9uLm1pbmlTaXplLFxuICAgICAgbGluZUhlaWdodDogZmxvYXRpbmdBY3Rpb25CdXR0b24ubWluaVNpemUgKyAncHgnXG4gICAgfVxuICB9O1xufVxuXG52YXIgRmxvYXRpbmdBY3Rpb25CdXR0b24gPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShGbG9hdGluZ0FjdGlvbkJ1dHRvbiwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gRmxvYXRpbmdBY3Rpb25CdXR0b24oKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRmxvYXRpbmdBY3Rpb25CdXR0b24pO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChfcmVmID0gRmxvYXRpbmdBY3Rpb25CdXR0b24uX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKEZsb2F0aW5nQWN0aW9uQnV0dG9uKSkuY2FsbC5hcHBseShfcmVmLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBob3ZlcmVkOiBmYWxzZSxcbiAgICAgIHRvdWNoOiBmYWxzZSxcbiAgICAgIHpEZXB0aDogdW5kZWZpbmVkXG4gICAgfSwgX3RoaXMuaGFuZGxlTW91c2VEb3duID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAvLyBvbmx5IGxpc3RlbiB0byBsZWZ0IGNsaWNrc1xuICAgICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMCkge1xuICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHpEZXB0aDogX3RoaXMucHJvcHMuekRlcHRoICsgMSB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChfdGhpcy5wcm9wcy5vbk1vdXNlRG93bikgX3RoaXMucHJvcHMub25Nb3VzZURvd24oZXZlbnQpO1xuICAgIH0sIF90aGlzLmhhbmRsZU1vdXNlVXAgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHsgekRlcHRoOiBfdGhpcy5wcm9wcy56RGVwdGggfSk7XG4gICAgICBpZiAoX3RoaXMucHJvcHMub25Nb3VzZVVwKSB7XG4gICAgICAgIF90aGlzLnByb3BzLm9uTW91c2VVcChldmVudCk7XG4gICAgICB9XG4gICAgfSwgX3RoaXMuaGFuZGxlTW91c2VMZWF2ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKCFfdGhpcy5yZWZzLmNvbnRhaW5lci5pc0tleWJvYXJkRm9jdXNlZCgpKSB7XG4gICAgICAgIF90aGlzLnNldFN0YXRlKHsgekRlcHRoOiBfdGhpcy5wcm9wcy56RGVwdGgsIGhvdmVyZWQ6IGZhbHNlIH0pO1xuICAgICAgfVxuICAgICAgaWYgKF90aGlzLnByb3BzLm9uTW91c2VMZWF2ZSkge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbk1vdXNlTGVhdmUoZXZlbnQpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmhhbmRsZU1vdXNlRW50ZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmICghX3RoaXMucmVmcy5jb250YWluZXIuaXNLZXlib2FyZEZvY3VzZWQoKSAmJiAhX3RoaXMuc3RhdGUudG91Y2gpIHtcbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBob3ZlcmVkOiB0cnVlIH0pO1xuICAgICAgfVxuICAgICAgaWYgKF90aGlzLnByb3BzLm9uTW91c2VFbnRlcikge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbk1vdXNlRW50ZXIoZXZlbnQpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmhhbmRsZVRvdWNoU3RhcnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgdG91Y2g6IHRydWUsXG4gICAgICAgIHpEZXB0aDogX3RoaXMucHJvcHMuekRlcHRoICsgMVxuICAgICAgfSk7XG4gICAgICBpZiAoX3RoaXMucHJvcHMub25Ub3VjaFN0YXJ0KSB7XG4gICAgICAgIF90aGlzLnByb3BzLm9uVG91Y2hTdGFydChldmVudCk7XG4gICAgICB9XG4gICAgfSwgX3RoaXMuaGFuZGxlVG91Y2hFbmQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgdG91Y2g6IHRydWUsXG4gICAgICAgIHpEZXB0aDogX3RoaXMucHJvcHMuekRlcHRoXG4gICAgICB9KTtcbiAgICAgIGlmIChfdGhpcy5wcm9wcy5vblRvdWNoRW5kKSB7XG4gICAgICAgIF90aGlzLnByb3BzLm9uVG91Y2hFbmQoZXZlbnQpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmhhbmRsZUtleWJvYXJkRm9jdXMgPSBmdW5jdGlvbiAoZXZlbnQsIGtleWJvYXJkRm9jdXNlZCkge1xuICAgICAgaWYgKGtleWJvYXJkRm9jdXNlZCAmJiAhX3RoaXMucHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyB6RGVwdGg6IF90aGlzLnByb3BzLnpEZXB0aCArIDEgfSk7XG4gICAgICAgIF90aGlzLnJlZnMub3ZlcmxheS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAoMCwgX2NvbG9yTWFuaXB1bGF0b3IuZmFkZSkoZ2V0U3R5bGVzKF90aGlzLnByb3BzLCBfdGhpcy5jb250ZXh0KS5pY29uLmNvbG9yLCAwLjQpO1xuICAgICAgfSBlbHNlIGlmICghX3RoaXMuc3RhdGUuaG92ZXJlZCkge1xuICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHpEZXB0aDogX3RoaXMucHJvcHMuekRlcHRoIH0pO1xuICAgICAgICBfdGhpcy5yZWZzLm92ZXJsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3RyYW5zcGFyZW50JztcbiAgICAgIH1cbiAgICB9LCBfdGVtcCksICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkoX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRmxvYXRpbmdBY3Rpb25CdXR0b24sIFt7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbE1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHpEZXB0aDogdGhpcy5wcm9wcy5kaXNhYmxlZCA/IDAgOiB0aGlzLnByb3BzLnpEZXB0aFxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICBmYWxzZSA/ICgwLCBfd2FybmluZzIuZGVmYXVsdCkoIXRoaXMucHJvcHMuaWNvbkNsYXNzTmFtZSB8fCAhdGhpcy5wcm9wcy5jaGlsZHJlbiwgJ01hdGVyaWFsLVVJOiBZb3UgaGF2ZSBzZXQgYm90aCBhbiBpY29uQ2xhc3NOYW1lIGFuZCBhIGNoaWxkIGljb24uICcgKyAnSXQgaXMgcmVjb21tZW5kZWQgeW91IHVzZSBvbmx5IG9uZSBtZXRob2Qgd2hlbiBhZGRpbmcgJyArICdpY29ucyB0byBGbG9hdGluZ0FjdGlvbkJ1dHRvbnMuJykgOiB2b2lkIDA7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgICB2YXIgbmV4dFN0YXRlID0ge307XG5cbiAgICAgIGlmIChuZXh0UHJvcHMuZGlzYWJsZWQgIT09IHRoaXMucHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgICAgbmV4dFN0YXRlLnpEZXB0aCA9IG5leHRQcm9wcy5kaXNhYmxlZCA/IDAgOiB0aGlzLnByb3BzLnpEZXB0aDtcbiAgICAgIH1cbiAgICAgIGlmIChuZXh0UHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgICAgbmV4dFN0YXRlLmhvdmVyZWQgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXRTdGF0ZShuZXh0U3RhdGUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGJhY2tncm91bmRDb2xvciA9IF9wcm9wcy5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICAgICAgY2xhc3NOYW1lID0gX3Byb3BzLmNsYXNzTmFtZSxcbiAgICAgICAgICBjaGlsZHJlblByb3AgPSBfcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgICAgZGlzYWJsZWQgPSBfcHJvcHMuZGlzYWJsZWQsXG4gICAgICAgICAgZGlzYWJsZWRDb2xvciA9IF9wcm9wcy5kaXNhYmxlZENvbG9yLFxuICAgICAgICAgIG1pbmkgPSBfcHJvcHMubWluaSxcbiAgICAgICAgICBzZWNvbmRhcnkgPSBfcHJvcHMuc2Vjb25kYXJ5LFxuICAgICAgICAgIGljb25TdHlsZSA9IF9wcm9wcy5pY29uU3R5bGUsXG4gICAgICAgICAgaWNvbkNsYXNzTmFtZSA9IF9wcm9wcy5pY29uQ2xhc3NOYW1lLFxuICAgICAgICAgIHpEZXB0aCA9IF9wcm9wcy56RGVwdGgsXG4gICAgICAgICAgb3RoZXIgPSAoMCwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMy5kZWZhdWx0KShfcHJvcHMsIFsnYmFja2dyb3VuZENvbG9yJywgJ2NsYXNzTmFtZScsICdjaGlsZHJlbicsICdkaXNhYmxlZCcsICdkaXNhYmxlZENvbG9yJywgJ21pbmknLCAnc2Vjb25kYXJ5JywgJ2ljb25TdHlsZScsICdpY29uQ2xhc3NOYW1lJywgJ3pEZXB0aCddKTtcbiAgICAgIHZhciBwcmVwYXJlU3R5bGVzID0gdGhpcy5jb250ZXh0Lm11aVRoZW1lLnByZXBhcmVTdHlsZXM7XG5cbiAgICAgIHZhciBzdHlsZXMgPSBnZXRTdHlsZXModGhpcy5wcm9wcywgdGhpcy5jb250ZXh0KTtcblxuICAgICAgdmFyIGljb25FbGVtZW50ID0gdm9pZCAwO1xuICAgICAgaWYgKGljb25DbGFzc05hbWUpIHtcbiAgICAgICAgaWNvbkVsZW1lbnQgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfRm9udEljb24yLmRlZmF1bHQsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IGljb25DbGFzc05hbWUsXG4gICAgICAgICAgc3R5bGU6ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgc3R5bGVzLmljb24sIG1pbmkgJiYgc3R5bGVzLmljb25XaGVuTWluaSwgaWNvblN0eWxlKVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdmFyIGNoaWxkcmVuID0gdm9pZCAwO1xuXG4gICAgICBpZiAoY2hpbGRyZW5Qcm9wKSB7XG4gICAgICAgIGNoaWxkcmVuID0gKDAsIF9jaGlsZFV0aWxzLmV4dGVuZENoaWxkcmVuKShjaGlsZHJlblByb3AsIGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdHlsZTogKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBzdHlsZXMuaWNvbiwgbWluaSAmJiBzdHlsZXMuaWNvbldoZW5NaW5pLCBpY29uU3R5bGUsIGNoaWxkLnByb3BzLnN0eWxlKVxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB2YXIgYnV0dG9uRXZlbnRIYW5kbGVycyA9IGRpc2FibGVkID8gbnVsbCA6IHtcbiAgICAgICAgb25Nb3VzZURvd246IHRoaXMuaGFuZGxlTW91c2VEb3duLFxuICAgICAgICBvbk1vdXNlVXA6IHRoaXMuaGFuZGxlTW91c2VVcCxcbiAgICAgICAgb25Nb3VzZUxlYXZlOiB0aGlzLmhhbmRsZU1vdXNlTGVhdmUsXG4gICAgICAgIG9uTW91c2VFbnRlcjogdGhpcy5oYW5kbGVNb3VzZUVudGVyLFxuICAgICAgICBvblRvdWNoU3RhcnQ6IHRoaXMuaGFuZGxlVG91Y2hTdGFydCxcbiAgICAgICAgb25Ub3VjaEVuZDogdGhpcy5oYW5kbGVUb3VjaEVuZCxcbiAgICAgICAgb25LZXlib2FyZEZvY3VzOiB0aGlzLmhhbmRsZUtleWJvYXJkRm9jdXNcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgX1BhcGVyMi5kZWZhdWx0LFxuICAgICAgICB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgICAgc3R5bGU6ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMucm9vdCwgdGhpcy5wcm9wcy5zdHlsZSksXG4gICAgICAgICAgekRlcHRoOiB0aGlzLnN0YXRlLnpEZXB0aCxcbiAgICAgICAgICBjaXJjbGU6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgX0VuaGFuY2VkQnV0dG9uMi5kZWZhdWx0LFxuICAgICAgICAgICgwLCBfZXh0ZW5kczMuZGVmYXVsdCkoe30sIG90aGVyLCBidXR0b25FdmVudEhhbmRsZXJzLCB7XG4gICAgICAgICAgICByZWY6ICdjb250YWluZXInLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLFxuICAgICAgICAgICAgc3R5bGU6ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMuY29udGFpbmVyLCB0aGlzLnByb3BzLm1pbmkgJiYgc3R5bGVzLmNvbnRhaW5lcldoZW5NaW5pLCBpY29uU3R5bGUpLFxuICAgICAgICAgICAgZm9jdXNSaXBwbGVDb2xvcjogc3R5bGVzLmljb24uY29sb3IsXG4gICAgICAgICAgICB0b3VjaFJpcHBsZUNvbG9yOiBzdHlsZXMuaWNvbi5jb2xvclxuICAgICAgICAgIH0pLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHJlZjogJ292ZXJsYXknLFxuICAgICAgICAgICAgICBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLm92ZXJsYXksIHRoaXMuc3RhdGUuaG92ZXJlZCAmJiAhdGhpcy5wcm9wcy5kaXNhYmxlZCAmJiBzdHlsZXMub3ZlcmxheVdoZW5Ib3ZlcmVkKSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpY29uRWxlbWVudCxcbiAgICAgICAgICAgIGNoaWxkcmVuXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gRmxvYXRpbmdBY3Rpb25CdXR0b247XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5GbG9hdGluZ0FjdGlvbkJ1dHRvbi5kZWZhdWx0UHJvcHMgPSB7XG4gIGRpc2FibGVkOiBmYWxzZSxcbiAgbWluaTogZmFsc2UsXG4gIHNlY29uZGFyeTogZmFsc2UsXG4gIHpEZXB0aDogMlxufTtcbkZsb2F0aW5nQWN0aW9uQnV0dG9uLmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5GbG9hdGluZ0FjdGlvbkJ1dHRvbi5wcm9wVHlwZXMgPSAgZmFsc2UgPyB7XG4gIC8qKlxuICAgKiBUaGlzIHZhbHVlIHdpbGwgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgYmFja2dyb3VuZCBjb2xvciBmb3IgdGhlIGJ1dHRvbi5cbiAgICogSG93ZXZlciBpdCB3aWxsIG5vdCBvdmVycmlkZSB0aGUgZGVmYXVsdCBkaXNhYmxlZCBiYWNrZ3JvdW5kIGNvbG9yLlxuICAgKiBUaGlzIGhhcyB0byBiZSBzZXQgc2VwYXJhdGVseSB1c2luZyB0aGUgZGlzYWJsZWRDb2xvciBhdHRyaWJ1dGUuXG4gICAqL1xuICBiYWNrZ3JvdW5kQ29sb3I6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogVGhpcyBpcyB3aGF0IGRpc3BsYXllZCBpbnNpZGUgdGhlIGZsb2F0aW5nIGFjdGlvbiBidXR0b247IGZvciBleGFtcGxlLCBhIFNWRyBJY29uLlxuICAgKi9cbiAgY2hpbGRyZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgLyoqXG4gICAqIFRoZSBjc3MgY2xhc3MgbmFtZSBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgY2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIERpc2FibGVzIHRoZSBidXR0b24gaWYgc2V0IHRvIHRydWUuXG4gICAqL1xuICBkaXNhYmxlZDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogVGhpcyB2YWx1ZSB3aWxsIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGJhY2tncm91bmQgY29sb3IgZm9yIHRoZSBidXR0b24gd2hlbiBpdCBpcyBkaXNhYmxlZC5cbiAgICovXG4gIGRpc2FibGVkQ29sb3I6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogVGhlIFVSTCB0byBsaW5rIHRvIHdoZW4gdGhlIGJ1dHRvbiBpcyBjbGlja2VkLlxuICAgKi9cbiAgaHJlZjogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBUaGUgaWNvbiB3aXRoaW4gdGhlIEZsb2F0aW5nQWN0aW9uQnV0dG9uIGlzIGEgRm9udEljb24gY29tcG9uZW50LlxuICAgKiBUaGlzIHByb3BlcnR5IGlzIHRoZSBjbGFzc25hbWUgb2YgdGhlIGljb24gdG8gYmUgZGlzcGxheWVkIGluc2lkZSB0aGUgYnV0dG9uLlxuICAgKiBBbiBhbHRlcm5hdGl2ZSB0byBhZGRpbmcgYW4gaWNvbkNsYXNzTmFtZSB3b3VsZCBiZSB0byBtYW51YWxseSBpbnNlcnQgYVxuICAgKiBGb250SWNvbiBjb21wb25lbnQgb3IgY3VzdG9tIFN2Z0ljb24gY29tcG9uZW50IG9yIGFzIGEgY2hpbGQgb2YgRmxvYXRpbmdBY3Rpb25CdXR0b24uXG4gICAqL1xuICBpY29uQ2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnQgdG8gaWNvbkNsYXNzTmFtZSBleGNlcHQgdGhhdCBpdCBpcyB1c2VkIGZvclxuICAgKiBvdmVycmlkaW5nIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBGb250SWNvbiBjb21wb25lbnQuXG4gICAqL1xuICBpY29uU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogSWYgdHJ1ZSwgdGhlIGJ1dHRvbiB3aWxsIGJlIGEgc21hbGwgZmxvYXRpbmcgYWN0aW9uIGJ1dHRvbi5cbiAgICovXG4gIG1pbmk6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqIEBpZ25vcmUgKi9cbiAgb25Nb3VzZURvd246IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqIEBpZ25vcmUgKi9cbiAgb25Nb3VzZUVudGVyOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKiBAaWdub3JlICovXG4gIG9uTW91c2VMZWF2ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKiogQGlnbm9yZSAqL1xuICBvbk1vdXNlVXA6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqIEBpZ25vcmUgKi9cbiAgb25Ub3VjaEVuZDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKiogQGlnbm9yZSAqL1xuICBvblRvdWNoU3RhcnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZpcmVkIHdoZW4gdGhlIGJ1dHRvbiBpcyB0b3VjaC10YXBwZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBUb3VjaFRhcCBldmVudCB0YXJnZXRpbmcgdGhlIGJ1dHRvbi5cbiAgICovXG4gIG9uVG91Y2hUYXA6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIElmIHRydWUsIHRoZSBidXR0b24gd2lsbCB1c2UgdGhlIHNlY29uZGFyeSBidXR0b24gY29sb3JzLlxuICAgKi9cbiAgc2Vjb25kYXJ5OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhlIHpEZXB0aCBvZiB0aGUgdW5kZXJseWluZyBgUGFwZXJgIGNvbXBvbmVudC5cbiAgICovXG4gIHpEZXB0aDogX3Byb3BUeXBlczQuZGVmYXVsdC56RGVwdGhcbn0gOiB7fTtcbmV4cG9ydHMuZGVmYXVsdCA9IEZsb2F0aW5nQWN0aW9uQnV0dG9uO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gNDE1OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdW5kZWZpbmVkO1xuXG52YXIgX0Zsb2F0aW5nQWN0aW9uQnV0dG9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MTQpO1xuXG52YXIgX0Zsb2F0aW5nQWN0aW9uQnV0dG9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0Zsb2F0aW5nQWN0aW9uQnV0dG9uKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZXhwb3J0cy5kZWZhdWx0ID0gX0Zsb2F0aW5nQWN0aW9uQnV0dG9uMi5kZWZhdWx0O1xuXG4vKioqLyB9KSxcblxuLyoqKi8gNDQ5OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHVyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXG52YXIgX3B1cmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHVyZSk7XG5cbnZhciBfU3ZnSWNvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXG52YXIgX1N2Z0ljb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3ZnSWNvbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBDb250ZW50QWRkID0gZnVuY3Rpb24gQ29udGVudEFkZChwcm9wcykge1xuICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgX1N2Z0ljb24yLmRlZmF1bHQsXG4gICAgcHJvcHMsXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3BhdGgnLCB7IGQ6ICdNMTkgMTNoLTZ2NmgtMnYtNkg1di0yaDZWNWgydjZoNnYyeicgfSlcbiAgKTtcbn07XG5Db250ZW50QWRkID0gKDAsIF9wdXJlMi5kZWZhdWx0KShDb250ZW50QWRkKTtcbkNvbnRlbnRBZGQuZGlzcGxheU5hbWUgPSAnQ29udGVudEFkZCc7XG5Db250ZW50QWRkLm11aU5hbWUgPSAnU3ZnSWNvbic7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IENvbnRlbnRBZGQ7XG5cbi8qKiovIH0pLFxuXG4vKioqLyA0NTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHVuZGVmaW5lZDtcblxudmFyIF9EaWFsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Nik7XG5cbnZhciBfRGlhbG9nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RpYWxvZyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuZGVmYXVsdCA9IF9EaWFsb2cyLmRlZmF1bHQ7XG5cbi8qKiovIH0pLFxuXG4vKioqLyA0Njpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19Ccm93c2VyUm91dGVyX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4OSk7XG4vKiBoYXJtb255IHJlZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJCcm93c2VyUm91dGVyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19Ccm93c2VyUm91dGVyX19bXCJhXCJdOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX0hhc2hSb3V0ZXJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTkwKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkhhc2hSb3V0ZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX0hhc2hSb3V0ZXJfX1tcImFcIl07IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fTGlua19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NCk7XG4vKiBoYXJtb255IHJlZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJMaW5rXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19MaW5rX19bXCJhXCJdOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX01lbW9yeVJvdXRlcl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTEpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiTWVtb3J5Um91dGVyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19NZW1vcnlSb3V0ZXJfX1tcImFcIl07IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fTmF2TGlua19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiTmF2TGlua1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fTmF2TGlua19fW1wiYVwiXTsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19Qcm9tcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTkzKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlByb21wdFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fUHJvbXB0X19bXCJhXCJdOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1JlZGlyZWN0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5NCk7XG4vKiBoYXJtb255IHJlZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJSZWRpcmVjdFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fUmVkaXJlY3RfX1tcImFcIl07IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fUm91dGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTUpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiUm91dGVcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfX1JvdXRlX19bXCJhXCJdOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfX1JvdXRlcl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSk7XG4vKiBoYXJtb255IHJlZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJSb3V0ZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfX1JvdXRlcl9fW1wiYVwiXTsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV85X19TdGF0aWNSb3V0ZXJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTk1KTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN0YXRpY1JvdXRlclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fU3RhdGljUm91dGVyX19bXCJhXCJdOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEwX19Td2l0Y2hfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTk2KTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN3aXRjaFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTBfX1N3aXRjaF9fW1wiYVwiXTsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMV9fbWF0Y2hQYXRoX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5Nyk7XG4vKiBoYXJtb255IHJlZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJtYXRjaFBhdGhcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzExX19tYXRjaFBhdGhfX1tcImFcIl07IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTJfX3dpdGhSb3V0ZXJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTk4KTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIndpdGhSb3V0ZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEyX193aXRoUm91dGVyX19bXCJhXCJdOyB9KTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyA1MDpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMubG9jYXRpb25zQXJlRXF1YWwgPSBleHBvcnRzLmNyZWF0ZUxvY2F0aW9uID0gdW5kZWZpbmVkO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX3Jlc29sdmVQYXRobmFtZSA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpO1xuXG52YXIgX3Jlc29sdmVQYXRobmFtZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZXNvbHZlUGF0aG5hbWUpO1xuXG52YXIgX3ZhbHVlRXF1YWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMCk7XG5cbnZhciBfdmFsdWVFcXVhbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWx1ZUVxdWFsKTtcblxudmFyIF9QYXRoVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGNyZWF0ZUxvY2F0aW9uID0gZXhwb3J0cy5jcmVhdGVMb2NhdGlvbiA9IGZ1bmN0aW9uIGNyZWF0ZUxvY2F0aW9uKHBhdGgsIHN0YXRlLCBrZXksIGN1cnJlbnRMb2NhdGlvbikge1xuICB2YXIgbG9jYXRpb24gPSB2b2lkIDA7XG4gIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcbiAgICAvLyBUd28tYXJnIGZvcm06IHB1c2gocGF0aCwgc3RhdGUpXG4gICAgbG9jYXRpb24gPSAoMCwgX1BhdGhVdGlscy5wYXJzZVBhdGgpKHBhdGgpO1xuICAgIGxvY2F0aW9uLnN0YXRlID0gc3RhdGU7XG4gIH0gZWxzZSB7XG4gICAgLy8gT25lLWFyZyBmb3JtOiBwdXNoKGxvY2F0aW9uKVxuICAgIGxvY2F0aW9uID0gX2V4dGVuZHMoe30sIHBhdGgpO1xuXG4gICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lID09PSB1bmRlZmluZWQpIGxvY2F0aW9uLnBhdGhuYW1lID0gJyc7XG5cbiAgICBpZiAobG9jYXRpb24uc2VhcmNoKSB7XG4gICAgICBpZiAobG9jYXRpb24uc2VhcmNoLmNoYXJBdCgwKSAhPT0gJz8nKSBsb2NhdGlvbi5zZWFyY2ggPSAnPycgKyBsb2NhdGlvbi5zZWFyY2g7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uLnNlYXJjaCA9ICcnO1xuICAgIH1cblxuICAgIGlmIChsb2NhdGlvbi5oYXNoKSB7XG4gICAgICBpZiAobG9jYXRpb24uaGFzaC5jaGFyQXQoMCkgIT09ICcjJykgbG9jYXRpb24uaGFzaCA9ICcjJyArIGxvY2F0aW9uLmhhc2g7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uLmhhc2ggPSAnJztcbiAgICB9XG5cbiAgICBpZiAoc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBsb2NhdGlvbi5zdGF0ZSA9PT0gdW5kZWZpbmVkKSBsb2NhdGlvbi5zdGF0ZSA9IHN0YXRlO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBsb2NhdGlvbi5wYXRobmFtZSA9IGRlY29kZVVSSShsb2NhdGlvbi5wYXRobmFtZSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIFVSSUVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgVVJJRXJyb3IoJ1BhdGhuYW1lIFwiJyArIGxvY2F0aW9uLnBhdGhuYW1lICsgJ1wiIGNvdWxkIG5vdCBiZSBkZWNvZGVkLiAnICsgJ1RoaXMgaXMgbGlrZWx5IGNhdXNlZCBieSBhbiBpbnZhbGlkIHBlcmNlbnQtZW5jb2RpbmcuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG5cbiAgaWYgKGtleSkgbG9jYXRpb24ua2V5ID0ga2V5O1xuXG4gIGlmIChjdXJyZW50TG9jYXRpb24pIHtcbiAgICAvLyBSZXNvbHZlIGluY29tcGxldGUvcmVsYXRpdmUgcGF0aG5hbWUgcmVsYXRpdmUgdG8gY3VycmVudCBsb2NhdGlvbi5cbiAgICBpZiAoIWxvY2F0aW9uLnBhdGhuYW1lKSB7XG4gICAgICBsb2NhdGlvbi5wYXRobmFtZSA9IGN1cnJlbnRMb2NhdGlvbi5wYXRobmFtZTtcbiAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLnBhdGhuYW1lLmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICBsb2NhdGlvbi5wYXRobmFtZSA9ICgwLCBfcmVzb2x2ZVBhdGhuYW1lMi5kZWZhdWx0KShsb2NhdGlvbi5wYXRobmFtZSwgY3VycmVudExvY2F0aW9uLnBhdGhuYW1lKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gV2hlbiB0aGVyZSBpcyBubyBwcmlvciBsb2NhdGlvbiBhbmQgcGF0aG5hbWUgaXMgZW1wdHksIHNldCBpdCB0byAvXG4gICAgaWYgKCFsb2NhdGlvbi5wYXRobmFtZSkge1xuICAgICAgbG9jYXRpb24ucGF0aG5hbWUgPSAnLyc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGxvY2F0aW9uO1xufTtcblxudmFyIGxvY2F0aW9uc0FyZUVxdWFsID0gZXhwb3J0cy5sb2NhdGlvbnNBcmVFcXVhbCA9IGZ1bmN0aW9uIGxvY2F0aW9uc0FyZUVxdWFsKGEsIGIpIHtcbiAgcmV0dXJuIGEucGF0aG5hbWUgPT09IGIucGF0aG5hbWUgJiYgYS5zZWFyY2ggPT09IGIuc2VhcmNoICYmIGEuaGFzaCA9PT0gYi5oYXNoICYmIGEua2V5ID09PSBiLmtleSAmJiAoMCwgX3ZhbHVlRXF1YWwyLmRlZmF1bHQpKGEuc3RhdGUsIGIuc3RhdGUpO1xufTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDUxOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX3dhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIgPSBmdW5jdGlvbiBjcmVhdGVUcmFuc2l0aW9uTWFuYWdlcigpIHtcbiAgdmFyIHByb21wdCA9IG51bGw7XG5cbiAgdmFyIHNldFByb21wdCA9IGZ1bmN0aW9uIHNldFByb21wdChuZXh0UHJvbXB0KSB7XG4gICAgKDAsIF93YXJuaW5nMi5kZWZhdWx0KShwcm9tcHQgPT0gbnVsbCwgJ0EgaGlzdG9yeSBzdXBwb3J0cyBvbmx5IG9uZSBwcm9tcHQgYXQgYSB0aW1lJyk7XG5cbiAgICBwcm9tcHQgPSBuZXh0UHJvbXB0O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChwcm9tcHQgPT09IG5leHRQcm9tcHQpIHByb21wdCA9IG51bGw7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgY29uZmlybVRyYW5zaXRpb25UbyA9IGZ1bmN0aW9uIGNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgY2FsbGJhY2spIHtcbiAgICAvLyBUT0RPOiBJZiBhbm90aGVyIHRyYW5zaXRpb24gc3RhcnRzIHdoaWxlIHdlJ3JlIHN0aWxsIGNvbmZpcm1pbmdcbiAgICAvLyB0aGUgcHJldmlvdXMgb25lLCB3ZSBtYXkgZW5kIHVwIGluIGEgd2VpcmQgc3RhdGUuIEZpZ3VyZSBvdXQgdGhlXG4gICAgLy8gYmVzdCB3YXkgdG8gaGFuZGxlIHRoaXMuXG4gICAgaWYgKHByb21wdCAhPSBudWxsKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHlwZW9mIHByb21wdCA9PT0gJ2Z1bmN0aW9uJyA/IHByb21wdChsb2NhdGlvbiwgYWN0aW9uKSA6IHByb21wdDtcblxuICAgICAgaWYgKHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZ2V0VXNlckNvbmZpcm1hdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGdldFVzZXJDb25maXJtYXRpb24ocmVzdWx0LCBjYWxsYmFjayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgKDAsIF93YXJuaW5nMi5kZWZhdWx0KShmYWxzZSwgJ0EgaGlzdG9yeSBuZWVkcyBhIGdldFVzZXJDb25maXJtYXRpb24gZnVuY3Rpb24gaW4gb3JkZXIgdG8gdXNlIGEgcHJvbXB0IG1lc3NhZ2UnKTtcblxuICAgICAgICAgIGNhbGxiYWNrKHRydWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZXR1cm4gZmFsc2UgZnJvbSBhIHRyYW5zaXRpb24gaG9vayB0byBjYW5jZWwgdGhlIHRyYW5zaXRpb24uXG4gICAgICAgIGNhbGxiYWNrKHJlc3VsdCAhPT0gZmFsc2UpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayh0cnVlKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGxpc3RlbmVycyA9IFtdO1xuXG4gIHZhciBhcHBlbmRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFwcGVuZExpc3RlbmVyKGZuKSB7XG4gICAgdmFyIGlzQWN0aXZlID0gdHJ1ZTtcblxuICAgIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uIGxpc3RlbmVyKCkge1xuICAgICAgaWYgKGlzQWN0aXZlKSBmbi5hcHBseSh1bmRlZmluZWQsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIGxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBpc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgbGlzdGVuZXJzID0gbGlzdGVuZXJzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbSAhPT0gbGlzdGVuZXI7XG4gICAgICB9KTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBub3RpZnlMaXN0ZW5lcnMgPSBmdW5jdGlvbiBub3RpZnlMaXN0ZW5lcnMoKSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgbGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gbGlzdGVuZXIuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHNldFByb21wdDogc2V0UHJvbXB0LFxuICAgIGNvbmZpcm1UcmFuc2l0aW9uVG86IGNvbmZpcm1UcmFuc2l0aW9uVG8sXG4gICAgYXBwZW5kTGlzdGVuZXI6IGFwcGVuZExpc3RlbmVyLFxuICAgIG5vdGlmeUxpc3RlbmVyczogbm90aWZ5TGlzdGVuZXJzXG4gIH07XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBjcmVhdGVUcmFuc2l0aW9uTWFuYWdlcjtcblxuLyoqKi8gfSksXG5cbi8qKiovIDUyOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX18pO1xuXG5cbnZhciBjcmVhdGVUcmFuc2l0aW9uTWFuYWdlciA9IGZ1bmN0aW9uIGNyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyKCkge1xuICB2YXIgcHJvbXB0ID0gbnVsbDtcblxuICB2YXIgc2V0UHJvbXB0ID0gZnVuY3Rpb24gc2V0UHJvbXB0KG5leHRQcm9tcHQpIHtcbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQoKShwcm9tcHQgPT0gbnVsbCwgJ0EgaGlzdG9yeSBzdXBwb3J0cyBvbmx5IG9uZSBwcm9tcHQgYXQgYSB0aW1lJyk7XG5cbiAgICBwcm9tcHQgPSBuZXh0UHJvbXB0O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChwcm9tcHQgPT09IG5leHRQcm9tcHQpIHByb21wdCA9IG51bGw7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgY29uZmlybVRyYW5zaXRpb25UbyA9IGZ1bmN0aW9uIGNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgY2FsbGJhY2spIHtcbiAgICAvLyBUT0RPOiBJZiBhbm90aGVyIHRyYW5zaXRpb24gc3RhcnRzIHdoaWxlIHdlJ3JlIHN0aWxsIGNvbmZpcm1pbmdcbiAgICAvLyB0aGUgcHJldmlvdXMgb25lLCB3ZSBtYXkgZW5kIHVwIGluIGEgd2VpcmQgc3RhdGUuIEZpZ3VyZSBvdXQgdGhlXG4gICAgLy8gYmVzdCB3YXkgdG8gaGFuZGxlIHRoaXMuXG4gICAgaWYgKHByb21wdCAhPSBudWxsKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHlwZW9mIHByb21wdCA9PT0gJ2Z1bmN0aW9uJyA/IHByb21wdChsb2NhdGlvbiwgYWN0aW9uKSA6IHByb21wdDtcblxuICAgICAgaWYgKHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZ2V0VXNlckNvbmZpcm1hdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGdldFVzZXJDb25maXJtYXRpb24ocmVzdWx0LCBjYWxsYmFjayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0KCkoZmFsc2UsICdBIGhpc3RvcnkgbmVlZHMgYSBnZXRVc2VyQ29uZmlybWF0aW9uIGZ1bmN0aW9uIGluIG9yZGVyIHRvIHVzZSBhIHByb21wdCBtZXNzYWdlJyk7XG5cbiAgICAgICAgICBjYWxsYmFjayh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGZyb20gYSB0cmFuc2l0aW9uIGhvb2sgdG8gY2FuY2VsIHRoZSB0cmFuc2l0aW9uLlxuICAgICAgICBjYWxsYmFjayhyZXN1bHQgIT09IGZhbHNlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2sodHJ1ZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBsaXN0ZW5lcnMgPSBbXTtcblxuICB2YXIgYXBwZW5kTGlzdGVuZXIgPSBmdW5jdGlvbiBhcHBlbmRMaXN0ZW5lcihmbikge1xuICAgIHZhciBpc0FjdGl2ZSA9IHRydWU7XG5cbiAgICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbiBsaXN0ZW5lcigpIHtcbiAgICAgIGlmIChpc0FjdGl2ZSkgZm4uYXBwbHkodW5kZWZpbmVkLCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICBsaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgIGxpc3RlbmVycyA9IGxpc3RlbmVycy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0gIT09IGxpc3RlbmVyO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgbm90aWZ5TGlzdGVuZXJzID0gZnVuY3Rpb24gbm90aWZ5TGlzdGVuZXJzKCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIGxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgcmV0dXJuIGxpc3RlbmVyLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBzZXRQcm9tcHQ6IHNldFByb21wdCxcbiAgICBjb25maXJtVHJhbnNpdGlvblRvOiBjb25maXJtVHJhbnNpdGlvblRvLFxuICAgIGFwcGVuZExpc3RlbmVyOiBhcHBlbmRMaXN0ZW5lcixcbiAgICBub3RpZnlMaXN0ZW5lcnM6IG5vdGlmeUxpc3RlbmVyc1xuICB9O1xufTtcblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiYVwiXSA9IChjcmVhdGVUcmFuc2l0aW9uTWFuYWdlcik7XG5cbi8qKiovIH0pLFxuXG4vKioqLyA1NTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X3JvdXRlcl9lc19Sb3V0ZXJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpO1xuLy8gV3JpdHRlbiBpbiB0aGlzIHJvdW5kIGFib3V0IHdheSBmb3IgYmFiZWwtdHJhbnNmb3JtLWltcG9ydHNcblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9yb3V0ZXJfZXNfUm91dGVyX19bXCJhXCIgLyogZGVmYXVsdCAqL10pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gNTY6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX2ludmFyaWFudF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX2ludmFyaWFudF9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX2ludmFyaWFudF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcmVhY3RfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3JlYWN0X19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcmVhY3RfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX3Byb3BfdHlwZXNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX3Byb3BfdHlwZXNfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19wcm9wX3R5cGVzX18pO1xudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5cblxuXG5cblxuLyoqXG4gKiBUaGUgcHVibGljIEFQSSBmb3IgcHV0dGluZyBoaXN0b3J5IG9uIGNvbnRleHQuXG4gKi9cblxudmFyIFJvdXRlciA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhSb3V0ZXIsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFJvdXRlcigpIHtcbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJvdXRlcik7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9SZWFjdCRDb21wb25lbnQuY2FsbC5hcHBseShfUmVhY3QkQ29tcG9uZW50LCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBtYXRjaDogX3RoaXMuY29tcHV0ZU1hdGNoKF90aGlzLnByb3BzLmhpc3RvcnkubG9jYXRpb24ucGF0aG5hbWUpXG4gICAgfSwgX3RlbXApLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7XG4gIH1cblxuICBSb3V0ZXIucHJvdG90eXBlLmdldENoaWxkQ29udGV4dCA9IGZ1bmN0aW9uIGdldENoaWxkQ29udGV4dCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcm91dGVyOiBfZXh0ZW5kcyh7fSwgdGhpcy5jb250ZXh0LnJvdXRlciwge1xuICAgICAgICBoaXN0b3J5OiB0aGlzLnByb3BzLmhpc3RvcnksXG4gICAgICAgIHJvdXRlOiB7XG4gICAgICAgICAgbG9jYXRpb246IHRoaXMucHJvcHMuaGlzdG9yeS5sb2NhdGlvbixcbiAgICAgICAgICBtYXRjaDogdGhpcy5zdGF0ZS5tYXRjaFxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH07XG4gIH07XG5cbiAgUm91dGVyLnByb3RvdHlwZS5jb21wdXRlTWF0Y2ggPSBmdW5jdGlvbiBjb21wdXRlTWF0Y2gocGF0aG5hbWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcGF0aDogJy8nLFxuICAgICAgdXJsOiAnLycsXG4gICAgICBwYXJhbXM6IHt9LFxuICAgICAgaXNFeGFjdDogcGF0aG5hbWUgPT09ICcvJ1xuICAgIH07XG4gIH07XG5cbiAgUm91dGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgY2hpbGRyZW4gPSBfcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgIGhpc3RvcnkgPSBfcHJvcHMuaGlzdG9yeTtcblxuXG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX2ludmFyaWFudF9fX2RlZmF1bHQoKShjaGlsZHJlbiA9PSBudWxsIHx8IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9yZWFjdF9fX2RlZmF1bHQuYS5DaGlsZHJlbi5jb3VudChjaGlsZHJlbikgPT09IDEsICdBIDxSb3V0ZXI+IG1heSBoYXZlIG9ubHkgb25lIGNoaWxkIGVsZW1lbnQnKTtcblxuICAgIC8vIERvIHRoaXMgaGVyZSBzbyB3ZSBjYW4gc2V0U3RhdGUgd2hlbiBhIDxSZWRpcmVjdD4gY2hhbmdlcyB0aGVcbiAgICAvLyBsb2NhdGlvbiBpbiBjb21wb25lbnRXaWxsTW91bnQuIFRoaXMgaGFwcGVucyBlLmcuIHdoZW4gZG9pbmdcbiAgICAvLyBzZXJ2ZXIgcmVuZGVyaW5nIHVzaW5nIGEgPFN0YXRpY1JvdXRlcj4uXG4gICAgdGhpcy51bmxpc3RlbiA9IGhpc3RvcnkubGlzdGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzMi5zZXRTdGF0ZSh7XG4gICAgICAgIG1hdGNoOiBfdGhpczIuY29tcHV0ZU1hdGNoKGhpc3RvcnkubG9jYXRpb24ucGF0aG5hbWUpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBSb3V0ZXIucHJvdG90eXBlLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCgpKHRoaXMucHJvcHMuaGlzdG9yeSA9PT0gbmV4dFByb3BzLmhpc3RvcnksICdZb3UgY2Fubm90IGNoYW5nZSA8Um91dGVyIGhpc3Rvcnk+Jyk7XG4gIH07XG5cbiAgUm91dGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMudW5saXN0ZW4oKTtcbiAgfTtcblxuICBSb3V0ZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLnByb3BzLmNoaWxkcmVuO1xuXG4gICAgcmV0dXJuIGNoaWxkcmVuID8gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3JlYWN0X19fZGVmYXVsdC5hLkNoaWxkcmVuLm9ubHkoY2hpbGRyZW4pIDogbnVsbDtcbiAgfTtcblxuICByZXR1cm4gUm91dGVyO1xufShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcmVhY3RfX19kZWZhdWx0LmEuQ29tcG9uZW50KTtcblxuUm91dGVyLnByb3BUeXBlcyA9IHtcbiAgaGlzdG9yeTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEub2JqZWN0LmlzUmVxdWlyZWQsXG4gIGNoaWxkcmVuOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5ub2RlXG59O1xuUm91dGVyLmNvbnRleHRUeXBlcyA9IHtcbiAgcm91dGVyOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vYmplY3Rcbn07XG5Sb3V0ZXIuY2hpbGRDb250ZXh0VHlwZXMgPSB7XG4gIHJvdXRlcjogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiYVwiXSA9IChSb3V0ZXIpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gNTc6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9wYXRoX3RvX3JlZ2V4cF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9wYXRoX3RvX3JlZ2V4cF9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3BhdGhfdG9fcmVnZXhwX18pO1xuXG5cbnZhciBwYXR0ZXJuQ2FjaGUgPSB7fTtcbnZhciBjYWNoZUxpbWl0ID0gMTAwMDA7XG52YXIgY2FjaGVDb3VudCA9IDA7XG5cbnZhciBjb21waWxlUGF0aCA9IGZ1bmN0aW9uIGNvbXBpbGVQYXRoKHBhdHRlcm4sIG9wdGlvbnMpIHtcbiAgdmFyIGNhY2hlS2V5ID0gJycgKyBvcHRpb25zLmVuZCArIG9wdGlvbnMuc3RyaWN0ICsgb3B0aW9ucy5zZW5zaXRpdmU7XG4gIHZhciBjYWNoZSA9IHBhdHRlcm5DYWNoZVtjYWNoZUtleV0gfHwgKHBhdHRlcm5DYWNoZVtjYWNoZUtleV0gPSB7fSk7XG5cbiAgaWYgKGNhY2hlW3BhdHRlcm5dKSByZXR1cm4gY2FjaGVbcGF0dGVybl07XG5cbiAgdmFyIGtleXMgPSBbXTtcbiAgdmFyIHJlID0gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3BhdGhfdG9fcmVnZXhwX19fZGVmYXVsdCgpKHBhdHRlcm4sIGtleXMsIG9wdGlvbnMpO1xuICB2YXIgY29tcGlsZWRQYXR0ZXJuID0geyByZTogcmUsIGtleXM6IGtleXMgfTtcblxuICBpZiAoY2FjaGVDb3VudCA8IGNhY2hlTGltaXQpIHtcbiAgICBjYWNoZVtwYXR0ZXJuXSA9IGNvbXBpbGVkUGF0dGVybjtcbiAgICBjYWNoZUNvdW50Kys7XG4gIH1cblxuICByZXR1cm4gY29tcGlsZWRQYXR0ZXJuO1xufTtcblxuLyoqXG4gKiBQdWJsaWMgQVBJIGZvciBtYXRjaGluZyBhIFVSTCBwYXRobmFtZSB0byBhIHBhdGggcGF0dGVybi5cbiAqL1xudmFyIG1hdGNoUGF0aCA9IGZ1bmN0aW9uIG1hdGNoUGF0aChwYXRobmFtZSkge1xuICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykgb3B0aW9ucyA9IHsgcGF0aDogb3B0aW9ucyB9O1xuXG4gIHZhciBfb3B0aW9ucyA9IG9wdGlvbnMsXG4gICAgICBfb3B0aW9ucyRwYXRoID0gX29wdGlvbnMucGF0aCxcbiAgICAgIHBhdGggPSBfb3B0aW9ucyRwYXRoID09PSB1bmRlZmluZWQgPyAnLycgOiBfb3B0aW9ucyRwYXRoLFxuICAgICAgX29wdGlvbnMkZXhhY3QgPSBfb3B0aW9ucy5leGFjdCxcbiAgICAgIGV4YWN0ID0gX29wdGlvbnMkZXhhY3QgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX29wdGlvbnMkZXhhY3QsXG4gICAgICBfb3B0aW9ucyRzdHJpY3QgPSBfb3B0aW9ucy5zdHJpY3QsXG4gICAgICBzdHJpY3QgPSBfb3B0aW9ucyRzdHJpY3QgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX29wdGlvbnMkc3RyaWN0LFxuICAgICAgX29wdGlvbnMkc2Vuc2l0aXZlID0gX29wdGlvbnMuc2Vuc2l0aXZlLFxuICAgICAgc2Vuc2l0aXZlID0gX29wdGlvbnMkc2Vuc2l0aXZlID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9vcHRpb25zJHNlbnNpdGl2ZTtcblxuICB2YXIgX2NvbXBpbGVQYXRoID0gY29tcGlsZVBhdGgocGF0aCwgeyBlbmQ6IGV4YWN0LCBzdHJpY3Q6IHN0cmljdCwgc2Vuc2l0aXZlOiBzZW5zaXRpdmUgfSksXG4gICAgICByZSA9IF9jb21waWxlUGF0aC5yZSxcbiAgICAgIGtleXMgPSBfY29tcGlsZVBhdGgua2V5cztcblxuICB2YXIgbWF0Y2ggPSByZS5leGVjKHBhdGhuYW1lKTtcblxuICBpZiAoIW1hdGNoKSByZXR1cm4gbnVsbDtcblxuICB2YXIgdXJsID0gbWF0Y2hbMF0sXG4gICAgICB2YWx1ZXMgPSBtYXRjaC5zbGljZSgxKTtcblxuICB2YXIgaXNFeGFjdCA9IHBhdGhuYW1lID09PSB1cmw7XG5cbiAgaWYgKGV4YWN0ICYmICFpc0V4YWN0KSByZXR1cm4gbnVsbDtcblxuICByZXR1cm4ge1xuICAgIHBhdGg6IHBhdGgsIC8vIHRoZSBwYXRoIHBhdHRlcm4gdXNlZCB0byBtYXRjaFxuICAgIHVybDogcGF0aCA9PT0gJy8nICYmIHVybCA9PT0gJycgPyAnLycgOiB1cmwsIC8vIHRoZSBtYXRjaGVkIHBvcnRpb24gb2YgdGhlIFVSTFxuICAgIGlzRXhhY3Q6IGlzRXhhY3QsIC8vIHdoZXRoZXIgb3Igbm90IHdlIG1hdGNoZWQgZXhhY3RseVxuICAgIHBhcmFtczoga2V5cy5yZWR1Y2UoZnVuY3Rpb24gKG1lbW8sIGtleSwgaW5kZXgpIHtcbiAgICAgIG1lbW9ba2V5Lm5hbWVdID0gdmFsdWVzW2luZGV4XTtcbiAgICAgIHJldHVybiBtZW1vO1xuICAgIH0sIHt9KVxuICB9O1xufTtcblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiYVwiXSA9IChtYXRjaFBhdGgpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gODA6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB1bmRlZmluZWQ7XG5cbnZhciBfQ2hlY2tib3ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NSk7XG5cbnZhciBfQ2hlY2tib3gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ2hlY2tib3gpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5leHBvcnRzLmRlZmF1bHQgPSBfQ2hlY2tib3gyLmRlZmF1bHQ7XG5cbi8qKiovIH0pLFxuXG4vKioqLyA4MTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHVuZGVmaW5lZDtcblxudmFyIF9TbmFja2JhciA9IF9fd2VicGFja19yZXF1aXJlX18oMTUyKTtcblxudmFyIF9TbmFja2JhcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TbmFja2Jhcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuZGVmYXVsdCA9IF9TbmFja2JhcjIuZGVmYXVsdDtcblxuLyoqKi8gfSksXG5cbi8qKiovIDg3OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xudmFyIGNhblVzZURPTSA9IGV4cG9ydHMuY2FuVXNlRE9NID0gISEodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmRvY3VtZW50ICYmIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcblxudmFyIGFkZEV2ZW50TGlzdGVuZXIgPSBleHBvcnRzLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKG5vZGUsIGV2ZW50LCBsaXN0ZW5lcikge1xuICByZXR1cm4gbm9kZS5hZGRFdmVudExpc3RlbmVyID8gbm9kZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpIDogbm9kZS5hdHRhY2hFdmVudCgnb24nICsgZXZlbnQsIGxpc3RlbmVyKTtcbn07XG5cbnZhciByZW1vdmVFdmVudExpc3RlbmVyID0gZXhwb3J0cy5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcihub2RlLCBldmVudCwgbGlzdGVuZXIpIHtcbiAgcmV0dXJuIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA/IG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIsIGZhbHNlKSA6IG5vZGUuZGV0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBsaXN0ZW5lcik7XG59O1xuXG52YXIgZ2V0Q29uZmlybWF0aW9uID0gZXhwb3J0cy5nZXRDb25maXJtYXRpb24gPSBmdW5jdGlvbiBnZXRDb25maXJtYXRpb24obWVzc2FnZSwgY2FsbGJhY2spIHtcbiAgcmV0dXJuIGNhbGxiYWNrKHdpbmRvdy5jb25maXJtKG1lc3NhZ2UpKTtcbn07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tYWxlcnRcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIEhUTUw1IGhpc3RvcnkgQVBJIGlzIHN1cHBvcnRlZC4gVGFrZW4gZnJvbSBNb2Rlcm5penIuXG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvYmxvYi9tYXN0ZXIvTElDRU5TRVxuICogaHR0cHM6Ly9naXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvYmxvYi9tYXN0ZXIvZmVhdHVyZS1kZXRlY3RzL2hpc3RvcnkuanNcbiAqIGNoYW5nZWQgdG8gYXZvaWQgZmFsc2UgbmVnYXRpdmVzIGZvciBXaW5kb3dzIFBob25lczogaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0anMvcmVhY3Qtcm91dGVyL2lzc3Vlcy81ODZcbiAqL1xudmFyIHN1cHBvcnRzSGlzdG9yeSA9IGV4cG9ydHMuc3VwcG9ydHNIaXN0b3J5ID0gZnVuY3Rpb24gc3VwcG9ydHNIaXN0b3J5KCkge1xuICB2YXIgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDtcblxuICBpZiAoKHVhLmluZGV4T2YoJ0FuZHJvaWQgMi4nKSAhPT0gLTEgfHwgdWEuaW5kZXhPZignQW5kcm9pZCA0LjAnKSAhPT0gLTEpICYmIHVhLmluZGV4T2YoJ01vYmlsZSBTYWZhcmknKSAhPT0gLTEgJiYgdWEuaW5kZXhPZignQ2hyb21lJykgPT09IC0xICYmIHVhLmluZGV4T2YoJ1dpbmRvd3MgUGhvbmUnKSA9PT0gLTEpIHJldHVybiBmYWxzZTtcblxuICByZXR1cm4gd2luZG93Lmhpc3RvcnkgJiYgJ3B1c2hTdGF0ZScgaW4gd2luZG93Lmhpc3Rvcnk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBicm93c2VyIGZpcmVzIHBvcHN0YXRlIG9uIGhhc2ggY2hhbmdlLlxuICogSUUxMCBhbmQgSUUxMSBkbyBub3QuXG4gKi9cbnZhciBzdXBwb3J0c1BvcFN0YXRlT25IYXNoQ2hhbmdlID0gZXhwb3J0cy5zdXBwb3J0c1BvcFN0YXRlT25IYXNoQ2hhbmdlID0gZnVuY3Rpb24gc3VwcG9ydHNQb3BTdGF0ZU9uSGFzaENoYW5nZSgpIHtcbiAgcmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ1RyaWRlbnQnKSA9PT0gLTE7XG59O1xuXG4vKipcbiAqIFJldHVybnMgZmFsc2UgaWYgdXNpbmcgZ28obikgd2l0aCBoYXNoIGhpc3RvcnkgY2F1c2VzIGEgZnVsbCBwYWdlIHJlbG9hZC5cbiAqL1xudmFyIHN1cHBvcnRzR29XaXRob3V0UmVsb2FkVXNpbmdIYXNoID0gZXhwb3J0cy5zdXBwb3J0c0dvV2l0aG91dFJlbG9hZFVzaW5nSGFzaCA9IGZ1bmN0aW9uIHN1cHBvcnRzR29XaXRob3V0UmVsb2FkVXNpbmdIYXNoKCkge1xuICByZXR1cm4gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRmlyZWZveCcpID09PSAtMTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGEgZ2l2ZW4gcG9wc3RhdGUgZXZlbnQgaXMgYW4gZXh0cmFuZW91cyBXZWJLaXQgZXZlbnQuXG4gKiBBY2NvdW50cyBmb3IgdGhlIGZhY3QgdGhhdCBDaHJvbWUgb24gaU9TIGZpcmVzIHJlYWwgcG9wc3RhdGUgZXZlbnRzXG4gKiBjb250YWluaW5nIHVuZGVmaW5lZCBzdGF0ZSB3aGVuIHByZXNzaW5nIHRoZSBiYWNrIGJ1dHRvbi5cbiAqL1xudmFyIGlzRXh0cmFuZW91c1BvcHN0YXRlRXZlbnQgPSBleHBvcnRzLmlzRXh0cmFuZW91c1BvcHN0YXRlRXZlbnQgPSBmdW5jdGlvbiBpc0V4dHJhbmVvdXNQb3BzdGF0ZUV2ZW50KGV2ZW50KSB7XG4gIHJldHVybiBldmVudC5zdGF0ZSA9PT0gdW5kZWZpbmVkICYmIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQ3JpT1MnKSA9PT0gLTE7XG59O1xuXG4vKioqLyB9KSxcblxuLyoqKi8gODg6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImFcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBjYW5Vc2VET007IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBhZGRFdmVudExpc3RlbmVyOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcmVtb3ZlRXZlbnRMaXN0ZW5lcjsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiY1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGdldENvbmZpcm1hdGlvbjsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZlwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHN1cHBvcnRzSGlzdG9yeTsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHN1cHBvcnRzUG9wU3RhdGVPbkhhc2hDaGFuZ2U7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBzdXBwb3J0c0dvV2l0aG91dFJlbG9hZFVzaW5nSGFzaDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiaFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGlzRXh0cmFuZW91c1BvcHN0YXRlRXZlbnQ7IH0pO1xudmFyIGNhblVzZURPTSA9ICEhKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5kb2N1bWVudCAmJiB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7XG5cbnZhciBhZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihub2RlLCBldmVudCwgbGlzdGVuZXIpIHtcbiAgcmV0dXJuIG5vZGUuYWRkRXZlbnRMaXN0ZW5lciA/IG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIsIGZhbHNlKSA6IG5vZGUuYXR0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBsaXN0ZW5lcik7XG59O1xuXG52YXIgcmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIobm9kZSwgZXZlbnQsIGxpc3RlbmVyKSB7XG4gIHJldHVybiBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPyBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyLCBmYWxzZSkgOiBub2RlLmRldGFjaEV2ZW50KCdvbicgKyBldmVudCwgbGlzdGVuZXIpO1xufTtcblxudmFyIGdldENvbmZpcm1hdGlvbiA9IGZ1bmN0aW9uIGdldENvbmZpcm1hdGlvbihtZXNzYWdlLCBjYWxsYmFjaykge1xuICByZXR1cm4gY2FsbGJhY2sod2luZG93LmNvbmZpcm0obWVzc2FnZSkpO1xufTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1hbGVydFxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgSFRNTDUgaGlzdG9yeSBBUEkgaXMgc3VwcG9ydGVkLiBUYWtlbiBmcm9tIE1vZGVybml6ci5cbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci9ibG9iL21hc3Rlci9MSUNFTlNFXG4gKiBodHRwczovL2dpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci9ibG9iL21hc3Rlci9mZWF0dXJlLWRldGVjdHMvaGlzdG9yeS5qc1xuICogY2hhbmdlZCB0byBhdm9pZCBmYWxzZSBuZWdhdGl2ZXMgZm9yIFdpbmRvd3MgUGhvbmVzOiBodHRwczovL2dpdGh1Yi5jb20vcmVhY3Rqcy9yZWFjdC1yb3V0ZXIvaXNzdWVzLzU4NlxuICovXG52YXIgc3VwcG9ydHNIaXN0b3J5ID0gZnVuY3Rpb24gc3VwcG9ydHNIaXN0b3J5KCkge1xuICB2YXIgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDtcblxuICBpZiAoKHVhLmluZGV4T2YoJ0FuZHJvaWQgMi4nKSAhPT0gLTEgfHwgdWEuaW5kZXhPZignQW5kcm9pZCA0LjAnKSAhPT0gLTEpICYmIHVhLmluZGV4T2YoJ01vYmlsZSBTYWZhcmknKSAhPT0gLTEgJiYgdWEuaW5kZXhPZignQ2hyb21lJykgPT09IC0xICYmIHVhLmluZGV4T2YoJ1dpbmRvd3MgUGhvbmUnKSA9PT0gLTEpIHJldHVybiBmYWxzZTtcblxuICByZXR1cm4gd2luZG93Lmhpc3RvcnkgJiYgJ3B1c2hTdGF0ZScgaW4gd2luZG93Lmhpc3Rvcnk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBicm93c2VyIGZpcmVzIHBvcHN0YXRlIG9uIGhhc2ggY2hhbmdlLlxuICogSUUxMCBhbmQgSUUxMSBkbyBub3QuXG4gKi9cbnZhciBzdXBwb3J0c1BvcFN0YXRlT25IYXNoQ2hhbmdlID0gZnVuY3Rpb24gc3VwcG9ydHNQb3BTdGF0ZU9uSGFzaENoYW5nZSgpIHtcbiAgcmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ1RyaWRlbnQnKSA9PT0gLTE7XG59O1xuXG4vKipcbiAqIFJldHVybnMgZmFsc2UgaWYgdXNpbmcgZ28obikgd2l0aCBoYXNoIGhpc3RvcnkgY2F1c2VzIGEgZnVsbCBwYWdlIHJlbG9hZC5cbiAqL1xudmFyIHN1cHBvcnRzR29XaXRob3V0UmVsb2FkVXNpbmdIYXNoID0gZnVuY3Rpb24gc3VwcG9ydHNHb1dpdGhvdXRSZWxvYWRVc2luZ0hhc2goKSB7XG4gIHJldHVybiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94JykgPT09IC0xO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYSBnaXZlbiBwb3BzdGF0ZSBldmVudCBpcyBhbiBleHRyYW5lb3VzIFdlYktpdCBldmVudC5cbiAqIEFjY291bnRzIGZvciB0aGUgZmFjdCB0aGF0IENocm9tZSBvbiBpT1MgZmlyZXMgcmVhbCBwb3BzdGF0ZSBldmVudHNcbiAqIGNvbnRhaW5pbmcgdW5kZWZpbmVkIHN0YXRlIHdoZW4gcHJlc3NpbmcgdGhlIGJhY2sgYnV0dG9uLlxuICovXG52YXIgaXNFeHRyYW5lb3VzUG9wc3RhdGVFdmVudCA9IGZ1bmN0aW9uIGlzRXh0cmFuZW91c1BvcHN0YXRlRXZlbnQoZXZlbnQpIHtcbiAgcmV0dXJuIGV2ZW50LnN0YXRlID09PSB1bmRlZmluZWQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdDcmlPUycpID09PSAtMTtcbn07XG5cbi8qKiovIH0pLFxuXG4vKioqLyA5NDpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfaW52YXJpYW50X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfaW52YXJpYW50X19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfaW52YXJpYW50X18pO1xudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKG9iaiwga2V5cykgeyB2YXIgdGFyZ2V0ID0ge307IGZvciAodmFyIGkgaW4gb2JqKSB7IGlmIChrZXlzLmluZGV4T2YoaSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgaSkpIGNvbnRpbnVlOyB0YXJnZXRbaV0gPSBvYmpbaV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cblxuXG5cblxudmFyIGlzTW9kaWZpZWRFdmVudCA9IGZ1bmN0aW9uIGlzTW9kaWZpZWRFdmVudChldmVudCkge1xuICByZXR1cm4gISEoZXZlbnQubWV0YUtleSB8fCBldmVudC5hbHRLZXkgfHwgZXZlbnQuY3RybEtleSB8fCBldmVudC5zaGlmdEtleSk7XG59O1xuXG4vKipcbiAqIFRoZSBwdWJsaWMgQVBJIGZvciByZW5kZXJpbmcgYSBoaXN0b3J5LWF3YXJlIDxhPi5cbiAqL1xuXG52YXIgTGluayA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhMaW5rLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBMaW5rKCkge1xuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTGluayk7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9SZWFjdCRDb21wb25lbnQuY2FsbC5hcHBseShfUmVhY3QkQ29tcG9uZW50LCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmIChfdGhpcy5wcm9wcy5vbkNsaWNrKSBfdGhpcy5wcm9wcy5vbkNsaWNrKGV2ZW50KTtcblxuICAgICAgaWYgKCFldmVudC5kZWZhdWx0UHJldmVudGVkICYmIC8vIG9uQ2xpY2sgcHJldmVudGVkIGRlZmF1bHRcbiAgICAgIGV2ZW50LmJ1dHRvbiA9PT0gMCAmJiAvLyBpZ25vcmUgcmlnaHQgY2xpY2tzXG4gICAgICAhX3RoaXMucHJvcHMudGFyZ2V0ICYmIC8vIGxldCBicm93c2VyIGhhbmRsZSBcInRhcmdldD1fYmxhbmtcIiBldGMuXG4gICAgICAhaXNNb2RpZmllZEV2ZW50KGV2ZW50KSAvLyBpZ25vcmUgY2xpY2tzIHdpdGggbW9kaWZpZXIga2V5c1xuICAgICAgKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgIHZhciBoaXN0b3J5ID0gX3RoaXMuY29udGV4dC5yb3V0ZXIuaGlzdG9yeTtcbiAgICAgICAgICB2YXIgX3RoaXMkcHJvcHMgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICAgICAgcmVwbGFjZSA9IF90aGlzJHByb3BzLnJlcGxhY2UsXG4gICAgICAgICAgICAgIHRvID0gX3RoaXMkcHJvcHMudG87XG5cblxuICAgICAgICAgIGlmIChyZXBsYWNlKSB7XG4gICAgICAgICAgICBoaXN0b3J5LnJlcGxhY2UodG8pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoaXN0b3J5LnB1c2godG8pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIF90ZW1wKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgTGluay5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICByZXBsYWNlID0gX3Byb3BzLnJlcGxhY2UsXG4gICAgICAgIHRvID0gX3Byb3BzLnRvLFxuICAgICAgICBpbm5lclJlZiA9IF9wcm9wcy5pbm5lclJlZixcbiAgICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3Byb3BzLCBbJ3JlcGxhY2UnLCAndG8nLCAnaW5uZXJSZWYnXSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9pbnZhcmlhbnRfX19kZWZhdWx0KCkodGhpcy5jb250ZXh0LnJvdXRlciwgJ1lvdSBzaG91bGQgbm90IHVzZSA8TGluaz4gb3V0c2lkZSBhIDxSb3V0ZXI+Jyk7XG5cbiAgICB2YXIgaHJlZiA9IHRoaXMuY29udGV4dC5yb3V0ZXIuaGlzdG9yeS5jcmVhdGVIcmVmKHR5cGVvZiB0byA9PT0gJ3N0cmluZycgPyB7IHBhdGhuYW1lOiB0byB9IDogdG8pO1xuXG4gICAgcmV0dXJuIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KCdhJywgX2V4dGVuZHMoe30sIHByb3BzLCB7IG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2xpY2ssIGhyZWY6IGhyZWYsIHJlZjogaW5uZXJSZWYgfSkpO1xuICB9O1xuXG4gIHJldHVybiBMaW5rO1xufShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX19kZWZhdWx0LmEuQ29tcG9uZW50KTtcblxuTGluay5wcm9wVHlwZXMgPSB7XG4gIG9uQ2xpY2s6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmZ1bmMsXG4gIHRhcmdldDogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuc3RyaW5nLFxuICByZXBsYWNlOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5ib29sLFxuICB0bzogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEub25lT2ZUeXBlKFtfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5zdHJpbmcsIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLm9iamVjdF0pLmlzUmVxdWlyZWQsXG4gIGlubmVyUmVmOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vbmVPZlR5cGUoW19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLnN0cmluZywgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuZnVuY10pXG59O1xuTGluay5kZWZhdWx0UHJvcHMgPSB7XG4gIHJlcGxhY2U6IGZhbHNlXG59O1xuTGluay5jb250ZXh0VHlwZXMgPSB7XG4gIHJvdXRlcjogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuc2hhcGUoe1xuICAgIGhpc3Rvcnk6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLnNoYXBlKHtcbiAgICAgIHB1c2g6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICAgIHJlcGxhY2U6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICAgIGNyZWF0ZUhyZWY6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmZ1bmMuaXNSZXF1aXJlZFxuICAgIH0pLmlzUmVxdWlyZWRcbiAgfSkuaXNSZXF1aXJlZFxufTtcblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKExpbmspO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gOTU6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9yb3V0ZXJfZXNfUm91dGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTYpO1xuLy8gV3JpdHRlbiBpbiB0aGlzIHJvdW5kIGFib3V0IHdheSBmb3IgYmFiZWwtdHJhbnNmb3JtLWltcG9ydHNcblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9yb3V0ZXJfZXNfUm91dGVfX1tcImFcIiAvKiBkZWZhdWx0ICovXSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyA5Njpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF93YXJuaW5nX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfaW52YXJpYW50X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9yZWFjdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcmVhY3RfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9yZWFjdF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX3Byb3BfdHlwZXNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19tYXRjaFBhdGhfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTcpO1xudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5cblxuXG5cblxuXG52YXIgaXNFbXB0eUNoaWxkcmVuID0gZnVuY3Rpb24gaXNFbXB0eUNoaWxkcmVuKGNoaWxkcmVuKSB7XG4gIHJldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcmVhY3RfX19kZWZhdWx0LmEuQ2hpbGRyZW4uY291bnQoY2hpbGRyZW4pID09PSAwO1xufTtcblxuLyoqXG4gKiBUaGUgcHVibGljIEFQSSBmb3IgbWF0Y2hpbmcgYSBzaW5nbGUgcGF0aCBhbmQgcmVuZGVyaW5nLlxuICovXG5cbnZhciBSb3V0ZSA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhSb3V0ZSwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gUm91dGUoKSB7XG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSb3V0ZSk7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9SZWFjdCRDb21wb25lbnQuY2FsbC5hcHBseShfUmVhY3QkQ29tcG9uZW50LCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBtYXRjaDogX3RoaXMuY29tcHV0ZU1hdGNoKF90aGlzLnByb3BzLCBfdGhpcy5jb250ZXh0LnJvdXRlcilcbiAgICB9LCBfdGVtcCksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gIFJvdXRlLnByb3RvdHlwZS5nZXRDaGlsZENvbnRleHQgPSBmdW5jdGlvbiBnZXRDaGlsZENvbnRleHQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJvdXRlcjogX2V4dGVuZHMoe30sIHRoaXMuY29udGV4dC5yb3V0ZXIsIHtcbiAgICAgICAgcm91dGU6IHtcbiAgICAgICAgICBsb2NhdGlvbjogdGhpcy5wcm9wcy5sb2NhdGlvbiB8fCB0aGlzLmNvbnRleHQucm91dGVyLnJvdXRlLmxvY2F0aW9uLFxuICAgICAgICAgIG1hdGNoOiB0aGlzLnN0YXRlLm1hdGNoXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfTtcbiAgfTtcblxuICBSb3V0ZS5wcm90b3R5cGUuY29tcHV0ZU1hdGNoID0gZnVuY3Rpb24gY29tcHV0ZU1hdGNoKF9yZWYsIHJvdXRlcikge1xuICAgIHZhciBjb21wdXRlZE1hdGNoID0gX3JlZi5jb21wdXRlZE1hdGNoLFxuICAgICAgICBsb2NhdGlvbiA9IF9yZWYubG9jYXRpb24sXG4gICAgICAgIHBhdGggPSBfcmVmLnBhdGgsXG4gICAgICAgIHN0cmljdCA9IF9yZWYuc3RyaWN0LFxuICAgICAgICBleGFjdCA9IF9yZWYuZXhhY3QsXG4gICAgICAgIHNlbnNpdGl2ZSA9IF9yZWYuc2Vuc2l0aXZlO1xuXG4gICAgaWYgKGNvbXB1dGVkTWF0Y2gpIHJldHVybiBjb21wdXRlZE1hdGNoOyAvLyA8U3dpdGNoPiBhbHJlYWR5IGNvbXB1dGVkIHRoZSBtYXRjaCBmb3IgdXNcblxuICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9pbnZhcmlhbnRfX19kZWZhdWx0KCkocm91dGVyLCAnWW91IHNob3VsZCBub3QgdXNlIDxSb3V0ZT4gb3Igd2l0aFJvdXRlcigpIG91dHNpZGUgYSA8Um91dGVyPicpO1xuXG4gICAgdmFyIHJvdXRlID0gcm91dGVyLnJvdXRlO1xuXG4gICAgdmFyIHBhdGhuYW1lID0gKGxvY2F0aW9uIHx8IHJvdXRlLmxvY2F0aW9uKS5wYXRobmFtZTtcblxuICAgIHJldHVybiBwYXRoID8gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fbWF0Y2hQYXRoX19bXCJhXCIgLyogZGVmYXVsdCAqL10pKHBhdGhuYW1lLCB7IHBhdGg6IHBhdGgsIHN0cmljdDogc3RyaWN0LCBleGFjdDogZXhhY3QsIHNlbnNpdGl2ZTogc2Vuc2l0aXZlIH0pIDogcm91dGUubWF0Y2g7XG4gIH07XG5cbiAgUm91dGUucHJvdG90eXBlLmNvbXBvbmVudFdpbGxNb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfd2FybmluZ19fX2RlZmF1bHQoKSghKHRoaXMucHJvcHMuY29tcG9uZW50ICYmIHRoaXMucHJvcHMucmVuZGVyKSwgJ1lvdSBzaG91bGQgbm90IHVzZSA8Um91dGUgY29tcG9uZW50PiBhbmQgPFJvdXRlIHJlbmRlcj4gaW4gdGhlIHNhbWUgcm91dGU7IDxSb3V0ZSByZW5kZXI+IHdpbGwgYmUgaWdub3JlZCcpO1xuXG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0KCkoISh0aGlzLnByb3BzLmNvbXBvbmVudCAmJiB0aGlzLnByb3BzLmNoaWxkcmVuICYmICFpc0VtcHR5Q2hpbGRyZW4odGhpcy5wcm9wcy5jaGlsZHJlbikpLCAnWW91IHNob3VsZCBub3QgdXNlIDxSb3V0ZSBjb21wb25lbnQ+IGFuZCA8Um91dGUgY2hpbGRyZW4+IGluIHRoZSBzYW1lIHJvdXRlOyA8Um91dGUgY2hpbGRyZW4+IHdpbGwgYmUgaWdub3JlZCcpO1xuXG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0KCkoISh0aGlzLnByb3BzLnJlbmRlciAmJiB0aGlzLnByb3BzLmNoaWxkcmVuICYmICFpc0VtcHR5Q2hpbGRyZW4odGhpcy5wcm9wcy5jaGlsZHJlbikpLCAnWW91IHNob3VsZCBub3QgdXNlIDxSb3V0ZSByZW5kZXI+IGFuZCA8Um91dGUgY2hpbGRyZW4+IGluIHRoZSBzYW1lIHJvdXRlOyA8Um91dGUgY2hpbGRyZW4+IHdpbGwgYmUgaWdub3JlZCcpO1xuICB9O1xuXG4gIFJvdXRlLnByb3RvdHlwZS5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMsIG5leHRDb250ZXh0KSB7XG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0KCkoIShuZXh0UHJvcHMubG9jYXRpb24gJiYgIXRoaXMucHJvcHMubG9jYXRpb24pLCAnPFJvdXRlPiBlbGVtZW50cyBzaG91bGQgbm90IGNoYW5nZSBmcm9tIHVuY29udHJvbGxlZCB0byBjb250cm9sbGVkIChvciB2aWNlIHZlcnNhKS4gWW91IGluaXRpYWxseSB1c2VkIG5vIFwibG9jYXRpb25cIiBwcm9wIGFuZCB0aGVuIHByb3ZpZGVkIG9uZSBvbiBhIHN1YnNlcXVlbnQgcmVuZGVyLicpO1xuXG4gICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3dhcm5pbmdfX19kZWZhdWx0KCkoISghbmV4dFByb3BzLmxvY2F0aW9uICYmIHRoaXMucHJvcHMubG9jYXRpb24pLCAnPFJvdXRlPiBlbGVtZW50cyBzaG91bGQgbm90IGNoYW5nZSBmcm9tIGNvbnRyb2xsZWQgdG8gdW5jb250cm9sbGVkIChvciB2aWNlIHZlcnNhKS4gWW91IHByb3ZpZGVkIGEgXCJsb2NhdGlvblwiIHByb3AgaW5pdGlhbGx5IGJ1dCBvbWl0dGVkIGl0IG9uIGEgc3Vic2VxdWVudCByZW5kZXIuJyk7XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIG1hdGNoOiB0aGlzLmNvbXB1dGVNYXRjaChuZXh0UHJvcHMsIG5leHRDb250ZXh0LnJvdXRlcilcbiAgICB9KTtcbiAgfTtcblxuICBSb3V0ZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBtYXRjaCA9IHRoaXMuc3RhdGUubWF0Y2g7XG4gICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgIGNoaWxkcmVuID0gX3Byb3BzLmNoaWxkcmVuLFxuICAgICAgICBjb21wb25lbnQgPSBfcHJvcHMuY29tcG9uZW50LFxuICAgICAgICByZW5kZXIgPSBfcHJvcHMucmVuZGVyO1xuICAgIHZhciBfY29udGV4dCRyb3V0ZXIgPSB0aGlzLmNvbnRleHQucm91dGVyLFxuICAgICAgICBoaXN0b3J5ID0gX2NvbnRleHQkcm91dGVyLmhpc3RvcnksXG4gICAgICAgIHJvdXRlID0gX2NvbnRleHQkcm91dGVyLnJvdXRlLFxuICAgICAgICBzdGF0aWNDb250ZXh0ID0gX2NvbnRleHQkcm91dGVyLnN0YXRpY0NvbnRleHQ7XG5cbiAgICB2YXIgbG9jYXRpb24gPSB0aGlzLnByb3BzLmxvY2F0aW9uIHx8IHJvdXRlLmxvY2F0aW9uO1xuICAgIHZhciBwcm9wcyA9IHsgbWF0Y2g6IG1hdGNoLCBsb2NhdGlvbjogbG9jYXRpb24sIGhpc3Rvcnk6IGhpc3RvcnksIHN0YXRpY0NvbnRleHQ6IHN0YXRpY0NvbnRleHQgfTtcblxuICAgIHJldHVybiBjb21wb25lbnQgPyAvLyBjb21wb25lbnQgcHJvcCBnZXRzIGZpcnN0IHByaW9yaXR5LCBvbmx5IGNhbGxlZCBpZiB0aGVyZSdzIGEgbWF0Y2hcbiAgICBtYXRjaCA/IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9yZWFjdF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KGNvbXBvbmVudCwgcHJvcHMpIDogbnVsbCA6IHJlbmRlciA/IC8vIHJlbmRlciBwcm9wIGlzIG5leHQsIG9ubHkgY2FsbGVkIGlmIHRoZXJlJ3MgYSBtYXRjaFxuICAgIG1hdGNoID8gcmVuZGVyKHByb3BzKSA6IG51bGwgOiBjaGlsZHJlbiA/IC8vIGNoaWxkcmVuIGNvbWUgbGFzdCwgYWx3YXlzIGNhbGxlZFxuICAgIHR5cGVvZiBjaGlsZHJlbiA9PT0gJ2Z1bmN0aW9uJyA/IGNoaWxkcmVuKHByb3BzKSA6ICFpc0VtcHR5Q2hpbGRyZW4oY2hpbGRyZW4pID8gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX3JlYWN0X19fZGVmYXVsdC5hLkNoaWxkcmVuLm9ubHkoY2hpbGRyZW4pIDogbnVsbCA6IG51bGw7XG4gIH07XG5cbiAgcmV0dXJuIFJvdXRlO1xufShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfcmVhY3RfX19kZWZhdWx0LmEuQ29tcG9uZW50KTtcblxuUm91dGUucHJvcFR5cGVzID0ge1xuICBjb21wdXRlZE1hdGNoOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vYmplY3QsIC8vIHByaXZhdGUsIGZyb20gPFN3aXRjaD5cbiAgcGF0aDogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuc3RyaW5nLFxuICBleGFjdDogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuYm9vbCxcbiAgc3RyaWN0OiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5ib29sLFxuICBzZW5zaXRpdmU6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmJvb2wsXG4gIGNvbXBvbmVudDogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuZnVuYyxcbiAgcmVuZGVyOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5mdW5jLFxuICBjaGlsZHJlbjogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEub25lT2ZUeXBlKFtfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5mdW5jLCBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5ub2RlXSksXG4gIGxvY2F0aW9uOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vYmplY3Rcbn07XG5Sb3V0ZS5jb250ZXh0VHlwZXMgPSB7XG4gIHJvdXRlcjogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuc2hhcGUoe1xuICAgIGhpc3Rvcnk6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19wcm9wX3R5cGVzX19fZGVmYXVsdC5hLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIHJvdXRlOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICBzdGF0aWNDb250ZXh0OiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vYmplY3RcbiAgfSlcbn07XG5Sb3V0ZS5jaGlsZENvbnRleHRUeXBlcyA9IHtcbiAgcm91dGVyOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5vYmplY3QuaXNSZXF1aXJlZFxufTtcblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKFJvdXRlKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDk5OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3dlYnBhY2tfZXhwb3J0c19fLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmZ1bmN0aW9uIGlzQWJzb2x1dGUocGF0aG5hbWUpIHtcbiAgcmV0dXJuIHBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nO1xufVxuXG4vLyBBYm91dCAxLjV4IGZhc3RlciB0aGFuIHRoZSB0d28tYXJnIHZlcnNpb24gb2YgQXJyYXkjc3BsaWNlKClcbmZ1bmN0aW9uIHNwbGljZU9uZShsaXN0LCBpbmRleCkge1xuICBmb3IgKHZhciBpID0gaW5kZXgsIGsgPSBpICsgMSwgbiA9IGxpc3QubGVuZ3RoOyBrIDwgbjsgaSArPSAxLCBrICs9IDEpIHtcbiAgICBsaXN0W2ldID0gbGlzdFtrXTtcbiAgfVxuXG4gIGxpc3QucG9wKCk7XG59XG5cbi8vIFRoaXMgaW1wbGVtZW50YXRpb24gaXMgYmFzZWQgaGVhdmlseSBvbiBub2RlJ3MgdXJsLnBhcnNlXG5mdW5jdGlvbiByZXNvbHZlUGF0aG5hbWUodG8pIHtcbiAgdmFyIGZyb20gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnO1xuXG4gIHZhciB0b1BhcnRzID0gdG8gJiYgdG8uc3BsaXQoJy8nKSB8fCBbXTtcbiAgdmFyIGZyb21QYXJ0cyA9IGZyb20gJiYgZnJvbS5zcGxpdCgnLycpIHx8IFtdO1xuXG4gIHZhciBpc1RvQWJzID0gdG8gJiYgaXNBYnNvbHV0ZSh0byk7XG4gIHZhciBpc0Zyb21BYnMgPSBmcm9tICYmIGlzQWJzb2x1dGUoZnJvbSk7XG4gIHZhciBtdXN0RW5kQWJzID0gaXNUb0FicyB8fCBpc0Zyb21BYnM7XG5cbiAgaWYgKHRvICYmIGlzQWJzb2x1dGUodG8pKSB7XG4gICAgLy8gdG8gaXMgYWJzb2x1dGVcbiAgICBmcm9tUGFydHMgPSB0b1BhcnRzO1xuICB9IGVsc2UgaWYgKHRvUGFydHMubGVuZ3RoKSB7XG4gICAgLy8gdG8gaXMgcmVsYXRpdmUsIGRyb3AgdGhlIGZpbGVuYW1lXG4gICAgZnJvbVBhcnRzLnBvcCgpO1xuICAgIGZyb21QYXJ0cyA9IGZyb21QYXJ0cy5jb25jYXQodG9QYXJ0cyk7XG4gIH1cblxuICBpZiAoIWZyb21QYXJ0cy5sZW5ndGgpIHJldHVybiAnLyc7XG5cbiAgdmFyIGhhc1RyYWlsaW5nU2xhc2ggPSB2b2lkIDA7XG4gIGlmIChmcm9tUGFydHMubGVuZ3RoKSB7XG4gICAgdmFyIGxhc3QgPSBmcm9tUGFydHNbZnJvbVBhcnRzLmxlbmd0aCAtIDFdO1xuICAgIGhhc1RyYWlsaW5nU2xhc2ggPSBsYXN0ID09PSAnLicgfHwgbGFzdCA9PT0gJy4uJyB8fCBsYXN0ID09PSAnJztcbiAgfSBlbHNlIHtcbiAgICBoYXNUcmFpbGluZ1NsYXNoID0gZmFsc2U7XG4gIH1cblxuICB2YXIgdXAgPSAwO1xuICBmb3IgKHZhciBpID0gZnJvbVBhcnRzLmxlbmd0aDsgaSA+PSAwOyBpLS0pIHtcbiAgICB2YXIgcGFydCA9IGZyb21QYXJ0c1tpXTtcblxuICAgIGlmIChwYXJ0ID09PSAnLicpIHtcbiAgICAgIHNwbGljZU9uZShmcm9tUGFydHMsIGkpO1xuICAgIH0gZWxzZSBpZiAocGFydCA9PT0gJy4uJykge1xuICAgICAgc3BsaWNlT25lKGZyb21QYXJ0cywgaSk7XG4gICAgICB1cCsrO1xuICAgIH0gZWxzZSBpZiAodXApIHtcbiAgICAgIHNwbGljZU9uZShmcm9tUGFydHMsIGkpO1xuICAgICAgdXAtLTtcbiAgICB9XG4gIH1cblxuICBpZiAoIW11c3RFbmRBYnMpIGZvciAoOyB1cC0tOyB1cCkge1xuICAgIGZyb21QYXJ0cy51bnNoaWZ0KCcuLicpO1xuICB9aWYgKG11c3RFbmRBYnMgJiYgZnJvbVBhcnRzWzBdICE9PSAnJyAmJiAoIWZyb21QYXJ0c1swXSB8fCAhaXNBYnNvbHV0ZShmcm9tUGFydHNbMF0pKSkgZnJvbVBhcnRzLnVuc2hpZnQoJycpO1xuXG4gIHZhciByZXN1bHQgPSBmcm9tUGFydHMuam9pbignLycpO1xuXG4gIGlmIChoYXNUcmFpbGluZ1NsYXNoICYmIHJlc3VsdC5zdWJzdHIoLTEpICE9PSAnLycpIHJlc3VsdCArPSAnLyc7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChyZXNvbHZlUGF0aG5hbWUpO1xuXG4vKioqLyB9KVxuXG59LFszMDFdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYWRtaW5iYWNrb2ZmaWNlLmJ1bmRsZS5qcyIsInZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuZnVuY3Rpb24gdmFsdWVFcXVhbChhLCBiKSB7XG4gIGlmIChhID09PSBiKSByZXR1cm4gdHJ1ZTtcblxuICBpZiAoYSA9PSBudWxsIHx8IGIgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChBcnJheS5pc0FycmF5KGEpKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYikgJiYgYS5sZW5ndGggPT09IGIubGVuZ3RoICYmIGEuZXZlcnkoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICByZXR1cm4gdmFsdWVFcXVhbChpdGVtLCBiW2luZGV4XSk7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgYVR5cGUgPSB0eXBlb2YgYSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoYSk7XG4gIHZhciBiVHlwZSA9IHR5cGVvZiBiID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihiKTtcblxuICBpZiAoYVR5cGUgIT09IGJUeXBlKSByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKGFUeXBlID09PSAnb2JqZWN0Jykge1xuICAgIHZhciBhVmFsdWUgPSBhLnZhbHVlT2YoKTtcbiAgICB2YXIgYlZhbHVlID0gYi52YWx1ZU9mKCk7XG5cbiAgICBpZiAoYVZhbHVlICE9PSBhIHx8IGJWYWx1ZSAhPT0gYikgcmV0dXJuIHZhbHVlRXF1YWwoYVZhbHVlLCBiVmFsdWUpO1xuXG4gICAgdmFyIGFLZXlzID0gT2JqZWN0LmtleXMoYSk7XG4gICAgdmFyIGJLZXlzID0gT2JqZWN0LmtleXMoYik7XG5cbiAgICBpZiAoYUtleXMubGVuZ3RoICE9PSBiS2V5cy5sZW5ndGgpIHJldHVybiBmYWxzZTtcblxuICAgIHJldHVybiBhS2V5cy5ldmVyeShmdW5jdGlvbiAoa2V5KSB7XG4gICAgICByZXR1cm4gdmFsdWVFcXVhbChhW2tleV0sIGJba2V5XSk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHZhbHVlRXF1YWw7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3ZhbHVlLWVxdWFsL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxMDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YnKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2syID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrJyk7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTtcblxudmFyIF9jcmVhdGVDbGFzczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MnKTtcblxudmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4nKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblxudmFyIF9pbmhlcml0czIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMnKTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG52YXIgX3NpbXBsZUFzc2lnbiA9IHJlcXVpcmUoJ3NpbXBsZS1hc3NpZ24nKTtcblxudmFyIF9zaW1wbGVBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2ltcGxlQXNzaWduKTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxudmFyIF9QYXBlciA9IHJlcXVpcmUoJy4uL1BhcGVyJyk7XG5cbnZhciBfUGFwZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUGFwZXIpO1xuXG52YXIgX3RyYW5zaXRpb25zID0gcmVxdWlyZSgnLi4vc3R5bGVzL3RyYW5zaXRpb25zJyk7XG5cbnZhciBfdHJhbnNpdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHJhbnNpdGlvbnMpO1xuXG52YXIgX3Byb3BUeXBlczMgPSByZXF1aXJlKCcuLi91dGlscy9wcm9wVHlwZXMnKTtcblxudmFyIF9wcm9wVHlwZXM0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzMyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGdldFN0eWxlcyhwcm9wcywgY29udGV4dCwgc3RhdGUpIHtcbiAgdmFyIHRhcmdldE9yaWdpbiA9IHByb3BzLnRhcmdldE9yaWdpbjtcbiAgdmFyIG9wZW4gPSBzdGF0ZS5vcGVuO1xuICB2YXIgbXVpVGhlbWUgPSBjb250ZXh0Lm11aVRoZW1lO1xuXG4gIHZhciBob3Jpem9udGFsID0gdGFyZ2V0T3JpZ2luLmhvcml6b250YWwucmVwbGFjZSgnbWlkZGxlJywgJ3ZlcnRpY2FsJyk7XG5cbiAgcmV0dXJuIHtcbiAgICByb290OiB7XG4gICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAgIHpJbmRleDogbXVpVGhlbWUuekluZGV4LnBvcG92ZXIsXG4gICAgICBvcGFjaXR5OiBvcGVuID8gMSA6IDAsXG4gICAgICB0cmFuc2Zvcm06IG9wZW4gPyAnc2NhbGVZKDEpJyA6ICdzY2FsZVkoMCknLFxuICAgICAgdHJhbnNmb3JtT3JpZ2luOiBob3Jpem9udGFsICsgJyAnICsgdGFyZ2V0T3JpZ2luLnZlcnRpY2FsLFxuICAgICAgdHJhbnNpdGlvbjogX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoJzQ1MG1zJywgWyd0cmFuc2Zvcm0nLCAnb3BhY2l0eSddKSxcbiAgICAgIG1heEhlaWdodDogJzEwMCUnXG4gICAgfVxuICB9O1xufVxuXG52YXIgUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBQb3BvdmVyQW5pbWF0aW9uVmVydGljYWwoKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoX3JlZiA9IFBvcG92ZXJBbmltYXRpb25WZXJ0aWNhbC5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsKSkuY2FsbC5hcHBseShfcmVmLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBvcGVuOiBmYWxzZVxuICAgIH0sIF90ZW1wKSwgKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KShfdGhpcywgX3JldCk7XG4gIH1cblxuICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShQb3BvdmVyQW5pbWF0aW9uVmVydGljYWwsIFt7XG4gICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBvcGVuOiB0cnVlIH0pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHJlYWN0L25vLWRpZC1tb3VudC1zZXQtc3RhdGVcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBvcGVuOiBuZXh0UHJvcHMub3BlblxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgY2xhc3NOYW1lID0gX3Byb3BzLmNsYXNzTmFtZSxcbiAgICAgICAgICBzdHlsZSA9IF9wcm9wcy5zdHlsZSxcbiAgICAgICAgICB6RGVwdGggPSBfcHJvcHMuekRlcHRoO1xuXG5cbiAgICAgIHZhciBzdHlsZXMgPSBnZXRTdHlsZXModGhpcy5wcm9wcywgdGhpcy5jb250ZXh0LCB0aGlzLnN0YXRlKTtcblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICBfUGFwZXIyLmRlZmF1bHQsXG4gICAgICAgIHtcbiAgICAgICAgICBzdHlsZTogKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5yb290LCBzdHlsZSksXG4gICAgICAgICAgekRlcHRoOiB6RGVwdGgsXG4gICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVcbiAgICAgICAgfSxcbiAgICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlblxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIFBvcG92ZXJBbmltYXRpb25WZXJ0aWNhbDtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cblBvcG92ZXJBbmltYXRpb25WZXJ0aWNhbC5kZWZhdWx0UHJvcHMgPSB7XG4gIHN0eWxlOiB7fSxcbiAgekRlcHRoOiAxXG59O1xuUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsLmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5Qb3BvdmVyQW5pbWF0aW9uVmVydGljYWwucHJvcFR5cGVzID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8ge1xuICBjaGlsZHJlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICBjbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBvcGVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wuaXNSZXF1aXJlZCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIHRhcmdldE9yaWdpbjogX3Byb3BUeXBlczQuZGVmYXVsdC5vcmlnaW4uaXNSZXF1aXJlZCxcbiAgekRlcHRoOiBfcHJvcFR5cGVzNC5kZWZhdWx0LnpEZXB0aFxufSA6IHt9O1xuZXhwb3J0cy5kZWZhdWx0ID0gUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9Qb3BvdmVyL1BvcG92ZXJBbmltYXRpb25WZXJ0aWNhbC5qc1xuLy8gbW9kdWxlIGlkID0gMTA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAyIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gZXhwb3J0cy5NZW51SXRlbSA9IGV4cG9ydHMuRHJvcERvd25NZW51ID0gdW5kZWZpbmVkO1xuXG52YXIgX0Ryb3BEb3duTWVudTIgPSByZXF1aXJlKCcuL0Ryb3BEb3duTWVudScpO1xuXG52YXIgX0Ryb3BEb3duTWVudTMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Ecm9wRG93bk1lbnUyKTtcblxudmFyIF9NZW51SXRlbTIgPSByZXF1aXJlKCcuLi9NZW51SXRlbS9NZW51SXRlbScpO1xuXG52YXIgX01lbnVJdGVtMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX01lbnVJdGVtMik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuRHJvcERvd25NZW51ID0gX0Ryb3BEb3duTWVudTMuZGVmYXVsdDtcbmV4cG9ydHMuTWVudUl0ZW0gPSBfTWVudUl0ZW0zLmRlZmF1bHQ7XG5leHBvcnRzLmRlZmF1bHQgPSBfRHJvcERvd25NZW51My5kZWZhdWx0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9Ecm9wRG93bk1lbnUvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDExNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMiIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX3dhcm5pbmcgPSByZXF1aXJlKCd3YXJuaW5nJyk7XG5cbnZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblxudmFyIF9pbnZhcmlhbnQgPSByZXF1aXJlKCdpbnZhcmlhbnQnKTtcblxudmFyIF9pbnZhcmlhbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW52YXJpYW50KTtcblxudmFyIF9Mb2NhdGlvblV0aWxzID0gcmVxdWlyZSgnLi9Mb2NhdGlvblV0aWxzJyk7XG5cbnZhciBfUGF0aFV0aWxzID0gcmVxdWlyZSgnLi9QYXRoVXRpbHMnKTtcblxudmFyIF9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlciA9IHJlcXVpcmUoJy4vY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXInKTtcblxudmFyIF9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcik7XG5cbnZhciBfRE9NVXRpbHMgPSByZXF1aXJlKCcuL0RPTVV0aWxzJyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBQb3BTdGF0ZUV2ZW50ID0gJ3BvcHN0YXRlJztcbnZhciBIYXNoQ2hhbmdlRXZlbnQgPSAnaGFzaGNoYW5nZSc7XG5cbnZhciBnZXRIaXN0b3J5U3RhdGUgPSBmdW5jdGlvbiBnZXRIaXN0b3J5U3RhdGUoKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHdpbmRvdy5oaXN0b3J5LnN0YXRlIHx8IHt9O1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gSUUgMTEgc29tZXRpbWVzIHRocm93cyB3aGVuIGFjY2Vzc2luZyB3aW5kb3cuaGlzdG9yeS5zdGF0ZVxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vUmVhY3RUcmFpbmluZy9oaXN0b3J5L3B1bGwvMjg5XG4gICAgcmV0dXJuIHt9O1xuICB9XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBoaXN0b3J5IG9iamVjdCB0aGF0IHVzZXMgdGhlIEhUTUw1IGhpc3RvcnkgQVBJIGluY2x1ZGluZ1xuICogcHVzaFN0YXRlLCByZXBsYWNlU3RhdGUsIGFuZCB0aGUgcG9wc3RhdGUgZXZlbnQuXG4gKi9cbnZhciBjcmVhdGVCcm93c2VySGlzdG9yeSA9IGZ1bmN0aW9uIGNyZWF0ZUJyb3dzZXJIaXN0b3J5KCkge1xuICB2YXIgcHJvcHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gICgwLCBfaW52YXJpYW50Mi5kZWZhdWx0KShfRE9NVXRpbHMuY2FuVXNlRE9NLCAnQnJvd3NlciBoaXN0b3J5IG5lZWRzIGEgRE9NJyk7XG5cbiAgdmFyIGdsb2JhbEhpc3RvcnkgPSB3aW5kb3cuaGlzdG9yeTtcbiAgdmFyIGNhblVzZUhpc3RvcnkgPSAoMCwgX0RPTVV0aWxzLnN1cHBvcnRzSGlzdG9yeSkoKTtcbiAgdmFyIG5lZWRzSGFzaENoYW5nZUxpc3RlbmVyID0gISgwLCBfRE9NVXRpbHMuc3VwcG9ydHNQb3BTdGF0ZU9uSGFzaENoYW5nZSkoKTtcblxuICB2YXIgX3Byb3BzJGZvcmNlUmVmcmVzaCA9IHByb3BzLmZvcmNlUmVmcmVzaCxcbiAgICAgIGZvcmNlUmVmcmVzaCA9IF9wcm9wcyRmb3JjZVJlZnJlc2ggPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3Byb3BzJGZvcmNlUmVmcmVzaCxcbiAgICAgIF9wcm9wcyRnZXRVc2VyQ29uZmlybSA9IHByb3BzLmdldFVzZXJDb25maXJtYXRpb24sXG4gICAgICBnZXRVc2VyQ29uZmlybWF0aW9uID0gX3Byb3BzJGdldFVzZXJDb25maXJtID09PSB1bmRlZmluZWQgPyBfRE9NVXRpbHMuZ2V0Q29uZmlybWF0aW9uIDogX3Byb3BzJGdldFVzZXJDb25maXJtLFxuICAgICAgX3Byb3BzJGtleUxlbmd0aCA9IHByb3BzLmtleUxlbmd0aCxcbiAgICAgIGtleUxlbmd0aCA9IF9wcm9wcyRrZXlMZW5ndGggPT09IHVuZGVmaW5lZCA/IDYgOiBfcHJvcHMka2V5TGVuZ3RoO1xuXG4gIHZhciBiYXNlbmFtZSA9IHByb3BzLmJhc2VuYW1lID8gKDAsIF9QYXRoVXRpbHMuc3RyaXBUcmFpbGluZ1NsYXNoKSgoMCwgX1BhdGhVdGlscy5hZGRMZWFkaW5nU2xhc2gpKHByb3BzLmJhc2VuYW1lKSkgOiAnJztcblxuICB2YXIgZ2V0RE9NTG9jYXRpb24gPSBmdW5jdGlvbiBnZXRET01Mb2NhdGlvbihoaXN0b3J5U3RhdGUpIHtcbiAgICB2YXIgX3JlZiA9IGhpc3RvcnlTdGF0ZSB8fCB7fSxcbiAgICAgICAga2V5ID0gX3JlZi5rZXksXG4gICAgICAgIHN0YXRlID0gX3JlZi5zdGF0ZTtcblxuICAgIHZhciBfd2luZG93JGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLFxuICAgICAgICBwYXRobmFtZSA9IF93aW5kb3ckbG9jYXRpb24ucGF0aG5hbWUsXG4gICAgICAgIHNlYXJjaCA9IF93aW5kb3ckbG9jYXRpb24uc2VhcmNoLFxuICAgICAgICBoYXNoID0gX3dpbmRvdyRsb2NhdGlvbi5oYXNoO1xuXG5cbiAgICB2YXIgcGF0aCA9IHBhdGhuYW1lICsgc2VhcmNoICsgaGFzaDtcblxuICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkoIWJhc2VuYW1lIHx8ICgwLCBfUGF0aFV0aWxzLmhhc0Jhc2VuYW1lKShwYXRoLCBiYXNlbmFtZSksICdZb3UgYXJlIGF0dGVtcHRpbmcgdG8gdXNlIGEgYmFzZW5hbWUgb24gYSBwYWdlIHdob3NlIFVSTCBwYXRoIGRvZXMgbm90IGJlZ2luICcgKyAnd2l0aCB0aGUgYmFzZW5hbWUuIEV4cGVjdGVkIHBhdGggXCInICsgcGF0aCArICdcIiB0byBiZWdpbiB3aXRoIFwiJyArIGJhc2VuYW1lICsgJ1wiLicpO1xuXG4gICAgaWYgKGJhc2VuYW1lKSBwYXRoID0gKDAsIF9QYXRoVXRpbHMuc3RyaXBCYXNlbmFtZSkocGF0aCwgYmFzZW5hbWUpO1xuXG4gICAgcmV0dXJuICgwLCBfTG9jYXRpb25VdGlscy5jcmVhdGVMb2NhdGlvbikocGF0aCwgc3RhdGUsIGtleSk7XG4gIH07XG5cbiAgdmFyIGNyZWF0ZUtleSA9IGZ1bmN0aW9uIGNyZWF0ZUtleSgpIHtcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIGtleUxlbmd0aCk7XG4gIH07XG5cbiAgdmFyIHRyYW5zaXRpb25NYW5hZ2VyID0gKDAsIF9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcjIuZGVmYXVsdCkoKTtcblxuICB2YXIgc2V0U3RhdGUgPSBmdW5jdGlvbiBzZXRTdGF0ZShuZXh0U3RhdGUpIHtcbiAgICBfZXh0ZW5kcyhoaXN0b3J5LCBuZXh0U3RhdGUpO1xuXG4gICAgaGlzdG9yeS5sZW5ndGggPSBnbG9iYWxIaXN0b3J5Lmxlbmd0aDtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLm5vdGlmeUxpc3RlbmVycyhoaXN0b3J5LmxvY2F0aW9uLCBoaXN0b3J5LmFjdGlvbik7XG4gIH07XG5cbiAgdmFyIGhhbmRsZVBvcFN0YXRlID0gZnVuY3Rpb24gaGFuZGxlUG9wU3RhdGUoZXZlbnQpIHtcbiAgICAvLyBJZ25vcmUgZXh0cmFuZW91cyBwb3BzdGF0ZSBldmVudHMgaW4gV2ViS2l0LlxuICAgIGlmICgoMCwgX0RPTVV0aWxzLmlzRXh0cmFuZW91c1BvcHN0YXRlRXZlbnQpKGV2ZW50KSkgcmV0dXJuO1xuXG4gICAgaGFuZGxlUG9wKGdldERPTUxvY2F0aW9uKGV2ZW50LnN0YXRlKSk7XG4gIH07XG5cbiAgdmFyIGhhbmRsZUhhc2hDaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVIYXNoQ2hhbmdlKCkge1xuICAgIGhhbmRsZVBvcChnZXRET01Mb2NhdGlvbihnZXRIaXN0b3J5U3RhdGUoKSkpO1xuICB9O1xuXG4gIHZhciBmb3JjZU5leHRQb3AgPSBmYWxzZTtcblxuICB2YXIgaGFuZGxlUG9wID0gZnVuY3Rpb24gaGFuZGxlUG9wKGxvY2F0aW9uKSB7XG4gICAgaWYgKGZvcmNlTmV4dFBvcCkge1xuICAgICAgZm9yY2VOZXh0UG9wID0gZmFsc2U7XG4gICAgICBzZXRTdGF0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYWN0aW9uID0gJ1BPUCc7XG5cbiAgICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICAgIGlmIChvaykge1xuICAgICAgICAgIHNldFN0YXRlKHsgYWN0aW9uOiBhY3Rpb24sIGxvY2F0aW9uOiBsb2NhdGlvbiB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXZlcnRQb3AobG9jYXRpb24pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHJldmVydFBvcCA9IGZ1bmN0aW9uIHJldmVydFBvcChmcm9tTG9jYXRpb24pIHtcbiAgICB2YXIgdG9Mb2NhdGlvbiA9IGhpc3RvcnkubG9jYXRpb247XG5cbiAgICAvLyBUT0RPOiBXZSBjb3VsZCBwcm9iYWJseSBtYWtlIHRoaXMgbW9yZSByZWxpYWJsZSBieVxuICAgIC8vIGtlZXBpbmcgYSBsaXN0IG9mIGtleXMgd2UndmUgc2VlbiBpbiBzZXNzaW9uU3RvcmFnZS5cbiAgICAvLyBJbnN0ZWFkLCB3ZSBqdXN0IGRlZmF1bHQgdG8gMCBmb3Iga2V5cyB3ZSBkb24ndCBrbm93LlxuXG4gICAgdmFyIHRvSW5kZXggPSBhbGxLZXlzLmluZGV4T2YodG9Mb2NhdGlvbi5rZXkpO1xuXG4gICAgaWYgKHRvSW5kZXggPT09IC0xKSB0b0luZGV4ID0gMDtcblxuICAgIHZhciBmcm9tSW5kZXggPSBhbGxLZXlzLmluZGV4T2YoZnJvbUxvY2F0aW9uLmtleSk7XG5cbiAgICBpZiAoZnJvbUluZGV4ID09PSAtMSkgZnJvbUluZGV4ID0gMDtcblxuICAgIHZhciBkZWx0YSA9IHRvSW5kZXggLSBmcm9tSW5kZXg7XG5cbiAgICBpZiAoZGVsdGEpIHtcbiAgICAgIGZvcmNlTmV4dFBvcCA9IHRydWU7XG4gICAgICBnbyhkZWx0YSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBpbml0aWFsTG9jYXRpb24gPSBnZXRET01Mb2NhdGlvbihnZXRIaXN0b3J5U3RhdGUoKSk7XG4gIHZhciBhbGxLZXlzID0gW2luaXRpYWxMb2NhdGlvbi5rZXldO1xuXG4gIC8vIFB1YmxpYyBpbnRlcmZhY2VcblxuICB2YXIgY3JlYXRlSHJlZiA9IGZ1bmN0aW9uIGNyZWF0ZUhyZWYobG9jYXRpb24pIHtcbiAgICByZXR1cm4gYmFzZW5hbWUgKyAoMCwgX1BhdGhVdGlscy5jcmVhdGVQYXRoKShsb2NhdGlvbik7XG4gIH07XG5cbiAgdmFyIHB1c2ggPSBmdW5jdGlvbiBwdXNoKHBhdGgsIHN0YXRlKSB7XG4gICAgKDAsIF93YXJuaW5nMi5kZWZhdWx0KSghKCh0eXBlb2YgcGF0aCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YocGF0aCkpID09PSAnb2JqZWN0JyAmJiBwYXRoLnN0YXRlICE9PSB1bmRlZmluZWQgJiYgc3RhdGUgIT09IHVuZGVmaW5lZCksICdZb3Ugc2hvdWxkIGF2b2lkIHByb3ZpZGluZyBhIDJuZCBzdGF0ZSBhcmd1bWVudCB0byBwdXNoIHdoZW4gdGhlIDFzdCAnICsgJ2FyZ3VtZW50IGlzIGEgbG9jYXRpb24tbGlrZSBvYmplY3QgdGhhdCBhbHJlYWR5IGhhcyBzdGF0ZTsgaXQgaXMgaWdub3JlZCcpO1xuXG4gICAgdmFyIGFjdGlvbiA9ICdQVVNIJztcbiAgICB2YXIgbG9jYXRpb24gPSAoMCwgX0xvY2F0aW9uVXRpbHMuY3JlYXRlTG9jYXRpb24pKHBhdGgsIHN0YXRlLCBjcmVhdGVLZXkoKSwgaGlzdG9yeS5sb2NhdGlvbik7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKCFvaykgcmV0dXJuO1xuXG4gICAgICB2YXIgaHJlZiA9IGNyZWF0ZUhyZWYobG9jYXRpb24pO1xuICAgICAgdmFyIGtleSA9IGxvY2F0aW9uLmtleSxcbiAgICAgICAgICBzdGF0ZSA9IGxvY2F0aW9uLnN0YXRlO1xuXG5cbiAgICAgIGlmIChjYW5Vc2VIaXN0b3J5KSB7XG4gICAgICAgIGdsb2JhbEhpc3RvcnkucHVzaFN0YXRlKHsga2V5OiBrZXksIHN0YXRlOiBzdGF0ZSB9LCBudWxsLCBocmVmKTtcblxuICAgICAgICBpZiAoZm9yY2VSZWZyZXNoKSB7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBocmVmO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBwcmV2SW5kZXggPSBhbGxLZXlzLmluZGV4T2YoaGlzdG9yeS5sb2NhdGlvbi5rZXkpO1xuICAgICAgICAgIHZhciBuZXh0S2V5cyA9IGFsbEtleXMuc2xpY2UoMCwgcHJldkluZGV4ID09PSAtMSA/IDAgOiBwcmV2SW5kZXggKyAxKTtcblxuICAgICAgICAgIG5leHRLZXlzLnB1c2gobG9jYXRpb24ua2V5KTtcbiAgICAgICAgICBhbGxLZXlzID0gbmV4dEtleXM7XG5cbiAgICAgICAgICBzZXRTdGF0ZSh7IGFjdGlvbjogYWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24gfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkoc3RhdGUgPT09IHVuZGVmaW5lZCwgJ0Jyb3dzZXIgaGlzdG9yeSBjYW5ub3QgcHVzaCBzdGF0ZSBpbiBicm93c2VycyB0aGF0IGRvIG5vdCBzdXBwb3J0IEhUTUw1IGhpc3RvcnknKTtcblxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhyZWY7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIHJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlKHBhdGgsIHN0YXRlKSB7XG4gICAgKDAsIF93YXJuaW5nMi5kZWZhdWx0KSghKCh0eXBlb2YgcGF0aCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YocGF0aCkpID09PSAnb2JqZWN0JyAmJiBwYXRoLnN0YXRlICE9PSB1bmRlZmluZWQgJiYgc3RhdGUgIT09IHVuZGVmaW5lZCksICdZb3Ugc2hvdWxkIGF2b2lkIHByb3ZpZGluZyBhIDJuZCBzdGF0ZSBhcmd1bWVudCB0byByZXBsYWNlIHdoZW4gdGhlIDFzdCAnICsgJ2FyZ3VtZW50IGlzIGEgbG9jYXRpb24tbGlrZSBvYmplY3QgdGhhdCBhbHJlYWR5IGhhcyBzdGF0ZTsgaXQgaXMgaWdub3JlZCcpO1xuXG4gICAgdmFyIGFjdGlvbiA9ICdSRVBMQUNFJztcbiAgICB2YXIgbG9jYXRpb24gPSAoMCwgX0xvY2F0aW9uVXRpbHMuY3JlYXRlTG9jYXRpb24pKHBhdGgsIHN0YXRlLCBjcmVhdGVLZXkoKSwgaGlzdG9yeS5sb2NhdGlvbik7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKCFvaykgcmV0dXJuO1xuXG4gICAgICB2YXIgaHJlZiA9IGNyZWF0ZUhyZWYobG9jYXRpb24pO1xuICAgICAgdmFyIGtleSA9IGxvY2F0aW9uLmtleSxcbiAgICAgICAgICBzdGF0ZSA9IGxvY2F0aW9uLnN0YXRlO1xuXG5cbiAgICAgIGlmIChjYW5Vc2VIaXN0b3J5KSB7XG4gICAgICAgIGdsb2JhbEhpc3RvcnkucmVwbGFjZVN0YXRlKHsga2V5OiBrZXksIHN0YXRlOiBzdGF0ZSB9LCBudWxsLCBocmVmKTtcblxuICAgICAgICBpZiAoZm9yY2VSZWZyZXNoKSB7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoaHJlZik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHByZXZJbmRleCA9IGFsbEtleXMuaW5kZXhPZihoaXN0b3J5LmxvY2F0aW9uLmtleSk7XG5cbiAgICAgICAgICBpZiAocHJldkluZGV4ICE9PSAtMSkgYWxsS2V5c1twcmV2SW5kZXhdID0gbG9jYXRpb24ua2V5O1xuXG4gICAgICAgICAgc2V0U3RhdGUoeyBhY3Rpb246IGFjdGlvbiwgbG9jYXRpb246IGxvY2F0aW9uIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKHN0YXRlID09PSB1bmRlZmluZWQsICdCcm93c2VyIGhpc3RvcnkgY2Fubm90IHJlcGxhY2Ugc3RhdGUgaW4gYnJvd3NlcnMgdGhhdCBkbyBub3Qgc3VwcG9ydCBIVE1MNSBoaXN0b3J5Jyk7XG5cbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoaHJlZik7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdvID0gZnVuY3Rpb24gZ28obikge1xuICAgIGdsb2JhbEhpc3RvcnkuZ28obik7XG4gIH07XG5cbiAgdmFyIGdvQmFjayA9IGZ1bmN0aW9uIGdvQmFjaygpIHtcbiAgICByZXR1cm4gZ28oLTEpO1xuICB9O1xuXG4gIHZhciBnb0ZvcndhcmQgPSBmdW5jdGlvbiBnb0ZvcndhcmQoKSB7XG4gICAgcmV0dXJuIGdvKDEpO1xuICB9O1xuXG4gIHZhciBsaXN0ZW5lckNvdW50ID0gMDtcblxuICB2YXIgY2hlY2tET01MaXN0ZW5lcnMgPSBmdW5jdGlvbiBjaGVja0RPTUxpc3RlbmVycyhkZWx0YSkge1xuICAgIGxpc3RlbmVyQ291bnQgKz0gZGVsdGE7XG5cbiAgICBpZiAobGlzdGVuZXJDb3VudCA9PT0gMSkge1xuICAgICAgKDAsIF9ET01VdGlscy5hZGRFdmVudExpc3RlbmVyKSh3aW5kb3csIFBvcFN0YXRlRXZlbnQsIGhhbmRsZVBvcFN0YXRlKTtcblxuICAgICAgaWYgKG5lZWRzSGFzaENoYW5nZUxpc3RlbmVyKSAoMCwgX0RPTVV0aWxzLmFkZEV2ZW50TGlzdGVuZXIpKHdpbmRvdywgSGFzaENoYW5nZUV2ZW50LCBoYW5kbGVIYXNoQ2hhbmdlKTtcbiAgICB9IGVsc2UgaWYgKGxpc3RlbmVyQ291bnQgPT09IDApIHtcbiAgICAgICgwLCBfRE9NVXRpbHMucmVtb3ZlRXZlbnRMaXN0ZW5lcikod2luZG93LCBQb3BTdGF0ZUV2ZW50LCBoYW5kbGVQb3BTdGF0ZSk7XG5cbiAgICAgIGlmIChuZWVkc0hhc2hDaGFuZ2VMaXN0ZW5lcikgKDAsIF9ET01VdGlscy5yZW1vdmVFdmVudExpc3RlbmVyKSh3aW5kb3csIEhhc2hDaGFuZ2VFdmVudCwgaGFuZGxlSGFzaENoYW5nZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBpc0Jsb2NrZWQgPSBmYWxzZTtcblxuICB2YXIgYmxvY2sgPSBmdW5jdGlvbiBibG9jaygpIHtcbiAgICB2YXIgcHJvbXB0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmYWxzZTtcblxuICAgIHZhciB1bmJsb2NrID0gdHJhbnNpdGlvbk1hbmFnZXIuc2V0UHJvbXB0KHByb21wdCk7XG5cbiAgICBpZiAoIWlzQmxvY2tlZCkge1xuICAgICAgY2hlY2tET01MaXN0ZW5lcnMoMSk7XG4gICAgICBpc0Jsb2NrZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaXNCbG9ja2VkKSB7XG4gICAgICAgIGlzQmxvY2tlZCA9IGZhbHNlO1xuICAgICAgICBjaGVja0RPTUxpc3RlbmVycygtMSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bmJsb2NrKCk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgbGlzdGVuID0gZnVuY3Rpb24gbGlzdGVuKGxpc3RlbmVyKSB7XG4gICAgdmFyIHVubGlzdGVuID0gdHJhbnNpdGlvbk1hbmFnZXIuYXBwZW5kTGlzdGVuZXIobGlzdGVuZXIpO1xuICAgIGNoZWNrRE9NTGlzdGVuZXJzKDEpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrRE9NTGlzdGVuZXJzKC0xKTtcbiAgICAgIHVubGlzdGVuKCk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgaGlzdG9yeSA9IHtcbiAgICBsZW5ndGg6IGdsb2JhbEhpc3RvcnkubGVuZ3RoLFxuICAgIGFjdGlvbjogJ1BPUCcsXG4gICAgbG9jYXRpb246IGluaXRpYWxMb2NhdGlvbixcbiAgICBjcmVhdGVIcmVmOiBjcmVhdGVIcmVmLFxuICAgIHB1c2g6IHB1c2gsXG4gICAgcmVwbGFjZTogcmVwbGFjZSxcbiAgICBnbzogZ28sXG4gICAgZ29CYWNrOiBnb0JhY2ssXG4gICAgZ29Gb3J3YXJkOiBnb0ZvcndhcmQsXG4gICAgYmxvY2s6IGJsb2NrLFxuICAgIGxpc3RlbjogbGlzdGVuXG4gIH07XG5cbiAgcmV0dXJuIGhpc3Rvcnk7XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBjcmVhdGVCcm93c2VySGlzdG9yeTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vaGlzdG9yeS9jcmVhdGVCcm93c2VySGlzdG9yeS5qc1xuLy8gbW9kdWxlIGlkID0gMTM1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX3dhcm5pbmcgPSByZXF1aXJlKCd3YXJuaW5nJyk7XG5cbnZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblxudmFyIF9pbnZhcmlhbnQgPSByZXF1aXJlKCdpbnZhcmlhbnQnKTtcblxudmFyIF9pbnZhcmlhbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW52YXJpYW50KTtcblxudmFyIF9Mb2NhdGlvblV0aWxzID0gcmVxdWlyZSgnLi9Mb2NhdGlvblV0aWxzJyk7XG5cbnZhciBfUGF0aFV0aWxzID0gcmVxdWlyZSgnLi9QYXRoVXRpbHMnKTtcblxudmFyIF9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlciA9IHJlcXVpcmUoJy4vY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXInKTtcblxudmFyIF9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcik7XG5cbnZhciBfRE9NVXRpbHMgPSByZXF1aXJlKCcuL0RPTVV0aWxzJyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBIYXNoQ2hhbmdlRXZlbnQgPSAnaGFzaGNoYW5nZSc7XG5cbnZhciBIYXNoUGF0aENvZGVycyA9IHtcbiAgaGFzaGJhbmc6IHtcbiAgICBlbmNvZGVQYXRoOiBmdW5jdGlvbiBlbmNvZGVQYXRoKHBhdGgpIHtcbiAgICAgIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJyEnID8gcGF0aCA6ICchLycgKyAoMCwgX1BhdGhVdGlscy5zdHJpcExlYWRpbmdTbGFzaCkocGF0aCk7XG4gICAgfSxcbiAgICBkZWNvZGVQYXRoOiBmdW5jdGlvbiBkZWNvZGVQYXRoKHBhdGgpIHtcbiAgICAgIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJyEnID8gcGF0aC5zdWJzdHIoMSkgOiBwYXRoO1xuICAgIH1cbiAgfSxcbiAgbm9zbGFzaDoge1xuICAgIGVuY29kZVBhdGg6IF9QYXRoVXRpbHMuc3RyaXBMZWFkaW5nU2xhc2gsXG4gICAgZGVjb2RlUGF0aDogX1BhdGhVdGlscy5hZGRMZWFkaW5nU2xhc2hcbiAgfSxcbiAgc2xhc2g6IHtcbiAgICBlbmNvZGVQYXRoOiBfUGF0aFV0aWxzLmFkZExlYWRpbmdTbGFzaCxcbiAgICBkZWNvZGVQYXRoOiBfUGF0aFV0aWxzLmFkZExlYWRpbmdTbGFzaFxuICB9XG59O1xuXG52YXIgZ2V0SGFzaFBhdGggPSBmdW5jdGlvbiBnZXRIYXNoUGF0aCgpIHtcbiAgLy8gV2UgY2FuJ3QgdXNlIHdpbmRvdy5sb2NhdGlvbi5oYXNoIGhlcmUgYmVjYXVzZSBpdCdzIG5vdFxuICAvLyBjb25zaXN0ZW50IGFjcm9zcyBicm93c2VycyAtIEZpcmVmb3ggd2lsbCBwcmUtZGVjb2RlIGl0IVxuICB2YXIgaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICB2YXIgaGFzaEluZGV4ID0gaHJlZi5pbmRleE9mKCcjJyk7XG4gIHJldHVybiBoYXNoSW5kZXggPT09IC0xID8gJycgOiBocmVmLnN1YnN0cmluZyhoYXNoSW5kZXggKyAxKTtcbn07XG5cbnZhciBwdXNoSGFzaFBhdGggPSBmdW5jdGlvbiBwdXNoSGFzaFBhdGgocGF0aCkge1xuICByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhhc2ggPSBwYXRoO1xufTtcblxudmFyIHJlcGxhY2VIYXNoUGF0aCA9IGZ1bmN0aW9uIHJlcGxhY2VIYXNoUGF0aChwYXRoKSB7XG4gIHZhciBoYXNoSW5kZXggPSB3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCcjJyk7XG5cbiAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2Uod2luZG93LmxvY2F0aW9uLmhyZWYuc2xpY2UoMCwgaGFzaEluZGV4ID49IDAgPyBoYXNoSW5kZXggOiAwKSArICcjJyArIHBhdGgpO1xufTtcblxudmFyIGNyZWF0ZUhhc2hIaXN0b3J5ID0gZnVuY3Rpb24gY3JlYXRlSGFzaEhpc3RvcnkoKSB7XG4gIHZhciBwcm9wcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgKDAsIF9pbnZhcmlhbnQyLmRlZmF1bHQpKF9ET01VdGlscy5jYW5Vc2VET00sICdIYXNoIGhpc3RvcnkgbmVlZHMgYSBET00nKTtcblxuICB2YXIgZ2xvYmFsSGlzdG9yeSA9IHdpbmRvdy5oaXN0b3J5O1xuICB2YXIgY2FuR29XaXRob3V0UmVsb2FkID0gKDAsIF9ET01VdGlscy5zdXBwb3J0c0dvV2l0aG91dFJlbG9hZFVzaW5nSGFzaCkoKTtcblxuICB2YXIgX3Byb3BzJGdldFVzZXJDb25maXJtID0gcHJvcHMuZ2V0VXNlckNvbmZpcm1hdGlvbixcbiAgICAgIGdldFVzZXJDb25maXJtYXRpb24gPSBfcHJvcHMkZ2V0VXNlckNvbmZpcm0gPT09IHVuZGVmaW5lZCA/IF9ET01VdGlscy5nZXRDb25maXJtYXRpb24gOiBfcHJvcHMkZ2V0VXNlckNvbmZpcm0sXG4gICAgICBfcHJvcHMkaGFzaFR5cGUgPSBwcm9wcy5oYXNoVHlwZSxcbiAgICAgIGhhc2hUeXBlID0gX3Byb3BzJGhhc2hUeXBlID09PSB1bmRlZmluZWQgPyAnc2xhc2gnIDogX3Byb3BzJGhhc2hUeXBlO1xuXG4gIHZhciBiYXNlbmFtZSA9IHByb3BzLmJhc2VuYW1lID8gKDAsIF9QYXRoVXRpbHMuc3RyaXBUcmFpbGluZ1NsYXNoKSgoMCwgX1BhdGhVdGlscy5hZGRMZWFkaW5nU2xhc2gpKHByb3BzLmJhc2VuYW1lKSkgOiAnJztcblxuICB2YXIgX0hhc2hQYXRoQ29kZXJzJGhhc2hUID0gSGFzaFBhdGhDb2RlcnNbaGFzaFR5cGVdLFxuICAgICAgZW5jb2RlUGF0aCA9IF9IYXNoUGF0aENvZGVycyRoYXNoVC5lbmNvZGVQYXRoLFxuICAgICAgZGVjb2RlUGF0aCA9IF9IYXNoUGF0aENvZGVycyRoYXNoVC5kZWNvZGVQYXRoO1xuXG5cbiAgdmFyIGdldERPTUxvY2F0aW9uID0gZnVuY3Rpb24gZ2V0RE9NTG9jYXRpb24oKSB7XG4gICAgdmFyIHBhdGggPSBkZWNvZGVQYXRoKGdldEhhc2hQYXRoKCkpO1xuXG4gICAgKDAsIF93YXJuaW5nMi5kZWZhdWx0KSghYmFzZW5hbWUgfHwgKDAsIF9QYXRoVXRpbHMuaGFzQmFzZW5hbWUpKHBhdGgsIGJhc2VuYW1lKSwgJ1lvdSBhcmUgYXR0ZW1wdGluZyB0byB1c2UgYSBiYXNlbmFtZSBvbiBhIHBhZ2Ugd2hvc2UgVVJMIHBhdGggZG9lcyBub3QgYmVnaW4gJyArICd3aXRoIHRoZSBiYXNlbmFtZS4gRXhwZWN0ZWQgcGF0aCBcIicgKyBwYXRoICsgJ1wiIHRvIGJlZ2luIHdpdGggXCInICsgYmFzZW5hbWUgKyAnXCIuJyk7XG5cbiAgICBpZiAoYmFzZW5hbWUpIHBhdGggPSAoMCwgX1BhdGhVdGlscy5zdHJpcEJhc2VuYW1lKShwYXRoLCBiYXNlbmFtZSk7XG5cbiAgICByZXR1cm4gKDAsIF9Mb2NhdGlvblV0aWxzLmNyZWF0ZUxvY2F0aW9uKShwYXRoKTtcbiAgfTtcblxuICB2YXIgdHJhbnNpdGlvbk1hbmFnZXIgPSAoMCwgX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyMi5kZWZhdWx0KSgpO1xuXG4gIHZhciBzZXRTdGF0ZSA9IGZ1bmN0aW9uIHNldFN0YXRlKG5leHRTdGF0ZSkge1xuICAgIF9leHRlbmRzKGhpc3RvcnksIG5leHRTdGF0ZSk7XG5cbiAgICBoaXN0b3J5Lmxlbmd0aCA9IGdsb2JhbEhpc3RvcnkubGVuZ3RoO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIubm90aWZ5TGlzdGVuZXJzKGhpc3RvcnkubG9jYXRpb24sIGhpc3RvcnkuYWN0aW9uKTtcbiAgfTtcblxuICB2YXIgZm9yY2VOZXh0UG9wID0gZmFsc2U7XG4gIHZhciBpZ25vcmVQYXRoID0gbnVsbDtcblxuICB2YXIgaGFuZGxlSGFzaENoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZUhhc2hDaGFuZ2UoKSB7XG4gICAgdmFyIHBhdGggPSBnZXRIYXNoUGF0aCgpO1xuICAgIHZhciBlbmNvZGVkUGF0aCA9IGVuY29kZVBhdGgocGF0aCk7XG5cbiAgICBpZiAocGF0aCAhPT0gZW5jb2RlZFBhdGgpIHtcbiAgICAgIC8vIEVuc3VyZSB3ZSBhbHdheXMgaGF2ZSBhIHByb3Blcmx5LWVuY29kZWQgaGFzaC5cbiAgICAgIHJlcGxhY2VIYXNoUGF0aChlbmNvZGVkUGF0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBsb2NhdGlvbiA9IGdldERPTUxvY2F0aW9uKCk7XG4gICAgICB2YXIgcHJldkxvY2F0aW9uID0gaGlzdG9yeS5sb2NhdGlvbjtcblxuICAgICAgaWYgKCFmb3JjZU5leHRQb3AgJiYgKDAsIF9Mb2NhdGlvblV0aWxzLmxvY2F0aW9uc0FyZUVxdWFsKShwcmV2TG9jYXRpb24sIGxvY2F0aW9uKSkgcmV0dXJuOyAvLyBBIGhhc2hjaGFuZ2UgZG9lc24ndCBhbHdheXMgPT0gbG9jYXRpb24gY2hhbmdlLlxuXG4gICAgICBpZiAoaWdub3JlUGF0aCA9PT0gKDAsIF9QYXRoVXRpbHMuY3JlYXRlUGF0aCkobG9jYXRpb24pKSByZXR1cm47IC8vIElnbm9yZSB0aGlzIGNoYW5nZTsgd2UgYWxyZWFkeSBzZXRTdGF0ZSBpbiBwdXNoL3JlcGxhY2UuXG5cbiAgICAgIGlnbm9yZVBhdGggPSBudWxsO1xuXG4gICAgICBoYW5kbGVQb3AobG9jYXRpb24pO1xuICAgIH1cbiAgfTtcblxuICB2YXIgaGFuZGxlUG9wID0gZnVuY3Rpb24gaGFuZGxlUG9wKGxvY2F0aW9uKSB7XG4gICAgaWYgKGZvcmNlTmV4dFBvcCkge1xuICAgICAgZm9yY2VOZXh0UG9wID0gZmFsc2U7XG4gICAgICBzZXRTdGF0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYWN0aW9uID0gJ1BPUCc7XG5cbiAgICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICAgIGlmIChvaykge1xuICAgICAgICAgIHNldFN0YXRlKHsgYWN0aW9uOiBhY3Rpb24sIGxvY2F0aW9uOiBsb2NhdGlvbiB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXZlcnRQb3AobG9jYXRpb24pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHJldmVydFBvcCA9IGZ1bmN0aW9uIHJldmVydFBvcChmcm9tTG9jYXRpb24pIHtcbiAgICB2YXIgdG9Mb2NhdGlvbiA9IGhpc3RvcnkubG9jYXRpb247XG5cbiAgICAvLyBUT0RPOiBXZSBjb3VsZCBwcm9iYWJseSBtYWtlIHRoaXMgbW9yZSByZWxpYWJsZSBieVxuICAgIC8vIGtlZXBpbmcgYSBsaXN0IG9mIHBhdGhzIHdlJ3ZlIHNlZW4gaW4gc2Vzc2lvblN0b3JhZ2UuXG4gICAgLy8gSW5zdGVhZCwgd2UganVzdCBkZWZhdWx0IHRvIDAgZm9yIHBhdGhzIHdlIGRvbid0IGtub3cuXG5cbiAgICB2YXIgdG9JbmRleCA9IGFsbFBhdGhzLmxhc3RJbmRleE9mKCgwLCBfUGF0aFV0aWxzLmNyZWF0ZVBhdGgpKHRvTG9jYXRpb24pKTtcblxuICAgIGlmICh0b0luZGV4ID09PSAtMSkgdG9JbmRleCA9IDA7XG5cbiAgICB2YXIgZnJvbUluZGV4ID0gYWxsUGF0aHMubGFzdEluZGV4T2YoKDAsIF9QYXRoVXRpbHMuY3JlYXRlUGF0aCkoZnJvbUxvY2F0aW9uKSk7XG5cbiAgICBpZiAoZnJvbUluZGV4ID09PSAtMSkgZnJvbUluZGV4ID0gMDtcblxuICAgIHZhciBkZWx0YSA9IHRvSW5kZXggLSBmcm9tSW5kZXg7XG5cbiAgICBpZiAoZGVsdGEpIHtcbiAgICAgIGZvcmNlTmV4dFBvcCA9IHRydWU7XG4gICAgICBnbyhkZWx0YSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEVuc3VyZSB0aGUgaGFzaCBpcyBlbmNvZGVkIHByb3Blcmx5IGJlZm9yZSBkb2luZyBhbnl0aGluZyBlbHNlLlxuICB2YXIgcGF0aCA9IGdldEhhc2hQYXRoKCk7XG4gIHZhciBlbmNvZGVkUGF0aCA9IGVuY29kZVBhdGgocGF0aCk7XG5cbiAgaWYgKHBhdGggIT09IGVuY29kZWRQYXRoKSByZXBsYWNlSGFzaFBhdGgoZW5jb2RlZFBhdGgpO1xuXG4gIHZhciBpbml0aWFsTG9jYXRpb24gPSBnZXRET01Mb2NhdGlvbigpO1xuICB2YXIgYWxsUGF0aHMgPSBbKDAsIF9QYXRoVXRpbHMuY3JlYXRlUGF0aCkoaW5pdGlhbExvY2F0aW9uKV07XG5cbiAgLy8gUHVibGljIGludGVyZmFjZVxuXG4gIHZhciBjcmVhdGVIcmVmID0gZnVuY3Rpb24gY3JlYXRlSHJlZihsb2NhdGlvbikge1xuICAgIHJldHVybiAnIycgKyBlbmNvZGVQYXRoKGJhc2VuYW1lICsgKDAsIF9QYXRoVXRpbHMuY3JlYXRlUGF0aCkobG9jYXRpb24pKTtcbiAgfTtcblxuICB2YXIgcHVzaCA9IGZ1bmN0aW9uIHB1c2gocGF0aCwgc3RhdGUpIHtcbiAgICAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKHN0YXRlID09PSB1bmRlZmluZWQsICdIYXNoIGhpc3RvcnkgY2Fubm90IHB1c2ggc3RhdGU7IGl0IGlzIGlnbm9yZWQnKTtcblxuICAgIHZhciBhY3Rpb24gPSAnUFVTSCc7XG4gICAgdmFyIGxvY2F0aW9uID0gKDAsIF9Mb2NhdGlvblV0aWxzLmNyZWF0ZUxvY2F0aW9uKShwYXRoLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgaGlzdG9yeS5sb2NhdGlvbik7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKCFvaykgcmV0dXJuO1xuXG4gICAgICB2YXIgcGF0aCA9ICgwLCBfUGF0aFV0aWxzLmNyZWF0ZVBhdGgpKGxvY2F0aW9uKTtcbiAgICAgIHZhciBlbmNvZGVkUGF0aCA9IGVuY29kZVBhdGgoYmFzZW5hbWUgKyBwYXRoKTtcbiAgICAgIHZhciBoYXNoQ2hhbmdlZCA9IGdldEhhc2hQYXRoKCkgIT09IGVuY29kZWRQYXRoO1xuXG4gICAgICBpZiAoaGFzaENoYW5nZWQpIHtcbiAgICAgICAgLy8gV2UgY2Fubm90IHRlbGwgaWYgYSBoYXNoY2hhbmdlIHdhcyBjYXVzZWQgYnkgYSBQVVNILCBzbyB3ZSdkXG4gICAgICAgIC8vIHJhdGhlciBzZXRTdGF0ZSBoZXJlIGFuZCBpZ25vcmUgdGhlIGhhc2hjaGFuZ2UuIFRoZSBjYXZlYXQgaGVyZVxuICAgICAgICAvLyBpcyB0aGF0IG90aGVyIGhhc2ggaGlzdG9yaWVzIGluIHRoZSBwYWdlIHdpbGwgY29uc2lkZXIgaXQgYSBQT1AuXG4gICAgICAgIGlnbm9yZVBhdGggPSBwYXRoO1xuICAgICAgICBwdXNoSGFzaFBhdGgoZW5jb2RlZFBhdGgpO1xuXG4gICAgICAgIHZhciBwcmV2SW5kZXggPSBhbGxQYXRocy5sYXN0SW5kZXhPZigoMCwgX1BhdGhVdGlscy5jcmVhdGVQYXRoKShoaXN0b3J5LmxvY2F0aW9uKSk7XG4gICAgICAgIHZhciBuZXh0UGF0aHMgPSBhbGxQYXRocy5zbGljZSgwLCBwcmV2SW5kZXggPT09IC0xID8gMCA6IHByZXZJbmRleCArIDEpO1xuXG4gICAgICAgIG5leHRQYXRocy5wdXNoKHBhdGgpO1xuICAgICAgICBhbGxQYXRocyA9IG5leHRQYXRocztcblxuICAgICAgICBzZXRTdGF0ZSh7IGFjdGlvbjogYWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24gfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKGZhbHNlLCAnSGFzaCBoaXN0b3J5IGNhbm5vdCBQVVNIIHRoZSBzYW1lIHBhdGg7IGEgbmV3IGVudHJ5IHdpbGwgbm90IGJlIGFkZGVkIHRvIHRoZSBoaXN0b3J5IHN0YWNrJyk7XG5cbiAgICAgICAgc2V0U3RhdGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICB2YXIgcmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UocGF0aCwgc3RhdGUpIHtcbiAgICAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKHN0YXRlID09PSB1bmRlZmluZWQsICdIYXNoIGhpc3RvcnkgY2Fubm90IHJlcGxhY2Ugc3RhdGU7IGl0IGlzIGlnbm9yZWQnKTtcblxuICAgIHZhciBhY3Rpb24gPSAnUkVQTEFDRSc7XG4gICAgdmFyIGxvY2F0aW9uID0gKDAsIF9Mb2NhdGlvblV0aWxzLmNyZWF0ZUxvY2F0aW9uKShwYXRoLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgaGlzdG9yeS5sb2NhdGlvbik7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKCFvaykgcmV0dXJuO1xuXG4gICAgICB2YXIgcGF0aCA9ICgwLCBfUGF0aFV0aWxzLmNyZWF0ZVBhdGgpKGxvY2F0aW9uKTtcbiAgICAgIHZhciBlbmNvZGVkUGF0aCA9IGVuY29kZVBhdGgoYmFzZW5hbWUgKyBwYXRoKTtcbiAgICAgIHZhciBoYXNoQ2hhbmdlZCA9IGdldEhhc2hQYXRoKCkgIT09IGVuY29kZWRQYXRoO1xuXG4gICAgICBpZiAoaGFzaENoYW5nZWQpIHtcbiAgICAgICAgLy8gV2UgY2Fubm90IHRlbGwgaWYgYSBoYXNoY2hhbmdlIHdhcyBjYXVzZWQgYnkgYSBSRVBMQUNFLCBzbyB3ZSdkXG4gICAgICAgIC8vIHJhdGhlciBzZXRTdGF0ZSBoZXJlIGFuZCBpZ25vcmUgdGhlIGhhc2hjaGFuZ2UuIFRoZSBjYXZlYXQgaGVyZVxuICAgICAgICAvLyBpcyB0aGF0IG90aGVyIGhhc2ggaGlzdG9yaWVzIGluIHRoZSBwYWdlIHdpbGwgY29uc2lkZXIgaXQgYSBQT1AuXG4gICAgICAgIGlnbm9yZVBhdGggPSBwYXRoO1xuICAgICAgICByZXBsYWNlSGFzaFBhdGgoZW5jb2RlZFBhdGgpO1xuICAgICAgfVxuXG4gICAgICB2YXIgcHJldkluZGV4ID0gYWxsUGF0aHMuaW5kZXhPZigoMCwgX1BhdGhVdGlscy5jcmVhdGVQYXRoKShoaXN0b3J5LmxvY2F0aW9uKSk7XG5cbiAgICAgIGlmIChwcmV2SW5kZXggIT09IC0xKSBhbGxQYXRoc1twcmV2SW5kZXhdID0gcGF0aDtcblxuICAgICAgc2V0U3RhdGUoeyBhY3Rpb246IGFjdGlvbiwgbG9jYXRpb246IGxvY2F0aW9uIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBnbyA9IGZ1bmN0aW9uIGdvKG4pIHtcbiAgICAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKGNhbkdvV2l0aG91dFJlbG9hZCwgJ0hhc2ggaGlzdG9yeSBnbyhuKSBjYXVzZXMgYSBmdWxsIHBhZ2UgcmVsb2FkIGluIHRoaXMgYnJvd3NlcicpO1xuXG4gICAgZ2xvYmFsSGlzdG9yeS5nbyhuKTtcbiAgfTtcblxuICB2YXIgZ29CYWNrID0gZnVuY3Rpb24gZ29CYWNrKCkge1xuICAgIHJldHVybiBnbygtMSk7XG4gIH07XG5cbiAgdmFyIGdvRm9yd2FyZCA9IGZ1bmN0aW9uIGdvRm9yd2FyZCgpIHtcbiAgICByZXR1cm4gZ28oMSk7XG4gIH07XG5cbiAgdmFyIGxpc3RlbmVyQ291bnQgPSAwO1xuXG4gIHZhciBjaGVja0RPTUxpc3RlbmVycyA9IGZ1bmN0aW9uIGNoZWNrRE9NTGlzdGVuZXJzKGRlbHRhKSB7XG4gICAgbGlzdGVuZXJDb3VudCArPSBkZWx0YTtcblxuICAgIGlmIChsaXN0ZW5lckNvdW50ID09PSAxKSB7XG4gICAgICAoMCwgX0RPTVV0aWxzLmFkZEV2ZW50TGlzdGVuZXIpKHdpbmRvdywgSGFzaENoYW5nZUV2ZW50LCBoYW5kbGVIYXNoQ2hhbmdlKTtcbiAgICB9IGVsc2UgaWYgKGxpc3RlbmVyQ291bnQgPT09IDApIHtcbiAgICAgICgwLCBfRE9NVXRpbHMucmVtb3ZlRXZlbnRMaXN0ZW5lcikod2luZG93LCBIYXNoQ2hhbmdlRXZlbnQsIGhhbmRsZUhhc2hDaGFuZ2UpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgaXNCbG9ja2VkID0gZmFsc2U7XG5cbiAgdmFyIGJsb2NrID0gZnVuY3Rpb24gYmxvY2soKSB7XG4gICAgdmFyIHByb21wdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZmFsc2U7XG5cbiAgICB2YXIgdW5ibG9jayA9IHRyYW5zaXRpb25NYW5hZ2VyLnNldFByb21wdChwcm9tcHQpO1xuXG4gICAgaWYgKCFpc0Jsb2NrZWQpIHtcbiAgICAgIGNoZWNrRE9NTGlzdGVuZXJzKDEpO1xuICAgICAgaXNCbG9ja2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGlzQmxvY2tlZCkge1xuICAgICAgICBpc0Jsb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgY2hlY2tET01MaXN0ZW5lcnMoLTEpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdW5ibG9jaygpO1xuICAgIH07XG4gIH07XG5cbiAgdmFyIGxpc3RlbiA9IGZ1bmN0aW9uIGxpc3RlbihsaXN0ZW5lcikge1xuICAgIHZhciB1bmxpc3RlbiA9IHRyYW5zaXRpb25NYW5hZ2VyLmFwcGVuZExpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICBjaGVja0RPTUxpc3RlbmVycygxKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGVja0RPTUxpc3RlbmVycygtMSk7XG4gICAgICB1bmxpc3RlbigpO1xuICAgIH07XG4gIH07XG5cbiAgdmFyIGhpc3RvcnkgPSB7XG4gICAgbGVuZ3RoOiBnbG9iYWxIaXN0b3J5Lmxlbmd0aCxcbiAgICBhY3Rpb246ICdQT1AnLFxuICAgIGxvY2F0aW9uOiBpbml0aWFsTG9jYXRpb24sXG4gICAgY3JlYXRlSHJlZjogY3JlYXRlSHJlZixcbiAgICBwdXNoOiBwdXNoLFxuICAgIHJlcGxhY2U6IHJlcGxhY2UsXG4gICAgZ286IGdvLFxuICAgIGdvQmFjazogZ29CYWNrLFxuICAgIGdvRm9yd2FyZDogZ29Gb3J3YXJkLFxuICAgIGJsb2NrOiBibG9jayxcbiAgICBsaXN0ZW46IGxpc3RlblxuICB9O1xuXG4gIHJldHVybiBoaXN0b3J5O1xufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gY3JlYXRlSGFzaEhpc3Rvcnk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2hpc3RvcnkvY3JlYXRlSGFzaEhpc3RvcnkuanNcbi8vIG1vZHVsZSBpZCA9IDEzNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX3dhcm5pbmcgPSByZXF1aXJlKCd3YXJuaW5nJyk7XG5cbnZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblxudmFyIF9QYXRoVXRpbHMgPSByZXF1aXJlKCcuL1BhdGhVdGlscycpO1xuXG52YXIgX0xvY2F0aW9uVXRpbHMgPSByZXF1aXJlKCcuL0xvY2F0aW9uVXRpbHMnKTtcblxudmFyIF9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlciA9IHJlcXVpcmUoJy4vY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXInKTtcblxudmFyIF9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBjbGFtcCA9IGZ1bmN0aW9uIGNsYW1wKG4sIGxvd2VyQm91bmQsIHVwcGVyQm91bmQpIHtcbiAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KG4sIGxvd2VyQm91bmQpLCB1cHBlckJvdW5kKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIGhpc3Rvcnkgb2JqZWN0IHRoYXQgc3RvcmVzIGxvY2F0aW9ucyBpbiBtZW1vcnkuXG4gKi9cbnZhciBjcmVhdGVNZW1vcnlIaXN0b3J5ID0gZnVuY3Rpb24gY3JlYXRlTWVtb3J5SGlzdG9yeSgpIHtcbiAgdmFyIHByb3BzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgdmFyIGdldFVzZXJDb25maXJtYXRpb24gPSBwcm9wcy5nZXRVc2VyQ29uZmlybWF0aW9uLFxuICAgICAgX3Byb3BzJGluaXRpYWxFbnRyaWVzID0gcHJvcHMuaW5pdGlhbEVudHJpZXMsXG4gICAgICBpbml0aWFsRW50cmllcyA9IF9wcm9wcyRpbml0aWFsRW50cmllcyA9PT0gdW5kZWZpbmVkID8gWycvJ10gOiBfcHJvcHMkaW5pdGlhbEVudHJpZXMsXG4gICAgICBfcHJvcHMkaW5pdGlhbEluZGV4ID0gcHJvcHMuaW5pdGlhbEluZGV4LFxuICAgICAgaW5pdGlhbEluZGV4ID0gX3Byb3BzJGluaXRpYWxJbmRleCA9PT0gdW5kZWZpbmVkID8gMCA6IF9wcm9wcyRpbml0aWFsSW5kZXgsXG4gICAgICBfcHJvcHMka2V5TGVuZ3RoID0gcHJvcHMua2V5TGVuZ3RoLFxuICAgICAga2V5TGVuZ3RoID0gX3Byb3BzJGtleUxlbmd0aCA9PT0gdW5kZWZpbmVkID8gNiA6IF9wcm9wcyRrZXlMZW5ndGg7XG5cblxuICB2YXIgdHJhbnNpdGlvbk1hbmFnZXIgPSAoMCwgX2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyMi5kZWZhdWx0KSgpO1xuXG4gIHZhciBzZXRTdGF0ZSA9IGZ1bmN0aW9uIHNldFN0YXRlKG5leHRTdGF0ZSkge1xuICAgIF9leHRlbmRzKGhpc3RvcnksIG5leHRTdGF0ZSk7XG5cbiAgICBoaXN0b3J5Lmxlbmd0aCA9IGhpc3RvcnkuZW50cmllcy5sZW5ndGg7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5ub3RpZnlMaXN0ZW5lcnMoaGlzdG9yeS5sb2NhdGlvbiwgaGlzdG9yeS5hY3Rpb24pO1xuICB9O1xuXG4gIHZhciBjcmVhdGVLZXkgPSBmdW5jdGlvbiBjcmVhdGVLZXkoKSB7XG4gICAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCBrZXlMZW5ndGgpO1xuICB9O1xuXG4gIHZhciBpbmRleCA9IGNsYW1wKGluaXRpYWxJbmRleCwgMCwgaW5pdGlhbEVudHJpZXMubGVuZ3RoIC0gMSk7XG4gIHZhciBlbnRyaWVzID0gaW5pdGlhbEVudHJpZXMubWFwKGZ1bmN0aW9uIChlbnRyeSkge1xuICAgIHJldHVybiB0eXBlb2YgZW50cnkgPT09ICdzdHJpbmcnID8gKDAsIF9Mb2NhdGlvblV0aWxzLmNyZWF0ZUxvY2F0aW9uKShlbnRyeSwgdW5kZWZpbmVkLCBjcmVhdGVLZXkoKSkgOiAoMCwgX0xvY2F0aW9uVXRpbHMuY3JlYXRlTG9jYXRpb24pKGVudHJ5LCB1bmRlZmluZWQsIGVudHJ5LmtleSB8fCBjcmVhdGVLZXkoKSk7XG4gIH0pO1xuXG4gIC8vIFB1YmxpYyBpbnRlcmZhY2VcblxuICB2YXIgY3JlYXRlSHJlZiA9IF9QYXRoVXRpbHMuY3JlYXRlUGF0aDtcblxuICB2YXIgcHVzaCA9IGZ1bmN0aW9uIHB1c2gocGF0aCwgc3RhdGUpIHtcbiAgICAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKCEoKHR5cGVvZiBwYXRoID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihwYXRoKSkgPT09ICdvYmplY3QnICYmIHBhdGguc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBzdGF0ZSAhPT0gdW5kZWZpbmVkKSwgJ1lvdSBzaG91bGQgYXZvaWQgcHJvdmlkaW5nIGEgMm5kIHN0YXRlIGFyZ3VtZW50IHRvIHB1c2ggd2hlbiB0aGUgMXN0ICcgKyAnYXJndW1lbnQgaXMgYSBsb2NhdGlvbi1saWtlIG9iamVjdCB0aGF0IGFscmVhZHkgaGFzIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7XG5cbiAgICB2YXIgYWN0aW9uID0gJ1BVU0gnO1xuICAgIHZhciBsb2NhdGlvbiA9ICgwLCBfTG9jYXRpb25VdGlscy5jcmVhdGVMb2NhdGlvbikocGF0aCwgc3RhdGUsIGNyZWF0ZUtleSgpLCBoaXN0b3J5LmxvY2F0aW9uKTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG5cbiAgICAgIHZhciBwcmV2SW5kZXggPSBoaXN0b3J5LmluZGV4O1xuICAgICAgdmFyIG5leHRJbmRleCA9IHByZXZJbmRleCArIDE7XG5cbiAgICAgIHZhciBuZXh0RW50cmllcyA9IGhpc3RvcnkuZW50cmllcy5zbGljZSgwKTtcbiAgICAgIGlmIChuZXh0RW50cmllcy5sZW5ndGggPiBuZXh0SW5kZXgpIHtcbiAgICAgICAgbmV4dEVudHJpZXMuc3BsaWNlKG5leHRJbmRleCwgbmV4dEVudHJpZXMubGVuZ3RoIC0gbmV4dEluZGV4LCBsb2NhdGlvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXh0RW50cmllcy5wdXNoKGxvY2F0aW9uKTtcbiAgICAgIH1cblxuICAgICAgc2V0U3RhdGUoe1xuICAgICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uLFxuICAgICAgICBpbmRleDogbmV4dEluZGV4LFxuICAgICAgICBlbnRyaWVzOiBuZXh0RW50cmllc1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIHJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlKHBhdGgsIHN0YXRlKSB7XG4gICAgKDAsIF93YXJuaW5nMi5kZWZhdWx0KSghKCh0eXBlb2YgcGF0aCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YocGF0aCkpID09PSAnb2JqZWN0JyAmJiBwYXRoLnN0YXRlICE9PSB1bmRlZmluZWQgJiYgc3RhdGUgIT09IHVuZGVmaW5lZCksICdZb3Ugc2hvdWxkIGF2b2lkIHByb3ZpZGluZyBhIDJuZCBzdGF0ZSBhcmd1bWVudCB0byByZXBsYWNlIHdoZW4gdGhlIDFzdCAnICsgJ2FyZ3VtZW50IGlzIGEgbG9jYXRpb24tbGlrZSBvYmplY3QgdGhhdCBhbHJlYWR5IGhhcyBzdGF0ZTsgaXQgaXMgaWdub3JlZCcpO1xuXG4gICAgdmFyIGFjdGlvbiA9ICdSRVBMQUNFJztcbiAgICB2YXIgbG9jYXRpb24gPSAoMCwgX0xvY2F0aW9uVXRpbHMuY3JlYXRlTG9jYXRpb24pKHBhdGgsIHN0YXRlLCBjcmVhdGVLZXkoKSwgaGlzdG9yeS5sb2NhdGlvbik7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKCFvaykgcmV0dXJuO1xuXG4gICAgICBoaXN0b3J5LmVudHJpZXNbaGlzdG9yeS5pbmRleF0gPSBsb2NhdGlvbjtcblxuICAgICAgc2V0U3RhdGUoeyBhY3Rpb246IGFjdGlvbiwgbG9jYXRpb246IGxvY2F0aW9uIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBnbyA9IGZ1bmN0aW9uIGdvKG4pIHtcbiAgICB2YXIgbmV4dEluZGV4ID0gY2xhbXAoaGlzdG9yeS5pbmRleCArIG4sIDAsIGhpc3RvcnkuZW50cmllcy5sZW5ndGggLSAxKTtcblxuICAgIHZhciBhY3Rpb24gPSAnUE9QJztcbiAgICB2YXIgbG9jYXRpb24gPSBoaXN0b3J5LmVudHJpZXNbbmV4dEluZGV4XTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAob2spIHtcbiAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgICAgIGxvY2F0aW9uOiBsb2NhdGlvbixcbiAgICAgICAgICBpbmRleDogbmV4dEluZGV4XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTWltaWMgdGhlIGJlaGF2aW9yIG9mIERPTSBoaXN0b3JpZXMgYnlcbiAgICAgICAgLy8gY2F1c2luZyBhIHJlbmRlciBhZnRlciBhIGNhbmNlbGxlZCBQT1AuXG4gICAgICAgIHNldFN0YXRlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdvQmFjayA9IGZ1bmN0aW9uIGdvQmFjaygpIHtcbiAgICByZXR1cm4gZ28oLTEpO1xuICB9O1xuXG4gIHZhciBnb0ZvcndhcmQgPSBmdW5jdGlvbiBnb0ZvcndhcmQoKSB7XG4gICAgcmV0dXJuIGdvKDEpO1xuICB9O1xuXG4gIHZhciBjYW5HbyA9IGZ1bmN0aW9uIGNhbkdvKG4pIHtcbiAgICB2YXIgbmV4dEluZGV4ID0gaGlzdG9yeS5pbmRleCArIG47XG4gICAgcmV0dXJuIG5leHRJbmRleCA+PSAwICYmIG5leHRJbmRleCA8IGhpc3RvcnkuZW50cmllcy5sZW5ndGg7XG4gIH07XG5cbiAgdmFyIGJsb2NrID0gZnVuY3Rpb24gYmxvY2soKSB7XG4gICAgdmFyIHByb21wdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZmFsc2U7XG4gICAgcmV0dXJuIHRyYW5zaXRpb25NYW5hZ2VyLnNldFByb21wdChwcm9tcHQpO1xuICB9O1xuXG4gIHZhciBsaXN0ZW4gPSBmdW5jdGlvbiBsaXN0ZW4obGlzdGVuZXIpIHtcbiAgICByZXR1cm4gdHJhbnNpdGlvbk1hbmFnZXIuYXBwZW5kTGlzdGVuZXIobGlzdGVuZXIpO1xuICB9O1xuXG4gIHZhciBoaXN0b3J5ID0ge1xuICAgIGxlbmd0aDogZW50cmllcy5sZW5ndGgsXG4gICAgYWN0aW9uOiAnUE9QJyxcbiAgICBsb2NhdGlvbjogZW50cmllc1tpbmRleF0sXG4gICAgaW5kZXg6IGluZGV4LFxuICAgIGVudHJpZXM6IGVudHJpZXMsXG4gICAgY3JlYXRlSHJlZjogY3JlYXRlSHJlZixcbiAgICBwdXNoOiBwdXNoLFxuICAgIHJlcGxhY2U6IHJlcGxhY2UsXG4gICAgZ286IGdvLFxuICAgIGdvQmFjazogZ29CYWNrLFxuICAgIGdvRm9yd2FyZDogZ29Gb3J3YXJkLFxuICAgIGNhbkdvOiBjYW5HbyxcbiAgICBibG9jazogYmxvY2ssXG4gICAgbGlzdGVuOiBsaXN0ZW5cbiAgfTtcblxuICByZXR1cm4gaGlzdG9yeTtcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGNyZWF0ZU1lbW9yeUhpc3Rvcnk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2hpc3RvcnkvY3JlYXRlTWVtb3J5SGlzdG9yeS5qc1xuLy8gbW9kdWxlIGlkID0gMTM3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwidmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5pbXBvcnQgd2FybmluZyBmcm9tICd3YXJuaW5nJztcbmltcG9ydCBpbnZhcmlhbnQgZnJvbSAnaW52YXJpYW50JztcbmltcG9ydCB7IGNyZWF0ZUxvY2F0aW9uIH0gZnJvbSAnLi9Mb2NhdGlvblV0aWxzJztcbmltcG9ydCB7IGFkZExlYWRpbmdTbGFzaCwgc3RyaXBUcmFpbGluZ1NsYXNoLCBoYXNCYXNlbmFtZSwgc3RyaXBCYXNlbmFtZSwgY3JlYXRlUGF0aCB9IGZyb20gJy4vUGF0aFV0aWxzJztcbmltcG9ydCBjcmVhdGVUcmFuc2l0aW9uTWFuYWdlciBmcm9tICcuL2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyJztcbmltcG9ydCB7IGNhblVzZURPTSwgYWRkRXZlbnRMaXN0ZW5lciwgcmVtb3ZlRXZlbnRMaXN0ZW5lciwgZ2V0Q29uZmlybWF0aW9uLCBzdXBwb3J0c0hpc3RvcnksIHN1cHBvcnRzUG9wU3RhdGVPbkhhc2hDaGFuZ2UsIGlzRXh0cmFuZW91c1BvcHN0YXRlRXZlbnQgfSBmcm9tICcuL0RPTVV0aWxzJztcblxudmFyIFBvcFN0YXRlRXZlbnQgPSAncG9wc3RhdGUnO1xudmFyIEhhc2hDaGFuZ2VFdmVudCA9ICdoYXNoY2hhbmdlJztcblxudmFyIGdldEhpc3RvcnlTdGF0ZSA9IGZ1bmN0aW9uIGdldEhpc3RvcnlTdGF0ZSgpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gd2luZG93Lmhpc3Rvcnkuc3RhdGUgfHwge307XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBJRSAxMSBzb21ldGltZXMgdGhyb3dzIHdoZW4gYWNjZXNzaW5nIHdpbmRvdy5oaXN0b3J5LnN0YXRlXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9SZWFjdFRyYWluaW5nL2hpc3RvcnkvcHVsbC8yODlcbiAgICByZXR1cm4ge307XG4gIH1cbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIGhpc3Rvcnkgb2JqZWN0IHRoYXQgdXNlcyB0aGUgSFRNTDUgaGlzdG9yeSBBUEkgaW5jbHVkaW5nXG4gKiBwdXNoU3RhdGUsIHJlcGxhY2VTdGF0ZSwgYW5kIHRoZSBwb3BzdGF0ZSBldmVudC5cbiAqL1xudmFyIGNyZWF0ZUJyb3dzZXJIaXN0b3J5ID0gZnVuY3Rpb24gY3JlYXRlQnJvd3Nlckhpc3RvcnkoKSB7XG4gIHZhciBwcm9wcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgaW52YXJpYW50KGNhblVzZURPTSwgJ0Jyb3dzZXIgaGlzdG9yeSBuZWVkcyBhIERPTScpO1xuXG4gIHZhciBnbG9iYWxIaXN0b3J5ID0gd2luZG93Lmhpc3Rvcnk7XG4gIHZhciBjYW5Vc2VIaXN0b3J5ID0gc3VwcG9ydHNIaXN0b3J5KCk7XG4gIHZhciBuZWVkc0hhc2hDaGFuZ2VMaXN0ZW5lciA9ICFzdXBwb3J0c1BvcFN0YXRlT25IYXNoQ2hhbmdlKCk7XG5cbiAgdmFyIF9wcm9wcyRmb3JjZVJlZnJlc2ggPSBwcm9wcy5mb3JjZVJlZnJlc2gsXG4gICAgICBmb3JjZVJlZnJlc2ggPSBfcHJvcHMkZm9yY2VSZWZyZXNoID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9wcm9wcyRmb3JjZVJlZnJlc2gsXG4gICAgICBfcHJvcHMkZ2V0VXNlckNvbmZpcm0gPSBwcm9wcy5nZXRVc2VyQ29uZmlybWF0aW9uLFxuICAgICAgZ2V0VXNlckNvbmZpcm1hdGlvbiA9IF9wcm9wcyRnZXRVc2VyQ29uZmlybSA9PT0gdW5kZWZpbmVkID8gZ2V0Q29uZmlybWF0aW9uIDogX3Byb3BzJGdldFVzZXJDb25maXJtLFxuICAgICAgX3Byb3BzJGtleUxlbmd0aCA9IHByb3BzLmtleUxlbmd0aCxcbiAgICAgIGtleUxlbmd0aCA9IF9wcm9wcyRrZXlMZW5ndGggPT09IHVuZGVmaW5lZCA/IDYgOiBfcHJvcHMka2V5TGVuZ3RoO1xuXG4gIHZhciBiYXNlbmFtZSA9IHByb3BzLmJhc2VuYW1lID8gc3RyaXBUcmFpbGluZ1NsYXNoKGFkZExlYWRpbmdTbGFzaChwcm9wcy5iYXNlbmFtZSkpIDogJyc7XG5cbiAgdmFyIGdldERPTUxvY2F0aW9uID0gZnVuY3Rpb24gZ2V0RE9NTG9jYXRpb24oaGlzdG9yeVN0YXRlKSB7XG4gICAgdmFyIF9yZWYgPSBoaXN0b3J5U3RhdGUgfHwge30sXG4gICAgICAgIGtleSA9IF9yZWYua2V5LFxuICAgICAgICBzdGF0ZSA9IF9yZWYuc3RhdGU7XG5cbiAgICB2YXIgX3dpbmRvdyRsb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbixcbiAgICAgICAgcGF0aG5hbWUgPSBfd2luZG93JGxvY2F0aW9uLnBhdGhuYW1lLFxuICAgICAgICBzZWFyY2ggPSBfd2luZG93JGxvY2F0aW9uLnNlYXJjaCxcbiAgICAgICAgaGFzaCA9IF93aW5kb3ckbG9jYXRpb24uaGFzaDtcblxuXG4gICAgdmFyIHBhdGggPSBwYXRobmFtZSArIHNlYXJjaCArIGhhc2g7XG5cbiAgICB3YXJuaW5nKCFiYXNlbmFtZSB8fCBoYXNCYXNlbmFtZShwYXRoLCBiYXNlbmFtZSksICdZb3UgYXJlIGF0dGVtcHRpbmcgdG8gdXNlIGEgYmFzZW5hbWUgb24gYSBwYWdlIHdob3NlIFVSTCBwYXRoIGRvZXMgbm90IGJlZ2luICcgKyAnd2l0aCB0aGUgYmFzZW5hbWUuIEV4cGVjdGVkIHBhdGggXCInICsgcGF0aCArICdcIiB0byBiZWdpbiB3aXRoIFwiJyArIGJhc2VuYW1lICsgJ1wiLicpO1xuXG4gICAgaWYgKGJhc2VuYW1lKSBwYXRoID0gc3RyaXBCYXNlbmFtZShwYXRoLCBiYXNlbmFtZSk7XG5cbiAgICByZXR1cm4gY3JlYXRlTG9jYXRpb24ocGF0aCwgc3RhdGUsIGtleSk7XG4gIH07XG5cbiAgdmFyIGNyZWF0ZUtleSA9IGZ1bmN0aW9uIGNyZWF0ZUtleSgpIHtcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIGtleUxlbmd0aCk7XG4gIH07XG5cbiAgdmFyIHRyYW5zaXRpb25NYW5hZ2VyID0gY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIoKTtcblxuICB2YXIgc2V0U3RhdGUgPSBmdW5jdGlvbiBzZXRTdGF0ZShuZXh0U3RhdGUpIHtcbiAgICBfZXh0ZW5kcyhoaXN0b3J5LCBuZXh0U3RhdGUpO1xuXG4gICAgaGlzdG9yeS5sZW5ndGggPSBnbG9iYWxIaXN0b3J5Lmxlbmd0aDtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLm5vdGlmeUxpc3RlbmVycyhoaXN0b3J5LmxvY2F0aW9uLCBoaXN0b3J5LmFjdGlvbik7XG4gIH07XG5cbiAgdmFyIGhhbmRsZVBvcFN0YXRlID0gZnVuY3Rpb24gaGFuZGxlUG9wU3RhdGUoZXZlbnQpIHtcbiAgICAvLyBJZ25vcmUgZXh0cmFuZW91cyBwb3BzdGF0ZSBldmVudHMgaW4gV2ViS2l0LlxuICAgIGlmIChpc0V4dHJhbmVvdXNQb3BzdGF0ZUV2ZW50KGV2ZW50KSkgcmV0dXJuO1xuXG4gICAgaGFuZGxlUG9wKGdldERPTUxvY2F0aW9uKGV2ZW50LnN0YXRlKSk7XG4gIH07XG5cbiAgdmFyIGhhbmRsZUhhc2hDaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVIYXNoQ2hhbmdlKCkge1xuICAgIGhhbmRsZVBvcChnZXRET01Mb2NhdGlvbihnZXRIaXN0b3J5U3RhdGUoKSkpO1xuICB9O1xuXG4gIHZhciBmb3JjZU5leHRQb3AgPSBmYWxzZTtcblxuICB2YXIgaGFuZGxlUG9wID0gZnVuY3Rpb24gaGFuZGxlUG9wKGxvY2F0aW9uKSB7XG4gICAgaWYgKGZvcmNlTmV4dFBvcCkge1xuICAgICAgZm9yY2VOZXh0UG9wID0gZmFsc2U7XG4gICAgICBzZXRTdGF0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYWN0aW9uID0gJ1BPUCc7XG5cbiAgICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICAgIGlmIChvaykge1xuICAgICAgICAgIHNldFN0YXRlKHsgYWN0aW9uOiBhY3Rpb24sIGxvY2F0aW9uOiBsb2NhdGlvbiB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXZlcnRQb3AobG9jYXRpb24pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHJldmVydFBvcCA9IGZ1bmN0aW9uIHJldmVydFBvcChmcm9tTG9jYXRpb24pIHtcbiAgICB2YXIgdG9Mb2NhdGlvbiA9IGhpc3RvcnkubG9jYXRpb247XG5cbiAgICAvLyBUT0RPOiBXZSBjb3VsZCBwcm9iYWJseSBtYWtlIHRoaXMgbW9yZSByZWxpYWJsZSBieVxuICAgIC8vIGtlZXBpbmcgYSBsaXN0IG9mIGtleXMgd2UndmUgc2VlbiBpbiBzZXNzaW9uU3RvcmFnZS5cbiAgICAvLyBJbnN0ZWFkLCB3ZSBqdXN0IGRlZmF1bHQgdG8gMCBmb3Iga2V5cyB3ZSBkb24ndCBrbm93LlxuXG4gICAgdmFyIHRvSW5kZXggPSBhbGxLZXlzLmluZGV4T2YodG9Mb2NhdGlvbi5rZXkpO1xuXG4gICAgaWYgKHRvSW5kZXggPT09IC0xKSB0b0luZGV4ID0gMDtcblxuICAgIHZhciBmcm9tSW5kZXggPSBhbGxLZXlzLmluZGV4T2YoZnJvbUxvY2F0aW9uLmtleSk7XG5cbiAgICBpZiAoZnJvbUluZGV4ID09PSAtMSkgZnJvbUluZGV4ID0gMDtcblxuICAgIHZhciBkZWx0YSA9IHRvSW5kZXggLSBmcm9tSW5kZXg7XG5cbiAgICBpZiAoZGVsdGEpIHtcbiAgICAgIGZvcmNlTmV4dFBvcCA9IHRydWU7XG4gICAgICBnbyhkZWx0YSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBpbml0aWFsTG9jYXRpb24gPSBnZXRET01Mb2NhdGlvbihnZXRIaXN0b3J5U3RhdGUoKSk7XG4gIHZhciBhbGxLZXlzID0gW2luaXRpYWxMb2NhdGlvbi5rZXldO1xuXG4gIC8vIFB1YmxpYyBpbnRlcmZhY2VcblxuICB2YXIgY3JlYXRlSHJlZiA9IGZ1bmN0aW9uIGNyZWF0ZUhyZWYobG9jYXRpb24pIHtcbiAgICByZXR1cm4gYmFzZW5hbWUgKyBjcmVhdGVQYXRoKGxvY2F0aW9uKTtcbiAgfTtcblxuICB2YXIgcHVzaCA9IGZ1bmN0aW9uIHB1c2gocGF0aCwgc3RhdGUpIHtcbiAgICB3YXJuaW5nKCEoKHR5cGVvZiBwYXRoID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihwYXRoKSkgPT09ICdvYmplY3QnICYmIHBhdGguc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBzdGF0ZSAhPT0gdW5kZWZpbmVkKSwgJ1lvdSBzaG91bGQgYXZvaWQgcHJvdmlkaW5nIGEgMm5kIHN0YXRlIGFyZ3VtZW50IHRvIHB1c2ggd2hlbiB0aGUgMXN0ICcgKyAnYXJndW1lbnQgaXMgYSBsb2NhdGlvbi1saWtlIG9iamVjdCB0aGF0IGFscmVhZHkgaGFzIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7XG5cbiAgICB2YXIgYWN0aW9uID0gJ1BVU0gnO1xuICAgIHZhciBsb2NhdGlvbiA9IGNyZWF0ZUxvY2F0aW9uKHBhdGgsIHN0YXRlLCBjcmVhdGVLZXkoKSwgaGlzdG9yeS5sb2NhdGlvbik7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKCFvaykgcmV0dXJuO1xuXG4gICAgICB2YXIgaHJlZiA9IGNyZWF0ZUhyZWYobG9jYXRpb24pO1xuICAgICAgdmFyIGtleSA9IGxvY2F0aW9uLmtleSxcbiAgICAgICAgICBzdGF0ZSA9IGxvY2F0aW9uLnN0YXRlO1xuXG5cbiAgICAgIGlmIChjYW5Vc2VIaXN0b3J5KSB7XG4gICAgICAgIGdsb2JhbEhpc3RvcnkucHVzaFN0YXRlKHsga2V5OiBrZXksIHN0YXRlOiBzdGF0ZSB9LCBudWxsLCBocmVmKTtcblxuICAgICAgICBpZiAoZm9yY2VSZWZyZXNoKSB7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBocmVmO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBwcmV2SW5kZXggPSBhbGxLZXlzLmluZGV4T2YoaGlzdG9yeS5sb2NhdGlvbi5rZXkpO1xuICAgICAgICAgIHZhciBuZXh0S2V5cyA9IGFsbEtleXMuc2xpY2UoMCwgcHJldkluZGV4ID09PSAtMSA/IDAgOiBwcmV2SW5kZXggKyAxKTtcblxuICAgICAgICAgIG5leHRLZXlzLnB1c2gobG9jYXRpb24ua2V5KTtcbiAgICAgICAgICBhbGxLZXlzID0gbmV4dEtleXM7XG5cbiAgICAgICAgICBzZXRTdGF0ZSh7IGFjdGlvbjogYWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24gfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdhcm5pbmcoc3RhdGUgPT09IHVuZGVmaW5lZCwgJ0Jyb3dzZXIgaGlzdG9yeSBjYW5ub3QgcHVzaCBzdGF0ZSBpbiBicm93c2VycyB0aGF0IGRvIG5vdCBzdXBwb3J0IEhUTUw1IGhpc3RvcnknKTtcblxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhyZWY7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIHJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlKHBhdGgsIHN0YXRlKSB7XG4gICAgd2FybmluZyghKCh0eXBlb2YgcGF0aCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YocGF0aCkpID09PSAnb2JqZWN0JyAmJiBwYXRoLnN0YXRlICE9PSB1bmRlZmluZWQgJiYgc3RhdGUgIT09IHVuZGVmaW5lZCksICdZb3Ugc2hvdWxkIGF2b2lkIHByb3ZpZGluZyBhIDJuZCBzdGF0ZSBhcmd1bWVudCB0byByZXBsYWNlIHdoZW4gdGhlIDFzdCAnICsgJ2FyZ3VtZW50IGlzIGEgbG9jYXRpb24tbGlrZSBvYmplY3QgdGhhdCBhbHJlYWR5IGhhcyBzdGF0ZTsgaXQgaXMgaWdub3JlZCcpO1xuXG4gICAgdmFyIGFjdGlvbiA9ICdSRVBMQUNFJztcbiAgICB2YXIgbG9jYXRpb24gPSBjcmVhdGVMb2NhdGlvbihwYXRoLCBzdGF0ZSwgY3JlYXRlS2V5KCksIGhpc3RvcnkubG9jYXRpb24pO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmICghb2spIHJldHVybjtcblxuICAgICAgdmFyIGhyZWYgPSBjcmVhdGVIcmVmKGxvY2F0aW9uKTtcbiAgICAgIHZhciBrZXkgPSBsb2NhdGlvbi5rZXksXG4gICAgICAgICAgc3RhdGUgPSBsb2NhdGlvbi5zdGF0ZTtcblxuXG4gICAgICBpZiAoY2FuVXNlSGlzdG9yeSkge1xuICAgICAgICBnbG9iYWxIaXN0b3J5LnJlcGxhY2VTdGF0ZSh7IGtleToga2V5LCBzdGF0ZTogc3RhdGUgfSwgbnVsbCwgaHJlZik7XG5cbiAgICAgICAgaWYgKGZvcmNlUmVmcmVzaCkge1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKGhyZWYpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBwcmV2SW5kZXggPSBhbGxLZXlzLmluZGV4T2YoaGlzdG9yeS5sb2NhdGlvbi5rZXkpO1xuXG4gICAgICAgICAgaWYgKHByZXZJbmRleCAhPT0gLTEpIGFsbEtleXNbcHJldkluZGV4XSA9IGxvY2F0aW9uLmtleTtcblxuICAgICAgICAgIHNldFN0YXRlKHsgYWN0aW9uOiBhY3Rpb24sIGxvY2F0aW9uOiBsb2NhdGlvbiB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2FybmluZyhzdGF0ZSA9PT0gdW5kZWZpbmVkLCAnQnJvd3NlciBoaXN0b3J5IGNhbm5vdCByZXBsYWNlIHN0YXRlIGluIGJyb3dzZXJzIHRoYXQgZG8gbm90IHN1cHBvcnQgSFRNTDUgaGlzdG9yeScpO1xuXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKGhyZWYpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHZhciBnbyA9IGZ1bmN0aW9uIGdvKG4pIHtcbiAgICBnbG9iYWxIaXN0b3J5LmdvKG4pO1xuICB9O1xuXG4gIHZhciBnb0JhY2sgPSBmdW5jdGlvbiBnb0JhY2soKSB7XG4gICAgcmV0dXJuIGdvKC0xKTtcbiAgfTtcblxuICB2YXIgZ29Gb3J3YXJkID0gZnVuY3Rpb24gZ29Gb3J3YXJkKCkge1xuICAgIHJldHVybiBnbygxKTtcbiAgfTtcblxuICB2YXIgbGlzdGVuZXJDb3VudCA9IDA7XG5cbiAgdmFyIGNoZWNrRE9NTGlzdGVuZXJzID0gZnVuY3Rpb24gY2hlY2tET01MaXN0ZW5lcnMoZGVsdGEpIHtcbiAgICBsaXN0ZW5lckNvdW50ICs9IGRlbHRhO1xuXG4gICAgaWYgKGxpc3RlbmVyQ291bnQgPT09IDEpIHtcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIod2luZG93LCBQb3BTdGF0ZUV2ZW50LCBoYW5kbGVQb3BTdGF0ZSk7XG5cbiAgICAgIGlmIChuZWVkc0hhc2hDaGFuZ2VMaXN0ZW5lcikgYWRkRXZlbnRMaXN0ZW5lcih3aW5kb3csIEhhc2hDaGFuZ2VFdmVudCwgaGFuZGxlSGFzaENoYW5nZSk7XG4gICAgfSBlbHNlIGlmIChsaXN0ZW5lckNvdW50ID09PSAwKSB7XG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyKHdpbmRvdywgUG9wU3RhdGVFdmVudCwgaGFuZGxlUG9wU3RhdGUpO1xuXG4gICAgICBpZiAobmVlZHNIYXNoQ2hhbmdlTGlzdGVuZXIpIHJlbW92ZUV2ZW50TGlzdGVuZXIod2luZG93LCBIYXNoQ2hhbmdlRXZlbnQsIGhhbmRsZUhhc2hDaGFuZ2UpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgaXNCbG9ja2VkID0gZmFsc2U7XG5cbiAgdmFyIGJsb2NrID0gZnVuY3Rpb24gYmxvY2soKSB7XG4gICAgdmFyIHByb21wdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZmFsc2U7XG5cbiAgICB2YXIgdW5ibG9jayA9IHRyYW5zaXRpb25NYW5hZ2VyLnNldFByb21wdChwcm9tcHQpO1xuXG4gICAgaWYgKCFpc0Jsb2NrZWQpIHtcbiAgICAgIGNoZWNrRE9NTGlzdGVuZXJzKDEpO1xuICAgICAgaXNCbG9ja2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGlzQmxvY2tlZCkge1xuICAgICAgICBpc0Jsb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgY2hlY2tET01MaXN0ZW5lcnMoLTEpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdW5ibG9jaygpO1xuICAgIH07XG4gIH07XG5cbiAgdmFyIGxpc3RlbiA9IGZ1bmN0aW9uIGxpc3RlbihsaXN0ZW5lcikge1xuICAgIHZhciB1bmxpc3RlbiA9IHRyYW5zaXRpb25NYW5hZ2VyLmFwcGVuZExpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICBjaGVja0RPTUxpc3RlbmVycygxKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGVja0RPTUxpc3RlbmVycygtMSk7XG4gICAgICB1bmxpc3RlbigpO1xuICAgIH07XG4gIH07XG5cbiAgdmFyIGhpc3RvcnkgPSB7XG4gICAgbGVuZ3RoOiBnbG9iYWxIaXN0b3J5Lmxlbmd0aCxcbiAgICBhY3Rpb246ICdQT1AnLFxuICAgIGxvY2F0aW9uOiBpbml0aWFsTG9jYXRpb24sXG4gICAgY3JlYXRlSHJlZjogY3JlYXRlSHJlZixcbiAgICBwdXNoOiBwdXNoLFxuICAgIHJlcGxhY2U6IHJlcGxhY2UsXG4gICAgZ286IGdvLFxuICAgIGdvQmFjazogZ29CYWNrLFxuICAgIGdvRm9yd2FyZDogZ29Gb3J3YXJkLFxuICAgIGJsb2NrOiBibG9jayxcbiAgICBsaXN0ZW46IGxpc3RlblxuICB9O1xuXG4gIHJldHVybiBoaXN0b3J5O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQnJvd3Nlckhpc3Rvcnk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2hpc3RvcnkvZXMvY3JlYXRlQnJvd3Nlckhpc3RvcnkuanNcbi8vIG1vZHVsZSBpZCA9IDEzOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsInZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmltcG9ydCB3YXJuaW5nIGZyb20gJ3dhcm5pbmcnO1xuaW1wb3J0IGludmFyaWFudCBmcm9tICdpbnZhcmlhbnQnO1xuaW1wb3J0IHsgY3JlYXRlTG9jYXRpb24sIGxvY2F0aW9uc0FyZUVxdWFsIH0gZnJvbSAnLi9Mb2NhdGlvblV0aWxzJztcbmltcG9ydCB7IGFkZExlYWRpbmdTbGFzaCwgc3RyaXBMZWFkaW5nU2xhc2gsIHN0cmlwVHJhaWxpbmdTbGFzaCwgaGFzQmFzZW5hbWUsIHN0cmlwQmFzZW5hbWUsIGNyZWF0ZVBhdGggfSBmcm9tICcuL1BhdGhVdGlscyc7XG5pbXBvcnQgY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIgZnJvbSAnLi9jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcic7XG5pbXBvcnQgeyBjYW5Vc2VET00sIGFkZEV2ZW50TGlzdGVuZXIsIHJlbW92ZUV2ZW50TGlzdGVuZXIsIGdldENvbmZpcm1hdGlvbiwgc3VwcG9ydHNHb1dpdGhvdXRSZWxvYWRVc2luZ0hhc2ggfSBmcm9tICcuL0RPTVV0aWxzJztcblxudmFyIEhhc2hDaGFuZ2VFdmVudCA9ICdoYXNoY2hhbmdlJztcblxudmFyIEhhc2hQYXRoQ29kZXJzID0ge1xuICBoYXNoYmFuZzoge1xuICAgIGVuY29kZVBhdGg6IGZ1bmN0aW9uIGVuY29kZVBhdGgocGF0aCkge1xuICAgICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnIScgPyBwYXRoIDogJyEvJyArIHN0cmlwTGVhZGluZ1NsYXNoKHBhdGgpO1xuICAgIH0sXG4gICAgZGVjb2RlUGF0aDogZnVuY3Rpb24gZGVjb2RlUGF0aChwYXRoKSB7XG4gICAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICchJyA/IHBhdGguc3Vic3RyKDEpIDogcGF0aDtcbiAgICB9XG4gIH0sXG4gIG5vc2xhc2g6IHtcbiAgICBlbmNvZGVQYXRoOiBzdHJpcExlYWRpbmdTbGFzaCxcbiAgICBkZWNvZGVQYXRoOiBhZGRMZWFkaW5nU2xhc2hcbiAgfSxcbiAgc2xhc2g6IHtcbiAgICBlbmNvZGVQYXRoOiBhZGRMZWFkaW5nU2xhc2gsXG4gICAgZGVjb2RlUGF0aDogYWRkTGVhZGluZ1NsYXNoXG4gIH1cbn07XG5cbnZhciBnZXRIYXNoUGF0aCA9IGZ1bmN0aW9uIGdldEhhc2hQYXRoKCkge1xuICAvLyBXZSBjYW4ndCB1c2Ugd2luZG93LmxvY2F0aW9uLmhhc2ggaGVyZSBiZWNhdXNlIGl0J3Mgbm90XG4gIC8vIGNvbnNpc3RlbnQgYWNyb3NzIGJyb3dzZXJzIC0gRmlyZWZveCB3aWxsIHByZS1kZWNvZGUgaXQhXG4gIHZhciBocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIHZhciBoYXNoSW5kZXggPSBocmVmLmluZGV4T2YoJyMnKTtcbiAgcmV0dXJuIGhhc2hJbmRleCA9PT0gLTEgPyAnJyA6IGhyZWYuc3Vic3RyaW5nKGhhc2hJbmRleCArIDEpO1xufTtcblxudmFyIHB1c2hIYXNoUGF0aCA9IGZ1bmN0aW9uIHB1c2hIYXNoUGF0aChwYXRoKSB7XG4gIHJldHVybiB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHBhdGg7XG59O1xuXG52YXIgcmVwbGFjZUhhc2hQYXRoID0gZnVuY3Rpb24gcmVwbGFjZUhhc2hQYXRoKHBhdGgpIHtcbiAgdmFyIGhhc2hJbmRleCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoJyMnKTtcblxuICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSh3aW5kb3cubG9jYXRpb24uaHJlZi5zbGljZSgwLCBoYXNoSW5kZXggPj0gMCA/IGhhc2hJbmRleCA6IDApICsgJyMnICsgcGF0aCk7XG59O1xuXG52YXIgY3JlYXRlSGFzaEhpc3RvcnkgPSBmdW5jdGlvbiBjcmVhdGVIYXNoSGlzdG9yeSgpIHtcbiAgdmFyIHByb3BzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICBpbnZhcmlhbnQoY2FuVXNlRE9NLCAnSGFzaCBoaXN0b3J5IG5lZWRzIGEgRE9NJyk7XG5cbiAgdmFyIGdsb2JhbEhpc3RvcnkgPSB3aW5kb3cuaGlzdG9yeTtcbiAgdmFyIGNhbkdvV2l0aG91dFJlbG9hZCA9IHN1cHBvcnRzR29XaXRob3V0UmVsb2FkVXNpbmdIYXNoKCk7XG5cbiAgdmFyIF9wcm9wcyRnZXRVc2VyQ29uZmlybSA9IHByb3BzLmdldFVzZXJDb25maXJtYXRpb24sXG4gICAgICBnZXRVc2VyQ29uZmlybWF0aW9uID0gX3Byb3BzJGdldFVzZXJDb25maXJtID09PSB1bmRlZmluZWQgPyBnZXRDb25maXJtYXRpb24gOiBfcHJvcHMkZ2V0VXNlckNvbmZpcm0sXG4gICAgICBfcHJvcHMkaGFzaFR5cGUgPSBwcm9wcy5oYXNoVHlwZSxcbiAgICAgIGhhc2hUeXBlID0gX3Byb3BzJGhhc2hUeXBlID09PSB1bmRlZmluZWQgPyAnc2xhc2gnIDogX3Byb3BzJGhhc2hUeXBlO1xuXG4gIHZhciBiYXNlbmFtZSA9IHByb3BzLmJhc2VuYW1lID8gc3RyaXBUcmFpbGluZ1NsYXNoKGFkZExlYWRpbmdTbGFzaChwcm9wcy5iYXNlbmFtZSkpIDogJyc7XG5cbiAgdmFyIF9IYXNoUGF0aENvZGVycyRoYXNoVCA9IEhhc2hQYXRoQ29kZXJzW2hhc2hUeXBlXSxcbiAgICAgIGVuY29kZVBhdGggPSBfSGFzaFBhdGhDb2RlcnMkaGFzaFQuZW5jb2RlUGF0aCxcbiAgICAgIGRlY29kZVBhdGggPSBfSGFzaFBhdGhDb2RlcnMkaGFzaFQuZGVjb2RlUGF0aDtcblxuXG4gIHZhciBnZXRET01Mb2NhdGlvbiA9IGZ1bmN0aW9uIGdldERPTUxvY2F0aW9uKCkge1xuICAgIHZhciBwYXRoID0gZGVjb2RlUGF0aChnZXRIYXNoUGF0aCgpKTtcblxuICAgIHdhcm5pbmcoIWJhc2VuYW1lIHx8IGhhc0Jhc2VuYW1lKHBhdGgsIGJhc2VuYW1lKSwgJ1lvdSBhcmUgYXR0ZW1wdGluZyB0byB1c2UgYSBiYXNlbmFtZSBvbiBhIHBhZ2Ugd2hvc2UgVVJMIHBhdGggZG9lcyBub3QgYmVnaW4gJyArICd3aXRoIHRoZSBiYXNlbmFtZS4gRXhwZWN0ZWQgcGF0aCBcIicgKyBwYXRoICsgJ1wiIHRvIGJlZ2luIHdpdGggXCInICsgYmFzZW5hbWUgKyAnXCIuJyk7XG5cbiAgICBpZiAoYmFzZW5hbWUpIHBhdGggPSBzdHJpcEJhc2VuYW1lKHBhdGgsIGJhc2VuYW1lKTtcblxuICAgIHJldHVybiBjcmVhdGVMb2NhdGlvbihwYXRoKTtcbiAgfTtcblxuICB2YXIgdHJhbnNpdGlvbk1hbmFnZXIgPSBjcmVhdGVUcmFuc2l0aW9uTWFuYWdlcigpO1xuXG4gIHZhciBzZXRTdGF0ZSA9IGZ1bmN0aW9uIHNldFN0YXRlKG5leHRTdGF0ZSkge1xuICAgIF9leHRlbmRzKGhpc3RvcnksIG5leHRTdGF0ZSk7XG5cbiAgICBoaXN0b3J5Lmxlbmd0aCA9IGdsb2JhbEhpc3RvcnkubGVuZ3RoO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIubm90aWZ5TGlzdGVuZXJzKGhpc3RvcnkubG9jYXRpb24sIGhpc3RvcnkuYWN0aW9uKTtcbiAgfTtcblxuICB2YXIgZm9yY2VOZXh0UG9wID0gZmFsc2U7XG4gIHZhciBpZ25vcmVQYXRoID0gbnVsbDtcblxuICB2YXIgaGFuZGxlSGFzaENoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZUhhc2hDaGFuZ2UoKSB7XG4gICAgdmFyIHBhdGggPSBnZXRIYXNoUGF0aCgpO1xuICAgIHZhciBlbmNvZGVkUGF0aCA9IGVuY29kZVBhdGgocGF0aCk7XG5cbiAgICBpZiAocGF0aCAhPT0gZW5jb2RlZFBhdGgpIHtcbiAgICAgIC8vIEVuc3VyZSB3ZSBhbHdheXMgaGF2ZSBhIHByb3Blcmx5LWVuY29kZWQgaGFzaC5cbiAgICAgIHJlcGxhY2VIYXNoUGF0aChlbmNvZGVkUGF0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBsb2NhdGlvbiA9IGdldERPTUxvY2F0aW9uKCk7XG4gICAgICB2YXIgcHJldkxvY2F0aW9uID0gaGlzdG9yeS5sb2NhdGlvbjtcblxuICAgICAgaWYgKCFmb3JjZU5leHRQb3AgJiYgbG9jYXRpb25zQXJlRXF1YWwocHJldkxvY2F0aW9uLCBsb2NhdGlvbikpIHJldHVybjsgLy8gQSBoYXNoY2hhbmdlIGRvZXNuJ3QgYWx3YXlzID09IGxvY2F0aW9uIGNoYW5nZS5cblxuICAgICAgaWYgKGlnbm9yZVBhdGggPT09IGNyZWF0ZVBhdGgobG9jYXRpb24pKSByZXR1cm47IC8vIElnbm9yZSB0aGlzIGNoYW5nZTsgd2UgYWxyZWFkeSBzZXRTdGF0ZSBpbiBwdXNoL3JlcGxhY2UuXG5cbiAgICAgIGlnbm9yZVBhdGggPSBudWxsO1xuXG4gICAgICBoYW5kbGVQb3AobG9jYXRpb24pO1xuICAgIH1cbiAgfTtcblxuICB2YXIgaGFuZGxlUG9wID0gZnVuY3Rpb24gaGFuZGxlUG9wKGxvY2F0aW9uKSB7XG4gICAgaWYgKGZvcmNlTmV4dFBvcCkge1xuICAgICAgZm9yY2VOZXh0UG9wID0gZmFsc2U7XG4gICAgICBzZXRTdGF0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYWN0aW9uID0gJ1BPUCc7XG5cbiAgICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICAgIGlmIChvaykge1xuICAgICAgICAgIHNldFN0YXRlKHsgYWN0aW9uOiBhY3Rpb24sIGxvY2F0aW9uOiBsb2NhdGlvbiB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXZlcnRQb3AobG9jYXRpb24pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHJldmVydFBvcCA9IGZ1bmN0aW9uIHJldmVydFBvcChmcm9tTG9jYXRpb24pIHtcbiAgICB2YXIgdG9Mb2NhdGlvbiA9IGhpc3RvcnkubG9jYXRpb247XG5cbiAgICAvLyBUT0RPOiBXZSBjb3VsZCBwcm9iYWJseSBtYWtlIHRoaXMgbW9yZSByZWxpYWJsZSBieVxuICAgIC8vIGtlZXBpbmcgYSBsaXN0IG9mIHBhdGhzIHdlJ3ZlIHNlZW4gaW4gc2Vzc2lvblN0b3JhZ2UuXG4gICAgLy8gSW5zdGVhZCwgd2UganVzdCBkZWZhdWx0IHRvIDAgZm9yIHBhdGhzIHdlIGRvbid0IGtub3cuXG5cbiAgICB2YXIgdG9JbmRleCA9IGFsbFBhdGhzLmxhc3RJbmRleE9mKGNyZWF0ZVBhdGgodG9Mb2NhdGlvbikpO1xuXG4gICAgaWYgKHRvSW5kZXggPT09IC0xKSB0b0luZGV4ID0gMDtcblxuICAgIHZhciBmcm9tSW5kZXggPSBhbGxQYXRocy5sYXN0SW5kZXhPZihjcmVhdGVQYXRoKGZyb21Mb2NhdGlvbikpO1xuXG4gICAgaWYgKGZyb21JbmRleCA9PT0gLTEpIGZyb21JbmRleCA9IDA7XG5cbiAgICB2YXIgZGVsdGEgPSB0b0luZGV4IC0gZnJvbUluZGV4O1xuXG4gICAgaWYgKGRlbHRhKSB7XG4gICAgICBmb3JjZU5leHRQb3AgPSB0cnVlO1xuICAgICAgZ28oZGVsdGEpO1xuICAgIH1cbiAgfTtcblxuICAvLyBFbnN1cmUgdGhlIGhhc2ggaXMgZW5jb2RlZCBwcm9wZXJseSBiZWZvcmUgZG9pbmcgYW55dGhpbmcgZWxzZS5cbiAgdmFyIHBhdGggPSBnZXRIYXNoUGF0aCgpO1xuICB2YXIgZW5jb2RlZFBhdGggPSBlbmNvZGVQYXRoKHBhdGgpO1xuXG4gIGlmIChwYXRoICE9PSBlbmNvZGVkUGF0aCkgcmVwbGFjZUhhc2hQYXRoKGVuY29kZWRQYXRoKTtcblxuICB2YXIgaW5pdGlhbExvY2F0aW9uID0gZ2V0RE9NTG9jYXRpb24oKTtcbiAgdmFyIGFsbFBhdGhzID0gW2NyZWF0ZVBhdGgoaW5pdGlhbExvY2F0aW9uKV07XG5cbiAgLy8gUHVibGljIGludGVyZmFjZVxuXG4gIHZhciBjcmVhdGVIcmVmID0gZnVuY3Rpb24gY3JlYXRlSHJlZihsb2NhdGlvbikge1xuICAgIHJldHVybiAnIycgKyBlbmNvZGVQYXRoKGJhc2VuYW1lICsgY3JlYXRlUGF0aChsb2NhdGlvbikpO1xuICB9O1xuXG4gIHZhciBwdXNoID0gZnVuY3Rpb24gcHVzaChwYXRoLCBzdGF0ZSkge1xuICAgIHdhcm5pbmcoc3RhdGUgPT09IHVuZGVmaW5lZCwgJ0hhc2ggaGlzdG9yeSBjYW5ub3QgcHVzaCBzdGF0ZTsgaXQgaXMgaWdub3JlZCcpO1xuXG4gICAgdmFyIGFjdGlvbiA9ICdQVVNIJztcbiAgICB2YXIgbG9jYXRpb24gPSBjcmVhdGVMb2NhdGlvbihwYXRoLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgaGlzdG9yeS5sb2NhdGlvbik7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKCFvaykgcmV0dXJuO1xuXG4gICAgICB2YXIgcGF0aCA9IGNyZWF0ZVBhdGgobG9jYXRpb24pO1xuICAgICAgdmFyIGVuY29kZWRQYXRoID0gZW5jb2RlUGF0aChiYXNlbmFtZSArIHBhdGgpO1xuICAgICAgdmFyIGhhc2hDaGFuZ2VkID0gZ2V0SGFzaFBhdGgoKSAhPT0gZW5jb2RlZFBhdGg7XG5cbiAgICAgIGlmIChoYXNoQ2hhbmdlZCkge1xuICAgICAgICAvLyBXZSBjYW5ub3QgdGVsbCBpZiBhIGhhc2hjaGFuZ2Ugd2FzIGNhdXNlZCBieSBhIFBVU0gsIHNvIHdlJ2RcbiAgICAgICAgLy8gcmF0aGVyIHNldFN0YXRlIGhlcmUgYW5kIGlnbm9yZSB0aGUgaGFzaGNoYW5nZS4gVGhlIGNhdmVhdCBoZXJlXG4gICAgICAgIC8vIGlzIHRoYXQgb3RoZXIgaGFzaCBoaXN0b3JpZXMgaW4gdGhlIHBhZ2Ugd2lsbCBjb25zaWRlciBpdCBhIFBPUC5cbiAgICAgICAgaWdub3JlUGF0aCA9IHBhdGg7XG4gICAgICAgIHB1c2hIYXNoUGF0aChlbmNvZGVkUGF0aCk7XG5cbiAgICAgICAgdmFyIHByZXZJbmRleCA9IGFsbFBhdGhzLmxhc3RJbmRleE9mKGNyZWF0ZVBhdGgoaGlzdG9yeS5sb2NhdGlvbikpO1xuICAgICAgICB2YXIgbmV4dFBhdGhzID0gYWxsUGF0aHMuc2xpY2UoMCwgcHJldkluZGV4ID09PSAtMSA/IDAgOiBwcmV2SW5kZXggKyAxKTtcblxuICAgICAgICBuZXh0UGF0aHMucHVzaChwYXRoKTtcbiAgICAgICAgYWxsUGF0aHMgPSBuZXh0UGF0aHM7XG5cbiAgICAgICAgc2V0U3RhdGUoeyBhY3Rpb246IGFjdGlvbiwgbG9jYXRpb246IGxvY2F0aW9uIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2FybmluZyhmYWxzZSwgJ0hhc2ggaGlzdG9yeSBjYW5ub3QgUFVTSCB0aGUgc2FtZSBwYXRoOyBhIG5ldyBlbnRyeSB3aWxsIG5vdCBiZSBhZGRlZCB0byB0aGUgaGlzdG9yeSBzdGFjaycpO1xuXG4gICAgICAgIHNldFN0YXRlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIHJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlKHBhdGgsIHN0YXRlKSB7XG4gICAgd2FybmluZyhzdGF0ZSA9PT0gdW5kZWZpbmVkLCAnSGFzaCBoaXN0b3J5IGNhbm5vdCByZXBsYWNlIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7XG5cbiAgICB2YXIgYWN0aW9uID0gJ1JFUExBQ0UnO1xuICAgIHZhciBsb2NhdGlvbiA9IGNyZWF0ZUxvY2F0aW9uKHBhdGgsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBoaXN0b3J5LmxvY2F0aW9uKTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG5cbiAgICAgIHZhciBwYXRoID0gY3JlYXRlUGF0aChsb2NhdGlvbik7XG4gICAgICB2YXIgZW5jb2RlZFBhdGggPSBlbmNvZGVQYXRoKGJhc2VuYW1lICsgcGF0aCk7XG4gICAgICB2YXIgaGFzaENoYW5nZWQgPSBnZXRIYXNoUGF0aCgpICE9PSBlbmNvZGVkUGF0aDtcblxuICAgICAgaWYgKGhhc2hDaGFuZ2VkKSB7XG4gICAgICAgIC8vIFdlIGNhbm5vdCB0ZWxsIGlmIGEgaGFzaGNoYW5nZSB3YXMgY2F1c2VkIGJ5IGEgUkVQTEFDRSwgc28gd2UnZFxuICAgICAgICAvLyByYXRoZXIgc2V0U3RhdGUgaGVyZSBhbmQgaWdub3JlIHRoZSBoYXNoY2hhbmdlLiBUaGUgY2F2ZWF0IGhlcmVcbiAgICAgICAgLy8gaXMgdGhhdCBvdGhlciBoYXNoIGhpc3RvcmllcyBpbiB0aGUgcGFnZSB3aWxsIGNvbnNpZGVyIGl0IGEgUE9QLlxuICAgICAgICBpZ25vcmVQYXRoID0gcGF0aDtcbiAgICAgICAgcmVwbGFjZUhhc2hQYXRoKGVuY29kZWRQYXRoKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHByZXZJbmRleCA9IGFsbFBhdGhzLmluZGV4T2YoY3JlYXRlUGF0aChoaXN0b3J5LmxvY2F0aW9uKSk7XG5cbiAgICAgIGlmIChwcmV2SW5kZXggIT09IC0xKSBhbGxQYXRoc1twcmV2SW5kZXhdID0gcGF0aDtcblxuICAgICAgc2V0U3RhdGUoeyBhY3Rpb246IGFjdGlvbiwgbG9jYXRpb246IGxvY2F0aW9uIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBnbyA9IGZ1bmN0aW9uIGdvKG4pIHtcbiAgICB3YXJuaW5nKGNhbkdvV2l0aG91dFJlbG9hZCwgJ0hhc2ggaGlzdG9yeSBnbyhuKSBjYXVzZXMgYSBmdWxsIHBhZ2UgcmVsb2FkIGluIHRoaXMgYnJvd3NlcicpO1xuXG4gICAgZ2xvYmFsSGlzdG9yeS5nbyhuKTtcbiAgfTtcblxuICB2YXIgZ29CYWNrID0gZnVuY3Rpb24gZ29CYWNrKCkge1xuICAgIHJldHVybiBnbygtMSk7XG4gIH07XG5cbiAgdmFyIGdvRm9yd2FyZCA9IGZ1bmN0aW9uIGdvRm9yd2FyZCgpIHtcbiAgICByZXR1cm4gZ28oMSk7XG4gIH07XG5cbiAgdmFyIGxpc3RlbmVyQ291bnQgPSAwO1xuXG4gIHZhciBjaGVja0RPTUxpc3RlbmVycyA9IGZ1bmN0aW9uIGNoZWNrRE9NTGlzdGVuZXJzKGRlbHRhKSB7XG4gICAgbGlzdGVuZXJDb3VudCArPSBkZWx0YTtcblxuICAgIGlmIChsaXN0ZW5lckNvdW50ID09PSAxKSB7XG4gICAgICBhZGRFdmVudExpc3RlbmVyKHdpbmRvdywgSGFzaENoYW5nZUV2ZW50LCBoYW5kbGVIYXNoQ2hhbmdlKTtcbiAgICB9IGVsc2UgaWYgKGxpc3RlbmVyQ291bnQgPT09IDApIHtcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIod2luZG93LCBIYXNoQ2hhbmdlRXZlbnQsIGhhbmRsZUhhc2hDaGFuZ2UpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgaXNCbG9ja2VkID0gZmFsc2U7XG5cbiAgdmFyIGJsb2NrID0gZnVuY3Rpb24gYmxvY2soKSB7XG4gICAgdmFyIHByb21wdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZmFsc2U7XG5cbiAgICB2YXIgdW5ibG9jayA9IHRyYW5zaXRpb25NYW5hZ2VyLnNldFByb21wdChwcm9tcHQpO1xuXG4gICAgaWYgKCFpc0Jsb2NrZWQpIHtcbiAgICAgIGNoZWNrRE9NTGlzdGVuZXJzKDEpO1xuICAgICAgaXNCbG9ja2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGlzQmxvY2tlZCkge1xuICAgICAgICBpc0Jsb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgY2hlY2tET01MaXN0ZW5lcnMoLTEpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdW5ibG9jaygpO1xuICAgIH07XG4gIH07XG5cbiAgdmFyIGxpc3RlbiA9IGZ1bmN0aW9uIGxpc3RlbihsaXN0ZW5lcikge1xuICAgIHZhciB1bmxpc3RlbiA9IHRyYW5zaXRpb25NYW5hZ2VyLmFwcGVuZExpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICBjaGVja0RPTUxpc3RlbmVycygxKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGVja0RPTUxpc3RlbmVycygtMSk7XG4gICAgICB1bmxpc3RlbigpO1xuICAgIH07XG4gIH07XG5cbiAgdmFyIGhpc3RvcnkgPSB7XG4gICAgbGVuZ3RoOiBnbG9iYWxIaXN0b3J5Lmxlbmd0aCxcbiAgICBhY3Rpb246ICdQT1AnLFxuICAgIGxvY2F0aW9uOiBpbml0aWFsTG9jYXRpb24sXG4gICAgY3JlYXRlSHJlZjogY3JlYXRlSHJlZixcbiAgICBwdXNoOiBwdXNoLFxuICAgIHJlcGxhY2U6IHJlcGxhY2UsXG4gICAgZ286IGdvLFxuICAgIGdvQmFjazogZ29CYWNrLFxuICAgIGdvRm9yd2FyZDogZ29Gb3J3YXJkLFxuICAgIGJsb2NrOiBibG9jayxcbiAgICBsaXN0ZW46IGxpc3RlblxuICB9O1xuXG4gIHJldHVybiBoaXN0b3J5O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlSGFzaEhpc3Rvcnk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2hpc3RvcnkvZXMvY3JlYXRlSGFzaEhpc3RvcnkuanNcbi8vIG1vZHVsZSBpZCA9IDEzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsInZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuaW1wb3J0IHdhcm5pbmcgZnJvbSAnd2FybmluZyc7XG5pbXBvcnQgeyBjcmVhdGVQYXRoIH0gZnJvbSAnLi9QYXRoVXRpbHMnO1xuaW1wb3J0IHsgY3JlYXRlTG9jYXRpb24gfSBmcm9tICcuL0xvY2F0aW9uVXRpbHMnO1xuaW1wb3J0IGNyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyIGZyb20gJy4vY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXInO1xuXG52YXIgY2xhbXAgPSBmdW5jdGlvbiBjbGFtcChuLCBsb3dlckJvdW5kLCB1cHBlckJvdW5kKSB7XG4gIHJldHVybiBNYXRoLm1pbihNYXRoLm1heChuLCBsb3dlckJvdW5kKSwgdXBwZXJCb3VuZCk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBoaXN0b3J5IG9iamVjdCB0aGF0IHN0b3JlcyBsb2NhdGlvbnMgaW4gbWVtb3J5LlxuICovXG52YXIgY3JlYXRlTWVtb3J5SGlzdG9yeSA9IGZ1bmN0aW9uIGNyZWF0ZU1lbW9yeUhpc3RvcnkoKSB7XG4gIHZhciBwcm9wcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gIHZhciBnZXRVc2VyQ29uZmlybWF0aW9uID0gcHJvcHMuZ2V0VXNlckNvbmZpcm1hdGlvbixcbiAgICAgIF9wcm9wcyRpbml0aWFsRW50cmllcyA9IHByb3BzLmluaXRpYWxFbnRyaWVzLFxuICAgICAgaW5pdGlhbEVudHJpZXMgPSBfcHJvcHMkaW5pdGlhbEVudHJpZXMgPT09IHVuZGVmaW5lZCA/IFsnLyddIDogX3Byb3BzJGluaXRpYWxFbnRyaWVzLFxuICAgICAgX3Byb3BzJGluaXRpYWxJbmRleCA9IHByb3BzLmluaXRpYWxJbmRleCxcbiAgICAgIGluaXRpYWxJbmRleCA9IF9wcm9wcyRpbml0aWFsSW5kZXggPT09IHVuZGVmaW5lZCA/IDAgOiBfcHJvcHMkaW5pdGlhbEluZGV4LFxuICAgICAgX3Byb3BzJGtleUxlbmd0aCA9IHByb3BzLmtleUxlbmd0aCxcbiAgICAgIGtleUxlbmd0aCA9IF9wcm9wcyRrZXlMZW5ndGggPT09IHVuZGVmaW5lZCA/IDYgOiBfcHJvcHMka2V5TGVuZ3RoO1xuXG5cbiAgdmFyIHRyYW5zaXRpb25NYW5hZ2VyID0gY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIoKTtcblxuICB2YXIgc2V0U3RhdGUgPSBmdW5jdGlvbiBzZXRTdGF0ZShuZXh0U3RhdGUpIHtcbiAgICBfZXh0ZW5kcyhoaXN0b3J5LCBuZXh0U3RhdGUpO1xuXG4gICAgaGlzdG9yeS5sZW5ndGggPSBoaXN0b3J5LmVudHJpZXMubGVuZ3RoO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIubm90aWZ5TGlzdGVuZXJzKGhpc3RvcnkubG9jYXRpb24sIGhpc3RvcnkuYWN0aW9uKTtcbiAgfTtcblxuICB2YXIgY3JlYXRlS2V5ID0gZnVuY3Rpb24gY3JlYXRlS2V5KCkge1xuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwga2V5TGVuZ3RoKTtcbiAgfTtcblxuICB2YXIgaW5kZXggPSBjbGFtcChpbml0aWFsSW5kZXgsIDAsIGluaXRpYWxFbnRyaWVzLmxlbmd0aCAtIDEpO1xuICB2YXIgZW50cmllcyA9IGluaXRpYWxFbnRyaWVzLm1hcChmdW5jdGlvbiAoZW50cnkpIHtcbiAgICByZXR1cm4gdHlwZW9mIGVudHJ5ID09PSAnc3RyaW5nJyA/IGNyZWF0ZUxvY2F0aW9uKGVudHJ5LCB1bmRlZmluZWQsIGNyZWF0ZUtleSgpKSA6IGNyZWF0ZUxvY2F0aW9uKGVudHJ5LCB1bmRlZmluZWQsIGVudHJ5LmtleSB8fCBjcmVhdGVLZXkoKSk7XG4gIH0pO1xuXG4gIC8vIFB1YmxpYyBpbnRlcmZhY2VcblxuICB2YXIgY3JlYXRlSHJlZiA9IGNyZWF0ZVBhdGg7XG5cbiAgdmFyIHB1c2ggPSBmdW5jdGlvbiBwdXNoKHBhdGgsIHN0YXRlKSB7XG4gICAgd2FybmluZyghKCh0eXBlb2YgcGF0aCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YocGF0aCkpID09PSAnb2JqZWN0JyAmJiBwYXRoLnN0YXRlICE9PSB1bmRlZmluZWQgJiYgc3RhdGUgIT09IHVuZGVmaW5lZCksICdZb3Ugc2hvdWxkIGF2b2lkIHByb3ZpZGluZyBhIDJuZCBzdGF0ZSBhcmd1bWVudCB0byBwdXNoIHdoZW4gdGhlIDFzdCAnICsgJ2FyZ3VtZW50IGlzIGEgbG9jYXRpb24tbGlrZSBvYmplY3QgdGhhdCBhbHJlYWR5IGhhcyBzdGF0ZTsgaXQgaXMgaWdub3JlZCcpO1xuXG4gICAgdmFyIGFjdGlvbiA9ICdQVVNIJztcbiAgICB2YXIgbG9jYXRpb24gPSBjcmVhdGVMb2NhdGlvbihwYXRoLCBzdGF0ZSwgY3JlYXRlS2V5KCksIGhpc3RvcnkubG9jYXRpb24pO1xuXG4gICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmICghb2spIHJldHVybjtcblxuICAgICAgdmFyIHByZXZJbmRleCA9IGhpc3RvcnkuaW5kZXg7XG4gICAgICB2YXIgbmV4dEluZGV4ID0gcHJldkluZGV4ICsgMTtcblxuICAgICAgdmFyIG5leHRFbnRyaWVzID0gaGlzdG9yeS5lbnRyaWVzLnNsaWNlKDApO1xuICAgICAgaWYgKG5leHRFbnRyaWVzLmxlbmd0aCA+IG5leHRJbmRleCkge1xuICAgICAgICBuZXh0RW50cmllcy5zcGxpY2UobmV4dEluZGV4LCBuZXh0RW50cmllcy5sZW5ndGggLSBuZXh0SW5kZXgsIGxvY2F0aW9uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHRFbnRyaWVzLnB1c2gobG9jYXRpb24pO1xuICAgICAgfVxuXG4gICAgICBzZXRTdGF0ZSh7XG4gICAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sXG4gICAgICAgIGluZGV4OiBuZXh0SW5kZXgsXG4gICAgICAgIGVudHJpZXM6IG5leHRFbnRyaWVzXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgcmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UocGF0aCwgc3RhdGUpIHtcbiAgICB3YXJuaW5nKCEoKHR5cGVvZiBwYXRoID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihwYXRoKSkgPT09ICdvYmplY3QnICYmIHBhdGguc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBzdGF0ZSAhPT0gdW5kZWZpbmVkKSwgJ1lvdSBzaG91bGQgYXZvaWQgcHJvdmlkaW5nIGEgMm5kIHN0YXRlIGFyZ3VtZW50IHRvIHJlcGxhY2Ugd2hlbiB0aGUgMXN0ICcgKyAnYXJndW1lbnQgaXMgYSBsb2NhdGlvbi1saWtlIG9iamVjdCB0aGF0IGFscmVhZHkgaGFzIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7XG5cbiAgICB2YXIgYWN0aW9uID0gJ1JFUExBQ0UnO1xuICAgIHZhciBsb2NhdGlvbiA9IGNyZWF0ZUxvY2F0aW9uKHBhdGgsIHN0YXRlLCBjcmVhdGVLZXkoKSwgaGlzdG9yeS5sb2NhdGlvbik7XG5cbiAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKCFvaykgcmV0dXJuO1xuXG4gICAgICBoaXN0b3J5LmVudHJpZXNbaGlzdG9yeS5pbmRleF0gPSBsb2NhdGlvbjtcblxuICAgICAgc2V0U3RhdGUoeyBhY3Rpb246IGFjdGlvbiwgbG9jYXRpb246IGxvY2F0aW9uIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBnbyA9IGZ1bmN0aW9uIGdvKG4pIHtcbiAgICB2YXIgbmV4dEluZGV4ID0gY2xhbXAoaGlzdG9yeS5pbmRleCArIG4sIDAsIGhpc3RvcnkuZW50cmllcy5sZW5ndGggLSAxKTtcblxuICAgIHZhciBhY3Rpb24gPSAnUE9QJztcbiAgICB2YXIgbG9jYXRpb24gPSBoaXN0b3J5LmVudHJpZXNbbmV4dEluZGV4XTtcblxuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAob2spIHtcbiAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgICAgIGxvY2F0aW9uOiBsb2NhdGlvbixcbiAgICAgICAgICBpbmRleDogbmV4dEluZGV4XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTWltaWMgdGhlIGJlaGF2aW9yIG9mIERPTSBoaXN0b3JpZXMgYnlcbiAgICAgICAgLy8gY2F1c2luZyBhIHJlbmRlciBhZnRlciBhIGNhbmNlbGxlZCBQT1AuXG4gICAgICAgIHNldFN0YXRlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdvQmFjayA9IGZ1bmN0aW9uIGdvQmFjaygpIHtcbiAgICByZXR1cm4gZ28oLTEpO1xuICB9O1xuXG4gIHZhciBnb0ZvcndhcmQgPSBmdW5jdGlvbiBnb0ZvcndhcmQoKSB7XG4gICAgcmV0dXJuIGdvKDEpO1xuICB9O1xuXG4gIHZhciBjYW5HbyA9IGZ1bmN0aW9uIGNhbkdvKG4pIHtcbiAgICB2YXIgbmV4dEluZGV4ID0gaGlzdG9yeS5pbmRleCArIG47XG4gICAgcmV0dXJuIG5leHRJbmRleCA+PSAwICYmIG5leHRJbmRleCA8IGhpc3RvcnkuZW50cmllcy5sZW5ndGg7XG4gIH07XG5cbiAgdmFyIGJsb2NrID0gZnVuY3Rpb24gYmxvY2soKSB7XG4gICAgdmFyIHByb21wdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZmFsc2U7XG4gICAgcmV0dXJuIHRyYW5zaXRpb25NYW5hZ2VyLnNldFByb21wdChwcm9tcHQpO1xuICB9O1xuXG4gIHZhciBsaXN0ZW4gPSBmdW5jdGlvbiBsaXN0ZW4obGlzdGVuZXIpIHtcbiAgICByZXR1cm4gdHJhbnNpdGlvbk1hbmFnZXIuYXBwZW5kTGlzdGVuZXIobGlzdGVuZXIpO1xuICB9O1xuXG4gIHZhciBoaXN0b3J5ID0ge1xuICAgIGxlbmd0aDogZW50cmllcy5sZW5ndGgsXG4gICAgYWN0aW9uOiAnUE9QJyxcbiAgICBsb2NhdGlvbjogZW50cmllc1tpbmRleF0sXG4gICAgaW5kZXg6IGluZGV4LFxuICAgIGVudHJpZXM6IGVudHJpZXMsXG4gICAgY3JlYXRlSHJlZjogY3JlYXRlSHJlZixcbiAgICBwdXNoOiBwdXNoLFxuICAgIHJlcGxhY2U6IHJlcGxhY2UsXG4gICAgZ286IGdvLFxuICAgIGdvQmFjazogZ29CYWNrLFxuICAgIGdvRm9yd2FyZDogZ29Gb3J3YXJkLFxuICAgIGNhbkdvOiBjYW5HbyxcbiAgICBibG9jazogYmxvY2ssXG4gICAgbGlzdGVuOiBsaXN0ZW5cbiAgfTtcblxuICByZXR1cm4gaGlzdG9yeTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZU1lbW9yeUhpc3Rvcnk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2hpc3RvcnkvZXMvY3JlYXRlTWVtb3J5SGlzdG9yeS5qc1xuLy8gbW9kdWxlIGlkID0gMTQwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2V4dGVuZHMnKTtcblxudmFyIF9leHRlbmRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4dGVuZHMyKTtcblxudmFyIF9rZXlzID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzJyk7XG5cbnZhciBfa2V5czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9rZXlzKTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvb2JqZWN0V2l0aG91dFByb3BlcnRpZXMnKTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RXaXRob3V0UHJvcGVydGllczIpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mJyk7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjaycpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7XG5cbnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzJyk7XG5cbnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuJyk7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7XG5cbnZhciBfaW5oZXJpdHMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzJyk7XG5cbnZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTtcblxuZXhwb3J0cy5nZXRTdHlsZXMgPSBnZXRTdHlsZXM7XG5cbnZhciBfc2ltcGxlQXNzaWduID0gcmVxdWlyZSgnc2ltcGxlLWFzc2lnbicpO1xuXG52YXIgX3NpbXBsZUFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaW1wbGVBc3NpZ24pO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX0ljb25CdXR0b24gPSByZXF1aXJlKCcuLi9JY29uQnV0dG9uJyk7XG5cbnZhciBfSWNvbkJ1dHRvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9JY29uQnV0dG9uKTtcblxudmFyIF9tZW51ID0gcmVxdWlyZSgnLi4vc3ZnLWljb25zL25hdmlnYXRpb24vbWVudScpO1xuXG52YXIgX21lbnUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWVudSk7XG5cbnZhciBfUGFwZXIgPSByZXF1aXJlKCcuLi9QYXBlcicpO1xuXG52YXIgX1BhcGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BhcGVyKTtcblxudmFyIF9wcm9wVHlwZXMzID0gcmVxdWlyZSgnLi4vdXRpbHMvcHJvcFR5cGVzJyk7XG5cbnZhciBfcHJvcFR5cGVzNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlczMpO1xuXG52YXIgX3dhcm5pbmcgPSByZXF1aXJlKCd3YXJuaW5nJyk7XG5cbnZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gZ2V0U3R5bGVzKHByb3BzLCBjb250ZXh0KSB7XG4gIHZhciBfY29udGV4dCRtdWlUaGVtZSA9IGNvbnRleHQubXVpVGhlbWUsXG4gICAgICBhcHBCYXIgPSBfY29udGV4dCRtdWlUaGVtZS5hcHBCYXIsXG4gICAgICBpY29uQnV0dG9uU2l6ZSA9IF9jb250ZXh0JG11aVRoZW1lLmJ1dHRvbi5pY29uQnV0dG9uU2l6ZSxcbiAgICAgIHpJbmRleCA9IF9jb250ZXh0JG11aVRoZW1lLnpJbmRleDtcblxuXG4gIHZhciBmbGF0QnV0dG9uU2l6ZSA9IDM2O1xuXG4gIHZhciBzdHlsZXMgPSB7XG4gICAgcm9vdDoge1xuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICB6SW5kZXg6IHpJbmRleC5hcHBCYXIsXG4gICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiBhcHBCYXIuY29sb3IsXG4gICAgICBwYWRkaW5nTGVmdDogYXBwQmFyLnBhZGRpbmcsXG4gICAgICBwYWRkaW5nUmlnaHQ6IGFwcEJhci5wYWRkaW5nXG4gICAgfSxcbiAgICB0aXRsZToge1xuICAgICAgd2hpdGVTcGFjZTogJ25vd3JhcCcsXG4gICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICB0ZXh0T3ZlcmZsb3c6ICdlbGxpcHNpcycsXG4gICAgICBtYXJnaW46IDAsXG4gICAgICBwYWRkaW5nVG9wOiAwLFxuICAgICAgbGV0dGVyU3BhY2luZzogMCxcbiAgICAgIGZvbnRTaXplOiAyNCxcbiAgICAgIGZvbnRXZWlnaHQ6IGFwcEJhci50aXRsZUZvbnRXZWlnaHQsXG4gICAgICBjb2xvcjogYXBwQmFyLnRleHRDb2xvcixcbiAgICAgIGhlaWdodDogYXBwQmFyLmhlaWdodCxcbiAgICAgIGxpbmVIZWlnaHQ6IGFwcEJhci5oZWlnaHQgKyAncHgnXG4gICAgfSxcbiAgICBtYWluRWxlbWVudDoge1xuICAgICAgYm94RmxleDogMSxcbiAgICAgIGZsZXg6ICcxJ1xuICAgIH0sXG4gICAgaWNvbkJ1dHRvblN0eWxlOiB7XG4gICAgICBtYXJnaW5Ub3A6IChhcHBCYXIuaGVpZ2h0IC0gaWNvbkJ1dHRvblNpemUpIC8gMixcbiAgICAgIG1hcmdpblJpZ2h0OiA4LFxuICAgICAgbWFyZ2luTGVmdDogLTE2XG4gICAgfSxcbiAgICBpY29uQnV0dG9uSWNvblN0eWxlOiB7XG4gICAgICBmaWxsOiBhcHBCYXIudGV4dENvbG9yLFxuICAgICAgY29sb3I6IGFwcEJhci50ZXh0Q29sb3JcbiAgICB9LFxuICAgIGZsYXRCdXR0b246IHtcbiAgICAgIGNvbG9yOiBhcHBCYXIudGV4dENvbG9yLFxuICAgICAgbWFyZ2luVG9wOiAoaWNvbkJ1dHRvblNpemUgLSBmbGF0QnV0dG9uU2l6ZSkgLyAyICsgMVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gc3R5bGVzO1xufVxuXG52YXIgQXBwQmFyID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoQXBwQmFyLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBBcHBCYXIoKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgQXBwQmFyKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoX3JlZiA9IEFwcEJhci5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoQXBwQmFyKSkuY2FsbC5hcHBseShfcmVmLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuaGFuZGxlVG91Y2hUYXBMZWZ0SWNvbkJ1dHRvbiA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKF90aGlzLnByb3BzLm9uTGVmdEljb25CdXR0b25Ub3VjaFRhcCkge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbkxlZnRJY29uQnV0dG9uVG91Y2hUYXAoZXZlbnQpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmhhbmRsZVRvdWNoVGFwUmlnaHRJY29uQnV0dG9uID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoX3RoaXMucHJvcHMub25SaWdodEljb25CdXR0b25Ub3VjaFRhcCkge1xuICAgICAgICBfdGhpcy5wcm9wcy5vblJpZ2h0SWNvbkJ1dHRvblRvdWNoVGFwKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9LCBfdGhpcy5oYW5kbGVUaXRsZVRvdWNoVGFwID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoX3RoaXMucHJvcHMub25UaXRsZVRvdWNoVGFwKSB7XG4gICAgICAgIF90aGlzLnByb3BzLm9uVGl0bGVUb3VjaFRhcChldmVudCk7XG4gICAgICB9XG4gICAgfSwgX3RlbXApLCAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKEFwcEJhciwgW3tcbiAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gKDAsIF93YXJuaW5nMi5kZWZhdWx0KSghdGhpcy5wcm9wcy5pY29uRWxlbWVudExlZnQgfHwgIXRoaXMucHJvcHMuaWNvbkNsYXNzTmFtZUxlZnQsICdNYXRlcmlhbC1VSTogUHJvcGVydGllcyBpY29uRWxlbWVudExlZnRcXG4gICAgICBhbmQgaWNvbkNsYXNzTmFtZUxlZnQgY2Fubm90IGJlIHNpbXVsdGFuZW91c2x5IGRlZmluZWQuIFBsZWFzZSB1c2Ugb25lIG9yIHRoZSBvdGhlci4nKSA6IHZvaWQgMDtcblxuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gKDAsIF93YXJuaW5nMi5kZWZhdWx0KSghdGhpcy5wcm9wcy5pY29uRWxlbWVudFJpZ2h0IHx8ICF0aGlzLnByb3BzLmljb25DbGFzc05hbWVSaWdodCwgJ01hdGVyaWFsLVVJOiBQcm9wZXJ0aWVzIGljb25FbGVtZW50UmlnaHRcXG4gICAgICBhbmQgaWNvbkNsYXNzTmFtZVJpZ2h0IGNhbm5vdCBiZSBzaW11bHRhbmVvdXNseSBkZWZpbmVkLiBQbGVhc2UgdXNlIG9uZSBvciB0aGUgb3RoZXIuJykgOiB2b2lkIDA7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgdGl0bGUgPSBfcHJvcHMudGl0bGUsXG4gICAgICAgICAgdGl0bGVTdHlsZSA9IF9wcm9wcy50aXRsZVN0eWxlLFxuICAgICAgICAgIGljb25TdHlsZUxlZnQgPSBfcHJvcHMuaWNvblN0eWxlTGVmdCxcbiAgICAgICAgICBpY29uU3R5bGVSaWdodCA9IF9wcm9wcy5pY29uU3R5bGVSaWdodCxcbiAgICAgICAgICBvblRpdGxlVG91Y2hUYXAgPSBfcHJvcHMub25UaXRsZVRvdWNoVGFwLFxuICAgICAgICAgIHNob3dNZW51SWNvbkJ1dHRvbiA9IF9wcm9wcy5zaG93TWVudUljb25CdXR0b24sXG4gICAgICAgICAgaWNvbkVsZW1lbnRMZWZ0ID0gX3Byb3BzLmljb25FbGVtZW50TGVmdCxcbiAgICAgICAgICBpY29uRWxlbWVudFJpZ2h0ID0gX3Byb3BzLmljb25FbGVtZW50UmlnaHQsXG4gICAgICAgICAgaWNvbkNsYXNzTmFtZUxlZnQgPSBfcHJvcHMuaWNvbkNsYXNzTmFtZUxlZnQsXG4gICAgICAgICAgaWNvbkNsYXNzTmFtZVJpZ2h0ID0gX3Byb3BzLmljb25DbGFzc05hbWVSaWdodCxcbiAgICAgICAgICBvbkxlZnRJY29uQnV0dG9uVG91Y2hUYXAgPSBfcHJvcHMub25MZWZ0SWNvbkJ1dHRvblRvdWNoVGFwLFxuICAgICAgICAgIG9uUmlnaHRJY29uQnV0dG9uVG91Y2hUYXAgPSBfcHJvcHMub25SaWdodEljb25CdXR0b25Ub3VjaFRhcCxcbiAgICAgICAgICBjbGFzc05hbWUgPSBfcHJvcHMuY2xhc3NOYW1lLFxuICAgICAgICAgIHN0eWxlID0gX3Byb3BzLnN0eWxlLFxuICAgICAgICAgIHpEZXB0aCA9IF9wcm9wcy56RGVwdGgsXG4gICAgICAgICAgY2hpbGRyZW4gPSBfcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgICAgb3RoZXIgPSAoMCwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMy5kZWZhdWx0KShfcHJvcHMsIFsndGl0bGUnLCAndGl0bGVTdHlsZScsICdpY29uU3R5bGVMZWZ0JywgJ2ljb25TdHlsZVJpZ2h0JywgJ29uVGl0bGVUb3VjaFRhcCcsICdzaG93TWVudUljb25CdXR0b24nLCAnaWNvbkVsZW1lbnRMZWZ0JywgJ2ljb25FbGVtZW50UmlnaHQnLCAnaWNvbkNsYXNzTmFtZUxlZnQnLCAnaWNvbkNsYXNzTmFtZVJpZ2h0JywgJ29uTGVmdEljb25CdXR0b25Ub3VjaFRhcCcsICdvblJpZ2h0SWNvbkJ1dHRvblRvdWNoVGFwJywgJ2NsYXNzTmFtZScsICdzdHlsZScsICd6RGVwdGgnLCAnY2hpbGRyZW4nXSk7XG4gICAgICB2YXIgcHJlcGFyZVN0eWxlcyA9IHRoaXMuY29udGV4dC5tdWlUaGVtZS5wcmVwYXJlU3R5bGVzO1xuXG4gICAgICB2YXIgc3R5bGVzID0gZ2V0U3R5bGVzKHRoaXMucHJvcHMsIHRoaXMuY29udGV4dCk7XG5cbiAgICAgIHZhciBtZW51RWxlbWVudExlZnQgPSB2b2lkIDA7XG4gICAgICB2YXIgbWVudUVsZW1lbnRSaWdodCA9IHZvaWQgMDtcblxuICAgICAgLy8gSWYgdGhlIHRpdGxlIGlzIGEgc3RyaW5nLCB3cmFwIGluIGFuIGgxIHRhZy5cbiAgICAgIC8vIElmIG5vdCwgd3JhcCBpbiBhIGRpdiB0YWcuXG4gICAgICB2YXIgdGl0bGVDb21wb25lbnQgPSB0eXBlb2YgdGl0bGUgPT09ICdzdHJpbmcnIHx8IHRpdGxlIGluc3RhbmNlb2YgU3RyaW5nID8gJ2gxJyA6ICdkaXYnO1xuXG4gICAgICB2YXIgdGl0bGVFbGVtZW50ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQodGl0bGVDb21wb25lbnQsIHtcbiAgICAgICAgb25Ub3VjaFRhcDogdGhpcy5oYW5kbGVUaXRsZVRvdWNoVGFwLFxuICAgICAgICBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLnRpdGxlLCBzdHlsZXMubWFpbkVsZW1lbnQsIHRpdGxlU3R5bGUpKVxuICAgICAgfSwgdGl0bGUpO1xuXG4gICAgICB2YXIgaWNvbkxlZnRTdHlsZSA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgc3R5bGVzLmljb25CdXR0b25TdHlsZSwgaWNvblN0eWxlTGVmdCk7XG5cbiAgICAgIGlmIChzaG93TWVudUljb25CdXR0b24pIHtcbiAgICAgICAgaWYgKGljb25FbGVtZW50TGVmdCkge1xuICAgICAgICAgIHZhciBpY29uRWxlbWVudExlZnRQcm9wcyA9IHt9O1xuXG4gICAgICAgICAgaWYgKGljb25FbGVtZW50TGVmdC50eXBlLm11aU5hbWUgPT09ICdJY29uQnV0dG9uJykge1xuICAgICAgICAgICAgdmFyIGljb25FbGVtTGVmdENoaWxkcmVuID0gaWNvbkVsZW1lbnRMZWZ0LnByb3BzLmNoaWxkcmVuO1xuICAgICAgICAgICAgdmFyIGljb25CdXR0b25JY29uU3R5bGUgPSAhKGljb25FbGVtTGVmdENoaWxkcmVuICYmIGljb25FbGVtTGVmdENoaWxkcmVuLnByb3BzICYmIGljb25FbGVtTGVmdENoaWxkcmVuLnByb3BzLmNvbG9yKSA/IHN0eWxlcy5pY29uQnV0dG9uSWNvblN0eWxlIDogbnVsbDtcblxuICAgICAgICAgICAgaWNvbkVsZW1lbnRMZWZ0UHJvcHMuaWNvblN0eWxlID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBpY29uQnV0dG9uSWNvblN0eWxlLCBpY29uRWxlbWVudExlZnQucHJvcHMuaWNvblN0eWxlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWljb25FbGVtZW50TGVmdC5wcm9wcy5vblRvdWNoVGFwICYmIHRoaXMucHJvcHMub25MZWZ0SWNvbkJ1dHRvblRvdWNoVGFwKSB7XG4gICAgICAgICAgICBpY29uRWxlbWVudExlZnRQcm9wcy5vblRvdWNoVGFwID0gdGhpcy5oYW5kbGVUb3VjaFRhcExlZnRJY29uQnV0dG9uO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG1lbnVFbGVtZW50TGVmdCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7IHN0eWxlOiBwcmVwYXJlU3R5bGVzKGljb25MZWZ0U3R5bGUpIH0sXG4gICAgICAgICAgICAoMCwgX2tleXMyLmRlZmF1bHQpKGljb25FbGVtZW50TGVmdFByb3BzKS5sZW5ndGggPiAwID8gKDAsIF9yZWFjdC5jbG9uZUVsZW1lbnQpKGljb25FbGVtZW50TGVmdCwgaWNvbkVsZW1lbnRMZWZ0UHJvcHMpIDogaWNvbkVsZW1lbnRMZWZ0XG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtZW51RWxlbWVudExlZnQgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgIF9JY29uQnV0dG9uMi5kZWZhdWx0LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzdHlsZTogaWNvbkxlZnRTdHlsZSxcbiAgICAgICAgICAgICAgaWNvblN0eWxlOiBzdHlsZXMuaWNvbkJ1dHRvbkljb25TdHlsZSxcbiAgICAgICAgICAgICAgaWNvbkNsYXNzTmFtZTogaWNvbkNsYXNzTmFtZUxlZnQsXG4gICAgICAgICAgICAgIG9uVG91Y2hUYXA6IHRoaXMuaGFuZGxlVG91Y2hUYXBMZWZ0SWNvbkJ1dHRvblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGljb25DbGFzc05hbWVMZWZ0ID8gJycgOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfbWVudTIuZGVmYXVsdCwgeyBzdHlsZTogKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBzdHlsZXMuaWNvbkJ1dHRvbkljb25TdHlsZSkgfSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBpY29uUmlnaHRTdHlsZSA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgc3R5bGVzLmljb25CdXR0b25TdHlsZSwge1xuICAgICAgICBtYXJnaW5SaWdodDogLTE2LFxuICAgICAgICBtYXJnaW5MZWZ0OiAnYXV0bydcbiAgICAgIH0sIGljb25TdHlsZVJpZ2h0KTtcblxuICAgICAgaWYgKGljb25FbGVtZW50UmlnaHQpIHtcbiAgICAgICAgdmFyIGljb25FbGVtZW50UmlnaHRQcm9wcyA9IHt9O1xuXG4gICAgICAgIHN3aXRjaCAoaWNvbkVsZW1lbnRSaWdodC50eXBlLm11aU5hbWUpIHtcbiAgICAgICAgICBjYXNlICdJY29uTWVudSc6XG4gICAgICAgICAgY2FzZSAnSWNvbkJ1dHRvbic6XG4gICAgICAgICAgICB2YXIgaWNvbkVsZW1SaWdodENoaWxkcmVuID0gaWNvbkVsZW1lbnRSaWdodC5wcm9wcy5jaGlsZHJlbjtcbiAgICAgICAgICAgIHZhciBfaWNvbkJ1dHRvbkljb25TdHlsZSA9ICEoaWNvbkVsZW1SaWdodENoaWxkcmVuICYmIGljb25FbGVtUmlnaHRDaGlsZHJlbi5wcm9wcyAmJiBpY29uRWxlbVJpZ2h0Q2hpbGRyZW4ucHJvcHMuY29sb3IpID8gc3R5bGVzLmljb25CdXR0b25JY29uU3R5bGUgOiBudWxsO1xuXG4gICAgICAgICAgICBpY29uRWxlbWVudFJpZ2h0UHJvcHMuaWNvblN0eWxlID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBfaWNvbkJ1dHRvbkljb25TdHlsZSwgaWNvbkVsZW1lbnRSaWdodC5wcm9wcy5pY29uU3R5bGUpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdGbGF0QnV0dG9uJzpcbiAgICAgICAgICAgIGljb25FbGVtZW50UmlnaHRQcm9wcy5zdHlsZSA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgc3R5bGVzLmZsYXRCdXR0b24sIGljb25FbGVtZW50UmlnaHQucHJvcHMuc3R5bGUpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpY29uRWxlbWVudFJpZ2h0LnByb3BzLm9uVG91Y2hUYXAgJiYgdGhpcy5wcm9wcy5vblJpZ2h0SWNvbkJ1dHRvblRvdWNoVGFwKSB7XG4gICAgICAgICAgaWNvbkVsZW1lbnRSaWdodFByb3BzLm9uVG91Y2hUYXAgPSB0aGlzLmhhbmRsZVRvdWNoVGFwUmlnaHRJY29uQnV0dG9uO1xuICAgICAgICB9XG5cbiAgICAgICAgbWVudUVsZW1lbnRSaWdodCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIHsgc3R5bGU6IHByZXBhcmVTdHlsZXMoaWNvblJpZ2h0U3R5bGUpIH0sXG4gICAgICAgICAgKDAsIF9rZXlzMi5kZWZhdWx0KShpY29uRWxlbWVudFJpZ2h0UHJvcHMpLmxlbmd0aCA+IDAgPyAoMCwgX3JlYWN0LmNsb25lRWxlbWVudCkoaWNvbkVsZW1lbnRSaWdodCwgaWNvbkVsZW1lbnRSaWdodFByb3BzKSA6IGljb25FbGVtZW50UmlnaHRcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoaWNvbkNsYXNzTmFtZVJpZ2h0KSB7XG4gICAgICAgIG1lbnVFbGVtZW50UmlnaHQgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfSWNvbkJ1dHRvbjIuZGVmYXVsdCwge1xuICAgICAgICAgIHN0eWxlOiBpY29uUmlnaHRTdHlsZSxcbiAgICAgICAgICBpY29uU3R5bGU6IHN0eWxlcy5pY29uQnV0dG9uSWNvblN0eWxlLFxuICAgICAgICAgIGljb25DbGFzc05hbWU6IGljb25DbGFzc05hbWVSaWdodCxcbiAgICAgICAgICBvblRvdWNoVGFwOiB0aGlzLmhhbmRsZVRvdWNoVGFwUmlnaHRJY29uQnV0dG9uXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgIF9QYXBlcjIuZGVmYXVsdCxcbiAgICAgICAgKDAsIF9leHRlbmRzMy5kZWZhdWx0KSh7fSwgb3RoZXIsIHtcbiAgICAgICAgICByb3VuZGVkOiBmYWxzZSxcbiAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgICBzdHlsZTogKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBzdHlsZXMucm9vdCwgc3R5bGUpLFxuICAgICAgICAgIHpEZXB0aDogekRlcHRoXG4gICAgICAgIH0pLFxuICAgICAgICBtZW51RWxlbWVudExlZnQsXG4gICAgICAgIHRpdGxlRWxlbWVudCxcbiAgICAgICAgbWVudUVsZW1lbnRSaWdodCxcbiAgICAgICAgY2hpbGRyZW5cbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBBcHBCYXI7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5BcHBCYXIubXVpTmFtZSA9ICdBcHBCYXInO1xuQXBwQmFyLmRlZmF1bHRQcm9wcyA9IHtcbiAgc2hvd01lbnVJY29uQnV0dG9uOiB0cnVlLFxuICB0aXRsZTogJycsXG4gIHpEZXB0aDogMVxufTtcbkFwcEJhci5jb250ZXh0VHlwZXMgPSB7XG4gIG11aVRoZW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkXG59O1xuQXBwQmFyLnByb3BUeXBlcyA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHtcbiAgLyoqXG4gICAqIENhbiBiZSB1c2VkIHRvIHJlbmRlciBhIHRhYiBpbnNpZGUgYW4gYXBwIGJhciBmb3IgaW5zdGFuY2UuXG4gICAqL1xuICBjaGlsZHJlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICAvKipcbiAgICogQXBwbGllZCB0byB0aGUgYXBwIGJhcidzIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIGNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBUaGUgY2xhc3NuYW1lIG9mIHRoZSBpY29uIG9uIHRoZSBsZWZ0IG9mIHRoZSBhcHAgYmFyLlxuICAgKiBJZiB5b3UgYXJlIHVzaW5nIGEgc3R5bGVzaGVldCBmb3IgeW91ciBpY29ucywgZW50ZXIgdGhlIGNsYXNzIG5hbWUgZm9yIHRoZSBpY29uIHRvIGJlIHVzZWQgaGVyZS5cbiAgICovXG4gIGljb25DbGFzc05hbWVMZWZ0OiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIFNpbWlsaWFyIHRvIHRoZSBpY29uQ2xhc3NOYW1lTGVmdCBwcm9wIGV4Y2VwdCB0aGF0XG4gICAqIGl0IGFwcGxpZXMgdG8gdGhlIGljb24gZGlzcGxheWVkIG9uIHRoZSByaWdodCBvZiB0aGUgYXBwIGJhci5cbiAgICovXG4gIGljb25DbGFzc05hbWVSaWdodDogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBUaGUgY3VzdG9tIGVsZW1lbnQgdG8gYmUgZGlzcGxheWVkIG9uIHRoZSBsZWZ0IHNpZGUgb2YgdGhlXG4gICAqIGFwcCBiYXIgc3VjaCBhcyBhbiBTdmdJY29uLlxuICAgKi9cbiAgaWNvbkVsZW1lbnRMZWZ0OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmVsZW1lbnQsXG4gIC8qKlxuICAgKiBTaW1pbGlhciB0byB0aGUgaWNvbkVsZW1lbnRMZWZ0IHByb3AgZXhjZXB0IHRoYXQgdGhpcyBlbGVtZW50IGlzIGRpc3BsYXllZCBvbiB0aGUgcmlnaHQgb2YgdGhlIGFwcCBiYXIuXG4gICAqL1xuICBpY29uRWxlbWVudFJpZ2h0OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmVsZW1lbnQsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgZWxlbWVudCBkaXNwbGF5ZWQgb24gdGhlIGxlZnQgc2lkZSBvZiB0aGUgYXBwIGJhci5cbiAgICovXG4gIGljb25TdHlsZUxlZnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIGVsZW1lbnQgZGlzcGxheWVkIG9uIHRoZSByaWdodCBzaWRlIG9mIHRoZSBhcHAgYmFyLlxuICAgKi9cbiAgaWNvblN0eWxlUmlnaHQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gZm9yIHdoZW4gdGhlIGxlZnQgaWNvbiBpcyBzZWxlY3RlZCB2aWEgYSB0b3VjaCB0YXAuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBUb3VjaFRhcCBldmVudCB0YXJnZXRpbmcgdGhlIGxlZnQgYEljb25CdXR0b25gLlxuICAgKi9cbiAgb25MZWZ0SWNvbkJ1dHRvblRvdWNoVGFwOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmdW5jdGlvbiBmb3Igd2hlbiB0aGUgcmlnaHQgaWNvbiBpcyBzZWxlY3RlZCB2aWEgYSB0b3VjaCB0YXAuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBUb3VjaFRhcCBldmVudCB0YXJnZXRpbmcgdGhlIHJpZ2h0IGBJY29uQnV0dG9uYC5cbiAgICovXG4gIG9uUmlnaHRJY29uQnV0dG9uVG91Y2hUYXA6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZvciB3aGVuIHRoZSB0aXRsZSB0ZXh0IGlzIHNlbGVjdGVkIHZpYSBhIHRvdWNoIHRhcC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IFRvdWNoVGFwIGV2ZW50IHRhcmdldGluZyB0aGUgYHRpdGxlYCBub2RlLlxuICAgKi9cbiAgb25UaXRsZVRvdWNoVGFwOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgb3Igbm90IHRvIGRpc3BsYXkgdGhlIE1lbnUgaWNvbiBuZXh0IHRvIHRoZSB0aXRsZS5cbiAgICogU2V0dGluZyB0aGlzIHByb3AgdG8gZmFsc2Ugd2lsbCBoaWRlIHRoZSBpY29uLlxuICAgKi9cbiAgc2hvd01lbnVJY29uQnV0dG9uOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhlIHRpdGxlIHRvIGRpc3BsYXkgb24gdGhlIGFwcCBiYXIuXG4gICAqL1xuICB0aXRsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIGFwcCBiYXIncyB0aXRsZSBlbGVtZW50LlxuICAgKi9cbiAgdGl0bGVTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBUaGUgekRlcHRoIG9mIHRoZSBjb21wb25lbnQuXG4gICAqIFRoZSBzaGFkb3cgb2YgdGhlIGFwcCBiYXIgaXMgYWxzbyBkZXBlbmRlbnQgb24gdGhpcyBwcm9wZXJ0eS5cbiAgICovXG4gIHpEZXB0aDogX3Byb3BUeXBlczQuZGVmYXVsdC56RGVwdGhcbn0gOiB7fTtcbmV4cG9ydHMuZGVmYXVsdCA9IEFwcEJhcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWF0ZXJpYWwtdWkvQXBwQmFyL0FwcEJhci5qc1xuLy8gbW9kdWxlIGlkID0gMTQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdW5kZWZpbmVkO1xuXG52YXIgX0FwcEJhciA9IHJlcXVpcmUoJy4vQXBwQmFyJyk7XG5cbnZhciBfQXBwQmFyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0FwcEJhcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuZGVmYXVsdCA9IF9BcHBCYXIyLmRlZmF1bHQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L21hdGVyaWFsLXVpL0FwcEJhci9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTQ0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2V4dGVuZHMnKTtcblxudmFyIF9leHRlbmRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4dGVuZHMyKTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvb2JqZWN0V2l0aG91dFByb3BlcnRpZXMnKTtcblxudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RXaXRob3V0UHJvcGVydGllczIpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mJyk7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjaycpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7XG5cbnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzJyk7XG5cbnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuJyk7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7XG5cbnZhciBfaW5oZXJpdHMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzJyk7XG5cbnZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTtcblxudmFyIF9zaW1wbGVBc3NpZ24gPSByZXF1aXJlKCdzaW1wbGUtYXNzaWduJyk7XG5cbnZhciBfc2ltcGxlQXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NpbXBsZUFzc2lnbik7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbnZhciBfRW5oYW5jZWRTd2l0Y2ggPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9FbmhhbmNlZFN3aXRjaCcpO1xuXG52YXIgX0VuaGFuY2VkU3dpdGNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0VuaGFuY2VkU3dpdGNoKTtcblxudmFyIF90cmFuc2l0aW9ucyA9IHJlcXVpcmUoJy4uL3N0eWxlcy90cmFuc2l0aW9ucycpO1xuXG52YXIgX3RyYW5zaXRpb25zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RyYW5zaXRpb25zKTtcblxudmFyIF9jaGVja0JveE91dGxpbmVCbGFuayA9IHJlcXVpcmUoJy4uL3N2Zy1pY29ucy90b2dnbGUvY2hlY2stYm94LW91dGxpbmUtYmxhbmsnKTtcblxudmFyIF9jaGVja0JveE91dGxpbmVCbGFuazIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jaGVja0JveE91dGxpbmVCbGFuayk7XG5cbnZhciBfY2hlY2tCb3ggPSByZXF1aXJlKCcuLi9zdmctaWNvbnMvdG9nZ2xlL2NoZWNrLWJveCcpO1xuXG52YXIgX2NoZWNrQm94MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NoZWNrQm94KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gZ2V0U3R5bGVzKHByb3BzLCBjb250ZXh0KSB7XG4gIHZhciBjaGVja2JveCA9IGNvbnRleHQubXVpVGhlbWUuY2hlY2tib3g7XG5cbiAgdmFyIGNoZWNrYm94U2l6ZSA9IDI0O1xuXG4gIHJldHVybiB7XG4gICAgaWNvbjoge1xuICAgICAgaGVpZ2h0OiBjaGVja2JveFNpemUsXG4gICAgICB3aWR0aDogY2hlY2tib3hTaXplXG4gICAgfSxcbiAgICBjaGVjazoge1xuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICBvcGFjaXR5OiAwLFxuICAgICAgdHJhbnNmb3JtOiAnc2NhbGUoMCknLFxuICAgICAgdHJhbnNpdGlvbk9yaWdpbjogJzUwJSA1MCUnLFxuICAgICAgdHJhbnNpdGlvbjogX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoJzQ1MG1zJywgJ29wYWNpdHknLCAnMG1zJykgKyAnLCAnICsgX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoJzBtcycsICd0cmFuc2Zvcm0nLCAnNDUwbXMnKSxcbiAgICAgIGZpbGw6IGNoZWNrYm94LmNoZWNrZWRDb2xvclxuICAgIH0sXG4gICAgY2hlY2tXaGVuU3dpdGNoZWQ6IHtcbiAgICAgIG9wYWNpdHk6IDEsXG4gICAgICB0cmFuc2Zvcm06ICdzY2FsZSgxKScsXG4gICAgICB0cmFuc2l0aW9uOiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnMG1zJywgJ29wYWNpdHknLCAnMG1zJykgKyAnLCAnICsgX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoJzgwMG1zJywgJ3RyYW5zZm9ybScsICcwbXMnKVxuICAgIH0sXG4gICAgY2hlY2tXaGVuRGlzYWJsZWQ6IHtcbiAgICAgIGZpbGw6IGNoZWNrYm94LmRpc2FibGVkQ29sb3JcbiAgICB9LFxuICAgIGJveDoge1xuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICBvcGFjaXR5OiAxLFxuICAgICAgZmlsbDogY2hlY2tib3guYm94Q29sb3IsXG4gICAgICB0cmFuc2l0aW9uOiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnMTAwMG1zJywgJ29wYWNpdHknLCAnMjAwbXMnKVxuICAgIH0sXG4gICAgYm94V2hlblN3aXRjaGVkOiB7XG4gICAgICBvcGFjaXR5OiAwLFxuICAgICAgdHJhbnNpdGlvbjogX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoJzY1MG1zJywgJ29wYWNpdHknLCAnMTUwbXMnKSxcbiAgICAgIGZpbGw6IGNoZWNrYm94LmNoZWNrZWRDb2xvclxuICAgIH0sXG4gICAgYm94V2hlbkRpc2FibGVkOiB7XG4gICAgICBmaWxsOiBwcm9wcy5jaGVja2VkID8gJ3RyYW5zcGFyZW50JyA6IGNoZWNrYm94LmRpc2FibGVkQ29sb3JcbiAgICB9LFxuICAgIGxhYmVsOiB7XG4gICAgICBjb2xvcjogcHJvcHMuZGlzYWJsZWQgPyBjaGVja2JveC5sYWJlbERpc2FibGVkQ29sb3IgOiBjaGVja2JveC5sYWJlbENvbG9yXG4gICAgfVxuICB9O1xufVxuXG52YXIgQ2hlY2tib3ggPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShDaGVja2JveCwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQ2hlY2tib3goKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgQ2hlY2tib3gpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChfcmVmID0gQ2hlY2tib3guX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKENoZWNrYm94KSkuY2FsbC5hcHBseShfcmVmLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBzd2l0Y2hlZDogZmFsc2VcbiAgICB9LCBfdGhpcy5oYW5kbGVTdGF0ZUNoYW5nZSA9IGZ1bmN0aW9uIChuZXdTd2l0Y2hlZCkge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBzd2l0Y2hlZDogbmV3U3dpdGNoZWRcbiAgICAgIH0pO1xuICAgIH0sIF90aGlzLmhhbmRsZUNoZWNrID0gZnVuY3Rpb24gKGV2ZW50LCBpc0lucHV0Q2hlY2tlZCkge1xuICAgICAgaWYgKF90aGlzLnByb3BzLm9uQ2hlY2spIHtcbiAgICAgICAgX3RoaXMucHJvcHMub25DaGVjayhldmVudCwgaXNJbnB1dENoZWNrZWQpO1xuICAgICAgfVxuICAgIH0sIF90ZW1wKSwgKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KShfdGhpcywgX3JldCk7XG4gIH1cblxuICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShDaGVja2JveCwgW3tcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBjaGVja2VkID0gX3Byb3BzLmNoZWNrZWQsXG4gICAgICAgICAgZGVmYXVsdENoZWNrZWQgPSBfcHJvcHMuZGVmYXVsdENoZWNrZWQsXG4gICAgICAgICAgdmFsdWVMaW5rID0gX3Byb3BzLnZhbHVlTGluaztcblxuXG4gICAgICBpZiAoY2hlY2tlZCB8fCBkZWZhdWx0Q2hlY2tlZCB8fCB2YWx1ZUxpbmsgJiYgdmFsdWVMaW5rLnZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIHN3aXRjaGVkOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgaWYgKHRoaXMucHJvcHMuY2hlY2tlZCAhPT0gbmV4dFByb3BzLmNoZWNrZWQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgc3dpdGNoZWQ6IG5leHRQcm9wcy5jaGVja2VkXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2lzQ2hlY2tlZCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzQ2hlY2tlZCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlZnMuZW5oYW5jZWRTd2l0Y2guaXNTd2l0Y2hlZCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NldENoZWNrZWQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRDaGVja2VkKG5ld0NoZWNrZWRWYWx1ZSkge1xuICAgICAgdGhpcy5yZWZzLmVuaGFuY2VkU3dpdGNoLnNldFN3aXRjaGVkKG5ld0NoZWNrZWRWYWx1ZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9wcm9wczIgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGljb25TdHlsZSA9IF9wcm9wczIuaWNvblN0eWxlLFxuICAgICAgICAgIG9uQ2hlY2sgPSBfcHJvcHMyLm9uQ2hlY2ssXG4gICAgICAgICAgY2hlY2tlZEljb24gPSBfcHJvcHMyLmNoZWNrZWRJY29uLFxuICAgICAgICAgIHVuY2hlY2tlZEljb24gPSBfcHJvcHMyLnVuY2hlY2tlZEljb24sXG4gICAgICAgICAgb3RoZXIgPSAoMCwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMy5kZWZhdWx0KShfcHJvcHMyLCBbJ2ljb25TdHlsZScsICdvbkNoZWNrJywgJ2NoZWNrZWRJY29uJywgJ3VuY2hlY2tlZEljb24nXSk7XG5cbiAgICAgIHZhciBzdHlsZXMgPSBnZXRTdHlsZXModGhpcy5wcm9wcywgdGhpcy5jb250ZXh0KTtcbiAgICAgIHZhciBib3hTdHlsZXMgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLmJveCwgdGhpcy5zdGF0ZS5zd2l0Y2hlZCAmJiBzdHlsZXMuYm94V2hlblN3aXRjaGVkLCBpY29uU3R5bGUsIHRoaXMucHJvcHMuZGlzYWJsZWQgJiYgc3R5bGVzLmJveFdoZW5EaXNhYmxlZCk7XG4gICAgICB2YXIgY2hlY2tTdHlsZXMgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLmNoZWNrLCB0aGlzLnN0YXRlLnN3aXRjaGVkICYmIHN0eWxlcy5jaGVja1doZW5Td2l0Y2hlZCwgaWNvblN0eWxlLCB0aGlzLnByb3BzLmRpc2FibGVkICYmIHN0eWxlcy5jaGVja1doZW5EaXNhYmxlZCk7XG5cbiAgICAgIHZhciBjaGVja2VkRWxlbWVudCA9IGNoZWNrZWRJY29uID8gX3JlYWN0Mi5kZWZhdWx0LmNsb25lRWxlbWVudChjaGVja2VkSWNvbiwge1xuICAgICAgICBzdHlsZTogKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKGNoZWNrU3R5bGVzLCBjaGVja2VkSWNvbi5wcm9wcy5zdHlsZSlcbiAgICAgIH0pIDogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NoZWNrQm94Mi5kZWZhdWx0LCB7XG4gICAgICAgIHN0eWxlOiBjaGVja1N0eWxlc1xuICAgICAgfSk7XG5cbiAgICAgIHZhciB1bkNoZWNrZWRFbGVtZW50ID0gdW5jaGVja2VkSWNvbiA/IF9yZWFjdDIuZGVmYXVsdC5jbG9uZUVsZW1lbnQodW5jaGVja2VkSWNvbiwge1xuICAgICAgICBzdHlsZTogKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKGJveFN0eWxlcywgdW5jaGVja2VkSWNvbi5wcm9wcy5zdHlsZSlcbiAgICAgIH0pIDogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NoZWNrQm94T3V0bGluZUJsYW5rMi5kZWZhdWx0LCB7XG4gICAgICAgIHN0eWxlOiBib3hTdHlsZXNcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgY2hlY2tib3hFbGVtZW50ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICBudWxsLFxuICAgICAgICB1bkNoZWNrZWRFbGVtZW50LFxuICAgICAgICBjaGVja2VkRWxlbWVudFxuICAgICAgKTtcblxuICAgICAgdmFyIHJpcHBsZUNvbG9yID0gdGhpcy5zdGF0ZS5zd2l0Y2hlZCA/IGNoZWNrU3R5bGVzLmZpbGwgOiBib3hTdHlsZXMuZmlsbDtcbiAgICAgIHZhciBtZXJnZWRJY29uU3R5bGUgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLmljb24sIGljb25TdHlsZSk7XG5cbiAgICAgIHZhciBsYWJlbFN0eWxlID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5sYWJlbCwgdGhpcy5wcm9wcy5sYWJlbFN0eWxlKTtcblxuICAgICAgdmFyIGVuaGFuY2VkU3dpdGNoUHJvcHMgPSB7XG4gICAgICAgIHJlZjogJ2VuaGFuY2VkU3dpdGNoJyxcbiAgICAgICAgaW5wdXRUeXBlOiAnY2hlY2tib3gnLFxuICAgICAgICBzd2l0Y2hlZDogdGhpcy5zdGF0ZS5zd2l0Y2hlZCxcbiAgICAgICAgc3dpdGNoRWxlbWVudDogY2hlY2tib3hFbGVtZW50LFxuICAgICAgICByaXBwbGVDb2xvcjogcmlwcGxlQ29sb3IsXG4gICAgICAgIGljb25TdHlsZTogbWVyZ2VkSWNvblN0eWxlLFxuICAgICAgICBvblN3aXRjaDogdGhpcy5oYW5kbGVDaGVjayxcbiAgICAgICAgbGFiZWxTdHlsZTogbGFiZWxTdHlsZSxcbiAgICAgICAgb25QYXJlbnRTaG91bGRVcGRhdGU6IHRoaXMuaGFuZGxlU3RhdGVDaGFuZ2UsXG4gICAgICAgIGxhYmVsUG9zaXRpb246IHRoaXMucHJvcHMubGFiZWxQb3NpdGlvblxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9FbmhhbmNlZFN3aXRjaDIuZGVmYXVsdCwgKDAsIF9leHRlbmRzMy5kZWZhdWx0KSh7fSwgb3RoZXIsIGVuaGFuY2VkU3dpdGNoUHJvcHMpKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIENoZWNrYm94O1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuQ2hlY2tib3guZGVmYXVsdFByb3BzID0ge1xuICBsYWJlbFBvc2l0aW9uOiAncmlnaHQnLFxuICBkaXNhYmxlZDogZmFsc2Vcbn07XG5DaGVja2JveC5jb250ZXh0VHlwZXMgPSB7XG4gIG11aVRoZW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkXG59O1xuQ2hlY2tib3gucHJvcFR5cGVzID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8ge1xuICAvKipcbiAgICogQ2hlY2tib3ggaXMgY2hlY2tlZCBpZiB0cnVlLlxuICAgKi9cbiAgY2hlY2tlZDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogVGhlIFN2Z0ljb24gdG8gdXNlIGZvciB0aGUgY2hlY2tlZCBzdGF0ZS5cbiAgICogVGhpcyBpcyB1c2VmdWwgdG8gY3JlYXRlIGljb24gdG9nZ2xlcy5cbiAgICovXG4gIGNoZWNrZWRJY29uOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmVsZW1lbnQsXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBzdGF0ZSBvZiBvdXIgY2hlY2tib3ggY29tcG9uZW50LlxuICAgKiAqKldhcm5pbmc6KiogVGhpcyBjYW5ub3QgYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGBjaGVja2VkYC5cbiAgICogRGVjaWRlIGJldHdlZW4gdXNpbmcgYSBjb250cm9sbGVkIG9yIHVuY29udHJvbGxlZCBpbnB1dCBlbGVtZW50IGFuZCByZW1vdmUgb25lIG9mIHRoZXNlIHByb3BzLlxuICAgKiBNb3JlIGluZm86IGh0dHBzOi8vZmIubWUvcmVhY3QtY29udHJvbGxlZC1jb21wb25lbnRzXG4gICAqL1xuICBkZWZhdWx0Q2hlY2tlZDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogRGlzYWJsZWQgaWYgdHJ1ZS5cbiAgICovXG4gIGRpc2FibGVkOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIGljb24gZWxlbWVudC5cbiAgICovXG4gIGljb25TdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqL1xuICBpbnB1dFN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIFdoZXJlIHRoZSBsYWJlbCB3aWxsIGJlIHBsYWNlZCBuZXh0IHRvIHRoZSBjaGVja2JveC5cbiAgICovXG4gIGxhYmVsUG9zaXRpb246IF9wcm9wVHlwZXMyLmRlZmF1bHQub25lT2YoWydsZWZ0JywgJ3JpZ2h0J10pLFxuICAvKipcbiAgICogT3ZlcnJpZGVzIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBDaGVja2JveCBlbGVtZW50IGxhYmVsLlxuICAgKi9cbiAgbGFiZWxTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmdW5jdGlvbiB0aGF0IGlzIGZpcmVkIHdoZW4gdGhlIGNoZWNrYm94IGlzIGNoZWNrZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBgY2hhbmdlYCBldmVudCB0YXJnZXRpbmcgdGhlIHVuZGVybHlpbmcgY2hlY2tib3ggYGlucHV0YC5cbiAgICogQHBhcmFtIHtib29sZWFufSBpc0lucHV0Q2hlY2tlZCBUaGUgYGNoZWNrZWRgIHZhbHVlIG9mIHRoZSB1bmRlcmx5aW5nIGNoZWNrYm94IGBpbnB1dGAuXG4gICAqL1xuICBvbkNoZWNrOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhlIFN2Z0ljb24gdG8gdXNlIGZvciB0aGUgdW5jaGVja2VkIHN0YXRlLlxuICAgKiBUaGlzIGlzIHVzZWZ1bCB0byBjcmVhdGUgaWNvbiB0b2dnbGVzLlxuICAgKi9cbiAgdW5jaGVja2VkSWNvbjogX3Byb3BUeXBlczIuZGVmYXVsdC5lbGVtZW50LFxuICAvKipcbiAgICogVmFsdWVMaW5rIGZvciB3aGVuIHVzaW5nIGNvbnRyb2xsZWQgY2hlY2tib3guXG4gICAqL1xuICB2YWx1ZUxpbms6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0XG59IDoge307XG5leHBvcnRzLmRlZmF1bHQgPSBDaGVja2JveDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWF0ZXJpYWwtdWkvQ2hlY2tib3gvQ2hlY2tib3guanNcbi8vIG1vZHVsZSBpZCA9IDE0NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9leHRlbmRzJyk7XG5cbnZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzJyk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZicpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcycpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybicpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpO1xuXG52YXIgX2luaGVyaXRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cycpO1xuXG52YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cbnZhciBfc2ltcGxlQXNzaWduID0gcmVxdWlyZSgnc2ltcGxlLWFzc2lnbicpO1xuXG52YXIgX3NpbXBsZUFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaW1wbGVBc3NpZ24pO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX3JlYWN0RG9tID0gcmVxdWlyZSgncmVhY3QtZG9tJyk7XG5cbnZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXG52YXIgX3JlYWN0RXZlbnRMaXN0ZW5lciA9IHJlcXVpcmUoJ3JlYWN0LWV2ZW50LWxpc3RlbmVyJyk7XG5cbnZhciBfcmVhY3RFdmVudExpc3RlbmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RXZlbnRMaXN0ZW5lcik7XG5cbnZhciBfa2V5Y29kZSA9IHJlcXVpcmUoJ2tleWNvZGUnKTtcblxudmFyIF9rZXljb2RlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2tleWNvZGUpO1xuXG52YXIgX3RyYW5zaXRpb25zID0gcmVxdWlyZSgnLi4vc3R5bGVzL3RyYW5zaXRpb25zJyk7XG5cbnZhciBfdHJhbnNpdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHJhbnNpdGlvbnMpO1xuXG52YXIgX092ZXJsYXkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9PdmVybGF5Jyk7XG5cbnZhciBfT3ZlcmxheTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9PdmVybGF5KTtcblxudmFyIF9SZW5kZXJUb0xheWVyID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvUmVuZGVyVG9MYXllcicpO1xuXG52YXIgX1JlbmRlclRvTGF5ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUmVuZGVyVG9MYXllcik7XG5cbnZhciBfUGFwZXIgPSByZXF1aXJlKCcuLi9QYXBlcicpO1xuXG52YXIgX1BhcGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BhcGVyKTtcblxudmFyIF9UcmFuc2l0aW9uR3JvdXAgPSByZXF1aXJlKCdyZWFjdC10cmFuc2l0aW9uLWdyb3VwL1RyYW5zaXRpb25Hcm91cCcpO1xuXG52YXIgX1RyYW5zaXRpb25Hcm91cDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9UcmFuc2l0aW9uR3JvdXApO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgVHJhbnNpdGlvbkl0ZW0gPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShUcmFuc2l0aW9uSXRlbSwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gVHJhbnNpdGlvbkl0ZW0oKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgVHJhbnNpdGlvbkl0ZW0pO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChfcmVmID0gVHJhbnNpdGlvbkl0ZW0uX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKFRyYW5zaXRpb25JdGVtKSkuY2FsbC5hcHBseShfcmVmLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBzdHlsZToge31cbiAgICB9LCBfdGVtcCksICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkoX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoVHJhbnNpdGlvbkl0ZW0sIFt7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbFVubW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmVudGVyVGltZW91dCk7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5sZWF2ZVRpbWVvdXQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxFbnRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxFbnRlcihjYWxsYmFjaykge1xuICAgICAgdGhpcy5jb21wb25lbnRXaWxsQXBwZWFyKGNhbGxiYWNrKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsQXBwZWFyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbEFwcGVhcihjYWxsYmFjaykge1xuICAgICAgdmFyIHNwYWNpbmcgPSB0aGlzLmNvbnRleHQubXVpVGhlbWUuYmFzZVRoZW1lLnNwYWNpbmc7XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBzdHlsZToge1xuICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlKDAsICcgKyBzcGFjaW5nLmRlc2t0b3BLZXlsaW5lSW5jcmVtZW50ICsgJ3B4KSdcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuZW50ZXJUaW1lb3V0ID0gc2V0VGltZW91dChjYWxsYmFjaywgNDUwKTsgLy8gbWF0Y2hlcyB0cmFuc2l0aW9uIGR1cmF0aW9uXG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbExlYXZlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbExlYXZlKGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgwLCAwKSdcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMubGVhdmVUaW1lb3V0ID0gc2V0VGltZW91dChjYWxsYmFjaywgNDUwKTsgLy8gbWF0Y2hlcyB0cmFuc2l0aW9uIGR1cmF0aW9uXG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgc3R5bGUgPSBfcHJvcHMuc3R5bGUsXG4gICAgICAgICAgY2hpbGRyZW4gPSBfcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgICAgb3RoZXIgPSAoMCwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMy5kZWZhdWx0KShfcHJvcHMsIFsnc3R5bGUnLCAnY2hpbGRyZW4nXSk7XG4gICAgICB2YXIgcHJlcGFyZVN0eWxlcyA9IHRoaXMuY29udGV4dC5tdWlUaGVtZS5wcmVwYXJlU3R5bGVzO1xuXG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgICgwLCBfZXh0ZW5kczMuZGVmYXVsdCkoe30sIG90aGVyLCB7IHN0eWxlOiBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgdGhpcy5zdGF0ZS5zdHlsZSwgc3R5bGUpKSB9KSxcbiAgICAgICAgY2hpbGRyZW5cbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBUcmFuc2l0aW9uSXRlbTtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cblRyYW5zaXRpb25JdGVtLmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5UcmFuc2l0aW9uSXRlbS5wcm9wVHlwZXMgPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB7XG4gIGNoaWxkcmVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIHN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdFxufSA6IHt9O1xuXG5cbmZ1bmN0aW9uIGdldFN0eWxlcyhwcm9wcywgY29udGV4dCkge1xuICB2YXIgYXV0b1Njcm9sbEJvZHlDb250ZW50ID0gcHJvcHMuYXV0b1Njcm9sbEJvZHlDb250ZW50LFxuICAgICAgb3BlbiA9IHByb3BzLm9wZW47XG4gIHZhciBfY29udGV4dCRtdWlUaGVtZSA9IGNvbnRleHQubXVpVGhlbWUsXG4gICAgICBfY29udGV4dCRtdWlUaGVtZSRiYXMgPSBfY29udGV4dCRtdWlUaGVtZS5iYXNlVGhlbWUsXG4gICAgICBzcGFjaW5nID0gX2NvbnRleHQkbXVpVGhlbWUkYmFzLnNwYWNpbmcsXG4gICAgICBwYWxldHRlID0gX2NvbnRleHQkbXVpVGhlbWUkYmFzLnBhbGV0dGUsXG4gICAgICBkaWFsb2cgPSBfY29udGV4dCRtdWlUaGVtZS5kaWFsb2csXG4gICAgICB6SW5kZXggPSBfY29udGV4dCRtdWlUaGVtZS56SW5kZXg7XG5cblxuICB2YXIgZ3V0dGVyID0gc3BhY2luZy5kZXNrdG9wR3V0dGVyO1xuICB2YXIgYm9yZGVyU2Nyb2xsID0gJzFweCBzb2xpZCAnICsgcGFsZXR0ZS5ib3JkZXJDb2xvcjtcblxuICByZXR1cm4ge1xuICAgIHJvb3Q6IHtcbiAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICAgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsXG4gICAgICBXZWJraXRUYXBIaWdobGlnaHRDb2xvcjogJ3JnYmEoMCwwLDAsMCknLCAvLyBSZW1vdmUgbW9iaWxlIGNvbG9yIGZsYXNoaW5nIChkZXByZWNhdGVkKVxuICAgICAgekluZGV4OiB6SW5kZXguZGlhbG9nLFxuICAgICAgdG9wOiAwLFxuICAgICAgbGVmdDogb3BlbiA/IDAgOiAtMTAwMDAsXG4gICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICB0cmFuc2l0aW9uOiBvcGVuID8gX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoJzBtcycsICdsZWZ0JywgJzBtcycpIDogX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoJzBtcycsICdsZWZ0JywgJzQ1MG1zJylcbiAgICB9LFxuICAgIGNvbnRlbnQ6IHtcbiAgICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnLFxuICAgICAgV2Via2l0VGFwSGlnaGxpZ2h0Q29sb3I6ICdyZ2JhKDAsMCwwLDApJywgLy8gUmVtb3ZlIG1vYmlsZSBjb2xvciBmbGFzaGluZyAoZGVwcmVjYXRlZClcbiAgICAgIHRyYW5zaXRpb246IF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KCksXG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgIHdpZHRoOiAnNzUlJyxcbiAgICAgIG1heFdpZHRoOiBzcGFjaW5nLmRlc2t0b3BLZXlsaW5lSW5jcmVtZW50ICogMTIsXG4gICAgICBtYXJnaW46ICcwIGF1dG8nLFxuICAgICAgekluZGV4OiB6SW5kZXguZGlhbG9nXG4gICAgfSxcbiAgICBhY3Rpb25zQ29udGFpbmVyOiB7XG4gICAgICBib3hTaXppbmc6ICdib3JkZXItYm94JyxcbiAgICAgIFdlYmtpdFRhcEhpZ2hsaWdodENvbG9yOiAncmdiYSgwLDAsMCwwKScsIC8vIFJlbW92ZSBtb2JpbGUgY29sb3IgZmxhc2hpbmcgKGRlcHJlY2F0ZWQpXG4gICAgICBwYWRkaW5nOiA4LFxuICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgIHRleHRBbGlnbjogJ3JpZ2h0JyxcbiAgICAgIG1hcmdpblRvcDogYXV0b1Njcm9sbEJvZHlDb250ZW50ID8gLTEgOiAwXG4gICAgfSxcbiAgICBvdmVybGF5OiB7XG4gICAgICB6SW5kZXg6IHpJbmRleC5kaWFsb2dPdmVybGF5XG4gICAgfSxcbiAgICB0aXRsZToge1xuICAgICAgbWFyZ2luOiAwLFxuICAgICAgcGFkZGluZzogZ3V0dGVyICsgJ3B4ICcgKyBndXR0ZXIgKyAncHggMjBweCAnICsgZ3V0dGVyICsgJ3B4JyxcbiAgICAgIGNvbG9yOiBwYWxldHRlLnRleHRDb2xvcixcbiAgICAgIGZvbnRTaXplOiBkaWFsb2cudGl0bGVGb250U2l6ZSxcbiAgICAgIGxpbmVIZWlnaHQ6ICczMnB4JyxcbiAgICAgIGZvbnRXZWlnaHQ6IDQwMCxcbiAgICAgIG1hcmdpbkJvdHRvbTogYXV0b1Njcm9sbEJvZHlDb250ZW50ID8gLTEgOiAwXG4gICAgfSxcbiAgICBib2R5OiB7XG4gICAgICBmb250U2l6ZTogZGlhbG9nLmJvZHlGb250U2l6ZSxcbiAgICAgIGNvbG9yOiBkaWFsb2cuYm9keUNvbG9yLFxuICAgICAgcGFkZGluZzogKHByb3BzLnRpdGxlID8gMCA6IGd1dHRlcikgKyAncHggJyArIGd1dHRlciArICdweCAnICsgZ3V0dGVyICsgJ3B4JyxcbiAgICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnLFxuICAgICAgb3ZlcmZsb3dZOiBhdXRvU2Nyb2xsQm9keUNvbnRlbnQgPyAnYXV0bycgOiAnaGlkZGVuJyxcbiAgICAgIGJvcmRlclRvcDogYXV0b1Njcm9sbEJvZHlDb250ZW50ID8gYm9yZGVyU2Nyb2xsIDogJ25vbmUnLFxuICAgICAgYm9yZGVyQm90dG9tOiBhdXRvU2Nyb2xsQm9keUNvbnRlbnQgPyBib3JkZXJTY3JvbGwgOiAnbm9uZSdcbiAgICB9XG4gIH07XG59XG5cbnZhciBEaWFsb2dJbmxpbmUgPSBmdW5jdGlvbiAoX0NvbXBvbmVudDIpIHtcbiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoRGlhbG9nSW5saW5lLCBfQ29tcG9uZW50Mik7XG5cbiAgZnVuY3Rpb24gRGlhbG9nSW5saW5lKCkge1xuICAgIHZhciBfcmVmMjtcblxuICAgIHZhciBfdGVtcDIsIF90aGlzMiwgX3JldDI7XG5cbiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBEaWFsb2dJbmxpbmUpO1xuXG4gICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgIGFyZ3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldDIgPSAoX3RlbXAyID0gKF90aGlzMiA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKF9yZWYyID0gRGlhbG9nSW5saW5lLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEaWFsb2dJbmxpbmUpKS5jYWxsLmFwcGx5KF9yZWYyLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzMiksIF90aGlzMi5oYW5kbGVUb3VjaFRhcE92ZXJsYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpczIucmVxdWVzdENsb3NlKGZhbHNlKTtcbiAgICB9LCBfdGhpczIuaGFuZGxlS2V5VXAgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmICgoMCwgX2tleWNvZGUyLmRlZmF1bHQpKGV2ZW50KSA9PT0gJ2VzYycpIHtcbiAgICAgICAgX3RoaXMyLnJlcXVlc3RDbG9zZShmYWxzZSk7XG4gICAgICB9XG4gICAgfSwgX3RoaXMyLmhhbmRsZVJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzMi5wb3NpdGlvbkRpYWxvZygpO1xuICAgIH0sIF90ZW1wMiksICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkoX3RoaXMyLCBfcmV0Mik7XG4gIH1cblxuICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShEaWFsb2dJbmxpbmUsIFt7XG4gICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHRoaXMucG9zaXRpb25EaWFsb2coKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnREaWRVcGRhdGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICB0aGlzLnBvc2l0aW9uRGlhbG9nKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncG9zaXRpb25EaWFsb2cnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwb3NpdGlvbkRpYWxvZygpIHtcbiAgICAgIHZhciBfcHJvcHMyID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBhY3Rpb25zID0gX3Byb3BzMi5hY3Rpb25zLFxuICAgICAgICAgIGF1dG9EZXRlY3RXaW5kb3dIZWlnaHQgPSBfcHJvcHMyLmF1dG9EZXRlY3RXaW5kb3dIZWlnaHQsXG4gICAgICAgICAgYXV0b1Njcm9sbEJvZHlDb250ZW50ID0gX3Byb3BzMi5hdXRvU2Nyb2xsQm9keUNvbnRlbnQsXG4gICAgICAgICAgYm9keVN0eWxlID0gX3Byb3BzMi5ib2R5U3R5bGUsXG4gICAgICAgICAgb3BlbiA9IF9wcm9wczIub3BlbixcbiAgICAgICAgICByZXBvc2l0aW9uT25VcGRhdGUgPSBfcHJvcHMyLnJlcG9zaXRpb25PblVwZGF0ZSxcbiAgICAgICAgICB0aXRsZSA9IF9wcm9wczIudGl0bGU7XG5cblxuICAgICAgaWYgKCFvcGVuKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGNsaWVudEhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IHx8IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0O1xuICAgICAgdmFyIGNvbnRhaW5lciA9IF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzKTtcbiAgICAgIHZhciBkaWFsb2dXaW5kb3cgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcy5yZWZzLmRpYWxvZ1dpbmRvdyk7XG4gICAgICB2YXIgZGlhbG9nQ29udGVudCA9IF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZSh0aGlzLnJlZnMuZGlhbG9nQ29udGVudCk7XG4gICAgICB2YXIgbWluUGFkZGluZ1RvcCA9IDE2O1xuXG4gICAgICAvLyBSZXNldCB0aGUgaGVpZ2h0IGluIGNhc2UgdGhlIHdpbmRvdyB3YXMgcmVzaXplZC5cbiAgICAgIGRpYWxvZ1dpbmRvdy5zdHlsZS5oZWlnaHQgPSAnJztcbiAgICAgIGRpYWxvZ0NvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gJyc7XG5cbiAgICAgIHZhciBkaWFsb2dXaW5kb3dIZWlnaHQgPSBkaWFsb2dXaW5kb3cub2Zmc2V0SGVpZ2h0O1xuICAgICAgdmFyIHBhZGRpbmdUb3AgPSAoY2xpZW50SGVpZ2h0IC0gZGlhbG9nV2luZG93SGVpZ2h0KSAvIDIgLSA2NDtcbiAgICAgIGlmIChwYWRkaW5nVG9wIDwgbWluUGFkZGluZ1RvcCkgcGFkZGluZ1RvcCA9IG1pblBhZGRpbmdUb3A7XG5cbiAgICAgIC8vIFZlcnRpY2FsbHkgY2VudGVyIHRoZSBkaWFsb2cgd2luZG93LCBidXQgbWFrZSBzdXJlIGl0IGRvZXNuJ3RcbiAgICAgIC8vIHRyYW5zaXRpb24gdG8gdGhhdCBwb3NpdGlvbi5cbiAgICAgIGlmIChyZXBvc2l0aW9uT25VcGRhdGUgfHwgIWNvbnRhaW5lci5zdHlsZS5wYWRkaW5nVG9wKSB7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5wYWRkaW5nVG9wID0gcGFkZGluZ1RvcCArICdweCc7XG4gICAgICB9XG5cbiAgICAgIC8vIEZvcmNlIGEgaGVpZ2h0IGlmIHRoZSBkaWFsb2cgaXMgdGFsbGVyIHRoYW4gY2xpZW50SGVpZ2h0XG4gICAgICBpZiAoYXV0b0RldGVjdFdpbmRvd0hlaWdodCB8fCBhdXRvU2Nyb2xsQm9keUNvbnRlbnQpIHtcbiAgICAgICAgdmFyIHN0eWxlcyA9IGdldFN0eWxlcyh0aGlzLnByb3BzLCB0aGlzLmNvbnRleHQpO1xuICAgICAgICBzdHlsZXMuYm9keSA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMuYm9keSwgYm9keVN0eWxlKTtcbiAgICAgICAgdmFyIG1heERpYWxvZ0NvbnRlbnRIZWlnaHQgPSBjbGllbnRIZWlnaHQgLSAyICogNjQ7XG5cbiAgICAgICAgaWYgKHRpdGxlKSBtYXhEaWFsb2dDb250ZW50SGVpZ2h0IC09IGRpYWxvZ0NvbnRlbnQucHJldmlvdXNTaWJsaW5nLm9mZnNldEhlaWdodDtcblxuICAgICAgICBpZiAoX3JlYWN0Mi5kZWZhdWx0LkNoaWxkcmVuLmNvdW50KGFjdGlvbnMpKSB7XG4gICAgICAgICAgbWF4RGlhbG9nQ29udGVudEhlaWdodCAtPSBkaWFsb2dDb250ZW50Lm5leHRTaWJsaW5nLm9mZnNldEhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIGRpYWxvZ0NvbnRlbnQuc3R5bGUubWF4SGVpZ2h0ID0gbWF4RGlhbG9nQ29udGVudEhlaWdodCArICdweCc7XG4gICAgICAgIGlmIChtYXhEaWFsb2dDb250ZW50SGVpZ2h0ID4gZGlhbG9nV2luZG93SGVpZ2h0KSB7XG4gICAgICAgICAgZGlhbG9nQ29udGVudC5zdHlsZS5ib3JkZXJCb3R0b20gPSAnbm9uZSc7XG4gICAgICAgICAgZGlhbG9nQ29udGVudC5zdHlsZS5ib3JkZXJUb3AgPSAnbm9uZSc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZXF1ZXN0Q2xvc2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXF1ZXN0Q2xvc2UoYnV0dG9uQ2xpY2tlZCkge1xuICAgICAgaWYgKCFidXR0b25DbGlja2VkICYmIHRoaXMucHJvcHMubW9kYWwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wcm9wcy5vblJlcXVlc3RDbG9zZSkge1xuICAgICAgICB0aGlzLnByb3BzLm9uUmVxdWVzdENsb3NlKCEhYnV0dG9uQ2xpY2tlZCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9wcm9wczMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGFjdGlvbnMgPSBfcHJvcHMzLmFjdGlvbnMsXG4gICAgICAgICAgYWN0aW9uc0NvbnRhaW5lckNsYXNzTmFtZSA9IF9wcm9wczMuYWN0aW9uc0NvbnRhaW5lckNsYXNzTmFtZSxcbiAgICAgICAgICBhY3Rpb25zQ29udGFpbmVyU3R5bGUgPSBfcHJvcHMzLmFjdGlvbnNDb250YWluZXJTdHlsZSxcbiAgICAgICAgICBib2R5Q2xhc3NOYW1lID0gX3Byb3BzMy5ib2R5Q2xhc3NOYW1lLFxuICAgICAgICAgIGJvZHlTdHlsZSA9IF9wcm9wczMuYm9keVN0eWxlLFxuICAgICAgICAgIGNoaWxkcmVuID0gX3Byb3BzMy5jaGlsZHJlbixcbiAgICAgICAgICBjbGFzc05hbWUgPSBfcHJvcHMzLmNsYXNzTmFtZSxcbiAgICAgICAgICBjb250ZW50Q2xhc3NOYW1lID0gX3Byb3BzMy5jb250ZW50Q2xhc3NOYW1lLFxuICAgICAgICAgIGNvbnRlbnRTdHlsZSA9IF9wcm9wczMuY29udGVudFN0eWxlLFxuICAgICAgICAgIG92ZXJsYXlDbGFzc05hbWUgPSBfcHJvcHMzLm92ZXJsYXlDbGFzc05hbWUsXG4gICAgICAgICAgb3ZlcmxheVN0eWxlID0gX3Byb3BzMy5vdmVybGF5U3R5bGUsXG4gICAgICAgICAgb3BlbiA9IF9wcm9wczMub3BlbixcbiAgICAgICAgICBwYXBlckNsYXNzTmFtZSA9IF9wcm9wczMucGFwZXJDbGFzc05hbWUsXG4gICAgICAgICAgcGFwZXJQcm9wcyA9IF9wcm9wczMucGFwZXJQcm9wcyxcbiAgICAgICAgICBzdHlsZSA9IF9wcm9wczMuc3R5bGUsXG4gICAgICAgICAgdGl0bGVDbGFzc05hbWUgPSBfcHJvcHMzLnRpdGxlQ2xhc3NOYW1lLFxuICAgICAgICAgIHRpdGxlU3R5bGUgPSBfcHJvcHMzLnRpdGxlU3R5bGUsXG4gICAgICAgICAgdGl0bGUgPSBfcHJvcHMzLnRpdGxlO1xuICAgICAgdmFyIHByZXBhcmVTdHlsZXMgPSB0aGlzLmNvbnRleHQubXVpVGhlbWUucHJlcGFyZVN0eWxlcztcblxuICAgICAgdmFyIHN0eWxlcyA9IGdldFN0eWxlcyh0aGlzLnByb3BzLCB0aGlzLmNvbnRleHQpO1xuXG4gICAgICBzdHlsZXMucm9vdCA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMucm9vdCwgc3R5bGUpO1xuICAgICAgc3R5bGVzLmNvbnRlbnQgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLmNvbnRlbnQsIGNvbnRlbnRTdHlsZSk7XG4gICAgICBzdHlsZXMuYm9keSA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMuYm9keSwgYm9keVN0eWxlKTtcbiAgICAgIHN0eWxlcy5hY3Rpb25zQ29udGFpbmVyID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5hY3Rpb25zQ29udGFpbmVyLCBhY3Rpb25zQ29udGFpbmVyU3R5bGUpO1xuICAgICAgc3R5bGVzLm92ZXJsYXkgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLm92ZXJsYXksIG92ZXJsYXlTdHlsZSk7XG4gICAgICBzdHlsZXMudGl0bGUgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLnRpdGxlLCB0aXRsZVN0eWxlKTtcblxuICAgICAgdmFyIGFjdGlvbnNDb250YWluZXIgPSBfcmVhY3QyLmRlZmF1bHQuQ2hpbGRyZW4uY291bnQoYWN0aW9ucykgPiAwICYmIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyBjbGFzc05hbWU6IGFjdGlvbnNDb250YWluZXJDbGFzc05hbWUsIHN0eWxlOiBwcmVwYXJlU3R5bGVzKHN0eWxlcy5hY3Rpb25zQ29udGFpbmVyKSB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuQ2hpbGRyZW4udG9BcnJheShhY3Rpb25zKVxuICAgICAgKTtcblxuICAgICAgdmFyIHRpdGxlRWxlbWVudCA9IHRpdGxlO1xuICAgICAgaWYgKF9yZWFjdDIuZGVmYXVsdC5pc1ZhbGlkRWxlbWVudCh0aXRsZSkpIHtcbiAgICAgICAgdGl0bGVFbGVtZW50ID0gX3JlYWN0Mi5kZWZhdWx0LmNsb25lRWxlbWVudCh0aXRsZSwge1xuICAgICAgICAgIGNsYXNzTmFtZTogdGl0bGUucHJvcHMuY2xhc3NOYW1lIHx8IHRpdGxlQ2xhc3NOYW1lLFxuICAgICAgICAgIHN0eWxlOiBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMudGl0bGUsIHRpdGxlLnByb3BzLnN0eWxlKSlcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aXRsZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGl0bGVFbGVtZW50ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2gzJyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogdGl0bGVDbGFzc05hbWUsIHN0eWxlOiBwcmVwYXJlU3R5bGVzKHN0eWxlcy50aXRsZSkgfSxcbiAgICAgICAgICB0aXRsZVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IGNsYXNzTmFtZTogY2xhc3NOYW1lLCBzdHlsZTogcHJlcGFyZVN0eWxlcyhzdHlsZXMucm9vdCkgfSxcbiAgICAgICAgb3BlbiAmJiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RFdmVudExpc3RlbmVyMi5kZWZhdWx0LCB7XG4gICAgICAgICAgdGFyZ2V0OiAnd2luZG93JyxcbiAgICAgICAgICBvbktleVVwOiB0aGlzLmhhbmRsZUtleVVwLFxuICAgICAgICAgIG9uUmVzaXplOiB0aGlzLmhhbmRsZVJlc2l6ZVxuICAgICAgICB9KSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgX1RyYW5zaXRpb25Hcm91cDIuZGVmYXVsdCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb21wb25lbnQ6ICdkaXYnLFxuICAgICAgICAgICAgcmVmOiAnZGlhbG9nV2luZG93JyxcbiAgICAgICAgICAgIHRyYW5zaXRpb25BcHBlYXI6IHRydWUsXG4gICAgICAgICAgICB0cmFuc2l0aW9uQXBwZWFyVGltZW91dDogNDUwLFxuICAgICAgICAgICAgdHJhbnNpdGlvbkVudGVyOiB0cnVlLFxuICAgICAgICAgICAgdHJhbnNpdGlvbkVudGVyVGltZW91dDogNDUwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBvcGVuICYmIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgVHJhbnNpdGlvbkl0ZW0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogY29udGVudENsYXNzTmFtZSxcbiAgICAgICAgICAgICAgc3R5bGU6IHN0eWxlcy5jb250ZW50XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgIF9QYXBlcjIuZGVmYXVsdCxcbiAgICAgICAgICAgICAgKDAsIF9leHRlbmRzMy5kZWZhdWx0KSh7IGNsYXNzTmFtZTogcGFwZXJDbGFzc05hbWUsIHpEZXB0aDogNCB9LCBwYXBlclByb3BzKSxcbiAgICAgICAgICAgICAgdGl0bGVFbGVtZW50LFxuICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICByZWY6ICdkaWFsb2dDb250ZW50JyxcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogYm9keUNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAgIHN0eWxlOiBwcmVwYXJlU3R5bGVzKHN0eWxlcy5ib2R5KVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2hpbGRyZW5cbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgYWN0aW9uc0NvbnRhaW5lclxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX092ZXJsYXkyLmRlZmF1bHQsIHtcbiAgICAgICAgICBzaG93OiBvcGVuLFxuICAgICAgICAgIGNsYXNzTmFtZTogb3ZlcmxheUNsYXNzTmFtZSxcbiAgICAgICAgICBzdHlsZTogc3R5bGVzLm92ZXJsYXksXG4gICAgICAgICAgb25Ub3VjaFRhcDogdGhpcy5oYW5kbGVUb3VjaFRhcE92ZXJsYXlcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBEaWFsb2dJbmxpbmU7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5EaWFsb2dJbmxpbmUuY29udGV4dFR5cGVzID0ge1xuICBtdWlUaGVtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QuaXNSZXF1aXJlZFxufTtcbkRpYWxvZ0lubGluZS5wcm9wVHlwZXMgPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB7XG4gIGFjdGlvbnM6IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgYWN0aW9uc0NvbnRhaW5lckNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGFjdGlvbnNDb250YWluZXJTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGF1dG9EZXRlY3RXaW5kb3dIZWlnaHQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgYXV0b1Njcm9sbEJvZHlDb250ZW50OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIGJvZHlDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBib2R5U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBjaGlsZHJlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICBjbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBjb250ZW50Q2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgY29udGVudFN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgbW9kYWw6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgb25SZXF1ZXN0Q2xvc2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgb3BlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLmlzUmVxdWlyZWQsXG4gIG92ZXJsYXlDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBvdmVybGF5U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBwYXBlckNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIHBhcGVyUHJvcHM6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICByZXBvc2l0aW9uT25VcGRhdGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICB0aXRsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICB0aXRsZUNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIHRpdGxlU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0XG59IDoge307XG5cbnZhciBEaWFsb2cgPSBmdW5jdGlvbiAoX0NvbXBvbmVudDMpIHtcbiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoRGlhbG9nLCBfQ29tcG9uZW50Myk7XG5cbiAgZnVuY3Rpb24gRGlhbG9nKCkge1xuICAgIHZhciBfcmVmMztcblxuICAgIHZhciBfdGVtcDMsIF90aGlzMywgX3JldDM7XG5cbiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBEaWFsb2cpO1xuXG4gICAgZm9yICh2YXIgX2xlbjMgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjMpLCBfa2V5MyA9IDA7IF9rZXkzIDwgX2xlbjM7IF9rZXkzKyspIHtcbiAgICAgIGFyZ3NbX2tleTNdID0gYXJndW1lbnRzW19rZXkzXTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldDMgPSAoX3RlbXAzID0gKF90aGlzMyA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKF9yZWYzID0gRGlhbG9nLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEaWFsb2cpKS5jYWxsLmFwcGx5KF9yZWYzLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzMyksIF90aGlzMy5yZW5kZXJMYXllciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChEaWFsb2dJbmxpbmUsIF90aGlzMy5wcm9wcyk7XG4gICAgfSwgX3RlbXAzKSwgKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KShfdGhpczMsIF9yZXQzKTtcbiAgfVxuXG4gICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKERpYWxvZywgW3tcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1JlbmRlclRvTGF5ZXIyLmRlZmF1bHQsIHsgcmVuZGVyOiB0aGlzLnJlbmRlckxheWVyLCBvcGVuOiB0cnVlLCB1c2VMYXllckZvckNsaWNrQXdheTogZmFsc2UgfSk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBEaWFsb2c7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5EaWFsb2cuY29udGV4dFR5cGVzID0ge1xuICBtdWlUaGVtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QuaXNSZXF1aXJlZFxufTtcbkRpYWxvZy5kZWZhdWx0UHJvcHMgPSB7XG4gIGF1dG9EZXRlY3RXaW5kb3dIZWlnaHQ6IHRydWUsXG4gIGF1dG9TY3JvbGxCb2R5Q29udGVudDogZmFsc2UsXG4gIG1vZGFsOiBmYWxzZSxcbiAgcmVwb3NpdGlvbk9uVXBkYXRlOiB0cnVlXG59O1xuRGlhbG9nLnByb3BUeXBlcyA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHtcbiAgLyoqXG4gICAqIEFjdGlvbiBidXR0b25zIHRvIGRpc3BsYXkgYmVsb3cgdGhlIERpYWxvZyBjb250ZW50IChgY2hpbGRyZW5gKS5cbiAgICogVGhpcyBwcm9wZXJ0eSBhY2NlcHRzIGVpdGhlciBhIFJlYWN0IGVsZW1lbnQsIG9yIGFuIGFycmF5IG9mIFJlYWN0IGVsZW1lbnRzLlxuICAgKi9cbiAgYWN0aW9uczogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICAvKipcbiAgICogVGhlIGBjbGFzc05hbWVgIHRvIGFkZCB0byB0aGUgYWN0aW9ucyBjb250YWluZXIncyByb290IGVsZW1lbnQuXG4gICAqL1xuICBhY3Rpb25zQ29udGFpbmVyQ2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIE92ZXJyaWRlcyB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgYWN0aW9ucyBjb250YWluZXIncyByb290IGVsZW1lbnQuXG4gICAqL1xuICBhY3Rpb25zQ29udGFpbmVyU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogSWYgc2V0IHRvIHRydWUsIHRoZSBoZWlnaHQgb2YgdGhlIGBEaWFsb2dgIHdpbGwgYmUgYXV0byBkZXRlY3RlZC4gQSBtYXggaGVpZ2h0XG4gICAqIHdpbGwgYmUgZW5mb3JjZWQgc28gdGhhdCB0aGUgY29udGVudCBkb2VzIG5vdCBleHRlbmQgYmV5b25kIHRoZSB2aWV3cG9ydC5cbiAgICovXG4gIGF1dG9EZXRlY3RXaW5kb3dIZWlnaHQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIElmIHNldCB0byB0cnVlLCB0aGUgYm9keSBjb250ZW50IG9mIHRoZSBgRGlhbG9nYCB3aWxsIGJlIHNjcm9sbGFibGUuXG4gICAqL1xuICBhdXRvU2Nyb2xsQm9keUNvbnRlbnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIFRoZSBgY2xhc3NOYW1lYCB0byBhZGQgdG8gdGhlIGNvbnRlbnQncyByb290IGVsZW1lbnQgdW5kZXIgdGhlIHRpdGxlLlxuICAgKi9cbiAgYm9keUNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIGNvbnRlbnQncyByb290IGVsZW1lbnQgdW5kZXIgdGhlIHRpdGxlLlxuICAgKi9cbiAgYm9keVN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIFRoZSBjb250ZW50cyBvZiB0aGUgYERpYWxvZ2AuXG4gICAqL1xuICBjaGlsZHJlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgY2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIFRoZSBgY2xhc3NOYW1lYCB0byBhZGQgdG8gdGhlIGNvbnRlbnQgY29udGFpbmVyLlxuICAgKi9cbiAgY29udGVudENsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIGNvbnRlbnQgY29udGFpbmVyLlxuICAgKi9cbiAgY29udGVudFN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIEZvcmNlIHRoZSB1c2VyIHRvIHVzZSBvbmUgb2YgdGhlIGFjdGlvbnMgaW4gdGhlIGBEaWFsb2dgLlxuICAgKiBDbGlja2luZyBvdXRzaWRlIHRoZSBgRGlhbG9nYCB3aWxsIG5vdCB0cmlnZ2VyIHRoZSBgb25SZXF1ZXN0Q2xvc2VgLlxuICAgKi9cbiAgbW9kYWw6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIEZpcmVkIHdoZW4gdGhlIGBEaWFsb2dgIGlzIHJlcXVlc3RlZCB0byBiZSBjbG9zZWQgYnkgYSBjbGljayBvdXRzaWRlIHRoZSBgRGlhbG9nYCBvciBvbiB0aGUgYnV0dG9ucy5cbiAgICpcbiAgICogQHBhcmFtIHtib29sfSBidXR0b25DbGlja2VkIERldGVybWluZXMgd2hldGhlciBhIGJ1dHRvbiBjbGljayB0cmlnZ2VyZWQgdGhpcyByZXF1ZXN0LlxuICAgKi9cbiAgb25SZXF1ZXN0Q2xvc2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIENvbnRyb2xzIHdoZXRoZXIgdGhlIERpYWxvZyBpcyBvcGVuZWQgb3Igbm90LlxuICAgKi9cbiAgb3BlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLmlzUmVxdWlyZWQsXG4gIC8qKlxuICAgKiBUaGUgYGNsYXNzTmFtZWAgdG8gYWRkIHRvIHRoZSBgT3ZlcmxheWAgY29tcG9uZW50IHRoYXQgaXMgcmVuZGVyZWQgYmVoaW5kIHRoZSBgRGlhbG9nYC5cbiAgICovXG4gIG92ZXJsYXlDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogT3ZlcnJpZGVzIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBgT3ZlcmxheWAgY29tcG9uZW50IHRoYXQgaXMgcmVuZGVyZWQgYmVoaW5kIHRoZSBgRGlhbG9nYC5cbiAgICovXG4gIG92ZXJsYXlTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBUaGUgQ1NTIGNsYXNzIG5hbWUgb2YgdGhlIGBQYXBlcmAgZWxlbWVudC5cbiAgICovXG4gIHBhcGVyQ2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIFByb3BlcnRpZXMgYXBwbGllZCB0byB0aGUgYFBhcGVyYCBlbGVtZW50LlxuICAgKi9cbiAgcGFwZXJQcm9wczogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGBEaWFsb2dgIHNob3VsZCBiZSByZXBvc2l0aW9uZWQgd2hlbiBpdCdzIGNvbnRlbnRzIGFyZSB1cGRhdGVkLlxuICAgKi9cbiAgcmVwb3NpdGlvbk9uVXBkYXRlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhlIHRpdGxlIHRvIGRpc3BsYXkgb24gdGhlIGBEaWFsb2dgLiBDb3VsZCBiZSBudW1iZXIsIHN0cmluZywgZWxlbWVudCBvciBhbiBhcnJheSBjb250YWluaW5nIHRoZXNlIHR5cGVzLlxuICAgKi9cbiAgdGl0bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgLyoqXG4gICAqIFRoZSBgY2xhc3NOYW1lYCB0byBhZGQgdG8gdGhlIHRpdGxlJ3Mgcm9vdCBjb250YWluZXIgZWxlbWVudC5cbiAgICovXG4gIHRpdGxlQ2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIE92ZXJyaWRlcyB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgdGl0bGUncyByb290IGNvbnRhaW5lciBlbGVtZW50LlxuICAgKi9cbiAgdGl0bGVTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3Rcbn0gOiB7fTtcbmV4cG9ydHMuZGVmYXVsdCA9IERpYWxvZztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWF0ZXJpYWwtdWkvRGlhbG9nL0RpYWxvZy5qc1xuLy8gbW9kdWxlIGlkID0gMTQ2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAyIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2dldFByb3RvdHlwZU9mID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mJyk7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjaycpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7XG5cbnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzJyk7XG5cbnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuJyk7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7XG5cbnZhciBfaW5oZXJpdHMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzJyk7XG5cbnZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTtcblxudmFyIF9zaW1wbGVBc3NpZ24gPSByZXF1aXJlKCdzaW1wbGUtYXNzaWduJyk7XG5cbnZhciBfc2ltcGxlQXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NpbXBsZUFzc2lnbik7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbnZhciBfcmVhY3REb20gPSByZXF1aXJlKCdyZWFjdC1kb20nKTtcblxudmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cbnZhciBfcmVhY3RFdmVudExpc3RlbmVyID0gcmVxdWlyZSgncmVhY3QtZXZlbnQtbGlzdGVuZXInKTtcblxudmFyIF9yZWFjdEV2ZW50TGlzdGVuZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3RFdmVudExpc3RlbmVyKTtcblxudmFyIF9rZXljb2RlID0gcmVxdWlyZSgna2V5Y29kZScpO1xuXG52YXIgX2tleWNvZGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5Y29kZSk7XG5cbnZhciBfYXV0b1ByZWZpeCA9IHJlcXVpcmUoJy4uL3V0aWxzL2F1dG9QcmVmaXgnKTtcblxudmFyIF9hdXRvUHJlZml4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F1dG9QcmVmaXgpO1xuXG52YXIgX3RyYW5zaXRpb25zID0gcmVxdWlyZSgnLi4vc3R5bGVzL3RyYW5zaXRpb25zJyk7XG5cbnZhciBfdHJhbnNpdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHJhbnNpdGlvbnMpO1xuXG52YXIgX092ZXJsYXkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9PdmVybGF5Jyk7XG5cbnZhciBfT3ZlcmxheTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9PdmVybGF5KTtcblxudmFyIF9QYXBlciA9IHJlcXVpcmUoJy4uL1BhcGVyJyk7XG5cbnZhciBfUGFwZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUGFwZXIpO1xuXG52YXIgX3Byb3BUeXBlczMgPSByZXF1aXJlKCcuLi91dGlscy9wcm9wVHlwZXMnKTtcblxudmFyIF9wcm9wVHlwZXM0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzMyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBvcGVuTmF2RXZlbnRIYW5kbGVyID0gbnVsbDtcblxudmFyIERyYXdlciA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKERyYXdlciwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gRHJhd2VyKCkge1xuICAgIHZhciBfcmVmO1xuXG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERyYXdlcik7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKF9yZWYgPSBEcmF3ZXIuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERyYXdlcikpLmNhbGwuYXBwbHkoX3JlZiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLmhhbmRsZVRvdWNoVGFwT3ZlcmxheSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIF90aGlzLmNsb3NlKCdjbGlja2F3YXknKTtcbiAgICB9LCBfdGhpcy5oYW5kbGVLZXlVcCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKF90aGlzLnN0YXRlLm9wZW4gJiYgIV90aGlzLnByb3BzLmRvY2tlZCAmJiAoMCwgX2tleWNvZGUyLmRlZmF1bHQpKGV2ZW50KSA9PT0gJ2VzYycpIHtcbiAgICAgICAgX3RoaXMuY2xvc2UoJ2VzY2FwZScpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLm9uQm9keVRvdWNoU3RhcnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciBzd2lwZUFyZWFXaWR0aCA9IF90aGlzLnByb3BzLnN3aXBlQXJlYVdpZHRoO1xuXG4gICAgICB2YXIgdG91Y2hTdGFydFggPSBfdGhpcy5jb250ZXh0Lm11aVRoZW1lLmlzUnRsID8gZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aCAtIGV2ZW50LnRvdWNoZXNbMF0ucGFnZVggOiBldmVudC50b3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgdmFyIHRvdWNoU3RhcnRZID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWTtcblxuICAgICAgLy8gT3BlbiBvbmx5IGlmIHN3aXBpbmcgZnJvbSBmYXIgbGVmdCAob3IgcmlnaHQpIHdoaWxlIGNsb3NlZFxuICAgICAgaWYgKHN3aXBlQXJlYVdpZHRoICE9PSBudWxsICYmICFfdGhpcy5zdGF0ZS5vcGVuKSB7XG4gICAgICAgIGlmIChfdGhpcy5wcm9wcy5vcGVuU2Vjb25kYXJ5KSB7XG4gICAgICAgICAgLy8gSWYgb3BlblNlY29uZGFyeSBpcyB0cnVlIGNhbGN1bGF0ZSBmcm9tIHRoZSBmYXIgcmlnaHRcbiAgICAgICAgICBpZiAodG91Y2hTdGFydFggPCBkb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoIC0gc3dpcGVBcmVhV2lkdGgpIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiBvcGVuU2Vjb25kYXJ5IGlzIGZhbHNlIGNhbGN1bGF0ZSBmcm9tIHRoZSBmYXIgbGVmdFxuICAgICAgICAgIGlmICh0b3VjaFN0YXJ0WCA+IHN3aXBlQXJlYVdpZHRoKSByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFfdGhpcy5zdGF0ZS5vcGVuICYmIChvcGVuTmF2RXZlbnRIYW5kbGVyICE9PSBfdGhpcy5vbkJvZHlUb3VjaFN0YXJ0IHx8IF90aGlzLnByb3BzLmRpc2FibGVTd2lwZVRvT3BlbikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5tYXliZVN3aXBpbmcgPSB0cnVlO1xuICAgICAgX3RoaXMudG91Y2hTdGFydFggPSB0b3VjaFN0YXJ0WDtcbiAgICAgIF90aGlzLnRvdWNoU3RhcnRZID0gdG91Y2hTdGFydFk7XG5cbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgX3RoaXMub25Cb2R5VG91Y2hNb3ZlKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBfdGhpcy5vbkJvZHlUb3VjaEVuZCk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgX3RoaXMub25Cb2R5VG91Y2hFbmQpO1xuICAgIH0sIF90aGlzLm9uQm9keVRvdWNoTW92ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyIGN1cnJlbnRYID0gX3RoaXMuY29udGV4dC5tdWlUaGVtZS5pc1J0bCA/IGRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGggLSBldmVudC50b3VjaGVzWzBdLnBhZ2VYIDogZXZlbnQudG91Y2hlc1swXS5wYWdlWDtcbiAgICAgIHZhciBjdXJyZW50WSA9IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVk7XG5cbiAgICAgIGlmIChfdGhpcy5zdGF0ZS5zd2lwaW5nKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIF90aGlzLnNldFBvc2l0aW9uKF90aGlzLmdldFRyYW5zbGF0ZVgoY3VycmVudFgpKTtcbiAgICAgIH0gZWxzZSBpZiAoX3RoaXMubWF5YmVTd2lwaW5nKSB7XG4gICAgICAgIHZhciBkWEFicyA9IE1hdGguYWJzKGN1cnJlbnRYIC0gX3RoaXMudG91Y2hTdGFydFgpO1xuICAgICAgICB2YXIgZFlBYnMgPSBNYXRoLmFicyhjdXJyZW50WSAtIF90aGlzLnRvdWNoU3RhcnRZKTtcbiAgICAgICAgLy8gSWYgdGhlIHVzZXIgaGFzIG1vdmVkIGhpcyB0aHVtYiB0ZW4gcGl4ZWxzIGluIGVpdGhlciBkaXJlY3Rpb24sXG4gICAgICAgIC8vIHdlIGNhbiBzYWZlbHkgbWFrZSBhbiBhc3N1bXB0aW9uIGFib3V0IHdoZXRoZXIgaGUgd2FzIGludGVuZGluZ1xuICAgICAgICAvLyB0byBzd2lwZSBvciBzY3JvbGwuXG4gICAgICAgIHZhciB0aHJlc2hvbGQgPSAxMDtcblxuICAgICAgICBpZiAoZFhBYnMgPiB0aHJlc2hvbGQgJiYgZFlBYnMgPD0gdGhyZXNob2xkKSB7XG4gICAgICAgICAgX3RoaXMuc3dpcGVTdGFydFggPSBjdXJyZW50WDtcbiAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzd2lwaW5nOiBfdGhpcy5zdGF0ZS5vcGVuID8gJ2Nsb3NpbmcnIDogJ29wZW5pbmcnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgX3RoaXMuc2V0UG9zaXRpb24oX3RoaXMuZ2V0VHJhbnNsYXRlWChjdXJyZW50WCkpO1xuICAgICAgICB9IGVsc2UgaWYgKGRYQWJzIDw9IHRocmVzaG9sZCAmJiBkWUFicyA+IHRocmVzaG9sZCkge1xuICAgICAgICAgIF90aGlzLm9uQm9keVRvdWNoRW5kKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCBfdGhpcy5vbkJvZHlUb3VjaEVuZCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKF90aGlzLnN0YXRlLnN3aXBpbmcpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRYID0gX3RoaXMuY29udGV4dC5tdWlUaGVtZS5pc1J0bCA/IGRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGggLSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCA6IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgICB2YXIgdHJhbnNsYXRlUmF0aW8gPSBfdGhpcy5nZXRUcmFuc2xhdGVYKGN1cnJlbnRYKSAvIF90aGlzLmdldE1heFRyYW5zbGF0ZVgoKTtcblxuICAgICAgICBfdGhpcy5tYXliZVN3aXBpbmcgPSBmYWxzZTtcbiAgICAgICAgdmFyIHN3aXBpbmcgPSBfdGhpcy5zdGF0ZS5zd2lwaW5nO1xuICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgc3dpcGluZzogbnVsbFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBXZSBoYXZlIHRvIG9wZW4gb3IgY2xvc2UgYWZ0ZXIgc2V0dGluZyBzd2lwaW5nIHRvIG51bGwsXG4gICAgICAgIC8vIGJlY2F1c2Ugb25seSB0aGVuIENTUyB0cmFuc2l0aW9uIGlzIGVuYWJsZWQuXG4gICAgICAgIGlmICh0cmFuc2xhdGVSYXRpbyA+IDAuNSkge1xuICAgICAgICAgIGlmIChzd2lwaW5nID09PSAnb3BlbmluZycpIHtcbiAgICAgICAgICAgIF90aGlzLnNldFBvc2l0aW9uKF90aGlzLmdldE1heFRyYW5zbGF0ZVgoKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLmNsb3NlKCdzd2lwZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoc3dpcGluZyA9PT0gJ29wZW5pbmcnKSB7XG4gICAgICAgICAgICBfdGhpcy5vcGVuKCdzd2lwZScpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRQb3NpdGlvbigwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF90aGlzLm1heWJlU3dpcGluZyA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5yZW1vdmVCb2R5VG91Y2hMaXN0ZW5lcnMoKTtcbiAgICB9LCBfdGVtcCksICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkoX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRHJhd2VyLCBbe1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgIHRoaXMubWF5YmVTd2lwaW5nID0gZmFsc2U7XG4gICAgICB0aGlzLnRvdWNoU3RhcnRYID0gbnVsbDtcbiAgICAgIHRoaXMudG91Y2hTdGFydFkgPSBudWxsO1xuICAgICAgdGhpcy5zd2lwZVN0YXJ0WCA9IG51bGw7XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBvcGVuOiB0aGlzLnByb3BzLm9wZW4gIT09IG51bGwgPyB0aGlzLnByb3BzLm9wZW4gOiB0aGlzLnByb3BzLmRvY2tlZCxcbiAgICAgICAgc3dpcGluZzogbnVsbFxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHRoaXMuZW5hYmxlU3dpcGVIYW5kbGluZygpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgLy8gSWYgY29udHJvbGxlZCB0aGVuIHRoZSBvcGVuIHByb3AgdGFrZXMgcHJlY2VkZW5jZS5cbiAgICAgIGlmIChuZXh0UHJvcHMub3BlbiAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBvcGVuOiBuZXh0UHJvcHMub3BlblxuICAgICAgICB9KTtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBpZiBkb2NrZWQgaXMgY2hhbmdlZCwgY2hhbmdlIHRoZSBvcGVuIHN0YXRlIGZvciB3aGVuIHVuY29udHJvbGxlZC5cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5kb2NrZWQgIT09IG5leHRQcm9wcy5kb2NrZWQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgb3BlbjogbmV4dFByb3BzLmRvY2tlZFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnREaWRVcGRhdGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICB0aGlzLmVuYWJsZVN3aXBlSGFuZGxpbmcoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsVW5tb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdGhpcy5kaXNhYmxlU3dpcGVIYW5kbGluZygpO1xuICAgICAgdGhpcy5yZW1vdmVCb2R5VG91Y2hMaXN0ZW5lcnMoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdnZXRTdHlsZXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTdHlsZXMoKSB7XG4gICAgICB2YXIgbXVpVGhlbWUgPSB0aGlzLmNvbnRleHQubXVpVGhlbWU7XG4gICAgICB2YXIgdGhlbWUgPSBtdWlUaGVtZS5kcmF3ZXI7XG5cbiAgICAgIHZhciB4ID0gdGhpcy5nZXRUcmFuc2xhdGVNdWx0aXBsaWVyKCkgKiAodGhpcy5zdGF0ZS5vcGVuID8gMCA6IHRoaXMuZ2V0TWF4VHJhbnNsYXRlWCgpKTtcblxuICAgICAgdmFyIHN0eWxlcyA9IHtcbiAgICAgICAgcm9vdDoge1xuICAgICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICAgIHdpZHRoOiB0aGlzLmdldFRyYW5zbGF0ZWRXaWR0aCgpIHx8IHRoZW1lLndpZHRoLFxuICAgICAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICAgICAgIHpJbmRleDogbXVpVGhlbWUuekluZGV4LmRyYXdlcixcbiAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoJyArIHggKyAncHgsIDApJyxcbiAgICAgICAgICB0cmFuc2l0aW9uOiAhdGhpcy5zdGF0ZS5zd2lwaW5nICYmIF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KG51bGwsICd0cmFuc2Zvcm0nLCBudWxsKSxcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoZW1lLmNvbG9yLFxuICAgICAgICAgIG92ZXJmbG93OiAnYXV0bycsXG4gICAgICAgICAgV2Via2l0T3ZlcmZsb3dTY3JvbGxpbmc6ICd0b3VjaCcgLy8gaU9TIG1vbWVudHVtIHNjcm9sbGluZ1xuICAgICAgICB9LFxuICAgICAgICBvdmVybGF5OiB7XG4gICAgICAgICAgekluZGV4OiBtdWlUaGVtZS56SW5kZXguZHJhd2VyT3ZlcmxheSxcbiAgICAgICAgICBwb2ludGVyRXZlbnRzOiB0aGlzLnN0YXRlLm9wZW4gPyAnYXV0bycgOiAnbm9uZScgLy8gQnlwYXNzIG1vdXNlIGV2ZW50cyB3aGVuIGxlZnQgbmF2IGlzIGNsb3NpbmcuXG4gICAgICAgIH0sXG4gICAgICAgIHJvb3RXaGVuT3BlblJpZ2h0OiB7XG4gICAgICAgICAgbGVmdDogJ2F1dG8nLFxuICAgICAgICAgIHJpZ2h0OiAwXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBzdHlsZXM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2hvdWxkU2hvdycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNob3VsZFNob3coKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdGF0ZS5vcGVuIHx8ICEhdGhpcy5zdGF0ZS5zd2lwaW5nOyAvLyBjb21wb25lbnQgaXMgc3dpcGluZ1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2Nsb3NlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2UocmVhc29uKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5vcGVuID09PSBudWxsKSB0aGlzLnNldFN0YXRlKHsgb3BlbjogZmFsc2UgfSk7XG4gICAgICBpZiAodGhpcy5wcm9wcy5vblJlcXVlc3RDaGFuZ2UpIHRoaXMucHJvcHMub25SZXF1ZXN0Q2hhbmdlKGZhbHNlLCByZWFzb24pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb3BlbicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW4ocmVhc29uKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5vcGVuID09PSBudWxsKSB0aGlzLnNldFN0YXRlKHsgb3BlbjogdHJ1ZSB9KTtcbiAgICAgIGlmICh0aGlzLnByb3BzLm9uUmVxdWVzdENoYW5nZSkgdGhpcy5wcm9wcy5vblJlcXVlc3RDaGFuZ2UodHJ1ZSwgcmVhc29uKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2dldFRyYW5zbGF0ZWRXaWR0aCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRyYW5zbGF0ZWRXaWR0aCgpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy53aWR0aCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKCEvXlxcZCsoXFwuXFxkKyk/JSQvLnRlc3QodGhpcy5wcm9wcy53aWR0aCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBhIHZhbGlkIHBlcmNlbnRhZ2UgZm9ybWF0LicpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB3aWR0aCA9IHBhcnNlRmxvYXQodGhpcy5wcm9wcy53aWR0aCkgLyAxMDAuMDtcbiAgICAgICAgLy8gV2UgYXJlIGRvaW5nIG91ciBiZXN0IG9uIHRoZSBTZXJ2ZXIgdG8gcmVuZGVyIGEgY29uc2lzdGVudCBVSSwgaGVuY2UgdGhlXG4gICAgICAgIC8vIGRlZmF1bHQgdmFsdWUgb2YgMTAwMDBcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2lkdGggKiB3aW5kb3cuaW5uZXJXaWR0aCA6IDEwMDAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMud2lkdGg7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZ2V0TWF4VHJhbnNsYXRlWCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldE1heFRyYW5zbGF0ZVgoKSB7XG4gICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFRyYW5zbGF0ZWRXaWR0aCgpIHx8IHRoaXMuY29udGV4dC5tdWlUaGVtZS5kcmF3ZXIud2lkdGg7XG4gICAgICByZXR1cm4gd2lkdGggKyAxMDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdnZXRUcmFuc2xhdGVNdWx0aXBsaWVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VHJhbnNsYXRlTXVsdGlwbGllcigpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLm9wZW5TZWNvbmRhcnkgPyAxIDogLTE7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZW5hYmxlU3dpcGVIYW5kbGluZycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVuYWJsZVN3aXBlSGFuZGxpbmcoKSB7XG4gICAgICBpZiAoIXRoaXMucHJvcHMuZG9ja2VkKSB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMub25Cb2R5VG91Y2hTdGFydCk7XG4gICAgICAgIGlmICghb3Blbk5hdkV2ZW50SGFuZGxlcikge1xuICAgICAgICAgIG9wZW5OYXZFdmVudEhhbmRsZXIgPSB0aGlzLm9uQm9keVRvdWNoU3RhcnQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGlzYWJsZVN3aXBlSGFuZGxpbmcoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdkaXNhYmxlU3dpcGVIYW5kbGluZycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2FibGVTd2lwZUhhbmRsaW5nKCkge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5vbkJvZHlUb3VjaFN0YXJ0KTtcbiAgICAgIGlmIChvcGVuTmF2RXZlbnRIYW5kbGVyID09PSB0aGlzLm9uQm9keVRvdWNoU3RhcnQpIHtcbiAgICAgICAgb3Blbk5hdkV2ZW50SGFuZGxlciA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVtb3ZlQm9keVRvdWNoTGlzdGVuZXJzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlQm9keVRvdWNoTGlzdGVuZXJzKCkge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLm9uQm9keVRvdWNoTW92ZSk7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5vbkJvZHlUb3VjaEVuZCk7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgdGhpcy5vbkJvZHlUb3VjaEVuZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2V0UG9zaXRpb24nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRQb3NpdGlvbih0cmFuc2xhdGVYKSB7XG4gICAgICB2YXIgcnRsVHJhbnNsYXRlTXVsdGlwbGllciA9IHRoaXMuY29udGV4dC5tdWlUaGVtZS5pc1J0bCA/IC0xIDogMTtcbiAgICAgIHZhciBkcmF3ZXIgPSBfcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcy5yZWZzLmNsaWNrQXdheWFibGVFbGVtZW50KTtcbiAgICAgIHZhciB0cmFuc2Zvcm1DU1MgPSAndHJhbnNsYXRlKCcgKyB0aGlzLmdldFRyYW5zbGF0ZU11bHRpcGxpZXIoKSAqIHJ0bFRyYW5zbGF0ZU11bHRpcGxpZXIgKiB0cmFuc2xhdGVYICsgJ3B4LCAwKSc7XG4gICAgICB0aGlzLnJlZnMub3ZlcmxheS5zZXRPcGFjaXR5KDEgLSB0cmFuc2xhdGVYIC8gdGhpcy5nZXRNYXhUcmFuc2xhdGVYKCkpO1xuICAgICAgX2F1dG9QcmVmaXgyLmRlZmF1bHQuc2V0KGRyYXdlci5zdHlsZSwgJ3RyYW5zZm9ybScsIHRyYW5zZm9ybUNTUyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZ2V0VHJhbnNsYXRlWCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRyYW5zbGF0ZVgoY3VycmVudFgpIHtcbiAgICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1heCh0aGlzLnN0YXRlLnN3aXBpbmcgPT09ICdjbG9zaW5nJyA/IHRoaXMuZ2V0VHJhbnNsYXRlTXVsdGlwbGllcigpICogKGN1cnJlbnRYIC0gdGhpcy5zd2lwZVN0YXJ0WCkgOiB0aGlzLmdldE1heFRyYW5zbGF0ZVgoKSAtIHRoaXMuZ2V0VHJhbnNsYXRlTXVsdGlwbGllcigpICogKHRoaXMuc3dpcGVTdGFydFggLSBjdXJyZW50WCksIDApLCB0aGlzLmdldE1heFRyYW5zbGF0ZVgoKSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgY2hpbGRyZW4gPSBfcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgICAgY2xhc3NOYW1lID0gX3Byb3BzLmNsYXNzTmFtZSxcbiAgICAgICAgICBjb250YWluZXJDbGFzc05hbWUgPSBfcHJvcHMuY29udGFpbmVyQ2xhc3NOYW1lLFxuICAgICAgICAgIGNvbnRhaW5lclN0eWxlID0gX3Byb3BzLmNvbnRhaW5lclN0eWxlLFxuICAgICAgICAgIGRvY2tlZCA9IF9wcm9wcy5kb2NrZWQsXG4gICAgICAgICAgb3BlblNlY29uZGFyeSA9IF9wcm9wcy5vcGVuU2Vjb25kYXJ5LFxuICAgICAgICAgIG92ZXJsYXlDbGFzc05hbWUgPSBfcHJvcHMub3ZlcmxheUNsYXNzTmFtZSxcbiAgICAgICAgICBvdmVybGF5U3R5bGUgPSBfcHJvcHMub3ZlcmxheVN0eWxlLFxuICAgICAgICAgIHN0eWxlID0gX3Byb3BzLnN0eWxlLFxuICAgICAgICAgIHpEZXB0aCA9IF9wcm9wcy56RGVwdGg7XG5cblxuICAgICAgdmFyIHN0eWxlcyA9IHRoaXMuZ2V0U3R5bGVzKCk7XG5cbiAgICAgIHZhciBvdmVybGF5ID0gdm9pZCAwO1xuICAgICAgaWYgKCFkb2NrZWQpIHtcbiAgICAgICAgb3ZlcmxheSA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9PdmVybGF5Mi5kZWZhdWx0LCB7XG4gICAgICAgICAgcmVmOiAnb3ZlcmxheScsXG4gICAgICAgICAgc2hvdzogdGhpcy5zaG91bGRTaG93KCksXG4gICAgICAgICAgY2xhc3NOYW1lOiBvdmVybGF5Q2xhc3NOYW1lLFxuICAgICAgICAgIHN0eWxlOiAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLm92ZXJsYXksIG92ZXJsYXlTdHlsZSksXG4gICAgICAgICAgdHJhbnNpdGlvbkVuYWJsZWQ6ICF0aGlzLnN0YXRlLnN3aXBpbmcsXG4gICAgICAgICAgb25Ub3VjaFRhcDogdGhpcy5oYW5kbGVUb3VjaFRhcE92ZXJsYXlcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHtcbiAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgICBzdHlsZTogc3R5bGVcbiAgICAgICAgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0RXZlbnRMaXN0ZW5lcjIuZGVmYXVsdCwgeyB0YXJnZXQ6ICd3aW5kb3cnLCBvbktleVVwOiB0aGlzLmhhbmRsZUtleVVwIH0pLFxuICAgICAgICBvdmVybGF5LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICBfUGFwZXIyLmRlZmF1bHQsXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVmOiAnY2xpY2tBd2F5YWJsZUVsZW1lbnQnLFxuICAgICAgICAgICAgekRlcHRoOiB6RGVwdGgsXG4gICAgICAgICAgICByb3VuZGVkOiBmYWxzZSxcbiAgICAgICAgICAgIHRyYW5zaXRpb25FbmFibGVkOiAhdGhpcy5zdGF0ZS5zd2lwaW5nLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBjb250YWluZXJDbGFzc05hbWUsXG4gICAgICAgICAgICBzdHlsZTogKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5yb290LCBvcGVuU2Vjb25kYXJ5ICYmIHN0eWxlcy5yb290V2hlbk9wZW5SaWdodCwgY29udGFpbmVyU3R5bGUpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjaGlsZHJlblxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gRHJhd2VyO1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuRHJhd2VyLmRlZmF1bHRQcm9wcyA9IHtcbiAgZGlzYWJsZVN3aXBlVG9PcGVuOiBmYWxzZSxcbiAgZG9ja2VkOiB0cnVlLFxuICBvcGVuOiBudWxsLFxuICBvcGVuU2Vjb25kYXJ5OiBmYWxzZSxcbiAgc3dpcGVBcmVhV2lkdGg6IDMwLFxuICB3aWR0aDogbnVsbCxcbiAgekRlcHRoOiAyXG59O1xuRHJhd2VyLmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5EcmF3ZXIucHJvcFR5cGVzID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8ge1xuICAvKipcbiAgICogVGhlIGNvbnRlbnRzIG9mIHRoZSBgRHJhd2VyYFxuICAgKi9cbiAgY2hpbGRyZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgLyoqXG4gICAqIFRoZSBDU1MgY2xhc3MgbmFtZSBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgY2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIFRoZSBDU1MgY2xhc3MgbmFtZSBvZiB0aGUgY29udGFpbmVyIGVsZW1lbnQuXG4gICAqL1xuICBjb250YWluZXJDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIGNvbnRhaW5lciBlbGVtZW50LlxuICAgKi9cbiAgY29udGFpbmVyU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogSWYgdHJ1ZSwgc3dpcGluZyBzaWRld2F5cyB3aGVuIHRoZSBgRHJhd2VyYCBpcyBjbG9zZWQgd2lsbCBub3Qgb3BlbiBpdC5cbiAgICovXG4gIGRpc2FibGVTd2lwZVRvT3BlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogSWYgdHJ1ZSwgdGhlIGBEcmF3ZXJgIHdpbGwgYmUgZG9ja2VkLiBJbiB0aGlzIHN0YXRlLCB0aGUgb3ZlcmxheSB3b24ndCBzaG93IGFuZFxuICAgKiBjbGlja2luZyBvbiBhIG1lbnUgaXRlbSB3aWxsIG5vdCBjbG9zZSB0aGUgYERyYXdlcmAuXG4gICAqL1xuICBkb2NrZWQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZpcmVkIHdoZW4gdGhlIGBvcGVuYCBzdGF0ZSBvZiB0aGUgYERyYXdlcmAgaXMgcmVxdWVzdGVkIHRvIGJlIGNoYW5nZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3BlbiBJZiB0cnVlLCB0aGUgYERyYXdlcmAgd2FzIHJlcXVlc3RlZCB0byBiZSBvcGVuZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gVGhlIHJlYXNvbiBmb3IgdGhlIG9wZW4gb3IgY2xvc2UgcmVxdWVzdC4gUG9zc2libGUgdmFsdWVzIGFyZVxuICAgKiAnc3dpcGUnIGZvciBvcGVuIHJlcXVlc3RzOyAnY2xpY2thd2F5JyAob24gb3ZlcmxheSBjbGlja3MpLFxuICAgKiAnZXNjYXBlJyAob24gZXNjYXBlIGtleSBwcmVzcyksIGFuZCAnc3dpcGUnIGZvciBjbG9zZSByZXF1ZXN0cy5cbiAgICovXG4gIG9uUmVxdWVzdENoYW5nZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogSWYgdHJ1ZSwgdGhlIGBEcmF3ZXJgIGlzIG9wZW5lZC4gIFByb3ZpZGluZyBhIHZhbHVlIHdpbGwgdHVybiB0aGUgYERyYXdlcmBcbiAgICogaW50byBhIGNvbnRyb2xsZWQgY29tcG9uZW50LlxuICAgKi9cbiAgb3BlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogSWYgdHJ1ZSwgdGhlIGBEcmF3ZXJgIGlzIHBvc2l0aW9uZWQgdG8gb3BlbiBmcm9tIHRoZSBvcHBvc2l0ZSBzaWRlLlxuICAgKi9cbiAgb3BlblNlY29uZGFyeTogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogVGhlIENTUyBjbGFzcyBuYW1lIHRvIGFkZCB0byB0aGUgYE92ZXJsYXlgIGNvbXBvbmVudCB0aGF0IGlzIHJlbmRlcmVkIGJlaGluZCB0aGUgYERyYXdlcmAuXG4gICAqL1xuICBvdmVybGF5Q2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBgT3ZlcmxheWAgY29tcG9uZW50IHRoYXQgaXMgcmVuZGVyZWQgYmVoaW5kIHRoZSBgRHJhd2VyYC5cbiAgICovXG4gIG92ZXJsYXlTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhlIHdpZHRoIG9mIHRoZSBsZWZ0IG1vc3QgKG9yIHJpZ2h0IG1vc3QpIGFyZWEgaW4gcGl4ZWxzIHdoZXJlIHRoZSBgRHJhd2VyYCBjYW4gYmVcbiAgICogc3dpcGVkIG9wZW4gZnJvbS4gU2V0dGluZyB0aGlzIHRvIGBudWxsYCBzcGFucyB0aGF0IGFyZWEgdG8gdGhlIGVudGlyZSBwYWdlXG4gICAqICgqKkNBVVRJT04hKiogU2V0dGluZyB0aGlzIHByb3BlcnR5IHRvIGBudWxsYCBtaWdodCBjYXVzZSBpc3N1ZXMgd2l0aCBzbGlkZXJzIGFuZFxuICAgKiBzd2lwZWFibGUgYFRhYnNgOiB1c2UgYXQgeW91ciBvd24gcmlzaykuXG4gICAqL1xuICBzd2lwZUFyZWFXaWR0aDogX3Byb3BUeXBlczIuZGVmYXVsdC5udW1iZXIsXG4gIC8qKlxuICAgKiBUaGUgd2lkdGggb2YgdGhlIGBEcmF3ZXJgIGluIHBpeGVscyBvciBwZXJjZW50YWdlIGluIHN0cmluZyBmb3JtYXQgZXguIGA1MCVgIHRvIGZpbGxcbiAgICogaGFsZiBvZiB0aGUgd2luZG93IG9yIGAxMDAlYCBhbmQgc28gb24uIERlZmF1bHRzIHRvIHVzaW5nIHRoZSB2YWx1ZXMgZnJvbSB0aGVtZS5cbiAgICovXG4gIHdpZHRoOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9uZU9mVHlwZShbX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsIF9wcm9wVHlwZXMyLmRlZmF1bHQubnVtYmVyXSksXG4gIC8qKlxuICAgKiBUaGUgekRlcHRoIG9mIHRoZSBgRHJhd2VyYC5cbiAgICovXG4gIHpEZXB0aDogX3Byb3BUeXBlczQuZGVmYXVsdC56RGVwdGhcblxufSA6IHt9O1xuZXhwb3J0cy5kZWZhdWx0ID0gRHJhd2VyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9EcmF3ZXIvRHJhd2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAxNDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB1bmRlZmluZWQ7XG5cbnZhciBfRHJhd2VyID0gcmVxdWlyZSgnLi9EcmF3ZXInKTtcblxudmFyIF9EcmF3ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRHJhd2VyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZXhwb3J0cy5kZWZhdWx0ID0gX0RyYXdlcjIuZGVmYXVsdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWF0ZXJpYWwtdWkvRHJhd2VyL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxNDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvZXh0ZW5kcycpO1xuXG52YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllcycpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMik7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YnKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2syID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrJyk7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTtcblxudmFyIF9jcmVhdGVDbGFzczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MnKTtcblxudmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4nKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblxudmFyIF9pbmhlcml0czIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMnKTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG52YXIgX3NpbXBsZUFzc2lnbiA9IHJlcXVpcmUoJ3NpbXBsZS1hc3NpZ24nKTtcblxudmFyIF9zaW1wbGVBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2ltcGxlQXNzaWduKTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxudmFyIF9yZWFjdERvbSA9IHJlcXVpcmUoJ3JlYWN0LWRvbScpO1xuXG52YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblxudmFyIF90cmFuc2l0aW9ucyA9IHJlcXVpcmUoJy4uL3N0eWxlcy90cmFuc2l0aW9ucycpO1xuXG52YXIgX3RyYW5zaXRpb25zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RyYW5zaXRpb25zKTtcblxudmFyIF9hcnJvd0Ryb3BEb3duID0gcmVxdWlyZSgnLi4vc3ZnLWljb25zL25hdmlnYXRpb24vYXJyb3ctZHJvcC1kb3duJyk7XG5cbnZhciBfYXJyb3dEcm9wRG93bjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hcnJvd0Ryb3BEb3duKTtcblxudmFyIF9NZW51ID0gcmVxdWlyZSgnLi4vTWVudS9NZW51Jyk7XG5cbnZhciBfTWVudTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9NZW51KTtcblxudmFyIF9DbGVhckZpeCA9IHJlcXVpcmUoJy4uL2ludGVybmFsL0NsZWFyRml4Jyk7XG5cbnZhciBfQ2xlYXJGaXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ2xlYXJGaXgpO1xuXG52YXIgX1BvcG92ZXIgPSByZXF1aXJlKCcuLi9Qb3BvdmVyL1BvcG92ZXInKTtcblxudmFyIF9Qb3BvdmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BvcG92ZXIpO1xuXG52YXIgX1BvcG92ZXJBbmltYXRpb25WZXJ0aWNhbCA9IHJlcXVpcmUoJy4uL1BvcG92ZXIvUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsJyk7XG5cbnZhciBfUG9wb3ZlckFuaW1hdGlvblZlcnRpY2FsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BvcG92ZXJBbmltYXRpb25WZXJ0aWNhbCk7XG5cbnZhciBfa2V5Y29kZSA9IHJlcXVpcmUoJ2tleWNvZGUnKTtcblxudmFyIF9rZXljb2RlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2tleWNvZGUpO1xuXG52YXIgX2V2ZW50cyA9IHJlcXVpcmUoJy4uL3V0aWxzL2V2ZW50cycpO1xuXG52YXIgX2V2ZW50czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ldmVudHMpO1xuXG52YXIgX0ljb25CdXR0b24gPSByZXF1aXJlKCcuLi9JY29uQnV0dG9uJyk7XG5cbnZhciBfSWNvbkJ1dHRvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9JY29uQnV0dG9uKTtcblxudmFyIF9wcm9wVHlwZXMzID0gcmVxdWlyZSgnLi4vdXRpbHMvcHJvcFR5cGVzJyk7XG5cbnZhciBfcHJvcFR5cGVzNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlczMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBnZXRTdHlsZXMocHJvcHMsIGNvbnRleHQpIHtcbiAgdmFyIGRpc2FibGVkID0gcHJvcHMuZGlzYWJsZWQ7XG5cbiAgdmFyIHNwYWNpbmcgPSBjb250ZXh0Lm11aVRoZW1lLmJhc2VUaGVtZS5zcGFjaW5nO1xuICB2YXIgcGFsZXR0ZSA9IGNvbnRleHQubXVpVGhlbWUuYmFzZVRoZW1lLnBhbGV0dGU7XG4gIHZhciBhY2NlbnRDb2xvciA9IGNvbnRleHQubXVpVGhlbWUuZHJvcERvd25NZW51LmFjY2VudENvbG9yO1xuICByZXR1cm4ge1xuICAgIGNvbnRyb2w6IHtcbiAgICAgIGN1cnNvcjogZGlzYWJsZWQgPyAnbm90LWFsbG93ZWQnIDogJ3BvaW50ZXInLFxuICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgIHdpZHRoOiAnMTAwJSdcbiAgICB9LFxuICAgIGljb246IHtcbiAgICAgIGZpbGw6IGFjY2VudENvbG9yLFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICByaWdodDogc3BhY2luZy5kZXNrdG9wR3V0dGVyTGVzcyxcbiAgICAgIHRvcDogKHNwYWNpbmcuaWNvblNpemUgLSAyNCkgLyAyICsgc3BhY2luZy5kZXNrdG9wR3V0dGVyTWluaSAvIDJcbiAgICB9LFxuICAgIGljb25DaGlsZHJlbjoge1xuICAgICAgZmlsbDogJ2luaGVyaXQnXG4gICAgfSxcbiAgICBsYWJlbDoge1xuICAgICAgY29sb3I6IGRpc2FibGVkID8gcGFsZXR0ZS5kaXNhYmxlZENvbG9yIDogcGFsZXR0ZS50ZXh0Q29sb3IsXG4gICAgICBoZWlnaHQ6IHNwYWNpbmcuZGVza3RvcFRvb2xiYXJIZWlnaHQgKyAncHgnLFxuICAgICAgbGluZUhlaWdodDogc3BhY2luZy5kZXNrdG9wVG9vbGJhckhlaWdodCArICdweCcsXG4gICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICBvcGFjaXR5OiAxLFxuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICBwYWRkaW5nTGVmdDogc3BhY2luZy5kZXNrdG9wR3V0dGVyLFxuICAgICAgcGFkZGluZ1JpZ2h0OiBzcGFjaW5nLmljb25TaXplICogMiArIHNwYWNpbmcuZGVza3RvcEd1dHRlck1pbmksXG4gICAgICB0ZXh0T3ZlcmZsb3c6ICdlbGxpcHNpcycsXG4gICAgICB0b3A6IDAsXG4gICAgICB3aGl0ZVNwYWNlOiAnbm93cmFwJ1xuICAgIH0sXG4gICAgbGFiZWxXaGVuT3Blbjoge1xuICAgICAgb3BhY2l0eTogMCxcbiAgICAgIHRvcDogc3BhY2luZy5kZXNrdG9wVG9vbGJhckhlaWdodCAvIDhcbiAgICB9LFxuICAgIHJvb3Q6IHtcbiAgICAgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuICAgICAgZm9udFNpemU6IHNwYWNpbmcuZGVza3RvcERyb3BEb3duTWVudUZvbnRTaXplLFxuICAgICAgaGVpZ2h0OiBzcGFjaW5nLmRlc2t0b3BTdWJoZWFkZXJIZWlnaHQsXG4gICAgICBmb250RmFtaWx5OiBjb250ZXh0Lm11aVRoZW1lLmJhc2VUaGVtZS5mb250RmFtaWx5LFxuICAgICAgb3V0bGluZTogJ25vbmUnLFxuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICB0cmFuc2l0aW9uOiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgpXG4gICAgfSxcbiAgICByb290V2hlbk9wZW46IHtcbiAgICAgIG9wYWNpdHk6IDFcbiAgICB9LFxuICAgIHVuZGVybGluZToge1xuICAgICAgYm9yZGVyVG9wOiAnc29saWQgMXB4ICcgKyBhY2NlbnRDb2xvcixcbiAgICAgIGJvdHRvbTogMSxcbiAgICAgIGxlZnQ6IDAsXG4gICAgICBtYXJnaW46ICctMXB4ICcgKyBzcGFjaW5nLmRlc2t0b3BHdXR0ZXIgKyAncHgnLFxuICAgICAgcmlnaHQ6IDAsXG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJ1xuICAgIH1cbiAgfTtcbn1cblxudmFyIERyb3BEb3duTWVudSA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKERyb3BEb3duTWVudSwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gRHJvcERvd25NZW51KCkge1xuICAgIHZhciBfcmVmO1xuXG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERyb3BEb3duTWVudSk7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKF9yZWYgPSBEcm9wRG93bk1lbnUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERyb3BEb3duTWVudSkpLmNhbGwuYXBwbHkoX3JlZiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLnN0YXRlID0ge1xuICAgICAgb3BlbjogZmFsc2VcbiAgICB9LCBfdGhpcy5yb290Tm9kZSA9IHVuZGVmaW5lZCwgX3RoaXMuYXJyb3dOb2RlID0gdW5kZWZpbmVkLCBfdGhpcy5oYW5kbGVUb3VjaFRhcENvbnRyb2wgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoIV90aGlzLnByb3BzLmRpc2FibGVkKSB7XG4gICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBvcGVuOiAhX3RoaXMuc3RhdGUub3BlbixcbiAgICAgICAgICBhbmNob3JFbDogX3RoaXMucm9vdE5vZGVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSwgX3RoaXMuaGFuZGxlUmVxdWVzdENsb3NlTWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLmNsb3NlKGZhbHNlKTtcbiAgICB9LCBfdGhpcy5oYW5kbGVFc2NLZXlEb3duTWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLmNsb3NlKHRydWUpO1xuICAgIH0sIF90aGlzLmhhbmRsZUtleURvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHN3aXRjaCAoKDAsIF9rZXljb2RlMi5kZWZhdWx0KShldmVudCkpIHtcbiAgICAgICAgY2FzZSAndXAnOlxuICAgICAgICBjYXNlICdkb3duJzpcbiAgICAgICAgY2FzZSAnc3BhY2UnOlxuICAgICAgICBjYXNlICdlbnRlcic6XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBvcGVuOiB0cnVlLFxuICAgICAgICAgICAgYW5jaG9yRWw6IF90aGlzLnJvb3ROb2RlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSwgX3RoaXMuaGFuZGxlSXRlbVRvdWNoVGFwID0gZnVuY3Rpb24gKGV2ZW50LCBjaGlsZCwgaW5kZXgpIHtcbiAgICAgIGlmIChfdGhpcy5wcm9wcy5tdWx0aXBsZSkge1xuICAgICAgICBpZiAoIV90aGlzLnN0YXRlLm9wZW4pIHtcbiAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IG9wZW46IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGV2ZW50LnBlcnNpc3QoKTtcbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIG9wZW46IGZhbHNlXG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoX3RoaXMucHJvcHMub25DaGFuZ2UpIHtcbiAgICAgICAgICAgIF90aGlzLnByb3BzLm9uQ2hhbmdlKGV2ZW50LCBpbmRleCwgY2hpbGQucHJvcHMudmFsdWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF90aGlzLmNsb3NlKF9ldmVudHMyLmRlZmF1bHQuaXNLZXlib2FyZChldmVudCkpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCBfdGhpcy5oYW5kbGVDaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQsIHZhbHVlKSB7XG4gICAgICBpZiAoX3RoaXMucHJvcHMubXVsdGlwbGUgJiYgX3RoaXMucHJvcHMub25DaGFuZ2UpIHtcbiAgICAgICAgX3RoaXMucHJvcHMub25DaGFuZ2UoZXZlbnQsIHVuZGVmaW5lZCwgdmFsdWUpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmNsb3NlID0gZnVuY3Rpb24gKGlzS2V5Ym9hcmQpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgb3BlbjogZmFsc2VcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF90aGlzLnByb3BzLm9uQ2xvc2UpIHtcbiAgICAgICAgICBfdGhpcy5wcm9wcy5vbkNsb3NlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNLZXlib2FyZCkge1xuICAgICAgICAgIHZhciBkcm9wQXJyb3cgPSBfdGhpcy5hcnJvd05vZGU7XG4gICAgICAgICAgdmFyIGRyb3BOb2RlID0gX3JlYWN0RG9tMi5kZWZhdWx0LmZpbmRET01Ob2RlKGRyb3BBcnJvdyk7XG4gICAgICAgICAgZHJvcE5vZGUuZm9jdXMoKTtcbiAgICAgICAgICBkcm9wQXJyb3cuc2V0S2V5Ym9hcmRGb2N1cyh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSwgX3RlbXApLCAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gIC8vIFRoZSBuZXN0ZWQgc3R5bGVzIGZvciBkcm9wLWRvd24tbWVudSBhcmUgbW9kaWZpZWQgYnkgdG9vbGJhciBhbmQgcG9zc2libHlcbiAgLy8gb3RoZXIgdXNlciBjb21wb25lbnRzLCBzbyBpdCB3aWxsIGdpdmUgZnVsbCBhY2Nlc3MgdG8gaXRzIGpzIHN0eWxlcyByYXRoZXJcbiAgLy8gdGhhbiBqdXN0IHRoZSBwYXJlbnQuXG5cblxuICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShEcm9wRG93bk1lbnUsIFt7XG4gICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy5hdXRvV2lkdGgpIHtcbiAgICAgICAgdGhpcy5zZXRXaWR0aCgpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMucHJvcHMub3BlbkltbWVkaWF0ZWx5KSB7XG4gICAgICAgIC8vIFRPRE86IFRlbXBvcmFyeSBmaXggdG8gbWFrZSBvcGVuSW1tZWRpYXRlbHkgd29yayB3aXRoIHBvcG92ZXIuXG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlIHJlYWN0L25vLWRpZC1tb3VudC1zZXQtc3RhdGUgKi9cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMi5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBvcGVuOiB0cnVlLFxuICAgICAgICAgICAgYW5jaG9yRWw6IF90aGlzMi5yb290Tm9kZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9LCAwKTtcbiAgICAgICAgLyogZXNsaW50LWVuYWJsZSByZWFjdC9uby1kaWQtbW91bnQtc2V0LXN0YXRlICovXG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMoKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5hdXRvV2lkdGgpIHtcbiAgICAgICAgdGhpcy5zZXRXaWR0aCgpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2dldElucHV0Tm9kZScsXG5cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGRlcHJlY2F0ZWQgYnV0IHN0aWxsIGhlcmUgYmVjYXVzZSB0aGUgVGV4dEZpZWxkXG4gICAgICogbmVlZCBpdCBpbiBvcmRlciB0byB3b3JrLiBUT0RPOiBUaGF0IHdpbGwgYmUgYWRkcmVzc2VkIGxhdGVyLlxuICAgICAqL1xuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnB1dE5vZGUoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIHJvb3ROb2RlID0gdGhpcy5yb290Tm9kZTtcblxuICAgICAgcm9vdE5vZGUuZm9jdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghX3RoaXMzLnByb3BzLmRpc2FibGVkKSB7XG4gICAgICAgICAgX3RoaXMzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIG9wZW46ICFfdGhpczMuc3RhdGUub3BlbixcbiAgICAgICAgICAgIGFuY2hvckVsOiBfdGhpczMucm9vdE5vZGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHJvb3ROb2RlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NldFdpZHRoJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0V2lkdGgoKSB7XG4gICAgICB2YXIgZWwgPSB0aGlzLnJvb3ROb2RlO1xuICAgICAgaWYgKCF0aGlzLnByb3BzLnN0eWxlIHx8ICF0aGlzLnByb3BzLnN0eWxlLmhhc093blByb3BlcnR5KCd3aWR0aCcpKSB7XG4gICAgICAgIGVsLnN0eWxlLndpZHRoID0gJ2F1dG8nO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBhbmltYXRlZCA9IF9wcm9wcy5hbmltYXRlZCxcbiAgICAgICAgICBhbmltYXRpb24gPSBfcHJvcHMuYW5pbWF0aW9uLFxuICAgICAgICAgIGF1dG9XaWR0aCA9IF9wcm9wcy5hdXRvV2lkdGgsXG4gICAgICAgICAgbXVsdGlwbGUgPSBfcHJvcHMubXVsdGlwbGUsXG4gICAgICAgICAgY2hpbGRyZW4gPSBfcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgICAgY2xhc3NOYW1lID0gX3Byb3BzLmNsYXNzTmFtZSxcbiAgICAgICAgICBkaXNhYmxlZCA9IF9wcm9wcy5kaXNhYmxlZCxcbiAgICAgICAgICBpY29uU3R5bGUgPSBfcHJvcHMuaWNvblN0eWxlLFxuICAgICAgICAgIGxhYmVsU3R5bGUgPSBfcHJvcHMubGFiZWxTdHlsZSxcbiAgICAgICAgICBsaXN0U3R5bGUgPSBfcHJvcHMubGlzdFN0eWxlLFxuICAgICAgICAgIG1heEhlaWdodCA9IF9wcm9wcy5tYXhIZWlnaHQsXG4gICAgICAgICAgbWVudVN0eWxlUHJvcCA9IF9wcm9wcy5tZW51U3R5bGUsXG4gICAgICAgICAgc2VsZWN0aW9uUmVuZGVyZXIgPSBfcHJvcHMuc2VsZWN0aW9uUmVuZGVyZXIsXG4gICAgICAgICAgb25DbG9zZSA9IF9wcm9wcy5vbkNsb3NlLFxuICAgICAgICAgIG9wZW5JbW1lZGlhdGVseSA9IF9wcm9wcy5vcGVuSW1tZWRpYXRlbHksXG4gICAgICAgICAgbWVudUl0ZW1TdHlsZSA9IF9wcm9wcy5tZW51SXRlbVN0eWxlLFxuICAgICAgICAgIHNlbGVjdGVkTWVudUl0ZW1TdHlsZSA9IF9wcm9wcy5zZWxlY3RlZE1lbnVJdGVtU3R5bGUsXG4gICAgICAgICAgc3R5bGUgPSBfcHJvcHMuc3R5bGUsXG4gICAgICAgICAgdW5kZXJsaW5lU3R5bGUgPSBfcHJvcHMudW5kZXJsaW5lU3R5bGUsXG4gICAgICAgICAgdmFsdWUgPSBfcHJvcHMudmFsdWUsXG4gICAgICAgICAgaWNvbkJ1dHRvbiA9IF9wcm9wcy5pY29uQnV0dG9uLFxuICAgICAgICAgIGFuY2hvck9yaWdpbiA9IF9wcm9wcy5hbmNob3JPcmlnaW4sXG4gICAgICAgICAgdGFyZ2V0T3JpZ2luID0gX3Byb3BzLnRhcmdldE9yaWdpbixcbiAgICAgICAgICBvdGhlciA9ICgwLCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzLmRlZmF1bHQpKF9wcm9wcywgWydhbmltYXRlZCcsICdhbmltYXRpb24nLCAnYXV0b1dpZHRoJywgJ211bHRpcGxlJywgJ2NoaWxkcmVuJywgJ2NsYXNzTmFtZScsICdkaXNhYmxlZCcsICdpY29uU3R5bGUnLCAnbGFiZWxTdHlsZScsICdsaXN0U3R5bGUnLCAnbWF4SGVpZ2h0JywgJ21lbnVTdHlsZScsICdzZWxlY3Rpb25SZW5kZXJlcicsICdvbkNsb3NlJywgJ29wZW5JbW1lZGlhdGVseScsICdtZW51SXRlbVN0eWxlJywgJ3NlbGVjdGVkTWVudUl0ZW1TdHlsZScsICdzdHlsZScsICd1bmRlcmxpbmVTdHlsZScsICd2YWx1ZScsICdpY29uQnV0dG9uJywgJ2FuY2hvck9yaWdpbicsICd0YXJnZXRPcmlnaW4nXSk7XG4gICAgICB2YXIgX3N0YXRlID0gdGhpcy5zdGF0ZSxcbiAgICAgICAgICBhbmNob3JFbCA9IF9zdGF0ZS5hbmNob3JFbCxcbiAgICAgICAgICBvcGVuID0gX3N0YXRlLm9wZW47XG4gICAgICB2YXIgcHJlcGFyZVN0eWxlcyA9IHRoaXMuY29udGV4dC5tdWlUaGVtZS5wcmVwYXJlU3R5bGVzO1xuXG4gICAgICB2YXIgc3R5bGVzID0gZ2V0U3R5bGVzKHRoaXMucHJvcHMsIHRoaXMuY29udGV4dCk7XG5cbiAgICAgIHZhciBkaXNwbGF5VmFsdWUgPSAnJztcbiAgICAgIGlmICghbXVsdGlwbGUpIHtcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LkNoaWxkcmVuLmZvckVhY2goY2hpbGRyZW4sIGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgIGlmIChjaGlsZCAmJiB2YWx1ZSA9PT0gY2hpbGQucHJvcHMudmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rpb25SZW5kZXJlcikge1xuICAgICAgICAgICAgICBkaXNwbGF5VmFsdWUgPSBzZWxlY3Rpb25SZW5kZXJlcih2YWx1ZSwgY2hpbGQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gVGhpcyB3aWxsIG5lZWQgdG8gYmUgaW1wcm92ZWQgKGluIGNhc2UgcHJpbWFyeVRleHQgaXMgYSBub2RlKVxuICAgICAgICAgICAgICBkaXNwbGF5VmFsdWUgPSBjaGlsZC5wcm9wcy5sYWJlbCB8fCBjaGlsZC5wcm9wcy5wcmltYXJ5VGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgICAgICB2YXIgc2VsZWN0aW9uUmVuZGVyZXJDaGlsZHJlbiA9IFtdO1xuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuQ2hpbGRyZW4uZm9yRWFjaChjaGlsZHJlbiwgZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgaWYgKGNoaWxkICYmIHZhbHVlICYmIHZhbHVlLmluZGV4T2YoY2hpbGQucHJvcHMudmFsdWUpID4gLTEpIHtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rpb25SZW5kZXJlcikge1xuICAgICAgICAgICAgICB2YWx1ZXMucHVzaChjaGlsZC5wcm9wcy52YWx1ZSk7XG4gICAgICAgICAgICAgIHNlbGVjdGlvblJlbmRlcmVyQ2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2YWx1ZXMucHVzaChjaGlsZC5wcm9wcy5sYWJlbCB8fCBjaGlsZC5wcm9wcy5wcmltYXJ5VGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBkaXNwbGF5VmFsdWUgPSBbXTtcbiAgICAgICAgaWYgKHNlbGVjdGlvblJlbmRlcmVyKSB7XG4gICAgICAgICAgZGlzcGxheVZhbHVlID0gc2VsZWN0aW9uUmVuZGVyZXIodmFsdWVzLCBzZWxlY3Rpb25SZW5kZXJlckNoaWxkcmVuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkaXNwbGF5VmFsdWUgPSB2YWx1ZXMuam9pbignLCAnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgbWVudVN0eWxlID0gdm9pZCAwO1xuICAgICAgaWYgKGFuY2hvckVsICYmICFhdXRvV2lkdGgpIHtcbiAgICAgICAgbWVudVN0eWxlID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHtcbiAgICAgICAgICB3aWR0aDogYW5jaG9yRWwuY2xpZW50V2lkdGhcbiAgICAgICAgfSwgbWVudVN0eWxlUHJvcCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtZW51U3R5bGUgPSBtZW51U3R5bGVQcm9wO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBvdGhlciwge1xuICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKG5vZGUpIHtcbiAgICAgICAgICAgIF90aGlzNC5yb290Tm9kZSA9IG5vZGU7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgICBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe30sIHN0eWxlcy5yb290LCBvcGVuICYmIHN0eWxlcy5yb290V2hlbk9wZW4sIHN0eWxlKSlcbiAgICAgICAgfSksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIF9DbGVhckZpeDIuZGVmYXVsdCxcbiAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuY29udHJvbCwgb25Ub3VjaFRhcDogdGhpcy5oYW5kbGVUb3VjaFRhcENvbnRyb2wgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe30sIHN0eWxlcy5sYWJlbCwgb3BlbiAmJiBzdHlsZXMubGFiZWxXaGVuT3BlbiwgbGFiZWxTdHlsZSkpIH0sXG4gICAgICAgICAgICBkaXNwbGF5VmFsdWVcbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgX0ljb25CdXR0b24yLmRlZmF1bHQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgICAgICAgICAgb25LZXlEb3duOiB0aGlzLmhhbmRsZUtleURvd24sXG4gICAgICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBfdGhpczQuYXJyb3dOb2RlID0gbm9kZTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgc3R5bGU6ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgc3R5bGVzLmljb24sIGljb25TdHlsZSksXG4gICAgICAgICAgICAgIGljb25TdHlsZTogc3R5bGVzLmljb25DaGlsZHJlblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGljb25CdXR0b25cbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IHN0eWxlOiBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgc3R5bGVzLnVuZGVybGluZSwgdW5kZXJsaW5lU3R5bGUpKSB9KVxuICAgICAgICApLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICBfUG9wb3ZlcjIuZGVmYXVsdCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBhbmNob3JPcmlnaW46IGFuY2hvck9yaWdpbixcbiAgICAgICAgICAgIHRhcmdldE9yaWdpbjogdGFyZ2V0T3JpZ2luLFxuICAgICAgICAgICAgYW5jaG9yRWw6IGFuY2hvckVsLFxuICAgICAgICAgICAgYW5pbWF0aW9uOiBhbmltYXRpb24gfHwgX1BvcG92ZXJBbmltYXRpb25WZXJ0aWNhbDIuZGVmYXVsdCxcbiAgICAgICAgICAgIG9wZW46IG9wZW4sXG4gICAgICAgICAgICBhbmltYXRlZDogYW5pbWF0ZWQsXG4gICAgICAgICAgICBvblJlcXVlc3RDbG9zZTogdGhpcy5oYW5kbGVSZXF1ZXN0Q2xvc2VNZW51XG4gICAgICAgICAgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgIF9NZW51Mi5kZWZhdWx0LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBtdWx0aXBsZTogbXVsdGlwbGUsXG4gICAgICAgICAgICAgIG1heEhlaWdodDogbWF4SGVpZ2h0LFxuICAgICAgICAgICAgICBkZXNrdG9wOiB0cnVlLFxuICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAgIG9uRXNjS2V5RG93bjogdGhpcy5oYW5kbGVFc2NLZXlEb3duTWVudSxcbiAgICAgICAgICAgICAgc3R5bGU6IG1lbnVTdHlsZSxcbiAgICAgICAgICAgICAgbGlzdFN0eWxlOiBsaXN0U3R5bGUsXG4gICAgICAgICAgICAgIG9uSXRlbVRvdWNoVGFwOiB0aGlzLmhhbmRsZUl0ZW1Ub3VjaFRhcCxcbiAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlQ2hhbmdlLFxuICAgICAgICAgICAgICBtZW51SXRlbVN0eWxlOiBtZW51SXRlbVN0eWxlLFxuICAgICAgICAgICAgICBzZWxlY3RlZE1lbnVJdGVtU3R5bGU6IHNlbGVjdGVkTWVudUl0ZW1TdHlsZSxcbiAgICAgICAgICAgICAgYXV0b1dpZHRoOiBhdXRvV2lkdGgsXG4gICAgICAgICAgICAgIHdpZHRoOiAhYXV0b1dpZHRoICYmIG1lbnVTdHlsZSA/IG1lbnVTdHlsZS53aWR0aCA6IG51bGxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjaGlsZHJlblxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIERyb3BEb3duTWVudTtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbkRyb3BEb3duTWVudS5tdWlOYW1lID0gJ0Ryb3BEb3duTWVudSc7XG5Ecm9wRG93bk1lbnUuZGVmYXVsdFByb3BzID0ge1xuICBhbmltYXRlZDogdHJ1ZSxcbiAgYXV0b1dpZHRoOiB0cnVlLFxuICBkaXNhYmxlZDogZmFsc2UsXG4gIGljb25CdXR0b246IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9hcnJvd0Ryb3BEb3duMi5kZWZhdWx0LCBudWxsKSxcbiAgb3BlbkltbWVkaWF0ZWx5OiBmYWxzZSxcbiAgbWF4SGVpZ2h0OiA1MDAsXG4gIG11bHRpcGxlOiBmYWxzZSxcbiAgYW5jaG9yT3JpZ2luOiB7XG4gICAgdmVydGljYWw6ICd0b3AnLFxuICAgIGhvcml6b250YWw6ICdsZWZ0J1xuICB9XG59O1xuRHJvcERvd25NZW51LmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5Ecm9wRG93bk1lbnUucHJvcFR5cGVzID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8ge1xuICAvKipcbiAgICogVGhpcyBpcyB0aGUgcG9pbnQgb24gdGhlIGFuY2hvciB0aGF0IHRoZSBwb3BvdmVyJ3NcbiAgICogYHRhcmdldE9yaWdpbmAgd2lsbCBhdHRhY2ggdG8uXG4gICAqIE9wdGlvbnM6XG4gICAqIHZlcnRpY2FsOiBbdG9wLCBjZW50ZXIsIGJvdHRvbV1cbiAgICogaG9yaXpvbnRhbDogW2xlZnQsIG1pZGRsZSwgcmlnaHRdLlxuICAgKi9cbiAgYW5jaG9yT3JpZ2luOiBfcHJvcFR5cGVzNC5kZWZhdWx0Lm9yaWdpbixcbiAgLyoqXG4gICAqIElmIHRydWUsIHRoZSBwb3BvdmVyIHdpbGwgYXBwbHkgdHJhbnNpdGlvbnMgd2hlblxuICAgKiBpdCBnZXRzIGFkZGVkIHRvIHRoZSBET00uXG4gICAqL1xuICBhbmltYXRlZDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGRlZmF1bHQgYW5pbWF0aW9uIGNvbXBvbmVudCB1c2VkLlxuICAgKi9cbiAgYW5pbWF0aW9uOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBUaGUgd2lkdGggd2lsbCBhdXRvbWF0aWNhbGx5IGJlIHNldCBhY2NvcmRpbmcgdG8gdGhlIGl0ZW1zIGluc2lkZSB0aGUgbWVudS5cbiAgICogVG8gY29udHJvbCB0aGlzIHdpZHRoIGluIGNzcyBpbnN0ZWFkLCBzZXQgdGhpcyBwcm9wIHRvIGBmYWxzZWAuXG4gICAqL1xuICBhdXRvV2lkdGg6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIFRoZSBgTWVudUl0ZW1gcyB0byBwb3B1bGF0ZSB0aGUgYE1lbnVgIHdpdGguIElmIHRoZSBgTWVudUl0ZW1zYCBoYXZlIHRoZVxuICAgKiBwcm9wIGBsYWJlbGAgdGhhdCB2YWx1ZSB3aWxsIGJlIHVzZWQgdG8gcmVuZGVyIHRoZSByZXByZXNlbnRhdGlvbiBvZiB0aGF0XG4gICAqIGl0ZW0gd2l0aGluIHRoZSBmaWVsZC5cbiAgICovXG4gIGNoaWxkcmVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIC8qKlxuICAgKiBUaGUgY3NzIGNsYXNzIG5hbWUgb2YgdGhlIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIGNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBEaXNhYmxlcyB0aGUgbWVudS5cbiAgICovXG4gIGRpc2FibGVkOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgZGVmYXVsdCBgU3ZnSWNvbmAgZHJvcGRvd24gYXJyb3cgY29tcG9uZW50LlxuICAgKi9cbiAgaWNvbkJ1dHRvbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICAvKipcbiAgICogT3ZlcnJpZGVzIHRoZSBzdHlsZXMgb2YgaWNvbiBlbGVtZW50LlxuICAgKi9cbiAgaWNvblN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlcyB0aGUgc3R5bGVzIG9mIGxhYmVsIHdoZW4gdGhlIGBEcm9wRG93bk1lbnVgIGlzIGluYWN0aXZlLlxuICAgKi9cbiAgbGFiZWxTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBUaGUgc3R5bGUgb2JqZWN0IHRvIHVzZSB0byBvdmVycmlkZSB1bmRlcmx5aW5nIGxpc3Qgc3R5bGUuXG4gICAqL1xuICBsaXN0U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhlIG1heGltdW0gaGVpZ2h0IG9mIHRoZSBgTWVudWAgd2hlbiBpdCBpcyBkaXNwbGF5ZWQuXG4gICAqL1xuICBtYXhIZWlnaHQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQubnVtYmVyLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgbWVudSBpdGVtcy5cbiAgICovXG4gIG1lbnVJdGVtU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogT3ZlcnJpZGVzIHRoZSBzdHlsZXMgb2YgYE1lbnVgIHdoZW4gdGhlIGBEcm9wRG93bk1lbnVgIGlzIGRpc3BsYXllZC5cbiAgICovXG4gIG1lbnVTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBJZiB0cnVlLCBgdmFsdWVgIG11c3QgYmUgYW4gYXJyYXkgYW5kIHRoZSBtZW51IHdpbGwgc3VwcG9ydFxuICAgKiBtdWx0aXBsZSBzZWxlY3Rpb25zLlxuICAgKi9cbiAgbXVsdGlwbGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZpcmVkIHdoZW4gYSBtZW51IGl0ZW0gaXMgY2xpY2tlZCwgb3RoZXIgdGhhbiB0aGUgb25lIGN1cnJlbnRseSBzZWxlY3RlZC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IFRvdWNoVGFwIGV2ZW50IHRhcmdldGluZyB0aGUgbWVudSBpdGVtIHRoYXQgd2FzIGNsaWNrZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBrZXkgVGhlIGluZGV4IG9mIHRoZSBjbGlja2VkIG1lbnUgaXRlbSBpbiB0aGUgYGNoaWxkcmVuYCBjb2xsZWN0aW9uLlxuICAgKiBAcGFyYW0ge2FueX0gdmFsdWUgSWYgYG11bHRpcGxlYCBpcyB0cnVlLCB0aGUgbWVudSdzIGB2YWx1ZWBcbiAgICogYXJyYXkgd2l0aCBlaXRoZXIgdGhlIG1lbnUgaXRlbSdzIGB2YWx1ZWAgYWRkZWQgKGlmXG4gICAqIGl0IHdhc24ndCBhbHJlYWR5IHNlbGVjdGVkKSBvciBvbWl0dGVkIChpZiBpdCB3YXMgYWxyZWFkeSBzZWxlY3RlZCkuXG4gICAqIE90aGVyd2lzZSwgdGhlIGB2YWx1ZWAgb2YgdGhlIG1lbnUgaXRlbS5cbiAgICovXG4gIG9uQ2hhbmdlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmdW5jdGlvbiBmaXJlZCB3aGVuIHRoZSBtZW51IGlzIGNsb3NlZC5cbiAgICovXG4gIG9uQ2xvc2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIFNldCB0byB0cnVlIHRvIGhhdmUgdGhlIGBEcm9wRG93bk1lbnVgIGF1dG9tYXRpY2FsbHkgb3BlbiBvbiBtb3VudC5cbiAgICovXG4gIG9wZW5JbW1lZGlhdGVseTogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2Ygc2VsZWN0ZWQgbWVudSBpdGVtcy5cbiAgICovXG4gIHNlbGVjdGVkTWVudUl0ZW1TdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmdW5jdGlvbiBmaXJlZCB3aGVuIGEgbWVudSBpdGVtIGlzIGNsaWNrZWQsIG90aGVyIHRoYW4gdGhlIG9uZSBjdXJyZW50bHkgc2VsZWN0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7YW55fSB2YWx1ZSBJZiBgbXVsdGlwbGVgIGlzIHRydWUsIHRoZSBtZW51J3MgYHZhbHVlYFxuICAgKiBhcnJheSB3aXRoIGVpdGhlciB0aGUgbWVudSBpdGVtJ3MgYHZhbHVlYCBhZGRlZCAoaWZcbiAgICogaXQgd2Fzbid0IGFscmVhZHkgc2VsZWN0ZWQpIG9yIG9taXR0ZWQgKGlmIGl0IHdhcyBhbHJlYWR5IHNlbGVjdGVkKS5cbiAgICogT3RoZXJ3aXNlLCB0aGUgYHZhbHVlYCBvZiB0aGUgbWVudSBpdGVtLlxuICAgKiBAcGFyYW0ge2FueX0gbWVudUl0ZW0gVGhlIHNlbGVjdGVkIGBNZW51SXRlbWAuXG4gICAqIElmIGBtdWx0aXBsZWAgaXMgdHJ1ZSwgdGhpcyB3aWxsIGJlIGFuIGFycmF5IHdpdGggdGhlIGBNZW51SXRlbWBzIG1hdGNoaW5nIHRoZSBgdmFsdWVgcyBwYXJhbWV0ZXIuXG4gICAqL1xuICBzZWxlY3Rpb25SZW5kZXJlcjogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIHN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIHBvaW50IG9uIHRoZSBwb3BvdmVyIHdoaWNoIHdpbGwgYXR0YWNoIHRvXG4gICAqIHRoZSBhbmNob3IncyBvcmlnaW4uXG4gICAqIE9wdGlvbnM6XG4gICAqIHZlcnRpY2FsOiBbdG9wLCBjZW50ZXIsIGJvdHRvbV1cbiAgICogaG9yaXpvbnRhbDogW2xlZnQsIG1pZGRsZSwgcmlnaHRdLlxuICAgKi9cbiAgdGFyZ2V0T3JpZ2luOiBfcHJvcFR5cGVzNC5kZWZhdWx0Lm9yaWdpbixcbiAgLyoqXG4gICAqIE92ZXJyaWRlcyB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgdW5kZXJsaW5lLlxuICAgKi9cbiAgdW5kZXJsaW5lU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogSWYgYG11bHRpcGxlYCBpcyB0cnVlLCBhbiBhcnJheSBvZiB0aGUgYHZhbHVlYHMgb2YgdGhlIHNlbGVjdGVkXG4gICAqIG1lbnUgaXRlbXMuIE90aGVyd2lzZSwgdGhlIGB2YWx1ZWAgb2YgdGhlIHNlbGVjdGVkIG1lbnUgaXRlbS5cbiAgICogSWYgcHJvdmlkZWQsIHRoZSBtZW51IHdpbGwgYmUgYSBjb250cm9sbGVkIGNvbXBvbmVudC5cbiAgICovXG4gIHZhbHVlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmFueVxufSA6IHt9O1xuZXhwb3J0cy5kZWZhdWx0ID0gRHJvcERvd25NZW51O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9Ecm9wRG93bk1lbnUvRHJvcERvd25NZW51LmpzXG4vLyBtb2R1bGUgaWQgPSAxNDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDIiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvZXh0ZW5kcycpO1xuXG52YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllcycpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMik7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YnKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2syID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrJyk7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTtcblxudmFyIF9jcmVhdGVDbGFzczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MnKTtcblxudmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4nKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblxudmFyIF9pbmhlcml0czIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMnKTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG52YXIgX3NpbXBsZUFzc2lnbiA9IHJlcXVpcmUoJ3NpbXBsZS1hc3NpZ24nKTtcblxudmFyIF9zaW1wbGVBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2ltcGxlQXNzaWduKTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxudmFyIF9yZWFjdERvbSA9IHJlcXVpcmUoJ3JlYWN0LWRvbScpO1xuXG52YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblxudmFyIF9ldmVudHMgPSByZXF1aXJlKCcuLi91dGlscy9ldmVudHMnKTtcblxudmFyIF9ldmVudHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXZlbnRzKTtcblxudmFyIF9wcm9wVHlwZXMzID0gcmVxdWlyZSgnLi4vdXRpbHMvcHJvcFR5cGVzJyk7XG5cbnZhciBfcHJvcFR5cGVzNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlczMpO1xuXG52YXIgX01lbnUgPSByZXF1aXJlKCcuLi9NZW51L01lbnUnKTtcblxudmFyIF9NZW51MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX01lbnUpO1xuXG52YXIgX1BvcG92ZXIgPSByZXF1aXJlKCcuLi9Qb3BvdmVyL1BvcG92ZXInKTtcblxudmFyIF9Qb3BvdmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BvcG92ZXIpO1xuXG52YXIgX3dhcm5pbmcgPSByZXF1aXJlKCd3YXJuaW5nJyk7XG5cbnZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIEljb25NZW51ID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoSWNvbk1lbnUsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEljb25NZW51KCkge1xuICAgIHZhciBfcmVmO1xuXG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIEljb25NZW51KTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoX3JlZiA9IEljb25NZW51Ll9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShJY29uTWVudSkpLmNhbGwuYXBwbHkoX3JlZiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLnN0YXRlID0ge1xuICAgICAgbWVudUluaXRpYWxseUtleWJvYXJkRm9jdXNlZDogZmFsc2UsXG4gICAgICBvcGVuOiBmYWxzZVxuICAgIH0sIF90aGlzLmhhbmRsZUl0ZW1Ub3VjaFRhcCA9IGZ1bmN0aW9uIChldmVudCwgY2hpbGQpIHtcbiAgICAgIGlmIChfdGhpcy5wcm9wcy50b3VjaFRhcENsb3NlRGVsYXkgIT09IDAgJiYgIWNoaWxkLnByb3BzLmhhc093blByb3BlcnR5KCdtZW51SXRlbXMnKSkge1xuICAgICAgICB2YXIgaXNLZXlib2FyZCA9IF9ldmVudHMyLmRlZmF1bHQuaXNLZXlib2FyZChldmVudCk7XG4gICAgICAgIF90aGlzLnRpbWVyQ2xvc2VJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzLmNsb3NlKGlzS2V5Ym9hcmQgPyAnZW50ZXInIDogJ2l0ZW1UYXAnLCBpc0tleWJvYXJkKTtcbiAgICAgICAgfSwgX3RoaXMucHJvcHMudG91Y2hUYXBDbG9zZURlbGF5KTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMucHJvcHMub25JdGVtVG91Y2hUYXAoZXZlbnQsIGNoaWxkKTtcbiAgICB9LCBfdGhpcy5oYW5kbGVSZXF1ZXN0Q2xvc2UgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICBfdGhpcy5jbG9zZShyZWFzb24pO1xuICAgIH0sIF90aGlzLmhhbmRsZUVzY0tleURvd25NZW51ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBfdGhpcy5jbG9zZSgnZXNjYXBlJywgZXZlbnQpO1xuICAgIH0sIF90ZW1wKSwgKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KShfdGhpcywgX3JldCk7XG4gIH1cblxuICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShJY29uTWVudSwgW3tcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICAgIGlmIChuZXh0UHJvcHMub3BlbiAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIG9wZW46IG5leHRQcm9wcy5vcGVuLFxuICAgICAgICAgIGFuY2hvckVsOiB0aGlzLnJlZnMuaWNvbk1lbnVDb250YWluZXJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbFVubW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyQ2xvc2VJZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnaXNPcGVuJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNPcGVuKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RhdGUub3BlbjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjbG9zZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlKHJlYXNvbiwgaXNLZXlib2FyZCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIGlmICghdGhpcy5zdGF0ZS5vcGVuKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMucHJvcHMub3BlbiAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLnByb3BzLm9uUmVxdWVzdENoYW5nZShmYWxzZSwgcmVhc29uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBvcGVuOiBmYWxzZSB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gU2V0IGZvY3VzIG9uIHRoZSBpY29uIGJ1dHRvbiB3aGVuIHRoZSBtZW51IGNsb3NlXG4gICAgICAgICAgaWYgKGlzS2V5Ym9hcmQpIHtcbiAgICAgICAgICAgIHZhciBpY29uQnV0dG9uID0gX3RoaXMyLnJlZnMuaWNvbkJ1dHRvbjtcbiAgICAgICAgICAgIF9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZShpY29uQnV0dG9uKS5mb2N1cygpO1xuICAgICAgICAgICAgaWNvbkJ1dHRvbi5zZXRLZXlib2FyZEZvY3VzKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvcGVuJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb3BlbihyZWFzb24sIGV2ZW50KSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5vcGVuICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25SZXF1ZXN0Q2hhbmdlKHRydWUsIHJlYXNvbik7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIG1lbnVJbml0aWFsbHlLZXlib2FyZEZvY3VzZWQ6IF9ldmVudHMyLmRlZmF1bHQuaXNLZXlib2FyZChldmVudCksXG4gICAgICAgICAgYW5jaG9yRWw6IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBvcGVuOiB0cnVlLFxuICAgICAgICBtZW51SW5pdGlhbGx5S2V5Ym9hcmRGb2N1c2VkOiBfZXZlbnRzMi5kZWZhdWx0LmlzS2V5Ym9hcmQoZXZlbnQpLFxuICAgICAgICBhbmNob3JFbDogZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgfSk7XG5cbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGFuY2hvck9yaWdpbiA9IF9wcm9wcy5hbmNob3JPcmlnaW4sXG4gICAgICAgICAgY2xhc3NOYW1lID0gX3Byb3BzLmNsYXNzTmFtZSxcbiAgICAgICAgICBhbmltYXRlZCA9IF9wcm9wcy5hbmltYXRlZCxcbiAgICAgICAgICBhbmltYXRpb24gPSBfcHJvcHMuYW5pbWF0aW9uLFxuICAgICAgICAgIGljb25CdXR0b25FbGVtZW50ID0gX3Byb3BzLmljb25CdXR0b25FbGVtZW50LFxuICAgICAgICAgIGljb25TdHlsZSA9IF9wcm9wcy5pY29uU3R5bGUsXG4gICAgICAgICAgb25JdGVtVG91Y2hUYXAgPSBfcHJvcHMub25JdGVtVG91Y2hUYXAsXG4gICAgICAgICAgb25LZXlib2FyZEZvY3VzID0gX3Byb3BzLm9uS2V5Ym9hcmRGb2N1cyxcbiAgICAgICAgICBvbk1vdXNlRG93biA9IF9wcm9wcy5vbk1vdXNlRG93bixcbiAgICAgICAgICBvbk1vdXNlTGVhdmUgPSBfcHJvcHMub25Nb3VzZUxlYXZlLFxuICAgICAgICAgIG9uTW91c2VFbnRlciA9IF9wcm9wcy5vbk1vdXNlRW50ZXIsXG4gICAgICAgICAgb25Nb3VzZVVwID0gX3Byb3BzLm9uTW91c2VVcCxcbiAgICAgICAgICBvblJlcXVlc3RDaGFuZ2UgPSBfcHJvcHMub25SZXF1ZXN0Q2hhbmdlLFxuICAgICAgICAgIG9uVG91Y2hUYXAgPSBfcHJvcHMub25Ub3VjaFRhcCxcbiAgICAgICAgICBsaXN0U3R5bGUgPSBfcHJvcHMubGlzdFN0eWxlLFxuICAgICAgICAgIG1lbnVTdHlsZSA9IF9wcm9wcy5tZW51U3R5bGUsXG4gICAgICAgICAgc3R5bGUgPSBfcHJvcHMuc3R5bGUsXG4gICAgICAgICAgdGFyZ2V0T3JpZ2luID0gX3Byb3BzLnRhcmdldE9yaWdpbixcbiAgICAgICAgICB0b3VjaFRhcENsb3NlRGVsYXkgPSBfcHJvcHMudG91Y2hUYXBDbG9zZURlbGF5LFxuICAgICAgICAgIHVzZUxheWVyRm9yQ2xpY2tBd2F5ID0gX3Byb3BzLnVzZUxheWVyRm9yQ2xpY2tBd2F5LFxuICAgICAgICAgIG90aGVyID0gKDAsIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMuZGVmYXVsdCkoX3Byb3BzLCBbJ2FuY2hvck9yaWdpbicsICdjbGFzc05hbWUnLCAnYW5pbWF0ZWQnLCAnYW5pbWF0aW9uJywgJ2ljb25CdXR0b25FbGVtZW50JywgJ2ljb25TdHlsZScsICdvbkl0ZW1Ub3VjaFRhcCcsICdvbktleWJvYXJkRm9jdXMnLCAnb25Nb3VzZURvd24nLCAnb25Nb3VzZUxlYXZlJywgJ29uTW91c2VFbnRlcicsICdvbk1vdXNlVXAnLCAnb25SZXF1ZXN0Q2hhbmdlJywgJ29uVG91Y2hUYXAnLCAnbGlzdFN0eWxlJywgJ21lbnVTdHlsZScsICdzdHlsZScsICd0YXJnZXRPcmlnaW4nLCAndG91Y2hUYXBDbG9zZURlbGF5JywgJ3VzZUxheWVyRm9yQ2xpY2tBd2F5J10pO1xuICAgICAgdmFyIHByZXBhcmVTdHlsZXMgPSB0aGlzLmNvbnRleHQubXVpVGhlbWUucHJlcGFyZVN0eWxlcztcbiAgICAgIHZhciBfc3RhdGUgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgIG9wZW4gPSBfc3RhdGUub3BlbixcbiAgICAgICAgICBhbmNob3JFbCA9IF9zdGF0ZS5hbmNob3JFbDtcblxuXG4gICAgICB2YXIgc3R5bGVzID0ge1xuICAgICAgICByb290OiB7XG4gICAgICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZSdcbiAgICAgICAgfSxcbiAgICAgICAgbWVudToge1xuICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHZhciBtZXJnZWRSb290U3R5bGVzID0gKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5yb290LCBzdHlsZSk7XG4gICAgICB2YXIgbWVyZ2VkTWVudVN0eWxlcyA9ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMubWVudSwgbWVudVN0eWxlKTtcblxuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gKDAsIF93YXJuaW5nMi5kZWZhdWx0KShpY29uQnV0dG9uRWxlbWVudC50eXBlLm11aU5hbWUgIT09ICdTdmdJY29uJywgJ01hdGVyaWFsLVVJOiBZb3Ugc2hvdWQgbm90IHByb3ZpZGUgYW4gPFN2Z0ljb24gLz4gdG8gdGhlIFxcJ2ljb25CdXR0b25FbGVtZW50XFwnIHByb3BlcnR5IG9mIDxJY29uTWVudSAvPi5cXG5Zb3Ugc2hvdWxkIHdyYXBwZWQgaXQgd2l0aCBhbiA8SWNvbkJ1dHRvbiAvPi4nKSA6IHZvaWQgMDtcblxuICAgICAgdmFyIGljb25CdXR0b25Qcm9wcyA9IHtcbiAgICAgICAgb25LZXlib2FyZEZvY3VzOiBvbktleWJvYXJkRm9jdXMsXG4gICAgICAgIG9uVG91Y2hUYXA6IGZ1bmN0aW9uIG9uVG91Y2hUYXAoZXZlbnQpIHtcbiAgICAgICAgICBfdGhpczMub3BlbihfZXZlbnRzMi5kZWZhdWx0LmlzS2V5Ym9hcmQoZXZlbnQpID8gJ2tleWJvYXJkJyA6ICdpY29uVGFwJywgZXZlbnQpO1xuICAgICAgICAgIGlmIChpY29uQnV0dG9uRWxlbWVudC5wcm9wcy5vblRvdWNoVGFwKSB7XG4gICAgICAgICAgICBpY29uQnV0dG9uRWxlbWVudC5wcm9wcy5vblRvdWNoVGFwKGV2ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlZjogJ2ljb25CdXR0b24nXG4gICAgICB9O1xuICAgICAgaWYgKGljb25TdHlsZSB8fCBpY29uQnV0dG9uRWxlbWVudC5wcm9wcy5pY29uU3R5bGUpIHtcbiAgICAgICAgaWNvbkJ1dHRvblByb3BzLmljb25TdHlsZSA9IGljb25TdHlsZSA/ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgaWNvblN0eWxlLCBpY29uQnV0dG9uRWxlbWVudC5wcm9wcy5pY29uU3R5bGUpIDogaWNvbkJ1dHRvbkVsZW1lbnQucHJvcHMuaWNvblN0eWxlO1xuICAgICAgfVxuICAgICAgdmFyIGljb25CdXR0b24gPSBfcmVhY3QyLmRlZmF1bHQuY2xvbmVFbGVtZW50KGljb25CdXR0b25FbGVtZW50LCBpY29uQnV0dG9uUHJvcHMpO1xuXG4gICAgICB2YXIgbWVudSA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICBfTWVudTIuZGVmYXVsdCxcbiAgICAgICAgKDAsIF9leHRlbmRzMy5kZWZhdWx0KSh7fSwgb3RoZXIsIHtcbiAgICAgICAgICBpbml0aWFsbHlLZXlib2FyZEZvY3VzZWQ6IHRoaXMuc3RhdGUubWVudUluaXRpYWxseUtleWJvYXJkRm9jdXNlZCxcbiAgICAgICAgICBvbkVzY0tleURvd246IHRoaXMuaGFuZGxlRXNjS2V5RG93bk1lbnUsXG4gICAgICAgICAgb25JdGVtVG91Y2hUYXA6IHRoaXMuaGFuZGxlSXRlbVRvdWNoVGFwLFxuICAgICAgICAgIHN0eWxlOiBtZXJnZWRNZW51U3R5bGVzLFxuICAgICAgICAgIGxpc3RTdHlsZTogbGlzdFN0eWxlXG4gICAgICAgIH0pLFxuICAgICAgICB0aGlzLnByb3BzLmNoaWxkcmVuXG4gICAgICApO1xuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7XG4gICAgICAgICAgcmVmOiAnaWNvbk1lbnVDb250YWluZXInLFxuICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICAgIG9uTW91c2VEb3duOiBvbk1vdXNlRG93bixcbiAgICAgICAgICBvbk1vdXNlTGVhdmU6IG9uTW91c2VMZWF2ZSxcbiAgICAgICAgICBvbk1vdXNlRW50ZXI6IG9uTW91c2VFbnRlcixcbiAgICAgICAgICBvbk1vdXNlVXA6IG9uTW91c2VVcCxcbiAgICAgICAgICBvblRvdWNoVGFwOiBvblRvdWNoVGFwLFxuICAgICAgICAgIHN0eWxlOiBwcmVwYXJlU3R5bGVzKG1lcmdlZFJvb3RTdHlsZXMpXG4gICAgICAgIH0sXG4gICAgICAgIGljb25CdXR0b24sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIF9Qb3BvdmVyMi5kZWZhdWx0LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGFuY2hvck9yaWdpbjogYW5jaG9yT3JpZ2luLFxuICAgICAgICAgICAgdGFyZ2V0T3JpZ2luOiB0YXJnZXRPcmlnaW4sXG4gICAgICAgICAgICBvcGVuOiBvcGVuLFxuICAgICAgICAgICAgYW5jaG9yRWw6IGFuY2hvckVsLFxuICAgICAgICAgICAgY2hpbGRDb250ZXh0VHlwZXM6IHRoaXMuY29uc3RydWN0b3IuY2hpbGRDb250ZXh0VHlwZXMsXG4gICAgICAgICAgICB1c2VMYXllckZvckNsaWNrQXdheTogdXNlTGF5ZXJGb3JDbGlja0F3YXksXG4gICAgICAgICAgICBvblJlcXVlc3RDbG9zZTogdGhpcy5oYW5kbGVSZXF1ZXN0Q2xvc2UsXG4gICAgICAgICAgICBhbmltYXRlZDogYW5pbWF0ZWQsXG4gICAgICAgICAgICBhbmltYXRpb246IGFuaW1hdGlvbixcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuY29udGV4dFxuICAgICAgICAgIH0sXG4gICAgICAgICAgbWVudVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gSWNvbk1lbnU7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5JY29uTWVudS5tdWlOYW1lID0gJ0ljb25NZW51Jztcbkljb25NZW51LmRlZmF1bHRQcm9wcyA9IHtcbiAgYW5jaG9yT3JpZ2luOiB7XG4gICAgdmVydGljYWw6ICd0b3AnLFxuICAgIGhvcml6b250YWw6ICdsZWZ0J1xuICB9LFxuICBhbmltYXRlZDogdHJ1ZSxcbiAgbXVsdGlwbGU6IGZhbHNlLFxuICBvcGVuOiBudWxsLFxuICBvbkl0ZW1Ub3VjaFRhcDogZnVuY3Rpb24gb25JdGVtVG91Y2hUYXAoKSB7fSxcbiAgb25LZXlib2FyZEZvY3VzOiBmdW5jdGlvbiBvbktleWJvYXJkRm9jdXMoKSB7fSxcbiAgb25Nb3VzZURvd246IGZ1bmN0aW9uIG9uTW91c2VEb3duKCkge30sXG4gIG9uTW91c2VMZWF2ZTogZnVuY3Rpb24gb25Nb3VzZUxlYXZlKCkge30sXG4gIG9uTW91c2VFbnRlcjogZnVuY3Rpb24gb25Nb3VzZUVudGVyKCkge30sXG4gIG9uTW91c2VVcDogZnVuY3Rpb24gb25Nb3VzZVVwKCkge30sXG4gIG9uUmVxdWVzdENoYW5nZTogZnVuY3Rpb24gb25SZXF1ZXN0Q2hhbmdlKCkge30sXG4gIG9uVG91Y2hUYXA6IGZ1bmN0aW9uIG9uVG91Y2hUYXAoKSB7fSxcbiAgdGFyZ2V0T3JpZ2luOiB7XG4gICAgdmVydGljYWw6ICd0b3AnLFxuICAgIGhvcml6b250YWw6ICdsZWZ0J1xuICB9LFxuICB0b3VjaFRhcENsb3NlRGVsYXk6IDIwMCxcbiAgdXNlTGF5ZXJGb3JDbGlja0F3YXk6IGZhbHNlXG59O1xuSWNvbk1lbnUuY29udGV4dFR5cGVzID0ge1xuICBtdWlUaGVtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QuaXNSZXF1aXJlZFxufTtcbkljb25NZW51LnByb3BUeXBlcyA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHtcbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIHBvaW50IG9uIHRoZSBpY29uIHdoZXJlIHRoZSBtZW51XG4gICAqIGB0YXJnZXRPcmlnaW5gIHdpbGwgYXR0YWNoLlxuICAgKiBPcHRpb25zOlxuICAgKiB2ZXJ0aWNhbDogW3RvcCwgY2VudGVyLCBib3R0b21dXG4gICAqIGhvcml6b250YWw6IFtsZWZ0LCBtaWRkbGUsIHJpZ2h0XS5cbiAgICovXG4gIGFuY2hvck9yaWdpbjogX3Byb3BUeXBlczQuZGVmYXVsdC5vcmlnaW4sXG4gIC8qKlxuICAgKiBJZiB0cnVlLCB0aGUgcG9wb3ZlciB3aWxsIGFwcGx5IHRyYW5zaXRpb25zIHdoZW5cbiAgICogaXQgZ2V0cyBhZGRlZCB0byB0aGUgRE9NLlxuICAgKi9cbiAgYW5pbWF0ZWQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBkZWZhdWx0IGFuaW1hdGlvbiBjb21wb25lbnQgdXNlZC5cbiAgICovXG4gIGFuaW1hdGlvbjogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogU2hvdWxkIGJlIHVzZWQgdG8gcGFzcyBgTWVudUl0ZW1gIGNvbXBvbmVudHMuXG4gICAqL1xuICBjaGlsZHJlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICAvKipcbiAgICogVGhlIENTUyBjbGFzcyBuYW1lIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBjbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogVGhpcyBpcyB0aGUgYEljb25CdXR0b25gIHRvIHJlbmRlci4gVGhpcyBidXR0b24gd2lsbCBvcGVuIHRoZSBtZW51LlxuICAgKi9cbiAgaWNvbkJ1dHRvbkVsZW1lbnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZWxlbWVudC5pc1JlcXVpcmVkLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIHVuZGVybHlpbmcgaWNvbiBlbGVtZW50LlxuICAgKi9cbiAgaWNvblN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSB1bmRlcmx5aW5nIGBMaXN0YCBlbGVtZW50LlxuICAgKi9cbiAgbGlzdFN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBtZW51IGVsZW1lbnQuXG4gICAqL1xuICBtZW51U3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogSWYgdHJ1ZSwgdGhlIHZhbHVlIGNhbiBhbiBiZSBhcnJheSBhbmQgYWxsb3cgdGhlIG1lbnUgdG8gYmUgYSBtdWx0aS1zZWxlY3QuXG4gICAqL1xuICBtdWx0aXBsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gZmlyZWQgd2hlbiBhIG1lbnUgaXRlbSBpcyBzZWxlY3RlZCB3aXRoIGEgdG91Y2gtdGFwLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgVG91Y2hUYXAgZXZlbnQgdGFyZ2V0aW5nIHRoZSBzZWxlY3RlZCBtZW51IGl0ZW0gZWxlbWVudC5cbiAgICogQHBhcmFtIHtvYmplY3R9IGNoaWxkIFRoZSBzZWxlY3RlZCBlbGVtZW50LlxuICAgKi9cbiAgb25JdGVtVG91Y2hUYXA6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZpcmVkIHdoZW4gdGhlIGBJY29uQnV0dG9uYCBlbGVtZW50IGlzIGZvY3VzZWQgb3IgYmx1cnJlZCBieSB0aGUga2V5Ym9hcmQuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBgZm9jdXNgIG9yIGBibHVyYCBldmVudCB0YXJnZXRpbmcgdGhlIGBJY29uQnV0dG9uYCBlbGVtZW50LlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGtleWJvYXJkRm9jdXNlZCBJZiB0cnVlLCB0aGUgYEljb25CdXR0b25gIGVsZW1lbnQgaXMgZm9jdXNlZC5cbiAgICovXG4gIG9uS2V5Ym9hcmRGb2N1czogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKiogQGlnbm9yZSAqL1xuICBvbk1vdXNlRG93bjogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKiogQGlnbm9yZSAqL1xuICBvbk1vdXNlRW50ZXI6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqIEBpZ25vcmUgKi9cbiAgb25Nb3VzZUxlYXZlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKiBAaWdub3JlICovXG4gIG9uTW91c2VVcDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKipcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gZmlyZWQgd2hlbiB0aGUgYG9wZW5gIHN0YXRlIG9mIHRoZSBtZW51IGlzIHJlcXVlc3RlZCB0byBiZSBjaGFuZ2VkLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wZW4gSWYgdHJ1ZSwgdGhlIG1lbnUgd2FzIHJlcXVlc3RlZCB0byBiZSBvcGVuZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gVGhlIHJlYXNvbiBmb3IgdGhlIG9wZW4gb3IgY2xvc2UgcmVxdWVzdC4gUG9zc2libGUgdmFsdWVzIGFyZVxuICAgKiAna2V5Ym9hcmQnIGFuZCAnaWNvblRhcCcgZm9yIG9wZW4gcmVxdWVzdHM7ICdlbnRlcicsICdlc2NhcGUnLCAnaXRlbVRhcCcsIGFuZCAnY2xpY2tBd2F5J1xuICAgKiBmb3IgY2xvc2UgcmVxdWVzdHMuXG4gICAqL1xuICBvblJlcXVlc3RDaGFuZ2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZpcmVkIHdoZW4gdGhlIGBJY29uQnV0dG9uYCBlbGVtZW50IGlzIHRvdWNoLXRhcHBlZC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IFRvdWNoVGFwIGV2ZW50IHRhcmdldGluZyB0aGUgYEljb25CdXR0b25gIGVsZW1lbnQuXG4gICAqL1xuICBvblRvdWNoVGFwOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKlxuICAgKiBJZiB0cnVlLCB0aGUgYEljb25NZW51YCBpcyBvcGVuZWQuXG4gICAqL1xuICBvcGVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhpcyBpcyB0aGUgcG9pbnQgb24gdGhlIG1lbnUgd2hpY2ggd2lsbCBzdGljayB0byB0aGUgbWVudVxuICAgKiBvcmlnaW4uXG4gICAqIE9wdGlvbnM6XG4gICAqIHZlcnRpY2FsOiBbdG9wLCBjZW50ZXIsIGJvdHRvbV1cbiAgICogaG9yaXpvbnRhbDogW2xlZnQsIG1pZGRsZSwgcmlnaHRdLlxuICAgKi9cbiAgdGFyZ2V0T3JpZ2luOiBfcHJvcFR5cGVzNC5kZWZhdWx0Lm9yaWdpbixcbiAgLyoqXG4gICAqIFNldHMgdGhlIGRlbGF5IGluIG1pbGxpc2Vjb25kcyBiZWZvcmUgY2xvc2luZyB0aGVcbiAgICogbWVudSB3aGVuIGFuIGl0ZW0gaXMgY2xpY2tlZC5cbiAgICogSWYgc2V0IHRvIDAgdGhlbiB0aGUgYXV0byBjbG9zZSBmdW5jdGlvbmFsaXR5XG4gICAqIHdpbGwgYmUgZGlzYWJsZWQuXG4gICAqL1xuICB0b3VjaFRhcENsb3NlRGVsYXk6IF9wcm9wVHlwZXMyLmRlZmF1bHQubnVtYmVyLFxuICAvKipcbiAgICogSWYgdHJ1ZSwgdGhlIHBvcG92ZXIgd2lsbCByZW5kZXIgb24gdG9wIG9mIGFuIGludmlzaWJsZVxuICAgKiBsYXllciwgd2hpY2ggd2lsbCBwcmV2ZW50IGNsaWNrcyB0byB0aGUgdW5kZXJseWluZyBlbGVtZW50cy5cbiAgICovXG4gIHVzZUxheWVyRm9yQ2xpY2tBd2F5OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2xcbn0gOiB7fTtcbmV4cG9ydHMuZGVmYXVsdCA9IEljb25NZW51O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9JY29uTWVudS9JY29uTWVudS5qc1xuLy8gbW9kdWxlIGlkID0gMTUwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gZXhwb3J0cy5NZW51SXRlbSA9IGV4cG9ydHMuSWNvbk1lbnUgPSB1bmRlZmluZWQ7XG5cbnZhciBfSWNvbk1lbnUyID0gcmVxdWlyZSgnLi9JY29uTWVudScpO1xuXG52YXIgX0ljb25NZW51MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ljb25NZW51Mik7XG5cbnZhciBfTWVudUl0ZW0yID0gcmVxdWlyZSgnLi4vTWVudUl0ZW0vTWVudUl0ZW0nKTtcblxudmFyIF9NZW51SXRlbTMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9NZW51SXRlbTIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5leHBvcnRzLkljb25NZW51ID0gX0ljb25NZW51My5kZWZhdWx0O1xuZXhwb3J0cy5NZW51SXRlbSA9IF9NZW51SXRlbTMuZGVmYXVsdDtcbmV4cG9ydHMuZGVmYXVsdCA9IF9JY29uTWVudTMuZGVmYXVsdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWF0ZXJpYWwtdWkvSWNvbk1lbnUvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE1MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9leHRlbmRzJyk7XG5cbnZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzJyk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZicpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcycpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybicpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpO1xuXG52YXIgX2luaGVyaXRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cycpO1xuXG52YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cbnZhciBfc2ltcGxlQXNzaWduID0gcmVxdWlyZSgnc2ltcGxlLWFzc2lnbicpO1xuXG52YXIgX3NpbXBsZUFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaW1wbGVBc3NpZ24pO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX3RyYW5zaXRpb25zID0gcmVxdWlyZSgnLi4vc3R5bGVzL3RyYW5zaXRpb25zJyk7XG5cbnZhciBfdHJhbnNpdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHJhbnNpdGlvbnMpO1xuXG52YXIgX0NsaWNrQXdheUxpc3RlbmVyID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvQ2xpY2tBd2F5TGlzdGVuZXInKTtcblxudmFyIF9DbGlja0F3YXlMaXN0ZW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9DbGlja0F3YXlMaXN0ZW5lcik7XG5cbnZhciBfU25hY2tiYXJCb2R5ID0gcmVxdWlyZSgnLi9TbmFja2JhckJvZHknKTtcblxudmFyIF9TbmFja2JhckJvZHkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU25hY2tiYXJCb2R5KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gZ2V0U3R5bGVzKHByb3BzLCBjb250ZXh0LCBzdGF0ZSkge1xuICB2YXIgX2NvbnRleHQkbXVpVGhlbWUgPSBjb250ZXh0Lm11aVRoZW1lLFxuICAgICAgZGVza3RvcFN1YmhlYWRlckhlaWdodCA9IF9jb250ZXh0JG11aVRoZW1lLmJhc2VUaGVtZS5zcGFjaW5nLmRlc2t0b3BTdWJoZWFkZXJIZWlnaHQsXG4gICAgICB6SW5kZXggPSBfY29udGV4dCRtdWlUaGVtZS56SW5kZXg7XG4gIHZhciBvcGVuID0gc3RhdGUub3BlbjtcblxuXG4gIHZhciBzdHlsZXMgPSB7XG4gICAgcm9vdDoge1xuICAgICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgICBsZWZ0OiAnNTAlJyxcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIGJvdHRvbTogMCxcbiAgICAgIHpJbmRleDogekluZGV4LnNuYWNrYmFyLFxuICAgICAgdmlzaWJpbGl0eTogb3BlbiA/ICd2aXNpYmxlJyA6ICdoaWRkZW4nLFxuICAgICAgdHJhbnNmb3JtOiBvcGVuID8gJ3RyYW5zbGF0ZSgtNTAlLCAwKScgOiAndHJhbnNsYXRlKC01MCUsICcgKyBkZXNrdG9wU3ViaGVhZGVySGVpZ2h0ICsgJ3B4KScsXG4gICAgICB0cmFuc2l0aW9uOiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnNDAwbXMnLCAndHJhbnNmb3JtJykgKyAnLCAnICsgX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoJzQwMG1zJywgJ3Zpc2liaWxpdHknKVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gc3R5bGVzO1xufVxuXG52YXIgU25hY2tiYXIgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShTbmFja2JhciwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gU25hY2tiYXIoKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgU25hY2tiYXIpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChfcmVmID0gU25hY2tiYXIuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKFNuYWNrYmFyKSkuY2FsbC5hcHBseShfcmVmLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuY29tcG9uZW50Q2xpY2tBd2F5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF90aGlzLnRpbWVyVHJhbnNpdGlvbklkKSB7XG4gICAgICAgIC8vIElmIHRyYW5zaXRpb25pbmcsIGRvbid0IGNsb3NlIHRoZSBzbmFja2Jhci5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoX3RoaXMucHJvcHMub3BlbiAhPT0gbnVsbCAmJiBfdGhpcy5wcm9wcy5vblJlcXVlc3RDbG9zZSkge1xuICAgICAgICBfdGhpcy5wcm9wcy5vblJlcXVlc3RDbG9zZSgnY2xpY2thd2F5Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IG9wZW46IGZhbHNlIH0pO1xuICAgICAgfVxuICAgIH0sIF90ZW1wKSwgKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KShfdGhpcywgX3JldCk7XG4gIH1cblxuICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShTbmFja2JhciwgW3tcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgb3BlbjogdGhpcy5wcm9wcy5vcGVuLFxuICAgICAgICBtZXNzYWdlOiB0aGlzLnByb3BzLm1lc3NhZ2UsXG4gICAgICAgIGFjdGlvbjogdGhpcy5wcm9wcy5hY3Rpb25cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICBpZiAodGhpcy5zdGF0ZS5vcGVuKSB7XG4gICAgICAgIHRoaXMuc2V0QXV0b0hpZGVUaW1lcigpO1xuICAgICAgICB0aGlzLnNldFRyYW5zaXRpb25UaW1lcigpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLm9wZW4gJiYgbmV4dFByb3BzLm9wZW4gJiYgKG5leHRQcm9wcy5tZXNzYWdlICE9PSB0aGlzLnByb3BzLm1lc3NhZ2UgfHwgbmV4dFByb3BzLmFjdGlvbiAhPT0gdGhpcy5wcm9wcy5hY3Rpb24pKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIG9wZW46IGZhbHNlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyT25lQXRUaGVUaW1lSWQpO1xuICAgICAgICB0aGlzLnRpbWVyT25lQXRUaGVUaW1lSWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczIuc2V0U3RhdGUoe1xuICAgICAgICAgICAgbWVzc2FnZTogbmV4dFByb3BzLm1lc3NhZ2UsXG4gICAgICAgICAgICBhY3Rpb246IG5leHRQcm9wcy5hY3Rpb24sXG4gICAgICAgICAgICBvcGVuOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIDQwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgb3BlbiA9IG5leHRQcm9wcy5vcGVuO1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIG9wZW46IG9wZW4gIT09IG51bGwgPyBvcGVuIDogdGhpcy5zdGF0ZS5vcGVuLFxuICAgICAgICAgIG1lc3NhZ2U6IG5leHRQcm9wcy5tZXNzYWdlLFxuICAgICAgICAgIGFjdGlvbjogbmV4dFByb3BzLmFjdGlvblxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnREaWRVcGRhdGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgIGlmIChwcmV2U3RhdGUub3BlbiAhPT0gdGhpcy5zdGF0ZS5vcGVuKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLm9wZW4pIHtcbiAgICAgICAgICB0aGlzLnNldEF1dG9IaWRlVGltZXIoKTtcbiAgICAgICAgICB0aGlzLnNldFRyYW5zaXRpb25UaW1lcigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyQXV0b0hpZGVJZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb21wb25lbnRXaWxsVW5tb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJBdXRvSGlkZUlkKTtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyVHJhbnNpdGlvbklkKTtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyT25lQXRUaGVUaW1lSWQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NldEF1dG9IaWRlVGltZXInLFxuXG5cbiAgICAvLyBUaW1lciB0aGF0IGNvbnRyb2xzIGRlbGF5IGJlZm9yZSBzbmFja2JhciBhdXRvIGhpZGVzXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldEF1dG9IaWRlVGltZXIoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIGF1dG9IaWRlRHVyYXRpb24gPSB0aGlzLnByb3BzLmF1dG9IaWRlRHVyYXRpb247XG5cbiAgICAgIGlmIChhdXRvSGlkZUR1cmF0aW9uID4gMCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lckF1dG9IaWRlSWQpO1xuICAgICAgICB0aGlzLnRpbWVyQXV0b0hpZGVJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChfdGhpczMucHJvcHMub3BlbiAhPT0gbnVsbCAmJiBfdGhpczMucHJvcHMub25SZXF1ZXN0Q2xvc2UpIHtcbiAgICAgICAgICAgIF90aGlzMy5wcm9wcy5vblJlcXVlc3RDbG9zZSgndGltZW91dCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfdGhpczMuc2V0U3RhdGUoeyBvcGVuOiBmYWxzZSB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGF1dG9IaWRlRHVyYXRpb24pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRpbWVyIHRoYXQgY29udHJvbHMgZGVsYXkgYmVmb3JlIGNsaWNrLWF3YXkgZXZlbnRzIGFyZSBjYXB0dXJlZCAoYmFzZWQgb24gd2hlbiBhbmltYXRpb24gY29tcGxldGVzKVxuXG4gIH0sIHtcbiAgICBrZXk6ICdzZXRUcmFuc2l0aW9uVGltZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRUcmFuc2l0aW9uVGltZXIoKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgdGhpcy50aW1lclRyYW5zaXRpb25JZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczQudGltZXJUcmFuc2l0aW9uSWQgPSB1bmRlZmluZWQ7XG4gICAgICB9LCA0MDApO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGF1dG9IaWRlRHVyYXRpb24gPSBfcHJvcHMuYXV0b0hpZGVEdXJhdGlvbixcbiAgICAgICAgICBjb250ZW50U3R5bGUgPSBfcHJvcHMuY29udGVudFN0eWxlLFxuICAgICAgICAgIGJvZHlTdHlsZSA9IF9wcm9wcy5ib2R5U3R5bGUsXG4gICAgICAgICAgbWVzc2FnZVByb3AgPSBfcHJvcHMubWVzc2FnZSxcbiAgICAgICAgICBvblJlcXVlc3RDbG9zZSA9IF9wcm9wcy5vblJlcXVlc3RDbG9zZSxcbiAgICAgICAgICBvbkFjdGlvblRvdWNoVGFwID0gX3Byb3BzLm9uQWN0aW9uVG91Y2hUYXAsXG4gICAgICAgICAgc3R5bGUgPSBfcHJvcHMuc3R5bGUsXG4gICAgICAgICAgb3RoZXIgPSAoMCwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMy5kZWZhdWx0KShfcHJvcHMsIFsnYXV0b0hpZGVEdXJhdGlvbicsICdjb250ZW50U3R5bGUnLCAnYm9keVN0eWxlJywgJ21lc3NhZ2UnLCAnb25SZXF1ZXN0Q2xvc2UnLCAnb25BY3Rpb25Ub3VjaFRhcCcsICdzdHlsZSddKTtcbiAgICAgIHZhciBfc3RhdGUgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgIGFjdGlvbiA9IF9zdGF0ZS5hY3Rpb24sXG4gICAgICAgICAgbWVzc2FnZSA9IF9zdGF0ZS5tZXNzYWdlLFxuICAgICAgICAgIG9wZW4gPSBfc3RhdGUub3BlbjtcbiAgICAgIHZhciBwcmVwYXJlU3R5bGVzID0gdGhpcy5jb250ZXh0Lm11aVRoZW1lLnByZXBhcmVTdHlsZXM7XG5cbiAgICAgIHZhciBzdHlsZXMgPSBnZXRTdHlsZXModGhpcy5wcm9wcywgdGhpcy5jb250ZXh0LCB0aGlzLnN0YXRlKTtcblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICBfQ2xpY2tBd2F5TGlzdGVuZXIyLmRlZmF1bHQsXG4gICAgICAgIHsgb25DbGlja0F3YXk6IG9wZW4gPyB0aGlzLmNvbXBvbmVudENsaWNrQXdheSA6IG51bGwgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgKDAsIF9leHRlbmRzMy5kZWZhdWx0KSh7fSwgb3RoZXIsIHsgc3R5bGU6IHByZXBhcmVTdHlsZXMoKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5yb290LCBzdHlsZSkpIH0pLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9TbmFja2JhckJvZHkyLmRlZmF1bHQsIHtcbiAgICAgICAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgICAgICAgY29udGVudFN0eWxlOiBjb250ZW50U3R5bGUsXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgb3Blbjogb3BlbixcbiAgICAgICAgICAgIG9uQWN0aW9uVG91Y2hUYXA6IG9uQWN0aW9uVG91Y2hUYXAsXG4gICAgICAgICAgICBzdHlsZTogYm9keVN0eWxlXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIFNuYWNrYmFyO1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuU25hY2tiYXIuY29udGV4dFR5cGVzID0ge1xuICBtdWlUaGVtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QuaXNSZXF1aXJlZFxufTtcblNuYWNrYmFyLnByb3BUeXBlcyA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHtcbiAgLyoqXG4gICAqIFRoZSBsYWJlbCBmb3IgdGhlIGFjdGlvbiBvbiB0aGUgc25hY2tiYXIuXG4gICAqL1xuICBhY3Rpb246IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIGF1dG9tYXRpY2FsbHkgZGlzbWlzc2luZy5cbiAgICogSWYgbm8gdmFsdWUgaXMgc3BlY2lmaWVkIHRoZSBzbmFja2JhciB3aWxsIGRpc21pc3Mgbm9ybWFsbHkuXG4gICAqIElmIGEgdmFsdWUgaXMgcHJvdmlkZWQgdGhlIHNuYWNrYmFyIGNhbiBzdGlsbCBiZSBkaXNtaXNzZWQgbm9ybWFsbHkuXG4gICAqIElmIGEgc25hY2tiYXIgaXMgZGlzbWlzc2VkIGJlZm9yZSB0aGUgdGltZXIgZXhwaXJlcywgdGhlIHRpbWVyIHdpbGwgYmUgY2xlYXJlZC5cbiAgICovXG4gIGF1dG9IaWRlRHVyYXRpb246IF9wcm9wVHlwZXMyLmRlZmF1bHQubnVtYmVyLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIGJvZHkgZWxlbWVudC5cbiAgICovXG4gIGJvZHlTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIC8qKlxuICAgKiBUaGUgY3NzIGNsYXNzIG5hbWUgb2YgdGhlIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIGNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgY29udGVudCBlbGVtZW50LlxuICAgKi9cbiAgY29udGVudFN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIFRoZSBtZXNzYWdlIHRvIGJlIGRpc3BsYXllZC5cbiAgICpcbiAgICogKE5vdGU6IElmIHRoZSBtZXNzYWdlIGlzIGFuIGVsZW1lbnQgb3IgYXJyYXksIGFuZCB0aGUgYFNuYWNrYmFyYCBtYXkgcmUtcmVuZGVyIHdoaWxlIGl0IGlzIHN0aWxsIG9wZW4sXG4gICAqIGVuc3VyZSB0aGF0IHRoZSBzYW1lIG9iamVjdCByZW1haW5zIGFzIHRoZSBgbWVzc2FnZWAgcHJvcGVydHkgaWYgeW91IHdhbnQgdG8gYXZvaWQgdGhlIGBTbmFja2JhcmAgaGlkaW5nIGFuZFxuICAgKiBzaG93aW5nIGFnYWluKVxuICAgKi9cbiAgbWVzc2FnZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLmlzUmVxdWlyZWQsXG4gIC8qKlxuICAgKiBGaXJlZCB3aGVuIHRoZSBhY3Rpb24gYnV0dG9uIGlzIHRvdWNodGFwcGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgQWN0aW9uIGJ1dHRvbiBldmVudC5cbiAgICovXG4gIG9uQWN0aW9uVG91Y2hUYXA6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIEZpcmVkIHdoZW4gdGhlIGBTbmFja2JhcmAgaXMgcmVxdWVzdGVkIHRvIGJlIGNsb3NlZCBieSBhIGNsaWNrIG91dHNpZGUgdGhlIGBTbmFja2JhcmAsIG9yIGFmdGVyIHRoZVxuICAgKiBgYXV0b0hpZGVEdXJhdGlvbmAgdGltZXIgZXhwaXJlcy5cbiAgICpcbiAgICogVHlwaWNhbGx5IGBvblJlcXVlc3RDbG9zZWAgaXMgdXNlZCB0byBzZXQgc3RhdGUgaW4gdGhlIHBhcmVudCBjb21wb25lbnQsIHdoaWNoIGlzIHVzZWQgdG8gY29udHJvbCB0aGUgYFNuYWNrYmFyYFxuICAgKiBgb3BlbmAgcHJvcC5cbiAgICpcbiAgICogVGhlIGByZWFzb25gIHBhcmFtZXRlciBjYW4gb3B0aW9uYWxseSBiZSB1c2VkIHRvIGNvbnRyb2wgdGhlIHJlc3BvbnNlIHRvIGBvblJlcXVlc3RDbG9zZWAsXG4gICAqIGZvciBleGFtcGxlIGlnbm9yaW5nIGBjbGlja2F3YXlgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVhc29uIENhbiBiZTpgXCJ0aW1lb3V0XCJgIChgYXV0b0hpZGVEdXJhdGlvbmAgZXhwaXJlZCkgb3I6IGBcImNsaWNrYXdheVwiYFxuICAgKi9cbiAgb25SZXF1ZXN0Q2xvc2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIENvbnRyb2xzIHdoZXRoZXIgdGhlIGBTbmFja2JhcmAgaXMgb3BlbmVkIG9yIG5vdC5cbiAgICovXG4gIG9wZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbC5pc1JlcXVpcmVkLFxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGlubGluZS1zdHlsZXMgb2YgdGhlIHJvb3QgZWxlbWVudC5cbiAgICovXG4gIHN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdFxufSA6IHt9O1xuZXhwb3J0cy5kZWZhdWx0ID0gU25hY2tiYXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L21hdGVyaWFsLXVpL1NuYWNrYmFyL1NuYWNrYmFyLmpzXG4vLyBtb2R1bGUgaWQgPSAxNTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDIiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLlNuYWNrYmFyQm9keSA9IHVuZGVmaW5lZDtcblxudmFyIF9leHRlbmRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9leHRlbmRzJyk7XG5cbnZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzJyk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyKTtcblxudmFyIF9zaW1wbGVBc3NpZ24gPSByZXF1aXJlKCdzaW1wbGUtYXNzaWduJyk7XG5cbnZhciBfc2ltcGxlQXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NpbXBsZUFzc2lnbik7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbnZhciBfdHJhbnNpdGlvbnMgPSByZXF1aXJlKCcuLi9zdHlsZXMvdHJhbnNpdGlvbnMnKTtcblxudmFyIF90cmFuc2l0aW9uczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90cmFuc2l0aW9ucyk7XG5cbnZhciBfd2l0aFdpZHRoID0gcmVxdWlyZSgnLi4vdXRpbHMvd2l0aFdpZHRoJyk7XG5cbnZhciBfd2l0aFdpZHRoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dpdGhXaWR0aCk7XG5cbnZhciBfRmxhdEJ1dHRvbiA9IHJlcXVpcmUoJy4uL0ZsYXRCdXR0b24nKTtcblxudmFyIF9GbGF0QnV0dG9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ZsYXRCdXR0b24pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBnZXRTdHlsZXMocHJvcHMsIGNvbnRleHQpIHtcbiAgdmFyIG9wZW4gPSBwcm9wcy5vcGVuLFxuICAgICAgd2lkdGggPSBwcm9wcy53aWR0aDtcbiAgdmFyIF9jb250ZXh0JG11aVRoZW1lID0gY29udGV4dC5tdWlUaGVtZSxcbiAgICAgIF9jb250ZXh0JG11aVRoZW1lJGJhcyA9IF9jb250ZXh0JG11aVRoZW1lLmJhc2VUaGVtZSxcbiAgICAgIF9jb250ZXh0JG11aVRoZW1lJGJhczIgPSBfY29udGV4dCRtdWlUaGVtZSRiYXMuc3BhY2luZyxcbiAgICAgIGRlc2t0b3BHdXR0ZXIgPSBfY29udGV4dCRtdWlUaGVtZSRiYXMyLmRlc2t0b3BHdXR0ZXIsXG4gICAgICBkZXNrdG9wU3ViaGVhZGVySGVpZ2h0ID0gX2NvbnRleHQkbXVpVGhlbWUkYmFzMi5kZXNrdG9wU3ViaGVhZGVySGVpZ2h0LFxuICAgICAgZm9udEZhbWlseSA9IF9jb250ZXh0JG11aVRoZW1lJGJhcy5mb250RmFtaWx5LFxuICAgICAgX2NvbnRleHQkbXVpVGhlbWUkc25hID0gX2NvbnRleHQkbXVpVGhlbWUuc25hY2tiYXIsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3IgPSBfY29udGV4dCRtdWlUaGVtZSRzbmEuYmFja2dyb3VuZENvbG9yLFxuICAgICAgdGV4dENvbG9yID0gX2NvbnRleHQkbXVpVGhlbWUkc25hLnRleHRDb2xvcixcbiAgICAgIGFjdGlvbkNvbG9yID0gX2NvbnRleHQkbXVpVGhlbWUkc25hLmFjdGlvbkNvbG9yLFxuICAgICAgYm9yZGVyUmFkaXVzID0gX2NvbnRleHQkbXVpVGhlbWUuYm9yZGVyUmFkaXVzO1xuXG5cbiAgdmFyIGlzU21hbGwgPSB3aWR0aCA9PT0gX3dpdGhXaWR0aC5TTUFMTDtcblxuICB2YXIgc3R5bGVzID0ge1xuICAgIHJvb3Q6IHtcbiAgICAgIGZvbnRGYW1pbHk6IGZvbnRGYW1pbHksXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJhY2tncm91bmRDb2xvcixcbiAgICAgIHBhZGRpbmc6ICcwICcgKyBkZXNrdG9wR3V0dGVyICsgJ3B4JyxcbiAgICAgIGhlaWdodDogZGVza3RvcFN1YmhlYWRlckhlaWdodCxcbiAgICAgIGxpbmVIZWlnaHQ6IGRlc2t0b3BTdWJoZWFkZXJIZWlnaHQgKyAncHgnLFxuICAgICAgYm9yZGVyUmFkaXVzOiBpc1NtYWxsID8gMCA6IGJvcmRlclJhZGl1cyxcbiAgICAgIG1heFdpZHRoOiBpc1NtYWxsID8gJ2luaGVyaXQnIDogNTY4LFxuICAgICAgbWluV2lkdGg6IGlzU21hbGwgPyAnaW5oZXJpdCcgOiAyODgsXG4gICAgICB3aWR0aDogaXNTbWFsbCA/ICdjYWxjKDEwMHZ3IC0gJyArIGRlc2t0b3BHdXR0ZXIgKiAyICsgJ3B4KScgOiAnYXV0bycsXG4gICAgICBmbGV4R3JvdzogaXNTbWFsbCA/IDEgOiAwXG4gICAgfSxcbiAgICBjb250ZW50OiB7XG4gICAgICBmb250U2l6ZTogMTQsXG4gICAgICBjb2xvcjogdGV4dENvbG9yLFxuICAgICAgb3BhY2l0eTogb3BlbiA/IDEgOiAwLFxuICAgICAgdHJhbnNpdGlvbjogb3BlbiA/IF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KCc1MDBtcycsICdvcGFjaXR5JywgJzEwMG1zJykgOiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgnNDAwbXMnLCAnb3BhY2l0eScpXG4gICAgfSxcbiAgICBhY3Rpb246IHtcbiAgICAgIGNvbG9yOiBhY3Rpb25Db2xvcixcbiAgICAgIGZsb2F0OiAncmlnaHQnLFxuICAgICAgbWFyZ2luVG9wOiA2LFxuICAgICAgbWFyZ2luUmlnaHQ6IC0xNixcbiAgICAgIG1hcmdpbkxlZnQ6IGRlc2t0b3BHdXR0ZXIsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd0cmFuc3BhcmVudCdcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHN0eWxlcztcbn1cblxudmFyIFNuYWNrYmFyQm9keSA9IGZ1bmN0aW9uIFNuYWNrYmFyQm9keShwcm9wcywgY29udGV4dCkge1xuICB2YXIgYWN0aW9uID0gcHJvcHMuYWN0aW9uLFxuICAgICAgY29udGVudFN0eWxlID0gcHJvcHMuY29udGVudFN0eWxlLFxuICAgICAgbWVzc2FnZSA9IHByb3BzLm1lc3NhZ2UsXG4gICAgICBvcGVuID0gcHJvcHMub3BlbixcbiAgICAgIG9uQWN0aW9uVG91Y2hUYXAgPSBwcm9wcy5vbkFjdGlvblRvdWNoVGFwLFxuICAgICAgc3R5bGUgPSBwcm9wcy5zdHlsZSxcbiAgICAgIG90aGVyID0gKDAsIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMuZGVmYXVsdCkocHJvcHMsIFsnYWN0aW9uJywgJ2NvbnRlbnRTdHlsZScsICdtZXNzYWdlJywgJ29wZW4nLCAnb25BY3Rpb25Ub3VjaFRhcCcsICdzdHlsZSddKTtcbiAgdmFyIHByZXBhcmVTdHlsZXMgPSBjb250ZXh0Lm11aVRoZW1lLnByZXBhcmVTdHlsZXM7XG5cbiAgdmFyIHN0eWxlcyA9IGdldFN0eWxlcyhwcm9wcywgY29udGV4dCk7XG5cbiAgdmFyIGFjdGlvbkJ1dHRvbiA9IGFjdGlvbiAmJiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfRmxhdEJ1dHRvbjIuZGVmYXVsdCwge1xuICAgIHN0eWxlOiBzdHlsZXMuYWN0aW9uLFxuICAgIGxhYmVsOiBhY3Rpb24sXG4gICAgb25Ub3VjaFRhcDogb25BY3Rpb25Ub3VjaFRhcFxuICB9KTtcblxuICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgJ2RpdicsXG4gICAgKDAsIF9leHRlbmRzMy5kZWZhdWx0KSh7fSwgb3RoZXIsIHsgc3R5bGU6IHByZXBhcmVTdHlsZXMoKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5yb290LCBzdHlsZSkpIH0pLFxuICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgJ2RpdicsXG4gICAgICB7IHN0eWxlOiBwcmVwYXJlU3R5bGVzKCgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMuY29udGVudCwgY29udGVudFN0eWxlKSkgfSxcbiAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnc3BhbicsXG4gICAgICAgIG51bGwsXG4gICAgICAgIG1lc3NhZ2VcbiAgICAgICksXG4gICAgICBhY3Rpb25CdXR0b25cbiAgICApXG4gICk7XG59O1xuXG5leHBvcnRzLlNuYWNrYmFyQm9keSA9IFNuYWNrYmFyQm9keTtcblNuYWNrYmFyQm9keS5wcm9wVHlwZXMgPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB7XG4gIC8qKlxuICAgKiBUaGUgbGFiZWwgZm9yIHRoZSBhY3Rpb24gb24gdGhlIHNuYWNrYmFyLlxuICAgKi9cbiAgYWN0aW9uOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgY29udGVudCBlbGVtZW50LlxuICAgKi9cbiAgY29udGVudFN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgLyoqXG4gICAqIFRoZSBtZXNzYWdlIHRvIGJlIGRpc3BsYXllZC5cbiAgICpcbiAgICogKE5vdGU6IElmIHRoZSBtZXNzYWdlIGlzIGFuIGVsZW1lbnQgb3IgYXJyYXksIGFuZCB0aGUgYFNuYWNrYmFyYCBtYXkgcmUtcmVuZGVyIHdoaWxlIGl0IGlzIHN0aWxsIG9wZW4sXG4gICAqIGVuc3VyZSB0aGF0IHRoZSBzYW1lIG9iamVjdCByZW1haW5zIGFzIHRoZSBgbWVzc2FnZWAgcHJvcGVydHkgaWYgeW91IHdhbnQgdG8gYXZvaWQgdGhlIGBTbmFja2JhcmAgaGlkaW5nIGFuZFxuICAgKiBzaG93aW5nIGFnYWluKVxuICAgKi9cbiAgbWVzc2FnZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLmlzUmVxdWlyZWQsXG4gIC8qKlxuICAgKiBGaXJlZCB3aGVuIHRoZSBhY3Rpb24gYnV0dG9uIGlzIHRvdWNodGFwcGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgQWN0aW9uIGJ1dHRvbiBldmVudC5cbiAgICovXG4gIG9uQWN0aW9uVG91Y2hUYXA6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICogQ29udHJvbHMgd2hldGhlciB0aGUgYFNuYWNrYmFyYCBpcyBvcGVuZWQgb3Igbm90LlxuICAgKi9cbiAgb3BlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLmlzUmVxdWlyZWQsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKiBXaWR0aCBvZiB0aGUgc2NyZWVuLlxuICAgKi9cbiAgd2lkdGg6IF9wcm9wVHlwZXMyLmRlZmF1bHQubnVtYmVyLmlzUmVxdWlyZWRcbn0gOiB7fTtcblxuU25hY2tiYXJCb2R5LmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9ICgwLCBfd2l0aFdpZHRoMi5kZWZhdWx0KSgpKFNuYWNrYmFyQm9keSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L21hdGVyaWFsLXVpL1NuYWNrYmFyL1NuYWNrYmFyQm9keS5qc1xuLy8gbW9kdWxlIGlkID0gMTUzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAyIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllcycpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMik7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YnKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2syID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrJyk7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTtcblxudmFyIF9jcmVhdGVDbGFzczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MnKTtcblxudmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4nKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblxudmFyIF9pbmhlcml0czIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMnKTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG52YXIgX3NpbXBsZUFzc2lnbiA9IHJlcXVpcmUoJ3NpbXBsZS1hc3NpZ24nKTtcblxudmFyIF9zaW1wbGVBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2ltcGxlQXNzaWduKTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqXG4gKiAgQmVmb3JlQWZ0ZXJXcmFwcGVyXG4gKiAgICBBbiBhbHRlcm5hdGl2ZSBmb3IgdGhlIDo6YmVmb3JlIGFuZCA6OmFmdGVyIGNzcyBwc2V1ZG8tZWxlbWVudHMgZm9yXG4gKiAgICBjb21wb25lbnRzIHdob3NlIHN0eWxlcyBhcmUgZGVmaW5lZCBpbiBqYXZhc2NyaXB0IGluc3RlYWQgb2YgY3NzLlxuICpcbiAqICBVc2FnZTogRm9yIHRoZSBlbGVtZW50IHRoYXQgd2Ugd2FudCB0byBhcHBseSBiZWZvcmUgYW5kIGFmdGVyIGVsZW1lbnRzIHRvLFxuICogICAgd3JhcCBpdHMgY2hpbGRyZW4gd2l0aCBCZWZvcmVBZnRlcldyYXBwZXIuIEZvciBleGFtcGxlOlxuICpcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UGFwZXI+XG4gKiAgPFBhcGVyPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PiAvLyBTZWUgbm90aWNlXG4gKiAgICA8QmVmb3JlQWZ0ZXJXcmFwcGVyPiAgICAgICAgcmVuZGVycyAgICAgICAgIDxkaXYvPiAvLyBiZWZvcmUgZWxlbWVudFxuICogICAgICBbY2hpbGRyZW4gb2YgcGFwZXJdICAgICAgIC0tLS0tLT4gICAgICAgICBbY2hpbGRyZW4gb2YgcGFwZXJdXG4gKiAgICA8L0JlZm9yZUFmdGVyV3JhcHBlcj4gICAgICAgICAgICAgICAgICAgICAgIDxkaXYvPiAvLyBhZnRlciBlbGVtZW50XG4gKiAgPC9QYXBlcj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BhcGVyPlxuICpcbiAqICBOb3RpY2U6IE5vdGljZSB0aGF0IHRoaXMgZGl2IGJ1bmRsZXMgdG9nZXRoZXIgb3VyIGVsZW1lbnRzLiBJZiB0aGUgZWxlbWVudFxuICogICAgdGhhdCB3ZSB3YW50IHRvIGFwcGx5IGJlZm9yZSBhbmQgYWZ0ZXIgZWxlbWVudHMgaXMgYSBIVE1MIHRhZyAoaS5lLiBhXG4gKiAgICBkaXYsIHAsIG9yIGJ1dHRvbiB0YWcpLCB3ZSBjYW4gYXZvaWQgdGhpcyBleHRyYSBuZXN0aW5nIGJ5IHBhc3NpbmcgdXNpbmdcbiAqICAgIHRoZSBCZWZvcmVBZnRlcldyYXBwZXIgaW4gcGxhY2Ugb2Ygc2FpZCB0YWcgbGlrZSBzbzpcbiAqXG4gKiAgPHA+XG4gKiAgICA8QmVmb3JlQWZ0ZXJXcmFwcGVyPiAgIGRvIHRoaXMgaW5zdGVhZCAgIDxCZWZvcmVBZnRlcldyYXBwZXIgZWxlbWVudFR5cGU9J3AnPlxuICogICAgICBbY2hpbGRyZW4gb2YgcF0gICAgICAgICAgLS0tLS0tPiAgICAgICAgIFtjaGlsZHJlbiBvZiBwXVxuICogICAgPC9CZWZvcmVBZnRlcldyYXBwZXI+ICAgICAgICAgICAgICAgICAgICA8L0JlZm9yZUFmdGVyV3JhcHBlcj5cbiAqICA8L3A+XG4gKlxuICogIEJlZm9yZUFmdGVyV3JhcHBlciBmZWF0dXJlcyBzcHJlYWQgZnVuY3Rpb25hbGl0eS4gVGhpcyBtZWFucyB0aGF0IHdlIGNhblxuICogIHBhc3MgSFRNTCB0YWcgcHJvcGVydGllcyBkaXJlY3RseSBpbnRvIHRoZSBCZWZvcmVBZnRlcldyYXBwZXIgdGFnLlxuICpcbiAqICBXaGVuIHVzaW5nIEJlZm9yZUFmdGVyV3JhcHBlciwgZW5zdXJlIHRoYXQgdGhlIHBhcmVudCBvZiB0aGUgYmVmb3JlRWxlbWVudFxuICogIGFuZCBhZnRlckVsZW1lbnQgaGF2ZSBhIGRlZmluZWQgc3R5bGUgcG9zaXRpb24uXG4gKi9cblxudmFyIHN0eWxlcyA9IHtcbiAgYm94OiB7XG4gICAgYm94U2l6aW5nOiAnYm9yZGVyLWJveCdcbiAgfVxufTtcblxudmFyIEJlZm9yZUFmdGVyV3JhcHBlciA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKEJlZm9yZUFmdGVyV3JhcHBlciwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQmVmb3JlQWZ0ZXJXcmFwcGVyKCkge1xuICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIEJlZm9yZUFmdGVyV3JhcHBlcik7XG4gICAgcmV0dXJuICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKEJlZm9yZUFmdGVyV3JhcHBlci5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoQmVmb3JlQWZ0ZXJXcmFwcGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShCZWZvcmVBZnRlcldyYXBwZXIsIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgYmVmb3JlU3R5bGUgPSBfcHJvcHMuYmVmb3JlU3R5bGUsXG4gICAgICAgICAgYWZ0ZXJTdHlsZSA9IF9wcm9wcy5hZnRlclN0eWxlLFxuICAgICAgICAgIGJlZm9yZUVsZW1lbnRUeXBlID0gX3Byb3BzLmJlZm9yZUVsZW1lbnRUeXBlLFxuICAgICAgICAgIGFmdGVyRWxlbWVudFR5cGUgPSBfcHJvcHMuYWZ0ZXJFbGVtZW50VHlwZSxcbiAgICAgICAgICBlbGVtZW50VHlwZSA9IF9wcm9wcy5lbGVtZW50VHlwZSxcbiAgICAgICAgICBvdGhlciA9ICgwLCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzLmRlZmF1bHQpKF9wcm9wcywgWydiZWZvcmVTdHlsZScsICdhZnRlclN0eWxlJywgJ2JlZm9yZUVsZW1lbnRUeXBlJywgJ2FmdGVyRWxlbWVudFR5cGUnLCAnZWxlbWVudFR5cGUnXSk7XG4gICAgICB2YXIgcHJlcGFyZVN0eWxlcyA9IHRoaXMuY29udGV4dC5tdWlUaGVtZS5wcmVwYXJlU3R5bGVzO1xuXG5cbiAgICAgIHZhciBiZWZvcmVFbGVtZW50ID0gdm9pZCAwO1xuICAgICAgdmFyIGFmdGVyRWxlbWVudCA9IHZvaWQgMDtcblxuICAgICAgaWYgKGJlZm9yZVN0eWxlKSB7XG4gICAgICAgIGJlZm9yZUVsZW1lbnQgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCh0aGlzLnByb3BzLmJlZm9yZUVsZW1lbnRUeXBlLCB7XG4gICAgICAgICAgc3R5bGU6IHByZXBhcmVTdHlsZXMoKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBzdHlsZXMuYm94LCBiZWZvcmVTdHlsZSkpLFxuICAgICAgICAgIGtleTogJzo6YmVmb3JlJ1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGFmdGVyU3R5bGUpIHtcbiAgICAgICAgYWZ0ZXJFbGVtZW50ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQodGhpcy5wcm9wcy5hZnRlckVsZW1lbnRUeXBlLCB7XG4gICAgICAgICAgc3R5bGU6IHByZXBhcmVTdHlsZXMoKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBzdHlsZXMuYm94LCBhZnRlclN0eWxlKSksXG4gICAgICAgICAga2V5OiAnOjphZnRlcidcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBjaGlsZHJlbiA9IFtiZWZvcmVFbGVtZW50LCB0aGlzLnByb3BzLmNoaWxkcmVuLCBhZnRlckVsZW1lbnRdO1xuXG4gICAgICB2YXIgcHJvcHMgPSBvdGhlcjtcbiAgICAgIHByb3BzLnN0eWxlID0gcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe30sIHRoaXMucHJvcHMuc3R5bGUpKTtcblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KHRoaXMucHJvcHMuZWxlbWVudFR5cGUsIHByb3BzLCBjaGlsZHJlbik7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBCZWZvcmVBZnRlcldyYXBwZXI7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5CZWZvcmVBZnRlcldyYXBwZXIuZGVmYXVsdFByb3BzID0ge1xuICBiZWZvcmVFbGVtZW50VHlwZTogJ2RpdicsXG4gIGFmdGVyRWxlbWVudFR5cGU6ICdkaXYnLFxuICBlbGVtZW50VHlwZTogJ2Rpdidcbn07XG5CZWZvcmVBZnRlcldyYXBwZXIuY29udGV4dFR5cGVzID0ge1xuICBtdWlUaGVtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QuaXNSZXF1aXJlZFxufTtcbkJlZm9yZUFmdGVyV3JhcHBlci5wcm9wVHlwZXMgPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB7XG4gIGFmdGVyRWxlbWVudFR5cGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBhZnRlclN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgYmVmb3JlRWxlbWVudFR5cGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBiZWZvcmVTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGNoaWxkcmVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIGVsZW1lbnRUeXBlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3Rcbn0gOiB7fTtcbmV4cG9ydHMuZGVmYXVsdCA9IEJlZm9yZUFmdGVyV3JhcHBlcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWF0ZXJpYWwtdWkvaW50ZXJuYWwvQmVmb3JlQWZ0ZXJXcmFwcGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxNTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDIiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvZXh0ZW5kcycpO1xuXG52YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllcycpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMik7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbnZhciBfQmVmb3JlQWZ0ZXJXcmFwcGVyID0gcmVxdWlyZSgnLi9CZWZvcmVBZnRlcldyYXBwZXInKTtcblxudmFyIF9CZWZvcmVBZnRlcldyYXBwZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQmVmb3JlQWZ0ZXJXcmFwcGVyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIHN0eWxlcyA9IHtcbiAgYmVmb3JlOiB7XG4gICAgY29udGVudDogXCInICdcIixcbiAgICBkaXNwbGF5OiAndGFibGUnXG4gIH0sXG4gIGFmdGVyOiB7XG4gICAgY29udGVudDogXCInICdcIixcbiAgICBjbGVhcjogJ2JvdGgnLFxuICAgIGRpc3BsYXk6ICd0YWJsZSdcbiAgfVxufTtcblxudmFyIENsZWFyRml4ID0gZnVuY3Rpb24gQ2xlYXJGaXgoX3JlZikge1xuICB2YXIgc3R5bGUgPSBfcmVmLnN0eWxlLFxuICAgICAgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuLFxuICAgICAgb3RoZXIgPSAoMCwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMy5kZWZhdWx0KShfcmVmLCBbJ3N0eWxlJywgJ2NoaWxkcmVuJ10pO1xuICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgX0JlZm9yZUFmdGVyV3JhcHBlcjIuZGVmYXVsdCxcbiAgICAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBvdGhlciwge1xuICAgICAgYmVmb3JlU3R5bGU6IHN0eWxlcy5iZWZvcmUsXG4gICAgICBhZnRlclN0eWxlOiBzdHlsZXMuYWZ0ZXIsXG4gICAgICBzdHlsZTogc3R5bGVcbiAgICB9KSxcbiAgICBjaGlsZHJlblxuICApO1xufTtcblxuQ2xlYXJGaXgubXVpTmFtZSA9ICdDbGVhckZpeCc7XG5cbkNsZWFyRml4LnByb3BUeXBlcyA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHtcbiAgY2hpbGRyZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSByb290IGVsZW1lbnQuXG4gICAqL1xuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3Rcbn0gOiB7fTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gQ2xlYXJGaXg7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L21hdGVyaWFsLXVpL2ludGVybmFsL0NsZWFyRml4LmpzXG4vLyBtb2R1bGUgaWQgPSAxNTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDIiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvZXh0ZW5kcycpO1xuXG52YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllcycpO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMik7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YnKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2syID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrJyk7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTtcblxudmFyIF9jcmVhdGVDbGFzczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MnKTtcblxudmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4nKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblxudmFyIF9pbmhlcml0czIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMnKTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG52YXIgX3NpbXBsZUFzc2lnbiA9IHJlcXVpcmUoJ3NpbXBsZS1hc3NpZ24nKTtcblxudmFyIF9zaW1wbGVBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2ltcGxlQXNzaWduKTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxudmFyIF9yZWFjdEV2ZW50TGlzdGVuZXIgPSByZXF1aXJlKCdyZWFjdC1ldmVudC1saXN0ZW5lcicpO1xuXG52YXIgX3JlYWN0RXZlbnRMaXN0ZW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdEV2ZW50TGlzdGVuZXIpO1xuXG52YXIgX2tleWNvZGUgPSByZXF1aXJlKCdrZXljb2RlJyk7XG5cbnZhciBfa2V5Y29kZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9rZXljb2RlKTtcblxudmFyIF90cmFuc2l0aW9ucyA9IHJlcXVpcmUoJy4uL3N0eWxlcy90cmFuc2l0aW9ucycpO1xuXG52YXIgX3RyYW5zaXRpb25zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RyYW5zaXRpb25zKTtcblxudmFyIF9Gb2N1c1JpcHBsZSA9IHJlcXVpcmUoJy4vRm9jdXNSaXBwbGUnKTtcblxudmFyIF9Gb2N1c1JpcHBsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Gb2N1c1JpcHBsZSk7XG5cbnZhciBfVG91Y2hSaXBwbGUgPSByZXF1aXJlKCcuL1RvdWNoUmlwcGxlJyk7XG5cbnZhciBfVG91Y2hSaXBwbGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfVG91Y2hSaXBwbGUpO1xuXG52YXIgX1BhcGVyID0gcmVxdWlyZSgnLi8uLi9QYXBlcicpO1xuXG52YXIgX1BhcGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BhcGVyKTtcblxudmFyIF93YXJuaW5nID0gcmVxdWlyZSgnd2FybmluZycpO1xuXG52YXIgX3dhcm5pbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2FybmluZyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGdldFN0eWxlcyhwcm9wcywgY29udGV4dCkge1xuICB2YXIgYmFzZVRoZW1lID0gY29udGV4dC5tdWlUaGVtZS5iYXNlVGhlbWU7XG5cblxuICByZXR1cm4ge1xuICAgIHJvb3Q6IHtcbiAgICAgIGN1cnNvcjogcHJvcHMuZGlzYWJsZWQgPyAnbm90LWFsbG93ZWQnIDogJ3BvaW50ZXInLFxuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICBvdmVyZmxvdzogJ3Zpc2libGUnLFxuICAgICAgZGlzcGxheTogJ3RhYmxlJyxcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgd2lkdGg6ICcxMDAlJ1xuICAgIH0sXG4gICAgaW5wdXQ6IHtcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgY3Vyc29yOiAnaW5oZXJpdCcsXG4gICAgICBwb2ludGVyRXZlbnRzOiAnYWxsJyxcbiAgICAgIG9wYWNpdHk6IDAsXG4gICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICB6SW5kZXg6IDIsXG4gICAgICBsZWZ0OiAwLFxuICAgICAgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsXG4gICAgICBwYWRkaW5nOiAwLFxuICAgICAgbWFyZ2luOiAwXG4gICAgfSxcbiAgICBjb250cm9sczoge1xuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgIGhlaWdodDogJzEwMCUnXG4gICAgfSxcbiAgICBsYWJlbDoge1xuICAgICAgZmxvYXQ6ICdsZWZ0JyxcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgIHdpZHRoOiAnY2FsYygxMDAlIC0gNjBweCknLFxuICAgICAgbGluZUhlaWdodDogJzI0cHgnLFxuICAgICAgY29sb3I6IGJhc2VUaGVtZS5wYWxldHRlLnRleHRDb2xvcixcbiAgICAgIGZvbnRGYW1pbHk6IGJhc2VUaGVtZS5mb250RmFtaWx5XG4gICAgfSxcbiAgICB3cmFwOiB7XG4gICAgICB0cmFuc2l0aW9uOiBfdHJhbnNpdGlvbnMyLmRlZmF1bHQuZWFzZU91dCgpLFxuICAgICAgZmxvYXQ6ICdsZWZ0JyxcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgIGZsZXhTaHJpbms6IDAsXG4gICAgICB3aWR0aDogNjAgLSBiYXNlVGhlbWUuc3BhY2luZy5kZXNrdG9wR3V0dGVyTGVzcyxcbiAgICAgIG1hcmdpblJpZ2h0OiBwcm9wcy5sYWJlbFBvc2l0aW9uID09PSAncmlnaHQnID8gYmFzZVRoZW1lLnNwYWNpbmcuZGVza3RvcEd1dHRlckxlc3MgOiAwLFxuICAgICAgbWFyZ2luTGVmdDogcHJvcHMubGFiZWxQb3NpdGlvbiA9PT0gJ2xlZnQnID8gYmFzZVRoZW1lLnNwYWNpbmcuZGVza3RvcEd1dHRlckxlc3MgOiAwXG4gICAgfSxcbiAgICByaXBwbGU6IHtcbiAgICAgIGNvbG9yOiBwcm9wcy5yaXBwbGVDb2xvciB8fCBiYXNlVGhlbWUucGFsZXR0ZS5wcmltYXJ5MUNvbG9yLFxuICAgICAgaGVpZ2h0OiAnMjAwJScsXG4gICAgICB3aWR0aDogJzIwMCUnLFxuICAgICAgdG9wOiAtMTIsXG4gICAgICBsZWZ0OiAtMTJcbiAgICB9XG4gIH07XG59XG5cbnZhciBFbmhhbmNlZFN3aXRjaCA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKEVuaGFuY2VkU3dpdGNoLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBFbmhhbmNlZFN3aXRjaCgpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBFbmhhbmNlZFN3aXRjaCk7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKF9yZWYgPSBFbmhhbmNlZFN3aXRjaC5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRW5oYW5jZWRTd2l0Y2gpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGlzS2V5Ym9hcmRGb2N1c2VkOiBmYWxzZVxuICAgIH0sIF90aGlzLmhhbmRsZUNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgX3RoaXMudGFiUHJlc3NlZCA9IGZhbHNlO1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBpc0tleWJvYXJkRm9jdXNlZDogZmFsc2VcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgaXNJbnB1dENoZWNrZWQgPSBfdGhpcy5yZWZzLmNoZWNrYm94LmNoZWNrZWQ7XG5cbiAgICAgIGlmICghX3RoaXMucHJvcHMuaGFzT3duUHJvcGVydHkoJ2NoZWNrZWQnKSAmJiBfdGhpcy5wcm9wcy5vblBhcmVudFNob3VsZFVwZGF0ZSkge1xuICAgICAgICBfdGhpcy5wcm9wcy5vblBhcmVudFNob3VsZFVwZGF0ZShpc0lucHV0Q2hlY2tlZCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChfdGhpcy5wcm9wcy5vblN3aXRjaCkge1xuICAgICAgICBfdGhpcy5wcm9wcy5vblN3aXRjaChldmVudCwgaXNJbnB1dENoZWNrZWQpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmhhbmRsZUtleURvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciBjb2RlID0gKDAsIF9rZXljb2RlMi5kZWZhdWx0KShldmVudCk7XG5cbiAgICAgIGlmIChjb2RlID09PSAndGFiJykge1xuICAgICAgICBfdGhpcy50YWJQcmVzc2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChfdGhpcy5zdGF0ZS5pc0tleWJvYXJkRm9jdXNlZCAmJiBjb2RlID09PSAnc3BhY2UnKSB7XG4gICAgICAgIF90aGlzLmhhbmRsZUNoYW5nZShldmVudCk7XG4gICAgICB9XG4gICAgfSwgX3RoaXMuaGFuZGxlS2V5VXAgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmIChfdGhpcy5zdGF0ZS5pc0tleWJvYXJkRm9jdXNlZCAmJiAoMCwgX2tleWNvZGUyLmRlZmF1bHQpKGV2ZW50KSA9PT0gJ3NwYWNlJykge1xuICAgICAgICBfdGhpcy5oYW5kbGVDaGFuZ2UoZXZlbnQpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmhhbmRsZU1vdXNlRG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgLy8gb25seSBsaXN0ZW4gdG8gbGVmdCBjbGlja3NcbiAgICAgIGlmIChldmVudC5idXR0b24gPT09IDApIHtcbiAgICAgICAgX3RoaXMucmVmcy50b3VjaFJpcHBsZS5zdGFydChldmVudCk7XG4gICAgICB9XG4gICAgfSwgX3RoaXMuaGFuZGxlTW91c2VVcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnJlZnMudG91Y2hSaXBwbGUuZW5kKCk7XG4gICAgfSwgX3RoaXMuaGFuZGxlTW91c2VMZWF2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnJlZnMudG91Y2hSaXBwbGUuZW5kKCk7XG4gICAgfSwgX3RoaXMuaGFuZGxlVG91Y2hTdGFydCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgX3RoaXMucmVmcy50b3VjaFJpcHBsZS5zdGFydChldmVudCk7XG4gICAgfSwgX3RoaXMuaGFuZGxlVG91Y2hFbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5yZWZzLnRvdWNoUmlwcGxlLmVuZCgpO1xuICAgIH0sIF90aGlzLmhhbmRsZUJsdXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgaXNLZXlib2FyZEZvY3VzZWQ6IGZhbHNlXG4gICAgICB9KTtcblxuICAgICAgaWYgKF90aGlzLnByb3BzLm9uQmx1cikge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbkJsdXIoZXZlbnQpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmhhbmRsZUZvY3VzID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAvLyBzZXRUaW1lb3V0IGlzIG5lZWRlZCBiZWN1YXNlIHRoZSBmb2N1cyBldmVudCBmaXJlcyBmaXJzdFxuICAgICAgLy8gV2FpdCBzbyB0aGF0IHdlIGNhbiBjYXB0dXJlIGlmIHRoaXMgd2FzIGEga2V5Ym9hcmQgZm9jdXNcbiAgICAgIC8vIG9yIHRvdWNoIGZvY3VzXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF90aGlzLnRhYlByZXNzZWQpIHtcbiAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc0tleWJvYXJkRm9jdXNlZDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LCAxNTApO1xuXG4gICAgICBpZiAoX3RoaXMucHJvcHMub25Gb2N1cykge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbkZvY3VzKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9LCBfdGVtcCksICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkoX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRW5oYW5jZWRTd2l0Y2gsIFt7XG4gICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHZhciBpbnB1dE5vZGUgPSB0aGlzLnJlZnMuY2hlY2tib3g7XG4gICAgICBpZiAoKCF0aGlzLnByb3BzLnN3aXRjaGVkIHx8IGlucHV0Tm9kZS5jaGVja2VkICE9PSB0aGlzLnByb3BzLnN3aXRjaGVkKSAmJiB0aGlzLnByb3BzLm9uUGFyZW50U2hvdWxkVXBkYXRlKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25QYXJlbnRTaG91bGRVcGRhdGUoaW5wdXROb2RlLmNoZWNrZWQpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgdmFyIGhhc0NoZWNrZWRQcm9wID0gbmV4dFByb3BzLmhhc093blByb3BlcnR5KCdjaGVja2VkJyk7XG4gICAgICB2YXIgaGFzTmV3RGVmYXVsdFByb3AgPSBuZXh0UHJvcHMuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHRDaGVja2VkJykgJiYgbmV4dFByb3BzLmRlZmF1bHRDaGVja2VkICE9PSB0aGlzLnByb3BzLmRlZmF1bHRDaGVja2VkO1xuXG4gICAgICBpZiAoaGFzQ2hlY2tlZFByb3AgfHwgaGFzTmV3RGVmYXVsdFByb3ApIHtcbiAgICAgICAgdmFyIHN3aXRjaGVkID0gbmV4dFByb3BzLmNoZWNrZWQgfHwgbmV4dFByb3BzLmRlZmF1bHRDaGVja2VkIHx8IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIHN3aXRjaGVkOiBzd2l0Y2hlZFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5vblBhcmVudFNob3VsZFVwZGF0ZSAmJiBzd2l0Y2hlZCAhPT0gdGhpcy5wcm9wcy5zd2l0Y2hlZCkge1xuICAgICAgICAgIHRoaXMucHJvcHMub25QYXJlbnRTaG91bGRVcGRhdGUoc3dpdGNoZWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnaXNTd2l0Y2hlZCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzU3dpdGNoZWQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZWZzLmNoZWNrYm94LmNoZWNrZWQ7XG4gICAgfVxuXG4gICAgLy8gbm8gY2FsbGJhY2sgaGVyZSBiZWNhdXNlIHRoZXJlIGlzIG5vIGV2ZW50XG5cbiAgfSwge1xuICAgIGtleTogJ3NldFN3aXRjaGVkJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U3dpdGNoZWQobmV3U3dpdGNoZWRWYWx1ZSkge1xuICAgICAgaWYgKCF0aGlzLnByb3BzLmhhc093blByb3BlcnR5KCdjaGVja2VkJykgfHwgdGhpcy5wcm9wcy5jaGVja2VkID09PSBmYWxzZSkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5vblBhcmVudFNob3VsZFVwZGF0ZSkge1xuICAgICAgICAgIHRoaXMucHJvcHMub25QYXJlbnRTaG91bGRVcGRhdGUobmV3U3dpdGNoZWRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWZzLmNoZWNrYm94LmNoZWNrZWQgPSBuZXdTd2l0Y2hlZFZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gKDAsIF93YXJuaW5nMi5kZWZhdWx0KShmYWxzZSwgJ01hdGVyaWFsLVVJOiBDYW5ub3QgY2FsbCBzZXQgbWV0aG9kIHdoaWxlIGNoZWNrZWQgaXMgZGVmaW5lZCBhcyBhIHByb3BlcnR5LicpIDogdm9pZCAwO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2dldFZhbHVlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZWZzLmNoZWNrYm94LnZhbHVlO1xuICAgIH1cblxuICAgIC8vIENoZWNrYm94IGlucHV0cyBvbmx5IHVzZSBTUEFDRSB0byBjaGFuZ2UgdGhlaXIgc3RhdGUuIFVzaW5nIEVOVEVSIHdpbGxcbiAgICAvLyB1cGRhdGUgdGhlIHVpIGJ1dCBub3QgdGhlIGlucHV0LlxuXG5cbiAgICAvKipcbiAgICAgKiBCZWNhdXNlIGJvdGggdGhlIHJpcHBsZXMgYW5kIHRoZSBjaGVja2JveCBpbnB1dCBjYW5ub3Qgc2hhcmUgcG9pbnRlclxuICAgICAqIGV2ZW50cywgdGhlIGNoZWNrYm94IGlucHV0IHRha2VzIGNvbnRyb2wgb2YgcG9pbnRlciBldmVudHMgYW5kIGNhbGxzXG4gICAgICogcmlwcGxlIGFuaW1hdGlvbnMgbWFudWFsbHkuXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIG5hbWUgPSBfcHJvcHMubmFtZSxcbiAgICAgICAgICB2YWx1ZSA9IF9wcm9wcy52YWx1ZSxcbiAgICAgICAgICBpY29uU3R5bGUgPSBfcHJvcHMuaWNvblN0eWxlLFxuICAgICAgICAgIGlucHV0U3R5bGUgPSBfcHJvcHMuaW5wdXRTdHlsZSxcbiAgICAgICAgICBpbnB1dFR5cGUgPSBfcHJvcHMuaW5wdXRUeXBlLFxuICAgICAgICAgIGxhYmVsID0gX3Byb3BzLmxhYmVsLFxuICAgICAgICAgIGxhYmVsU3R5bGUgPSBfcHJvcHMubGFiZWxTdHlsZSxcbiAgICAgICAgICBsYWJlbFBvc2l0aW9uID0gX3Byb3BzLmxhYmVsUG9zaXRpb24sXG4gICAgICAgICAgb25Td2l0Y2ggPSBfcHJvcHMub25Td2l0Y2gsXG4gICAgICAgICAgb25CbHVyID0gX3Byb3BzLm9uQmx1cixcbiAgICAgICAgICBvbkZvY3VzID0gX3Byb3BzLm9uRm9jdXMsXG4gICAgICAgICAgb25Nb3VzZVVwID0gX3Byb3BzLm9uTW91c2VVcCxcbiAgICAgICAgICBvbk1vdXNlRG93biA9IF9wcm9wcy5vbk1vdXNlRG93bixcbiAgICAgICAgICBvbk1vdXNlTGVhdmUgPSBfcHJvcHMub25Nb3VzZUxlYXZlLFxuICAgICAgICAgIG9uVG91Y2hTdGFydCA9IF9wcm9wcy5vblRvdWNoU3RhcnQsXG4gICAgICAgICAgb25Ub3VjaEVuZCA9IF9wcm9wcy5vblRvdWNoRW5kLFxuICAgICAgICAgIG9uUGFyZW50U2hvdWxkVXBkYXRlID0gX3Byb3BzLm9uUGFyZW50U2hvdWxkVXBkYXRlLFxuICAgICAgICAgIGRpc2FibGVkID0gX3Byb3BzLmRpc2FibGVkLFxuICAgICAgICAgIGRpc2FibGVUb3VjaFJpcHBsZSA9IF9wcm9wcy5kaXNhYmxlVG91Y2hSaXBwbGUsXG4gICAgICAgICAgZGlzYWJsZUZvY3VzUmlwcGxlID0gX3Byb3BzLmRpc2FibGVGb2N1c1JpcHBsZSxcbiAgICAgICAgICBjbGFzc05hbWUgPSBfcHJvcHMuY2xhc3NOYW1lLFxuICAgICAgICAgIHJpcHBsZUNvbG9yID0gX3Byb3BzLnJpcHBsZUNvbG9yLFxuICAgICAgICAgIHJpcHBsZVN0eWxlID0gX3Byb3BzLnJpcHBsZVN0eWxlLFxuICAgICAgICAgIHN0eWxlID0gX3Byb3BzLnN0eWxlLFxuICAgICAgICAgIHN3aXRjaGVkID0gX3Byb3BzLnN3aXRjaGVkLFxuICAgICAgICAgIHN3aXRjaEVsZW1lbnQgPSBfcHJvcHMuc3dpdGNoRWxlbWVudCxcbiAgICAgICAgICB0aHVtYlN0eWxlID0gX3Byb3BzLnRodW1iU3R5bGUsXG4gICAgICAgICAgdHJhY2tTdHlsZSA9IF9wcm9wcy50cmFja1N0eWxlLFxuICAgICAgICAgIG90aGVyID0gKDAsIF9vYmplY3RXaXRob3V0UHJvcGVydGllczMuZGVmYXVsdCkoX3Byb3BzLCBbJ25hbWUnLCAndmFsdWUnLCAnaWNvblN0eWxlJywgJ2lucHV0U3R5bGUnLCAnaW5wdXRUeXBlJywgJ2xhYmVsJywgJ2xhYmVsU3R5bGUnLCAnbGFiZWxQb3NpdGlvbicsICdvblN3aXRjaCcsICdvbkJsdXInLCAnb25Gb2N1cycsICdvbk1vdXNlVXAnLCAnb25Nb3VzZURvd24nLCAnb25Nb3VzZUxlYXZlJywgJ29uVG91Y2hTdGFydCcsICdvblRvdWNoRW5kJywgJ29uUGFyZW50U2hvdWxkVXBkYXRlJywgJ2Rpc2FibGVkJywgJ2Rpc2FibGVUb3VjaFJpcHBsZScsICdkaXNhYmxlRm9jdXNSaXBwbGUnLCAnY2xhc3NOYW1lJywgJ3JpcHBsZUNvbG9yJywgJ3JpcHBsZVN0eWxlJywgJ3N0eWxlJywgJ3N3aXRjaGVkJywgJ3N3aXRjaEVsZW1lbnQnLCAndGh1bWJTdHlsZScsICd0cmFja1N0eWxlJ10pO1xuICAgICAgdmFyIHByZXBhcmVTdHlsZXMgPSB0aGlzLmNvbnRleHQubXVpVGhlbWUucHJlcGFyZVN0eWxlcztcblxuICAgICAgdmFyIHN0eWxlcyA9IGdldFN0eWxlcyh0aGlzLnByb3BzLCB0aGlzLmNvbnRleHQpO1xuICAgICAgdmFyIHdyYXBTdHlsZXMgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLndyYXAsIGljb25TdHlsZSk7XG4gICAgICB2YXIgbWVyZ2VkUmlwcGxlU3R5bGUgPSAoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLnJpcHBsZSwgcmlwcGxlU3R5bGUpO1xuXG4gICAgICBpZiAodGh1bWJTdHlsZSkge1xuICAgICAgICB3cmFwU3R5bGVzLm1hcmdpbkxlZnQgLz0gMjtcbiAgICAgICAgd3JhcFN0eWxlcy5tYXJnaW5SaWdodCAvPSAyO1xuICAgICAgfVxuXG4gICAgICB2YXIgbGFiZWxFbGVtZW50ID0gbGFiZWwgJiYgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdsYWJlbCcsXG4gICAgICAgIHsgc3R5bGU6IHByZXBhcmVTdHlsZXMoKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5sYWJlbCwgbGFiZWxTdHlsZSkpIH0sXG4gICAgICAgIGxhYmVsXG4gICAgICApO1xuXG4gICAgICB2YXIgc2hvd1RvdWNoUmlwcGxlID0gIWRpc2FibGVkICYmICFkaXNhYmxlVG91Y2hSaXBwbGU7XG4gICAgICB2YXIgc2hvd0ZvY3VzUmlwcGxlID0gIWRpc2FibGVkICYmICFkaXNhYmxlRm9jdXNSaXBwbGU7XG5cbiAgICAgIHZhciB0b3VjaFJpcHBsZSA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Ub3VjaFJpcHBsZTIuZGVmYXVsdCwge1xuICAgICAgICByZWY6ICd0b3VjaFJpcHBsZScsXG4gICAgICAgIGtleTogJ3RvdWNoUmlwcGxlJyxcbiAgICAgICAgc3R5bGU6IG1lcmdlZFJpcHBsZVN0eWxlLFxuICAgICAgICBjb2xvcjogbWVyZ2VkUmlwcGxlU3R5bGUuY29sb3IsXG4gICAgICAgIG11aVRoZW1lOiB0aGlzLmNvbnRleHQubXVpVGhlbWUsXG4gICAgICAgIGNlbnRlclJpcHBsZTogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIHZhciBmb2N1c1JpcHBsZSA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Gb2N1c1JpcHBsZTIuZGVmYXVsdCwge1xuICAgICAgICBrZXk6ICdmb2N1c1JpcHBsZScsXG4gICAgICAgIGlubmVyU3R5bGU6IG1lcmdlZFJpcHBsZVN0eWxlLFxuICAgICAgICBjb2xvcjogbWVyZ2VkUmlwcGxlU3R5bGUuY29sb3IsXG4gICAgICAgIG11aVRoZW1lOiB0aGlzLmNvbnRleHQubXVpVGhlbWUsXG4gICAgICAgIHNob3c6IHRoaXMuc3RhdGUuaXNLZXlib2FyZEZvY3VzZWRcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgcmlwcGxlcyA9IFtzaG93VG91Y2hSaXBwbGUgPyB0b3VjaFJpcHBsZSA6IG51bGwsIHNob3dGb2N1c1JpcHBsZSA/IGZvY3VzUmlwcGxlIDogbnVsbF07XG5cbiAgICAgIHZhciBpbnB1dEVsZW1lbnQgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHt9LCBvdGhlciwge1xuICAgICAgICByZWY6ICdjaGVja2JveCcsXG4gICAgICAgIHR5cGU6IGlucHV0VHlwZSxcbiAgICAgICAgc3R5bGU6IHByZXBhcmVTdHlsZXMoKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHN0eWxlcy5pbnB1dCwgaW5wdXRTdHlsZSkpLFxuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgICAgb25CbHVyOiB0aGlzLmhhbmRsZUJsdXIsXG4gICAgICAgIG9uRm9jdXM6IHRoaXMuaGFuZGxlRm9jdXMsXG4gICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUNoYW5nZSxcbiAgICAgICAgb25Nb3VzZVVwOiBzaG93VG91Y2hSaXBwbGUgJiYgdGhpcy5oYW5kbGVNb3VzZVVwLFxuICAgICAgICBvbk1vdXNlRG93bjogc2hvd1RvdWNoUmlwcGxlICYmIHRoaXMuaGFuZGxlTW91c2VEb3duLFxuICAgICAgICBvbk1vdXNlTGVhdmU6IHNob3dUb3VjaFJpcHBsZSAmJiB0aGlzLmhhbmRsZU1vdXNlTGVhdmUsXG4gICAgICAgIG9uVG91Y2hTdGFydDogc2hvd1RvdWNoUmlwcGxlICYmIHRoaXMuaGFuZGxlVG91Y2hTdGFydCxcbiAgICAgICAgb25Ub3VjaEVuZDogc2hvd1RvdWNoUmlwcGxlICYmIHRoaXMuaGFuZGxlVG91Y2hFbmRcbiAgICAgIH0pKTtcblxuICAgICAgLy8gSWYgdG9nZ2xlIGNvbXBvbmVudCAoaW5kaWNhdGVkIGJ5IHdoZXRoZXIgdGhlIHN0eWxlIGluY2x1ZGVzIHRodW1iKSBtYW51YWxseSBsYXkgb3V0XG4gICAgICAvLyBlbGVtZW50cyBpbiBvcmRlciB0byBuZXN0IHJpcHBsZSBlbGVtZW50c1xuICAgICAgdmFyIHN3aXRjaE9yVGh1bWJFbGVtZW50ID0gIXRodW1iU3R5bGUgPyBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgc3R5bGU6IHByZXBhcmVTdHlsZXMod3JhcFN0eWxlcykgfSxcbiAgICAgICAgc3dpdGNoRWxlbWVudCxcbiAgICAgICAgcmlwcGxlc1xuICAgICAgKSA6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyBzdHlsZTogcHJlcGFyZVN0eWxlcyh3cmFwU3R5bGVzKSB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoe30sIHRyYWNrU3R5bGUpKSB9KSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgX1BhcGVyMi5kZWZhdWx0LFxuICAgICAgICAgIHsgc3R5bGU6IHRodW1iU3R5bGUsIHpEZXB0aDogMSwgY2lyY2xlOiB0cnVlIH0sXG4gICAgICAgICAgJyAnLFxuICAgICAgICAgIHJpcHBsZXMsXG4gICAgICAgICAgJyAnXG4gICAgICAgIClcbiAgICAgICk7XG5cbiAgICAgIHZhciBlbGVtZW50c0luT3JkZXIgPSBsYWJlbFBvc2l0aW9uID09PSAncmlnaHQnID8gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IHN0eWxlOiBzdHlsZXMuY29udHJvbHMgfSxcbiAgICAgICAgc3dpdGNoT3JUaHVtYkVsZW1lbnQsXG4gICAgICAgIGxhYmVsRWxlbWVudFxuICAgICAgKSA6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyBzdHlsZTogc3R5bGVzLmNvbnRyb2xzIH0sXG4gICAgICAgIGxhYmVsRWxlbWVudCxcbiAgICAgICAgc3dpdGNoT3JUaHVtYkVsZW1lbnRcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgcmVmOiAncm9vdCcsIGNsYXNzTmFtZTogY2xhc3NOYW1lLCBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLnJvb3QsIHN0eWxlKSkgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0RXZlbnRMaXN0ZW5lcjIuZGVmYXVsdCwge1xuICAgICAgICAgIHRhcmdldDogJ3dpbmRvdycsXG4gICAgICAgICAgb25LZXlEb3duOiB0aGlzLmhhbmRsZUtleURvd24sXG4gICAgICAgICAgb25LZXlVcDogdGhpcy5oYW5kbGVLZXlVcFxuICAgICAgICB9KSxcbiAgICAgICAgaW5wdXRFbGVtZW50LFxuICAgICAgICBlbGVtZW50c0luT3JkZXJcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBFbmhhbmNlZFN3aXRjaDtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbkVuaGFuY2VkU3dpdGNoLmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5FbmhhbmNlZFN3aXRjaC5wcm9wVHlwZXMgPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB7XG4gIGNoZWNrZWQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgY2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgZGVmYXVsdENoZWNrZWQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgZGlzYWJsZUZvY3VzUmlwcGxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIGRpc2FibGVUb3VjaFJpcHBsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBkaXNhYmxlZDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBpY29uU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBpbnB1dFN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgaW5wdXRUeXBlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZy5pc1JlcXVpcmVkLFxuICBsYWJlbDogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICBsYWJlbFBvc2l0aW9uOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9uZU9mKFsnbGVmdCcsICdyaWdodCddKSxcbiAgbGFiZWxTdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIG5hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBvbkJsdXI6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgb25Gb2N1czogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBvbk1vdXNlRG93bjogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBvbk1vdXNlTGVhdmU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgb25Nb3VzZVVwOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIG9uUGFyZW50U2hvdWxkVXBkYXRlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIG9uU3dpdGNoOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIG9uVG91Y2hFbmQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgb25Ub3VjaFN0YXJ0OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIHJpcHBsZUNvbG9yOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgcmlwcGxlU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIHN3aXRjaEVsZW1lbnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZWxlbWVudC5pc1JlcXVpcmVkLFxuICBzd2l0Y2hlZDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLmlzUmVxdWlyZWQsXG4gIHRodW1iU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICB0cmFja1N0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgdmFsdWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYW55XG59IDoge307XG5leHBvcnRzLmRlZmF1bHQgPSBFbmhhbmNlZFN3aXRjaDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWF0ZXJpYWwtdWkvaW50ZXJuYWwvRW5oYW5jZWRTd2l0Y2guanNcbi8vIG1vZHVsZSBpZCA9IDE1N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAgMiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFVzZSBpbnZhcmlhbnQoKSB0byBhc3NlcnQgc3RhdGUgd2hpY2ggeW91ciBwcm9ncmFtIGFzc3VtZXMgdG8gYmUgdHJ1ZS5cbiAqXG4gKiBQcm92aWRlIHNwcmludGYtc3R5bGUgZm9ybWF0IChvbmx5ICVzIGlzIHN1cHBvcnRlZCkgYW5kIGFyZ3VtZW50c1xuICogdG8gcHJvdmlkZSBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGJyb2tlIGFuZCB3aGF0IHlvdSB3ZXJlXG4gKiBleHBlY3RpbmcuXG4gKlxuICogVGhlIGludmFyaWFudCBtZXNzYWdlIHdpbGwgYmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiwgYnV0IHRoZSBpbnZhcmlhbnRcbiAqIHdpbGwgcmVtYWluIHRvIGVuc3VyZSBsb2dpYyBkb2VzIG5vdCBkaWZmZXIgaW4gcHJvZHVjdGlvbi5cbiAqL1xuXG52YXIgaW52YXJpYW50ID0gZnVuY3Rpb24oY29uZGl0aW9uLCBmb3JtYXQsIGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaW52YXJpYW50IHJlcXVpcmVzIGFuIGVycm9yIG1lc3NhZ2UgYXJndW1lbnQnKTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWNvbmRpdGlvbikge1xuICAgIHZhciBlcnJvcjtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgICAnTWluaWZpZWQgZXhjZXB0aW9uIG9jY3VycmVkOyB1c2UgdGhlIG5vbi1taW5pZmllZCBkZXYgZW52aXJvbm1lbnQgJyArXG4gICAgICAgICdmb3IgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZSBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLidcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhcmdzID0gW2EsIGIsIGMsIGQsIGUsIGZdO1xuICAgICAgdmFyIGFyZ0luZGV4ID0gMDtcbiAgICAgIGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgICBmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24oKSB7IHJldHVybiBhcmdzW2FyZ0luZGV4KytdOyB9KVxuICAgICAgKTtcbiAgICAgIGVycm9yLm5hbWUgPSAnSW52YXJpYW50IFZpb2xhdGlvbic7XG4gICAgfVxuXG4gICAgZXJyb3IuZnJhbWVzVG9Qb3AgPSAxOyAvLyB3ZSBkb24ndCBjYXJlIGFib3V0IGludmFyaWFudCdzIG93biBmcmFtZVxuICAgIHRocm93IGVycm9yO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGludmFyaWFudDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9pbnZhcmlhbnQvYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wdXJlID0gcmVxdWlyZSgncmVjb21wb3NlL3B1cmUnKTtcblxudmFyIF9wdXJlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3B1cmUpO1xuXG52YXIgX1N2Z0ljb24gPSByZXF1aXJlKCcuLi9TdmdJY29uJyk7XG5cbnZhciBfU3ZnSWNvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TdmdJY29uKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIE5hdmlnYXRpb25BcnJvd0Ryb3BSaWdodCA9IGZ1bmN0aW9uIE5hdmlnYXRpb25BcnJvd0Ryb3BSaWdodChwcm9wcykge1xuICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgX1N2Z0ljb24yLmRlZmF1bHQsXG4gICAgcHJvcHMsXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3BhdGgnLCB7IGQ6ICdNOS41LDdsNSw1bC01LDVWN3onIH0pXG4gICk7XG59O1xuXG5OYXZpZ2F0aW9uQXJyb3dEcm9wUmlnaHQgPSAoMCwgX3B1cmUyLmRlZmF1bHQpKE5hdmlnYXRpb25BcnJvd0Ryb3BSaWdodCk7XG5OYXZpZ2F0aW9uQXJyb3dEcm9wUmlnaHQuZGlzcGxheU5hbWUgPSAnTmF2aWdhdGlvbkFycm93RHJvcFJpZ2h0Jztcbk5hdmlnYXRpb25BcnJvd0Ryb3BSaWdodC5tdWlOYW1lID0gJ1N2Z0ljb24nO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBOYXZpZ2F0aW9uQXJyb3dEcm9wUmlnaHQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L21hdGVyaWFsLXVpL3N2Zy1pY29ucy9uYXZpZ2F0aW9uLWFycm93LWRyb3AtcmlnaHQuanNcbi8vIG1vZHVsZSBpZCA9IDE2M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3B1cmUgPSByZXF1aXJlKCdyZWNvbXBvc2UvcHVyZScpO1xuXG52YXIgX3B1cmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHVyZSk7XG5cbnZhciBfU3ZnSWNvbiA9IHJlcXVpcmUoJy4uLy4uL1N2Z0ljb24nKTtcblxudmFyIF9TdmdJY29uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N2Z0ljb24pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgTmF2aWdhdGlvbkFycm93RHJvcERvd24gPSBmdW5jdGlvbiBOYXZpZ2F0aW9uQXJyb3dEcm9wRG93bihwcm9wcykge1xuICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgX1N2Z0ljb24yLmRlZmF1bHQsXG4gICAgcHJvcHMsXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3BhdGgnLCB7IGQ6ICdNNyAxMGw1IDUgNS01eicgfSlcbiAgKTtcbn07XG5OYXZpZ2F0aW9uQXJyb3dEcm9wRG93biA9ICgwLCBfcHVyZTIuZGVmYXVsdCkoTmF2aWdhdGlvbkFycm93RHJvcERvd24pO1xuTmF2aWdhdGlvbkFycm93RHJvcERvd24uZGlzcGxheU5hbWUgPSAnTmF2aWdhdGlvbkFycm93RHJvcERvd24nO1xuTmF2aWdhdGlvbkFycm93RHJvcERvd24ubXVpTmFtZSA9ICdTdmdJY29uJztcblxuZXhwb3J0cy5kZWZhdWx0ID0gTmF2aWdhdGlvbkFycm93RHJvcERvd247XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L21hdGVyaWFsLXVpL3N2Zy1pY29ucy9uYXZpZ2F0aW9uL2Fycm93LWRyb3AtZG93bi5qc1xuLy8gbW9kdWxlIGlkID0gMTY0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAyIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHVyZSA9IHJlcXVpcmUoJ3JlY29tcG9zZS9wdXJlJyk7XG5cbnZhciBfcHVyZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wdXJlKTtcblxudmFyIF9TdmdJY29uID0gcmVxdWlyZSgnLi4vLi4vU3ZnSWNvbicpO1xuXG52YXIgX1N2Z0ljb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3ZnSWNvbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBOYXZpZ2F0aW9uTWVudSA9IGZ1bmN0aW9uIE5hdmlnYXRpb25NZW51KHByb3BzKSB7XG4gIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICBfU3ZnSWNvbjIuZGVmYXVsdCxcbiAgICBwcm9wcyxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgncGF0aCcsIHsgZDogJ00zIDE4aDE4di0ySDN2MnptMC01aDE4di0ySDN2MnptMC03djJoMThWNkgzeicgfSlcbiAgKTtcbn07XG5OYXZpZ2F0aW9uTWVudSA9ICgwLCBfcHVyZTIuZGVmYXVsdCkoTmF2aWdhdGlvbk1lbnUpO1xuTmF2aWdhdGlvbk1lbnUuZGlzcGxheU5hbWUgPSAnTmF2aWdhdGlvbk1lbnUnO1xuTmF2aWdhdGlvbk1lbnUubXVpTmFtZSA9ICdTdmdJY29uJztcblxuZXhwb3J0cy5kZWZhdWx0ID0gTmF2aWdhdGlvbk1lbnU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L21hdGVyaWFsLXVpL3N2Zy1pY29ucy9uYXZpZ2F0aW9uL21lbnUuanNcbi8vIG1vZHVsZSBpZCA9IDE2NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3B1cmUgPSByZXF1aXJlKCdyZWNvbXBvc2UvcHVyZScpO1xuXG52YXIgX3B1cmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHVyZSk7XG5cbnZhciBfU3ZnSWNvbiA9IHJlcXVpcmUoJy4uLy4uL1N2Z0ljb24nKTtcblxudmFyIF9TdmdJY29uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N2Z0ljb24pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgTmF2aWdhdGlvbk1vcmVWZXJ0ID0gZnVuY3Rpb24gTmF2aWdhdGlvbk1vcmVWZXJ0KHByb3BzKSB7XG4gIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICBfU3ZnSWNvbjIuZGVmYXVsdCxcbiAgICBwcm9wcyxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgncGF0aCcsIHsgZDogJ00xMiA4YzEuMSAwIDItLjkgMi0ycy0uOS0yLTItMi0yIC45LTIgMiAuOSAyIDIgMnptMCAyYy0xLjEgMC0yIC45LTIgMnMuOSAyIDIgMiAyLS45IDItMi0uOS0yLTItMnptMCA2Yy0xLjEgMC0yIC45LTIgMnMuOSAyIDIgMiAyLS45IDItMi0uOS0yLTItMnonIH0pXG4gICk7XG59O1xuTmF2aWdhdGlvbk1vcmVWZXJ0ID0gKDAsIF9wdXJlMi5kZWZhdWx0KShOYXZpZ2F0aW9uTW9yZVZlcnQpO1xuTmF2aWdhdGlvbk1vcmVWZXJ0LmRpc3BsYXlOYW1lID0gJ05hdmlnYXRpb25Nb3JlVmVydCc7XG5OYXZpZ2F0aW9uTW9yZVZlcnQubXVpTmFtZSA9ICdTdmdJY29uJztcblxuZXhwb3J0cy5kZWZhdWx0ID0gTmF2aWdhdGlvbk1vcmVWZXJ0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9zdmctaWNvbnMvbmF2aWdhdGlvbi9tb3JlLXZlcnQuanNcbi8vIG1vZHVsZSBpZCA9IDE2NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3B1cmUgPSByZXF1aXJlKCdyZWNvbXBvc2UvcHVyZScpO1xuXG52YXIgX3B1cmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHVyZSk7XG5cbnZhciBfU3ZnSWNvbiA9IHJlcXVpcmUoJy4uLy4uL1N2Z0ljb24nKTtcblxudmFyIF9TdmdJY29uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N2Z0ljb24pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgVG9nZ2xlQ2hlY2tCb3hPdXRsaW5lQmxhbmsgPSBmdW5jdGlvbiBUb2dnbGVDaGVja0JveE91dGxpbmVCbGFuayhwcm9wcykge1xuICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgX1N2Z0ljb24yLmRlZmF1bHQsXG4gICAgcHJvcHMsXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ3BhdGgnLCB7IGQ6ICdNMTkgNXYxNEg1VjVoMTRtMC0ySDVjLTEuMSAwLTIgLjktMiAydjE0YzAgMS4xLjkgMiAyIDJoMTRjMS4xIDAgMi0uOSAyLTJWNWMwLTEuMS0uOS0yLTItMnonIH0pXG4gICk7XG59O1xuVG9nZ2xlQ2hlY2tCb3hPdXRsaW5lQmxhbmsgPSAoMCwgX3B1cmUyLmRlZmF1bHQpKFRvZ2dsZUNoZWNrQm94T3V0bGluZUJsYW5rKTtcblRvZ2dsZUNoZWNrQm94T3V0bGluZUJsYW5rLmRpc3BsYXlOYW1lID0gJ1RvZ2dsZUNoZWNrQm94T3V0bGluZUJsYW5rJztcblRvZ2dsZUNoZWNrQm94T3V0bGluZUJsYW5rLm11aU5hbWUgPSAnU3ZnSWNvbic7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFRvZ2dsZUNoZWNrQm94T3V0bGluZUJsYW5rO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9zdmctaWNvbnMvdG9nZ2xlL2NoZWNrLWJveC1vdXRsaW5lLWJsYW5rLmpzXG4vLyBtb2R1bGUgaWQgPSAxNjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDIiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wdXJlID0gcmVxdWlyZSgncmVjb21wb3NlL3B1cmUnKTtcblxudmFyIF9wdXJlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3B1cmUpO1xuXG52YXIgX1N2Z0ljb24gPSByZXF1aXJlKCcuLi8uLi9TdmdJY29uJyk7XG5cbnZhciBfU3ZnSWNvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TdmdJY29uKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIFRvZ2dsZUNoZWNrQm94ID0gZnVuY3Rpb24gVG9nZ2xlQ2hlY2tCb3gocHJvcHMpIHtcbiAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgIF9TdmdJY29uMi5kZWZhdWx0LFxuICAgIHByb3BzLFxuICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdwYXRoJywgeyBkOiAnTTE5IDNINWMtMS4xMSAwLTIgLjktMiAydjE0YzAgMS4xLjg5IDIgMiAyaDE0YzEuMTEgMCAyLS45IDItMlY1YzAtMS4xLS44OS0yLTItMnptLTkgMTRsLTUtNSAxLjQxLTEuNDFMMTAgMTQuMTdsNy41OS03LjU5TDE5IDhsLTkgOXonIH0pXG4gICk7XG59O1xuVG9nZ2xlQ2hlY2tCb3ggPSAoMCwgX3B1cmUyLmRlZmF1bHQpKFRvZ2dsZUNoZWNrQm94KTtcblRvZ2dsZUNoZWNrQm94LmRpc3BsYXlOYW1lID0gJ1RvZ2dsZUNoZWNrQm94JztcblRvZ2dsZUNoZWNrQm94Lm11aU5hbWUgPSAnU3ZnSWNvbic7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFRvZ2dsZUNoZWNrQm94O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9zdmctaWNvbnMvdG9nZ2xlL2NoZWNrLWJveC5qc1xuLy8gbW9kdWxlIGlkID0gMTY4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAyIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5MQVJHRSA9IGV4cG9ydHMuTUVESVVNID0gZXhwb3J0cy5TTUFMTCA9IHVuZGVmaW5lZDtcblxudmFyIF9leHRlbmRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9leHRlbmRzJyk7XG5cbnZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cbnZhciBfZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YnKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2syID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrJyk7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTtcblxudmFyIF9jcmVhdGVDbGFzczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MnKTtcblxudmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4nKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblxudmFyIF9pbmhlcml0czIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMnKTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSB3aXRoV2lkdGg7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdEV2ZW50TGlzdGVuZXIgPSByZXF1aXJlKCdyZWFjdC1ldmVudC1saXN0ZW5lcicpO1xuXG52YXIgX3JlYWN0RXZlbnRMaXN0ZW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdEV2ZW50TGlzdGVuZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgU01BTEwgPSBleHBvcnRzLlNNQUxMID0gMTtcbnZhciBNRURJVU0gPSBleHBvcnRzLk1FRElVTSA9IDI7XG52YXIgTEFSR0UgPSBleHBvcnRzLkxBUkdFID0gMztcblxuZnVuY3Rpb24gd2l0aFdpZHRoKCkge1xuICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gIHZhciBfb3B0aW9ucyRsYXJnZVdpZHRoID0gb3B0aW9ucy5sYXJnZVdpZHRoLFxuICAgICAgbGFyZ2VXaWR0aCA9IF9vcHRpb25zJGxhcmdlV2lkdGggPT09IHVuZGVmaW5lZCA/IDk5MiA6IF9vcHRpb25zJGxhcmdlV2lkdGgsXG4gICAgICBfb3B0aW9ucyRtZWRpdW1XaWR0aCA9IG9wdGlvbnMubWVkaXVtV2lkdGgsXG4gICAgICBtZWRpdW1XaWR0aCA9IF9vcHRpb25zJG1lZGl1bVdpZHRoID09PSB1bmRlZmluZWQgPyA3NjggOiBfb3B0aW9ucyRtZWRpdW1XaWR0aCxcbiAgICAgIF9vcHRpb25zJHJlc2l6ZUludGVydiA9IG9wdGlvbnMucmVzaXplSW50ZXJ2YWwsXG4gICAgICByZXNpemVJbnRlcnZhbCA9IF9vcHRpb25zJHJlc2l6ZUludGVydiA9PT0gdW5kZWZpbmVkID8gMTY2IDogX29wdGlvbnMkcmVzaXplSW50ZXJ2O1xuXG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChNeUNvbXBvbmVudCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAgICAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoV2l0aFdpZHRoLCBfQ29tcG9uZW50KTtcblxuICAgICAgZnVuY3Rpb24gV2l0aFdpZHRoKCkge1xuICAgICAgICB2YXIgX3JlZjtcblxuICAgICAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIFdpdGhXaWR0aCk7XG5cbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChfcmVmID0gV2l0aFdpZHRoLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShXaXRoV2lkdGgpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICB3aWR0aDogbnVsbFxuICAgICAgICB9LCBfdGhpcy5oYW5kbGVSZXNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzLmRlZmVyVGltZXIpO1xuICAgICAgICAgIF90aGlzLmRlZmVyVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnVwZGF0ZVdpZHRoKCk7XG4gICAgICAgICAgfSwgcmVzaXplSW50ZXJ2YWwpO1xuICAgICAgICB9LCBfdGVtcCksICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkoX3RoaXMsIF9yZXQpO1xuICAgICAgfVxuXG4gICAgICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShXaXRoV2lkdGgsIFt7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICAgIHRoaXMudXBkYXRlV2lkdGgoKTtcbiAgICAgICAgfVxuICAgICAgfSwge1xuICAgICAgICBrZXk6ICdjb21wb25lbnRXaWxsVW5tb3VudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5kZWZlclRpbWVyKTtcbiAgICAgICAgfVxuICAgICAgfSwge1xuICAgICAgICBrZXk6ICd1cGRhdGVXaWR0aCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVXaWR0aCgpIHtcbiAgICAgICAgICB2YXIgaW5uZXJXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICAgIHZhciB3aWR0aCA9IHZvaWQgMDtcblxuICAgICAgICAgIGlmIChpbm5lcldpZHRoID49IGxhcmdlV2lkdGgpIHtcbiAgICAgICAgICAgIHdpZHRoID0gTEFSR0U7XG4gICAgICAgICAgfSBlbHNlIGlmIChpbm5lcldpZHRoID49IG1lZGl1bVdpZHRoKSB7XG4gICAgICAgICAgICB3aWR0aCA9IE1FRElVTTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gaW5uZXJXaWR0aCA8IDc2OFxuICAgICAgICAgICAgd2lkdGggPSBTTUFMTDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAod2lkdGggIT09IHRoaXMuc3RhdGUud2lkdGgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICB3aWR0aDogd2lkdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuc3RhdGUud2lkdGg7XG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBXaGVuIHJlbmRlcmluZyB0aGUgY29tcG9uZW50IG9uIHRoZSBzZXJ2ZXIsXG4gICAgICAgICAgICogd2UgaGF2ZSBubyBpZGVhIGFib3V0IHRoZSBzY3JlZW4gd2lkdGguXG4gICAgICAgICAgICogSW4gb3JkZXIgdG8gcHJldmVudCBibGlua3MgYW5kIGhlbHAgdGhlIHJlY29uY2lsaWF0aW9uXG4gICAgICAgICAgICogd2UgYXJlIG5vdCByZW5kZXJpbmcgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEEgYmV0dGVyIGFsdGVybmF0aXZlIHdvdWxkIGJlIHRvIHNlbmQgY2xpZW50IGhpbnRzLlxuICAgICAgICAgICAqIEJ1dCB0aGUgYnJvd3NlciBzdXBwb3J0IG9mIHRoaXMgQVBJIGlzIGxvdzpcbiAgICAgICAgICAgKiBodHRwOi8vY2FuaXVzZS5jb20vI3NlYXJjaD1jbGllbnQlMjBoaW50XG4gICAgICAgICAgICovXG4gICAgICAgICAgaWYgKHdpZHRoID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBfcmVhY3RFdmVudExpc3RlbmVyMi5kZWZhdWx0LFxuICAgICAgICAgICAgeyB0YXJnZXQ6ICd3aW5kb3cnLCBvblJlc2l6ZTogdGhpcy5oYW5kbGVSZXNpemUgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KE15Q29tcG9uZW50LCAoMCwgX2V4dGVuZHMzLmRlZmF1bHQpKHtcbiAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoXG4gICAgICAgICAgICB9LCB0aGlzLnByb3BzKSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XSk7XG4gICAgICByZXR1cm4gV2l0aFdpZHRoO1xuICAgIH0oX3JlYWN0LkNvbXBvbmVudCk7XG4gIH07XG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L21hdGVyaWFsLXVpL3V0aWxzL3dpdGhXaWR0aC5qc1xuLy8gbW9kdWxlIGlkID0gMTY5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAyIiwidmFyIGlzYXJyYXkgPSByZXF1aXJlKCdpc2FycmF5JylcblxuLyoqXG4gKiBFeHBvc2UgYHBhdGhUb1JlZ2V4cGAuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gcGF0aFRvUmVnZXhwXG5tb2R1bGUuZXhwb3J0cy5wYXJzZSA9IHBhcnNlXG5tb2R1bGUuZXhwb3J0cy5jb21waWxlID0gY29tcGlsZVxubW9kdWxlLmV4cG9ydHMudG9rZW5zVG9GdW5jdGlvbiA9IHRva2Vuc1RvRnVuY3Rpb25cbm1vZHVsZS5leHBvcnRzLnRva2Vuc1RvUmVnRXhwID0gdG9rZW5zVG9SZWdFeHBcblxuLyoqXG4gKiBUaGUgbWFpbiBwYXRoIG1hdGNoaW5nIHJlZ2V4cCB1dGlsaXR5LlxuICpcbiAqIEB0eXBlIHtSZWdFeHB9XG4gKi9cbnZhciBQQVRIX1JFR0VYUCA9IG5ldyBSZWdFeHAoW1xuICAvLyBNYXRjaCBlc2NhcGVkIGNoYXJhY3RlcnMgdGhhdCB3b3VsZCBvdGhlcndpc2UgYXBwZWFyIGluIGZ1dHVyZSBtYXRjaGVzLlxuICAvLyBUaGlzIGFsbG93cyB0aGUgdXNlciB0byBlc2NhcGUgc3BlY2lhbCBjaGFyYWN0ZXJzIHRoYXQgd29uJ3QgdHJhbnNmb3JtLlxuICAnKFxcXFxcXFxcLiknLFxuICAvLyBNYXRjaCBFeHByZXNzLXN0eWxlIHBhcmFtZXRlcnMgYW5kIHVuLW5hbWVkIHBhcmFtZXRlcnMgd2l0aCBhIHByZWZpeFxuICAvLyBhbmQgb3B0aW9uYWwgc3VmZml4ZXMuIE1hdGNoZXMgYXBwZWFyIGFzOlxuICAvL1xuICAvLyBcIi86dGVzdChcXFxcZCspP1wiID0+IFtcIi9cIiwgXCJ0ZXN0XCIsIFwiXFxkK1wiLCB1bmRlZmluZWQsIFwiP1wiLCB1bmRlZmluZWRdXG4gIC8vIFwiL3JvdXRlKFxcXFxkKylcIiAgPT4gW3VuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIFwiXFxkK1wiLCB1bmRlZmluZWQsIHVuZGVmaW5lZF1cbiAgLy8gXCIvKlwiICAgICAgICAgICAgPT4gW1wiL1wiLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIFwiKlwiXVxuICAnKFtcXFxcLy5dKT8oPzooPzpcXFxcOihcXFxcdyspKD86XFxcXCgoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKV0pKylcXFxcKSk/fFxcXFwoKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKCldKSspXFxcXCkpKFsrKj9dKT98KFxcXFwqKSknXG5dLmpvaW4oJ3wnKSwgJ2cnKVxuXG4vKipcbiAqIFBhcnNlIGEgc3RyaW5nIGZvciB0aGUgcmF3IHRva2Vucy5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9ICBzdHJcbiAqIEBwYXJhbSAge09iamVjdD19IG9wdGlvbnNcbiAqIEByZXR1cm4geyFBcnJheX1cbiAqL1xuZnVuY3Rpb24gcGFyc2UgKHN0ciwgb3B0aW9ucykge1xuICB2YXIgdG9rZW5zID0gW11cbiAgdmFyIGtleSA9IDBcbiAgdmFyIGluZGV4ID0gMFxuICB2YXIgcGF0aCA9ICcnXG4gIHZhciBkZWZhdWx0RGVsaW1pdGVyID0gb3B0aW9ucyAmJiBvcHRpb25zLmRlbGltaXRlciB8fCAnLydcbiAgdmFyIHJlc1xuXG4gIHdoaWxlICgocmVzID0gUEFUSF9SRUdFWFAuZXhlYyhzdHIpKSAhPSBudWxsKSB7XG4gICAgdmFyIG0gPSByZXNbMF1cbiAgICB2YXIgZXNjYXBlZCA9IHJlc1sxXVxuICAgIHZhciBvZmZzZXQgPSByZXMuaW5kZXhcbiAgICBwYXRoICs9IHN0ci5zbGljZShpbmRleCwgb2Zmc2V0KVxuICAgIGluZGV4ID0gb2Zmc2V0ICsgbS5sZW5ndGhcblxuICAgIC8vIElnbm9yZSBhbHJlYWR5IGVzY2FwZWQgc2VxdWVuY2VzLlxuICAgIGlmIChlc2NhcGVkKSB7XG4gICAgICBwYXRoICs9IGVzY2FwZWRbMV1cbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgdmFyIG5leHQgPSBzdHJbaW5kZXhdXG4gICAgdmFyIHByZWZpeCA9IHJlc1syXVxuICAgIHZhciBuYW1lID0gcmVzWzNdXG4gICAgdmFyIGNhcHR1cmUgPSByZXNbNF1cbiAgICB2YXIgZ3JvdXAgPSByZXNbNV1cbiAgICB2YXIgbW9kaWZpZXIgPSByZXNbNl1cbiAgICB2YXIgYXN0ZXJpc2sgPSByZXNbN11cblxuICAgIC8vIFB1c2ggdGhlIGN1cnJlbnQgcGF0aCBvbnRvIHRoZSB0b2tlbnMuXG4gICAgaWYgKHBhdGgpIHtcbiAgICAgIHRva2Vucy5wdXNoKHBhdGgpXG4gICAgICBwYXRoID0gJydcbiAgICB9XG5cbiAgICB2YXIgcGFydGlhbCA9IHByZWZpeCAhPSBudWxsICYmIG5leHQgIT0gbnVsbCAmJiBuZXh0ICE9PSBwcmVmaXhcbiAgICB2YXIgcmVwZWF0ID0gbW9kaWZpZXIgPT09ICcrJyB8fCBtb2RpZmllciA9PT0gJyonXG4gICAgdmFyIG9wdGlvbmFsID0gbW9kaWZpZXIgPT09ICc/JyB8fCBtb2RpZmllciA9PT0gJyonXG4gICAgdmFyIGRlbGltaXRlciA9IHJlc1syXSB8fCBkZWZhdWx0RGVsaW1pdGVyXG4gICAgdmFyIHBhdHRlcm4gPSBjYXB0dXJlIHx8IGdyb3VwXG5cbiAgICB0b2tlbnMucHVzaCh7XG4gICAgICBuYW1lOiBuYW1lIHx8IGtleSsrLFxuICAgICAgcHJlZml4OiBwcmVmaXggfHwgJycsXG4gICAgICBkZWxpbWl0ZXI6IGRlbGltaXRlcixcbiAgICAgIG9wdGlvbmFsOiBvcHRpb25hbCxcbiAgICAgIHJlcGVhdDogcmVwZWF0LFxuICAgICAgcGFydGlhbDogcGFydGlhbCxcbiAgICAgIGFzdGVyaXNrOiAhIWFzdGVyaXNrLFxuICAgICAgcGF0dGVybjogcGF0dGVybiA/IGVzY2FwZUdyb3VwKHBhdHRlcm4pIDogKGFzdGVyaXNrID8gJy4qJyA6ICdbXicgKyBlc2NhcGVTdHJpbmcoZGVsaW1pdGVyKSArICddKz8nKVxuICAgIH0pXG4gIH1cblxuICAvLyBNYXRjaCBhbnkgY2hhcmFjdGVycyBzdGlsbCByZW1haW5pbmcuXG4gIGlmIChpbmRleCA8IHN0ci5sZW5ndGgpIHtcbiAgICBwYXRoICs9IHN0ci5zdWJzdHIoaW5kZXgpXG4gIH1cblxuICAvLyBJZiB0aGUgcGF0aCBleGlzdHMsIHB1c2ggaXQgb250byB0aGUgZW5kLlxuICBpZiAocGF0aCkge1xuICAgIHRva2Vucy5wdXNoKHBhdGgpXG4gIH1cblxuICByZXR1cm4gdG9rZW5zXG59XG5cbi8qKlxuICogQ29tcGlsZSBhIHN0cmluZyB0byBhIHRlbXBsYXRlIGZ1bmN0aW9uIGZvciB0aGUgcGF0aC5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9ICAgICAgICAgICAgIHN0clxuICogQHBhcmFtICB7T2JqZWN0PX0gICAgICAgICAgICBvcHRpb25zXG4gKiBAcmV0dXJuIHshZnVuY3Rpb24oT2JqZWN0PSwgT2JqZWN0PSl9XG4gKi9cbmZ1bmN0aW9uIGNvbXBpbGUgKHN0ciwgb3B0aW9ucykge1xuICByZXR1cm4gdG9rZW5zVG9GdW5jdGlvbihwYXJzZShzdHIsIG9wdGlvbnMpKVxufVxuXG4vKipcbiAqIFByZXR0aWVyIGVuY29kaW5nIG9mIFVSSSBwYXRoIHNlZ21lbnRzLlxuICpcbiAqIEBwYXJhbSAge3N0cmluZ31cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZW5jb2RlVVJJQ29tcG9uZW50UHJldHR5IChzdHIpIHtcbiAgcmV0dXJuIGVuY29kZVVSSShzdHIpLnJlcGxhY2UoL1tcXC8/I10vZywgZnVuY3Rpb24gKGMpIHtcbiAgICByZXR1cm4gJyUnICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpXG4gIH0pXG59XG5cbi8qKlxuICogRW5jb2RlIHRoZSBhc3RlcmlzayBwYXJhbWV0ZXIuIFNpbWlsYXIgdG8gYHByZXR0eWAsIGJ1dCBhbGxvd3Mgc2xhc2hlcy5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGVuY29kZUFzdGVyaXNrIChzdHIpIHtcbiAgcmV0dXJuIGVuY29kZVVSSShzdHIpLnJlcGxhY2UoL1s/I10vZywgZnVuY3Rpb24gKGMpIHtcbiAgICByZXR1cm4gJyUnICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpXG4gIH0pXG59XG5cbi8qKlxuICogRXhwb3NlIGEgbWV0aG9kIGZvciB0cmFuc2Zvcm1pbmcgdG9rZW5zIGludG8gdGhlIHBhdGggZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIHRva2Vuc1RvRnVuY3Rpb24gKHRva2Vucykge1xuICAvLyBDb21waWxlIGFsbCB0aGUgdG9rZW5zIGludG8gcmVnZXhwcy5cbiAgdmFyIG1hdGNoZXMgPSBuZXcgQXJyYXkodG9rZW5zLmxlbmd0aClcblxuICAvLyBDb21waWxlIGFsbCB0aGUgcGF0dGVybnMgYmVmb3JlIGNvbXBpbGF0aW9uLlxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgIGlmICh0eXBlb2YgdG9rZW5zW2ldID09PSAnb2JqZWN0Jykge1xuICAgICAgbWF0Y2hlc1tpXSA9IG5ldyBSZWdFeHAoJ14oPzonICsgdG9rZW5zW2ldLnBhdHRlcm4gKyAnKSQnKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAob2JqLCBvcHRzKSB7XG4gICAgdmFyIHBhdGggPSAnJ1xuICAgIHZhciBkYXRhID0gb2JqIHx8IHt9XG4gICAgdmFyIG9wdGlvbnMgPSBvcHRzIHx8IHt9XG4gICAgdmFyIGVuY29kZSA9IG9wdGlvbnMucHJldHR5ID8gZW5jb2RlVVJJQ29tcG9uZW50UHJldHR5IDogZW5jb2RlVVJJQ29tcG9uZW50XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHRva2VuID0gdG9rZW5zW2ldXG5cbiAgICAgIGlmICh0eXBlb2YgdG9rZW4gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHBhdGggKz0gdG9rZW5cblxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICB2YXIgdmFsdWUgPSBkYXRhW3Rva2VuLm5hbWVdXG4gICAgICB2YXIgc2VnbWVudFxuXG4gICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICBpZiAodG9rZW4ub3B0aW9uYWwpIHtcbiAgICAgICAgICAvLyBQcmVwZW5kIHBhcnRpYWwgc2VnbWVudCBwcmVmaXhlcy5cbiAgICAgICAgICBpZiAodG9rZW4ucGFydGlhbCkge1xuICAgICAgICAgICAgcGF0aCArPSB0b2tlbi5wcmVmaXhcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIFwiJyArIHRva2VuLm5hbWUgKyAnXCIgdG8gYmUgZGVmaW5lZCcpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGlzYXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGlmICghdG9rZW4ucmVwZWF0KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgXCInICsgdG9rZW4ubmFtZSArICdcIiB0byBub3QgcmVwZWF0LCBidXQgcmVjZWl2ZWQgYCcgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgKyAnYCcpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgaWYgKHRva2VuLm9wdGlvbmFsKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBcIicgKyB0b2tlbi5uYW1lICsgJ1wiIHRvIG5vdCBiZSBlbXB0eScpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2YWx1ZS5sZW5ndGg7IGorKykge1xuICAgICAgICAgIHNlZ21lbnQgPSBlbmNvZGUodmFsdWVbal0pXG5cbiAgICAgICAgICBpZiAoIW1hdGNoZXNbaV0udGVzdChzZWdtZW50KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgYWxsIFwiJyArIHRva2VuLm5hbWUgKyAnXCIgdG8gbWF0Y2ggXCInICsgdG9rZW4ucGF0dGVybiArICdcIiwgYnV0IHJlY2VpdmVkIGAnICsgSlNPTi5zdHJpbmdpZnkoc2VnbWVudCkgKyAnYCcpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcGF0aCArPSAoaiA9PT0gMCA/IHRva2VuLnByZWZpeCA6IHRva2VuLmRlbGltaXRlcikgKyBzZWdtZW50XG4gICAgICAgIH1cblxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBzZWdtZW50ID0gdG9rZW4uYXN0ZXJpc2sgPyBlbmNvZGVBc3Rlcmlzayh2YWx1ZSkgOiBlbmNvZGUodmFsdWUpXG5cbiAgICAgIGlmICghbWF0Y2hlc1tpXS50ZXN0KHNlZ21lbnQpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIFwiJyArIHRva2VuLm5hbWUgKyAnXCIgdG8gbWF0Y2ggXCInICsgdG9rZW4ucGF0dGVybiArICdcIiwgYnV0IHJlY2VpdmVkIFwiJyArIHNlZ21lbnQgKyAnXCInKVxuICAgICAgfVxuXG4gICAgICBwYXRoICs9IHRva2VuLnByZWZpeCArIHNlZ21lbnRcbiAgICB9XG5cbiAgICByZXR1cm4gcGF0aFxuICB9XG59XG5cbi8qKlxuICogRXNjYXBlIGEgcmVndWxhciBleHByZXNzaW9uIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHN0clxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBlc2NhcGVTdHJpbmcgKHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoLyhbLisqPz1eIToke30oKVtcXF18XFwvXFxcXF0pL2csICdcXFxcJDEnKVxufVxuXG4vKipcbiAqIEVzY2FwZSB0aGUgY2FwdHVyaW5nIGdyb3VwIGJ5IGVzY2FwaW5nIHNwZWNpYWwgY2hhcmFjdGVycyBhbmQgbWVhbmluZy5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IGdyb3VwXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGVzY2FwZUdyb3VwIChncm91cCkge1xuICByZXR1cm4gZ3JvdXAucmVwbGFjZSgvKFs9ITokXFwvKCldKS9nLCAnXFxcXCQxJylcbn1cblxuLyoqXG4gKiBBdHRhY2ggdGhlIGtleXMgYXMgYSBwcm9wZXJ0eSBvZiB0aGUgcmVnZXhwLlxuICpcbiAqIEBwYXJhbSAgeyFSZWdFeHB9IHJlXG4gKiBAcGFyYW0gIHtBcnJheX0gICBrZXlzXG4gKiBAcmV0dXJuIHshUmVnRXhwfVxuICovXG5mdW5jdGlvbiBhdHRhY2hLZXlzIChyZSwga2V5cykge1xuICByZS5rZXlzID0ga2V5c1xuICByZXR1cm4gcmVcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGZsYWdzIGZvciBhIHJlZ2V4cCBmcm9tIHRoZSBvcHRpb25zLlxuICpcbiAqIEBwYXJhbSAge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBmbGFncyAob3B0aW9ucykge1xuICByZXR1cm4gb3B0aW9ucy5zZW5zaXRpdmUgPyAnJyA6ICdpJ1xufVxuXG4vKipcbiAqIFB1bGwgb3V0IGtleXMgZnJvbSBhIHJlZ2V4cC5cbiAqXG4gKiBAcGFyYW0gIHshUmVnRXhwfSBwYXRoXG4gKiBAcGFyYW0gIHshQXJyYXl9ICBrZXlzXG4gKiBAcmV0dXJuIHshUmVnRXhwfVxuICovXG5mdW5jdGlvbiByZWdleHBUb1JlZ2V4cCAocGF0aCwga2V5cykge1xuICAvLyBVc2UgYSBuZWdhdGl2ZSBsb29rYWhlYWQgdG8gbWF0Y2ggb25seSBjYXB0dXJpbmcgZ3JvdXBzLlxuICB2YXIgZ3JvdXBzID0gcGF0aC5zb3VyY2UubWF0Y2goL1xcKCg/IVxcPykvZylcblxuICBpZiAoZ3JvdXBzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBncm91cHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGtleXMucHVzaCh7XG4gICAgICAgIG5hbWU6IGksXG4gICAgICAgIHByZWZpeDogbnVsbCxcbiAgICAgICAgZGVsaW1pdGVyOiBudWxsLFxuICAgICAgICBvcHRpb25hbDogZmFsc2UsXG4gICAgICAgIHJlcGVhdDogZmFsc2UsXG4gICAgICAgIHBhcnRpYWw6IGZhbHNlLFxuICAgICAgICBhc3RlcmlzazogZmFsc2UsXG4gICAgICAgIHBhdHRlcm46IG51bGxcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGF0dGFjaEtleXMocGF0aCwga2V5cylcbn1cblxuLyoqXG4gKiBUcmFuc2Zvcm0gYW4gYXJyYXkgaW50byBhIHJlZ2V4cC5cbiAqXG4gKiBAcGFyYW0gIHshQXJyYXl9ICBwYXRoXG4gKiBAcGFyYW0gIHtBcnJheX0gICBrZXlzXG4gKiBAcGFyYW0gIHshT2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHshUmVnRXhwfVxuICovXG5mdW5jdGlvbiBhcnJheVRvUmVnZXhwIChwYXRoLCBrZXlzLCBvcHRpb25zKSB7XG4gIHZhciBwYXJ0cyA9IFtdXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aDsgaSsrKSB7XG4gICAgcGFydHMucHVzaChwYXRoVG9SZWdleHAocGF0aFtpXSwga2V5cywgb3B0aW9ucykuc291cmNlKVxuICB9XG5cbiAgdmFyIHJlZ2V4cCA9IG5ldyBSZWdFeHAoJyg/OicgKyBwYXJ0cy5qb2luKCd8JykgKyAnKScsIGZsYWdzKG9wdGlvbnMpKVxuXG4gIHJldHVybiBhdHRhY2hLZXlzKHJlZ2V4cCwga2V5cylcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBwYXRoIHJlZ2V4cCBmcm9tIHN0cmluZyBpbnB1dC5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9ICBwYXRoXG4gKiBAcGFyYW0gIHshQXJyYXl9ICBrZXlzXG4gKiBAcGFyYW0gIHshT2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHshUmVnRXhwfVxuICovXG5mdW5jdGlvbiBzdHJpbmdUb1JlZ2V4cCAocGF0aCwga2V5cywgb3B0aW9ucykge1xuICByZXR1cm4gdG9rZW5zVG9SZWdFeHAocGFyc2UocGF0aCwgb3B0aW9ucyksIGtleXMsIG9wdGlvbnMpXG59XG5cbi8qKlxuICogRXhwb3NlIGEgZnVuY3Rpb24gZm9yIHRha2luZyB0b2tlbnMgYW5kIHJldHVybmluZyBhIFJlZ0V4cC5cbiAqXG4gKiBAcGFyYW0gIHshQXJyYXl9ICAgICAgICAgIHRva2Vuc1xuICogQHBhcmFtICB7KEFycmF5fE9iamVjdCk9fSBrZXlzXG4gKiBAcGFyYW0gIHtPYmplY3Q9fSAgICAgICAgIG9wdGlvbnNcbiAqIEByZXR1cm4geyFSZWdFeHB9XG4gKi9cbmZ1bmN0aW9uIHRva2Vuc1RvUmVnRXhwICh0b2tlbnMsIGtleXMsIG9wdGlvbnMpIHtcbiAgaWYgKCFpc2FycmF5KGtleXMpKSB7XG4gICAgb3B0aW9ucyA9IC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKGtleXMgfHwgb3B0aW9ucylcbiAgICBrZXlzID0gW11cbiAgfVxuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG5cbiAgdmFyIHN0cmljdCA9IG9wdGlvbnMuc3RyaWN0XG4gIHZhciBlbmQgPSBvcHRpb25zLmVuZCAhPT0gZmFsc2VcbiAgdmFyIHJvdXRlID0gJydcblxuICAvLyBJdGVyYXRlIG92ZXIgdGhlIHRva2VucyBhbmQgY3JlYXRlIG91ciByZWdleHAgc3RyaW5nLlxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgIHZhciB0b2tlbiA9IHRva2Vuc1tpXVxuXG4gICAgaWYgKHR5cGVvZiB0b2tlbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJvdXRlICs9IGVzY2FwZVN0cmluZyh0b2tlbilcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHByZWZpeCA9IGVzY2FwZVN0cmluZyh0b2tlbi5wcmVmaXgpXG4gICAgICB2YXIgY2FwdHVyZSA9ICcoPzonICsgdG9rZW4ucGF0dGVybiArICcpJ1xuXG4gICAgICBrZXlzLnB1c2godG9rZW4pXG5cbiAgICAgIGlmICh0b2tlbi5yZXBlYXQpIHtcbiAgICAgICAgY2FwdHVyZSArPSAnKD86JyArIHByZWZpeCArIGNhcHR1cmUgKyAnKSonXG4gICAgICB9XG5cbiAgICAgIGlmICh0b2tlbi5vcHRpb25hbCkge1xuICAgICAgICBpZiAoIXRva2VuLnBhcnRpYWwpIHtcbiAgICAgICAgICBjYXB0dXJlID0gJyg/OicgKyBwcmVmaXggKyAnKCcgKyBjYXB0dXJlICsgJykpPydcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYXB0dXJlID0gcHJlZml4ICsgJygnICsgY2FwdHVyZSArICcpPydcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FwdHVyZSA9IHByZWZpeCArICcoJyArIGNhcHR1cmUgKyAnKSdcbiAgICAgIH1cblxuICAgICAgcm91dGUgKz0gY2FwdHVyZVxuICAgIH1cbiAgfVxuXG4gIHZhciBkZWxpbWl0ZXIgPSBlc2NhcGVTdHJpbmcob3B0aW9ucy5kZWxpbWl0ZXIgfHwgJy8nKVxuICB2YXIgZW5kc1dpdGhEZWxpbWl0ZXIgPSByb3V0ZS5zbGljZSgtZGVsaW1pdGVyLmxlbmd0aCkgPT09IGRlbGltaXRlclxuXG4gIC8vIEluIG5vbi1zdHJpY3QgbW9kZSB3ZSBhbGxvdyBhIHNsYXNoIGF0IHRoZSBlbmQgb2YgbWF0Y2guIElmIHRoZSBwYXRoIHRvXG4gIC8vIG1hdGNoIGFscmVhZHkgZW5kcyB3aXRoIGEgc2xhc2gsIHdlIHJlbW92ZSBpdCBmb3IgY29uc2lzdGVuY3kuIFRoZSBzbGFzaFxuICAvLyBpcyB2YWxpZCBhdCB0aGUgZW5kIG9mIGEgcGF0aCBtYXRjaCwgbm90IGluIHRoZSBtaWRkbGUuIFRoaXMgaXMgaW1wb3J0YW50XG4gIC8vIGluIG5vbi1lbmRpbmcgbW9kZSwgd2hlcmUgXCIvdGVzdC9cIiBzaG91bGRuJ3QgbWF0Y2ggXCIvdGVzdC8vcm91dGVcIi5cbiAgaWYgKCFzdHJpY3QpIHtcbiAgICByb3V0ZSA9IChlbmRzV2l0aERlbGltaXRlciA/IHJvdXRlLnNsaWNlKDAsIC1kZWxpbWl0ZXIubGVuZ3RoKSA6IHJvdXRlKSArICcoPzonICsgZGVsaW1pdGVyICsgJyg/PSQpKT8nXG4gIH1cblxuICBpZiAoZW5kKSB7XG4gICAgcm91dGUgKz0gJyQnXG4gIH0gZWxzZSB7XG4gICAgLy8gSW4gbm9uLWVuZGluZyBtb2RlLCB3ZSBuZWVkIHRoZSBjYXB0dXJpbmcgZ3JvdXBzIHRvIG1hdGNoIGFzIG11Y2ggYXNcbiAgICAvLyBwb3NzaWJsZSBieSB1c2luZyBhIHBvc2l0aXZlIGxvb2thaGVhZCB0byB0aGUgZW5kIG9yIG5leHQgcGF0aCBzZWdtZW50LlxuICAgIHJvdXRlICs9IHN0cmljdCAmJiBlbmRzV2l0aERlbGltaXRlciA/ICcnIDogJyg/PScgKyBkZWxpbWl0ZXIgKyAnfCQpJ1xuICB9XG5cbiAgcmV0dXJuIGF0dGFjaEtleXMobmV3IFJlZ0V4cCgnXicgKyByb3V0ZSwgZmxhZ3Mob3B0aW9ucykpLCBrZXlzKVxufVxuXG4vKipcbiAqIE5vcm1hbGl6ZSB0aGUgZ2l2ZW4gcGF0aCBzdHJpbmcsIHJldHVybmluZyBhIHJlZ3VsYXIgZXhwcmVzc2lvbi5cbiAqXG4gKiBBbiBlbXB0eSBhcnJheSBjYW4gYmUgcGFzc2VkIGluIGZvciB0aGUga2V5cywgd2hpY2ggd2lsbCBob2xkIHRoZVxuICogcGxhY2Vob2xkZXIga2V5IGRlc2NyaXB0aW9ucy4gRm9yIGV4YW1wbGUsIHVzaW5nIGAvdXNlci86aWRgLCBga2V5c2Agd2lsbFxuICogY29udGFpbiBgW3sgbmFtZTogJ2lkJywgZGVsaW1pdGVyOiAnLycsIG9wdGlvbmFsOiBmYWxzZSwgcmVwZWF0OiBmYWxzZSB9XWAuXG4gKlxuICogQHBhcmFtICB7KHN0cmluZ3xSZWdFeHB8QXJyYXkpfSBwYXRoXG4gKiBAcGFyYW0gIHsoQXJyYXl8T2JqZWN0KT19ICAgICAgIGtleXNcbiAqIEBwYXJhbSAge09iamVjdD19ICAgICAgICAgICAgICAgb3B0aW9uc1xuICogQHJldHVybiB7IVJlZ0V4cH1cbiAqL1xuZnVuY3Rpb24gcGF0aFRvUmVnZXhwIChwYXRoLCBrZXlzLCBvcHRpb25zKSB7XG4gIGlmICghaXNhcnJheShrZXlzKSkge1xuICAgIG9wdGlvbnMgPSAvKiogQHR5cGUgeyFPYmplY3R9ICovIChrZXlzIHx8IG9wdGlvbnMpXG4gICAga2V5cyA9IFtdXG4gIH1cblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuXG4gIGlmIChwYXRoIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgcmV0dXJuIHJlZ2V4cFRvUmVnZXhwKHBhdGgsIC8qKiBAdHlwZSB7IUFycmF5fSAqLyAoa2V5cykpXG4gIH1cblxuICBpZiAoaXNhcnJheShwYXRoKSkge1xuICAgIHJldHVybiBhcnJheVRvUmVnZXhwKC8qKiBAdHlwZSB7IUFycmF5fSAqLyAocGF0aCksIC8qKiBAdHlwZSB7IUFycmF5fSAqLyAoa2V5cyksIG9wdGlvbnMpXG4gIH1cblxuICByZXR1cm4gc3RyaW5nVG9SZWdleHAoLyoqIEB0eXBlIHtzdHJpbmd9ICovIChwYXRoKSwgLyoqIEB0eXBlIHshQXJyYXl9ICovIChrZXlzKSwgb3B0aW9ucylcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9wYXRoLXRvLXJlZ2V4cC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTcwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwibW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcnIpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3BhdGgtdG8tcmVnZXhwL34vaXNhcnJheS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTcxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5pbXBvcnQgd2FybmluZyBmcm9tICd3YXJuaW5nJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IGNyZWF0ZUhpc3RvcnkgZnJvbSAnaGlzdG9yeS9jcmVhdGVCcm93c2VySGlzdG9yeSc7XG5pbXBvcnQgUm91dGVyIGZyb20gJy4vUm91dGVyJztcblxuLyoqXG4gKiBUaGUgcHVibGljIEFQSSBmb3IgYSA8Um91dGVyPiB0aGF0IHVzZXMgSFRNTDUgaGlzdG9yeS5cbiAqL1xuXG52YXIgQnJvd3NlclJvdXRlciA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhCcm93c2VyUm91dGVyLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBCcm93c2VyUm91dGVyKCkge1xuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQnJvd3NlclJvdXRlcik7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9SZWFjdCRDb21wb25lbnQuY2FsbC5hcHBseShfUmVhY3QkQ29tcG9uZW50LCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuaGlzdG9yeSA9IGNyZWF0ZUhpc3RvcnkoX3RoaXMucHJvcHMpLCBfdGVtcCksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gIEJyb3dzZXJSb3V0ZXIucHJvdG90eXBlLmNvbXBvbmVudFdpbGxNb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICB3YXJuaW5nKCF0aGlzLnByb3BzLmhpc3RvcnksICc8QnJvd3NlclJvdXRlcj4gaWdub3JlcyB0aGUgaGlzdG9yeSBwcm9wLiBUbyB1c2UgYSBjdXN0b20gaGlzdG9yeSwgJyArICd1c2UgYGltcG9ydCB7IFJvdXRlciB9YCBpbnN0ZWFkIG9mIGBpbXBvcnQgeyBCcm93c2VyUm91dGVyIGFzIFJvdXRlciB9YC4nKTtcbiAgfTtcblxuICBCcm93c2VyUm91dGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm91dGVyLCB7IGhpc3Rvcnk6IHRoaXMuaGlzdG9yeSwgY2hpbGRyZW46IHRoaXMucHJvcHMuY2hpbGRyZW4gfSk7XG4gIH07XG5cbiAgcmV0dXJuIEJyb3dzZXJSb3V0ZXI7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbkJyb3dzZXJSb3V0ZXIucHJvcFR5cGVzID0ge1xuICBiYXNlbmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgZm9yY2VSZWZyZXNoOiBQcm9wVHlwZXMuYm9vbCxcbiAgZ2V0VXNlckNvbmZpcm1hdGlvbjogUHJvcFR5cGVzLmZ1bmMsXG4gIGtleUxlbmd0aDogUHJvcFR5cGVzLm51bWJlcixcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5ub2RlXG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IEJyb3dzZXJSb3V0ZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvQnJvd3NlclJvdXRlci5qc1xuLy8gbW9kdWxlIGlkID0gMTg5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5pbXBvcnQgd2FybmluZyBmcm9tICd3YXJuaW5nJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IGNyZWF0ZUhpc3RvcnkgZnJvbSAnaGlzdG9yeS9jcmVhdGVIYXNoSGlzdG9yeSc7XG5pbXBvcnQgUm91dGVyIGZyb20gJy4vUm91dGVyJztcblxuLyoqXG4gKiBUaGUgcHVibGljIEFQSSBmb3IgYSA8Um91dGVyPiB0aGF0IHVzZXMgd2luZG93LmxvY2F0aW9uLmhhc2guXG4gKi9cblxudmFyIEhhc2hSb3V0ZXIgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoSGFzaFJvdXRlciwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gSGFzaFJvdXRlcigpIHtcbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEhhc2hSb3V0ZXIpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfUmVhY3QkQ29tcG9uZW50LmNhbGwuYXBwbHkoX1JlYWN0JENvbXBvbmVudCwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLmhpc3RvcnkgPSBjcmVhdGVIaXN0b3J5KF90aGlzLnByb3BzKSwgX3RlbXApLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7XG4gIH1cblxuICBIYXNoUm91dGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgd2FybmluZyghdGhpcy5wcm9wcy5oaXN0b3J5LCAnPEhhc2hSb3V0ZXI+IGlnbm9yZXMgdGhlIGhpc3RvcnkgcHJvcC4gVG8gdXNlIGEgY3VzdG9tIGhpc3RvcnksICcgKyAndXNlIGBpbXBvcnQgeyBSb3V0ZXIgfWAgaW5zdGVhZCBvZiBgaW1wb3J0IHsgSGFzaFJvdXRlciBhcyBSb3V0ZXIgfWAuJyk7XG4gIH07XG5cbiAgSGFzaFJvdXRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFJvdXRlciwgeyBoaXN0b3J5OiB0aGlzLmhpc3RvcnksIGNoaWxkcmVuOiB0aGlzLnByb3BzLmNoaWxkcmVuIH0pO1xuICB9O1xuXG4gIHJldHVybiBIYXNoUm91dGVyO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5IYXNoUm91dGVyLnByb3BUeXBlcyA9IHtcbiAgYmFzZW5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGdldFVzZXJDb25maXJtYXRpb246IFByb3BUeXBlcy5mdW5jLFxuICBoYXNoVHlwZTogUHJvcFR5cGVzLm9uZU9mKFsnaGFzaGJhbmcnLCAnbm9zbGFzaCcsICdzbGFzaCddKSxcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5ub2RlXG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IEhhc2hSb3V0ZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvSGFzaFJvdXRlci5qc1xuLy8gbW9kdWxlIGlkID0gMTkwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiLy8gV3JpdHRlbiBpbiB0aGlzIHJvdW5kIGFib3V0IHdheSBmb3IgYmFiZWwtdHJhbnNmb3JtLWltcG9ydHNcbmltcG9ydCBNZW1vcnlSb3V0ZXIgZnJvbSAncmVhY3Qtcm91dGVyL2VzL01lbW9yeVJvdXRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IE1lbW9yeVJvdXRlcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtcm91dGVyLWRvbS9lcy9NZW1vcnlSb3V0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE5MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsInZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKG9iaiwga2V5cykgeyB2YXIgdGFyZ2V0ID0ge307IGZvciAodmFyIGkgaW4gb2JqKSB7IGlmIChrZXlzLmluZGV4T2YoaSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgaSkpIGNvbnRpbnVlOyB0YXJnZXRbaV0gPSBvYmpbaV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSb3V0ZSBmcm9tICcuL1JvdXRlJztcbmltcG9ydCBMaW5rIGZyb20gJy4vTGluayc7XG5cbi8qKlxuICogQSA8TGluaz4gd3JhcHBlciB0aGF0IGtub3dzIGlmIGl0J3MgXCJhY3RpdmVcIiBvciBub3QuXG4gKi9cbnZhciBOYXZMaW5rID0gZnVuY3Rpb24gTmF2TGluayhfcmVmKSB7XG4gIHZhciB0byA9IF9yZWYudG8sXG4gICAgICBleGFjdCA9IF9yZWYuZXhhY3QsXG4gICAgICBzdHJpY3QgPSBfcmVmLnN0cmljdCxcbiAgICAgIGxvY2F0aW9uID0gX3JlZi5sb2NhdGlvbixcbiAgICAgIGFjdGl2ZUNsYXNzTmFtZSA9IF9yZWYuYWN0aXZlQ2xhc3NOYW1lLFxuICAgICAgY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsXG4gICAgICBhY3RpdmVTdHlsZSA9IF9yZWYuYWN0aXZlU3R5bGUsXG4gICAgICBzdHlsZSA9IF9yZWYuc3R5bGUsXG4gICAgICBnZXRJc0FjdGl2ZSA9IF9yZWYuaXNBY3RpdmUsXG4gICAgICBhcmlhQ3VycmVudCA9IF9yZWYuYXJpYUN1cnJlbnQsXG4gICAgICByZXN0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIFsndG8nLCAnZXhhY3QnLCAnc3RyaWN0JywgJ2xvY2F0aW9uJywgJ2FjdGl2ZUNsYXNzTmFtZScsICdjbGFzc05hbWUnLCAnYWN0aXZlU3R5bGUnLCAnc3R5bGUnLCAnaXNBY3RpdmUnLCAnYXJpYUN1cnJlbnQnXSk7XG5cbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm91dGUsIHtcbiAgICBwYXRoOiAodHlwZW9mIHRvID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih0bykpID09PSAnb2JqZWN0JyA/IHRvLnBhdGhuYW1lIDogdG8sXG4gICAgZXhhY3Q6IGV4YWN0LFxuICAgIHN0cmljdDogc3RyaWN0LFxuICAgIGxvY2F0aW9uOiBsb2NhdGlvbixcbiAgICBjaGlsZHJlbjogZnVuY3Rpb24gY2hpbGRyZW4oX3JlZjIpIHtcbiAgICAgIHZhciBsb2NhdGlvbiA9IF9yZWYyLmxvY2F0aW9uLFxuICAgICAgICAgIG1hdGNoID0gX3JlZjIubWF0Y2g7XG5cbiAgICAgIHZhciBpc0FjdGl2ZSA9ICEhKGdldElzQWN0aXZlID8gZ2V0SXNBY3RpdmUobWF0Y2gsIGxvY2F0aW9uKSA6IG1hdGNoKTtcblxuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGluaywgX2V4dGVuZHMoe1xuICAgICAgICB0bzogdG8sXG4gICAgICAgIGNsYXNzTmFtZTogaXNBY3RpdmUgPyBbY2xhc3NOYW1lLCBhY3RpdmVDbGFzc05hbWVdLmZpbHRlcihmdW5jdGlvbiAoaSkge1xuICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9KS5qb2luKCcgJykgOiBjbGFzc05hbWUsXG4gICAgICAgIHN0eWxlOiBpc0FjdGl2ZSA/IF9leHRlbmRzKHt9LCBzdHlsZSwgYWN0aXZlU3R5bGUpIDogc3R5bGUsXG4gICAgICAgICdhcmlhLWN1cnJlbnQnOiBpc0FjdGl2ZSAmJiBhcmlhQ3VycmVudFxuICAgICAgfSwgcmVzdCkpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5OYXZMaW5rLnByb3BUeXBlcyA9IHtcbiAgdG86IExpbmsucHJvcFR5cGVzLnRvLFxuICBleGFjdDogUHJvcFR5cGVzLmJvb2wsXG4gIHN0cmljdDogUHJvcFR5cGVzLmJvb2wsXG4gIGxvY2F0aW9uOiBQcm9wVHlwZXMub2JqZWN0LFxuICBhY3RpdmVDbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgYWN0aXZlU3R5bGU6IFByb3BUeXBlcy5vYmplY3QsXG4gIHN0eWxlOiBQcm9wVHlwZXMub2JqZWN0LFxuICBpc0FjdGl2ZTogUHJvcFR5cGVzLmZ1bmMsXG4gIGFyaWFDdXJyZW50OiBQcm9wVHlwZXMub25lT2YoWydwYWdlJywgJ3N0ZXAnLCAnbG9jYXRpb24nLCAndHJ1ZSddKVxufTtcblxuTmF2TGluay5kZWZhdWx0UHJvcHMgPSB7XG4gIGFjdGl2ZUNsYXNzTmFtZTogJ2FjdGl2ZScsXG4gIGFyaWFDdXJyZW50OiAndHJ1ZSdcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE5hdkxpbms7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvTmF2TGluay5qc1xuLy8gbW9kdWxlIGlkID0gMTkyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiLy8gV3JpdHRlbiBpbiB0aGlzIHJvdW5kIGFib3V0IHdheSBmb3IgYmFiZWwtdHJhbnNmb3JtLWltcG9ydHNcbmltcG9ydCBQcm9tcHQgZnJvbSAncmVhY3Qtcm91dGVyL2VzL1Byb21wdCc7XG5cbmV4cG9ydCBkZWZhdWx0IFByb21wdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtcm91dGVyLWRvbS9lcy9Qcm9tcHQuanNcbi8vIG1vZHVsZSBpZCA9IDE5M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIi8vIFdyaXR0ZW4gaW4gdGhpcyByb3VuZCBhYm91dCB3YXkgZm9yIGJhYmVsLXRyYW5zZm9ybS1pbXBvcnRzXG5pbXBvcnQgUmVkaXJlY3QgZnJvbSAncmVhY3Qtcm91dGVyL2VzL1JlZGlyZWN0JztcblxuZXhwb3J0IGRlZmF1bHQgUmVkaXJlY3Q7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvUmVkaXJlY3QuanNcbi8vIG1vZHVsZSBpZCA9IDE5NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIi8vIFdyaXR0ZW4gaW4gdGhpcyByb3VuZCBhYm91dCB3YXkgZm9yIGJhYmVsLXRyYW5zZm9ybS1pbXBvcnRzXG5pbXBvcnQgU3RhdGljUm91dGVyIGZyb20gJ3JlYWN0LXJvdXRlci9lcy9TdGF0aWNSb3V0ZXInO1xuXG5leHBvcnQgZGVmYXVsdCBTdGF0aWNSb3V0ZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvU3RhdGljUm91dGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxOTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIvLyBXcml0dGVuIGluIHRoaXMgcm91bmQgYWJvdXQgd2F5IGZvciBiYWJlbC10cmFuc2Zvcm0taW1wb3J0c1xuaW1wb3J0IFN3aXRjaCBmcm9tICdyZWFjdC1yb3V0ZXIvZXMvU3dpdGNoJztcblxuZXhwb3J0IGRlZmF1bHQgU3dpdGNoO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXItZG9tL2VzL1N3aXRjaC5qc1xuLy8gbW9kdWxlIGlkID0gMTk2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiLy8gV3JpdHRlbiBpbiB0aGlzIHJvdW5kIGFib3V0IHdheSBmb3IgYmFiZWwtdHJhbnNmb3JtLWltcG9ydHNcbmltcG9ydCBtYXRjaFBhdGggZnJvbSAncmVhY3Qtcm91dGVyL2VzL21hdGNoUGF0aCc7XG5cbmV4cG9ydCBkZWZhdWx0IG1hdGNoUGF0aDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtcm91dGVyLWRvbS9lcy9tYXRjaFBhdGguanNcbi8vIG1vZHVsZSBpZCA9IDE5N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIi8vIFdyaXR0ZW4gaW4gdGhpcyByb3VuZCBhYm91dCB3YXkgZm9yIGJhYmVsLXRyYW5zZm9ybS1pbXBvcnRzXG5pbXBvcnQgd2l0aFJvdXRlciBmcm9tICdyZWFjdC1yb3V0ZXIvZXMvd2l0aFJvdXRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhSb3V0ZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvd2l0aFJvdXRlci5qc1xuLy8gbW9kdWxlIGlkID0gMTk4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5pbXBvcnQgd2FybmluZyBmcm9tICd3YXJuaW5nJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IGNyZWF0ZUhpc3RvcnkgZnJvbSAnaGlzdG9yeS9jcmVhdGVNZW1vcnlIaXN0b3J5JztcbmltcG9ydCBSb3V0ZXIgZnJvbSAnLi9Sb3V0ZXInO1xuXG4vKipcbiAqIFRoZSBwdWJsaWMgQVBJIGZvciBhIDxSb3V0ZXI+IHRoYXQgc3RvcmVzIGxvY2F0aW9uIGluIG1lbW9yeS5cbiAqL1xuXG52YXIgTWVtb3J5Um91dGVyID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKE1lbW9yeVJvdXRlciwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gTWVtb3J5Um91dGVyKCkge1xuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWVtb3J5Um91dGVyKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX1JlYWN0JENvbXBvbmVudC5jYWxsLmFwcGx5KF9SZWFjdCRDb21wb25lbnQsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5oaXN0b3J5ID0gY3JlYXRlSGlzdG9yeShfdGhpcy5wcm9wcyksIF90ZW1wKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgTWVtb3J5Um91dGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgd2FybmluZyghdGhpcy5wcm9wcy5oaXN0b3J5LCAnPE1lbW9yeVJvdXRlcj4gaWdub3JlcyB0aGUgaGlzdG9yeSBwcm9wLiBUbyB1c2UgYSBjdXN0b20gaGlzdG9yeSwgJyArICd1c2UgYGltcG9ydCB7IFJvdXRlciB9YCBpbnN0ZWFkIG9mIGBpbXBvcnQgeyBNZW1vcnlSb3V0ZXIgYXMgUm91dGVyIH1gLicpO1xuICB9O1xuXG4gIE1lbW9yeVJvdXRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFJvdXRlciwgeyBoaXN0b3J5OiB0aGlzLmhpc3RvcnksIGNoaWxkcmVuOiB0aGlzLnByb3BzLmNoaWxkcmVuIH0pO1xuICB9O1xuXG4gIHJldHVybiBNZW1vcnlSb3V0ZXI7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbk1lbW9yeVJvdXRlci5wcm9wVHlwZXMgPSB7XG4gIGluaXRpYWxFbnRyaWVzOiBQcm9wVHlwZXMuYXJyYXksXG4gIGluaXRpYWxJbmRleDogUHJvcFR5cGVzLm51bWJlcixcbiAgZ2V0VXNlckNvbmZpcm1hdGlvbjogUHJvcFR5cGVzLmZ1bmMsXG4gIGtleUxlbmd0aDogUHJvcFR5cGVzLm51bWJlcixcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5ub2RlXG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IE1lbW9yeVJvdXRlcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtcm91dGVyL2VzL01lbW9yeVJvdXRlci5qc1xuLy8gbW9kdWxlIGlkID0gMTk5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBpbnZhcmlhbnQgZnJvbSAnaW52YXJpYW50JztcblxuLyoqXG4gKiBUaGUgcHVibGljIEFQSSBmb3IgcHJvbXB0aW5nIHRoZSB1c2VyIGJlZm9yZSBuYXZpZ2F0aW5nIGF3YXlcbiAqIGZyb20gYSBzY3JlZW4gd2l0aCBhIGNvbXBvbmVudC5cbiAqL1xuXG52YXIgUHJvbXB0ID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFByb21wdCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gUHJvbXB0KCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm9tcHQpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9SZWFjdCRDb21wb25lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBQcm9tcHQucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uIGVuYWJsZShtZXNzYWdlKSB7XG4gICAgaWYgKHRoaXMudW5ibG9jaykgdGhpcy51bmJsb2NrKCk7XG5cbiAgICB0aGlzLnVuYmxvY2sgPSB0aGlzLmNvbnRleHQucm91dGVyLmhpc3RvcnkuYmxvY2sobWVzc2FnZSk7XG4gIH07XG5cbiAgUHJvbXB0LnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICBpZiAodGhpcy51bmJsb2NrKSB7XG4gICAgICB0aGlzLnVuYmxvY2soKTtcbiAgICAgIHRoaXMudW5ibG9jayA9IG51bGw7XG4gICAgfVxuICB9O1xuXG4gIFByb21wdC5wcm90b3R5cGUuY29tcG9uZW50V2lsbE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIGludmFyaWFudCh0aGlzLmNvbnRleHQucm91dGVyLCAnWW91IHNob3VsZCBub3QgdXNlIDxQcm9tcHQ+IG91dHNpZGUgYSA8Um91dGVyPicpO1xuXG4gICAgaWYgKHRoaXMucHJvcHMud2hlbikgdGhpcy5lbmFibGUodGhpcy5wcm9wcy5tZXNzYWdlKTtcbiAgfTtcblxuICBQcm9tcHQucHJvdG90eXBlLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgIGlmIChuZXh0UHJvcHMud2hlbikge1xuICAgICAgaWYgKCF0aGlzLnByb3BzLndoZW4gfHwgdGhpcy5wcm9wcy5tZXNzYWdlICE9PSBuZXh0UHJvcHMubWVzc2FnZSkgdGhpcy5lbmFibGUobmV4dFByb3BzLm1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRpc2FibGUoKTtcbiAgICB9XG4gIH07XG5cbiAgUHJvbXB0LnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMuZGlzYWJsZSgpO1xuICB9O1xuXG4gIFByb21wdC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIHJldHVybiBQcm9tcHQ7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cblByb21wdC5wcm9wVHlwZXMgPSB7XG4gIHdoZW46IFByb3BUeXBlcy5ib29sLFxuICBtZXNzYWdlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuZnVuYywgUHJvcFR5cGVzLnN0cmluZ10pLmlzUmVxdWlyZWRcbn07XG5Qcm9tcHQuZGVmYXVsdFByb3BzID0ge1xuICB3aGVuOiB0cnVlXG59O1xuUHJvbXB0LmNvbnRleHRUeXBlcyA9IHtcbiAgcm91dGVyOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgIGhpc3Rvcnk6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICBibG9jazogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxuICAgIH0pLmlzUmVxdWlyZWRcbiAgfSkuaXNSZXF1aXJlZFxufTtcblxuXG5leHBvcnQgZGVmYXVsdCBQcm9tcHQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci9lcy9Qcm9tcHQuanNcbi8vIG1vZHVsZSBpZCA9IDIwMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgd2FybmluZyBmcm9tICd3YXJuaW5nJztcbmltcG9ydCBpbnZhcmlhbnQgZnJvbSAnaW52YXJpYW50JztcbmltcG9ydCB7IGNyZWF0ZUxvY2F0aW9uLCBsb2NhdGlvbnNBcmVFcXVhbCB9IGZyb20gJ2hpc3RvcnknO1xuXG4vKipcbiAqIFRoZSBwdWJsaWMgQVBJIGZvciB1cGRhdGluZyB0aGUgbG9jYXRpb24gcHJvZ3JhbW1hdGljYWxseVxuICogd2l0aCBhIGNvbXBvbmVudC5cbiAqL1xuXG52YXIgUmVkaXJlY3QgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoUmVkaXJlY3QsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFJlZGlyZWN0KCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWRpcmVjdCk7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX1JlYWN0JENvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIFJlZGlyZWN0LnByb3RvdHlwZS5pc1N0YXRpYyA9IGZ1bmN0aW9uIGlzU3RhdGljKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHQucm91dGVyICYmIHRoaXMuY29udGV4dC5yb3V0ZXIuc3RhdGljQ29udGV4dDtcbiAgfTtcblxuICBSZWRpcmVjdC5wcm90b3R5cGUuY29tcG9uZW50V2lsbE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIGludmFyaWFudCh0aGlzLmNvbnRleHQucm91dGVyLCAnWW91IHNob3VsZCBub3QgdXNlIDxSZWRpcmVjdD4gb3V0c2lkZSBhIDxSb3V0ZXI+Jyk7XG5cbiAgICBpZiAodGhpcy5pc1N0YXRpYygpKSB0aGlzLnBlcmZvcm0oKTtcbiAgfTtcblxuICBSZWRpcmVjdC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBpZiAoIXRoaXMuaXNTdGF0aWMoKSkgdGhpcy5wZXJmb3JtKCk7XG4gIH07XG5cbiAgUmVkaXJlY3QucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICB2YXIgcHJldlRvID0gY3JlYXRlTG9jYXRpb24ocHJldlByb3BzLnRvKTtcbiAgICB2YXIgbmV4dFRvID0gY3JlYXRlTG9jYXRpb24odGhpcy5wcm9wcy50byk7XG5cbiAgICBpZiAobG9jYXRpb25zQXJlRXF1YWwocHJldlRvLCBuZXh0VG8pKSB7XG4gICAgICB3YXJuaW5nKGZhbHNlLCAnWW91IHRyaWVkIHRvIHJlZGlyZWN0IHRvIHRoZSBzYW1lIHJvdXRlIHlvdVxcJ3JlIGN1cnJlbnRseSBvbjogJyArICgnXCInICsgbmV4dFRvLnBhdGhuYW1lICsgbmV4dFRvLnNlYXJjaCArICdcIicpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnBlcmZvcm0oKTtcbiAgfTtcblxuICBSZWRpcmVjdC5wcm90b3R5cGUucGVyZm9ybSA9IGZ1bmN0aW9uIHBlcmZvcm0oKSB7XG4gICAgdmFyIGhpc3RvcnkgPSB0aGlzLmNvbnRleHQucm91dGVyLmhpc3Rvcnk7XG4gICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgIHB1c2ggPSBfcHJvcHMucHVzaCxcbiAgICAgICAgdG8gPSBfcHJvcHMudG87XG5cblxuICAgIGlmIChwdXNoKSB7XG4gICAgICBoaXN0b3J5LnB1c2godG8pO1xuICAgIH0gZWxzZSB7XG4gICAgICBoaXN0b3J5LnJlcGxhY2UodG8pO1xuICAgIH1cbiAgfTtcblxuICBSZWRpcmVjdC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIHJldHVybiBSZWRpcmVjdDtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxuUmVkaXJlY3QucHJvcFR5cGVzID0ge1xuICBwdXNoOiBQcm9wVHlwZXMuYm9vbCxcbiAgZnJvbTogUHJvcFR5cGVzLnN0cmluZyxcbiAgdG86IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5vYmplY3RdKS5pc1JlcXVpcmVkXG59O1xuUmVkaXJlY3QuZGVmYXVsdFByb3BzID0ge1xuICBwdXNoOiBmYWxzZVxufTtcblJlZGlyZWN0LmNvbnRleHRUeXBlcyA9IHtcbiAgcm91dGVyOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgIGhpc3Rvcnk6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICBwdXNoOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgICAgcmVwbGFjZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxuICAgIH0pLmlzUmVxdWlyZWQsXG4gICAgc3RhdGljQ29udGV4dDogUHJvcFR5cGVzLm9iamVjdFxuICB9KS5pc1JlcXVpcmVkXG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IFJlZGlyZWN0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXIvZXMvUmVkaXJlY3QuanNcbi8vIG1vZHVsZSBpZCA9IDIwMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsInZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhvYmosIGtleXMpIHsgdmFyIHRhcmdldCA9IHt9OyBmb3IgKHZhciBpIGluIG9iaikgeyBpZiAoa2V5cy5pbmRleE9mKGkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGkpKSBjb250aW51ZTsgdGFyZ2V0W2ldID0gb2JqW2ldOyB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5pbXBvcnQgd2FybmluZyBmcm9tICd3YXJuaW5nJztcbmltcG9ydCBpbnZhcmlhbnQgZnJvbSAnaW52YXJpYW50JztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHsgYWRkTGVhZGluZ1NsYXNoLCBjcmVhdGVQYXRoLCBwYXJzZVBhdGggfSBmcm9tICdoaXN0b3J5L1BhdGhVdGlscyc7XG5pbXBvcnQgUm91dGVyIGZyb20gJy4vUm91dGVyJztcblxudmFyIG5vcm1hbGl6ZUxvY2F0aW9uID0gZnVuY3Rpb24gbm9ybWFsaXplTG9jYXRpb24ob2JqZWN0KSB7XG4gIHZhciBfb2JqZWN0JHBhdGhuYW1lID0gb2JqZWN0LnBhdGhuYW1lLFxuICAgICAgcGF0aG5hbWUgPSBfb2JqZWN0JHBhdGhuYW1lID09PSB1bmRlZmluZWQgPyAnLycgOiBfb2JqZWN0JHBhdGhuYW1lLFxuICAgICAgX29iamVjdCRzZWFyY2ggPSBvYmplY3Quc2VhcmNoLFxuICAgICAgc2VhcmNoID0gX29iamVjdCRzZWFyY2ggPT09IHVuZGVmaW5lZCA/ICcnIDogX29iamVjdCRzZWFyY2gsXG4gICAgICBfb2JqZWN0JGhhc2ggPSBvYmplY3QuaGFzaCxcbiAgICAgIGhhc2ggPSBfb2JqZWN0JGhhc2ggPT09IHVuZGVmaW5lZCA/ICcnIDogX29iamVjdCRoYXNoO1xuXG5cbiAgcmV0dXJuIHtcbiAgICBwYXRobmFtZTogcGF0aG5hbWUsXG4gICAgc2VhcmNoOiBzZWFyY2ggPT09ICc/JyA/ICcnIDogc2VhcmNoLFxuICAgIGhhc2g6IGhhc2ggPT09ICcjJyA/ICcnIDogaGFzaFxuICB9O1xufTtcblxudmFyIGFkZEJhc2VuYW1lID0gZnVuY3Rpb24gYWRkQmFzZW5hbWUoYmFzZW5hbWUsIGxvY2F0aW9uKSB7XG4gIGlmICghYmFzZW5hbWUpIHJldHVybiBsb2NhdGlvbjtcblxuICByZXR1cm4gX2V4dGVuZHMoe30sIGxvY2F0aW9uLCB7XG4gICAgcGF0aG5hbWU6IGFkZExlYWRpbmdTbGFzaChiYXNlbmFtZSkgKyBsb2NhdGlvbi5wYXRobmFtZVxuICB9KTtcbn07XG5cbnZhciBzdHJpcEJhc2VuYW1lID0gZnVuY3Rpb24gc3RyaXBCYXNlbmFtZShiYXNlbmFtZSwgbG9jYXRpb24pIHtcbiAgaWYgKCFiYXNlbmFtZSkgcmV0dXJuIGxvY2F0aW9uO1xuXG4gIHZhciBiYXNlID0gYWRkTGVhZGluZ1NsYXNoKGJhc2VuYW1lKTtcblxuICBpZiAobG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZihiYXNlKSAhPT0gMCkgcmV0dXJuIGxvY2F0aW9uO1xuXG4gIHJldHVybiBfZXh0ZW5kcyh7fSwgbG9jYXRpb24sIHtcbiAgICBwYXRobmFtZTogbG9jYXRpb24ucGF0aG5hbWUuc3Vic3RyKGJhc2UubGVuZ3RoKVxuICB9KTtcbn07XG5cbnZhciBjcmVhdGVMb2NhdGlvbiA9IGZ1bmN0aW9uIGNyZWF0ZUxvY2F0aW9uKGxvY2F0aW9uKSB7XG4gIHJldHVybiB0eXBlb2YgbG9jYXRpb24gPT09ICdzdHJpbmcnID8gcGFyc2VQYXRoKGxvY2F0aW9uKSA6IG5vcm1hbGl6ZUxvY2F0aW9uKGxvY2F0aW9uKTtcbn07XG5cbnZhciBjcmVhdGVVUkwgPSBmdW5jdGlvbiBjcmVhdGVVUkwobG9jYXRpb24pIHtcbiAgcmV0dXJuIHR5cGVvZiBsb2NhdGlvbiA9PT0gJ3N0cmluZycgPyBsb2NhdGlvbiA6IGNyZWF0ZVBhdGgobG9jYXRpb24pO1xufTtcblxudmFyIHN0YXRpY0hhbmRsZXIgPSBmdW5jdGlvbiBzdGF0aWNIYW5kbGVyKG1ldGhvZE5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpbnZhcmlhbnQoZmFsc2UsICdZb3UgY2Fubm90ICVzIHdpdGggPFN0YXRpY1JvdXRlcj4nLCBtZXRob2ROYW1lKTtcbiAgfTtcbn07XG5cbnZhciBub29wID0gZnVuY3Rpb24gbm9vcCgpIHt9O1xuXG4vKipcbiAqIFRoZSBwdWJsaWMgdG9wLWxldmVsIEFQSSBmb3IgYSBcInN0YXRpY1wiIDxSb3V0ZXI+LCBzby1jYWxsZWQgYmVjYXVzZSBpdFxuICogY2FuJ3QgYWN0dWFsbHkgY2hhbmdlIHRoZSBjdXJyZW50IGxvY2F0aW9uLiBJbnN0ZWFkLCBpdCBqdXN0IHJlY29yZHNcbiAqIGxvY2F0aW9uIGNoYW5nZXMgaW4gYSBjb250ZXh0IG9iamVjdC4gVXNlZnVsIG1haW5seSBpbiB0ZXN0aW5nIGFuZFxuICogc2VydmVyLXJlbmRlcmluZyBzY2VuYXJpb3MuXG4gKi9cblxudmFyIFN0YXRpY1JvdXRlciA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhTdGF0aWNSb3V0ZXIsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFN0YXRpY1JvdXRlcigpIHtcbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YXRpY1JvdXRlcik7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9SZWFjdCRDb21wb25lbnQuY2FsbC5hcHBseShfUmVhY3QkQ29tcG9uZW50LCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuY3JlYXRlSHJlZiA9IGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgICByZXR1cm4gYWRkTGVhZGluZ1NsYXNoKF90aGlzLnByb3BzLmJhc2VuYW1lICsgY3JlYXRlVVJMKHBhdGgpKTtcbiAgICB9LCBfdGhpcy5oYW5kbGVQdXNoID0gZnVuY3Rpb24gKGxvY2F0aW9uKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHMgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICBiYXNlbmFtZSA9IF90aGlzJHByb3BzLmJhc2VuYW1lLFxuICAgICAgICAgIGNvbnRleHQgPSBfdGhpcyRwcm9wcy5jb250ZXh0O1xuXG4gICAgICBjb250ZXh0LmFjdGlvbiA9ICdQVVNIJztcbiAgICAgIGNvbnRleHQubG9jYXRpb24gPSBhZGRCYXNlbmFtZShiYXNlbmFtZSwgY3JlYXRlTG9jYXRpb24obG9jYXRpb24pKTtcbiAgICAgIGNvbnRleHQudXJsID0gY3JlYXRlVVJMKGNvbnRleHQubG9jYXRpb24pO1xuICAgIH0sIF90aGlzLmhhbmRsZVJlcGxhY2UgPSBmdW5jdGlvbiAobG9jYXRpb24pIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICBiYXNlbmFtZSA9IF90aGlzJHByb3BzMi5iYXNlbmFtZSxcbiAgICAgICAgICBjb250ZXh0ID0gX3RoaXMkcHJvcHMyLmNvbnRleHQ7XG5cbiAgICAgIGNvbnRleHQuYWN0aW9uID0gJ1JFUExBQ0UnO1xuICAgICAgY29udGV4dC5sb2NhdGlvbiA9IGFkZEJhc2VuYW1lKGJhc2VuYW1lLCBjcmVhdGVMb2NhdGlvbihsb2NhdGlvbikpO1xuICAgICAgY29udGV4dC51cmwgPSBjcmVhdGVVUkwoY29udGV4dC5sb2NhdGlvbik7XG4gICAgfSwgX3RoaXMuaGFuZGxlTGlzdGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIG5vb3A7XG4gICAgfSwgX3RoaXMuaGFuZGxlQmxvY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbm9vcDtcbiAgICB9LCBfdGVtcCksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gIFN0YXRpY1JvdXRlci5wcm90b3R5cGUuZ2V0Q2hpbGRDb250ZXh0ID0gZnVuY3Rpb24gZ2V0Q2hpbGRDb250ZXh0KCkge1xuICAgIHJldHVybiB7XG4gICAgICByb3V0ZXI6IHtcbiAgICAgICAgc3RhdGljQ29udGV4dDogdGhpcy5wcm9wcy5jb250ZXh0XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICBTdGF0aWNSb3V0ZXIucHJvdG90eXBlLmNvbXBvbmVudFdpbGxNb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICB3YXJuaW5nKCF0aGlzLnByb3BzLmhpc3RvcnksICc8U3RhdGljUm91dGVyPiBpZ25vcmVzIHRoZSBoaXN0b3J5IHByb3AuIFRvIHVzZSBhIGN1c3RvbSBoaXN0b3J5LCAnICsgJ3VzZSBgaW1wb3J0IHsgUm91dGVyIH1gIGluc3RlYWQgb2YgYGltcG9ydCB7IFN0YXRpY1JvdXRlciBhcyBSb3V0ZXIgfWAuJyk7XG4gIH07XG5cbiAgU3RhdGljUm91dGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgIGJhc2VuYW1lID0gX3Byb3BzLmJhc2VuYW1lLFxuICAgICAgICBjb250ZXh0ID0gX3Byb3BzLmNvbnRleHQsXG4gICAgICAgIGxvY2F0aW9uID0gX3Byb3BzLmxvY2F0aW9uLFxuICAgICAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcHJvcHMsIFsnYmFzZW5hbWUnLCAnY29udGV4dCcsICdsb2NhdGlvbiddKTtcblxuICAgIHZhciBoaXN0b3J5ID0ge1xuICAgICAgY3JlYXRlSHJlZjogdGhpcy5jcmVhdGVIcmVmLFxuICAgICAgYWN0aW9uOiAnUE9QJyxcbiAgICAgIGxvY2F0aW9uOiBzdHJpcEJhc2VuYW1lKGJhc2VuYW1lLCBjcmVhdGVMb2NhdGlvbihsb2NhdGlvbikpLFxuICAgICAgcHVzaDogdGhpcy5oYW5kbGVQdXNoLFxuICAgICAgcmVwbGFjZTogdGhpcy5oYW5kbGVSZXBsYWNlLFxuICAgICAgZ286IHN0YXRpY0hhbmRsZXIoJ2dvJyksXG4gICAgICBnb0JhY2s6IHN0YXRpY0hhbmRsZXIoJ2dvQmFjaycpLFxuICAgICAgZ29Gb3J3YXJkOiBzdGF0aWNIYW5kbGVyKCdnb0ZvcndhcmQnKSxcbiAgICAgIGxpc3RlbjogdGhpcy5oYW5kbGVMaXN0ZW4sXG4gICAgICBibG9jazogdGhpcy5oYW5kbGVCbG9ja1xuICAgIH07XG5cbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSb3V0ZXIsIF9leHRlbmRzKHt9LCBwcm9wcywgeyBoaXN0b3J5OiBoaXN0b3J5IH0pKTtcbiAgfTtcblxuICByZXR1cm4gU3RhdGljUm91dGVyO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5TdGF0aWNSb3V0ZXIucHJvcFR5cGVzID0ge1xuICBiYXNlbmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgY29udGV4dDogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICBsb2NhdGlvbjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLm9iamVjdF0pXG59O1xuU3RhdGljUm91dGVyLmRlZmF1bHRQcm9wcyA9IHtcbiAgYmFzZW5hbWU6ICcnLFxuICBsb2NhdGlvbjogJy8nXG59O1xuU3RhdGljUm91dGVyLmNoaWxkQ29udGV4dFR5cGVzID0ge1xuICByb3V0ZXI6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZFxufTtcblxuXG5leHBvcnQgZGVmYXVsdCBTdGF0aWNSb3V0ZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci9lcy9TdGF0aWNSb3V0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDIwMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgd2FybmluZyBmcm9tICd3YXJuaW5nJztcbmltcG9ydCBpbnZhcmlhbnQgZnJvbSAnaW52YXJpYW50JztcbmltcG9ydCBtYXRjaFBhdGggZnJvbSAnLi9tYXRjaFBhdGgnO1xuXG4vKipcbiAqIFRoZSBwdWJsaWMgQVBJIGZvciByZW5kZXJpbmcgdGhlIGZpcnN0IDxSb3V0ZT4gdGhhdCBtYXRjaGVzLlxuICovXG5cbnZhciBTd2l0Y2ggPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoU3dpdGNoLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBTd2l0Y2goKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN3aXRjaCk7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX1JlYWN0JENvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIFN3aXRjaC5wcm90b3R5cGUuY29tcG9uZW50V2lsbE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIGludmFyaWFudCh0aGlzLmNvbnRleHQucm91dGVyLCAnWW91IHNob3VsZCBub3QgdXNlIDxTd2l0Y2g+IG91dHNpZGUgYSA8Um91dGVyPicpO1xuICB9O1xuXG4gIFN3aXRjaC5wcm90b3R5cGUuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgd2FybmluZyghKG5leHRQcm9wcy5sb2NhdGlvbiAmJiAhdGhpcy5wcm9wcy5sb2NhdGlvbiksICc8U3dpdGNoPiBlbGVtZW50cyBzaG91bGQgbm90IGNoYW5nZSBmcm9tIHVuY29udHJvbGxlZCB0byBjb250cm9sbGVkIChvciB2aWNlIHZlcnNhKS4gWW91IGluaXRpYWxseSB1c2VkIG5vIFwibG9jYXRpb25cIiBwcm9wIGFuZCB0aGVuIHByb3ZpZGVkIG9uZSBvbiBhIHN1YnNlcXVlbnQgcmVuZGVyLicpO1xuXG4gICAgd2FybmluZyghKCFuZXh0UHJvcHMubG9jYXRpb24gJiYgdGhpcy5wcm9wcy5sb2NhdGlvbiksICc8U3dpdGNoPiBlbGVtZW50cyBzaG91bGQgbm90IGNoYW5nZSBmcm9tIGNvbnRyb2xsZWQgdG8gdW5jb250cm9sbGVkIChvciB2aWNlIHZlcnNhKS4gWW91IHByb3ZpZGVkIGEgXCJsb2NhdGlvblwiIHByb3AgaW5pdGlhbGx5IGJ1dCBvbWl0dGVkIGl0IG9uIGEgc3Vic2VxdWVudCByZW5kZXIuJyk7XG4gIH07XG5cbiAgU3dpdGNoLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIHJvdXRlID0gdGhpcy5jb250ZXh0LnJvdXRlci5yb3V0ZTtcbiAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLnByb3BzLmNoaWxkcmVuO1xuXG4gICAgdmFyIGxvY2F0aW9uID0gdGhpcy5wcm9wcy5sb2NhdGlvbiB8fCByb3V0ZS5sb2NhdGlvbjtcblxuICAgIHZhciBtYXRjaCA9IHZvaWQgMCxcbiAgICAgICAgY2hpbGQgPSB2b2lkIDA7XG4gICAgUmVhY3QuQ2hpbGRyZW4uZm9yRWFjaChjaGlsZHJlbiwgZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgIGlmICghUmVhY3QuaXNWYWxpZEVsZW1lbnQoZWxlbWVudCkpIHJldHVybjtcblxuICAgICAgdmFyIF9lbGVtZW50JHByb3BzID0gZWxlbWVudC5wcm9wcyxcbiAgICAgICAgICBwYXRoUHJvcCA9IF9lbGVtZW50JHByb3BzLnBhdGgsXG4gICAgICAgICAgZXhhY3QgPSBfZWxlbWVudCRwcm9wcy5leGFjdCxcbiAgICAgICAgICBzdHJpY3QgPSBfZWxlbWVudCRwcm9wcy5zdHJpY3QsXG4gICAgICAgICAgc2Vuc2l0aXZlID0gX2VsZW1lbnQkcHJvcHMuc2Vuc2l0aXZlLFxuICAgICAgICAgIGZyb20gPSBfZWxlbWVudCRwcm9wcy5mcm9tO1xuXG4gICAgICB2YXIgcGF0aCA9IHBhdGhQcm9wIHx8IGZyb207XG5cbiAgICAgIGlmIChtYXRjaCA9PSBudWxsKSB7XG4gICAgICAgIGNoaWxkID0gZWxlbWVudDtcbiAgICAgICAgbWF0Y2ggPSBwYXRoID8gbWF0Y2hQYXRoKGxvY2F0aW9uLnBhdGhuYW1lLCB7IHBhdGg6IHBhdGgsIGV4YWN0OiBleGFjdCwgc3RyaWN0OiBzdHJpY3QsIHNlbnNpdGl2ZTogc2Vuc2l0aXZlIH0pIDogcm91dGUubWF0Y2g7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbWF0Y2ggPyBSZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGQsIHsgbG9jYXRpb246IGxvY2F0aW9uLCBjb21wdXRlZE1hdGNoOiBtYXRjaCB9KSA6IG51bGw7XG4gIH07XG5cbiAgcmV0dXJuIFN3aXRjaDtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxuU3dpdGNoLmNvbnRleHRUeXBlcyA9IHtcbiAgcm91dGVyOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgIHJvdXRlOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWRcbiAgfSkuaXNSZXF1aXJlZFxufTtcblN3aXRjaC5wcm9wVHlwZXMgPSB7XG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZSxcbiAgbG9jYXRpb246IFByb3BUeXBlcy5vYmplY3Rcbn07XG5cblxuZXhwb3J0IGRlZmF1bHQgU3dpdGNoO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXIvZXMvU3dpdGNoLmpzXG4vLyBtb2R1bGUgaWQgPSAyMDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJ2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMob2JqLCBrZXlzKSB7IHZhciB0YXJnZXQgPSB7fTsgZm9yICh2YXIgaSBpbiBvYmopIHsgaWYgKGtleXMuaW5kZXhPZihpKSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBpKSkgY29udGludWU7IHRhcmdldFtpXSA9IG9ialtpXTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IGhvaXN0U3RhdGljcyBmcm9tICdob2lzdC1ub24tcmVhY3Qtc3RhdGljcyc7XG5pbXBvcnQgUm91dGUgZnJvbSAnLi9Sb3V0ZSc7XG5cbi8qKlxuICogQSBwdWJsaWMgaGlnaGVyLW9yZGVyIGNvbXBvbmVudCB0byBhY2Nlc3MgdGhlIGltcGVyYXRpdmUgQVBJXG4gKi9cbnZhciB3aXRoUm91dGVyID0gZnVuY3Rpb24gd2l0aFJvdXRlcihDb21wb25lbnQpIHtcbiAgdmFyIEMgPSBmdW5jdGlvbiBDKHByb3BzKSB7XG4gICAgdmFyIHdyYXBwZWRDb21wb25lbnRSZWYgPSBwcm9wcy53cmFwcGVkQ29tcG9uZW50UmVmLFxuICAgICAgICByZW1haW5pbmdQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhwcm9wcywgWyd3cmFwcGVkQ29tcG9uZW50UmVmJ10pO1xuXG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm91dGUsIHsgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIocm91dGVDb21wb25lbnRQcm9wcykge1xuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDb21wb25lbnQsIF9leHRlbmRzKHt9LCByZW1haW5pbmdQcm9wcywgcm91dGVDb21wb25lbnRQcm9wcywgeyByZWY6IHdyYXBwZWRDb21wb25lbnRSZWYgfSkpO1xuICAgICAgfSB9KTtcbiAgfTtcblxuICBDLmRpc3BsYXlOYW1lID0gJ3dpdGhSb3V0ZXIoJyArIChDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgQ29tcG9uZW50Lm5hbWUpICsgJyknO1xuICBDLldyYXBwZWRDb21wb25lbnQgPSBDb21wb25lbnQ7XG4gIEMucHJvcFR5cGVzID0ge1xuICAgIHdyYXBwZWRDb21wb25lbnRSZWY6IFByb3BUeXBlcy5mdW5jXG4gIH07XG5cbiAgcmV0dXJuIGhvaXN0U3RhdGljcyhDLCBDb21wb25lbnQpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgd2l0aFJvdXRlcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtcm91dGVyL2VzL3dpdGhSb3V0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDIwNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUsIFlhaG9vISBJbmMuXG4gKiBDb3B5cmlnaHRzIGxpY2Vuc2VkIHVuZGVyIHRoZSBOZXcgQlNEIExpY2Vuc2UuIFNlZSB0aGUgYWNjb21wYW55aW5nIExJQ0VOU0UgZmlsZSBmb3IgdGVybXMuXG4gKi9cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gICAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICAgIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG4gICAgKGdsb2JhbC5ob2lzdE5vblJlYWN0U3RhdGljcyA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIFxuICAgIHZhciBSRUFDVF9TVEFUSUNTID0ge1xuICAgICAgICBjaGlsZENvbnRleHRUeXBlczogdHJ1ZSxcbiAgICAgICAgY29udGV4dFR5cGVzOiB0cnVlLFxuICAgICAgICBkZWZhdWx0UHJvcHM6IHRydWUsXG4gICAgICAgIGRpc3BsYXlOYW1lOiB0cnVlLFxuICAgICAgICBnZXREZWZhdWx0UHJvcHM6IHRydWUsXG4gICAgICAgIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wczogdHJ1ZSxcbiAgICAgICAgbWl4aW5zOiB0cnVlLFxuICAgICAgICBwcm9wVHlwZXM6IHRydWUsXG4gICAgICAgIHR5cGU6IHRydWVcbiAgICB9O1xuICAgIFxuICAgIHZhciBLTk9XTl9TVEFUSUNTID0ge1xuICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICBsZW5ndGg6IHRydWUsXG4gICAgICAgIHByb3RvdHlwZTogdHJ1ZSxcbiAgICAgICAgY2FsbGVyOiB0cnVlLFxuICAgICAgICBjYWxsZWU6IHRydWUsXG4gICAgICAgIGFyZ3VtZW50czogdHJ1ZSxcbiAgICAgICAgYXJpdHk6IHRydWVcbiAgICB9O1xuICAgIFxuICAgIHZhciBkZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbiAgICB2YXIgZ2V0T3duUHJvcGVydHlOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xuICAgIHZhciBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xuICAgIHZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuICAgIHZhciBnZXRQcm90b3R5cGVPZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbiAgICB2YXIgb2JqZWN0UHJvdG90eXBlID0gZ2V0UHJvdG90eXBlT2YgJiYgZ2V0UHJvdG90eXBlT2YoT2JqZWN0KTtcbiAgICBcbiAgICByZXR1cm4gZnVuY3Rpb24gaG9pc3ROb25SZWFjdFN0YXRpY3ModGFyZ2V0Q29tcG9uZW50LCBzb3VyY2VDb21wb25lbnQsIGJsYWNrbGlzdCkge1xuICAgICAgICBpZiAodHlwZW9mIHNvdXJjZUNvbXBvbmVudCAhPT0gJ3N0cmluZycpIHsgLy8gZG9uJ3QgaG9pc3Qgb3ZlciBzdHJpbmcgKGh0bWwpIGNvbXBvbmVudHNcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG9iamVjdFByb3RvdHlwZSkge1xuICAgICAgICAgICAgICAgIHZhciBpbmhlcml0ZWRDb21wb25lbnQgPSBnZXRQcm90b3R5cGVPZihzb3VyY2VDb21wb25lbnQpO1xuICAgICAgICAgICAgICAgIGlmIChpbmhlcml0ZWRDb21wb25lbnQgJiYgaW5oZXJpdGVkQ29tcG9uZW50ICE9PSBvYmplY3RQcm90b3R5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9pc3ROb25SZWFjdFN0YXRpY3ModGFyZ2V0Q29tcG9uZW50LCBpbmhlcml0ZWRDb21wb25lbnQsIGJsYWNrbGlzdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIga2V5cyA9IGdldE93blByb3BlcnR5TmFtZXMoc291cmNlQ29tcG9uZW50KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgICAgICAgICAgICAgIGtleXMgPSBrZXlzLmNvbmNhdChnZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlQ29tcG9uZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgICAgIGlmICghUkVBQ1RfU1RBVElDU1trZXldICYmICFLTk9XTl9TVEFUSUNTW2tleV0gJiYgKCFibGFja2xpc3QgfHwgIWJsYWNrbGlzdFtrZXldKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2VDb21wb25lbnQsIGtleSk7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7IC8vIEF2b2lkIGZhaWx1cmVzIGZyb20gcmVhZC1vbmx5IHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZVByb3BlcnR5KHRhcmdldENvbXBvbmVudCwga2V5LCBkZXNjcmlwdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRDb21wb25lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0YXJnZXRDb21wb25lbnQ7XG4gICAgfTtcbn0pKSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtcm91dGVyL34vaG9pc3Qtbm9uLXJlYWN0LXN0YXRpY3MvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDIwNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuXHJcbmltcG9ydCBBcHBCYXIgZnJvbSAnbWF0ZXJpYWwtdWkvQXBwQmFyJztcclxuaW1wb3J0IERyYXdlciBmcm9tICdtYXRlcmlhbC11aS9EcmF3ZXInO1xyXG5pbXBvcnQgTWVudUl0ZW0gZnJvbSAnbWF0ZXJpYWwtdWkvTWVudUl0ZW0nO1xyXG5pbXBvcnQgQXJyb3dEcm9wUmlnaHQgZnJvbSAnbWF0ZXJpYWwtdWkvc3ZnLWljb25zL25hdmlnYXRpb24tYXJyb3ctZHJvcC1yaWdodCc7XHJcblxyXG5pbXBvcnQgSWNvbk1lbnUgZnJvbSAnbWF0ZXJpYWwtdWkvSWNvbk1lbnUnO1xyXG5pbXBvcnQgSWNvbkJ1dHRvbiBmcm9tICdtYXRlcmlhbC11aS9JY29uQnV0dG9uJztcclxuaW1wb3J0IE1vcmVWZXJ0SWNvbiBmcm9tICdtYXRlcmlhbC11aS9zdmctaWNvbnMvbmF2aWdhdGlvbi9tb3JlLXZlcnQnO1xyXG5cclxuXHJcbmZ1bmN0aW9uIFN1Yk1lbnUocHJvcHMpIHtcclxuICAgIHJldHVybiA8SWNvbk1lbnVcclxuICAgICAgICBpY29uQnV0dG9uRWxlbWVudD17XHJcbiAgICAgICAgICAgIDxJY29uQnV0dG9uID48TW9yZVZlcnRJY29uXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3N1Ym1lbnUtc3ZnJ1xyXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6ICd3aGl0ZScsIGZpbGw6ICd3aGl0ZScgfX0gLz5cclxuICAgICAgICAgICAgPC9JY29uQnV0dG9uPlxyXG4gICAgICAgIH1cclxuICAgICAgICB0YXJnZXRPcmlnaW49e3sgaG9yaXpvbnRhbDogJ3JpZ2h0JywgdmVydGljYWw6ICd0b3AnIH19XHJcbiAgICAgICAgYW5jaG9yT3JpZ2luPXt7IGhvcml6b250YWw6ICdyaWdodCcsIHZlcnRpY2FsOiAndG9wJyB9fT5cclxuXHJcbiAgICAgICAgPE1lbnVJdGVtIHByaW1hcnlUZXh0PVwiQ2VycmFyIHNlc2lvblwiIG9uQ2xpY2s9e3Byb3BzLm9uTG9nb3V0fSAvPlxyXG4gICAgPC9JY29uTWVudT47XHJcbn1cclxuXHJcblN1Yk1lbnUubXVpTmFtZSA9ICdJY29uTWVudSc7XHJcblxyXG5jb25zdCBBZG1pbkJhY2tvZmZpY2VCYXIgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcbiAgICBnZXRJbml0aWFsU3RhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZHJhd2VyT3BlbjogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXREZWZhdWx0UHJvcHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgb25Mb2dvdXQ6ICgpID0+IHsgfVxyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIGNsb3NlRHJhd2VyKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkcmF3ZXJPcGVuOiBmYWxzZSB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgdG9nZ2xlRHJhd2VyKCkge1xyXG4gICAgICAgIGNvbnN0IGRyYXdlck9wZW4gPSAhdGhpcy5zdGF0ZS5kcmF3ZXJPcGVuO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkcmF3ZXJPcGVuIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiA+XHJcbiAgICAgICAgICAgICAgICA8QXBwQmFyXHJcbiAgICAgICAgICAgICAgICAgICAgb25MZWZ0SWNvbkJ1dHRvblRvdWNoVGFwPXt0aGlzLnRvZ2dsZURyYXdlcn1cclxuICAgICAgICAgICAgICAgICAgICBpY29uRWxlbWVudFJpZ2h0PXs8U3ViTWVudSBvbkxvZ291dD17dGhpcy5wcm9wcy5vbkxvZ291dH0gLz59XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJBZG1pbmlzdHJhY2lvbiBIT1kgQ09NT1wiIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgPERyYXdlciBvcGVuPXt0aGlzLnN0YXRlLmRyYXdlck9wZW59IGRvY2tlZD17ZmFsc2V9IG9uUmVxdWVzdENoYW5nZT17b3BlbiA9PiB0aGlzLnNldFN0YXRlKHsgZHJhd2VyT3Blbjogb3BlbiB9KX0gPlxyXG4gICAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPVwiL2luZGV4XCIgb25DbGljaz17dGhpcy5jbG9zZURyYXdlcn0+PE1lbnVJdGVtID5QcmluY2lwYWw8L01lbnVJdGVtPjwvTGluaz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgey8qIDxNZW51SXRlbSBwcmltYXJ5VGV4dD0nQ29tZXJjaW9zJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodEljb249ezxBcnJvd0Ryb3BSaWdodCAvPn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW1zPXtbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGluayB0bz1cIi9zaG9wcy9jcmVhdGVcIiBvbkNsaWNrPXt0aGlzLmNsb3NlRHJhd2VyfT48TWVudUl0ZW0gPkNyZWFyPC9NZW51SXRlbT48L0xpbms+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmsgdG89XCIvc2hvcHMvbGlzdFwiIG9uQ2xpY2s9e3RoaXMuY2xvc2VEcmF3ZXJ9PjxNZW51SXRlbSA+VmVyPC9NZW51SXRlbT48L0xpbms+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF19IC8+ICovfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8TGluayB0bz1cIi9zaG9wcy9saXN0XCIgb25DbGljaz17dGhpcy5jbG9zZURyYXdlcn0+PE1lbnVJdGVtID5Db21lcmNpb3M8L01lbnVJdGVtPjwvTGluaz5cclxuICAgICAgICAgICAgICAgIDwvRHJhd2VyPlxyXG4gICAgICAgICAgICA8L2RpdiA+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBZG1pbkJhY2tvZmZpY2VCYXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vY29tcG9uZW50cy9BZG1pbkJhY2tvZmZpY2VCYXIuanMiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuLyoqIENvbXBvbmVudGUgaW5kaWNlIGRlIGFkbWluaXN0cmFjaW9uIGRlIEhPWSBDT01PICovXHJcbmNvbnN0IEFkbWluSW5kZXggPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcbiAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndpdGgtbWFyZ2luIGluZGV4XCI+XHJcbiAgICAgICAgICAgICAgICA8aDE+QWRtaW5pc3RyYWNpb24gZGUgSE9ZIENPTU88L2gxPlxyXG4gICAgICAgICAgICAgICAgPGgyPkNvbmZpZ3VyYWNpb24geSBlc3RhZGlzdGljYXM8L2gyPlxyXG4gICAgICAgICAgICAgICAgPHA+RGVzZGUgYXF1aSBlcyBwb3NpYmxlIG1vbml0b3JlYXIgYSBsb3MgdXN1YXJpb3MgcmVnaXN0cmFkb3MgeSBjb21lcmNpb3MgXHJcbiAgICAgICAgICAgICAgICAgICAgYXNvY2lhZG9zIGEgbGEgYXBsaWNhY2lvbi5cclxuICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBZG1pbkluZGV4O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NvbXBvbmVudHMvQWRtaW5JbmRleC5qcyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5pbXBvcnQgTXVpVGhlbWVQcm92aWRlciBmcm9tICdtYXRlcmlhbC11aS9zdHlsZXMvTXVpVGhlbWVQcm92aWRlcic7XHJcbmltcG9ydCBSYWlzZWRCdXR0b24gZnJvbSAnbWF0ZXJpYWwtdWkvUmFpc2VkQnV0dG9uJztcclxuaW1wb3J0IFRleHRGaWVsZCBmcm9tICdtYXRlcmlhbC11aS9UZXh0RmllbGQnO1xyXG5pbXBvcnQgeyBDYXJkLCBDYXJkQWN0aW9ucywgQ2FyZEhlYWRlciwgQ2FyZFRleHQgfSBmcm9tICdtYXRlcmlhbC11aS9DYXJkJztcclxuaW1wb3J0IEZsYXRCdXR0b24gZnJvbSAnbWF0ZXJpYWwtdWkvRmxhdEJ1dHRvbic7XHJcblxyXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5cclxuaW1wb3J0IEhlYWRlciBmcm9tICcuL0hlYWRlcic7XHJcbi8vaW1wb3J0IG1haW5Db25maWcgZnJvbSAnLi4vY29uZmlnL21haW4tY29uZmlnJztcclxuXHJcbi8qIEZJTiBERSBJTVBPUlRTIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5jb25zdCBFTVBUWV9DQUxMQkFDSyA9ICgpID0+IHsgfTtcclxuXHJcbmNvbnN0IEFkbWluTG9naW4gPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB1c2VybmFtZTogJycsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiAnJyxcclxuICAgICAgICAgICAgZXJyTXNnOiBudWxsLFxyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7IG9uU3VibWl0OiBFTVBUWV9DQUxMQkFDSyB9O1xyXG4gICAgfSxcclxuXHJcbiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc3QgdXNlcm5hbWUgPSB0aGlzLnN0YXRlLnVzZXJuYW1lO1xyXG4gICAgICAgIGNvbnN0IHBhc3N3b3JkID0gdGhpcy5zdGF0ZS5wYXNzd29yZDtcclxuXHJcbiAgICAgICAgLy9oYWdvIGVuY29kaW5nIGJhc2U2NCBwYXJhIHBhc2FyIGxhcyBjcmVkZW5jaWFsZXNcclxuICAgICAgICBjb25zdCBlbmNvZGVkID0gYnRvYSh1c2VybmFtZSArICc6JyArIHBhc3N3b3JkKTtcclxuXHJcbiAgICAgICAgYXhpb3Moe1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdwb3N0JywgLy95b3UgY2FuIHNldCB3aGF0IHJlcXVlc3QgeW91IHdhbnQgdG8gYmVcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS92MS9hZG1pbi9sb2dpbicsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogJ0Jhc2ljICcgKyBlbmNvZGVkIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihjb250ZW50cyA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ29udGVuaWRvOicpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coY29udGVudHMuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uU3VibWl0KGNvbnRlbnRzLmRhdGEudG9rZW4pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goY2F1c2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3InKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBlcnJNc2c6ICdDcmVkZW5jaWFsZXMgaW52YWxpZGFzJyB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGhhbmRsZUtleVByZXNzOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBpZiAoZXZlbnQua2V5ID09ICdFbnRlcicpIHRoaXMuc3VibWl0Rm9ybSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgbXNnRWxlbSA9IHRoaXMuc3RhdGUuZXJyTXNnID8gPHAgc3R5bGU9e3sgY29sb3I6ICdyZWQnIH19ID57dGhpcy5zdGF0ZS5lcnJNc2d9PC9wPiA6IDxkaXYgLz47XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgb25LZXlQcmVzcz17dGhpcy5oYW5kbGVLZXlQcmVzc30+XHJcbiAgICAgICAgICAgICAgICA8SGVhZGVyIHRpdGxlPVwiQWRtaW4gSE9ZIENPTU9cIiAvPlxyXG4gICAgICAgICAgICAgICAge21zZ0VsZW19XHJcbiAgICAgICAgICAgICAgICA8TXVpVGhlbWVQcm92aWRlcj5cclxuICAgICAgICAgICAgICAgICAgICA8Q2FyZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPENhcmRIZWFkZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiSW5pY2lhciBzZXNpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU9J0luZ3Jlc2UgY3JlZGVuY2lhbGVzJyAvPjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxDYXJkVGV4dCBleHBhbmRhYmxlPXtmYWxzZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGV4dEZpZWxkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInVzZXJuYW1lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaW50PVwidXNlcm5hbWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0aW5nTGFiZWxUZXh0PVwidXNlcm5hbWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnVzZXJuYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHRoaXMuc2V0U3RhdGUoeyB1c2VybmFtZTogZS50YXJnZXQudmFsdWUgfSl9IC8+PGJyIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRleHRGaWVsZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJwYXNzd29yZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGludFRleHQ9XCJQYXNzd29yZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRpbmdMYWJlbFRleHQ9XCJQYXNzd29yZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInBhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5wYXNzd29yZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiB0aGlzLnNldFN0YXRlKHsgcGFzc3dvcmQ6IGUudGFyZ2V0LnZhbHVlIH0pfSAvPjxiciAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0NhcmRUZXh0PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPENhcmRBY3Rpb25zPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZsYXRCdXR0b24gbGFiZWw9XCJJbmljaWFyIHNlc2lvblwiIG9uQ2xpY2s9e3RoaXMuc3VibWl0Rm9ybX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9DYXJkQWN0aW9ucz5cclxuICAgICAgICAgICAgICAgICAgICA8L0NhcmQ+XHJcblxyXG4gICAgICAgICAgICAgICAgPC9NdWlUaGVtZVByb3ZpZGVyID5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBZG1pbkxvZ2luO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NvbXBvbmVudHMvQWRtaW5Mb2dpbi5qcyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5pbXBvcnQgTXVpVGhlbWVQcm92aWRlciBmcm9tICdtYXRlcmlhbC11aS9zdHlsZXMvTXVpVGhlbWVQcm92aWRlcic7XHJcbmltcG9ydCBSYWlzZWRCdXR0b24gZnJvbSAnbWF0ZXJpYWwtdWkvUmFpc2VkQnV0dG9uJztcclxuaW1wb3J0IFRleHRGaWVsZCBmcm9tICdtYXRlcmlhbC11aS9UZXh0RmllbGQnO1xyXG5pbXBvcnQgeyBDYXJkLCBDYXJkQWN0aW9ucywgQ2FyZEhlYWRlciwgQ2FyZFRleHQgfSBmcm9tICdtYXRlcmlhbC11aS9DYXJkJztcclxuaW1wb3J0IENoZWNrYm94IGZyb20gJ21hdGVyaWFsLXVpL0NoZWNrYm94JztcclxuaW1wb3J0IEZsYXRCdXR0b24gZnJvbSAnbWF0ZXJpYWwtdWkvRmxhdEJ1dHRvbic7XHJcbmltcG9ydCBEaWFsb2cgZnJvbSAnbWF0ZXJpYWwtdWkvRGlhbG9nJztcclxuaW1wb3J0IFNuYWNrYmFyIGZyb20gJ21hdGVyaWFsLXVpL1NuYWNrYmFyJztcclxuXHJcbmltcG9ydCBEcm9wRG93bk1lbnUgZnJvbSAnbWF0ZXJpYWwtdWkvRHJvcERvd25NZW51JztcclxuaW1wb3J0IE1lbnVJdGVtIGZyb20gJ21hdGVyaWFsLXVpL01lbnVJdGVtJztcclxuXHJcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XHJcblxyXG5pbXBvcnQgSGVhZGVyIGZyb20gJy4vSGVhZGVyJztcclxuXHJcbi8qIEZJTiBERSBJTVBPUlRTIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5jb25zdCBTaG9wRm9ybSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuICAgIGdldERlZmF1bHRQcm9wcygpIHtcclxuICAgICAgICByZXR1cm4geyB0b2tlbjogJycgfTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0SW5pdGlhbFN0YXRlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG1zZ1NuYWNrYmFyT3BlbjogZmFsc2UsXHJcbiAgICAgICAgICAgIG5hbWU6ICcnLFxyXG4gICAgICAgICAgICBhZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgcGhvbmU6ICcnLFxyXG4gICAgICAgICAgICB6b25lOiAxLFxyXG4gICAgICAgICAgICBkaXN0cmljdHM6IG51bGwsXHJcbiAgICAgICAgICAgIGFkbWluRW1haWw6ICcnLFxyXG4gICAgICAgICAgICBhZG1pbk5hbWU6ICcnLFxyXG4gICAgICAgICAgICBsYXQ6ICcnLFxyXG4gICAgICAgICAgICBsb25nOiAnJ1xyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCd0b2tlbjogJyArIHRoaXMucHJvcHMudG9rZW4pO1xyXG4gICAgICAgIGF4aW9zLmdldCgnL2FwaS92MS9kaXN0cmljdHMnKVxyXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB0aGlzLnNldFN0YXRlKHsgZGlzdHJpY3RzOiByZXNwb25zZS5kYXRhLmRpc3RyaWN0cyB9KSk7XHJcbiAgICB9LFxyXG5cclxuICAgIG9wZW5TbmFja2Jhcihtc2cpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnQWJyaWVuZG8gc25hY2sgYmFyJyk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IG1zZ1NuYWNrYmFyT3BlbjogdHJ1ZSwgc25hY2tiYXJNZXNzYWdlOiBtc2cgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGhhbmRsZVNuYWNrYmFyUmVxdWVzdENsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBtc2dTbmFja2Jhck9wZW46IGZhbHNlIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBoYW5kbGVTaG9wQ3JlYXRlU3VjY2VzcyhkYXRhKSB7XHJcbiAgICAgICAgY29uc3Qgc2hvcElkID0gZGF0YS5zaG9wLmlkO1xyXG4gICAgICAgIHRoaXMub3BlblNuYWNrYmFyKGBDb21lcmNpbyAke3Nob3BJZH0gY3JlYWRvYCk7XHJcbiAgICB9LFxyXG5cclxuICAgIGhhbmRsZVNob3BDcmVhdGVFcnJvcihjYXVzZSkge1xyXG4gICAgICAgIHRoaXMub3BlblNuYWNrYmFyKGNhdXNlLnJlc3BvbnNlLmRhdGEubWVzc2FnZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGNoZWNrRmllbGRzKCkge1xyXG4gICAgICAgIGNvbnN0IHsgbmFtZSwgYWRkcmVzcywgcGhvbmUsIHpvbmUsIGFkbWluRW1haWwsIGFkbWluTmFtZSwgbGF0LCBsb25nIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICAgIGlmICghbmFtZSB8fCAhYWRkcmVzcyB8fCAhcGhvbmUgfHwgIXpvbmUgfHwgIWFkbWluRW1haWwgfHwgIWFkbWluTmFtZSB8fCAhbGF0IHx8ICFsb25nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IG9rOiBmYWxzZSwgbXNnOiAnUGFyYW1ldHJvcyBpbmNvbXBsZXRvcycgfTtcclxuICAgICAgICB9IGVsc2UgcmV0dXJuIHsgb2s6IHRydWUgfTtcclxuICAgIH0sXHJcblxyXG4gICAgY3JlYXRlU2hvcCgpIHtcclxuICAgICAgICBjb25zdCBmaWVsZHNDaGVjayA9IHRoaXMuY2hlY2tGaWVsZHMoKTtcclxuICAgICAgICBpZiAoIWZpZWxkc0NoZWNrLm9rKSByZXR1cm4gdGhpcy5vcGVuU25hY2tiYXIoZmllbGRzQ2hlY2subXNnKTtcclxuXHJcbiAgICAgICAgY29uc3QgeyBuYW1lLCBhZGRyZXNzLCBwaG9uZSwgem9uZSwgYWRtaW5FbWFpbCwgYWRtaW5OYW1lLCBsYXQsIGxvbmcgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgY29uc3Qgem9uZU9iaiA9IHRoaXMuc3RhdGUuZGlzdHJpY3RzLmZpbmQoZCA9PiBkLmlkID09IHpvbmUpO1xyXG4gICAgICAgIC8qIFRPRE8gOiBQT1IgQUhPUkEgU0UgR1VBUkRBIExBIFpPTkEgQ09NTyBVTiBWQVJDSEFSLiBMQSBNSVNNQSBERUJFUklBIEdVQVJEQVJTRSBDT01PIFVOIElEIERFIERJU1RSSVRPICovXHJcbiAgICAgICAgY29uc3QgYm9keSA9IHsgbmFtZSwgYWRkcmVzcywgcGhvbmUsIHpvbmU6IHpvbmVPYmoubmFtZSwgYWRtaW5FbWFpbCwgYWRtaW5OYW1lLCBsYXQsIGxvbmcgfTtcclxuICAgICAgICBjb25zdCBjb25maWcgPSB7IGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5wcm9wcy50b2tlbn1gIH0gfTtcclxuICAgICAgICBheGlvcy5wb3N0KCcvYXBpL3YxL3Nob3BzJywgYm9keSwgY29uZmlnKVxyXG4gICAgICAgICAgICAudGhlbihjb250ZW50cyA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjb250ZW50cy5kYXRhKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlU2hvcENyZWF0ZVN1Y2Nlc3MoY29udGVudHMuZGF0YSk7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGNhdXNlID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoY2F1c2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVTaG9wQ3JlYXRlRXJyb3IoY2F1c2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgaGFuZGxlWm9uZUNoYW5nZShldmVudCwgaW5kZXgsIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHpvbmU6IHZhbHVlIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgLy8gc2kgbG9zIGRpc3RyaXRvcyBubyBmdWVyb24gY2FyZ2Fkb3MsIGVudG9uY2VzIHNlIGluZGljYSBhbCB1c3VhcmlvIHF1ZSBkZWJlIGVzcGVyYXJcclxuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuZGlzdHJpY3RzKSByZXR1cm4gPHNwYW4+RXNwZXJlLi4uPC9zcGFuPjtcclxuXHJcbiAgICAgICAgY29uc3QgZGlzdHJpY3RNZW51SXRlbXMgPSBbXTtcclxuICAgICAgICB0aGlzLnN0YXRlLmRpc3RyaWN0cy5mb3JFYWNoKGRpc3RyaWN0ID0+IGRpc3RyaWN0TWVudUl0ZW1zLnB1c2goXHJcbiAgICAgICAgICAgIDxNZW51SXRlbSB2YWx1ZT17ZGlzdHJpY3QuaWR9IHByaW1hcnlUZXh0PXtkaXN0cmljdC5uYW1lfSAvPlxyXG4gICAgICAgICkpO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHBhZGRpbmdCb3R0b206IDEwLCBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuNyknIH19PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW46IDIwIH19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxoMT5OdWV2byBjb21lcmNpbzwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgPGhyIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxoMj5EYXRvcyBkZWwgY29tZXJjaW88L2gyPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8VGV4dEZpZWxkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJOb21icmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaW50PVwiTm9tYnJlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRpbmdMYWJlbFRleHQ9XCJOb21icmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiB0aGlzLnNldFN0YXRlKHsgbmFtZTogZS50YXJnZXQudmFsdWUgfSl9IC8+PGJyIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxUZXh0RmllbGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIkRpcmVjY2lvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpbnQ9XCJEaXJlY2Npb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdGluZ0xhYmVsVGV4dD1cIkRpcmVjY2lvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmFkZHJlc3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHRoaXMuc2V0U3RhdGUoeyBhZGRyZXNzOiBlLnRhcmdldC52YWx1ZSB9KX0gLz48YnIgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPFRleHRGaWVsZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiTGF0aXR1ZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpbnQ9XCJMYXRpdHVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRpbmdMYWJlbFRleHQ9XCJMYXRpdHVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUubGF0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiB0aGlzLnNldFN0YXRlKHsgbGF0OiBlLnRhcmdldC52YWx1ZSB9KX0gLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPFRleHRGaWVsZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiTG9uZ2l0dWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaW50PVwiTG9uZ2l0dWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdGluZ0xhYmVsVGV4dD1cIkxvbmdpdHVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUubG9uZ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gdGhpcy5zZXRTdGF0ZSh7IGxvbmc6IGUudGFyZ2V0LnZhbHVlIH0pfSAvPjxiciAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8RHJvcERvd25NZW51XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnpvbmV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVpvbmVDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5JbW1lZGlhdGVseT17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAyMDAsIHBhZGRpbmc6IDAgfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkaXN0cmljdE1lbnVJdGVtc31cclxuICAgICAgICAgICAgICAgICAgICA8L0Ryb3BEb3duTWVudT4gPGJyIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxUZXh0RmllbGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIlRlbGVmb25vXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGludD1cIlRlbGVmb25vIHNpbiBndWlvbiBuaSBlc3BhY2lvc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0aW5nTGFiZWxUZXh0PVwiVGVsZWZvbm9cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5waG9uZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gdGhpcy5zZXRTdGF0ZSh7IHBob25lOiBlLnRhcmdldC52YWx1ZSB9KX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nbnVtYmVyJyAvPjxiciAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8aHIgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPGgyPkRhdG9zIGRlbCBhZG1pbmlzdHJhZG9yIGRlbCBjb21lcmNpbzwvaDI+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxUZXh0RmllbGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIk5vbWJyZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpbnQ9XCJOb21icmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdGluZ0xhYmVsVGV4dD1cIk5vbWJyZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmFkbWluTmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gdGhpcy5zZXRTdGF0ZSh7IGFkbWluTmFtZTogZS50YXJnZXQudmFsdWUgfSl9IC8+PGJyIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxUZXh0RmllbGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIkVtYWlsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGludD1cIkVtYWlsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRpbmdMYWJlbFRleHQ9XCJFbWFpbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmFkbWluRW1haWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHRoaXMuc2V0U3RhdGUoeyBhZG1pbkVtYWlsOiBlLnRhcmdldC52YWx1ZSB9KX0gLz48YnIgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPFJhaXNlZEJ1dHRvbiBzdHlsZT17eyBtYXJnaW5Ub3A6IDIwIH19IGxhYmVsPVwiQ3JlYXIgY29tZXJjaW9cIiBvbkNsaWNrPXt0aGlzLmNyZWF0ZVNob3B9IHNlY29uZGFyeT17dHJ1ZX0gLz5cclxuXHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICA8U25hY2tiYXJcclxuICAgICAgICAgICAgICAgICAgICBvcGVuPXt0aGlzLnN0YXRlLm1zZ1NuYWNrYmFyT3Blbn1cclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlPXt0aGlzLnN0YXRlLnNuYWNrYmFyTWVzc2FnZX1cclxuICAgICAgICAgICAgICAgICAgICBhdXRvSGlkZUR1cmF0aW9uPXszMDAwfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uUmVxdWVzdENsb3NlPXt0aGlzLmhhbmRsZVNuYWNrYmFyUmVxdWVzdENsb3NlfSAvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNob3BGb3JtO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NvbXBvbmVudHMvU2hvcEZvcm0uanMiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuaW1wb3J0IE11aVRoZW1lUHJvdmlkZXIgZnJvbSAnbWF0ZXJpYWwtdWkvc3R5bGVzL011aVRoZW1lUHJvdmlkZXInO1xyXG5pbXBvcnQgUmFpc2VkQnV0dG9uIGZyb20gJ21hdGVyaWFsLXVpL1JhaXNlZEJ1dHRvbic7XHJcbmltcG9ydCBUZXh0RmllbGQgZnJvbSAnbWF0ZXJpYWwtdWkvVGV4dEZpZWxkJztcclxuaW1wb3J0IHsgQ2FyZCwgQ2FyZEFjdGlvbnMsIENhcmRIZWFkZXIsIENhcmRUZXh0IH0gZnJvbSAnbWF0ZXJpYWwtdWkvQ2FyZCc7XHJcbmltcG9ydCBDaGVja2JveCBmcm9tICdtYXRlcmlhbC11aS9DaGVja2JveCc7XHJcbmltcG9ydCBGbGF0QnV0dG9uIGZyb20gJ21hdGVyaWFsLXVpL0ZsYXRCdXR0b24nO1xyXG5pbXBvcnQgRGlhbG9nIGZyb20gJ21hdGVyaWFsLXVpL0RpYWxvZyc7XHJcbmltcG9ydCBTbmFja2JhciBmcm9tICdtYXRlcmlhbC11aS9TbmFja2Jhcic7XHJcblxyXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcbmltcG9ydCBGbG9hdGluZ0FjdGlvbkJ1dHRvbiBmcm9tICdtYXRlcmlhbC11aS9GbG9hdGluZ0FjdGlvbkJ1dHRvbic7XHJcbmltcG9ydCBDb250ZW50QWRkIGZyb20gJ21hdGVyaWFsLXVpL3N2Zy1pY29ucy9jb250ZW50L2FkZCc7XHJcblxyXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5cclxuaW1wb3J0IEhlYWRlciBmcm9tICcuL0hlYWRlcic7XHJcbmltcG9ydCBTaG9wTWVudSBmcm9tICcuL1Nob3BNZW51JztcclxuXHJcbi8qIEZJTiBERSBJTVBPUlRTIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5jb25zdCBFTVBUWV9DQUxMQkFDSyA9ICgpID0+IHsgfTtcclxuXHJcbmZ1bmN0aW9uIEJhblNob3BEaWFsb2cocHJvcHMpIHtcclxuICAgIGZ1bmN0aW9uIGJhblNob3AoKSB7XHJcbiAgICAgICAgY29uc3Qgc2hvcElkID0gcHJvcHMuc2hvcC5pZDtcclxuICAgICAgICBwcm9wcy5zaG9wLmVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICBheGlvcyh7XHJcbiAgICAgICAgICAgIHVybDogYC9hcGkvdjEvc2hvcHMvJHtzaG9wSWR9YCxcclxuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtwcm9wcy50b2tlbn1gIH0sXHJcbiAgICAgICAgICAgIGRhdGE6IHByb3BzLnNob3BcclxuICAgICAgICB9KS50aGVuKGNvbnRlbnRzID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coY29udGVudHMuZGF0YSk7XHJcbiAgICAgICAgICAgIHByb3BzLm9uU3VjY2VzcygpO1xyXG4gICAgICAgIH0pLmNhdGNoKGNhdXNlID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihjYXVzZSk7XHJcbiAgICAgICAgICAgIHByb3BzLm9uRXJyb3IoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBhY3Rpb25zID0gW1xyXG4gICAgICAgIDxGbGF0QnV0dG9uXHJcbiAgICAgICAgICAgIGxhYmVsPVwiQ2FuY2VsYXJcIlxyXG4gICAgICAgICAgICBwcmltYXJ5PXt0cnVlfVxyXG4gICAgICAgICAgICBvbkNsaWNrPXtwcm9wcy5vbkNsb3NlfVxyXG4gICAgICAgIC8+LFxyXG4gICAgICAgIDxGbGF0QnV0dG9uXHJcbiAgICAgICAgICAgIGxhYmVsPVwiUHJvaGliaXJcIlxyXG4gICAgICAgICAgICBwcmltYXJ5PXt0cnVlfVxyXG4gICAgICAgICAgICBvbkNsaWNrPXtiYW5TaG9wfVxyXG4gICAgICAgIC8+LFxyXG4gICAgXTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxEaWFsb2dcclxuICAgICAgICAgICAgdGl0bGU9e2BQcm9oaWJpciBjb21lcmNpbyAke3Byb3BzLnNob3AuaWR9YH1cclxuICAgICAgICAgICAgYWN0aW9ucz17YWN0aW9uc31cclxuICAgICAgICAgICAgbW9kYWw9e3RydWV9XHJcbiAgICAgICAgICAgIG9wZW49e3Byb3BzLm9wZW59PlxyXG4gICAgICAgICAgICDCv0Rlc2VhIFByb2hpYmlyIGVsIGNvbWVyY2lvP1xyXG4gICAgICAgIDwvRGlhbG9nPlxyXG4gICAgKTtcclxufVxyXG5cclxuY29uc3QgU2hvcExpc3QgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcbiAgICBnZXREZWZhdWx0UHJvcHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgdG9rZW46ICcnIH07XHJcbiAgICB9LFxyXG5cclxuICAgIGdldEluaXRpYWxTdGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzaG9wczogW10sXHJcbiAgICAgICAgICAgIGVyclNuYWNrYmFyT3BlbjogZmFsc2UsXHJcbiAgICAgICAgICAgIGJhblNob3A6IG51bGwsXHJcbiAgICAgICAgICAgIHNob3BNZW51OiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcblxyXG4gICAgbG9hZFNob3BzKCkge1xyXG4gICAgICAgIGF4aW9zLmdldChgL2FwaS92MS9zaG9wcz90b2tlbj0ke3RoaXMucHJvcHMudG9rZW59YClcclxuICAgICAgICAgICAgLnRoZW4oY29udGVudHMgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2hvcHMgPSBjb250ZW50cy5kYXRhLnNob3BzO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvYWRTaG9wcyBzaG9wczogJyArIHNob3BzKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzaG9wczonKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNob3BzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzaG9wcyB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGNhdXNlID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoY2F1c2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuRXJyU25hY2tiYXIoJ0Vycm9yIGFsIG9idGVuZXIgbG9zIGNvbWVyY2lvcycpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3Rva2VuOiAnICsgdGhpcy5wcm9wcy50b2tlbik7XHJcbiAgICAgICAgdGhpcy5sb2FkU2hvcHMoKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnU2hvcExpc3QgRElEIE1PVU5UJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIG9wZW5FcnJTbmFja2Jhcihtc2cpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnQWJyaWVuZG8gc25hY2sgYmFyJyk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGVyclNuYWNrYmFyT3BlbjogdHJ1ZSwgZXJyU25hY2tiYXJNZXNzYWdlOiBtc2cgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGhhbmRsZUVyclNuYWNrYmFyUmVxdWVzdENsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBlcnJTbmFja2Jhck9wZW46IGZhbHNlIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBjbG9zZUJhbkRpYWxvZyhzaG9wKSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5zZXRTdGF0ZSh7IGJhblNob3A6IG51bGwgfSk7XHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcblxyXG4gICAgb3BlbkJhbkRpYWxvZyhzaG9wKSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2hvcElkID0gc2hvcC5pZCB8fCBzaG9wO1xyXG4gICAgICAgICAgICBzZWxmLnNldFN0YXRlKHsgYmFuU2hvcDogc2hvcElkIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIGhhbmRsZVNob3BCYW5TdWNjZXNzKHNob3ApIHtcclxuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZWxmLmNsb3NlQmFuRGlhbG9nKHNob3ApKCk7XHJcbiAgICAgICAgICAgIHNlbGYubG9hZFNob3BzKCk7XHJcbiAgICAgICAgICAgIHNlbGYub3BlbkVyclNuYWNrYmFyKCdDb21lcmNpbyBiYW5lYWRvJyk7XHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcblxyXG4gICAgZW5hYmxlU2hvcChzaG9wKSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgc2hvcC5lbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBheGlvcyh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IGAvYXBpL3YxL3Nob3BzLyR7c2hvcC5pZH1gLFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7c2VsZi5wcm9wcy50b2tlbn1gIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBzaG9wXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbihzZWxmLmxvYWRTaG9wcylcclxuICAgICAgICAgICAgICAgIC5jYXRjaChjYXVzZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihjYXVzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5vcGVuRXJyU25hY2tiYXIoJ0Vycm9yIGFsIGhhYmlsaXRhciBjb21lcmNpbycpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcblxyXG4gICAgc2hvd01lbnUoc2hvcCkge1xyXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGF4aW9zKHtcclxuICAgICAgICAgICAgICAgIHVybDogYC9hcGkvdjEvc2hvcHMvJHtzaG9wLmlkfS9tZW51YCxcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3NlbGYucHJvcHMudG9rZW59YCB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Nob3dNZW51IGF4aW9zIHJlc3BvbnNlOiAnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNldFN0YXRlKHsgc2hvcE1lbnU6IHJlc3BvbnNlLmRhdGEubWVudSB9KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goY2F1c2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoY2F1c2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYub3BlbkVyclNuYWNrYmFyKCdFcnJvciBhbCBvYnRlbmVyIG1lbnUgZGUgY29tZXJjaW8nKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIGhhbmRsZU1lbnVDbG9zZSgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2hvcE1lbnU6IG51bGwgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInRoaXMuc3RhdGUuc2hvcHM6IFwiICsgdGhpcy5zdGF0ZS5zaG9wcyk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNob3BzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiA8ZGl2Pk5vIGhheSBjb21lcmNpb3MuLi48L2Rpdj47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgYmFuU2hvcERpYWxvZyA9IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuYmFuU2hvcCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQ3JlYW5kbyBkaWFsb2dvIGRlIGJhbmVvJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNob3AgPSB0aGlzLnN0YXRlLnNob3BzLmZpbmQocyA9PiBzLmlkID09IHRoaXMuc3RhdGUuYmFuU2hvcCk7XHJcbiAgICAgICAgICAgIGJhblNob3BEaWFsb2cgPSA8QmFuU2hvcERpYWxvZ1xyXG4gICAgICAgICAgICAgICAgc2hvcD17c2hvcH1cclxuICAgICAgICAgICAgICAgIHRva2VuPXt0aGlzLnByb3BzLnRva2VufVxyXG4gICAgICAgICAgICAgICAgb3Blbj17dHJ1ZX1cclxuICAgICAgICAgICAgICAgIG9uU3VjY2Vzcz17dGhpcy5oYW5kbGVTaG9wQmFuU3VjY2VzcyhzaG9wKX1cclxuICAgICAgICAgICAgICAgIG9uQ2xvc2U9e3RoaXMuY2xvc2VCYW5EaWFsb2coc2hvcCl9XHJcbiAgICAgICAgICAgICAgICBvbkVycm9yPXsoKSA9PiB0aGlzLm9wZW5FcnJTbmFja2JhcihgRXJyb3IgYWwgUHJvaGliaXIgZWwgY29tZXJjaW8gJHtzaG9wLmlkfWApfSAvPjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzaG9wTWVudUVsZW0gPSBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNob3BNZW51KSB7XHJcbiAgICAgICAgICAgIHNob3BNZW51RWxlbSA9IDxTaG9wTWVudSBtZW51PXt0aGlzLnN0YXRlLnNob3BNZW51fSBnb0JhY2s9e3RoaXMuaGFuZGxlTWVudUNsb3NlfSAvPjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNob3BDYXJkcyA9IHRoaXMuc3RhdGUuc2hvcHMubWFwKHNob3AgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBiYWNrQ29sb3JzID0gWycjMUE5Mzg2JywgJ3JnYigyMSwgMTE0LCAxMDUpJywgJyMxMzRFNDgnXTtcclxuICAgICAgICAgICAgbGV0IGNvbElkeCA9IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgaW5pdGRvbmUsIHZhbGlkb25lIH0gPSBzaG9wO1xyXG4gICAgICAgICAgICBsZXQgc3RhdHVzU3RyID0gJ1JlZ2lzdHJvIHBlbmRpZW50ZSc7XHJcbiAgICAgICAgICAgIGlmIChpbml0ZG9uZSkgc3RhdHVzU3RyID0gJ1ZhbGlkYWNpb24gcGVuZGllbnRlJztcclxuICAgICAgICAgICAgaWYgKHZhbGlkb25lKSBzdGF0dXNTdHIgPSAnUHVibGljYWRvJztcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoPENhcmQgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiBcInJnYmEoMjU1LDI1NSwyNTUsMC44KVwiLCBtYXJnaW46IDEwIH19ID5cclxuICAgICAgICAgICAgICAgIDxDYXJkSGVhZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2BDb21lcmNpbyAke3Nob3AuaWR9YH1cclxuICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZT17c2hvcC5uYW1lfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDxDYXJkVGV4dCBleHBhbmRhYmxlPXtmYWxzZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Ob21icmU8L3N0cm9uZz46IHtzaG9wLm5hbWV9IDwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPkRpcmVjY2lvbjwvc3Ryb25nPjoge3Nob3AuYWRkcmVzc30gPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+QmFycmlvPC9zdHJvbmc+OiB7c2hvcC56b25lfSA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5UZWxlZm9ubzwvc3Ryb25nPjoge3Nob3AucGhvbmV9IDwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPkVzdGFkbzwvc3Ryb25nPjoge3N0YXR1c1N0cn08L3A+XHJcbiAgICAgICAgICAgICAgICA8L0NhcmRUZXh0PlxyXG4gICAgICAgICAgICAgICAgPENhcmRBY3Rpb25zPlxyXG4gICAgICAgICAgICAgICAgICAgIDxGbGF0QnV0dG9uIGxhYmVsPVwiUHJvaGliaXJcIiBzZWNvbmRhcnk9e3RydWV9IGRpc2FibGVkPXshc2hvcC5lbmFibGVkfSBvbkNsaWNrPXt0aGlzLm9wZW5CYW5EaWFsb2coc2hvcCl9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPEZsYXRCdXR0b24gbGFiZWw9XCJIYWJpbGl0YXJcIiBkaXNhYmxlZD17c2hvcC5lbmFibGVkfSBvbkNsaWNrPXt0aGlzLmVuYWJsZVNob3Aoc2hvcCl9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPEZsYXRCdXR0b24gbGFiZWw9XCJNZW51XCIgb25DbGljaz17dGhpcy5zaG93TWVudShzaG9wKX0gLz5cclxuICAgICAgICAgICAgICAgIDwvQ2FyZEFjdGlvbnM+XHJcbiAgICAgICAgICAgIDwvQ2FyZD4pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBtYWluRWxlbSA9IGJhblNob3BEaWFsb2cgfHwgc2hvcE1lbnVFbGVtIHx8IHNob3BDYXJkcztcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiA+XHJcbiAgICAgICAgICAgICAgICA8TGluayB0bz1cIi9zaG9wcy9jcmVhdGVcIiA+XHJcbiAgICAgICAgICAgICAgICAgICAgPEZsb2F0aW5nQWN0aW9uQnV0dG9uIHNlY29uZGFyeT17dHJ1ZX0gc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHpJbmRleDogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAnNSUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogJzUlJyxcclxuICAgICAgICAgICAgICAgICAgICB9fSA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxDb250ZW50QWRkIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9GbG9hdGluZ0FjdGlvbkJ1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICAgICAgICAgIHttYWluRWxlbX1cclxuICAgICAgICAgICAgICAgIDxTbmFja2JhclxyXG4gICAgICAgICAgICAgICAgICAgIG9wZW49e3RoaXMuc3RhdGUuZXJyU25hY2tiYXJPcGVufVxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U9e3RoaXMuc3RhdGUuZXJyU25hY2tiYXJNZXNzYWdlfVxyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9IaWRlRHVyYXRpb249ezMwMDB9XHJcbiAgICAgICAgICAgICAgICAgICAgb25SZXF1ZXN0Q2xvc2U9e3RoaXMuaGFuZGxlRXJyU25hY2tiYXJSZXF1ZXN0Q2xvc2V9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8L2RpdiA+XHJcbiAgICAgICAgKTtcclxuICAgIH0sXHJcblxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNob3BMaXN0O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NvbXBvbmVudHMvU2hvcExpc3QuanMiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgRmxhdEJ1dHRvbiBmcm9tICdtYXRlcmlhbC11aS9GbGF0QnV0dG9uJztcclxuXHJcblxyXG5jb25zdCBBY3Rpb25IZWFkZXIgPSBmdW5jdGlvbiAocHJvcHMpIHtcclxuICAgIGxldCB0aXRsZSA9IHByb3BzLnRpdGxlIHx8ICdTaGFyZWQgc2VydmVyJztcclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBzdHlsZT17eyBjb2xvcjogJ3doaXRlJywgYmFja2dyb3VuZENvbG9yOiAncmdiKDAsIDE4OCwgMjEyKScsIHRyYW5zaXRpb246ICdhbGwgNDUwbXMgY3ViaWMtYmV6aWVyKDAuMjMsIDEsIDAuMzIsIDEpIDBtcycsIGJveFNpemluZzogJ2JvcmRlci1ib3gnLCBmb250RmFtaWx5OiAnUm9ib3RvLCBzYW5zLXNlcmlmJywgYm9yZGVyUmFkaXVzOiAnMHB4JywgcG9zaXRpb246ICdyZWxhdGl2ZScsIHpJbmRleDogMTEwMCwgd2lkdGg6ICcxMDAlJywgZGlzcGxheTogJ2ZsZXgnLCBwYWRkaW5nTGVmdDogJzI0cHgnLCBwYWRkaW5nUmlnaHQ6ICcyNHB4JywgfX0+XHJcbiAgICAgICAgICAgIDxGbGF0QnV0dG9uIHN0eWxlPXt7IGNvbG9yOiAnd2hpdGUnIH19IGxhYmVsPVwiVm9sdmVyXCIgb25DbGljaz17cHJvcHMub25DbGlja30gLz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBY3Rpb25IZWFkZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vY29tcG9uZW50cy9BY3Rpb25IZWFkZXIuanMiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgUmVhY3REb20gZnJvbSAncmVhY3QtZG9tJztcclxuaW1wb3J0IHsgSGFzaFJvdXRlciB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBSb3V0ZSB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5cclxuaW1wb3J0IE11aVRoZW1lUHJvdmlkZXIgZnJvbSAnbWF0ZXJpYWwtdWkvc3R5bGVzL011aVRoZW1lUHJvdmlkZXInO1xyXG5cclxuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcclxuXHJcbmltcG9ydCBBZG1pbkJhY2tvZmZpY2VCYXIgZnJvbSAnLi9BZG1pbkJhY2tvZmZpY2VCYXInO1xyXG5pbXBvcnQgQWRtaW5JbmRleCBmcm9tICcuL0FkbWluSW5kZXgnO1xyXG5pbXBvcnQgQWRtaW5Mb2dpbiBmcm9tICcuL0FkbWluTG9naW4nO1xyXG5pbXBvcnQgU2hvcExpc3QgZnJvbSAnLi9TaG9wTGlzdCc7XHJcbmltcG9ydCBTaG9wRm9ybSBmcm9tICcuL1Nob3BGb3JtJztcclxuXHJcbi8qIEVTVEUgRlJBR01FTlRPIERFIENPRElHTyBFUyBSRVFVRVJJRE8gUEFSQSBMT1MgRVZFTlRPUyBERSBUSVBPIFRPVUNIIE8gQ0xJQ0sgRU4gQ09NUE9ORU5URVMgTUFURVJJQUwtVUkgKi9cclxuaW1wb3J0IGluamVjdFRhcEV2ZW50UGx1Z2luIGZyb20gJ3JlYWN0LXRhcC1ldmVudC1wbHVnaW4nO1xyXG5pbmplY3RUYXBFdmVudFBsdWdpbigpO1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuY29uc29sZS5sb2coJ1BhcnNlYW5kbyBjb29raWUgJyArIGRvY3VtZW50LmNvb2tpZSk7XHJcbmNvbnN0IGNvb2tpZSA9IGRvY3VtZW50LmNvb2tpZSB8fCAnJztcclxuY29uc3QgY29va2llVG9rZW5TdHIgPSBjb29raWUuc3BsaXQoJzsgJykuZmluZChzID0+IHMuc3RhcnRzV2l0aCgndG9rZW49JykpO1xyXG5jb25zdCBjb29raWVUb2tlbiA9IGNvb2tpZVRva2VuU3RyID8gY29va2llVG9rZW5TdHIucmVwbGFjZSgndG9rZW49JywgJycpIDogbnVsbDtcclxuXHJcbmNvbnN0IEFkbWluQmFja29mZmljZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuICAgIGdldEluaXRpYWxTdGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0b2tlbjogbnVsbCxcclxuICAgICAgICAgICAgdXNlcjogbnVsbCxcclxuICAgICAgICAgICAgcmVuZGVyUmVhZHk6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgLyogU0UgQ0FSR0FOIExBUyBDQU5DSU9ORVMgREVTUFVFUyBRVUUgRUwgQ09NUE9ORU5URSBIQVlBIFNJRE8gTU9OVEFETyAqL1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdBZG1pbkJhY2tvZmZpY2UgTU9OVEFEQSEnKTtcclxuICAgICAgICAvKiBTaSBzZSBlbmN1ZW50cmEgdW4gdG9rZW4gZW4gbGFzIGNvb2tpZXMgZW50b25jZXMgc2Ugc2V0ZWEgZWwgbWlzbW8geSBzZSBvYnRpZW5lIGVsIHVzdWFyaW9cclxuICAgICAgICBDYXNvIGNvbnRyYXJpbywgc2UgbWFyY2EgYWwgY29tcG9uZW50ZSBjb21vIGxpc3RvIHBhcmEgcmVuZGVyaXphciAqL1xyXG4gICAgICAgIGlmIChjb29raWVUb2tlbikgdGhpcy5zZXRUb2tlbihjb29raWVUb2tlbik7XHJcbiAgICAgICAgZWxzZSB0aGlzLnNldFN0YXRlKHsgcmVuZGVyUmVhZHk6IHRydWUgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldFRva2VuKHRva2VuKSB7XHJcbiAgICAgICAgdG9rZW4gPSB0b2tlbi50b2tlbiB8fCB0b2tlbjtcclxuICAgICAgICBjb25zb2xlLmxvZygnU2V0ZWFuZG8gdG9rZW46ICcgKyB0b2tlbik7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHRva2VuLCAgcmVuZGVyUmVhZHk6IHRydWUgfSk7XHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnUkVOREVSSU5HIEFkbWluQmFja29mZmljZSEnKTtcclxuXHJcbiAgICAgICAgLy9pZiAoIXRoaXMuc3RhdGUucmVuZGVyUmVhZHkpIHJldHVybiAoPHNwYW4+RXNwZXJlLi4uPC9zcGFuPik7XHJcblxyXG4gICAgICAgIGNvbnN0IHRva2VuID0gdGhpcy5zdGF0ZS50b2tlbjtcclxuICAgICAgICBpZiAoIXRva2VuKSByZXR1cm4gPEFkbWluTG9naW4gb25TdWJtaXQ9e3RoaXMuc2V0VG9rZW59IC8+O1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnd2luZG93LmxvY2F0aW9uLmhhc2g6ICcgKyB3aW5kb3cubG9jYXRpb24uaGFzaCk7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5oYXNoID09ICcjLycpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1JFUExBQ0lORyBMT0NBVElPTicpO1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgnL2FkbWluIy9pbmRleCcpO1xyXG4gICAgICAgICAgICAvL3JldHVybiA8c3Bhbj5SZWRpcmVjY2lvbmFuZG8uLi48L3NwYW4+O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogU2kgdW4gdXN1YXJpbyBpbmljaW8gc2VzaW9uLCByZW5kZXJpem8gbGEgYXBwIG5vcm1hbCAqL1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxNdWlUaGVtZVByb3ZpZGVyPlxyXG4gICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICA8QWRtaW5CYWNrb2ZmaWNlQmFyIG9uTG9nb3V0PXsoKSA9PiB0aGlzLmxvZ291dEZvcm0uc3VibWl0KCl9IC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxSb3V0ZSBwYXRoPVwiL2luZGV4XCIgY29tcG9uZW50PXtBZG1pbkluZGV4fSAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8Um91dGUgcGF0aD1cIi9zaG9wcy9saXN0XCIgY29tcG9uZW50PXsoKSA9PiA8U2hvcExpc3QgdG9rZW49e3Rva2VufSAvPn0gLz5cclxuICAgICAgICAgICAgICAgICAgICA8Um91dGUgcGF0aD1cIi9zaG9wcy9jcmVhdGVcIiBjb21wb25lbnQ9eygpID0+IDxTaG9wRm9ybSB0b2tlbj17dG9rZW59IC8+fSAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8Zm9ybVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb249Jy9hZG1pbi9sb2dvdXQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZD0nUE9TVCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXtmID0+IHRoaXMubG9nb3V0Rm9ybSA9IGZ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6ICdoaWRkZW4nIH19PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L011aVRoZW1lUHJvdmlkZXI+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufSk7XHJcblxyXG5SZWFjdERvbS5yZW5kZXIoXHJcbiAgICA8SGFzaFJvdXRlcj5cclxuICAgICAgICA8QWRtaW5CYWNrb2ZmaWNlIC8+XHJcbiAgICA8L0hhc2hSb3V0ZXI+LFxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKVxyXG4pO1xyXG5cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vY29tcG9uZW50cy9BZG1pbkJhY2tvZmZpY2UuanMiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuaW1wb3J0IE11aVRoZW1lUHJvdmlkZXIgZnJvbSAnbWF0ZXJpYWwtdWkvc3R5bGVzL011aVRoZW1lUHJvdmlkZXInO1xyXG5pbXBvcnQgUmFpc2VkQnV0dG9uIGZyb20gJ21hdGVyaWFsLXVpL1JhaXNlZEJ1dHRvbic7XHJcbmltcG9ydCBUZXh0RmllbGQgZnJvbSAnbWF0ZXJpYWwtdWkvVGV4dEZpZWxkJztcclxuaW1wb3J0IHsgQ2FyZCwgQ2FyZEFjdGlvbnMsIENhcmRIZWFkZXIsIENhcmRUZXh0IH0gZnJvbSAnbWF0ZXJpYWwtdWkvQ2FyZCc7XHJcbmltcG9ydCBDaGVja2JveCBmcm9tICdtYXRlcmlhbC11aS9DaGVja2JveCc7XHJcbmltcG9ydCBGbGF0QnV0dG9uIGZyb20gJ21hdGVyaWFsLXVpL0ZsYXRCdXR0b24nO1xyXG5pbXBvcnQgRGlhbG9nIGZyb20gJ21hdGVyaWFsLXVpL0RpYWxvZyc7XHJcbmltcG9ydCBTbmFja2JhciBmcm9tICdtYXRlcmlhbC11aS9TbmFja2Jhcic7XHJcblxyXG5pbXBvcnQgQWN0aW9uSGVhZGVyIGZyb20gJy4vQWN0aW9uSGVhZGVyJztcclxuXHJcbmZ1bmN0aW9uIFNob3BNZW51KHByb3BzKSB7XHJcbiAgICBjb25zdCBtZW51ID0gcHJvcHMubWVudTtcclxuXHJcbiAgICBjb25zdCBtZW51Q2FyZHMgPSBtZW51Lm1hcChpdGVtID0+IHtcclxuICAgICAgICBjb25zdCBkaXNoID0gaXRlbS5kaXNoO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxDYXJkIHN0eWxlPXt7IGJhY2tncm91bmRDb2xvcjogXCJyZ2JhKDI1NSwyNTUsMjU1LDAuNylcIiB9fSA+XHJcbiAgICAgICAgICAgICAgICA8Q2FyZEhlYWRlclxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgUGxhdG8gJHtkaXNoLmlkfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU9e2Rpc2gubmFtZX0gLz5cclxuICAgICAgICAgICAgICAgIDxDYXJkVGV4dCBleHBhbmRhYmxlPXtmYWxzZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5EZXNjcmlwY2lvbjo8L3N0cm9uZz4ge2Rpc2guZGVzY3JpcHRpb259IDwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPkNvc3RvOjwvc3Ryb25nPiB7ZGlzaC5jb3N0fSA8L3A+XHJcbiAgICAgICAgICAgICAgICA8L0NhcmRUZXh0PlxyXG4gICAgICAgICAgICA8L0NhcmQ+XHJcbiAgICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiA8ZGl2PlxyXG4gICAgICAgIDxBY3Rpb25IZWFkZXIgb25DbGljaz17cHJvcHMuZ29CYWNrfSAvPlxyXG4gICAgICAgIHttZW51Q2FyZHN9XHJcbiAgICA8L2Rpdj47XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNob3BNZW51O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NvbXBvbmVudHMvU2hvcE1lbnUuanMiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG52YXIgYWRkTGVhZGluZ1NsYXNoID0gZXhwb3J0cy5hZGRMZWFkaW5nU2xhc2ggPSBmdW5jdGlvbiBhZGRMZWFkaW5nU2xhc2gocGF0aCkge1xuICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJyA/IHBhdGggOiAnLycgKyBwYXRoO1xufTtcblxudmFyIHN0cmlwTGVhZGluZ1NsYXNoID0gZXhwb3J0cy5zdHJpcExlYWRpbmdTbGFzaCA9IGZ1bmN0aW9uIHN0cmlwTGVhZGluZ1NsYXNoKHBhdGgpIHtcbiAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLycgPyBwYXRoLnN1YnN0cigxKSA6IHBhdGg7XG59O1xuXG52YXIgaGFzQmFzZW5hbWUgPSBleHBvcnRzLmhhc0Jhc2VuYW1lID0gZnVuY3Rpb24gaGFzQmFzZW5hbWUocGF0aCwgcHJlZml4KSB7XG4gIHJldHVybiBuZXcgUmVnRXhwKCdeJyArIHByZWZpeCArICcoXFxcXC98XFxcXD98I3wkKScsICdpJykudGVzdChwYXRoKTtcbn07XG5cbnZhciBzdHJpcEJhc2VuYW1lID0gZXhwb3J0cy5zdHJpcEJhc2VuYW1lID0gZnVuY3Rpb24gc3RyaXBCYXNlbmFtZShwYXRoLCBwcmVmaXgpIHtcbiAgcmV0dXJuIGhhc0Jhc2VuYW1lKHBhdGgsIHByZWZpeCkgPyBwYXRoLnN1YnN0cihwcmVmaXgubGVuZ3RoKSA6IHBhdGg7XG59O1xuXG52YXIgc3RyaXBUcmFpbGluZ1NsYXNoID0gZXhwb3J0cy5zdHJpcFRyYWlsaW5nU2xhc2ggPSBmdW5jdGlvbiBzdHJpcFRyYWlsaW5nU2xhc2gocGF0aCkge1xuICByZXR1cm4gcGF0aC5jaGFyQXQocGF0aC5sZW5ndGggLSAxKSA9PT0gJy8nID8gcGF0aC5zbGljZSgwLCAtMSkgOiBwYXRoO1xufTtcblxudmFyIHBhcnNlUGF0aCA9IGV4cG9ydHMucGFyc2VQYXRoID0gZnVuY3Rpb24gcGFyc2VQYXRoKHBhdGgpIHtcbiAgdmFyIHBhdGhuYW1lID0gcGF0aCB8fCAnLyc7XG4gIHZhciBzZWFyY2ggPSAnJztcbiAgdmFyIGhhc2ggPSAnJztcblxuICB2YXIgaGFzaEluZGV4ID0gcGF0aG5hbWUuaW5kZXhPZignIycpO1xuICBpZiAoaGFzaEluZGV4ICE9PSAtMSkge1xuICAgIGhhc2ggPSBwYXRobmFtZS5zdWJzdHIoaGFzaEluZGV4KTtcbiAgICBwYXRobmFtZSA9IHBhdGhuYW1lLnN1YnN0cigwLCBoYXNoSW5kZXgpO1xuICB9XG5cbiAgdmFyIHNlYXJjaEluZGV4ID0gcGF0aG5hbWUuaW5kZXhPZignPycpO1xuICBpZiAoc2VhcmNoSW5kZXggIT09IC0xKSB7XG4gICAgc2VhcmNoID0gcGF0aG5hbWUuc3Vic3RyKHNlYXJjaEluZGV4KTtcbiAgICBwYXRobmFtZSA9IHBhdGhuYW1lLnN1YnN0cigwLCBzZWFyY2hJbmRleCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHBhdGhuYW1lOiBwYXRobmFtZSxcbiAgICBzZWFyY2g6IHNlYXJjaCA9PT0gJz8nID8gJycgOiBzZWFyY2gsXG4gICAgaGFzaDogaGFzaCA9PT0gJyMnID8gJycgOiBoYXNoXG4gIH07XG59O1xuXG52YXIgY3JlYXRlUGF0aCA9IGV4cG9ydHMuY3JlYXRlUGF0aCA9IGZ1bmN0aW9uIGNyZWF0ZVBhdGgobG9jYXRpb24pIHtcbiAgdmFyIHBhdGhuYW1lID0gbG9jYXRpb24ucGF0aG5hbWUsXG4gICAgICBzZWFyY2ggPSBsb2NhdGlvbi5zZWFyY2gsXG4gICAgICBoYXNoID0gbG9jYXRpb24uaGFzaDtcblxuXG4gIHZhciBwYXRoID0gcGF0aG5hbWUgfHwgJy8nO1xuXG4gIGlmIChzZWFyY2ggJiYgc2VhcmNoICE9PSAnPycpIHBhdGggKz0gc2VhcmNoLmNoYXJBdCgwKSA9PT0gJz8nID8gc2VhcmNoIDogJz8nICsgc2VhcmNoO1xuXG4gIGlmIChoYXNoICYmIGhhc2ggIT09ICcjJykgcGF0aCArPSBoYXNoLmNoYXJBdCgwKSA9PT0gJyMnID8gaGFzaCA6ICcjJyArIGhhc2g7XG5cbiAgcmV0dXJuIHBhdGg7XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9oaXN0b3J5L1BhdGhVdGlscy5qc1xuLy8gbW9kdWxlIGlkID0gMzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJleHBvcnQgdmFyIGFkZExlYWRpbmdTbGFzaCA9IGZ1bmN0aW9uIGFkZExlYWRpbmdTbGFzaChwYXRoKSB7XG4gIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nID8gcGF0aCA6ICcvJyArIHBhdGg7XG59O1xuXG5leHBvcnQgdmFyIHN0cmlwTGVhZGluZ1NsYXNoID0gZnVuY3Rpb24gc3RyaXBMZWFkaW5nU2xhc2gocGF0aCkge1xuICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJyA/IHBhdGguc3Vic3RyKDEpIDogcGF0aDtcbn07XG5cbmV4cG9ydCB2YXIgaGFzQmFzZW5hbWUgPSBmdW5jdGlvbiBoYXNCYXNlbmFtZShwYXRoLCBwcmVmaXgpIHtcbiAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgcHJlZml4ICsgJyhcXFxcL3xcXFxcP3wjfCQpJywgJ2knKS50ZXN0KHBhdGgpO1xufTtcblxuZXhwb3J0IHZhciBzdHJpcEJhc2VuYW1lID0gZnVuY3Rpb24gc3RyaXBCYXNlbmFtZShwYXRoLCBwcmVmaXgpIHtcbiAgcmV0dXJuIGhhc0Jhc2VuYW1lKHBhdGgsIHByZWZpeCkgPyBwYXRoLnN1YnN0cihwcmVmaXgubGVuZ3RoKSA6IHBhdGg7XG59O1xuXG5leHBvcnQgdmFyIHN0cmlwVHJhaWxpbmdTbGFzaCA9IGZ1bmN0aW9uIHN0cmlwVHJhaWxpbmdTbGFzaChwYXRoKSB7XG4gIHJldHVybiBwYXRoLmNoYXJBdChwYXRoLmxlbmd0aCAtIDEpID09PSAnLycgPyBwYXRoLnNsaWNlKDAsIC0xKSA6IHBhdGg7XG59O1xuXG5leHBvcnQgdmFyIHBhcnNlUGF0aCA9IGZ1bmN0aW9uIHBhcnNlUGF0aChwYXRoKSB7XG4gIHZhciBwYXRobmFtZSA9IHBhdGggfHwgJy8nO1xuICB2YXIgc2VhcmNoID0gJyc7XG4gIHZhciBoYXNoID0gJyc7XG5cbiAgdmFyIGhhc2hJbmRleCA9IHBhdGhuYW1lLmluZGV4T2YoJyMnKTtcbiAgaWYgKGhhc2hJbmRleCAhPT0gLTEpIHtcbiAgICBoYXNoID0gcGF0aG5hbWUuc3Vic3RyKGhhc2hJbmRleCk7XG4gICAgcGF0aG5hbWUgPSBwYXRobmFtZS5zdWJzdHIoMCwgaGFzaEluZGV4KTtcbiAgfVxuXG4gIHZhciBzZWFyY2hJbmRleCA9IHBhdGhuYW1lLmluZGV4T2YoJz8nKTtcbiAgaWYgKHNlYXJjaEluZGV4ICE9PSAtMSkge1xuICAgIHNlYXJjaCA9IHBhdGhuYW1lLnN1YnN0cihzZWFyY2hJbmRleCk7XG4gICAgcGF0aG5hbWUgPSBwYXRobmFtZS5zdWJzdHIoMCwgc2VhcmNoSW5kZXgpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwYXRobmFtZTogcGF0aG5hbWUsXG4gICAgc2VhcmNoOiBzZWFyY2ggPT09ICc/JyA/ICcnIDogc2VhcmNoLFxuICAgIGhhc2g6IGhhc2ggPT09ICcjJyA/ICcnIDogaGFzaFxuICB9O1xufTtcblxuZXhwb3J0IHZhciBjcmVhdGVQYXRoID0gZnVuY3Rpb24gY3JlYXRlUGF0aChsb2NhdGlvbikge1xuICB2YXIgcGF0aG5hbWUgPSBsb2NhdGlvbi5wYXRobmFtZSxcbiAgICAgIHNlYXJjaCA9IGxvY2F0aW9uLnNlYXJjaCxcbiAgICAgIGhhc2ggPSBsb2NhdGlvbi5oYXNoO1xuXG5cbiAgdmFyIHBhdGggPSBwYXRobmFtZSB8fCAnLyc7XG5cbiAgaWYgKHNlYXJjaCAmJiBzZWFyY2ggIT09ICc/JykgcGF0aCArPSBzZWFyY2guY2hhckF0KDApID09PSAnPycgPyBzZWFyY2ggOiAnPycgKyBzZWFyY2g7XG5cbiAgaWYgKGhhc2ggJiYgaGFzaCAhPT0gJyMnKSBwYXRoICs9IGhhc2guY2hhckF0KDApID09PSAnIycgPyBoYXNoIDogJyMnICsgaGFzaDtcblxuICByZXR1cm4gcGF0aDtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2hpc3RvcnkvZXMvUGF0aFV0aWxzLmpzXG4vLyBtb2R1bGUgaWQgPSAzMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsInZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmltcG9ydCByZXNvbHZlUGF0aG5hbWUgZnJvbSAncmVzb2x2ZS1wYXRobmFtZSc7XG5pbXBvcnQgdmFsdWVFcXVhbCBmcm9tICd2YWx1ZS1lcXVhbCc7XG5pbXBvcnQgeyBwYXJzZVBhdGggfSBmcm9tICcuL1BhdGhVdGlscyc7XG5cbmV4cG9ydCB2YXIgY3JlYXRlTG9jYXRpb24gPSBmdW5jdGlvbiBjcmVhdGVMb2NhdGlvbihwYXRoLCBzdGF0ZSwga2V5LCBjdXJyZW50TG9jYXRpb24pIHtcbiAgdmFyIGxvY2F0aW9uID0gdm9pZCAwO1xuICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG4gICAgLy8gVHdvLWFyZyBmb3JtOiBwdXNoKHBhdGgsIHN0YXRlKVxuICAgIGxvY2F0aW9uID0gcGFyc2VQYXRoKHBhdGgpO1xuICAgIGxvY2F0aW9uLnN0YXRlID0gc3RhdGU7XG4gIH0gZWxzZSB7XG4gICAgLy8gT25lLWFyZyBmb3JtOiBwdXNoKGxvY2F0aW9uKVxuICAgIGxvY2F0aW9uID0gX2V4dGVuZHMoe30sIHBhdGgpO1xuXG4gICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lID09PSB1bmRlZmluZWQpIGxvY2F0aW9uLnBhdGhuYW1lID0gJyc7XG5cbiAgICBpZiAobG9jYXRpb24uc2VhcmNoKSB7XG4gICAgICBpZiAobG9jYXRpb24uc2VhcmNoLmNoYXJBdCgwKSAhPT0gJz8nKSBsb2NhdGlvbi5zZWFyY2ggPSAnPycgKyBsb2NhdGlvbi5zZWFyY2g7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uLnNlYXJjaCA9ICcnO1xuICAgIH1cblxuICAgIGlmIChsb2NhdGlvbi5oYXNoKSB7XG4gICAgICBpZiAobG9jYXRpb24uaGFzaC5jaGFyQXQoMCkgIT09ICcjJykgbG9jYXRpb24uaGFzaCA9ICcjJyArIGxvY2F0aW9uLmhhc2g7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uLmhhc2ggPSAnJztcbiAgICB9XG5cbiAgICBpZiAoc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBsb2NhdGlvbi5zdGF0ZSA9PT0gdW5kZWZpbmVkKSBsb2NhdGlvbi5zdGF0ZSA9IHN0YXRlO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBsb2NhdGlvbi5wYXRobmFtZSA9IGRlY29kZVVSSShsb2NhdGlvbi5wYXRobmFtZSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIFVSSUVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgVVJJRXJyb3IoJ1BhdGhuYW1lIFwiJyArIGxvY2F0aW9uLnBhdGhuYW1lICsgJ1wiIGNvdWxkIG5vdCBiZSBkZWNvZGVkLiAnICsgJ1RoaXMgaXMgbGlrZWx5IGNhdXNlZCBieSBhbiBpbnZhbGlkIHBlcmNlbnQtZW5jb2RpbmcuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG5cbiAgaWYgKGtleSkgbG9jYXRpb24ua2V5ID0ga2V5O1xuXG4gIGlmIChjdXJyZW50TG9jYXRpb24pIHtcbiAgICAvLyBSZXNvbHZlIGluY29tcGxldGUvcmVsYXRpdmUgcGF0aG5hbWUgcmVsYXRpdmUgdG8gY3VycmVudCBsb2NhdGlvbi5cbiAgICBpZiAoIWxvY2F0aW9uLnBhdGhuYW1lKSB7XG4gICAgICBsb2NhdGlvbi5wYXRobmFtZSA9IGN1cnJlbnRMb2NhdGlvbi5wYXRobmFtZTtcbiAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLnBhdGhuYW1lLmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICBsb2NhdGlvbi5wYXRobmFtZSA9IHJlc29sdmVQYXRobmFtZShsb2NhdGlvbi5wYXRobmFtZSwgY3VycmVudExvY2F0aW9uLnBhdGhuYW1lKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gV2hlbiB0aGVyZSBpcyBubyBwcmlvciBsb2NhdGlvbiBhbmQgcGF0aG5hbWUgaXMgZW1wdHksIHNldCBpdCB0byAvXG4gICAgaWYgKCFsb2NhdGlvbi5wYXRobmFtZSkge1xuICAgICAgbG9jYXRpb24ucGF0aG5hbWUgPSAnLyc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGxvY2F0aW9uO1xufTtcblxuZXhwb3J0IHZhciBsb2NhdGlvbnNBcmVFcXVhbCA9IGZ1bmN0aW9uIGxvY2F0aW9uc0FyZUVxdWFsKGEsIGIpIHtcbiAgcmV0dXJuIGEucGF0aG5hbWUgPT09IGIucGF0aG5hbWUgJiYgYS5zZWFyY2ggPT09IGIuc2VhcmNoICYmIGEuaGFzaCA9PT0gYi5oYXNoICYmIGEua2V5ID09PSBiLmtleSAmJiB2YWx1ZUVxdWFsKGEuc3RhdGUsIGIuc3RhdGUpO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vaGlzdG9yeS9lcy9Mb2NhdGlvblV0aWxzLmpzXG4vLyBtb2R1bGUgaWQgPSAzN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9leHRlbmRzJyk7XG5cbnZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzJyk7XG5cbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyKTtcblxudmFyIF9nZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZicpO1xuXG52YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcycpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybicpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpO1xuXG52YXIgX2luaGVyaXRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cycpO1xuXG52YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cbnZhciBfc2ltcGxlQXNzaWduID0gcmVxdWlyZSgnc2ltcGxlLWFzc2lnbicpO1xuXG52YXIgX3NpbXBsZUFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaW1wbGVBc3NpZ24pO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX3RyYW5zaXRpb25zID0gcmVxdWlyZSgnLi4vc3R5bGVzL3RyYW5zaXRpb25zJyk7XG5cbnZhciBfdHJhbnNpdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHJhbnNpdGlvbnMpO1xuXG52YXIgX2NvbG9yTWFuaXB1bGF0b3IgPSByZXF1aXJlKCcuLi91dGlscy9jb2xvck1hbmlwdWxhdG9yJyk7XG5cbnZhciBfRW5oYW5jZWRCdXR0b24gPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9FbmhhbmNlZEJ1dHRvbicpO1xuXG52YXIgX0VuaGFuY2VkQnV0dG9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0VuaGFuY2VkQnV0dG9uKTtcblxudmFyIF9Gb250SWNvbiA9IHJlcXVpcmUoJy4uL0ZvbnRJY29uJyk7XG5cbnZhciBfRm9udEljb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRm9udEljb24pO1xuXG52YXIgX1BhcGVyID0gcmVxdWlyZSgnLi4vUGFwZXInKTtcblxudmFyIF9QYXBlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9QYXBlcik7XG5cbnZhciBfY2hpbGRVdGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzL2NoaWxkVXRpbHMnKTtcblxudmFyIF93YXJuaW5nID0gcmVxdWlyZSgnd2FybmluZycpO1xuXG52YXIgX3dhcm5pbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2FybmluZyk7XG5cbnZhciBfcHJvcFR5cGVzMyA9IHJlcXVpcmUoJy4uL3V0aWxzL3Byb3BUeXBlcycpO1xuXG52YXIgX3Byb3BUeXBlczQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gZ2V0U3R5bGVzKHByb3BzLCBjb250ZXh0KSB7XG4gIHZhciBmbG9hdGluZ0FjdGlvbkJ1dHRvbiA9IGNvbnRleHQubXVpVGhlbWUuZmxvYXRpbmdBY3Rpb25CdXR0b247XG5cblxuICB2YXIgYmFja2dyb3VuZENvbG9yID0gcHJvcHMuYmFja2dyb3VuZENvbG9yIHx8IGZsb2F0aW5nQWN0aW9uQnV0dG9uLmNvbG9yO1xuICB2YXIgaWNvbkNvbG9yID0gZmxvYXRpbmdBY3Rpb25CdXR0b24uaWNvbkNvbG9yO1xuXG4gIGlmIChwcm9wcy5kaXNhYmxlZCkge1xuICAgIGJhY2tncm91bmRDb2xvciA9IHByb3BzLmRpc2FibGVkQ29sb3IgfHwgZmxvYXRpbmdBY3Rpb25CdXR0b24uZGlzYWJsZWRDb2xvcjtcbiAgICBpY29uQ29sb3IgPSBmbG9hdGluZ0FjdGlvbkJ1dHRvbi5kaXNhYmxlZFRleHRDb2xvcjtcbiAgfSBlbHNlIGlmIChwcm9wcy5zZWNvbmRhcnkpIHtcbiAgICBiYWNrZ3JvdW5kQ29sb3IgPSBmbG9hdGluZ0FjdGlvbkJ1dHRvbi5zZWNvbmRhcnlDb2xvcjtcbiAgICBpY29uQ29sb3IgPSBmbG9hdGluZ0FjdGlvbkJ1dHRvbi5zZWNvbmRhcnlJY29uQ29sb3I7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHJvb3Q6IHtcbiAgICAgIHRyYW5zaXRpb246IF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KCksXG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50J1xuICAgIH0sXG4gICAgY29udGFpbmVyOiB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJhY2tncm91bmRDb2xvcixcbiAgICAgIHRyYW5zaXRpb246IF90cmFuc2l0aW9uczIuZGVmYXVsdC5lYXNlT3V0KCksXG4gICAgICBoZWlnaHQ6IGZsb2F0aW5nQWN0aW9uQnV0dG9uLmJ1dHRvblNpemUsXG4gICAgICB3aWR0aDogZmxvYXRpbmdBY3Rpb25CdXR0b24uYnV0dG9uU2l6ZSxcbiAgICAgIHBhZGRpbmc6IDAsXG4gICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICBib3JkZXJSYWRpdXM6ICc1MCUnLFxuICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcbiAgICAgIHZlcnRpY2FsQWxpZ246ICdib3R0b20nXG4gICAgfSxcbiAgICBjb250YWluZXJXaGVuTWluaToge1xuICAgICAgaGVpZ2h0OiBmbG9hdGluZ0FjdGlvbkJ1dHRvbi5taW5pU2l6ZSxcbiAgICAgIHdpZHRoOiBmbG9hdGluZ0FjdGlvbkJ1dHRvbi5taW5pU2l6ZVxuICAgIH0sXG4gICAgb3ZlcmxheToge1xuICAgICAgdHJhbnNpdGlvbjogX3RyYW5zaXRpb25zMi5kZWZhdWx0LmVhc2VPdXQoKSxcbiAgICAgIHRvcDogMFxuICAgIH0sXG4gICAgb3ZlcmxheVdoZW5Ib3ZlcmVkOiB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICgwLCBfY29sb3JNYW5pcHVsYXRvci5mYWRlKShpY29uQ29sb3IsIDAuNClcbiAgICB9LFxuICAgIGljb246IHtcbiAgICAgIGhlaWdodDogZmxvYXRpbmdBY3Rpb25CdXR0b24uYnV0dG9uU2l6ZSxcbiAgICAgIGxpbmVIZWlnaHQ6IGZsb2F0aW5nQWN0aW9uQnV0dG9uLmJ1dHRvblNpemUgKyAncHgnLFxuICAgICAgZmlsbDogaWNvbkNvbG9yLFxuICAgICAgY29sb3I6IGljb25Db2xvclxuICAgIH0sXG4gICAgaWNvbldoZW5NaW5pOiB7XG4gICAgICBoZWlnaHQ6IGZsb2F0aW5nQWN0aW9uQnV0dG9uLm1pbmlTaXplLFxuICAgICAgbGluZUhlaWdodDogZmxvYXRpbmdBY3Rpb25CdXR0b24ubWluaVNpemUgKyAncHgnXG4gICAgfVxuICB9O1xufVxuXG52YXIgRmxvYXRpbmdBY3Rpb25CdXR0b24gPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShGbG9hdGluZ0FjdGlvbkJ1dHRvbiwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gRmxvYXRpbmdBY3Rpb25CdXR0b24oKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRmxvYXRpbmdBY3Rpb25CdXR0b24pO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChfcmVmID0gRmxvYXRpbmdBY3Rpb25CdXR0b24uX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKEZsb2F0aW5nQWN0aW9uQnV0dG9uKSkuY2FsbC5hcHBseShfcmVmLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBob3ZlcmVkOiBmYWxzZSxcbiAgICAgIHRvdWNoOiBmYWxzZSxcbiAgICAgIHpEZXB0aDogdW5kZWZpbmVkXG4gICAgfSwgX3RoaXMuaGFuZGxlTW91c2VEb3duID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAvLyBvbmx5IGxpc3RlbiB0byBsZWZ0IGNsaWNrc1xuICAgICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMCkge1xuICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHpEZXB0aDogX3RoaXMucHJvcHMuekRlcHRoICsgMSB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChfdGhpcy5wcm9wcy5vbk1vdXNlRG93bikgX3RoaXMucHJvcHMub25Nb3VzZURvd24oZXZlbnQpO1xuICAgIH0sIF90aGlzLmhhbmRsZU1vdXNlVXAgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHsgekRlcHRoOiBfdGhpcy5wcm9wcy56RGVwdGggfSk7XG4gICAgICBpZiAoX3RoaXMucHJvcHMub25Nb3VzZVVwKSB7XG4gICAgICAgIF90aGlzLnByb3BzLm9uTW91c2VVcChldmVudCk7XG4gICAgICB9XG4gICAgfSwgX3RoaXMuaGFuZGxlTW91c2VMZWF2ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKCFfdGhpcy5yZWZzLmNvbnRhaW5lci5pc0tleWJvYXJkRm9jdXNlZCgpKSB7XG4gICAgICAgIF90aGlzLnNldFN0YXRlKHsgekRlcHRoOiBfdGhpcy5wcm9wcy56RGVwdGgsIGhvdmVyZWQ6IGZhbHNlIH0pO1xuICAgICAgfVxuICAgICAgaWYgKF90aGlzLnByb3BzLm9uTW91c2VMZWF2ZSkge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbk1vdXNlTGVhdmUoZXZlbnQpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmhhbmRsZU1vdXNlRW50ZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmICghX3RoaXMucmVmcy5jb250YWluZXIuaXNLZXlib2FyZEZvY3VzZWQoKSAmJiAhX3RoaXMuc3RhdGUudG91Y2gpIHtcbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBob3ZlcmVkOiB0cnVlIH0pO1xuICAgICAgfVxuICAgICAgaWYgKF90aGlzLnByb3BzLm9uTW91c2VFbnRlcikge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbk1vdXNlRW50ZXIoZXZlbnQpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmhhbmRsZVRvdWNoU3RhcnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgdG91Y2g6IHRydWUsXG4gICAgICAgIHpEZXB0aDogX3RoaXMucHJvcHMuekRlcHRoICsgMVxuICAgICAgfSk7XG4gICAgICBpZiAoX3RoaXMucHJvcHMub25Ub3VjaFN0YXJ0KSB7XG4gICAgICAgIF90aGlzLnByb3BzLm9uVG91Y2hTdGFydChldmVudCk7XG4gICAgICB9XG4gICAgfSwgX3RoaXMuaGFuZGxlVG91Y2hFbmQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgdG91Y2g6IHRydWUsXG4gICAgICAgIHpEZXB0aDogX3RoaXMucHJvcHMuekRlcHRoXG4gICAgICB9KTtcbiAgICAgIGlmIChfdGhpcy5wcm9wcy5vblRvdWNoRW5kKSB7XG4gICAgICAgIF90aGlzLnByb3BzLm9uVG91Y2hFbmQoZXZlbnQpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmhhbmRsZUtleWJvYXJkRm9jdXMgPSBmdW5jdGlvbiAoZXZlbnQsIGtleWJvYXJkRm9jdXNlZCkge1xuICAgICAgaWYgKGtleWJvYXJkRm9jdXNlZCAmJiAhX3RoaXMucHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyB6RGVwdGg6IF90aGlzLnByb3BzLnpEZXB0aCArIDEgfSk7XG4gICAgICAgIF90aGlzLnJlZnMub3ZlcmxheS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAoMCwgX2NvbG9yTWFuaXB1bGF0b3IuZmFkZSkoZ2V0U3R5bGVzKF90aGlzLnByb3BzLCBfdGhpcy5jb250ZXh0KS5pY29uLmNvbG9yLCAwLjQpO1xuICAgICAgfSBlbHNlIGlmICghX3RoaXMuc3RhdGUuaG92ZXJlZCkge1xuICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHpEZXB0aDogX3RoaXMucHJvcHMuekRlcHRoIH0pO1xuICAgICAgICBfdGhpcy5yZWZzLm92ZXJsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3RyYW5zcGFyZW50JztcbiAgICAgIH1cbiAgICB9LCBfdGVtcCksICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkoX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRmxvYXRpbmdBY3Rpb25CdXR0b24sIFt7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbE1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHpEZXB0aDogdGhpcy5wcm9wcy5kaXNhYmxlZCA/IDAgOiB0aGlzLnByb3BzLnpEZXB0aFxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/ICgwLCBfd2FybmluZzIuZGVmYXVsdCkoIXRoaXMucHJvcHMuaWNvbkNsYXNzTmFtZSB8fCAhdGhpcy5wcm9wcy5jaGlsZHJlbiwgJ01hdGVyaWFsLVVJOiBZb3UgaGF2ZSBzZXQgYm90aCBhbiBpY29uQ2xhc3NOYW1lIGFuZCBhIGNoaWxkIGljb24uICcgKyAnSXQgaXMgcmVjb21tZW5kZWQgeW91IHVzZSBvbmx5IG9uZSBtZXRob2Qgd2hlbiBhZGRpbmcgJyArICdpY29ucyB0byBGbG9hdGluZ0FjdGlvbkJ1dHRvbnMuJykgOiB2b2lkIDA7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgICB2YXIgbmV4dFN0YXRlID0ge307XG5cbiAgICAgIGlmIChuZXh0UHJvcHMuZGlzYWJsZWQgIT09IHRoaXMucHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgICAgbmV4dFN0YXRlLnpEZXB0aCA9IG5leHRQcm9wcy5kaXNhYmxlZCA/IDAgOiB0aGlzLnByb3BzLnpEZXB0aDtcbiAgICAgIH1cbiAgICAgIGlmIChuZXh0UHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgICAgbmV4dFN0YXRlLmhvdmVyZWQgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXRTdGF0ZShuZXh0U3RhdGUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGJhY2tncm91bmRDb2xvciA9IF9wcm9wcy5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICAgICAgY2xhc3NOYW1lID0gX3Byb3BzLmNsYXNzTmFtZSxcbiAgICAgICAgICBjaGlsZHJlblByb3AgPSBfcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgICAgZGlzYWJsZWQgPSBfcHJvcHMuZGlzYWJsZWQsXG4gICAgICAgICAgZGlzYWJsZWRDb2xvciA9IF9wcm9wcy5kaXNhYmxlZENvbG9yLFxuICAgICAgICAgIG1pbmkgPSBfcHJvcHMubWluaSxcbiAgICAgICAgICBzZWNvbmRhcnkgPSBfcHJvcHMuc2Vjb25kYXJ5LFxuICAgICAgICAgIGljb25TdHlsZSA9IF9wcm9wcy5pY29uU3R5bGUsXG4gICAgICAgICAgaWNvbkNsYXNzTmFtZSA9IF9wcm9wcy5pY29uQ2xhc3NOYW1lLFxuICAgICAgICAgIHpEZXB0aCA9IF9wcm9wcy56RGVwdGgsXG4gICAgICAgICAgb3RoZXIgPSAoMCwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMy5kZWZhdWx0KShfcHJvcHMsIFsnYmFja2dyb3VuZENvbG9yJywgJ2NsYXNzTmFtZScsICdjaGlsZHJlbicsICdkaXNhYmxlZCcsICdkaXNhYmxlZENvbG9yJywgJ21pbmknLCAnc2Vjb25kYXJ5JywgJ2ljb25TdHlsZScsICdpY29uQ2xhc3NOYW1lJywgJ3pEZXB0aCddKTtcbiAgICAgIHZhciBwcmVwYXJlU3R5bGVzID0gdGhpcy5jb250ZXh0Lm11aVRoZW1lLnByZXBhcmVTdHlsZXM7XG5cbiAgICAgIHZhciBzdHlsZXMgPSBnZXRTdHlsZXModGhpcy5wcm9wcywgdGhpcy5jb250ZXh0KTtcblxuICAgICAgdmFyIGljb25FbGVtZW50ID0gdm9pZCAwO1xuICAgICAgaWYgKGljb25DbGFzc05hbWUpIHtcbiAgICAgICAgaWNvbkVsZW1lbnQgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfRm9udEljb24yLmRlZmF1bHQsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IGljb25DbGFzc05hbWUsXG4gICAgICAgICAgc3R5bGU6ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KSh7fSwgc3R5bGVzLmljb24sIG1pbmkgJiYgc3R5bGVzLmljb25XaGVuTWluaSwgaWNvblN0eWxlKVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdmFyIGNoaWxkcmVuID0gdm9pZCAwO1xuXG4gICAgICBpZiAoY2hpbGRyZW5Qcm9wKSB7XG4gICAgICAgIGNoaWxkcmVuID0gKDAsIF9jaGlsZFV0aWxzLmV4dGVuZENoaWxkcmVuKShjaGlsZHJlblByb3AsIGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdHlsZTogKDAsIF9zaW1wbGVBc3NpZ24yLmRlZmF1bHQpKHt9LCBzdHlsZXMuaWNvbiwgbWluaSAmJiBzdHlsZXMuaWNvbldoZW5NaW5pLCBpY29uU3R5bGUsIGNoaWxkLnByb3BzLnN0eWxlKVxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB2YXIgYnV0dG9uRXZlbnRIYW5kbGVycyA9IGRpc2FibGVkID8gbnVsbCA6IHtcbiAgICAgICAgb25Nb3VzZURvd246IHRoaXMuaGFuZGxlTW91c2VEb3duLFxuICAgICAgICBvbk1vdXNlVXA6IHRoaXMuaGFuZGxlTW91c2VVcCxcbiAgICAgICAgb25Nb3VzZUxlYXZlOiB0aGlzLmhhbmRsZU1vdXNlTGVhdmUsXG4gICAgICAgIG9uTW91c2VFbnRlcjogdGhpcy5oYW5kbGVNb3VzZUVudGVyLFxuICAgICAgICBvblRvdWNoU3RhcnQ6IHRoaXMuaGFuZGxlVG91Y2hTdGFydCxcbiAgICAgICAgb25Ub3VjaEVuZDogdGhpcy5oYW5kbGVUb3VjaEVuZCxcbiAgICAgICAgb25LZXlib2FyZEZvY3VzOiB0aGlzLmhhbmRsZUtleWJvYXJkRm9jdXNcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgX1BhcGVyMi5kZWZhdWx0LFxuICAgICAgICB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgICAgc3R5bGU6ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMucm9vdCwgdGhpcy5wcm9wcy5zdHlsZSksXG4gICAgICAgICAgekRlcHRoOiB0aGlzLnN0YXRlLnpEZXB0aCxcbiAgICAgICAgICBjaXJjbGU6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgX0VuaGFuY2VkQnV0dG9uMi5kZWZhdWx0LFxuICAgICAgICAgICgwLCBfZXh0ZW5kczMuZGVmYXVsdCkoe30sIG90aGVyLCBidXR0b25FdmVudEhhbmRsZXJzLCB7XG4gICAgICAgICAgICByZWY6ICdjb250YWluZXInLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLFxuICAgICAgICAgICAgc3R5bGU6ICgwLCBfc2ltcGxlQXNzaWduMi5kZWZhdWx0KShzdHlsZXMuY29udGFpbmVyLCB0aGlzLnByb3BzLm1pbmkgJiYgc3R5bGVzLmNvbnRhaW5lcldoZW5NaW5pLCBpY29uU3R5bGUpLFxuICAgICAgICAgICAgZm9jdXNSaXBwbGVDb2xvcjogc3R5bGVzLmljb24uY29sb3IsXG4gICAgICAgICAgICB0b3VjaFJpcHBsZUNvbG9yOiBzdHlsZXMuaWNvbi5jb2xvclxuICAgICAgICAgIH0pLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHJlZjogJ292ZXJsYXknLFxuICAgICAgICAgICAgICBzdHlsZTogcHJlcGFyZVN0eWxlcygoMCwgX3NpbXBsZUFzc2lnbjIuZGVmYXVsdCkoc3R5bGVzLm92ZXJsYXksIHRoaXMuc3RhdGUuaG92ZXJlZCAmJiAhdGhpcy5wcm9wcy5kaXNhYmxlZCAmJiBzdHlsZXMub3ZlcmxheVdoZW5Ib3ZlcmVkKSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpY29uRWxlbWVudCxcbiAgICAgICAgICAgIGNoaWxkcmVuXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gRmxvYXRpbmdBY3Rpb25CdXR0b247XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5GbG9hdGluZ0FjdGlvbkJ1dHRvbi5kZWZhdWx0UHJvcHMgPSB7XG4gIGRpc2FibGVkOiBmYWxzZSxcbiAgbWluaTogZmFsc2UsXG4gIHNlY29uZGFyeTogZmFsc2UsXG4gIHpEZXB0aDogMlxufTtcbkZsb2F0aW5nQWN0aW9uQnV0dG9uLmNvbnRleHRUeXBlcyA9IHtcbiAgbXVpVGhlbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5GbG9hdGluZ0FjdGlvbkJ1dHRvbi5wcm9wVHlwZXMgPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB7XG4gIC8qKlxuICAgKiBUaGlzIHZhbHVlIHdpbGwgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgYmFja2dyb3VuZCBjb2xvciBmb3IgdGhlIGJ1dHRvbi5cbiAgICogSG93ZXZlciBpdCB3aWxsIG5vdCBvdmVycmlkZSB0aGUgZGVmYXVsdCBkaXNhYmxlZCBiYWNrZ3JvdW5kIGNvbG9yLlxuICAgKiBUaGlzIGhhcyB0byBiZSBzZXQgc2VwYXJhdGVseSB1c2luZyB0aGUgZGlzYWJsZWRDb2xvciBhdHRyaWJ1dGUuXG4gICAqL1xuICBiYWNrZ3JvdW5kQ29sb3I6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogVGhpcyBpcyB3aGF0IGRpc3BsYXllZCBpbnNpZGUgdGhlIGZsb2F0aW5nIGFjdGlvbiBidXR0b247IGZvciBleGFtcGxlLCBhIFNWRyBJY29uLlxuICAgKi9cbiAgY2hpbGRyZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgLyoqXG4gICAqIFRoZSBjc3MgY2xhc3MgbmFtZSBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgY2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIERpc2FibGVzIHRoZSBidXR0b24gaWYgc2V0IHRvIHRydWUuXG4gICAqL1xuICBkaXNhYmxlZDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICAvKipcbiAgICogVGhpcyB2YWx1ZSB3aWxsIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGJhY2tncm91bmQgY29sb3IgZm9yIHRoZSBidXR0b24gd2hlbiBpdCBpcyBkaXNhYmxlZC5cbiAgICovXG4gIGRpc2FibGVkQ29sb3I6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICAvKipcbiAgICogVGhlIFVSTCB0byBsaW5rIHRvIHdoZW4gdGhlIGJ1dHRvbiBpcyBjbGlja2VkLlxuICAgKi9cbiAgaHJlZjogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIC8qKlxuICAgKiBUaGUgaWNvbiB3aXRoaW4gdGhlIEZsb2F0aW5nQWN0aW9uQnV0dG9uIGlzIGEgRm9udEljb24gY29tcG9uZW50LlxuICAgKiBUaGlzIHByb3BlcnR5IGlzIHRoZSBjbGFzc25hbWUgb2YgdGhlIGljb24gdG8gYmUgZGlzcGxheWVkIGluc2lkZSB0aGUgYnV0dG9uLlxuICAgKiBBbiBhbHRlcm5hdGl2ZSB0byBhZGRpbmcgYW4gaWNvbkNsYXNzTmFtZSB3b3VsZCBiZSB0byBtYW51YWxseSBpbnNlcnQgYVxuICAgKiBGb250SWNvbiBjb21wb25lbnQgb3IgY3VzdG9tIFN2Z0ljb24gY29tcG9uZW50IG9yIGFzIGEgY2hpbGQgb2YgRmxvYXRpbmdBY3Rpb25CdXR0b24uXG4gICAqL1xuICBpY29uQ2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnQgdG8gaWNvbkNsYXNzTmFtZSBleGNlcHQgdGhhdCBpdCBpcyB1c2VkIGZvclxuICAgKiBvdmVycmlkaW5nIHRoZSBpbmxpbmUtc3R5bGVzIG9mIHRoZSBGb250SWNvbiBjb21wb25lbnQuXG4gICAqL1xuICBpY29uU3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogSWYgdHJ1ZSwgdGhlIGJ1dHRvbiB3aWxsIGJlIGEgc21hbGwgZmxvYXRpbmcgYWN0aW9uIGJ1dHRvbi5cbiAgICovXG4gIG1pbmk6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgLyoqIEBpZ25vcmUgKi9cbiAgb25Nb3VzZURvd246IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqIEBpZ25vcmUgKi9cbiAgb25Nb3VzZUVudGVyOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIC8qKiBAaWdub3JlICovXG4gIG9uTW91c2VMZWF2ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKiogQGlnbm9yZSAqL1xuICBvbk1vdXNlVXA6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqIEBpZ25vcmUgKi9cbiAgb25Ub3VjaEVuZDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICAvKiogQGlnbm9yZSAqL1xuICBvblRvdWNoU3RhcnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZpcmVkIHdoZW4gdGhlIGJ1dHRvbiBpcyB0b3VjaC10YXBwZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBUb3VjaFRhcCBldmVudCB0YXJnZXRpbmcgdGhlIGJ1dHRvbi5cbiAgICovXG4gIG9uVG91Y2hUYXA6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgLyoqXG4gICAqIElmIHRydWUsIHRoZSBidXR0b24gd2lsbCB1c2UgdGhlIHNlY29uZGFyeSBidXR0b24gY29sb3JzLlxuICAgKi9cbiAgc2Vjb25kYXJ5OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgaW5saW5lLXN0eWxlcyBvZiB0aGUgcm9vdCBlbGVtZW50LlxuICAgKi9cbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAvKipcbiAgICogVGhlIHpEZXB0aCBvZiB0aGUgdW5kZXJseWluZyBgUGFwZXJgIGNvbXBvbmVudC5cbiAgICovXG4gIHpEZXB0aDogX3Byb3BUeXBlczQuZGVmYXVsdC56RGVwdGhcbn0gOiB7fTtcbmV4cG9ydHMuZGVmYXVsdCA9IEZsb2F0aW5nQWN0aW9uQnV0dG9uO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9GbG9hdGluZ0FjdGlvbkJ1dHRvbi9GbG9hdGluZ0FjdGlvbkJ1dHRvbi5qc1xuLy8gbW9kdWxlIGlkID0gNDE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHVuZGVmaW5lZDtcblxudmFyIF9GbG9hdGluZ0FjdGlvbkJ1dHRvbiA9IHJlcXVpcmUoJy4vRmxvYXRpbmdBY3Rpb25CdXR0b24nKTtcblxudmFyIF9GbG9hdGluZ0FjdGlvbkJ1dHRvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9GbG9hdGluZ0FjdGlvbkJ1dHRvbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuZGVmYXVsdCA9IF9GbG9hdGluZ0FjdGlvbkJ1dHRvbjIuZGVmYXVsdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWF0ZXJpYWwtdWkvRmxvYXRpbmdBY3Rpb25CdXR0b24vaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDQxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wdXJlID0gcmVxdWlyZSgncmVjb21wb3NlL3B1cmUnKTtcblxudmFyIF9wdXJlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3B1cmUpO1xuXG52YXIgX1N2Z0ljb24gPSByZXF1aXJlKCcuLi8uLi9TdmdJY29uJyk7XG5cbnZhciBfU3ZnSWNvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TdmdJY29uKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIENvbnRlbnRBZGQgPSBmdW5jdGlvbiBDb250ZW50QWRkKHByb3BzKSB7XG4gIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICBfU3ZnSWNvbjIuZGVmYXVsdCxcbiAgICBwcm9wcyxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgncGF0aCcsIHsgZDogJ00xOSAxM2gtNnY2aC0ydi02SDV2LTJoNlY1aDJ2Nmg2djJ6JyB9KVxuICApO1xufTtcbkNvbnRlbnRBZGQgPSAoMCwgX3B1cmUyLmRlZmF1bHQpKENvbnRlbnRBZGQpO1xuQ29udGVudEFkZC5kaXNwbGF5TmFtZSA9ICdDb250ZW50QWRkJztcbkNvbnRlbnRBZGQubXVpTmFtZSA9ICdTdmdJY29uJztcblxuZXhwb3J0cy5kZWZhdWx0ID0gQ29udGVudEFkZDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWF0ZXJpYWwtdWkvc3ZnLWljb25zL2NvbnRlbnQvYWRkLmpzXG4vLyBtb2R1bGUgaWQgPSA0NDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdW5kZWZpbmVkO1xuXG52YXIgX0RpYWxvZyA9IHJlcXVpcmUoJy4vRGlhbG9nJyk7XG5cbnZhciBfRGlhbG9nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RpYWxvZyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuZGVmYXVsdCA9IF9EaWFsb2cyLmRlZmF1bHQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L21hdGVyaWFsLXVpL0RpYWxvZy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gNDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDIiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmxvY2F0aW9uc0FyZUVxdWFsID0gZXhwb3J0cy5jcmVhdGVMb2NhdGlvbiA9IHVuZGVmaW5lZDtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9yZXNvbHZlUGF0aG5hbWUgPSByZXF1aXJlKCdyZXNvbHZlLXBhdGhuYW1lJyk7XG5cbnZhciBfcmVzb2x2ZVBhdGhuYW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Jlc29sdmVQYXRobmFtZSk7XG5cbnZhciBfdmFsdWVFcXVhbCA9IHJlcXVpcmUoJ3ZhbHVlLWVxdWFsJyk7XG5cbnZhciBfdmFsdWVFcXVhbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWx1ZUVxdWFsKTtcblxudmFyIF9QYXRoVXRpbHMgPSByZXF1aXJlKCcuL1BhdGhVdGlscycpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgY3JlYXRlTG9jYXRpb24gPSBleHBvcnRzLmNyZWF0ZUxvY2F0aW9uID0gZnVuY3Rpb24gY3JlYXRlTG9jYXRpb24ocGF0aCwgc3RhdGUsIGtleSwgY3VycmVudExvY2F0aW9uKSB7XG4gIHZhciBsb2NhdGlvbiA9IHZvaWQgMDtcbiAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgIC8vIFR3by1hcmcgZm9ybTogcHVzaChwYXRoLCBzdGF0ZSlcbiAgICBsb2NhdGlvbiA9ICgwLCBfUGF0aFV0aWxzLnBhcnNlUGF0aCkocGF0aCk7XG4gICAgbG9jYXRpb24uc3RhdGUgPSBzdGF0ZTtcbiAgfSBlbHNlIHtcbiAgICAvLyBPbmUtYXJnIGZvcm06IHB1c2gobG9jYXRpb24pXG4gICAgbG9jYXRpb24gPSBfZXh0ZW5kcyh7fSwgcGF0aCk7XG5cbiAgICBpZiAobG9jYXRpb24ucGF0aG5hbWUgPT09IHVuZGVmaW5lZCkgbG9jYXRpb24ucGF0aG5hbWUgPSAnJztcblxuICAgIGlmIChsb2NhdGlvbi5zZWFyY2gpIHtcbiAgICAgIGlmIChsb2NhdGlvbi5zZWFyY2guY2hhckF0KDApICE9PSAnPycpIGxvY2F0aW9uLnNlYXJjaCA9ICc/JyArIGxvY2F0aW9uLnNlYXJjaDtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9jYXRpb24uc2VhcmNoID0gJyc7XG4gICAgfVxuXG4gICAgaWYgKGxvY2F0aW9uLmhhc2gpIHtcbiAgICAgIGlmIChsb2NhdGlvbi5oYXNoLmNoYXJBdCgwKSAhPT0gJyMnKSBsb2NhdGlvbi5oYXNoID0gJyMnICsgbG9jYXRpb24uaGFzaDtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9jYXRpb24uaGFzaCA9ICcnO1xuICAgIH1cblxuICAgIGlmIChzdGF0ZSAhPT0gdW5kZWZpbmVkICYmIGxvY2F0aW9uLnN0YXRlID09PSB1bmRlZmluZWQpIGxvY2F0aW9uLnN0YXRlID0gc3RhdGU7XG4gIH1cblxuICB0cnkge1xuICAgIGxvY2F0aW9uLnBhdGhuYW1lID0gZGVjb2RlVVJJKGxvY2F0aW9uLnBhdGhuYW1lKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChlIGluc3RhbmNlb2YgVVJJRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBVUklFcnJvcignUGF0aG5hbWUgXCInICsgbG9jYXRpb24ucGF0aG5hbWUgKyAnXCIgY291bGQgbm90IGJlIGRlY29kZWQuICcgKyAnVGhpcyBpcyBsaWtlbHkgY2F1c2VkIGJ5IGFuIGludmFsaWQgcGVyY2VudC1lbmNvZGluZy4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gIH1cblxuICBpZiAoa2V5KSBsb2NhdGlvbi5rZXkgPSBrZXk7XG5cbiAgaWYgKGN1cnJlbnRMb2NhdGlvbikge1xuICAgIC8vIFJlc29sdmUgaW5jb21wbGV0ZS9yZWxhdGl2ZSBwYXRobmFtZSByZWxhdGl2ZSB0byBjdXJyZW50IGxvY2F0aW9uLlxuICAgIGlmICghbG9jYXRpb24ucGF0aG5hbWUpIHtcbiAgICAgIGxvY2F0aW9uLnBhdGhuYW1lID0gY3VycmVudExvY2F0aW9uLnBhdGhuYW1lO1xuICAgIH0gZWxzZSBpZiAobG9jYXRpb24ucGF0aG5hbWUuY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgIGxvY2F0aW9uLnBhdGhuYW1lID0gKDAsIF9yZXNvbHZlUGF0aG5hbWUyLmRlZmF1bHQpKGxvY2F0aW9uLnBhdGhuYW1lLCBjdXJyZW50TG9jYXRpb24ucGF0aG5hbWUpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBXaGVuIHRoZXJlIGlzIG5vIHByaW9yIGxvY2F0aW9uIGFuZCBwYXRobmFtZSBpcyBlbXB0eSwgc2V0IGl0IHRvIC9cbiAgICBpZiAoIWxvY2F0aW9uLnBhdGhuYW1lKSB7XG4gICAgICBsb2NhdGlvbi5wYXRobmFtZSA9ICcvJztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbG9jYXRpb247XG59O1xuXG52YXIgbG9jYXRpb25zQXJlRXF1YWwgPSBleHBvcnRzLmxvY2F0aW9uc0FyZUVxdWFsID0gZnVuY3Rpb24gbG9jYXRpb25zQXJlRXF1YWwoYSwgYikge1xuICByZXR1cm4gYS5wYXRobmFtZSA9PT0gYi5wYXRobmFtZSAmJiBhLnNlYXJjaCA9PT0gYi5zZWFyY2ggJiYgYS5oYXNoID09PSBiLmhhc2ggJiYgYS5rZXkgPT09IGIua2V5ICYmICgwLCBfdmFsdWVFcXVhbDIuZGVmYXVsdCkoYS5zdGF0ZSwgYi5zdGF0ZSk7XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9oaXN0b3J5L0xvY2F0aW9uVXRpbHMuanNcbi8vIG1vZHVsZSBpZCA9IDUwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX3dhcm5pbmcgPSByZXF1aXJlKCd3YXJuaW5nJyk7XG5cbnZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGNyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyID0gZnVuY3Rpb24gY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIoKSB7XG4gIHZhciBwcm9tcHQgPSBudWxsO1xuXG4gIHZhciBzZXRQcm9tcHQgPSBmdW5jdGlvbiBzZXRQcm9tcHQobmV4dFByb21wdCkge1xuICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkocHJvbXB0ID09IG51bGwsICdBIGhpc3Rvcnkgc3VwcG9ydHMgb25seSBvbmUgcHJvbXB0IGF0IGEgdGltZScpO1xuXG4gICAgcHJvbXB0ID0gbmV4dFByb21wdDtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAocHJvbXB0ID09PSBuZXh0UHJvbXB0KSBwcm9tcHQgPSBudWxsO1xuICAgIH07XG4gIH07XG5cbiAgdmFyIGNvbmZpcm1UcmFuc2l0aW9uVG8gPSBmdW5jdGlvbiBjb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGNhbGxiYWNrKSB7XG4gICAgLy8gVE9ETzogSWYgYW5vdGhlciB0cmFuc2l0aW9uIHN0YXJ0cyB3aGlsZSB3ZSdyZSBzdGlsbCBjb25maXJtaW5nXG4gICAgLy8gdGhlIHByZXZpb3VzIG9uZSwgd2UgbWF5IGVuZCB1cCBpbiBhIHdlaXJkIHN0YXRlLiBGaWd1cmUgb3V0IHRoZVxuICAgIC8vIGJlc3Qgd2F5IHRvIGhhbmRsZSB0aGlzLlxuICAgIGlmIChwcm9tcHQgIT0gbnVsbCkge1xuICAgICAgdmFyIHJlc3VsdCA9IHR5cGVvZiBwcm9tcHQgPT09ICdmdW5jdGlvbicgPyBwcm9tcHQobG9jYXRpb24sIGFjdGlvbikgOiBwcm9tcHQ7XG5cbiAgICAgIGlmICh0eXBlb2YgcmVzdWx0ID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAodHlwZW9mIGdldFVzZXJDb25maXJtYXRpb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBnZXRVc2VyQ29uZmlybWF0aW9uKHJlc3VsdCwgY2FsbGJhY2spO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkoZmFsc2UsICdBIGhpc3RvcnkgbmVlZHMgYSBnZXRVc2VyQ29uZmlybWF0aW9uIGZ1bmN0aW9uIGluIG9yZGVyIHRvIHVzZSBhIHByb21wdCBtZXNzYWdlJyk7XG5cbiAgICAgICAgICBjYWxsYmFjayh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGZyb20gYSB0cmFuc2l0aW9uIGhvb2sgdG8gY2FuY2VsIHRoZSB0cmFuc2l0aW9uLlxuICAgICAgICBjYWxsYmFjayhyZXN1bHQgIT09IGZhbHNlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2sodHJ1ZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBsaXN0ZW5lcnMgPSBbXTtcblxuICB2YXIgYXBwZW5kTGlzdGVuZXIgPSBmdW5jdGlvbiBhcHBlbmRMaXN0ZW5lcihmbikge1xuICAgIHZhciBpc0FjdGl2ZSA9IHRydWU7XG5cbiAgICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbiBsaXN0ZW5lcigpIHtcbiAgICAgIGlmIChpc0FjdGl2ZSkgZm4uYXBwbHkodW5kZWZpbmVkLCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICBsaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgIGxpc3RlbmVycyA9IGxpc3RlbmVycy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0gIT09IGxpc3RlbmVyO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgbm90aWZ5TGlzdGVuZXJzID0gZnVuY3Rpb24gbm90aWZ5TGlzdGVuZXJzKCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIGxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgcmV0dXJuIGxpc3RlbmVyLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBzZXRQcm9tcHQ6IHNldFByb21wdCxcbiAgICBjb25maXJtVHJhbnNpdGlvblRvOiBjb25maXJtVHJhbnNpdGlvblRvLFxuICAgIGFwcGVuZExpc3RlbmVyOiBhcHBlbmRMaXN0ZW5lcixcbiAgICBub3RpZnlMaXN0ZW5lcnM6IG5vdGlmeUxpc3RlbmVyc1xuICB9O1xufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2hpc3RvcnkvY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIuanNcbi8vIG1vZHVsZSBpZCA9IDUxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiaW1wb3J0IHdhcm5pbmcgZnJvbSAnd2FybmluZyc7XG5cbnZhciBjcmVhdGVUcmFuc2l0aW9uTWFuYWdlciA9IGZ1bmN0aW9uIGNyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyKCkge1xuICB2YXIgcHJvbXB0ID0gbnVsbDtcblxuICB2YXIgc2V0UHJvbXB0ID0gZnVuY3Rpb24gc2V0UHJvbXB0KG5leHRQcm9tcHQpIHtcbiAgICB3YXJuaW5nKHByb21wdCA9PSBudWxsLCAnQSBoaXN0b3J5IHN1cHBvcnRzIG9ubHkgb25lIHByb21wdCBhdCBhIHRpbWUnKTtcblxuICAgIHByb21wdCA9IG5leHRQcm9tcHQ7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHByb21wdCA9PT0gbmV4dFByb21wdCkgcHJvbXB0ID0gbnVsbDtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBjb25maXJtVHJhbnNpdGlvblRvID0gZnVuY3Rpb24gY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBjYWxsYmFjaykge1xuICAgIC8vIFRPRE86IElmIGFub3RoZXIgdHJhbnNpdGlvbiBzdGFydHMgd2hpbGUgd2UncmUgc3RpbGwgY29uZmlybWluZ1xuICAgIC8vIHRoZSBwcmV2aW91cyBvbmUsIHdlIG1heSBlbmQgdXAgaW4gYSB3ZWlyZCBzdGF0ZS4gRmlndXJlIG91dCB0aGVcbiAgICAvLyBiZXN0IHdheSB0byBoYW5kbGUgdGhpcy5cbiAgICBpZiAocHJvbXB0ICE9IG51bGwpIHtcbiAgICAgIHZhciByZXN1bHQgPSB0eXBlb2YgcHJvbXB0ID09PSAnZnVuY3Rpb24nID8gcHJvbXB0KGxvY2F0aW9uLCBhY3Rpb24pIDogcHJvbXB0O1xuXG4gICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBnZXRVc2VyQ29uZmlybWF0aW9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgZ2V0VXNlckNvbmZpcm1hdGlvbihyZXN1bHQsIGNhbGxiYWNrKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB3YXJuaW5nKGZhbHNlLCAnQSBoaXN0b3J5IG5lZWRzIGEgZ2V0VXNlckNvbmZpcm1hdGlvbiBmdW5jdGlvbiBpbiBvcmRlciB0byB1c2UgYSBwcm9tcHQgbWVzc2FnZScpO1xuXG4gICAgICAgICAgY2FsbGJhY2sodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJldHVybiBmYWxzZSBmcm9tIGEgdHJhbnNpdGlvbiBob29rIHRvIGNhbmNlbCB0aGUgdHJhbnNpdGlvbi5cbiAgICAgICAgY2FsbGJhY2socmVzdWx0ICE9PSBmYWxzZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxiYWNrKHRydWUpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgbGlzdGVuZXJzID0gW107XG5cbiAgdmFyIGFwcGVuZExpc3RlbmVyID0gZnVuY3Rpb24gYXBwZW5kTGlzdGVuZXIoZm4pIHtcbiAgICB2YXIgaXNBY3RpdmUgPSB0cnVlO1xuXG4gICAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24gbGlzdGVuZXIoKSB7XG4gICAgICBpZiAoaXNBY3RpdmUpIGZuLmFwcGx5KHVuZGVmaW5lZCwgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlzQWN0aXZlID0gZmFsc2U7XG4gICAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiBpdGVtICE9PSBsaXN0ZW5lcjtcbiAgICAgIH0pO1xuICAgIH07XG4gIH07XG5cbiAgdmFyIG5vdGlmeUxpc3RlbmVycyA9IGZ1bmN0aW9uIG5vdGlmeUxpc3RlbmVycygpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICBsaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBsaXN0ZW5lci5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgc2V0UHJvbXB0OiBzZXRQcm9tcHQsXG4gICAgY29uZmlybVRyYW5zaXRpb25UbzogY29uZmlybVRyYW5zaXRpb25UbyxcbiAgICBhcHBlbmRMaXN0ZW5lcjogYXBwZW5kTGlzdGVuZXIsXG4gICAgbm90aWZ5TGlzdGVuZXJzOiBub3RpZnlMaXN0ZW5lcnNcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9oaXN0b3J5L2VzL2NyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA1MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIi8vIFdyaXR0ZW4gaW4gdGhpcyByb3VuZCBhYm91dCB3YXkgZm9yIGJhYmVsLXRyYW5zZm9ybS1pbXBvcnRzXG5pbXBvcnQgUm91dGVyIGZyb20gJ3JlYWN0LXJvdXRlci9lcy9Sb3V0ZXInO1xuXG5leHBvcnQgZGVmYXVsdCBSb3V0ZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci1kb20vZXMvUm91dGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA1NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsInZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuaW1wb3J0IHdhcm5pbmcgZnJvbSAnd2FybmluZyc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcblxuLyoqXG4gKiBUaGUgcHVibGljIEFQSSBmb3IgcHV0dGluZyBoaXN0b3J5IG9uIGNvbnRleHQuXG4gKi9cblxudmFyIFJvdXRlciA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhSb3V0ZXIsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFJvdXRlcigpIHtcbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJvdXRlcik7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9SZWFjdCRDb21wb25lbnQuY2FsbC5hcHBseShfUmVhY3QkQ29tcG9uZW50LCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBtYXRjaDogX3RoaXMuY29tcHV0ZU1hdGNoKF90aGlzLnByb3BzLmhpc3RvcnkubG9jYXRpb24ucGF0aG5hbWUpXG4gICAgfSwgX3RlbXApLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7XG4gIH1cblxuICBSb3V0ZXIucHJvdG90eXBlLmdldENoaWxkQ29udGV4dCA9IGZ1bmN0aW9uIGdldENoaWxkQ29udGV4dCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcm91dGVyOiBfZXh0ZW5kcyh7fSwgdGhpcy5jb250ZXh0LnJvdXRlciwge1xuICAgICAgICBoaXN0b3J5OiB0aGlzLnByb3BzLmhpc3RvcnksXG4gICAgICAgIHJvdXRlOiB7XG4gICAgICAgICAgbG9jYXRpb246IHRoaXMucHJvcHMuaGlzdG9yeS5sb2NhdGlvbixcbiAgICAgICAgICBtYXRjaDogdGhpcy5zdGF0ZS5tYXRjaFxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH07XG4gIH07XG5cbiAgUm91dGVyLnByb3RvdHlwZS5jb21wdXRlTWF0Y2ggPSBmdW5jdGlvbiBjb21wdXRlTWF0Y2gocGF0aG5hbWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcGF0aDogJy8nLFxuICAgICAgdXJsOiAnLycsXG4gICAgICBwYXJhbXM6IHt9LFxuICAgICAgaXNFeGFjdDogcGF0aG5hbWUgPT09ICcvJ1xuICAgIH07XG4gIH07XG5cbiAgUm91dGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgY2hpbGRyZW4gPSBfcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgIGhpc3RvcnkgPSBfcHJvcHMuaGlzdG9yeTtcblxuXG4gICAgaW52YXJpYW50KGNoaWxkcmVuID09IG51bGwgfHwgUmVhY3QuQ2hpbGRyZW4uY291bnQoY2hpbGRyZW4pID09PSAxLCAnQSA8Um91dGVyPiBtYXkgaGF2ZSBvbmx5IG9uZSBjaGlsZCBlbGVtZW50Jyk7XG5cbiAgICAvLyBEbyB0aGlzIGhlcmUgc28gd2UgY2FuIHNldFN0YXRlIHdoZW4gYSA8UmVkaXJlY3Q+IGNoYW5nZXMgdGhlXG4gICAgLy8gbG9jYXRpb24gaW4gY29tcG9uZW50V2lsbE1vdW50LiBUaGlzIGhhcHBlbnMgZS5nLiB3aGVuIGRvaW5nXG4gICAgLy8gc2VydmVyIHJlbmRlcmluZyB1c2luZyBhIDxTdGF0aWNSb3V0ZXI+LlxuICAgIHRoaXMudW5saXN0ZW4gPSBoaXN0b3J5Lmxpc3RlbihmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpczIuc2V0U3RhdGUoe1xuICAgICAgICBtYXRjaDogX3RoaXMyLmNvbXB1dGVNYXRjaChoaXN0b3J5LmxvY2F0aW9uLnBhdGhuYW1lKVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgUm91dGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICB3YXJuaW5nKHRoaXMucHJvcHMuaGlzdG9yeSA9PT0gbmV4dFByb3BzLmhpc3RvcnksICdZb3UgY2Fubm90IGNoYW5nZSA8Um91dGVyIGhpc3Rvcnk+Jyk7XG4gIH07XG5cbiAgUm91dGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMudW5saXN0ZW4oKTtcbiAgfTtcblxuICBSb3V0ZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLnByb3BzLmNoaWxkcmVuO1xuXG4gICAgcmV0dXJuIGNoaWxkcmVuID8gUmVhY3QuQ2hpbGRyZW4ub25seShjaGlsZHJlbikgOiBudWxsO1xuICB9O1xuXG4gIHJldHVybiBSb3V0ZXI7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cblJvdXRlci5wcm9wVHlwZXMgPSB7XG4gIGhpc3Rvcnk6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5ub2RlXG59O1xuUm91dGVyLmNvbnRleHRUeXBlcyA9IHtcbiAgcm91dGVyOiBQcm9wVHlwZXMub2JqZWN0XG59O1xuUm91dGVyLmNoaWxkQ29udGV4dFR5cGVzID0ge1xuICByb3V0ZXI6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZFxufTtcblxuXG5leHBvcnQgZGVmYXVsdCBSb3V0ZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci9lcy9Sb3V0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDU2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiaW1wb3J0IHBhdGhUb1JlZ2V4cCBmcm9tICdwYXRoLXRvLXJlZ2V4cCc7XG5cbnZhciBwYXR0ZXJuQ2FjaGUgPSB7fTtcbnZhciBjYWNoZUxpbWl0ID0gMTAwMDA7XG52YXIgY2FjaGVDb3VudCA9IDA7XG5cbnZhciBjb21waWxlUGF0aCA9IGZ1bmN0aW9uIGNvbXBpbGVQYXRoKHBhdHRlcm4sIG9wdGlvbnMpIHtcbiAgdmFyIGNhY2hlS2V5ID0gJycgKyBvcHRpb25zLmVuZCArIG9wdGlvbnMuc3RyaWN0ICsgb3B0aW9ucy5zZW5zaXRpdmU7XG4gIHZhciBjYWNoZSA9IHBhdHRlcm5DYWNoZVtjYWNoZUtleV0gfHwgKHBhdHRlcm5DYWNoZVtjYWNoZUtleV0gPSB7fSk7XG5cbiAgaWYgKGNhY2hlW3BhdHRlcm5dKSByZXR1cm4gY2FjaGVbcGF0dGVybl07XG5cbiAgdmFyIGtleXMgPSBbXTtcbiAgdmFyIHJlID0gcGF0aFRvUmVnZXhwKHBhdHRlcm4sIGtleXMsIG9wdGlvbnMpO1xuICB2YXIgY29tcGlsZWRQYXR0ZXJuID0geyByZTogcmUsIGtleXM6IGtleXMgfTtcblxuICBpZiAoY2FjaGVDb3VudCA8IGNhY2hlTGltaXQpIHtcbiAgICBjYWNoZVtwYXR0ZXJuXSA9IGNvbXBpbGVkUGF0dGVybjtcbiAgICBjYWNoZUNvdW50Kys7XG4gIH1cblxuICByZXR1cm4gY29tcGlsZWRQYXR0ZXJuO1xufTtcblxuLyoqXG4gKiBQdWJsaWMgQVBJIGZvciBtYXRjaGluZyBhIFVSTCBwYXRobmFtZSB0byBhIHBhdGggcGF0dGVybi5cbiAqL1xudmFyIG1hdGNoUGF0aCA9IGZ1bmN0aW9uIG1hdGNoUGF0aChwYXRobmFtZSkge1xuICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykgb3B0aW9ucyA9IHsgcGF0aDogb3B0aW9ucyB9O1xuXG4gIHZhciBfb3B0aW9ucyA9IG9wdGlvbnMsXG4gICAgICBfb3B0aW9ucyRwYXRoID0gX29wdGlvbnMucGF0aCxcbiAgICAgIHBhdGggPSBfb3B0aW9ucyRwYXRoID09PSB1bmRlZmluZWQgPyAnLycgOiBfb3B0aW9ucyRwYXRoLFxuICAgICAgX29wdGlvbnMkZXhhY3QgPSBfb3B0aW9ucy5leGFjdCxcbiAgICAgIGV4YWN0ID0gX29wdGlvbnMkZXhhY3QgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX29wdGlvbnMkZXhhY3QsXG4gICAgICBfb3B0aW9ucyRzdHJpY3QgPSBfb3B0aW9ucy5zdHJpY3QsXG4gICAgICBzdHJpY3QgPSBfb3B0aW9ucyRzdHJpY3QgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX29wdGlvbnMkc3RyaWN0LFxuICAgICAgX29wdGlvbnMkc2Vuc2l0aXZlID0gX29wdGlvbnMuc2Vuc2l0aXZlLFxuICAgICAgc2Vuc2l0aXZlID0gX29wdGlvbnMkc2Vuc2l0aXZlID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9vcHRpb25zJHNlbnNpdGl2ZTtcblxuICB2YXIgX2NvbXBpbGVQYXRoID0gY29tcGlsZVBhdGgocGF0aCwgeyBlbmQ6IGV4YWN0LCBzdHJpY3Q6IHN0cmljdCwgc2Vuc2l0aXZlOiBzZW5zaXRpdmUgfSksXG4gICAgICByZSA9IF9jb21waWxlUGF0aC5yZSxcbiAgICAgIGtleXMgPSBfY29tcGlsZVBhdGgua2V5cztcblxuICB2YXIgbWF0Y2ggPSByZS5leGVjKHBhdGhuYW1lKTtcblxuICBpZiAoIW1hdGNoKSByZXR1cm4gbnVsbDtcblxuICB2YXIgdXJsID0gbWF0Y2hbMF0sXG4gICAgICB2YWx1ZXMgPSBtYXRjaC5zbGljZSgxKTtcblxuICB2YXIgaXNFeGFjdCA9IHBhdGhuYW1lID09PSB1cmw7XG5cbiAgaWYgKGV4YWN0ICYmICFpc0V4YWN0KSByZXR1cm4gbnVsbDtcblxuICByZXR1cm4ge1xuICAgIHBhdGg6IHBhdGgsIC8vIHRoZSBwYXRoIHBhdHRlcm4gdXNlZCB0byBtYXRjaFxuICAgIHVybDogcGF0aCA9PT0gJy8nICYmIHVybCA9PT0gJycgPyAnLycgOiB1cmwsIC8vIHRoZSBtYXRjaGVkIHBvcnRpb24gb2YgdGhlIFVSTFxuICAgIGlzRXhhY3Q6IGlzRXhhY3QsIC8vIHdoZXRoZXIgb3Igbm90IHdlIG1hdGNoZWQgZXhhY3RseVxuICAgIHBhcmFtczoga2V5cy5yZWR1Y2UoZnVuY3Rpb24gKG1lbW8sIGtleSwgaW5kZXgpIHtcbiAgICAgIG1lbW9ba2V5Lm5hbWVdID0gdmFsdWVzW2luZGV4XTtcbiAgICAgIHJldHVybiBtZW1vO1xuICAgIH0sIHt9KVxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgbWF0Y2hQYXRoO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXIvZXMvbWF0Y2hQYXRoLmpzXG4vLyBtb2R1bGUgaWQgPSA1N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHVuZGVmaW5lZDtcblxudmFyIF9DaGVja2JveCA9IHJlcXVpcmUoJy4vQ2hlY2tib3gnKTtcblxudmFyIF9DaGVja2JveDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9DaGVja2JveCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuZGVmYXVsdCA9IF9DaGVja2JveDIuZGVmYXVsdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWF0ZXJpYWwtdWkvQ2hlY2tib3gvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDgwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAyIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdW5kZWZpbmVkO1xuXG52YXIgX1NuYWNrYmFyID0gcmVxdWlyZSgnLi9TbmFja2JhcicpO1xuXG52YXIgX1NuYWNrYmFyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1NuYWNrYmFyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZXhwb3J0cy5kZWZhdWx0ID0gX1NuYWNrYmFyMi5kZWZhdWx0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXRlcmlhbC11aS9TbmFja2Jhci9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gODFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDIiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG52YXIgY2FuVXNlRE9NID0gZXhwb3J0cy5jYW5Vc2VET00gPSAhISh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZG9jdW1lbnQgJiYgd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO1xuXG52YXIgYWRkRXZlbnRMaXN0ZW5lciA9IGV4cG9ydHMuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIobm9kZSwgZXZlbnQsIGxpc3RlbmVyKSB7XG4gIHJldHVybiBub2RlLmFkZEV2ZW50TGlzdGVuZXIgPyBub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyLCBmYWxzZSkgOiBub2RlLmF0dGFjaEV2ZW50KCdvbicgKyBldmVudCwgbGlzdGVuZXIpO1xufTtcblxudmFyIHJlbW92ZUV2ZW50TGlzdGVuZXIgPSBleHBvcnRzLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKG5vZGUsIGV2ZW50LCBsaXN0ZW5lcikge1xuICByZXR1cm4gbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyID8gbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpIDogbm9kZS5kZXRhY2hFdmVudCgnb24nICsgZXZlbnQsIGxpc3RlbmVyKTtcbn07XG5cbnZhciBnZXRDb25maXJtYXRpb24gPSBleHBvcnRzLmdldENvbmZpcm1hdGlvbiA9IGZ1bmN0aW9uIGdldENvbmZpcm1hdGlvbihtZXNzYWdlLCBjYWxsYmFjaykge1xuICByZXR1cm4gY2FsbGJhY2sod2luZG93LmNvbmZpcm0obWVzc2FnZSkpO1xufTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1hbGVydFxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgSFRNTDUgaGlzdG9yeSBBUEkgaXMgc3VwcG9ydGVkLiBUYWtlbiBmcm9tIE1vZGVybml6ci5cbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci9ibG9iL21hc3Rlci9MSUNFTlNFXG4gKiBodHRwczovL2dpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci9ibG9iL21hc3Rlci9mZWF0dXJlLWRldGVjdHMvaGlzdG9yeS5qc1xuICogY2hhbmdlZCB0byBhdm9pZCBmYWxzZSBuZWdhdGl2ZXMgZm9yIFdpbmRvd3MgUGhvbmVzOiBodHRwczovL2dpdGh1Yi5jb20vcmVhY3Rqcy9yZWFjdC1yb3V0ZXIvaXNzdWVzLzU4NlxuICovXG52YXIgc3VwcG9ydHNIaXN0b3J5ID0gZXhwb3J0cy5zdXBwb3J0c0hpc3RvcnkgPSBmdW5jdGlvbiBzdXBwb3J0c0hpc3RvcnkoKSB7XG4gIHZhciB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xuXG4gIGlmICgodWEuaW5kZXhPZignQW5kcm9pZCAyLicpICE9PSAtMSB8fCB1YS5pbmRleE9mKCdBbmRyb2lkIDQuMCcpICE9PSAtMSkgJiYgdWEuaW5kZXhPZignTW9iaWxlIFNhZmFyaScpICE9PSAtMSAmJiB1YS5pbmRleE9mKCdDaHJvbWUnKSA9PT0gLTEgJiYgdWEuaW5kZXhPZignV2luZG93cyBQaG9uZScpID09PSAtMSkgcmV0dXJuIGZhbHNlO1xuXG4gIHJldHVybiB3aW5kb3cuaGlzdG9yeSAmJiAncHVzaFN0YXRlJyBpbiB3aW5kb3cuaGlzdG9yeTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGJyb3dzZXIgZmlyZXMgcG9wc3RhdGUgb24gaGFzaCBjaGFuZ2UuXG4gKiBJRTEwIGFuZCBJRTExIGRvIG5vdC5cbiAqL1xudmFyIHN1cHBvcnRzUG9wU3RhdGVPbkhhc2hDaGFuZ2UgPSBleHBvcnRzLnN1cHBvcnRzUG9wU3RhdGVPbkhhc2hDaGFuZ2UgPSBmdW5jdGlvbiBzdXBwb3J0c1BvcFN0YXRlT25IYXNoQ2hhbmdlKCkge1xuICByZXR1cm4gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignVHJpZGVudCcpID09PSAtMTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBmYWxzZSBpZiB1c2luZyBnbyhuKSB3aXRoIGhhc2ggaGlzdG9yeSBjYXVzZXMgYSBmdWxsIHBhZ2UgcmVsb2FkLlxuICovXG52YXIgc3VwcG9ydHNHb1dpdGhvdXRSZWxvYWRVc2luZ0hhc2ggPSBleHBvcnRzLnN1cHBvcnRzR29XaXRob3V0UmVsb2FkVXNpbmdIYXNoID0gZnVuY3Rpb24gc3VwcG9ydHNHb1dpdGhvdXRSZWxvYWRVc2luZ0hhc2goKSB7XG4gIHJldHVybiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94JykgPT09IC0xO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYSBnaXZlbiBwb3BzdGF0ZSBldmVudCBpcyBhbiBleHRyYW5lb3VzIFdlYktpdCBldmVudC5cbiAqIEFjY291bnRzIGZvciB0aGUgZmFjdCB0aGF0IENocm9tZSBvbiBpT1MgZmlyZXMgcmVhbCBwb3BzdGF0ZSBldmVudHNcbiAqIGNvbnRhaW5pbmcgdW5kZWZpbmVkIHN0YXRlIHdoZW4gcHJlc3NpbmcgdGhlIGJhY2sgYnV0dG9uLlxuICovXG52YXIgaXNFeHRyYW5lb3VzUG9wc3RhdGVFdmVudCA9IGV4cG9ydHMuaXNFeHRyYW5lb3VzUG9wc3RhdGVFdmVudCA9IGZ1bmN0aW9uIGlzRXh0cmFuZW91c1BvcHN0YXRlRXZlbnQoZXZlbnQpIHtcbiAgcmV0dXJuIGV2ZW50LnN0YXRlID09PSB1bmRlZmluZWQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdDcmlPUycpID09PSAtMTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2hpc3RvcnkvRE9NVXRpbHMuanNcbi8vIG1vZHVsZSBpZCA9IDg3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiZXhwb3J0IHZhciBjYW5Vc2VET00gPSAhISh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZG9jdW1lbnQgJiYgd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO1xuXG5leHBvcnQgdmFyIGFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKG5vZGUsIGV2ZW50LCBsaXN0ZW5lcikge1xuICByZXR1cm4gbm9kZS5hZGRFdmVudExpc3RlbmVyID8gbm9kZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpIDogbm9kZS5hdHRhY2hFdmVudCgnb24nICsgZXZlbnQsIGxpc3RlbmVyKTtcbn07XG5cbmV4cG9ydCB2YXIgcmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIobm9kZSwgZXZlbnQsIGxpc3RlbmVyKSB7XG4gIHJldHVybiBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPyBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyLCBmYWxzZSkgOiBub2RlLmRldGFjaEV2ZW50KCdvbicgKyBldmVudCwgbGlzdGVuZXIpO1xufTtcblxuZXhwb3J0IHZhciBnZXRDb25maXJtYXRpb24gPSBmdW5jdGlvbiBnZXRDb25maXJtYXRpb24obWVzc2FnZSwgY2FsbGJhY2spIHtcbiAgcmV0dXJuIGNhbGxiYWNrKHdpbmRvdy5jb25maXJtKG1lc3NhZ2UpKTtcbn07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tYWxlcnRcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIEhUTUw1IGhpc3RvcnkgQVBJIGlzIHN1cHBvcnRlZC4gVGFrZW4gZnJvbSBNb2Rlcm5penIuXG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvYmxvYi9tYXN0ZXIvTElDRU5TRVxuICogaHR0cHM6Ly9naXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvYmxvYi9tYXN0ZXIvZmVhdHVyZS1kZXRlY3RzL2hpc3RvcnkuanNcbiAqIGNoYW5nZWQgdG8gYXZvaWQgZmFsc2UgbmVnYXRpdmVzIGZvciBXaW5kb3dzIFBob25lczogaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0anMvcmVhY3Qtcm91dGVyL2lzc3Vlcy81ODZcbiAqL1xuZXhwb3J0IHZhciBzdXBwb3J0c0hpc3RvcnkgPSBmdW5jdGlvbiBzdXBwb3J0c0hpc3RvcnkoKSB7XG4gIHZhciB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xuXG4gIGlmICgodWEuaW5kZXhPZignQW5kcm9pZCAyLicpICE9PSAtMSB8fCB1YS5pbmRleE9mKCdBbmRyb2lkIDQuMCcpICE9PSAtMSkgJiYgdWEuaW5kZXhPZignTW9iaWxlIFNhZmFyaScpICE9PSAtMSAmJiB1YS5pbmRleE9mKCdDaHJvbWUnKSA9PT0gLTEgJiYgdWEuaW5kZXhPZignV2luZG93cyBQaG9uZScpID09PSAtMSkgcmV0dXJuIGZhbHNlO1xuXG4gIHJldHVybiB3aW5kb3cuaGlzdG9yeSAmJiAncHVzaFN0YXRlJyBpbiB3aW5kb3cuaGlzdG9yeTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGJyb3dzZXIgZmlyZXMgcG9wc3RhdGUgb24gaGFzaCBjaGFuZ2UuXG4gKiBJRTEwIGFuZCBJRTExIGRvIG5vdC5cbiAqL1xuZXhwb3J0IHZhciBzdXBwb3J0c1BvcFN0YXRlT25IYXNoQ2hhbmdlID0gZnVuY3Rpb24gc3VwcG9ydHNQb3BTdGF0ZU9uSGFzaENoYW5nZSgpIHtcbiAgcmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ1RyaWRlbnQnKSA9PT0gLTE7XG59O1xuXG4vKipcbiAqIFJldHVybnMgZmFsc2UgaWYgdXNpbmcgZ28obikgd2l0aCBoYXNoIGhpc3RvcnkgY2F1c2VzIGEgZnVsbCBwYWdlIHJlbG9hZC5cbiAqL1xuZXhwb3J0IHZhciBzdXBwb3J0c0dvV2l0aG91dFJlbG9hZFVzaW5nSGFzaCA9IGZ1bmN0aW9uIHN1cHBvcnRzR29XaXRob3V0UmVsb2FkVXNpbmdIYXNoKCkge1xuICByZXR1cm4gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRmlyZWZveCcpID09PSAtMTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGEgZ2l2ZW4gcG9wc3RhdGUgZXZlbnQgaXMgYW4gZXh0cmFuZW91cyBXZWJLaXQgZXZlbnQuXG4gKiBBY2NvdW50cyBmb3IgdGhlIGZhY3QgdGhhdCBDaHJvbWUgb24gaU9TIGZpcmVzIHJlYWwgcG9wc3RhdGUgZXZlbnRzXG4gKiBjb250YWluaW5nIHVuZGVmaW5lZCBzdGF0ZSB3aGVuIHByZXNzaW5nIHRoZSBiYWNrIGJ1dHRvbi5cbiAqL1xuZXhwb3J0IHZhciBpc0V4dHJhbmVvdXNQb3BzdGF0ZUV2ZW50ID0gZnVuY3Rpb24gaXNFeHRyYW5lb3VzUG9wc3RhdGVFdmVudChldmVudCkge1xuICByZXR1cm4gZXZlbnQuc3RhdGUgPT09IHVuZGVmaW5lZCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0NyaU9TJykgPT09IC0xO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vaGlzdG9yeS9lcy9ET01VdGlscy5qc1xuLy8gbW9kdWxlIGlkID0gODhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJ2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMob2JqLCBrZXlzKSB7IHZhciB0YXJnZXQgPSB7fTsgZm9yICh2YXIgaSBpbiBvYmopIHsgaWYgKGtleXMuaW5kZXhPZihpKSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBpKSkgY29udGludWU7IHRhcmdldFtpXSA9IG9ialtpXTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5cbnZhciBpc01vZGlmaWVkRXZlbnQgPSBmdW5jdGlvbiBpc01vZGlmaWVkRXZlbnQoZXZlbnQpIHtcbiAgcmV0dXJuICEhKGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuYWx0S2V5IHx8IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQuc2hpZnRLZXkpO1xufTtcblxuLyoqXG4gKiBUaGUgcHVibGljIEFQSSBmb3IgcmVuZGVyaW5nIGEgaGlzdG9yeS1hd2FyZSA8YT4uXG4gKi9cblxudmFyIExpbmsgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoTGluaywgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gTGluaygpIHtcbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExpbmspO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfUmVhY3QkQ29tcG9uZW50LmNhbGwuYXBwbHkoX1JlYWN0JENvbXBvbmVudCwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLmhhbmRsZUNsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoX3RoaXMucHJvcHMub25DbGljaykgX3RoaXMucHJvcHMub25DbGljayhldmVudCk7XG5cbiAgICAgIGlmICghZXZlbnQuZGVmYXVsdFByZXZlbnRlZCAmJiAvLyBvbkNsaWNrIHByZXZlbnRlZCBkZWZhdWx0XG4gICAgICBldmVudC5idXR0b24gPT09IDAgJiYgLy8gaWdub3JlIHJpZ2h0IGNsaWNrc1xuICAgICAgIV90aGlzLnByb3BzLnRhcmdldCAmJiAvLyBsZXQgYnJvd3NlciBoYW5kbGUgXCJ0YXJnZXQ9X2JsYW5rXCIgZXRjLlxuICAgICAgIWlzTW9kaWZpZWRFdmVudChldmVudCkgLy8gaWdub3JlIGNsaWNrcyB3aXRoIG1vZGlmaWVyIGtleXNcbiAgICAgICkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICB2YXIgaGlzdG9yeSA9IF90aGlzLmNvbnRleHQucm91dGVyLmhpc3Rvcnk7XG4gICAgICAgICAgdmFyIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgICAgIHJlcGxhY2UgPSBfdGhpcyRwcm9wcy5yZXBsYWNlLFxuICAgICAgICAgICAgICB0byA9IF90aGlzJHByb3BzLnRvO1xuXG5cbiAgICAgICAgICBpZiAocmVwbGFjZSkge1xuICAgICAgICAgICAgaGlzdG9yeS5yZXBsYWNlKHRvKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaGlzdG9yeS5wdXNoKHRvKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCBfdGVtcCksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gIExpbmsucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgcmVwbGFjZSA9IF9wcm9wcy5yZXBsYWNlLFxuICAgICAgICB0byA9IF9wcm9wcy50byxcbiAgICAgICAgaW5uZXJSZWYgPSBfcHJvcHMuaW5uZXJSZWYsXG4gICAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9wcm9wcywgWydyZXBsYWNlJywgJ3RvJywgJ2lubmVyUmVmJ10pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cbiAgICBpbnZhcmlhbnQodGhpcy5jb250ZXh0LnJvdXRlciwgJ1lvdSBzaG91bGQgbm90IHVzZSA8TGluaz4gb3V0c2lkZSBhIDxSb3V0ZXI+Jyk7XG5cbiAgICB2YXIgaHJlZiA9IHRoaXMuY29udGV4dC5yb3V0ZXIuaGlzdG9yeS5jcmVhdGVIcmVmKHR5cGVvZiB0byA9PT0gJ3N0cmluZycgPyB7IHBhdGhuYW1lOiB0byB9IDogdG8pO1xuXG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ2EnLCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHsgb25DbGljazogdGhpcy5oYW5kbGVDbGljaywgaHJlZjogaHJlZiwgcmVmOiBpbm5lclJlZiB9KSk7XG4gIH07XG5cbiAgcmV0dXJuIExpbms7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbkxpbmsucHJvcFR5cGVzID0ge1xuICBvbkNsaWNrOiBQcm9wVHlwZXMuZnVuYyxcbiAgdGFyZ2V0OiBQcm9wVHlwZXMuc3RyaW5nLFxuICByZXBsYWNlOiBQcm9wVHlwZXMuYm9vbCxcbiAgdG86IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5vYmplY3RdKS5pc1JlcXVpcmVkLFxuICBpbm5lclJlZjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLmZ1bmNdKVxufTtcbkxpbmsuZGVmYXVsdFByb3BzID0ge1xuICByZXBsYWNlOiBmYWxzZVxufTtcbkxpbmsuY29udGV4dFR5cGVzID0ge1xuICByb3V0ZXI6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgaGlzdG9yeTogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgIHB1c2g6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgICByZXBsYWNlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgICAgY3JlYXRlSHJlZjogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxuICAgIH0pLmlzUmVxdWlyZWRcbiAgfSkuaXNSZXF1aXJlZFxufTtcblxuXG5leHBvcnQgZGVmYXVsdCBMaW5rO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXItZG9tL2VzL0xpbmsuanNcbi8vIG1vZHVsZSBpZCA9IDk0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiLy8gV3JpdHRlbiBpbiB0aGlzIHJvdW5kIGFib3V0IHdheSBmb3IgYmFiZWwtdHJhbnNmb3JtLWltcG9ydHNcbmltcG9ydCBSb3V0ZSBmcm9tICdyZWFjdC1yb3V0ZXIvZXMvUm91dGUnO1xuXG5leHBvcnQgZGVmYXVsdCBSb3V0ZTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtcm91dGVyLWRvbS9lcy9Sb3V0ZS5qc1xuLy8gbW9kdWxlIGlkID0gOTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJ2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmltcG9ydCB3YXJuaW5nIGZyb20gJ3dhcm5pbmcnO1xuaW1wb3J0IGludmFyaWFudCBmcm9tICdpbnZhcmlhbnQnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgbWF0Y2hQYXRoIGZyb20gJy4vbWF0Y2hQYXRoJztcblxudmFyIGlzRW1wdHlDaGlsZHJlbiA9IGZ1bmN0aW9uIGlzRW1wdHlDaGlsZHJlbihjaGlsZHJlbikge1xuICByZXR1cm4gUmVhY3QuQ2hpbGRyZW4uY291bnQoY2hpbGRyZW4pID09PSAwO1xufTtcblxuLyoqXG4gKiBUaGUgcHVibGljIEFQSSBmb3IgbWF0Y2hpbmcgYSBzaW5nbGUgcGF0aCBhbmQgcmVuZGVyaW5nLlxuICovXG5cbnZhciBSb3V0ZSA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhSb3V0ZSwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gUm91dGUoKSB7XG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSb3V0ZSk7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9SZWFjdCRDb21wb25lbnQuY2FsbC5hcHBseShfUmVhY3QkQ29tcG9uZW50LCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBtYXRjaDogX3RoaXMuY29tcHV0ZU1hdGNoKF90aGlzLnByb3BzLCBfdGhpcy5jb250ZXh0LnJvdXRlcilcbiAgICB9LCBfdGVtcCksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gIFJvdXRlLnByb3RvdHlwZS5nZXRDaGlsZENvbnRleHQgPSBmdW5jdGlvbiBnZXRDaGlsZENvbnRleHQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJvdXRlcjogX2V4dGVuZHMoe30sIHRoaXMuY29udGV4dC5yb3V0ZXIsIHtcbiAgICAgICAgcm91dGU6IHtcbiAgICAgICAgICBsb2NhdGlvbjogdGhpcy5wcm9wcy5sb2NhdGlvbiB8fCB0aGlzLmNvbnRleHQucm91dGVyLnJvdXRlLmxvY2F0aW9uLFxuICAgICAgICAgIG1hdGNoOiB0aGlzLnN0YXRlLm1hdGNoXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfTtcbiAgfTtcblxuICBSb3V0ZS5wcm90b3R5cGUuY29tcHV0ZU1hdGNoID0gZnVuY3Rpb24gY29tcHV0ZU1hdGNoKF9yZWYsIHJvdXRlcikge1xuICAgIHZhciBjb21wdXRlZE1hdGNoID0gX3JlZi5jb21wdXRlZE1hdGNoLFxuICAgICAgICBsb2NhdGlvbiA9IF9yZWYubG9jYXRpb24sXG4gICAgICAgIHBhdGggPSBfcmVmLnBhdGgsXG4gICAgICAgIHN0cmljdCA9IF9yZWYuc3RyaWN0LFxuICAgICAgICBleGFjdCA9IF9yZWYuZXhhY3QsXG4gICAgICAgIHNlbnNpdGl2ZSA9IF9yZWYuc2Vuc2l0aXZlO1xuXG4gICAgaWYgKGNvbXB1dGVkTWF0Y2gpIHJldHVybiBjb21wdXRlZE1hdGNoOyAvLyA8U3dpdGNoPiBhbHJlYWR5IGNvbXB1dGVkIHRoZSBtYXRjaCBmb3IgdXNcblxuICAgIGludmFyaWFudChyb3V0ZXIsICdZb3Ugc2hvdWxkIG5vdCB1c2UgPFJvdXRlPiBvciB3aXRoUm91dGVyKCkgb3V0c2lkZSBhIDxSb3V0ZXI+Jyk7XG5cbiAgICB2YXIgcm91dGUgPSByb3V0ZXIucm91dGU7XG5cbiAgICB2YXIgcGF0aG5hbWUgPSAobG9jYXRpb24gfHwgcm91dGUubG9jYXRpb24pLnBhdGhuYW1lO1xuXG4gICAgcmV0dXJuIHBhdGggPyBtYXRjaFBhdGgocGF0aG5hbWUsIHsgcGF0aDogcGF0aCwgc3RyaWN0OiBzdHJpY3QsIGV4YWN0OiBleGFjdCwgc2Vuc2l0aXZlOiBzZW5zaXRpdmUgfSkgOiByb3V0ZS5tYXRjaDtcbiAgfTtcblxuICBSb3V0ZS5wcm90b3R5cGUuY29tcG9uZW50V2lsbE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIHdhcm5pbmcoISh0aGlzLnByb3BzLmNvbXBvbmVudCAmJiB0aGlzLnByb3BzLnJlbmRlciksICdZb3Ugc2hvdWxkIG5vdCB1c2UgPFJvdXRlIGNvbXBvbmVudD4gYW5kIDxSb3V0ZSByZW5kZXI+IGluIHRoZSBzYW1lIHJvdXRlOyA8Um91dGUgcmVuZGVyPiB3aWxsIGJlIGlnbm9yZWQnKTtcblxuICAgIHdhcm5pbmcoISh0aGlzLnByb3BzLmNvbXBvbmVudCAmJiB0aGlzLnByb3BzLmNoaWxkcmVuICYmICFpc0VtcHR5Q2hpbGRyZW4odGhpcy5wcm9wcy5jaGlsZHJlbikpLCAnWW91IHNob3VsZCBub3QgdXNlIDxSb3V0ZSBjb21wb25lbnQ+IGFuZCA8Um91dGUgY2hpbGRyZW4+IGluIHRoZSBzYW1lIHJvdXRlOyA8Um91dGUgY2hpbGRyZW4+IHdpbGwgYmUgaWdub3JlZCcpO1xuXG4gICAgd2FybmluZyghKHRoaXMucHJvcHMucmVuZGVyICYmIHRoaXMucHJvcHMuY2hpbGRyZW4gJiYgIWlzRW1wdHlDaGlsZHJlbih0aGlzLnByb3BzLmNoaWxkcmVuKSksICdZb3Ugc2hvdWxkIG5vdCB1c2UgPFJvdXRlIHJlbmRlcj4gYW5kIDxSb3V0ZSBjaGlsZHJlbj4gaW4gdGhlIHNhbWUgcm91dGU7IDxSb3V0ZSBjaGlsZHJlbj4gd2lsbCBiZSBpZ25vcmVkJyk7XG4gIH07XG5cbiAgUm91dGUucHJvdG90eXBlLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcywgbmV4dENvbnRleHQpIHtcbiAgICB3YXJuaW5nKCEobmV4dFByb3BzLmxvY2F0aW9uICYmICF0aGlzLnByb3BzLmxvY2F0aW9uKSwgJzxSb3V0ZT4gZWxlbWVudHMgc2hvdWxkIG5vdCBjaGFuZ2UgZnJvbSB1bmNvbnRyb2xsZWQgdG8gY29udHJvbGxlZCAob3IgdmljZSB2ZXJzYSkuIFlvdSBpbml0aWFsbHkgdXNlZCBubyBcImxvY2F0aW9uXCIgcHJvcCBhbmQgdGhlbiBwcm92aWRlZCBvbmUgb24gYSBzdWJzZXF1ZW50IHJlbmRlci4nKTtcblxuICAgIHdhcm5pbmcoISghbmV4dFByb3BzLmxvY2F0aW9uICYmIHRoaXMucHJvcHMubG9jYXRpb24pLCAnPFJvdXRlPiBlbGVtZW50cyBzaG91bGQgbm90IGNoYW5nZSBmcm9tIGNvbnRyb2xsZWQgdG8gdW5jb250cm9sbGVkIChvciB2aWNlIHZlcnNhKS4gWW91IHByb3ZpZGVkIGEgXCJsb2NhdGlvblwiIHByb3AgaW5pdGlhbGx5IGJ1dCBvbWl0dGVkIGl0IG9uIGEgc3Vic2VxdWVudCByZW5kZXIuJyk7XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIG1hdGNoOiB0aGlzLmNvbXB1dGVNYXRjaChuZXh0UHJvcHMsIG5leHRDb250ZXh0LnJvdXRlcilcbiAgICB9KTtcbiAgfTtcblxuICBSb3V0ZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBtYXRjaCA9IHRoaXMuc3RhdGUubWF0Y2g7XG4gICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgIGNoaWxkcmVuID0gX3Byb3BzLmNoaWxkcmVuLFxuICAgICAgICBjb21wb25lbnQgPSBfcHJvcHMuY29tcG9uZW50LFxuICAgICAgICByZW5kZXIgPSBfcHJvcHMucmVuZGVyO1xuICAgIHZhciBfY29udGV4dCRyb3V0ZXIgPSB0aGlzLmNvbnRleHQucm91dGVyLFxuICAgICAgICBoaXN0b3J5ID0gX2NvbnRleHQkcm91dGVyLmhpc3RvcnksXG4gICAgICAgIHJvdXRlID0gX2NvbnRleHQkcm91dGVyLnJvdXRlLFxuICAgICAgICBzdGF0aWNDb250ZXh0ID0gX2NvbnRleHQkcm91dGVyLnN0YXRpY0NvbnRleHQ7XG5cbiAgICB2YXIgbG9jYXRpb24gPSB0aGlzLnByb3BzLmxvY2F0aW9uIHx8IHJvdXRlLmxvY2F0aW9uO1xuICAgIHZhciBwcm9wcyA9IHsgbWF0Y2g6IG1hdGNoLCBsb2NhdGlvbjogbG9jYXRpb24sIGhpc3Rvcnk6IGhpc3RvcnksIHN0YXRpY0NvbnRleHQ6IHN0YXRpY0NvbnRleHQgfTtcblxuICAgIHJldHVybiBjb21wb25lbnQgPyAvLyBjb21wb25lbnQgcHJvcCBnZXRzIGZpcnN0IHByaW9yaXR5LCBvbmx5IGNhbGxlZCBpZiB0aGVyZSdzIGEgbWF0Y2hcbiAgICBtYXRjaCA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50LCBwcm9wcykgOiBudWxsIDogcmVuZGVyID8gLy8gcmVuZGVyIHByb3AgaXMgbmV4dCwgb25seSBjYWxsZWQgaWYgdGhlcmUncyBhIG1hdGNoXG4gICAgbWF0Y2ggPyByZW5kZXIocHJvcHMpIDogbnVsbCA6IGNoaWxkcmVuID8gLy8gY2hpbGRyZW4gY29tZSBsYXN0LCBhbHdheXMgY2FsbGVkXG4gICAgdHlwZW9mIGNoaWxkcmVuID09PSAnZnVuY3Rpb24nID8gY2hpbGRyZW4ocHJvcHMpIDogIWlzRW1wdHlDaGlsZHJlbihjaGlsZHJlbikgPyBSZWFjdC5DaGlsZHJlbi5vbmx5KGNoaWxkcmVuKSA6IG51bGwgOiBudWxsO1xuICB9O1xuXG4gIHJldHVybiBSb3V0ZTtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxuUm91dGUucHJvcFR5cGVzID0ge1xuICBjb21wdXRlZE1hdGNoOiBQcm9wVHlwZXMub2JqZWN0LCAvLyBwcml2YXRlLCBmcm9tIDxTd2l0Y2g+XG4gIHBhdGg6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGV4YWN0OiBQcm9wVHlwZXMuYm9vbCxcbiAgc3RyaWN0OiBQcm9wVHlwZXMuYm9vbCxcbiAgc2Vuc2l0aXZlOiBQcm9wVHlwZXMuYm9vbCxcbiAgY29tcG9uZW50OiBQcm9wVHlwZXMuZnVuYyxcbiAgcmVuZGVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5mdW5jLCBQcm9wVHlwZXMubm9kZV0pLFxuICBsb2NhdGlvbjogUHJvcFR5cGVzLm9iamVjdFxufTtcblJvdXRlLmNvbnRleHRUeXBlcyA9IHtcbiAgcm91dGVyOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgIGhpc3Rvcnk6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICByb3V0ZTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIHN0YXRpY0NvbnRleHQ6IFByb3BUeXBlcy5vYmplY3RcbiAgfSlcbn07XG5Sb3V0ZS5jaGlsZENvbnRleHRUeXBlcyA9IHtcbiAgcm91dGVyOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWRcbn07XG5cblxuZXhwb3J0IGRlZmF1bHQgUm91dGU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci9lcy9Sb3V0ZS5qc1xuLy8gbW9kdWxlIGlkID0gOTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJmdW5jdGlvbiBpc0Fic29sdXRlKHBhdGhuYW1lKSB7XG4gIHJldHVybiBwYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJztcbn1cblxuLy8gQWJvdXQgMS41eCBmYXN0ZXIgdGhhbiB0aGUgdHdvLWFyZyB2ZXJzaW9uIG9mIEFycmF5I3NwbGljZSgpXG5mdW5jdGlvbiBzcGxpY2VPbmUobGlzdCwgaW5kZXgpIHtcbiAgZm9yICh2YXIgaSA9IGluZGV4LCBrID0gaSArIDEsIG4gPSBsaXN0Lmxlbmd0aDsgayA8IG47IGkgKz0gMSwgayArPSAxKSB7XG4gICAgbGlzdFtpXSA9IGxpc3Rba107XG4gIH1cblxuICBsaXN0LnBvcCgpO1xufVxuXG4vLyBUaGlzIGltcGxlbWVudGF0aW9uIGlzIGJhc2VkIGhlYXZpbHkgb24gbm9kZSdzIHVybC5wYXJzZVxuZnVuY3Rpb24gcmVzb2x2ZVBhdGhuYW1lKHRvKSB7XG4gIHZhciBmcm9tID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJztcblxuICB2YXIgdG9QYXJ0cyA9IHRvICYmIHRvLnNwbGl0KCcvJykgfHwgW107XG4gIHZhciBmcm9tUGFydHMgPSBmcm9tICYmIGZyb20uc3BsaXQoJy8nKSB8fCBbXTtcblxuICB2YXIgaXNUb0FicyA9IHRvICYmIGlzQWJzb2x1dGUodG8pO1xuICB2YXIgaXNGcm9tQWJzID0gZnJvbSAmJiBpc0Fic29sdXRlKGZyb20pO1xuICB2YXIgbXVzdEVuZEFicyA9IGlzVG9BYnMgfHwgaXNGcm9tQWJzO1xuXG4gIGlmICh0byAmJiBpc0Fic29sdXRlKHRvKSkge1xuICAgIC8vIHRvIGlzIGFic29sdXRlXG4gICAgZnJvbVBhcnRzID0gdG9QYXJ0cztcbiAgfSBlbHNlIGlmICh0b1BhcnRzLmxlbmd0aCkge1xuICAgIC8vIHRvIGlzIHJlbGF0aXZlLCBkcm9wIHRoZSBmaWxlbmFtZVxuICAgIGZyb21QYXJ0cy5wb3AoKTtcbiAgICBmcm9tUGFydHMgPSBmcm9tUGFydHMuY29uY2F0KHRvUGFydHMpO1xuICB9XG5cbiAgaWYgKCFmcm9tUGFydHMubGVuZ3RoKSByZXR1cm4gJy8nO1xuXG4gIHZhciBoYXNUcmFpbGluZ1NsYXNoID0gdm9pZCAwO1xuICBpZiAoZnJvbVBhcnRzLmxlbmd0aCkge1xuICAgIHZhciBsYXN0ID0gZnJvbVBhcnRzW2Zyb21QYXJ0cy5sZW5ndGggLSAxXTtcbiAgICBoYXNUcmFpbGluZ1NsYXNoID0gbGFzdCA9PT0gJy4nIHx8IGxhc3QgPT09ICcuLicgfHwgbGFzdCA9PT0gJyc7XG4gIH0gZWxzZSB7XG4gICAgaGFzVHJhaWxpbmdTbGFzaCA9IGZhbHNlO1xuICB9XG5cbiAgdmFyIHVwID0gMDtcbiAgZm9yICh2YXIgaSA9IGZyb21QYXJ0cy5sZW5ndGg7IGkgPj0gMDsgaS0tKSB7XG4gICAgdmFyIHBhcnQgPSBmcm9tUGFydHNbaV07XG5cbiAgICBpZiAocGFydCA9PT0gJy4nKSB7XG4gICAgICBzcGxpY2VPbmUoZnJvbVBhcnRzLCBpKTtcbiAgICB9IGVsc2UgaWYgKHBhcnQgPT09ICcuLicpIHtcbiAgICAgIHNwbGljZU9uZShmcm9tUGFydHMsIGkpO1xuICAgICAgdXArKztcbiAgICB9IGVsc2UgaWYgKHVwKSB7XG4gICAgICBzcGxpY2VPbmUoZnJvbVBhcnRzLCBpKTtcbiAgICAgIHVwLS07XG4gICAgfVxuICB9XG5cbiAgaWYgKCFtdXN0RW5kQWJzKSBmb3IgKDsgdXAtLTsgdXApIHtcbiAgICBmcm9tUGFydHMudW5zaGlmdCgnLi4nKTtcbiAgfWlmIChtdXN0RW5kQWJzICYmIGZyb21QYXJ0c1swXSAhPT0gJycgJiYgKCFmcm9tUGFydHNbMF0gfHwgIWlzQWJzb2x1dGUoZnJvbVBhcnRzWzBdKSkpIGZyb21QYXJ0cy51bnNoaWZ0KCcnKTtcblxuICB2YXIgcmVzdWx0ID0gZnJvbVBhcnRzLmpvaW4oJy8nKTtcblxuICBpZiAoaGFzVHJhaWxpbmdTbGFzaCAmJiByZXN1bHQuc3Vic3RyKC0xKSAhPT0gJy8nKSByZXN1bHQgKz0gJy8nO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHJlc29sdmVQYXRobmFtZTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVzb2x2ZS1wYXRobmFtZS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gOTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiXSwic291cmNlUm9vdCI6IiJ9