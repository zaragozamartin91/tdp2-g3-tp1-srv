webpackJsonp([1],{221:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function l(e){return r.default.createElement(g.default,{iconButtonElement:r.default.createElement(w.default,null,r.default.createElement(k.default,{className:"submenu-svg",style:{color:"white",fill:"white"}})),targetOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"top"}},r.default.createElement(m.default,{primaryText:"Cerrar sesion",onClick:e.onLogout}))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=a(o),u=n(57),i=n(166),s=a(i),d=n(168),c=a(d),f=n(172),m=a(f),h=n(180),p=(a(h),n(169)),g=a(p),E=n(67),w=a(E),v=n(181),k=a(v);l.muiName="IconMenu";var y=r.default.createClass({displayName:"ShopBackofficeBar",getInitialState:function(){return{drawerOpen:!1}},getDefaultProps:function(){return{onLogout:function(){}}},closeDrawer:function(){this.setState({drawerOpen:!1})},toggleDrawer:function(){var e=!this.state.drawerOpen;this.setState({drawerOpen:e})},render:function(){var e=this;return r.default.createElement("div",null,r.default.createElement(s.default,{onLeftIconButtonTouchTap:this.toggleDrawer,iconElementRight:r.default.createElement(l,{onLogout:this.props.onLogout}),title:"Administracion comercio"}),r.default.createElement(c.default,{open:this.state.drawerOpen,docked:!1,onRequestChange:function(t){return e.setState({drawerOpen:t})}},r.default.createElement(u.Link,{to:"/index",onClick:this.closeDrawer},r.default.createElement(m.default,null,"Principal"))))}});t.default=y},224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(a),o=l.default.createClass({displayName:"ShopadmIndex",render:function(){return l.default.createElement("div",{className:"with-margin index"},l.default.createElement("h1",null,"Administracion de comercio"),l.default.createElement("h2",null,"Configuracion y estadisticas"),l.default.createElement("p",null,"Desde aqui es posible actualizar el menu y obtener estadisticas de los pedidos mensuales."))}});t.default=o},225:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),o=a(l),r=n(31),u=a(r),i=n(68),s=(a(i),n(69)),d=a(s),c=n(66),f=n(39),m=a(f),h=n(36),p=a(h),g=n(73),E=a(g),w=function(){},v=o.default.createClass({displayName:"ShopadmLogin",getInitialState:function(){return{username:"",password:"",errMsg:null}},getDefaultProps:function(){return{onSubmit:w}},submitForm:function(){var e=this,t=this.state.username,n=this.state.password,a=btoa(t+":"+n);(0,p.default)({method:"post",url:"/api/v1/shopadm/login",headers:{Authorization:"Basic "+a}}).then(function(t){console.log("Contenido:"),console.log(t.data),e.props.onSubmit(t.data.token)}).catch(function(t){console.error("Error"),e.setState({errMsg:"Credenciales invalidas"})})},handleKeyPress:function(e){"Enter"==e.key&&this.submitForm()},render:function(){var e=this,t=this.state.errMsg?o.default.createElement("p",{style:{color:"red"}},this.state.errMsg):o.default.createElement("div",null);return o.default.createElement("div",{onKeyPress:this.handleKeyPress},o.default.createElement(E.default,{title:"Administracion comercio"}),t,o.default.createElement(u.default,null,o.default.createElement(c.Card,null,o.default.createElement(c.CardHeader,{title:"Iniciar sesion",subtitle:"Ingrese credenciales"}),";",o.default.createElement(c.CardText,{expandable:!1},o.default.createElement(d.default,{name:"username",hint:"username",floatingLabelText:"username",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})}}),o.default.createElement("br",null),o.default.createElement(d.default,{name:"password",hintText:"Password",floatingLabelText:"Password",type:"password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}}),o.default.createElement("br",null)),o.default.createElement(c.CardActions,null,o.default.createElement(m.default,{label:"Iniciar sesion",onClick:this.submitForm})))))}});t.default=v},245:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var l=n(0),o=a(l),r=n(17),u=a(r),i=n(57),s=n(31),d=a(s),c=n(36),f=(a(c),n(221)),m=a(f),h=n(224),p=a(h),g=n(225),E=a(g);(0,a(n(86)).default)(),console.log("Parseando cookie "+document.cookie);var w=document.cookie||"",v=w.split("; ").find(function(e){return e.startsWith("token=")}),k=v?v.replace("token=",""):null,y=o.default.createClass({displayName:"ShopBackoffice",getInitialState:function(){return{token:null,user:null,renderReady:!1}},componentDidMount:function(){console.log("ShopBackoffice MONTADA!"),k?this.setToken(k):this.setState({renderReady:!0})},setToken:function(e){e=e.token||e,console.log("Seteando token "+e),this.setState({token:e,renderReady:!0})},render:function(){var e=this;return console.log("RENDERING ShopBackoffice!"),this.state.token?(console.log("window.location.hash: "+window.location.hash),"#/"==window.location.hash&&(console.log("REPLACING LOCATION"),window.location.replace("/shopadm#/index")),o.default.createElement(d.default,null,o.default.createElement("div",null,o.default.createElement(m.default,{onLogout:function(){return e.logoutForm.submit()}}),o.default.createElement(i.Route,{path:"/index",component:p.default}),o.default.createElement("form",{action:"/shopadm/logout",method:"POST",ref:function(t){return e.logoutForm=t},style:{display:"hidden"}})))):o.default.createElement(E.default,{onSubmit:this.setToken})}});u.default.render(o.default.createElement(i.HashRouter,null,o.default.createElement(y,null)),document.getElementById("root"))}},[245]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2hvcGJhY2tvZmZpY2UuYnVuZGxlLmpzIiwid2VicGFjazovLy8uL2NvbXBvbmVudHMvU2hvcEJhY2tvZmZpY2VCYXIuanMiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9TaG9wYWRtSW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9TaG9wYWRtTG9naW4uanMiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9TaG9wQmFja29mZmljZS5qcyJdLCJuYW1lcyI6WyJ3ZWJwYWNrSnNvbnAiLCIyMjEiLCJtb2R1bGUiLCJleHBvcnRzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIlN1Yk1lbnUiLCJwcm9wcyIsIl9yZWFjdDIiLCJjcmVhdGVFbGVtZW50IiwiX0ljb25NZW51MiIsImljb25CdXR0b25FbGVtZW50IiwiX0ljb25CdXR0b24yIiwiX21vcmVWZXJ0MiIsImNsYXNzTmFtZSIsInN0eWxlIiwiY29sb3IiLCJmaWxsIiwidGFyZ2V0T3JpZ2luIiwiaG9yaXpvbnRhbCIsInZlcnRpY2FsIiwiYW5jaG9yT3JpZ2luIiwiX01lbnVJdGVtMiIsInByaW1hcnlUZXh0Iiwib25DbGljayIsIm9uTG9nb3V0IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIl9yZWFjdCIsIl9yZWFjdFJvdXRlckRvbSIsIl9BcHBCYXIiLCJfQXBwQmFyMiIsIl9EcmF3ZXIiLCJfRHJhd2VyMiIsIl9NZW51SXRlbSIsIl9uYXZpZ2F0aW9uQXJyb3dEcm9wUmlnaHQiLCJfSWNvbk1lbnUiLCJfSWNvbkJ1dHRvbiIsIl9tb3JlVmVydCIsIm11aU5hbWUiLCJTaG9wQmFja29mZmljZUJhciIsImNyZWF0ZUNsYXNzIiwiZGlzcGxheU5hbWUiLCJnZXRJbml0aWFsU3RhdGUiLCJkcmF3ZXJPcGVuIiwiZ2V0RGVmYXVsdFByb3BzIiwiY2xvc2VEcmF3ZXIiLCJ0aGlzIiwic2V0U3RhdGUiLCJ0b2dnbGVEcmF3ZXIiLCJzdGF0ZSIsInJlbmRlciIsIl90aGlzIiwib25MZWZ0SWNvbkJ1dHRvblRvdWNoVGFwIiwiaWNvbkVsZW1lbnRSaWdodCIsInRpdGxlIiwib3BlbiIsImRvY2tlZCIsIm9uUmVxdWVzdENoYW5nZSIsIkxpbmsiLCJ0byIsIjIyNCIsIlNob3BhZG1JbmRleCIsIjIyNSIsIl9NdWlUaGVtZVByb3ZpZGVyIiwiX011aVRoZW1lUHJvdmlkZXIyIiwiX1JhaXNlZEJ1dHRvbiIsIl9UZXh0RmllbGQiLCJfVGV4dEZpZWxkMiIsIl9DYXJkIiwiX0ZsYXRCdXR0b24iLCJfRmxhdEJ1dHRvbjIiLCJfYXhpb3MiLCJfYXhpb3MyIiwiX0hlYWRlciIsIl9IZWFkZXIyIiwiRU1QVFlfQ0FMTEJBQ0siLCJTaG9wYWRtTG9naW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiZXJyTXNnIiwib25TdWJtaXQiLCJzdWJtaXRGb3JtIiwiZW5jb2RlZCIsImJ0b2EiLCJtZXRob2QiLCJ1cmwiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsInRoZW4iLCJjb250ZW50cyIsImNvbnNvbGUiLCJsb2ciLCJkYXRhIiwidG9rZW4iLCJjYXRjaCIsImNhdXNlIiwiZXJyb3IiLCJoYW5kbGVLZXlQcmVzcyIsImV2ZW50Iiwia2V5IiwiX3RoaXMyIiwibXNnRWxlbSIsIm9uS2V5UHJlc3MiLCJDYXJkIiwiQ2FyZEhlYWRlciIsInN1YnRpdGxlIiwiQ2FyZFRleHQiLCJleHBhbmRhYmxlIiwibmFtZSIsImhpbnQiLCJmbG9hdGluZ0xhYmVsVGV4dCIsIm9uQ2hhbmdlIiwiZSIsInRhcmdldCIsImhpbnRUZXh0IiwidHlwZSIsIkNhcmRBY3Rpb25zIiwibGFiZWwiLCIyNDUiLCJfcmVhY3REb20iLCJfcmVhY3REb20yIiwiX1Nob3BCYWNrb2ZmaWNlQmFyIiwiX1Nob3BCYWNrb2ZmaWNlQmFyMiIsIl9TaG9wYWRtSW5kZXgiLCJfU2hvcGFkbUluZGV4MiIsIl9TaG9wYWRtTG9naW4iLCJfU2hvcGFkbUxvZ2luMiIsImRvY3VtZW50IiwiY29va2llIiwiY29va2llVG9rZW5TdHIiLCJzcGxpdCIsImZpbmQiLCJzIiwic3RhcnRzV2l0aCIsImNvb2tpZVRva2VuIiwicmVwbGFjZSIsIlNob3BCYWNrb2ZmaWNlIiwidXNlciIsInJlbmRlclJlYWR5IiwiY29tcG9uZW50RGlkTW91bnQiLCJzZXRUb2tlbiIsIndpbmRvdyIsImxvY2F0aW9uIiwiaGFzaCIsImxvZ291dEZvcm0iLCJzdWJtaXQiLCJSb3V0ZSIsInBhdGgiLCJjb21wb25lbnQiLCJhY3Rpb24iLCJyZWYiLCJmIiwiZGlzcGxheSIsIkhhc2hSb3V0ZXIiLCJnZXRFbGVtZW50QnlJZCJdLCJtYXBwaW5ncyI6IkFBQUFBLGNBQWMsSUFFUkMsSUFDQSxTQUFVQyxFQUFRQyxFQUFTQyxHQUVqQyxZQXlDQSxTQUFTQyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHQ2pDdkYsUUFBU0csR0FBUUMsR0FDYixNQUFPQyxHQUFBSCxRQUFBSSxjQUFBQyxFQUFBTCxTQUNITSxrQkFDSUgsRUFBQUgsUUFBQUksY0FBQUcsRUFBQVAsUUFBQSxLQUFhRyxFQUFBSCxRQUFBSSxjQUFBSSxFQUFBUixTQUNUUyxVQUFVLGNBQ1ZDLE9BQVNDLE1BQU8sUUFBU0MsS0FBTSxZQUd2Q0MsY0FBZ0JDLFdBQVksUUFBU0MsU0FBVSxPQUMvQ0MsY0FBZ0JGLFdBQVksUUFBU0MsU0FBVSxRQUUvQ1osRUFBQUgsUUFBQUksY0FBQWEsRUFBQWpCLFNBQVVrQixZQUFZLGdCQUFnQkMsUUFBU2pCLEVBQU1rQixZRGhCN0RDLE9BQU9DLGVBQWUzQixFQUFTLGNBQzNCNEIsT0FBTyxHQ1RYLElBQUFDLEdBQUE1QixFQUFBLEdEY0lPLEVBQVVOLEVBQXVCMkIsR0NickNDLEVBQUE3QixFQUFBLElBRUE4QixFQUFBOUIsRUFBQSxLRGlCSStCLEVBQVc5QixFQUF1QjZCLEdDaEJ0Q0UsRUFBQWhDLEVBQUEsS0Rv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QU8sa0JBQ1BqRSxPQUFPLE9BQ1BrRSxJQUFLLFNBQUFDLEdBQUEsTUFBS3BHLEdBQUs2RixXQUFhTyxHQUM1QjFJLE9BQVMySSxRQUFTLGVBckJmbEosRUFBQUgsUUFBQUksY0FBQXVILEVBQUEzSCxTQUFjNkUsU0FBVWxDLEtBQUs4RixhQTZCeERwQixHQUFBckgsUUFBUytDLE9BQ0w1QyxFQUFBSCxRQUFBSSxjQUFBcUIsRUFBQTZILFdBQUEsS0FDSW5KLEVBQUFILFFBQUFJLGNBQUNpSSxFQUFELE9BRUpULFNBQVMyQixlQUFlLFlKa1d6QiIsImZpbGUiOiJzaG9wYmFja29mZmljZS5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3ZWJwYWNrSnNvbnAoWzFdLHtcblxuLyoqKi8gMjIxOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdFJvdXRlckRvbSA9IF9fd2VicGFja19yZXF1aXJlX18oNTcpO1xuXG52YXIgX0FwcEJhciA9IF9fd2VicGFja19yZXF1aXJlX18oMTY2KTtcblxudmFyIF9BcHBCYXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQXBwQmFyKTtcblxudmFyIF9EcmF3ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OCk7XG5cbnZhciBfRHJhd2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RyYXdlcik7XG5cbnZhciBfTWVudUl0ZW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Mik7XG5cbnZhciBfTWVudUl0ZW0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTWVudUl0ZW0pO1xuXG52YXIgX25hdmlnYXRpb25BcnJvd0Ryb3BSaWdodCA9IF9fd2VicGFja19yZXF1aXJlX18oMTgwKTtcblxudmFyIF9uYXZpZ2F0aW9uQXJyb3dEcm9wUmlnaHQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbmF2aWdhdGlvbkFycm93RHJvcFJpZ2h0KTtcblxudmFyIF9JY29uTWVudSA9IF9fd2VicGFja19yZXF1aXJlX18oMTY5KTtcblxudmFyIF9JY29uTWVudTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9JY29uTWVudSk7XG5cbnZhciBfSWNvbkJ1dHRvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpO1xuXG52YXIgX0ljb25CdXR0b24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSWNvbkJ1dHRvbik7XG5cbnZhciBfbW9yZVZlcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4MSk7XG5cbnZhciBfbW9yZVZlcnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbW9yZVZlcnQpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBTdWJNZW51KHByb3BzKSB7XG4gICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICBfSWNvbk1lbnUyLmRlZmF1bHQsXG4gICAgICAgIHtcbiAgICAgICAgICAgIGljb25CdXR0b25FbGVtZW50OiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBfSWNvbkJ1dHRvbjIuZGVmYXVsdCxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9tb3JlVmVydDIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdzdWJtZW51LXN2ZycsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7IGNvbG9yOiAnd2hpdGUnLCBmaWxsOiAnd2hpdGUnIH0gfSlcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICB0YXJnZXRPcmlnaW46IHsgaG9yaXpvbnRhbDogJ3JpZ2h0JywgdmVydGljYWw6ICd0b3AnIH0sXG4gICAgICAgICAgICBhbmNob3JPcmlnaW46IHsgaG9yaXpvbnRhbDogJ3JpZ2h0JywgdmVydGljYWw6ICd0b3AnIH0gfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX01lbnVJdGVtMi5kZWZhdWx0LCB7IHByaW1hcnlUZXh0OiAnQ2VycmFyIHNlc2lvbicsIG9uQ2xpY2s6IHByb3BzLm9uTG9nb3V0IH0pXG4gICAgKTtcbn1cblxuU3ViTWVudS5tdWlOYW1lID0gJ0ljb25NZW51JztcblxudmFyIFNob3BCYWNrb2ZmaWNlQmFyID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ1Nob3BCYWNrb2ZmaWNlQmFyJyxcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRyYXdlck9wZW46IGZhbHNlXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9uTG9nb3V0OiBmdW5jdGlvbiBvbkxvZ291dCgpIHt9XG4gICAgICAgIH07XG4gICAgfSxcbiAgICBjbG9zZURyYXdlcjogZnVuY3Rpb24gY2xvc2VEcmF3ZXIoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkcmF3ZXJPcGVuOiBmYWxzZSB9KTtcbiAgICB9LFxuICAgIHRvZ2dsZURyYXdlcjogZnVuY3Rpb24gdG9nZ2xlRHJhd2VyKCkge1xuICAgICAgICB2YXIgZHJhd2VyT3BlbiA9ICF0aGlzLnN0YXRlLmRyYXdlck9wZW47XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkcmF3ZXJPcGVuOiBkcmF3ZXJPcGVuIH0pO1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0FwcEJhcjIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgIG9uTGVmdEljb25CdXR0b25Ub3VjaFRhcDogdGhpcy50b2dnbGVEcmF3ZXIsXG4gICAgICAgICAgICAgICAgaWNvbkVsZW1lbnRSaWdodDogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoU3ViTWVudSwgeyBvbkxvZ291dDogdGhpcy5wcm9wcy5vbkxvZ291dCB9KSxcbiAgICAgICAgICAgICAgICB0aXRsZTogJ0FkbWluaXN0cmFjaW9uIGNvbWVyY2lvJyB9KSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIF9EcmF3ZXIyLmRlZmF1bHQsXG4gICAgICAgICAgICAgICAgeyBvcGVuOiB0aGlzLnN0YXRlLmRyYXdlck9wZW4sIGRvY2tlZDogZmFsc2UsIG9uUmVxdWVzdENoYW5nZTogZnVuY3Rpb24gb25SZXF1ZXN0Q2hhbmdlKG9wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7IGRyYXdlck9wZW46IG9wZW4gfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Um91dGVyRG9tLkxpbmssXG4gICAgICAgICAgICAgICAgICAgIHsgdG86ICcvaW5kZXgnLCBvbkNsaWNrOiB0aGlzLmNsb3NlRHJhd2VyIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgX01lbnVJdGVtMi5kZWZhdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdQcmluY2lwYWwnXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFNob3BCYWNrb2ZmaWNlQmFyO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMjI0OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqIENvbXBvbmVudGUgaW5kaWNlIGRlIGFkbWluaXN0cmFjaW9uIGRlIEhPWSBDT01PICovXG52YXIgU2hvcGFkbUluZGV4ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogXCJTaG9wYWRtSW5kZXhcIixcblxuICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6IFwid2l0aC1tYXJnaW4gaW5kZXhcIiB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgXCJoMVwiLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgXCJBZG1pbmlzdHJhY2lvbiBkZSBjb21lcmNpb1wiXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgXCJoMlwiLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgXCJDb25maWd1cmFjaW9uIHkgZXN0YWRpc3RpY2FzXCJcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBcInBcIixcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIFwiRGVzZGUgYXF1aSBlcyBwb3NpYmxlIGFjdHVhbGl6YXIgZWwgbWVudSB5IG9idGVuZXIgZXN0YWRpc3RpY2FzIGRlIGxvcyBwZWRpZG9zIG1lbnN1YWxlcy5cIlxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBTaG9wYWRtSW5kZXg7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAyMjU6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX011aVRoZW1lUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTtcblxudmFyIF9NdWlUaGVtZVByb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX011aVRoZW1lUHJvdmlkZXIpO1xuXG52YXIgX1JhaXNlZEJ1dHRvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNjgpO1xuXG52YXIgX1JhaXNlZEJ1dHRvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9SYWlzZWRCdXR0b24pO1xuXG52YXIgX1RleHRGaWVsZCA9IF9fd2VicGFja19yZXF1aXJlX18oNjkpO1xuXG52YXIgX1RleHRGaWVsZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9UZXh0RmllbGQpO1xuXG52YXIgX0NhcmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY2KTtcblxudmFyIF9GbGF0QnV0dG9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cbnZhciBfRmxhdEJ1dHRvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9GbGF0QnV0dG9uKTtcblxudmFyIF9heGlvcyA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpO1xuXG52YXIgX2F4aW9zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F4aW9zKTtcblxudmFyIF9IZWFkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDczKTtcblxudmFyIF9IZWFkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSGVhZGVyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLy9pbXBvcnQgbWFpbkNvbmZpZyBmcm9tICcuLi9jb25maWcvbWFpbi1jb25maWcnO1xuXG4vKiBGSU4gREUgSU1QT1JUUyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG52YXIgRU1QVFlfQ0FMTEJBQ0sgPSBmdW5jdGlvbiBFTVBUWV9DQUxMQkFDSygpIHt9O1xuXG52YXIgU2hvcGFkbUxvZ2luID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ1Nob3BhZG1Mb2dpbicsXG5cbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiAnJyxcbiAgICAgICAgICAgIHBhc3N3b3JkOiAnJyxcbiAgICAgICAgICAgIGVyck1zZzogbnVsbFxuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICAgICAgcmV0dXJuIHsgb25TdWJtaXQ6IEVNUFRZX0NBTExCQUNLIH07XG4gICAgfSxcblxuICAgIHN1Ym1pdEZvcm06IGZ1bmN0aW9uIHN1Ym1pdEZvcm0oKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgdmFyIHVzZXJuYW1lID0gdGhpcy5zdGF0ZS51c2VybmFtZTtcbiAgICAgICAgdmFyIHBhc3N3b3JkID0gdGhpcy5zdGF0ZS5wYXNzd29yZDtcblxuICAgICAgICAvL2hhZ28gZW5jb2RpbmcgYmFzZTY0IHBhcmEgcGFzYXIgbGFzIGNyZWRlbmNpYWxlc1xuICAgICAgICB2YXIgZW5jb2RlZCA9IGJ0b2EodXNlcm5hbWUgKyAnOicgKyBwYXNzd29yZCk7XG5cbiAgICAgICAgKDAsIF9heGlvczIuZGVmYXVsdCkoe1xuICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsIC8veW91IGNhbiBzZXQgd2hhdCByZXF1ZXN0IHlvdSB3YW50IHRvIGJlXG4gICAgICAgICAgICB1cmw6ICcvYXBpL3YxL3Nob3BhZG0vbG9naW4nLFxuICAgICAgICAgICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiAnQmFzaWMgJyArIGVuY29kZWQgfVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChjb250ZW50cykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvbnRlbmlkbzonKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvbnRlbnRzLmRhdGEpO1xuICAgICAgICAgICAgX3RoaXMucHJvcHMub25TdWJtaXQoY29udGVudHMuZGF0YS50b2tlbik7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChjYXVzZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3InKTtcbiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgZXJyTXNnOiAnQ3JlZGVuY2lhbGVzIGludmFsaWRhcycgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBoYW5kbGVLZXlQcmVzczogZnVuY3Rpb24gaGFuZGxlS2V5UHJlc3MoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LmtleSA9PSAnRW50ZXInKSB0aGlzLnN1Ym1pdEZvcm0oKTtcbiAgICB9LFxuXG4gICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgIHZhciBtc2dFbGVtID0gdGhpcy5zdGF0ZS5lcnJNc2cgPyBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgIHsgc3R5bGU6IHsgY29sb3I6ICdyZWQnIH0gfSxcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuZXJyTXNnXG4gICAgICAgICkgOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnZGl2JywgbnVsbCk7XG5cbiAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7IG9uS2V5UHJlc3M6IHRoaXMuaGFuZGxlS2V5UHJlc3MgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9IZWFkZXIyLmRlZmF1bHQsIHsgdGl0bGU6ICdBZG1pbmlzdHJhY2lvbiBjb21lcmNpbycgfSksXG4gICAgICAgICAgICBtc2dFbGVtLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgX011aVRoZW1lUHJvdmlkZXIyLmRlZmF1bHQsXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgX0NhcmQuQ2FyZCxcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0NhcmQuQ2FyZEhlYWRlciwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdJbmljaWFyIHNlc2lvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ0luZ3Jlc2UgY3JlZGVuY2lhbGVzJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgJzsnLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgIF9DYXJkLkNhcmRUZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBleHBhbmRhYmxlOiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1RleHRGaWVsZDIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICd1c2VybmFtZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGludDogJ3VzZXJuYW1lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9hdGluZ0xhYmVsVGV4dDogJ3VzZXJuYW1lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS51c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLnNldFN0YXRlKHsgdXNlcm5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnYnInLCBudWxsKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9UZXh0RmllbGQyLmRlZmF1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAncGFzc3dvcmQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpbnRUZXh0OiAnUGFzc3dvcmQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0aW5nTGFiZWxUZXh0OiAnUGFzc3dvcmQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwYXNzd29yZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUucGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5zZXRTdGF0ZSh7IHBhc3N3b3JkOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2JyJywgbnVsbClcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBfQ2FyZC5DYXJkQWN0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfRmxhdEJ1dHRvbjIuZGVmYXVsdCwgeyBsYWJlbDogJ0luaWNpYXIgc2VzaW9uJywgb25DbGljazogdGhpcy5zdWJtaXRGb3JtIH0pXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFNob3BhZG1Mb2dpbjtcblxuLyoqKi8gfSksXG5cbi8qKiovIDI0NTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cbnZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXG52YXIgX3JlYWN0Um91dGVyRG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nyk7XG5cbnZhciBfTXVpVGhlbWVQcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpO1xuXG52YXIgX011aVRoZW1lUHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTXVpVGhlbWVQcm92aWRlcik7XG5cbnZhciBfYXhpb3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblxudmFyIF9heGlvczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9heGlvcyk7XG5cbnZhciBfU2hvcEJhY2tvZmZpY2VCYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyMSk7XG5cbnZhciBfU2hvcEJhY2tvZmZpY2VCYXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU2hvcEJhY2tvZmZpY2VCYXIpO1xuXG52YXIgX1Nob3BhZG1JbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oMjI0KTtcblxudmFyIF9TaG9wYWRtSW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU2hvcGFkbUluZGV4KTtcblxudmFyIF9TaG9wYWRtTG9naW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyNSk7XG5cbnZhciBfU2hvcGFkbUxvZ2luMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Nob3BhZG1Mb2dpbik7XG5cbnZhciBfcmVhY3RUYXBFdmVudFBsdWdpbiA9IF9fd2VicGFja19yZXF1aXJlX18oODYpO1xuXG52YXIgX3JlYWN0VGFwRXZlbnRQbHVnaW4yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3RUYXBFdmVudFBsdWdpbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbigwLCBfcmVhY3RUYXBFdmVudFBsdWdpbjIuZGVmYXVsdCkoKTtcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8qIEVTVEUgRlJBR01FTlRPIERFIENPRElHTyBFUyBSRVFVRVJJRE8gUEFSQSBMT1MgRVZFTlRPUyBERSBUSVBPIFRPVUNIIE8gQ0xJQ0sgRU4gQ09NUE9ORU5URVMgTUFURVJJQUwtVUkgKi9cbmNvbnNvbGUubG9nKCdQYXJzZWFuZG8gY29va2llICcgKyBkb2N1bWVudC5jb29raWUpO1xudmFyIGNvb2tpZSA9IGRvY3VtZW50LmNvb2tpZSB8fCAnJztcbnZhciBjb29raWVUb2tlblN0ciA9IGNvb2tpZS5zcGxpdCgnOyAnKS5maW5kKGZ1bmN0aW9uIChzKSB7XG4gICAgcmV0dXJuIHMuc3RhcnRzV2l0aCgndG9rZW49Jyk7XG59KTtcbnZhciBjb29raWVUb2tlbiA9IGNvb2tpZVRva2VuU3RyID8gY29va2llVG9rZW5TdHIucmVwbGFjZSgndG9rZW49JywgJycpIDogbnVsbDtcblxudmFyIFNob3BCYWNrb2ZmaWNlID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ1Nob3BCYWNrb2ZmaWNlJyxcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRva2VuOiBudWxsLFxuICAgICAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgICAgICAgIHJlbmRlclJlYWR5OiBmYWxzZVxuICAgICAgICB9O1xuICAgIH0sXG4gICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICAvKiBTRSBDQVJHQU4gTEFTIENBTkNJT05FUyBERVNQVUVTIFFVRSBFTCBDT01QT05FTlRFIEhBWUEgU0lETyBNT05UQURPICovXG4gICAgICAgIGNvbnNvbGUubG9nKCdTaG9wQmFja29mZmljZSBNT05UQURBIScpO1xuICAgICAgICAvKiBTaSBzZSBlbmN1ZW50cmEgdW4gdG9rZW4gZW4gbGFzIGNvb2tpZXMgZW50b25jZXMgc2Ugc2V0ZWEgZWwgbWlzbW8geSBzZSBvYnRpZW5lIGVsIHVzdWFyaW9cclxuICAgICAgICBDYXNvIGNvbnRyYXJpbywgc2UgbWFyY2EgYWwgY29tcG9uZW50ZSBjb21vIGxpc3RvIHBhcmEgcmVuZGVyaXphciAqL1xuICAgICAgICBpZiAoY29va2llVG9rZW4pIHRoaXMuc2V0VG9rZW4oY29va2llVG9rZW4pO2Vsc2UgdGhpcy5zZXRTdGF0ZSh7IHJlbmRlclJlYWR5OiB0cnVlIH0pO1xuICAgIH0sXG4gICAgc2V0VG9rZW46IGZ1bmN0aW9uIHNldFRva2VuKHRva2VuKSB7XG4gICAgICAgIHRva2VuID0gdG9rZW4udG9rZW4gfHwgdG9rZW47XG4gICAgICAgIGNvbnNvbGUubG9nKCdTZXRlYW5kbyB0b2tlbiAnICsgdG9rZW4pO1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyB0b2tlbjogdG9rZW4sIHJlbmRlclJlYWR5OiB0cnVlIH0pO1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1JFTkRFUklORyBTaG9wQmFja29mZmljZSEnKTtcblxuICAgICAgICAvL2lmICghdGhpcy5zdGF0ZS5yZW5kZXJSZWFkeSkgcmV0dXJuICg8c3Bhbj5Fc3BlcmUuLi48L3NwYW4+KTtcblxuICAgICAgICB2YXIgdG9rZW4gPSB0aGlzLnN0YXRlLnRva2VuO1xuICAgICAgICBpZiAoIXRva2VuKSByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1Nob3BhZG1Mb2dpbjIuZGVmYXVsdCwgeyBvblN1Ym1pdDogdGhpcy5zZXRUb2tlbiB9KTtcblxuICAgICAgICBjb25zb2xlLmxvZygnd2luZG93LmxvY2F0aW9uLmhhc2g6ICcgKyB3aW5kb3cubG9jYXRpb24uaGFzaCk7XG4gICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaGFzaCA9PSAnIy8nKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUkVQTEFDSU5HIExPQ0FUSU9OJyk7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgnL3Nob3BhZG0jL2luZGV4Jyk7XG4gICAgICAgICAgICAvL3JldHVybiA8c3Bhbj5SZWRpcmVjY2lvbmFuZG8uLi48L3NwYW4+O1xuICAgICAgICB9XG5cbiAgICAgICAgLyogU2kgdW4gdXN1YXJpbyBpbmljaW8gc2VzaW9uLCByZW5kZXJpem8gbGEgYXBwIG5vcm1hbCAqL1xuICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBfTXVpVGhlbWVQcm92aWRlcjIuZGVmYXVsdCxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9TaG9wQmFja29mZmljZUJhcjIuZGVmYXVsdCwgeyBvbkxvZ291dDogZnVuY3Rpb24gb25Mb2dvdXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMubG9nb3V0Rm9ybS5zdWJtaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfSB9KSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSb3V0ZXJEb20uUm91dGUsIHsgcGF0aDogJy9pbmRleCcsIGNvbXBvbmVudDogX1Nob3BhZG1JbmRleDIuZGVmYXVsdCB9KSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnZm9ybScsIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnL3Nob3BhZG0vbG9nb3V0JyxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2dvdXRGb3JtID0gZjtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsgZGlzcGxheTogJ2hpZGRlbicgfSB9KVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG5fcmVhY3REb20yLmRlZmF1bHQucmVuZGVyKF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgIF9yZWFjdFJvdXRlckRvbS5IYXNoUm91dGVyLFxuICAgIG51bGwsXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoU2hvcEJhY2tvZmZpY2UsIG51bGwpXG4pLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpKTtcblxuLyoqKi8gfSlcblxufSxbMjQ1XSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNob3BiYWNrb2ZmaWNlLmJ1bmRsZS5qcyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuXHJcbmltcG9ydCBBcHBCYXIgZnJvbSAnbWF0ZXJpYWwtdWkvQXBwQmFyJztcclxuaW1wb3J0IERyYXdlciBmcm9tICdtYXRlcmlhbC11aS9EcmF3ZXInO1xyXG5pbXBvcnQgTWVudUl0ZW0gZnJvbSAnbWF0ZXJpYWwtdWkvTWVudUl0ZW0nO1xyXG5pbXBvcnQgQXJyb3dEcm9wUmlnaHQgZnJvbSAnbWF0ZXJpYWwtdWkvc3ZnLWljb25zL25hdmlnYXRpb24tYXJyb3ctZHJvcC1yaWdodCc7XHJcblxyXG5pbXBvcnQgSWNvbk1lbnUgZnJvbSAnbWF0ZXJpYWwtdWkvSWNvbk1lbnUnO1xyXG5pbXBvcnQgSWNvbkJ1dHRvbiBmcm9tICdtYXRlcmlhbC11aS9JY29uQnV0dG9uJztcclxuaW1wb3J0IE1vcmVWZXJ0SWNvbiBmcm9tICdtYXRlcmlhbC11aS9zdmctaWNvbnMvbmF2aWdhdGlvbi9tb3JlLXZlcnQnO1xyXG5cclxuXHJcbmZ1bmN0aW9uIFN1Yk1lbnUocHJvcHMpIHtcclxuICAgIHJldHVybiA8SWNvbk1lbnVcclxuICAgICAgICBpY29uQnV0dG9uRWxlbWVudD17XHJcbiAgICAgICAgICAgIDxJY29uQnV0dG9uID48TW9yZVZlcnRJY29uXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3N1Ym1lbnUtc3ZnJ1xyXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6ICd3aGl0ZScsIGZpbGw6ICd3aGl0ZScgfX0gLz5cclxuICAgICAgICAgICAgPC9JY29uQnV0dG9uPlxyXG4gICAgICAgIH1cclxuICAgICAgICB0YXJnZXRPcmlnaW49e3sgaG9yaXpvbnRhbDogJ3JpZ2h0JywgdmVydGljYWw6ICd0b3AnIH19XHJcbiAgICAgICAgYW5jaG9yT3JpZ2luPXt7IGhvcml6b250YWw6ICdyaWdodCcsIHZlcnRpY2FsOiAndG9wJyB9fT5cclxuXHJcbiAgICAgICAgPE1lbnVJdGVtIHByaW1hcnlUZXh0PVwiQ2VycmFyIHNlc2lvblwiIG9uQ2xpY2s9e3Byb3BzLm9uTG9nb3V0fSAvPlxyXG4gICAgPC9JY29uTWVudT47XHJcbn1cclxuXHJcblN1Yk1lbnUubXVpTmFtZSA9ICdJY29uTWVudSc7XHJcblxyXG5jb25zdCBTaG9wQmFja29mZmljZUJhciA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuICAgIGdldEluaXRpYWxTdGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBkcmF3ZXJPcGVuOiBmYWxzZVxyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIGdldERlZmF1bHRQcm9wcygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBvbkxvZ291dDogKCkgPT4geyB9XHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcblxyXG4gICAgY2xvc2VEcmF3ZXIoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRyYXdlck9wZW46IGZhbHNlIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICB0b2dnbGVEcmF3ZXIoKSB7XHJcbiAgICAgICAgY29uc3QgZHJhd2VyT3BlbiA9ICF0aGlzLnN0YXRlLmRyYXdlck9wZW47XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRyYXdlck9wZW4gfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2ID5cclxuICAgICAgICAgICAgICAgIDxBcHBCYXJcclxuICAgICAgICAgICAgICAgICAgICBvbkxlZnRJY29uQnV0dG9uVG91Y2hUYXA9e3RoaXMudG9nZ2xlRHJhd2VyfVxyXG4gICAgICAgICAgICAgICAgICAgIGljb25FbGVtZW50UmlnaHQ9ezxTdWJNZW51IG9uTG9nb3V0PXt0aGlzLnByb3BzLm9uTG9nb3V0fSAvPn1cclxuICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkFkbWluaXN0cmFjaW9uIGNvbWVyY2lvXCIgLz5cclxuXHJcbiAgICAgICAgICAgICAgICA8RHJhd2VyIG9wZW49e3RoaXMuc3RhdGUuZHJhd2VyT3Blbn0gZG9ja2VkPXtmYWxzZX0gb25SZXF1ZXN0Q2hhbmdlPXtvcGVuID0+IHRoaXMuc2V0U3RhdGUoeyBkcmF3ZXJPcGVuOiBvcGVuIH0pfSA+XHJcbiAgICAgICAgICAgICAgICAgICAgPExpbmsgdG89XCIvaW5kZXhcIiBvbkNsaWNrPXt0aGlzLmNsb3NlRHJhd2VyfT48TWVudUl0ZW0gPlByaW5jaXBhbDwvTWVudUl0ZW0+PC9MaW5rPlxyXG5cclxuICAgICAgICAgICAgICAgIDwvRHJhd2VyPlxyXG4gICAgICAgICAgICA8L2RpdiA+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTaG9wQmFja29mZmljZUJhcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9jb21wb25lbnRzL1Nob3BCYWNrb2ZmaWNlQmFyLmpzIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuXHJcbi8qKiBDb21wb25lbnRlIGluZGljZSBkZSBhZG1pbmlzdHJhY2lvbiBkZSBIT1kgQ09NTyAqL1xyXG5jb25zdCBTaG9wYWRtSW5kZXggPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcbiAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndpdGgtbWFyZ2luIGluZGV4XCI+XHJcbiAgICAgICAgICAgICAgICA8aDE+QWRtaW5pc3RyYWNpb24gZGUgY29tZXJjaW88L2gxPlxyXG4gICAgICAgICAgICAgICAgPGgyPkNvbmZpZ3VyYWNpb24geSBlc3RhZGlzdGljYXM8L2gyPlxyXG4gICAgICAgICAgICAgICAgPHA+RGVzZGUgYXF1aSBlcyBwb3NpYmxlIGFjdHVhbGl6YXIgZWwgbWVudSB5IG9idGVuZXIgZXN0YWRpc3RpY2FzIGRlIGxvcyBwZWRpZG9zIG1lbnN1YWxlcy5cclxuICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTaG9wYWRtSW5kZXg7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vY29tcG9uZW50cy9TaG9wYWRtSW5kZXguanMiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuaW1wb3J0IE11aVRoZW1lUHJvdmlkZXIgZnJvbSAnbWF0ZXJpYWwtdWkvc3R5bGVzL011aVRoZW1lUHJvdmlkZXInO1xyXG5pbXBvcnQgUmFpc2VkQnV0dG9uIGZyb20gJ21hdGVyaWFsLXVpL1JhaXNlZEJ1dHRvbic7XHJcbmltcG9ydCBUZXh0RmllbGQgZnJvbSAnbWF0ZXJpYWwtdWkvVGV4dEZpZWxkJztcclxuaW1wb3J0IHsgQ2FyZCwgQ2FyZEFjdGlvbnMsIENhcmRIZWFkZXIsIENhcmRUZXh0IH0gZnJvbSAnbWF0ZXJpYWwtdWkvQ2FyZCc7XHJcbmltcG9ydCBGbGF0QnV0dG9uIGZyb20gJ21hdGVyaWFsLXVpL0ZsYXRCdXR0b24nO1xyXG5cclxuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcclxuXHJcbmltcG9ydCBIZWFkZXIgZnJvbSAnLi9IZWFkZXInO1xyXG4vL2ltcG9ydCBtYWluQ29uZmlnIGZyb20gJy4uL2NvbmZpZy9tYWluLWNvbmZpZyc7XHJcblxyXG4vKiBGSU4gREUgSU1QT1JUUyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuY29uc3QgRU1QVFlfQ0FMTEJBQ0sgPSAoKSA9PiB7IH07XHJcblxyXG5jb25zdCBTaG9wYWRtTG9naW4gPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB1c2VybmFtZTogJycsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiAnJyxcclxuICAgICAgICAgICAgZXJyTXNnOiBudWxsLFxyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7IG9uU3VibWl0OiBFTVBUWV9DQUxMQkFDSyB9O1xyXG4gICAgfSxcclxuXHJcbiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc3QgdXNlcm5hbWUgPSB0aGlzLnN0YXRlLnVzZXJuYW1lO1xyXG4gICAgICAgIGNvbnN0IHBhc3N3b3JkID0gdGhpcy5zdGF0ZS5wYXNzd29yZDtcclxuXHJcbiAgICAgICAgLy9oYWdvIGVuY29kaW5nIGJhc2U2NCBwYXJhIHBhc2FyIGxhcyBjcmVkZW5jaWFsZXNcclxuICAgICAgICBjb25zdCBlbmNvZGVkID0gYnRvYSh1c2VybmFtZSArICc6JyArIHBhc3N3b3JkKTtcclxuXHJcbiAgICAgICAgYXhpb3Moe1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdwb3N0JywgLy95b3UgY2FuIHNldCB3aGF0IHJlcXVlc3QgeW91IHdhbnQgdG8gYmVcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS92MS9zaG9wYWRtL2xvZ2luJyxcclxuICAgICAgICAgICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiAnQmFzaWMgJyArIGVuY29kZWQgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGNvbnRlbnRzID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb250ZW5pZG86Jyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjb250ZW50cy5kYXRhKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25TdWJtaXQoY29udGVudHMuZGF0YS50b2tlbik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChjYXVzZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGVyck1zZzogJ0NyZWRlbmNpYWxlcyBpbnZhbGlkYXMnIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgaGFuZGxlS2V5UHJlc3M6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC5rZXkgPT0gJ0VudGVyJykgdGhpcy5zdWJtaXRGb3JtKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxldCBtc2dFbGVtID0gdGhpcy5zdGF0ZS5lcnJNc2cgPyA8cCBzdHlsZT17eyBjb2xvcjogJ3JlZCcgfX0gPnt0aGlzLnN0YXRlLmVyck1zZ308L3A+IDogPGRpdiAvPjtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBvbktleVByZXNzPXt0aGlzLmhhbmRsZUtleVByZXNzfT5cclxuICAgICAgICAgICAgICAgIDxIZWFkZXIgdGl0bGU9XCJBZG1pbmlzdHJhY2lvbiBjb21lcmNpb1wiIC8+XHJcbiAgICAgICAgICAgICAgICB7bXNnRWxlbX1cclxuICAgICAgICAgICAgICAgIDxNdWlUaGVtZVByb3ZpZGVyPlxyXG4gICAgICAgICAgICAgICAgICAgIDxDYXJkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Q2FyZEhlYWRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJJbmljaWFyIHNlc2lvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZT0nSW5ncmVzZSBjcmVkZW5jaWFsZXMnIC8+O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPENhcmRUZXh0IGV4cGFuZGFibGU9e2ZhbHNlfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0RmllbGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwidXNlcm5hbWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpbnQ9XCJ1c2VybmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRpbmdMYWJlbFRleHQ9XCJ1c2VybmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudXNlcm5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gdGhpcy5zZXRTdGF0ZSh7IHVzZXJuYW1lOiBlLnRhcmdldC52YWx1ZSB9KX0gLz48YnIgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGV4dEZpZWxkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInBhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaW50VGV4dD1cIlBhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9hdGluZ0xhYmVsVGV4dD1cIlBhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnBhc3N3b3JkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHRoaXMuc2V0U3RhdGUoeyBwYXNzd29yZDogZS50YXJnZXQudmFsdWUgfSl9IC8+PGJyIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQ2FyZFRleHQ+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Q2FyZEFjdGlvbnM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RmxhdEJ1dHRvbiBsYWJlbD1cIkluaWNpYXIgc2VzaW9uXCIgb25DbGljaz17dGhpcy5zdWJtaXRGb3JtfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0NhcmRBY3Rpb25zPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvQ2FyZD5cclxuXHJcbiAgICAgICAgICAgICAgICA8L011aVRoZW1lUHJvdmlkZXIgPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNob3BhZG1Mb2dpbjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9jb21wb25lbnRzL1Nob3BhZG1Mb2dpbi5qcyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBSZWFjdERvbSBmcm9tICdyZWFjdC1kb20nO1xyXG5pbXBvcnQgeyBIYXNoUm91dGVyIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcbmltcG9ydCB7IFJvdXRlIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcblxyXG5pbXBvcnQgTXVpVGhlbWVQcm92aWRlciBmcm9tICdtYXRlcmlhbC11aS9zdHlsZXMvTXVpVGhlbWVQcm92aWRlcic7XHJcblxyXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5cclxuaW1wb3J0IFNob3BCYWNrb2ZmaWNlQmFyIGZyb20gJy4vU2hvcEJhY2tvZmZpY2VCYXInO1xyXG5pbXBvcnQgU2hvcGFkbUluZGV4IGZyb20gJy4vU2hvcGFkbUluZGV4JztcclxuaW1wb3J0IFNob3BhZG1Mb2dpbiBmcm9tICcuL1Nob3BhZG1Mb2dpbic7XHJcblxyXG4vKiBFU1RFIEZSQUdNRU5UTyBERSBDT0RJR08gRVMgUkVRVUVSSURPIFBBUkEgTE9TIEVWRU5UT1MgREUgVElQTyBUT1VDSCBPIENMSUNLIEVOIENPTVBPTkVOVEVTIE1BVEVSSUFMLVVJICovXHJcbmltcG9ydCBpbmplY3RUYXBFdmVudFBsdWdpbiBmcm9tICdyZWFjdC10YXAtZXZlbnQtcGx1Z2luJztcclxuaW5qZWN0VGFwRXZlbnRQbHVnaW4oKTtcclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmNvbnNvbGUubG9nKCdQYXJzZWFuZG8gY29va2llICcgKyBkb2N1bWVudC5jb29raWUpO1xyXG5jb25zdCBjb29raWUgPSBkb2N1bWVudC5jb29raWUgfHwgJyc7XHJcbmNvbnN0IGNvb2tpZVRva2VuU3RyID0gY29va2llLnNwbGl0KCc7ICcpLmZpbmQocyA9PiBzLnN0YXJ0c1dpdGgoJ3Rva2VuPScpKTtcclxuY29uc3QgY29va2llVG9rZW4gPSBjb29raWVUb2tlblN0ciA/IGNvb2tpZVRva2VuU3RyLnJlcGxhY2UoJ3Rva2VuPScsICcnKSA6IG51bGw7XHJcblxyXG5jb25zdCBTaG9wQmFja29mZmljZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuICAgIGdldEluaXRpYWxTdGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0b2tlbjogbnVsbCxcclxuICAgICAgICAgICAgdXNlcjogbnVsbCxcclxuICAgICAgICAgICAgcmVuZGVyUmVhZHk6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgLyogU0UgQ0FSR0FOIExBUyBDQU5DSU9ORVMgREVTUFVFUyBRVUUgRUwgQ09NUE9ORU5URSBIQVlBIFNJRE8gTU9OVEFETyAqL1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTaG9wQmFja29mZmljZSBNT05UQURBIScpO1xyXG4gICAgICAgIC8qIFNpIHNlIGVuY3VlbnRyYSB1biB0b2tlbiBlbiBsYXMgY29va2llcyBlbnRvbmNlcyBzZSBzZXRlYSBlbCBtaXNtbyB5IHNlIG9idGllbmUgZWwgdXN1YXJpb1xyXG4gICAgICAgIENhc28gY29udHJhcmlvLCBzZSBtYXJjYSBhbCBjb21wb25lbnRlIGNvbW8gbGlzdG8gcGFyYSByZW5kZXJpemFyICovXHJcbiAgICAgICAgaWYgKGNvb2tpZVRva2VuKSB0aGlzLnNldFRva2VuKGNvb2tpZVRva2VuKTtcclxuICAgICAgICBlbHNlIHRoaXMuc2V0U3RhdGUoeyByZW5kZXJSZWFkeTogdHJ1ZSB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0VG9rZW4odG9rZW4pIHtcclxuICAgICAgICB0b2tlbiA9IHRva2VuLnRva2VuIHx8IHRva2VuO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTZXRlYW5kbyB0b2tlbiAnICsgdG9rZW4pO1xyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgdG9rZW4sIHJlbmRlclJlYWR5OiB0cnVlIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1JFTkRFUklORyBTaG9wQmFja29mZmljZSEnKTtcclxuXHJcbiAgICAgICAgLy9pZiAoIXRoaXMuc3RhdGUucmVuZGVyUmVhZHkpIHJldHVybiAoPHNwYW4+RXNwZXJlLi4uPC9zcGFuPik7XHJcblxyXG4gICAgICAgIGNvbnN0IHRva2VuID0gdGhpcy5zdGF0ZS50b2tlbjtcclxuICAgICAgICBpZiAoIXRva2VuKSByZXR1cm4gPFNob3BhZG1Mb2dpbiBvblN1Ym1pdD17dGhpcy5zZXRUb2tlbn0gLz47XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCd3aW5kb3cubG9jYXRpb24uaGFzaDogJyArIHdpbmRvdy5sb2NhdGlvbi5oYXNoKTtcclxuICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhhc2ggPT0gJyMvJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUkVQTEFDSU5HIExPQ0FUSU9OJyk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKCcvc2hvcGFkbSMvaW5kZXgnKTtcclxuICAgICAgICAgICAgLy9yZXR1cm4gPHNwYW4+UmVkaXJlY2Npb25hbmRvLi4uPC9zcGFuPjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIFNpIHVuIHVzdWFyaW8gaW5pY2lvIHNlc2lvbiwgcmVuZGVyaXpvIGxhIGFwcCBub3JtYWwgKi9cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8TXVpVGhlbWVQcm92aWRlcj5cclxuICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPFNob3BCYWNrb2ZmaWNlQmFyIG9uTG9nb3V0PXsoKSA9PiB0aGlzLmxvZ291dEZvcm0uc3VibWl0KCl9IC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxSb3V0ZSBwYXRoPVwiL2luZGV4XCIgY29tcG9uZW50PXtTaG9wYWRtSW5kZXh9IC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxmb3JtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbj0nL3Nob3BhZG0vbG9nb3V0J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q9J1BPU1QnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17ZiA9PiB0aGlzLmxvZ291dEZvcm0gPSBmfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiAnaGlkZGVuJyB9fT5cclxuICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9NdWlUaGVtZVByb3ZpZGVyPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuUmVhY3REb20ucmVuZGVyKFxyXG4gICAgPEhhc2hSb3V0ZXI+XHJcbiAgICAgICAgPFNob3BCYWNrb2ZmaWNlIC8+XHJcbiAgICA8L0hhc2hSb3V0ZXI+LFxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKVxyXG4pO1xyXG5cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vY29tcG9uZW50cy9TaG9wQmFja29mZmljZS5qcyJdLCJzb3VyY2VSb290IjoiIn0=