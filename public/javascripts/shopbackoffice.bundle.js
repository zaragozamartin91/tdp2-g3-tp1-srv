webpackJsonp([1],{221:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function l(e){return r.default.createElement(g.default,{iconButtonElement:r.default.createElement(v.default,null,r.default.createElement(k.default,{className:"submenu-svg",style:{color:"white",fill:"white"}})),targetOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"top"}},r.default.createElement(m.default,{primaryText:"Cerrar sesion",onClick:e.onLogout}))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=a(o),u=n(57),i=n(166),s=a(i),d=n(168),c=a(d),f=n(172),m=a(f),h=n(180),p=(a(h),n(169)),g=a(p),E=n(67),v=a(E),w=n(181),k=a(w);l.muiName="IconMenu";var y=r.default.createClass({displayName:"ShopBackofficeBar",getInitialState:function(){return{drawerOpen:!1}},getDefaultProps:function(){return{onLogout:function(){}}},closeDrawer:function(){this.setState({drawerOpen:!1})},toggleDrawer:function(){var e=!this.state.drawerOpen;this.setState({drawerOpen:e})},render:function(){var e=this;return r.default.createElement("div",null,r.default.createElement(s.default,{onLeftIconButtonTouchTap:this.toggleDrawer,iconElementRight:r.default.createElement(l,{onLogout:this.props.onLogout}),title:"Administracion comercio"}),r.default.createElement(c.default,{open:this.state.drawerOpen,docked:!1,onRequestChange:function(t){return e.setState({drawerOpen:t})}},r.default.createElement(u.Link,{to:"/index",onClick:this.closeDrawer},r.default.createElement(m.default,null,"Principal"))))}});t.default=y},224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(a),o=l.default.createClass({displayName:"ShopadmIndex",render:function(){return l.default.createElement("div",{className:"with-margin index"},l.default.createElement("h1",null,"Administracion de comercio"),l.default.createElement("h2",null,"Configuracion y estadisticas"),l.default.createElement("p",null,"Desde aqui es posible actualizar el menu y obtener estadisticas de los pedidos mensuales."))}});t.default=o},225:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),o=a(l),r=n(31),u=a(r),i=n(68),s=(a(i),n(69)),d=a(s),c=n(66),f=n(39),m=a(f),h=n(36),p=a(h),g=n(73),E=a(g),v=function(){},w=o.default.createClass({displayName:"ShopadmLogin",getInitialState:function(){return{username:"",password:"",errMsg:null}},getDefaultProps:function(){return{onSubmit:v}},submitForm:function(){var e=this,t=this.state.username,n=this.state.password,a=btoa(t+":"+n);(0,p.default)({method:"post",url:"/api/v1/shopadm/login",headers:{Authorization:"Basic "+a}}).then(function(t){console.log("Contenido:"),console.log(t.data),e.props.onSubmit(t.data.token)}).catch(function(t){console.error(t),e.setState({errMsg:"Credenciales invalidas"})})},handleKeyPress:function(e){"Enter"==e.key&&this.submitForm()},render:function(){var e=this,t=this.state.errMsg?o.default.createElement("p",{style:{color:"red"}},this.state.errMsg):o.default.createElement("div",null);return o.default.createElement("div",{onKeyPress:this.handleKeyPress},o.default.createElement(E.default,{title:"Administracion comercio"}),t,o.default.createElement(u.default,null,o.default.createElement(c.Card,null,o.default.createElement(c.CardHeader,{title:"Iniciar sesion",subtitle:"Ingrese credenciales"}),";",o.default.createElement(c.CardText,{expandable:!1},o.default.createElement(d.default,{name:"username",hint:"username",floatingLabelText:"username",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})}}),o.default.createElement("br",null),o.default.createElement(d.default,{name:"password",hintText:"Password",floatingLabelText:"Password",type:"password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}}),o.default.createElement("br",null)),o.default.createElement(c.CardActions,null,o.default.createElement(m.default,{label:"Iniciar sesion",onClick:this.submitForm})))))}});t.default=w},245:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var l=n(0),o=a(l),r=n(17),u=a(r),i=n(57),s=n(31),d=a(s),c=n(36),f=a(c),m=n(221),h=a(m),p=n(224),g=a(p),E=n(225),v=a(E);(0,a(n(86)).default)(),console.log("Parseando cookie "+document.cookie);var w=document.cookie||"",k=w.split("; ").find(function(e){return e.startsWith("token=")}),y=k?k.replace("token=",""):null,b=o.default.createClass({displayName:"ShopBackoffice",getInitialState:function(){return{token:null,user:null,renderReady:!1,shop:null}},componentDidMount:function(){console.log("ShopBackoffice MONTADA!"),y?this.setToken(y):this.setState({renderReady:!0})},setToken:function(e){var t=this;e=e.token||e,console.log("Seteando token "+e);(0,f.default)({method:"get",url:"/api/v1/shopadm/myshop",headers:{Authorization:"Bearer "+e}}).then(function(n){console.log(n.data),t.setState({token:e,shop:n.data.shop,renderReady:!0})}).catch(console.error)},render:function(){var e=this;return console.log("RENDERING ShopBackoffice!"),this.state.renderReady?this.state.token?(console.log("window.location.hash: "+window.location.hash),"#/"==window.location.hash&&(console.log("REPLACING LOCATION"),window.location.replace("/shopadm#/index")),o.default.createElement(d.default,null,o.default.createElement("div",null,o.default.createElement(h.default,{onLogout:function(){return e.logoutForm.submit()}}),o.default.createElement(i.Route,{path:"/index",component:g.default}),o.default.createElement("form",{action:"/shopadm/logout",method:"POST",ref:function(t){return e.logoutForm=t},style:{display:"hidden"}})))):o.default.createElement(v.default,{onSubmit:this.setToken}):o.default.createElement("span",null,"Espere...")}});u.default.render(o.default.createElement(i.HashRouter,null,o.default.createElement(b,null)),document.getElementById("root"))}},[245]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2hvcGJhY2tvZmZpY2UuYnVuZGxlLmpzIiwid2VicGFjazovLy8uL2NvbXBvbmVudHMvU2hvcEJhY2tvZmZpY2VCYXIuanMiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9TaG9wYWRtSW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9TaG9wYWRtTG9naW4uanMiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9TaG9wQmFja29mZmljZS5qcyJdLCJuYW1lcyI6WyJ3ZWJwYWNrSnNvbnAiLCIyMjEiLCJtb2R1bGUiLCJleHBvcnRzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIlN1Yk1lbnUiLCJwcm9wcyIsIl9yZWFjdDIiLCJjcmVhdGVFbGVtZW50IiwiX0ljb25NZW51MiIsImljb25CdXR0b25FbGVtZW50IiwiX0ljb25CdXR0b24yIiwiX21vcmVWZXJ0MiIsImNsYXNzTmFtZSIsInN0eWxlIiwiY29sb3IiLCJmaWxsIiwidGFyZ2V0T3JpZ2luIiwiaG9yaXpvbnRhbCIsInZlcnRpY2FsIiwiYW5jaG9yT3JpZ2luIiwiX01lbnVJdGVtMiIsInByaW1hcnlUZXh0Iiwib25DbGljayIsIm9uTG9nb3V0IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIl9yZWFjdCIsIl9yZWFjdFJvdXRlckRvbSIsIl9BcHBCYXIiLCJfQXBwQmFyMiIsIl9EcmF3ZXIiLCJfRHJhd2VyMiIsIl9NZW51SXRlbSIsIl9uYXZpZ2F0aW9uQXJyb3dEcm9wUmlnaHQiLCJfSWNvbk1lbnUiLCJfSWNvbkJ1dHRvbiIsIl9tb3JlVmVydCIsIm11aU5hbWUiLCJTaG9wQmFja29mZmljZUJhciIsImNyZWF0ZUNsYXNzIiwiZGlzcGxheU5hbWUiLCJnZXRJbml0aWFsU3RhdGUiLCJkcmF3ZXJPcGVuIiwiZ2V0RGVmYXVsdFByb3BzIiwiY2xvc2VEcmF3ZXIiLCJ0aGlzIiwic2V0U3RhdGUiLCJ0b2dnbGVEcmF3ZXIiLCJzdGF0ZSIsInJlbmRlciIsIl90aGlzIiwib25MZWZ0SWNvbkJ1dHRvblRvdWNoVGFwIiwiaWNvbkVsZW1lbnRSaWdodCIsInRpdGxlIiwib3BlbiIsImRvY2tlZCIsIm9uUmVxdWVzdENoYW5nZSIsIkxpbmsiLCJ0byIsIjIyNCIsIlNob3BhZG1JbmRleCIsIjIyNSIsIl9NdWlUaGVtZVByb3ZpZGVyIiwiX011aVRoZW1lUHJvdmlkZXIyIiwiX1JhaXNlZEJ1dHRvbiIsIl9UZXh0RmllbGQiLCJfVGV4dEZpZWxkMiIsIl9DYXJkIiwiX0ZsYXRCdXR0b24iLCJfRmxhdEJ1dHRvbjIiLCJfYXhpb3MiLCJfYXhpb3MyIiwiX0hlYWRlciIsIl9IZWFkZXIyIiwiRU1QVFlfQ0FMTEJBQ0siLCJTaG9wYWRtTG9naW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiZXJyTXNnIiwib25TdWJtaXQiLCJzdWJtaXRGb3JtIiwiZW5jb2RlZCIsImJ0b2EiLCJtZXRob2QiLCJ1cmwiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsInRoZW4iLCJjb250ZW50cyIsImNvbnNvbGUiLCJsb2ciLCJkYXRhIiwidG9rZW4iLCJjYXRjaCIsImNhdXNlIiwiZXJyb3IiLCJoYW5kbGVLZXlQcmVzcyIsImV2ZW50Iiwia2V5IiwiX3RoaXMyIiwibXNnRWxlbSIsIm9uS2V5UHJlc3MiLCJDYXJkIiwiQ2FyZEhlYWRlciIsInN1YnRpdGxlIiwiQ2FyZFRleHQiLCJleHBhbmRhYmxlIiwibmFtZSIsImhpbnQiLCJmbG9hdGluZ0xhYmVsVGV4dCIsIm9uQ2hhbmdlIiwiZSIsInRhcmdldCIsImhpbnRUZXh0IiwidHlwZSIsIkNhcmRBY3Rpb25zIiwibGFiZWwiLCIyNDUiLCJfcmVhY3REb20iLCJfcmVhY3REb20yIiwiX1Nob3BCYWNrb2ZmaWNlQmFyIiwiX1Nob3BCYWNrb2ZmaWNlQmFyMiIsIl9TaG9wYWRtSW5kZXgiLCJfU2hvcGFkbUluZGV4MiIsIl9TaG9wYWRtTG9naW4iLCJfU2hvcGFkbUxvZ2luMiIsImRvY3VtZW50IiwiY29va2llIiwiY29va2llVG9rZW5TdHIiLCJzcGxpdCIsImZpbmQiLCJzIiwic3RhcnRzV2l0aCIsImNvb2tpZVRva2VuIiwicmVwbGFjZSIsIlNob3BCYWNrb2ZmaWNlIiwidXNlciIsInJlbmRlclJlYWR5Iiwic2hvcCIsImNvbXBvbmVudERpZE1vdW50Iiwic2V0VG9rZW4iLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhhc2giLCJsb2dvdXRGb3JtIiwic3VibWl0IiwiUm91dGUiLCJwYXRoIiwiY29tcG9uZW50IiwiYWN0aW9uIiwicmVmIiwiZiIsImRpc3BsYXkiLCJIYXNoUm91dGVyIiwiZ2V0RWxlbWVudEJ5SWQiXSwibWFwcGluZ3MiOiJBQUFBQSxjQUFjLElBRVJDLElBQ0EsU0FBVUMsRUFBUUMsRUFBU0MsR0FFakMsWUF5Q0EsU0FBU0MsR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsUUFBU0YsR0NqQ3ZGLFFBQVNHLEdBQVFDLEdBQ2IsTUFBT0MsR0FBQUgsUUFBQUksY0FBQUMsRUFBQUwsU0FDSE0sa0JBQ0lILEVBQUFILFFBQUFJLGNBQUFHLEVBQUFQLFFBQUEsS0FBYUcsRUFBQUgsUUFBQUksY0FBQUksRUFBQVIsU0FDVFMsVUFBVSxjQUNWQyxPQUFTQyxNQUFPLFFBQVNDLEtBQU0sWUFHdkNDLGNBQWdCQyxXQUFZLFFBQVNDLFNBQVUsT0FDL0NDLGNBQWdCRixXQUFZLFFBQVNDLFNBQVUsUUFFL0NaLEVBQUFILFFBQUFJLGNBQUFhLEVBQUFqQixTQUFVa0IsWUFBWSxnQkFBZ0JDLFFBQVNqQixFQUFNa0IsWURoQjdEQyxPQUFPQyxlQUFlM0IsRUFBUyxjQUMzQjRCLE9BQU8sR0NUWCxJQUFBQyxHQUFBNUIsRUFBQSxHRGNJTyxFQUFVTixFQUF1QjJCLEdDYnJDQyxFQUFBN0IsRUFBQSxJQUVBOEIsRUFBQTlCLEVBQUEsS0RpQkkrQixFQUFXOUIsRUFBdUI2QixHQ2hCdENFLEVBQUFoQyxF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akksRUFBQUgsUUFBQUksY0FBQXlELEVBQUE3RCxRQUFBLEtBQ0lHLEVBQUFILFFBQUFJLGNBQUEsV0FDSUQsRUFBQUgsUUFBQUksY0FBQW1ILEVBQUF2SCxTQUFtQm9CLFNBQVUsaUJBQU02RSxHQUFLNkMsV0FBV0MsWUFFbkQ1SSxFQUFBSCxRQUFBSSxjQUFBcUIsRUFBQXVILE9BQU9DLEtBQUssU0FBU0MsVUFBQXpCLEVBQUF6SCxVQUVyQkcsRUFBQUgsUUFBQUksY0FBQSxRQUNJK0ksT0FBTyxrQkFDUGxFLE9BQU8sT0FDUG1FLElBQUssU0FBQUMsR0FBQSxNQUFLcEQsR0FBSzZDLFdBQWFPLEdBQzVCM0ksT0FBUzRJLFFBQVMsZUFyQmZuSixFQUFBSCxRQUFBSSxjQUFBdUgsRUFBQTNILFNBQWM2RSxTQUFVbEMsS0FBSytGLFdBSFh2SSxFQUFBSCxRQUFBSSxjQUFBLDJCQWdDN0NpSCxHQUFBckgsUUFBUytDLE9BQ0w1QyxFQUFBSCxRQUFBSSxjQUFBcUIsRUFBQThILFdBQUEsS0FDSXBKLEVBQUFILFFBQUFJLGNBQUNpSSxFQUFELE9BRUpULFNBQVM0QixlQUFlLFlKdVd6QiIsImZpbGUiOiJzaG9wYmFja29mZmljZS5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3ZWJwYWNrSnNvbnAoWzFdLHtcblxuLyoqKi8gMjIxOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdFJvdXRlckRvbSA9IF9fd2VicGFja19yZXF1aXJlX18oNTcpO1xuXG52YXIgX0FwcEJhciA9IF9fd2VicGFja19yZXF1aXJlX18oMTY2KTtcblxudmFyIF9BcHBCYXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQXBwQmFyKTtcblxudmFyIF9EcmF3ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OCk7XG5cbnZhciBfRHJhd2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RyYXdlcik7XG5cbnZhciBfTWVudUl0ZW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Mik7XG5cbnZhciBfTWVudUl0ZW0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTWVudUl0ZW0pO1xuXG52YXIgX25hdmlnYXRpb25BcnJvd0Ryb3BSaWdodCA9IF9fd2VicGFja19yZXF1aXJlX18oMTgwKTtcblxudmFyIF9uYXZpZ2F0aW9uQXJyb3dEcm9wUmlnaHQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbmF2aWdhdGlvbkFycm93RHJvcFJpZ2h0KTtcblxudmFyIF9JY29uTWVudSA9IF9fd2VicGFja19yZXF1aXJlX18oMTY5KTtcblxudmFyIF9JY29uTWVudTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9JY29uTWVudSk7XG5cbnZhciBfSWNvbkJ1dHRvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpO1xuXG52YXIgX0ljb25CdXR0b24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSWNvbkJ1dHRvbik7XG5cbnZhciBfbW9yZVZlcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4MSk7XG5cbnZhciBfbW9yZVZlcnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbW9yZVZlcnQpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBTdWJNZW51KHByb3BzKSB7XG4gICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICBfSWNvbk1lbnUyLmRlZmF1bHQsXG4gICAgICAgIHtcbiAgICAgICAgICAgIGljb25CdXR0b25FbGVtZW50OiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBfSWNvbkJ1dHRvbjIuZGVmYXVsdCxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9tb3JlVmVydDIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdzdWJtZW51LXN2ZycsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7IGNvbG9yOiAnd2hpdGUnLCBmaWxsOiAnd2hpdGUnIH0gfSlcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICB0YXJnZXRPcmlnaW46IHsgaG9yaXpvbnRhbDogJ3JpZ2h0JywgdmVydGljYWw6ICd0b3AnIH0sXG4gICAgICAgICAgICBhbmNob3JPcmlnaW46IHsgaG9yaXpvbnRhbDogJ3JpZ2h0JywgdmVydGljYWw6ICd0b3AnIH0gfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX01lbnVJdGVtMi5kZWZhdWx0LCB7IHByaW1hcnlUZXh0OiAnQ2VycmFyIHNlc2lvbicsIG9uQ2xpY2s6IHByb3BzLm9uTG9nb3V0IH0pXG4gICAgKTtcbn1cblxuU3ViTWVudS5tdWlOYW1lID0gJ0ljb25NZW51JztcblxudmFyIFNob3BCYWNrb2ZmaWNlQmFyID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ1Nob3BCYWNrb2ZmaWNlQmFyJyxcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRyYXdlck9wZW46IGZhbHNlXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9uTG9nb3V0OiBmdW5jdGlvbiBvbkxvZ291dCgpIHt9XG4gICAgICAgIH07XG4gICAgfSxcbiAgICBjbG9zZURyYXdlcjogZnVuY3Rpb24gY2xvc2VEcmF3ZXIoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkcmF3ZXJPcGVuOiBmYWxzZSB9KTtcbiAgICB9LFxuICAgIHRvZ2dsZURyYXdlcjogZnVuY3Rpb24gdG9nZ2xlRHJhd2VyKCkge1xuICAgICAgICB2YXIgZHJhd2VyT3BlbiA9ICF0aGlzLnN0YXRlLmRyYXdlck9wZW47XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkcmF3ZXJPcGVuOiBkcmF3ZXJPcGVuIH0pO1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0FwcEJhcjIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgIG9uTGVmdEljb25CdXR0b25Ub3VjaFRhcDogdGhpcy50b2dnbGVEcmF3ZXIsXG4gICAgICAgICAgICAgICAgaWNvbkVsZW1lbnRSaWdodDogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoU3ViTWVudSwgeyBvbkxvZ291dDogdGhpcy5wcm9wcy5vbkxvZ291dCB9KSxcbiAgICAgICAgICAgICAgICB0aXRsZTogJ0FkbWluaXN0cmFjaW9uIGNvbWVyY2lvJyB9KSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIF9EcmF3ZXIyLmRlZmF1bHQsXG4gICAgICAgICAgICAgICAgeyBvcGVuOiB0aGlzLnN0YXRlLmRyYXdlck9wZW4sIGRvY2tlZDogZmFsc2UsIG9uUmVxdWVzdENoYW5nZTogZnVuY3Rpb24gb25SZXF1ZXN0Q2hhbmdlKG9wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7IGRyYXdlck9wZW46IG9wZW4gfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Um91dGVyRG9tLkxpbmssXG4gICAgICAgICAgICAgICAgICAgIHsgdG86ICcvaW5kZXgnLCBvbkNsaWNrOiB0aGlzLmNsb3NlRHJhd2VyIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgX01lbnVJdGVtMi5kZWZhdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdQcmluY2lwYWwnXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFNob3BCYWNrb2ZmaWNlQmFyO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMjI0OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqIENvbXBvbmVudGUgaW5kaWNlIGRlIGFkbWluaXN0cmFjaW9uIGRlIEhPWSBDT01PICovXG52YXIgU2hvcGFkbUluZGV4ID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogXCJTaG9wYWRtSW5kZXhcIixcblxuICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6IFwid2l0aC1tYXJnaW4gaW5kZXhcIiB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgXCJoMVwiLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgXCJBZG1pbmlzdHJhY2lvbiBkZSBjb21lcmNpb1wiXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgXCJoMlwiLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgXCJDb25maWd1cmFjaW9uIHkgZXN0YWRpc3RpY2FzXCJcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBcInBcIixcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIFwiRGVzZGUgYXF1aSBlcyBwb3NpYmxlIGFjdHVhbGl6YXIgZWwgbWVudSB5IG9idGVuZXIgZXN0YWRpc3RpY2FzIGRlIGxvcyBwZWRpZG9zIG1lbnN1YWxlcy5cIlxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBTaG9wYWRtSW5kZXg7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAyMjU6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX011aVRoZW1lUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTtcblxudmFyIF9NdWlUaGVtZVByb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX011aVRoZW1lUHJvdmlkZXIpO1xuXG52YXIgX1JhaXNlZEJ1dHRvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNjgpO1xuXG52YXIgX1JhaXNlZEJ1dHRvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9SYWlzZWRCdXR0b24pO1xuXG52YXIgX1RleHRGaWVsZCA9IF9fd2VicGFja19yZXF1aXJlX18oNjkpO1xuXG52YXIgX1RleHRGaWVsZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9UZXh0RmllbGQpO1xuXG52YXIgX0NhcmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY2KTtcblxudmFyIF9GbGF0QnV0dG9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cbnZhciBfRmxhdEJ1dHRvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9GbGF0QnV0dG9uKTtcblxudmFyIF9heGlvcyA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpO1xuXG52YXIgX2F4aW9zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F4aW9zKTtcblxudmFyIF9IZWFkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDczKTtcblxudmFyIF9IZWFkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSGVhZGVyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLy9pbXBvcnQgbWFpbkNvbmZpZyBmcm9tICcuLi9jb25maWcvbWFpbi1jb25maWcnO1xuXG4vKiBGSU4gREUgSU1QT1JUUyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG52YXIgRU1QVFlfQ0FMTEJBQ0sgPSBmdW5jdGlvbiBFTVBUWV9DQUxMQkFDSygpIHt9O1xuXG52YXIgU2hvcGFkbUxvZ2luID0gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ1Nob3BhZG1Mb2dpbicsXG5cbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiAnJyxcbiAgICAgICAgICAgIHBhc3N3b3JkOiAnJyxcbiAgICAgICAgICAgIGVyck1zZzogbnVsbFxuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICAgICAgcmV0dXJuIHsgb25TdWJtaXQ6IEVNUFRZX0NBTExCQUNLIH07XG4gICAgfSxcblxuICAgIHN1Ym1pdEZvcm06IGZ1bmN0aW9uIHN1Ym1pdEZvcm0oKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgdmFyIHVzZXJuYW1lID0gdGhpcy5zdGF0ZS51c2VybmFtZTtcbiAgICAgICAgdmFyIHBhc3N3b3JkID0gdGhpcy5zdGF0ZS5wYXNzd29yZDtcblxuICAgICAgICAvL2hhZ28gZW5jb2RpbmcgYmFzZTY0IHBhcmEgcGFzYXIgbGFzIGNyZWRlbmNpYWxlc1xuICAgICAgICB2YXIgZW5jb2RlZCA9IGJ0b2EodXNlcm5hbWUgKyAnOicgKyBwYXNzd29yZCk7XG5cbiAgICAgICAgKDAsIF9heGlvczIuZGVmYXVsdCkoe1xuICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsIC8veW91IGNhbiBzZXQgd2hhdCByZXF1ZXN0IHlvdSB3YW50IHRvIGJlXG4gICAgICAgICAgICB1cmw6ICcvYXBpL3YxL3Nob3BhZG0vbG9naW4nLFxuICAgICAgICAgICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiAnQmFzaWMgJyArIGVuY29kZWQgfVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChjb250ZW50cykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvbnRlbmlkbzonKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvbnRlbnRzLmRhdGEpO1xuICAgICAgICAgICAgX3RoaXMucHJvcHMub25TdWJtaXQoY29udGVudHMuZGF0YS50b2tlbik7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChjYXVzZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihjYXVzZSk7XG4gICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGVyck1zZzogJ0NyZWRlbmNpYWxlcyBpbnZhbGlkYXMnIH0pO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgaGFuZGxlS2V5UHJlc3M6IGZ1bmN0aW9uIGhhbmRsZUtleVByZXNzKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5rZXkgPT0gJ0VudGVyJykgdGhpcy5zdWJtaXRGb3JtKCk7XG4gICAgfSxcblxuICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICB2YXIgbXNnRWxlbSA9IHRoaXMuc3RhdGUuZXJyTXNnID8gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAncCcsXG4gICAgICAgICAgICB7IHN0eWxlOiB7IGNvbG9yOiAncmVkJyB9IH0sXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmVyck1zZ1xuICAgICAgICApIDogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIG51bGwpO1xuXG4gICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBvbktleVByZXNzOiB0aGlzLmhhbmRsZUtleVByZXNzIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfSGVhZGVyMi5kZWZhdWx0LCB7IHRpdGxlOiAnQWRtaW5pc3RyYWNpb24gY29tZXJjaW8nIH0pLFxuICAgICAgICAgICAgbXNnRWxlbSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIF9NdWlUaGVtZVByb3ZpZGVyMi5kZWZhdWx0LFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIF9DYXJkLkNhcmQsXG4gICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9DYXJkLkNhcmRIZWFkZXIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnSW5pY2lhciBzZXNpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6ICdJbmdyZXNlIGNyZWRlbmNpYWxlcycgfSksXG4gICAgICAgICAgICAgICAgICAgICc7JyxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBfQ2FyZC5DYXJkVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgZXhwYW5kYWJsZTogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9UZXh0RmllbGQyLmRlZmF1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndXNlcm5hbWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpbnQ6ICd1c2VybmFtZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRpbmdMYWJlbFRleHQ6ICd1c2VybmFtZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5zZXRTdGF0ZSh7IHVzZXJuYW1lOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2JyJywgbnVsbCksXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfVGV4dEZpZWxkMi5kZWZhdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaW50VGV4dDogJ1Bhc3N3b3JkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9hdGluZ0xhYmVsVGV4dDogJ1Bhc3N3b3JkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncGFzc3dvcmQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLnBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuc2V0U3RhdGUoeyBwYXNzd29yZDogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdicicsIG51bGwpXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgX0NhcmQuQ2FyZEFjdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0ZsYXRCdXR0b24yLmRlZmF1bHQsIHsgbGFiZWw6ICdJbmljaWFyIHNlc2lvbicsIG9uQ2xpY2s6IHRoaXMuc3VibWl0Rm9ybSB9KVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBTaG9wYWRtTG9naW47XG5cbi8qKiovIH0pLFxuXG4vKioqLyAyNDU6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdERvbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXG52YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblxudmFyIF9yZWFjdFJvdXRlckRvbSA9IF9fd2VicGFja19yZXF1aXJlX18oNTcpO1xuXG52YXIgX011aVRoZW1lUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTtcblxudmFyIF9NdWlUaGVtZVByb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX011aVRoZW1lUHJvdmlkZXIpO1xuXG52YXIgX2F4aW9zID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG5cbnZhciBfYXhpb3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXhpb3MpO1xuXG52YXIgX1Nob3BCYWNrb2ZmaWNlQmFyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMjEpO1xuXG52YXIgX1Nob3BCYWNrb2ZmaWNlQmFyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Nob3BCYWNrb2ZmaWNlQmFyKTtcblxudmFyIF9TaG9wYWRtSW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyNCk7XG5cbnZhciBfU2hvcGFkbUluZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Nob3BhZG1JbmRleCk7XG5cbnZhciBfU2hvcGFkbUxvZ2luID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMjUpO1xuXG52YXIgX1Nob3BhZG1Mb2dpbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TaG9wYWRtTG9naW4pO1xuXG52YXIgX3JlYWN0VGFwRXZlbnRQbHVnaW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg2KTtcblxudmFyIF9yZWFjdFRhcEV2ZW50UGx1Z2luMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0VGFwRXZlbnRQbHVnaW4pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4oMCwgX3JlYWN0VGFwRXZlbnRQbHVnaW4yLmRlZmF1bHQpKCk7XG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vKiBFU1RFIEZSQUdNRU5UTyBERSBDT0RJR08gRVMgUkVRVUVSSURPIFBBUkEgTE9TIEVWRU5UT1MgREUgVElQTyBUT1VDSCBPIENMSUNLIEVOIENPTVBPTkVOVEVTIE1BVEVSSUFMLVVJICovXG5jb25zb2xlLmxvZygnUGFyc2VhbmRvIGNvb2tpZSAnICsgZG9jdW1lbnQuY29va2llKTtcbnZhciBjb29raWUgPSBkb2N1bWVudC5jb29raWUgfHwgJyc7XG52YXIgY29va2llVG9rZW5TdHIgPSBjb29raWUuc3BsaXQoJzsgJykuZmluZChmdW5jdGlvbiAocykge1xuICAgIHJldHVybiBzLnN0YXJ0c1dpdGgoJ3Rva2VuPScpO1xufSk7XG52YXIgY29va2llVG9rZW4gPSBjb29raWVUb2tlblN0ciA/IGNvb2tpZVRva2VuU3RyLnJlcGxhY2UoJ3Rva2VuPScsICcnKSA6IG51bGw7XG5cbnZhciBTaG9wQmFja29mZmljZSA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVDbGFzcyh7XG4gICAgZGlzcGxheU5hbWU6ICdTaG9wQmFja29mZmljZScsXG4gICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b2tlbjogbnVsbCxcbiAgICAgICAgICAgIHVzZXI6IG51bGwsXG4gICAgICAgICAgICByZW5kZXJSZWFkeTogZmFsc2UsXG4gICAgICAgICAgICBzaG9wOiBudWxsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIC8qIFNFIENBUkdBTiBMQVMgQ0FOQ0lPTkVTIERFU1BVRVMgUVVFIEVMIENPTVBPTkVOVEUgSEFZQSBTSURPIE1PTlRBRE8gKi9cbiAgICAgICAgY29uc29sZS5sb2coJ1Nob3BCYWNrb2ZmaWNlIE1PTlRBREEhJyk7XG4gICAgICAgIC8qIFNpIHNlIGVuY3VlbnRyYSB1biB0b2tlbiBlbiBsYXMgY29va2llcyBlbnRvbmNlcyBzZSBzZXRlYSBlbCBtaXNtbyB5IHNlIG9idGllbmUgZWwgdXN1YXJpb1xyXG4gICAgICAgIENhc28gY29udHJhcmlvLCBzZSBtYXJjYSBhbCBjb21wb25lbnRlIGNvbW8gbGlzdG8gcGFyYSByZW5kZXJpemFyICovXG4gICAgICAgIGlmIChjb29raWVUb2tlbikgdGhpcy5zZXRUb2tlbihjb29raWVUb2tlbik7ZWxzZSB0aGlzLnNldFN0YXRlKHsgcmVuZGVyUmVhZHk6IHRydWUgfSk7XG4gICAgfSxcbiAgICBzZXRUb2tlbjogZnVuY3Rpb24gc2V0VG9rZW4odG9rZW4pIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICB0b2tlbiA9IHRva2VuLnRva2VuIHx8IHRva2VuO1xuICAgICAgICBjb25zb2xlLmxvZygnU2V0ZWFuZG8gdG9rZW4gJyArIHRva2VuKTtcblxuICAgICAgICB2YXIgY29uZmlnID0geyBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4gfSB9O1xuICAgICAgICAoMCwgX2F4aW9zMi5kZWZhdWx0KSh7XG4gICAgICAgICAgICBtZXRob2Q6ICdnZXQnLCAvL3lvdSBjYW4gc2V0IHdoYXQgcmVxdWVzdCB5b3Ugd2FudCB0byBiZVxuICAgICAgICAgICAgdXJsOiAnL2FwaS92MS9zaG9wYWRtL215c2hvcCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyArIHRva2VuIH1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29udGVudHMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvbnRlbnRzLmRhdGEpO1xuICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyB0b2tlbjogdG9rZW4sIHNob3A6IGNvbnRlbnRzLmRhdGEuc2hvcCwgcmVuZGVyUmVhZHk6IHRydWUgfSk7XG4gICAgICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdSRU5ERVJJTkcgU2hvcEJhY2tvZmZpY2UhJyk7XG5cbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLnJlbmRlclJlYWR5KSByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgJ0VzcGVyZS4uLidcbiAgICAgICAgKTtcblxuICAgICAgICB2YXIgdG9rZW4gPSB0aGlzLnN0YXRlLnRva2VuO1xuICAgICAgICBpZiAoIXRva2VuKSByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1Nob3BhZG1Mb2dpbjIuZGVmYXVsdCwgeyBvblN1Ym1pdDogdGhpcy5zZXRUb2tlbiB9KTtcblxuICAgICAgICBjb25zb2xlLmxvZygnd2luZG93LmxvY2F0aW9uLmhhc2g6ICcgKyB3aW5kb3cubG9jYXRpb24uaGFzaCk7XG4gICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaGFzaCA9PSAnIy8nKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUkVQTEFDSU5HIExPQ0FUSU9OJyk7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgnL3Nob3BhZG0jL2luZGV4Jyk7XG4gICAgICAgICAgICAvL3JldHVybiA8c3Bhbj5SZWRpcmVjY2lvbmFuZG8uLi48L3NwYW4+O1xuICAgICAgICB9XG5cbiAgICAgICAgLyogU2kgdW4gdXN1YXJpbyBpbmljaW8gc2VzaW9uLCByZW5kZXJpem8gbGEgYXBwIG5vcm1hbCAqL1xuICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBfTXVpVGhlbWVQcm92aWRlcjIuZGVmYXVsdCxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9TaG9wQmFja29mZmljZUJhcjIuZGVmYXVsdCwgeyBvbkxvZ291dDogZnVuY3Rpb24gb25Mb2dvdXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmxvZ291dEZvcm0uc3VibWl0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Um91dGVyRG9tLlJvdXRlLCB7IHBhdGg6ICcvaW5kZXgnLCBjb21wb25lbnQ6IF9TaG9wYWRtSW5kZXgyLmRlZmF1bHQgfSksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nLCB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJy9zaG9wYWRtL2xvZ291dCcsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmxvZ291dEZvcm0gPSBmO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogeyBkaXNwbGF5OiAnaGlkZGVuJyB9IH0pXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxufSk7XG5cbl9yZWFjdERvbTIuZGVmYXVsdC5yZW5kZXIoX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgX3JlYWN0Um91dGVyRG9tLkhhc2hSb3V0ZXIsXG4gICAgbnVsbCxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChTaG9wQmFja29mZmljZSwgbnVsbClcbiksIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb290JykpO1xuXG4vKioqLyB9KVxuXG59LFsyNDVdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc2hvcGJhY2tvZmZpY2UuYnVuZGxlLmpzIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5cclxuaW1wb3J0IEFwcEJhciBmcm9tICdtYXRlcmlhbC11aS9BcHBCYXInO1xyXG5pbXBvcnQgRHJhd2VyIGZyb20gJ21hdGVyaWFsLXVpL0RyYXdlcic7XHJcbmltcG9ydCBNZW51SXRlbSBmcm9tICdtYXRlcmlhbC11aS9NZW51SXRlbSc7XHJcbmltcG9ydCBBcnJvd0Ryb3BSaWdodCBmcm9tICdtYXRlcmlhbC11aS9zdmctaWNvbnMvbmF2aWdhdGlvbi1hcnJvdy1kcm9wLXJpZ2h0JztcclxuXHJcbmltcG9ydCBJY29uTWVudSBmcm9tICdtYXRlcmlhbC11aS9JY29uTWVudSc7XHJcbmltcG9ydCBJY29uQnV0dG9uIGZyb20gJ21hdGVyaWFsLXVpL0ljb25CdXR0b24nO1xyXG5pbXBvcnQgTW9yZVZlcnRJY29uIGZyb20gJ21hdGVyaWFsLXVpL3N2Zy1pY29ucy9uYXZpZ2F0aW9uL21vcmUtdmVydCc7XHJcblxyXG5cclxuZnVuY3Rpb24gU3ViTWVudShwcm9wcykge1xyXG4gICAgcmV0dXJuIDxJY29uTWVudVxyXG4gICAgICAgIGljb25CdXR0b25FbGVtZW50PXtcclxuICAgICAgICAgICAgPEljb25CdXR0b24gPjxNb3JlVmVydEljb25cclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nc3VibWVudS1zdmcnXHJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyBjb2xvcjogJ3doaXRlJywgZmlsbDogJ3doaXRlJyB9fSAvPlxyXG4gICAgICAgICAgICA8L0ljb25CdXR0b24+XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhcmdldE9yaWdpbj17eyBob3Jpem9udGFsOiAncmlnaHQnLCB2ZXJ0aWNhbDogJ3RvcCcgfX1cclxuICAgICAgICBhbmNob3JPcmlnaW49e3sgaG9yaXpvbnRhbDogJ3JpZ2h0JywgdmVydGljYWw6ICd0b3AnIH19PlxyXG5cclxuICAgICAgICA8TWVudUl0ZW0gcHJpbWFyeVRleHQ9XCJDZXJyYXIgc2VzaW9uXCIgb25DbGljaz17cHJvcHMub25Mb2dvdXR9IC8+XHJcbiAgICA8L0ljb25NZW51PjtcclxufVxyXG5cclxuU3ViTWVudS5tdWlOYW1lID0gJ0ljb25NZW51JztcclxuXHJcbmNvbnN0IFNob3BCYWNrb2ZmaWNlQmFyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xyXG4gICAgZ2V0SW5pdGlhbFN0YXRlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGRyYXdlck9wZW46IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0RGVmYXVsdFByb3BzKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG9uTG9nb3V0OiAoKSA9PiB7IH1cclxuICAgICAgICB9O1xyXG4gICAgfSxcclxuXHJcbiAgICBjbG9zZURyYXdlcigpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgZHJhd2VyT3BlbjogZmFsc2UgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHRvZ2dsZURyYXdlcigpIHtcclxuICAgICAgICBjb25zdCBkcmF3ZXJPcGVuID0gIXRoaXMuc3RhdGUuZHJhd2VyT3BlbjtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgZHJhd2VyT3BlbiB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgPlxyXG4gICAgICAgICAgICAgICAgPEFwcEJhclxyXG4gICAgICAgICAgICAgICAgICAgIG9uTGVmdEljb25CdXR0b25Ub3VjaFRhcD17dGhpcy50b2dnbGVEcmF3ZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbkVsZW1lbnRSaWdodD17PFN1Yk1lbnUgb25Mb2dvdXQ9e3RoaXMucHJvcHMub25Mb2dvdXR9IC8+fVxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiQWRtaW5pc3RyYWNpb24gY29tZXJjaW9cIiAvPlxyXG5cclxuICAgICAgICAgICAgICAgIDxEcmF3ZXIgb3Blbj17dGhpcy5zdGF0ZS5kcmF3ZXJPcGVufSBkb2NrZWQ9e2ZhbHNlfSBvblJlcXVlc3RDaGFuZ2U9e29wZW4gPT4gdGhpcy5zZXRTdGF0ZSh7IGRyYXdlck9wZW46IG9wZW4gfSl9ID5cclxuICAgICAgICAgICAgICAgICAgICA8TGluayB0bz1cIi9pbmRleFwiIG9uQ2xpY2s9e3RoaXMuY2xvc2VEcmF3ZXJ9PjxNZW51SXRlbSA+UHJpbmNpcGFsPC9NZW51SXRlbT48L0xpbms+XHJcblxyXG4gICAgICAgICAgICAgICAgPC9EcmF3ZXI+XHJcbiAgICAgICAgICAgIDwvZGl2ID5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNob3BCYWNrb2ZmaWNlQmFyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NvbXBvbmVudHMvU2hvcEJhY2tvZmZpY2VCYXIuanMiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuLyoqIENvbXBvbmVudGUgaW5kaWNlIGRlIGFkbWluaXN0cmFjaW9uIGRlIEhPWSBDT01PICovXHJcbmNvbnN0IFNob3BhZG1JbmRleCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid2l0aC1tYXJnaW4gaW5kZXhcIj5cclxuICAgICAgICAgICAgICAgIDxoMT5BZG1pbmlzdHJhY2lvbiBkZSBjb21lcmNpbzwvaDE+XHJcbiAgICAgICAgICAgICAgICA8aDI+Q29uZmlndXJhY2lvbiB5IGVzdGFkaXN0aWNhczwvaDI+XHJcbiAgICAgICAgICAgICAgICA8cD5EZXNkZSBhcXVpIGVzIHBvc2libGUgYWN0dWFsaXphciBlbCBtZW51IHkgb2J0ZW5lciBlc3RhZGlzdGljYXMgZGUgbG9zIHBlZGlkb3MgbWVuc3VhbGVzLlxyXG4gICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNob3BhZG1JbmRleDtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9jb21wb25lbnRzL1Nob3BhZG1JbmRleC5qcyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5pbXBvcnQgTXVpVGhlbWVQcm92aWRlciBmcm9tICdtYXRlcmlhbC11aS9zdHlsZXMvTXVpVGhlbWVQcm92aWRlcic7XHJcbmltcG9ydCBSYWlzZWRCdXR0b24gZnJvbSAnbWF0ZXJpYWwtdWkvUmFpc2VkQnV0dG9uJztcclxuaW1wb3J0IFRleHRGaWVsZCBmcm9tICdtYXRlcmlhbC11aS9UZXh0RmllbGQnO1xyXG5pbXBvcnQgeyBDYXJkLCBDYXJkQWN0aW9ucywgQ2FyZEhlYWRlciwgQ2FyZFRleHQgfSBmcm9tICdtYXRlcmlhbC11aS9DYXJkJztcclxuaW1wb3J0IEZsYXRCdXR0b24gZnJvbSAnbWF0ZXJpYWwtdWkvRmxhdEJ1dHRvbic7XHJcblxyXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5cclxuaW1wb3J0IEhlYWRlciBmcm9tICcuL0hlYWRlcic7XHJcbi8vaW1wb3J0IG1haW5Db25maWcgZnJvbSAnLi4vY29uZmlnL21haW4tY29uZmlnJztcclxuXHJcbi8qIEZJTiBERSBJTVBPUlRTIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5jb25zdCBFTVBUWV9DQUxMQkFDSyA9ICgpID0+IHsgfTtcclxuXHJcbmNvbnN0IFNob3BhZG1Mb2dpbiA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHVzZXJuYW1lOiAnJyxcclxuICAgICAgICAgICAgcGFzc3dvcmQ6ICcnLFxyXG4gICAgICAgICAgICBlcnJNc2c6IG51bGwsXHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgb25TdWJtaXQ6IEVNUFRZX0NBTExCQUNLIH07XHJcbiAgICB9LFxyXG5cclxuICAgIHN1Ym1pdEZvcm06IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zdCB1c2VybmFtZSA9IHRoaXMuc3RhdGUudXNlcm5hbWU7XHJcbiAgICAgICAgY29uc3QgcGFzc3dvcmQgPSB0aGlzLnN0YXRlLnBhc3N3b3JkO1xyXG5cclxuICAgICAgICAvL2hhZ28gZW5jb2RpbmcgYmFzZTY0IHBhcmEgcGFzYXIgbGFzIGNyZWRlbmNpYWxlc1xyXG4gICAgICAgIGNvbnN0IGVuY29kZWQgPSBidG9hKHVzZXJuYW1lICsgJzonICsgcGFzc3dvcmQpO1xyXG5cclxuICAgICAgICBheGlvcyh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLCAvL3lvdSBjYW4gc2V0IHdoYXQgcmVxdWVzdCB5b3Ugd2FudCB0byBiZVxyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL3YxL3Nob3BhZG0vbG9naW4nLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246ICdCYXNpYyAnICsgZW5jb2RlZCB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oY29udGVudHMgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvbnRlbmlkbzonKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvbnRlbnRzLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vblN1Ym1pdChjb250ZW50cy5kYXRhLnRva2VuKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGNhdXNlID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoY2F1c2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGVyck1zZzogJ0NyZWRlbmNpYWxlcyBpbnZhbGlkYXMnIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgaGFuZGxlS2V5UHJlc3M6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC5rZXkgPT0gJ0VudGVyJykgdGhpcy5zdWJtaXRGb3JtKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxldCBtc2dFbGVtID0gdGhpcy5zdGF0ZS5lcnJNc2cgPyA8cCBzdHlsZT17eyBjb2xvcjogJ3JlZCcgfX0gPnt0aGlzLnN0YXRlLmVyck1zZ308L3A+IDogPGRpdiAvPjtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBvbktleVByZXNzPXt0aGlzLmhhbmRsZUtleVByZXNzfT5cclxuICAgICAgICAgICAgICAgIDxIZWFkZXIgdGl0bGU9XCJBZG1pbmlzdHJhY2lvbiBjb21lcmNpb1wiIC8+XHJcbiAgICAgICAgICAgICAgICB7bXNnRWxlbX1cclxuICAgICAgICAgICAgICAgIDxNdWlUaGVtZVByb3ZpZGVyPlxyXG4gICAgICAgICAgICAgICAgICAgIDxDYXJkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Q2FyZEhlYWRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJJbmljaWFyIHNlc2lvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZT0nSW5ncmVzZSBjcmVkZW5jaWFsZXMnIC8+O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPENhcmRUZXh0IGV4cGFuZGFibGU9e2ZhbHNlfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0RmllbGRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwidXNlcm5hbWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpbnQ9XCJ1c2VybmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRpbmdMYWJlbFRleHQ9XCJ1c2VybmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudXNlcm5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gdGhpcy5zZXRTdGF0ZSh7IHVzZXJuYW1lOiBlLnRhcmdldC52YWx1ZSB9KX0gLz48YnIgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGV4dEZpZWxkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInBhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaW50VGV4dD1cIlBhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9hdGluZ0xhYmVsVGV4dD1cIlBhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnBhc3N3b3JkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHRoaXMuc2V0U3RhdGUoeyBwYXNzd29yZDogZS50YXJnZXQudmFsdWUgfSl9IC8+PGJyIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQ2FyZFRleHQ+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Q2FyZEFjdGlvbnM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RmxhdEJ1dHRvbiBsYWJlbD1cIkluaWNpYXIgc2VzaW9uXCIgb25DbGljaz17dGhpcy5zdWJtaXRGb3JtfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0NhcmRBY3Rpb25zPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvQ2FyZD5cclxuXHJcbiAgICAgICAgICAgICAgICA8L011aVRoZW1lUHJvdmlkZXIgPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNob3BhZG1Mb2dpbjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9jb21wb25lbnRzL1Nob3BhZG1Mb2dpbi5qcyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBSZWFjdERvbSBmcm9tICdyZWFjdC1kb20nO1xyXG5pbXBvcnQgeyBIYXNoUm91dGVyIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcbmltcG9ydCB7IFJvdXRlIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcblxyXG5pbXBvcnQgTXVpVGhlbWVQcm92aWRlciBmcm9tICdtYXRlcmlhbC11aS9zdHlsZXMvTXVpVGhlbWVQcm92aWRlcic7XHJcblxyXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5cclxuaW1wb3J0IFNob3BCYWNrb2ZmaWNlQmFyIGZyb20gJy4vU2hvcEJhY2tvZmZpY2VCYXInO1xyXG5pbXBvcnQgU2hvcGFkbUluZGV4IGZyb20gJy4vU2hvcGFkbUluZGV4JztcclxuaW1wb3J0IFNob3BhZG1Mb2dpbiBmcm9tICcuL1Nob3BhZG1Mb2dpbic7XHJcblxyXG4vKiBFU1RFIEZSQUdNRU5UTyBERSBDT0RJR08gRVMgUkVRVUVSSURPIFBBUkEgTE9TIEVWRU5UT1MgREUgVElQTyBUT1VDSCBPIENMSUNLIEVOIENPTVBPTkVOVEVTIE1BVEVSSUFMLVVJICovXHJcbmltcG9ydCBpbmplY3RUYXBFdmVudFBsdWdpbiBmcm9tICdyZWFjdC10YXAtZXZlbnQtcGx1Z2luJztcclxuaW5qZWN0VGFwRXZlbnRQbHVnaW4oKTtcclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmNvbnNvbGUubG9nKCdQYXJzZWFuZG8gY29va2llICcgKyBkb2N1bWVudC5jb29raWUpO1xyXG5jb25zdCBjb29raWUgPSBkb2N1bWVudC5jb29raWUgfHwgJyc7XHJcbmNvbnN0IGNvb2tpZVRva2VuU3RyID0gY29va2llLnNwbGl0KCc7ICcpLmZpbmQocyA9PiBzLnN0YXJ0c1dpdGgoJ3Rva2VuPScpKTtcclxuY29uc3QgY29va2llVG9rZW4gPSBjb29raWVUb2tlblN0ciA/IGNvb2tpZVRva2VuU3RyLnJlcGxhY2UoJ3Rva2VuPScsICcnKSA6IG51bGw7XHJcblxyXG5jb25zdCBTaG9wQmFja29mZmljZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuICAgIGdldEluaXRpYWxTdGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0b2tlbjogbnVsbCxcclxuICAgICAgICAgICAgdXNlcjogbnVsbCxcclxuICAgICAgICAgICAgcmVuZGVyUmVhZHk6IGZhbHNlLFxyXG4gICAgICAgICAgICBzaG9wOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgLyogU0UgQ0FSR0FOIExBUyBDQU5DSU9ORVMgREVTUFVFUyBRVUUgRUwgQ09NUE9ORU5URSBIQVlBIFNJRE8gTU9OVEFETyAqL1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTaG9wQmFja29mZmljZSBNT05UQURBIScpO1xyXG4gICAgICAgIC8qIFNpIHNlIGVuY3VlbnRyYSB1biB0b2tlbiBlbiBsYXMgY29va2llcyBlbnRvbmNlcyBzZSBzZXRlYSBlbCBtaXNtbyB5IHNlIG9idGllbmUgZWwgdXN1YXJpb1xyXG4gICAgICAgIENhc28gY29udHJhcmlvLCBzZSBtYXJjYSBhbCBjb21wb25lbnRlIGNvbW8gbGlzdG8gcGFyYSByZW5kZXJpemFyICovXHJcbiAgICAgICAgaWYgKGNvb2tpZVRva2VuKSB0aGlzLnNldFRva2VuKGNvb2tpZVRva2VuKTtcclxuICAgICAgICBlbHNlIHRoaXMuc2V0U3RhdGUoeyByZW5kZXJSZWFkeTogdHJ1ZSB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0VG9rZW4odG9rZW4pIHtcclxuICAgICAgICB0b2tlbiA9IHRva2VuLnRva2VuIHx8IHRva2VuO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTZXRlYW5kbyB0b2tlbiAnICsgdG9rZW4pO1xyXG5cclxuICAgICAgICBjb25zdCBjb25maWcgPSB7IGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dG9rZW59YCB9IH07XHJcbiAgICAgICAgYXhpb3Moe1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdnZXQnLCAvL3lvdSBjYW4gc2V0IHdoYXQgcmVxdWVzdCB5b3Ugd2FudCB0byBiZVxyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL3YxL3Nob3BhZG0vbXlzaG9wJyxcclxuICAgICAgICAgICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcgKyB0b2tlbiB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oY29udGVudHMgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coY29udGVudHMuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgdG9rZW4sIHNob3A6IGNvbnRlbnRzLmRhdGEuc2hvcCwgcmVuZGVyUmVhZHk6IHRydWUgfSk7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG4gICAgfSxcclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1JFTkRFUklORyBTaG9wQmFja29mZmljZSEnKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLnJlbmRlclJlYWR5KSByZXR1cm4gKDxzcGFuPkVzcGVyZS4uLjwvc3Bhbj4pO1xyXG5cclxuICAgICAgICBjb25zdCB0b2tlbiA9IHRoaXMuc3RhdGUudG9rZW47XHJcbiAgICAgICAgaWYgKCF0b2tlbikgcmV0dXJuIDxTaG9wYWRtTG9naW4gb25TdWJtaXQ9e3RoaXMuc2V0VG9rZW59IC8+O1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnd2luZG93LmxvY2F0aW9uLmhhc2g6ICcgKyB3aW5kb3cubG9jYXRpb24uaGFzaCk7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5oYXNoID09ICcjLycpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1JFUExBQ0lORyBMT0NBVElPTicpO1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgnL3Nob3BhZG0jL2luZGV4Jyk7XHJcbiAgICAgICAgICAgIC8vcmV0dXJuIDxzcGFuPlJlZGlyZWNjaW9uYW5kby4uLjwvc3Bhbj47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBTaSB1biB1c3VhcmlvIGluaWNpbyBzZXNpb24sIHJlbmRlcml6byBsYSBhcHAgbm9ybWFsICovXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPE11aVRoZW1lUHJvdmlkZXI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxTaG9wQmFja29mZmljZUJhciBvbkxvZ291dD17KCkgPT4gdGhpcy5sb2dvdXRGb3JtLnN1Ym1pdCgpfSAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8Um91dGUgcGF0aD1cIi9pbmRleFwiIGNvbXBvbmVudD17U2hvcGFkbUluZGV4fSAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8Zm9ybVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb249Jy9zaG9wYWRtL2xvZ291dCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kPSdQT1NUJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9e2YgPT4gdGhpcy5sb2dvdXRGb3JtID0gZn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogJ2hpZGRlbicgfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvTXVpVGhlbWVQcm92aWRlcj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59KTtcclxuXHJcblJlYWN0RG9tLnJlbmRlcihcclxuICAgIDxIYXNoUm91dGVyPlxyXG4gICAgICAgIDxTaG9wQmFja29mZmljZSAvPlxyXG4gICAgPC9IYXNoUm91dGVyPixcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb290JylcclxuKTtcclxuXHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NvbXBvbmVudHMvU2hvcEJhY2tvZmZpY2UuanMiXSwic291cmNlUm9vdCI6IiJ9